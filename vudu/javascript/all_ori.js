var MooTools={version:"1.2.5",build:"008d8f0f2fcc2044e54fdd3635341aaab274e757"},Native=function(e){var t,i=(e=e||{}).name,s=e.legacy,n=e.protect,a=e.implement,o=e.generics,r=e.initialize,l=e.afterImplement||function(){},u=r||s,o=!1!==o;u.constructor=Native,u.$family={name:"native"},s&&r&&(u.prototype=s.prototype),u.prototype.constructor=u,i&&(t=i.toLowerCase(),u.prototype.$family={name:t},Native.typize(u,t));function d(e,t,i,s){return n&&!s&&e.prototype[t]||(e.prototype[t]=i),o&&Native.genericize(e,t,n),l.call(e,t,i),e}return u.alias=function(e,t,i){if("string"==typeof e&&(e=this.prototype[e]))return d(this,t,e,i);for(var s in e)this.alias(s,e[s],t);return this},u.implement=function(e,t,i){if("string"==typeof e)return d(this,e,t,i);for(var s in e)d(this,s,e[s],t);return this},a&&u.implement(a),u};Native.genericize=function(t,i,e){e&&t[i]||"function"!=typeof t.prototype[i]||(t[i]=function(){var e=Array.prototype.slice.call(arguments);return t.prototype[i].apply(e.shift(),e)})},Native.implement=function(e,t){for(var i=0,s=e.length;i<s;i++)e[i].implement(t)},Native.typize=function(e,t){e.type||(e.type=function(e){return $type(e)===t})},function(){var e={Array:Array,Date:Date,Function:Function,Number:Number,RegExp:RegExp,String:String};for(var t in e)new Native({name:t,initialize:e[t],protect:!0});var i={boolean:Boolean,native:Native,object:Object};for(var s in i)Native.typize(i[s],s);var n={Array:["concat","indexOf","join","lastIndexOf","pop","push","reverse","shift","slice","sort","splice","toString","unshift","valueOf"],String:["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","valueOf"]};for(var a in n)for(var o=n[a].length;o--;)Native.genericize(e[a],n[a][o],!0)}();var Hash=new Native({name:"Hash",initialize:function(e){for(var t in"hash"==$type(e)&&(e=$unlink(e.getClean())),e)this[t]=e[t];return this}});function $A(e){if(e.item){for(var t=e.length,i=new Array(t);t--;)i[t]=e[t];return i}return Array.prototype.slice.call(e)}function $arguments(e){return function(){return arguments[e]}}function $chk(e){return!(!e&&0!==e)}function $clear(e){return clearTimeout(e),clearInterval(e),null}function $defined(e){return null!=e}function $each(e,t,i){var s=$type(e);("arguments"==s||"collection"==s||"array"==s?Array:Hash).each(e,t,i)}function $empty(){}function $extend(e,t){for(var i in t||{})e[i]=t[i];return e}function $H(e){return new Hash(e)}function $lambda(e){return"function"==$type(e)?e:function(){return e}}function $merge(){var e=Array.slice(arguments);return e.unshift({}),$mixin.apply(null,e)}function $mixin(e){for(var t=1,i=arguments.length;t<i;t++){var s=arguments[t];if("object"==$type(s))for(var n in s){var a=s[n],o=e[n];e[n]=o&&"object"==$type(a)&&"object"==$type(o)?$mixin(o,a):$unlink(a)}}return e}function $pick(){for(var e=0,t=arguments.length;e<t;e++)if(null!=arguments[e])return arguments[e];return null}function $random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function $splat(e){var t=$type(e);return t?"array"!=t&&"arguments"!=t?[e]:e:[]}Hash.implement({forEach:function(e,t){for(var i in this)this.hasOwnProperty(i)&&e.call(t,this[i],i,this)},getClean:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},getLength:function(){var e=0;for(var t in this)this.hasOwnProperty(t)&&e++;return e}}),Hash.alias("forEach","each"),Array.implement({forEach:function(e,t){for(var i=0,s=this.length;i<s;i++)e.call(t,this[i],i,this)}}),Array.alias("forEach","each");var $time=Date.now||function(){return+new Date};function $try(){for(var e=0,t=arguments.length;e<t;e++)try{return arguments[e]()}catch(e){}return null}function $type(e){if(null==e)return!1;if(e.$family)return!("number"==e.$family.name&&!isFinite(e))&&e.$family.name;if(e.nodeName)switch(e.nodeType){case 1:return"element";case 3:return/\S/.test(e.nodeValue)?"textnode":"whitespace"}else if("number"==typeof e.length){if(e.callee)return"arguments";if(e.item)return"collection"}return typeof e}function $unlink(e){var t;switch($type(e)){case"object":for(var i in t={},e)t[i]=$unlink(e[i]);break;case"hash":t=new Hash(e);break;case"array":t=[];for(var s=0,n=e.length;s<n;s++)t[s]=$unlink(e[s]);break;default:return e}return t}function Class(e){e instanceof Function&&(e={initialize:e});var t=function(){if(Object.reset(this),t._prototyping)return this;this._current=$empty;var e=this.initialize?this.initialize.apply(this,arguments):this;return delete this._current,delete this.caller,e}.extend(this);return t.implement(e),t.constructor=Class,t.prototype.constructor=t}Array.implement({every:function(e,t){for(var i=0,s=this.length;i<s;i++)if(!e.call(t,this[i],i,this))return!1;return!0},filter:function(e,t){for(var i=[],s=0,n=this.length;s<n;s++)e.call(t,this[s],s,this)&&i.push(this[s]);return i},clean:function(){return this.filter($defined)},indexOf:function(e,t){for(var i=this.length,s=t<0?Math.max(0,i+t):t||0;s<i;s++)if(this[s]===e)return s;return-1},map:function(e,t){for(var i=[],s=0,n=this.length;s<n;s++)i[s]=e.call(t,this[s],s,this);return i},some:function(e,t){for(var i=0,s=this.length;i<s;i++)if(e.call(t,this[i],i,this))return!0;return!1},associate:function(e){for(var t={},i=Math.min(this.length,e.length),s=0;s<i;s++)t[e[s]]=this[s];return t},link:function(e){for(var t={},i=0,s=this.length;i<s;i++)for(var n in e)if(e[n](this[i])){t[n]=this[i],delete e[n];break}return t},contains:function(e,t){return-1!=this.indexOf(e,t)},extend:function(e){for(var t=0,i=e.length;t<i;t++)this.push(e[t]);return this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[$random(0,this.length-1)]:null},include:function(e){return this.contains(e)||this.push(e),this},combine:function(e){for(var t=0,i=e.length;t<i;t++)this.include(e[t]);return this},erase:function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var e=[],t=0,i=this.length;t<i;t++){var s=$type(this[t]);s&&(e=e.concat("array"==s||"collection"==s||"arguments"==s?Array.flatten(this[t]):this[t]))}return e},hexToRgb:function(e){if(3!=this.length)return null;var t=this.map(function(e){return 1==e.length&&(e+=e),e.toInt(16)});return e?t:"rgb("+t+")"},rgbToHex:function(e){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!e)return"transparent";for(var t=[],i=0;i<3;i++){var s=(+this[i]).toString(16);t.push(1==s.length?"0"+s:s)}return e?t:"#"+t.join("")}}),String.implement({test:function(e,t){return("string"==typeof e?new RegExp(e,t):e).test(this)},contains:function(e,t){return t?-1<(t+this+t).indexOf(t+e+t):-1<this.indexOf(e)},trim:function(){return this.replace(/^\s+|\s+$/g,"")},clean:function(){return this.replace(/\s+/g," ").trim()},camelCase:function(){return this.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})},hyphenate:function(){return this.replace(/[A-Z]/g,function(e){return"-"+e.charAt(0).toLowerCase()})},capitalize:function(){return this.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},escapeRegExp:function(){return this.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(e){return parseInt(this,e||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(e){var t=this.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return t?t.slice(1).hexToRgb(e):null},rgbToHex:function(e){var t=this.match(/\d{1,3}/g);return t?t.rgbToHex(e):null},stripScripts:function(e){var t="",i=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return t+=arguments[1]+"\n",""});return!0===e?$exec(t):"function"==$type(e)&&e(t,i),i},substitute:function(i,e){return this.replace(e||/\\?\{([^{}]+)\}/g,function(e,t){return"\\"==e.charAt(0)?e.slice(1):null!=i[t]?i[t]:""})}}),Function.implement({extend:function(e){for(var t in e)this[t]=e[t];return this},create:function(s){var n=this;return s=s||{},function(e){var t=null!=(t=s.arguments)?$splat(t):Array.slice(arguments,s.event?1:0);s.event&&(t=[e||window.event].extend(t));function i(){return n.apply(s.bind||null,t)}return s.delay?setTimeout(i,s.delay):s.periodical?setInterval(i,s.periodical):s.attempt?$try(i):i()}},run:function(e,t){return this.apply(t,$splat(e))},pass:function(e,t){return this.create({bind:t,arguments:e})},bindWithEvent:function(e,t){return this.create({bind:e,arguments:t,event:!0})},attempt:function(e,t){return this.create({bind:t,arguments:e,attempt:!0})()},delay:function(e,t,i){return this.create({bind:t,arguments:i,delay:e})()},periodical:function(e,t,i){return this.create({bind:t,arguments:i,periodical:e})()}}),Number.implement({limit:function(e,t){return Math.min(t,Math.max(e,this))},round:function(e){return e=Math.pow(10,e||0),Math.round(this*e)/e},times:function(e,t){for(var i=0;i<this;i++)e.call(t,i,this)},toFloat:function(){return parseFloat(this)},toInt:function(e){return parseInt(this,e||10)}}),Number.alias("times","each"),function(){var t={};["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"].each(function(e){Number[e]||(t[e]=function(){return Math[e].apply(null,[this].concat($A(arguments)))})}),Number.implement(t)}(),Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]===e)return t;return null},hasValue:function(e){return null!==Hash.keyOf(this,e)},extend:function(e){return Hash.each(e||{},function(e,t){Hash.set(this,t,e)},this),this},combine:function(e){return Hash.each(e||{},function(e,t){Hash.include(this,t,e)},this),this},erase:function(e){return this.hasOwnProperty(e)&&delete this[e],this},get:function(e){return this.hasOwnProperty(e)?this[e]:null},set:function(e,t){return this[e]&&!this.hasOwnProperty(e)||(this[e]=t),this},empty:function(){return Hash.each(this,function(e,t){delete this[t]},this),this},include:function(e,t){return null==this[e]&&(this[e]=t),this},map:function(i,s){var n=new Hash;return Hash.each(this,function(e,t){n.set(t,i.call(s,e,t,this))},this),n},filter:function(i,s){var n=new Hash;return Hash.each(this,function(e,t){i.call(s,e,t,this)&&n.set(t,e)},this),n},every:function(e,t){for(var i in this)if(this.hasOwnProperty(i)&&!e.call(t,this[i],i))return!1;return!0},some:function(e,t){for(var i in this)if(this.hasOwnProperty(i)&&e.call(t,this[i],i))return!0;return!1},getKeys:function(){var i=[];return Hash.each(this,function(e,t){i.push(t)}),i},getValues:function(){var t=[];return Hash.each(this,function(e){t.push(e)}),t},toQueryString:function(n){var a=[];return Hash.each(this,function(e,t){var i;switch(n&&(t=n+"["+t+"]"),$type(e)){case"object":i=Hash.toQueryString(e,t);break;case"array":var s={};e.each(function(e,t){s[t]=e}),i=Hash.toQueryString(s,t);break;default:i=t+"="+encodeURIComponent(e)}null!=e&&a.push(i)}),a.join("&")}}),Hash.alias({keyOf:"indexOf",hasValue:"contains"}),Function.prototype.protect=function(){return this._protected=!0,this},Object.reset=function(e,t){if(null==t){for(var i in e)Object.reset(e,i);return e}switch(delete e[t],$type(e[t])){case"object":function s(){}s.prototype=e[t];var n=new s;e[t]=Object.reset(n);break;case"array":e[t]=$unlink(e[t])}return e},new Native({name:"Class",initialize:Class}).extend({instantiate:function(e){e._prototyping=!0;var t=new e;return delete e._prototyping,t},wrap:function(e,s,n){return n._origin&&(n=n._origin),function(){if(n._protected&&null==this._current)throw new Error('The method "'+s+'" cannot be called.');var e=this.caller,t=this._current;this.caller=t,this._current=arguments.callee;var i=n.apply(this,arguments);return this._current=t,this.caller=e,i}.extend({_owner:e,_origin:n,_name:s})}}),Class.implement({implement:function(e,t){if("object"==$type(e)){for(var i in e)this.implement(i,e[i]);return this}var s=Class.Mutators[e];if(s&&null==(t=s.call(this,t)))return this;var n=this.prototype;switch($type(t)){case"function":if(t._hidden)return this;n[e]=Class.wrap(this,e,t);break;case"object":var a=n[e];"object"==$type(a)?$mixin(a,t):n[e]=$unlink(t);break;case"array":n[e]=$unlink(t);break;default:n[e]=t}return this}}),Class.Mutators={Extends:function(e){this.parent=e,this.prototype=Class.instantiate(e),this.implement("parent",function(){var e=this.caller._name,t=this.caller._owner.parent.prototype[e];if(!t)throw new Error('The method "'+e+'" has no parent.');return t.apply(this,arguments)}.protect())},Implements:function(e){$splat(e).each(function(e){e instanceof Function&&(e=Class.instantiate(e)),this.implement(e)},this)}};var Chain=new Class({$chain:[],chain:function(){return this.$chain.extend(Array.flatten(arguments)),this},callChain:function(){return!!this.$chain.length&&this.$chain.shift().apply(this,arguments)},clearChain:function(){return this.$chain.empty(),this}}),Events=new Class({$events:{},addEvent:function(e,t,i){return e=Events.removeOn(e),t!=$empty&&(this.$events[e]=this.$events[e]||[],this.$events[e].include(t),i&&(t.internal=!0)),this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},fireEvent:function(e,t,i){return e=Events.removeOn(e),this.$events&&this.$events[e]&&this.$events[e].each(function(e){e.create({bind:this,delay:i,arguments:t})()},this),this},removeEvent:function(e,t){return e=Events.removeOn(e),this.$events[e]&&(t.internal||this.$events[e].erase(t)),this},removeEvents:function(e){var t;if("object"==$type(e)){for(t in e)this.removeEvent(t,e[t]);return this}for(t in e=e&&Events.removeOn(e),this.$events)if(!e||e==t)for(var i=this.$events[t],s=i.length;s--;)this.removeEvent(t,i[s]);return this}});Events.removeOn=function(e){return e.replace(/^on([A-Z])/,function(e,t){return t.toLowerCase()})};var Options=new Class({setOptions:function(){if(this.options=$merge.run([this.options].extend(arguments)),!this.addEvent)return this;for(var e in this.options)"function"==$type(this.options[e])&&/^on[A-Z]/.test(e)&&(this.addEvent(e,this.options[e]),delete this.options[e]);return this}}),Browser=$merge({Engine:{name:"unknown",version:0},Platform:{name:null!=window.orientation?"ipod":(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase()},Features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},Plugins:{},Engines:{presto:function(){return!!window.opera&&(arguments.callee.caller?960:document.getElementsByClassName?950:925)},trident:function(){return!!window.ActiveXObject&&(window.XMLHttpRequest?document.querySelectorAll?6:5:4)},webkit:function(){return!navigator.taintEnabled&&(Browser.Features.xpath?Browser.Features.query?525:420:419)},gecko:function(){return!(!document.getBoxObjectFor&&null==window.mozInnerScreenX)&&(document.getElementsByClassName?19:18)}}},Browser||{});function $exec(e){return e&&(window.execScript?window.execScript(e):((t=document.createElement("script")).setAttribute("type","text/javascript"),t[Browser.Engine.webkit&&Browser.Engine.version<420?"innerText":"text"]=e,document.head.appendChild(t),document.head.removeChild(t))),e;var t}Browser.Platform[Browser.Platform.name]=!0,Browser.detect=function(){for(var e in this.Engines){var t=this.Engines[e]();if(t){this.Engine={name:e,version:t},this.Engine[e]=this.Engine[e+t]=!0;break}}return{name:e,version:t}},Browser.detect(),Browser.Request=function(){return $try(function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})},Browser.Features.xhr=!!Browser.Request(),Browser.Plugins.Flash=function(){var e=($try(function(){return navigator.plugins["Shockwave Flash"].description},function(){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")})||"0 r0").match(/\d+/g);return{version:parseInt(e[0]||"0."+e[1],10)||0,build:parseInt(e[2],10)||0}}(),Native.UID=1;var $uid=Browser.Engine.trident?function(e){return(e.uid||(e.uid=[Native.UID++]))[0]}:function(e){return e.uid||(e.uid=Native.UID++)},Window=new Native({name:"Window",legacy:Browser.Engine.trident?null:window.Window,initialize:function(e){return $uid(e),e.Element||(e.Element=$empty,Browser.Engine.webkit&&e.document.createElement("iframe"),e.Element.prototype=Browser.Engine.webkit?window["[[DOMElement.prototype]]"]:{}),$extend(e.document.window=e,Window.Prototype)},afterImplement:function(e,t){window[e]=Window.Prototype[e]=t}});Window.Prototype={$family:{name:"window"}},new Window(window);var Document=new Native({name:"Document",legacy:Browser.Engine.trident?null:window.Document,initialize:function(e){return $uid(e),e.head=e.getElementsByTagName("head")[0],e.html=e.getElementsByTagName("html")[0],Browser.Engine.trident&&Browser.Engine.version<=4&&$try(function(){e.execCommand("BackgroundImageCache",!1,!0)}),Browser.Engine.trident&&e.window.attachEvent("onunload",function(){e.window.detachEvent("onunload",arguments.callee),e.head=e.html=e.window=null}),$extend(e,Document.Prototype)},afterImplement:function(e,t){document[e]=Document.Prototype[e]=t}});Document.Prototype={$family:{name:"document"}},new Document(document);var Element=new Native({name:"Element",legacy:window.Element,initialize:function(e,t){var i=Element.Constructors.get(e);return i?i(t):"string"==typeof e?document.newElement(e,t):document.id(e).set(t)},afterImplement:function(a,e){Element.Prototype[a]=e,Array[a]||Elements.implement(a,function(){for(var e=[],t=!0,i=0,s=this.length;i<s;i++){var n=this[i][a].apply(this[i],arguments);e.push(n),t=t&&"element"==$type(n)}return t?new Elements(e):e})}});Element.Prototype={$family:{name:"element"}},Element.Constructors=new Hash;var IFrame=new Native({name:"IFrame",generics:!1,initialize:function(){var e=Array.link(arguments,{properties:Object.type,iframe:$defined}),t=e.properties||{},i=document.id(e.iframe),s=t.onload||$empty;delete t.onload,t.id=t.name=$pick(t.id,t.name,i?i.id||i.name:"IFrame_"+$time()),i=new Element(i||"iframe",t);function n(){var e,t=$try(function(){return i.contentWindow.location.host});t&&t!=window.location.host||(e=new Window(i.contentWindow),new Document(i.contentWindow.document),$extend(e.Element.prototype,Element.Prototype)),s.call(i.contentWindow,i.contentWindow.document)}var a=$try(function(){return i.contentWindow});return a&&a.document.body||window.frames[t.id]?n():i.addListener("load",n),i}}),Elements=new Native({initialize:function(e,t){if(e=e||[],(t=$extend({ddup:!0,cash:!0},t)).ddup||t.cash){for(var i={},s=[],n=0,a=e.length;n<a;n++){var o=document.id(e[n],!t.cash);if(t.ddup){if(i[o.uid])continue;i[o.uid]=!0}o&&s.push(o)}e=s}return t.cash?$extend(e,this):e}});Elements.implement({filter:function(t,e){return t?new Elements(Array.filter(this,"string"==typeof t?function(e){return e.match(t)}:t,e)):this}}),function(){try{var i="x"==document.createElement("<input name=x>").name}catch(e){}function s(e){return(""+e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}var n;Document.implement({newElement:function(e,t){return t&&null!=t.checked&&(t.defaultChecked=t.checked),i&&t&&(e="<"+e,t.name&&(e+=' name="'+s(t.name)+'"'),t.type&&(e+=' type="'+s(t.type)+'"'),e+=">",delete t.name,delete t.type),this.id(this.createElement(e)).set(t)},newTextNode:function(e){return this.createTextNode(e)},getDocument:function(){return this},getWindow:function(){return this.window||window},id:((n={string:function(e,t,i){return(e=i.getElementById(e))?n.element(e,t):null},element:function(e,t){if($uid(e),!t&&!e.$family&&!/^object|embed$/i.test(e.tagName)){var i=Element.Prototype;for(var s in i)e[s]=i[s]}return e},object:function(e,t,i){return e.toElement?n.element(e.toElement(i),t):null}}).textnode=n.whitespace=n.window=n.document=$arguments(0),function(e,t,i){if(e&&e.$family&&e.uid)return e;var s=$type(e);return n[s]?n[s](e,t,i||document):null})})}(),Window.implement({$$:function(e){if(1==arguments.length&&"string"==typeof e)return this.document.getElements(e);for(var t=[],i=Array.flatten(arguments),s=0,n=i.length;s<n;s++){var a=i[s];switch($type(a)){case"element":t.push(a);break;case"string":t.extend(this.document.getElements(a,!0))}}return new Elements(t)},getDocument:function(){return this.document},getWindow:function(){return this||window}}),Native.implement([Element,Document],{getElement:function(e,t){return document.id(this.getElements(e,!0)[0]||null,t)},getElements:function(e,t){e=e.split(",");var i=[],s=1<e.length;return e.each(function(e){var t=this.getElementsByTagName(e.trim());s?i.extend(t):i=t},this),new Elements(i,{ddup:s,cash:!t})}}),function(){function n(e){return o[e]||(o[e]={})}function e(e,t){if(e){var i,s=e.uid;if(!0!==t&&(t=!1),Browser.Engine.trident)if(e.clearAttributes?(i=t&&e.cloneNode(!1),e.clearAttributes(),i&&e.mergeAttributes(i)):e.removeEvents&&e.removeEvents(),/object/i.test(e.tagName)){for(var n in e)"function"==typeof e[n]&&(e[n]=$empty);Element.dispose(e)}s&&(a[s]=o[s]=null)}}function i(e,t,i,s,n,a){for(var o=e[i||t],r=[];o;){if(1==o.nodeType&&(!s||Element.match(o,s))){if(!n)return document.id(o,a);r.push(o)}o=o[t]}return n?new Elements(r,{ddup:!1,cash:!a}):null}var a={},o={},r={input:"checked",option:"selected",textarea:Browser.Engine.webkit&&Browser.Engine.version<420?"innerHTML":"value"},s={html:"innerHTML",class:"className",for:"htmlFor",defaultValue:"defaultValue",text:Browser.Engine.trident||Browser.Engine.webkit&&Browser.Engine.version<420?"innerText":"textContent"},t=["value","type","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","maxLength","readOnly","rowSpan","tabIndex","useMap"],l=(l=["compact","nowrap","ismap","declare","noshade","checked","disabled","readonly","multiple","selected","noresize","defer"]).associate(l);Hash.extend(s,l),Hash.extend(s,t.associate(t.map(String.toLowerCase)));var u={before:function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)},after:function(e,t){var i;t.parentNode&&((i=t.nextSibling)?t.parentNode.insertBefore(e,i):t.parentNode.appendChild(e))},bottom:function(e,t){t.appendChild(e)},top:function(e,t){var i=t.firstChild;i?t.insertBefore(e,i):t.appendChild(e)}};u.inside=u.bottom,Hash.each(u,function(t,e){e=e.capitalize(),Element.implement("inject"+e,function(e){return t(this,document.id(e,!0)),this}),Element.implement("grab"+e,function(e){return t(document.id(e,!0),this),this})}),Element.implement({set:function(e,t){switch($type(e)){case"object":for(var i in e)this.set(i,e[i]);break;case"string":var s=Element.Properties.get(e);s&&s.set?s.set.apply(this,Array.slice(arguments,1)):this.setProperty(e,t)}return this},get:function(e){var t=Element.Properties.get(e);return t&&t.get?t.get.apply(this,Array.slice(arguments,1)):this.getProperty(e)},erase:function(e){var t=Element.Properties.get(e);return t&&t.erase?t.erase.apply(this):this.removeProperty(e),this},setProperty:function(e,t){var i=s[e];return null==t?this.removeProperty(e):(i&&l[e]&&(t=!!t),i?this[i]=t:this.setAttribute(e,""+t),this)},setProperties:function(e){for(var t in e)this.setProperty(t,e[t]);return this},getProperty:function(e){var t=s[e],i=t?this[t]:this.getAttribute(e,2);return l[e]?!!i:t?i:i||null},getProperties:function(){var e=$A(arguments);return e.map(this.getProperty,this).associate(e)},removeProperty:function(e){var t=s[e];return t?this[t]=(!t||!l[e])&&"":this.removeAttribute(e),this},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},hasClass:function(e){return this.className.contains(e," ")},addClass:function(e){return this.hasClass(e)||(this.className=(this.className+" "+e).clean()),this},removeClass:function(e){return this.className=this.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1"),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},adopt:function(){return Array.flatten(arguments).each(function(e){(e=document.id(e,!0))&&this.appendChild(e)},this),this},appendText:function(e,t){return this.grab(this.getDocument().newTextNode(e),t)},grab:function(e,t){return u[t||"bottom"](document.id(e,!0),this),this},inject:function(e,t){return u[t||"bottom"](this,document.id(e,!0)),this},replaces:function(e){return(e=document.id(e,!0)).parentNode.replaceChild(this,e),this},wraps:function(e,t){return e=document.id(e,!0),this.replaces(e).grab(e,t)},getPrevious:function(e,t){return i(this,"previousSibling",null,e,!1,t)},getAllPrevious:function(e,t){return i(this,"previousSibling",null,e,!0,t)},getNext:function(e,t){return i(this,"nextSibling",null,e,!1,t)},getAllNext:function(e,t){return i(this,"nextSibling",null,e,!0,t)},getFirst:function(e,t){return i(this,"nextSibling","firstChild",e,!1,t)},getLast:function(e,t){return i(this,"previousSibling","lastChild",e,!1,t)},getParent:function(e,t){return i(this,"parentNode",null,e,!1,t)},getParents:function(e,t){return i(this,"parentNode",null,e,!0,t)},getSiblings:function(e,t){return this.getParent().getChildren(e,t).erase(this)},getChildren:function(e,t){return i(this,"nextSibling","firstChild",e,!0,t)},getWindow:function(){return this.ownerDocument.window||window},getDocument:function(){return this.ownerDocument},getElementById:function(e,t){var i=this.ownerDocument.getElementById(e);if(!i)return null;for(var s=i.parentNode;s!=this;s=s.parentNode)if(!s)return null;return document.id(i,t)},getSelected:function(){return new Elements($A(this.options).filter(function(e){return e.selected}))},getComputedStyle:function(e){if(this.currentStyle)return this.currentStyle[e.camelCase()];var t=this.getDocument().defaultView.getComputedStyle(this,null);return t?t.getPropertyValue([e.hyphenate()]):null},toQueryString:function(){var i=[];return this.getElements("input, select, textarea",!0).each(function(t){t.name&&!t.disabled&&"submit"!=t.type&&"reset"!=t.type&&"file"!=t.type&&$splat("select"==t.tagName.toLowerCase()?Element.getSelected(t).map(function(e){return e.value}):"radio"!=t.type&&"checkbox"!=t.type||t.checked?t.value:null).each(function(e){void 0!==e&&i.push(t.name+"="+encodeURIComponent(e))})}),i.join("&")},clone:function(e,o){e=!1!==e;function t(e,t){if(o||e.removeAttribute("id"),Browser.Engine.trident&&(e.clearAttributes(),e.mergeAttributes(t),e.removeAttribute("uid"),e.options))for(var i=e.options,s=t.options,n=i.length;n--;)i[n].selected=s[n].selected;var a=r[t.tagName.toLowerCase()];a&&t[a]&&(e[a]=t[a])}var i=this.cloneNode(e);if(e)for(var s=i.getElementsByTagName("*"),n=this.getElementsByTagName("*"),a=s.length;a--;)t(s[a],n[a]);return t(i,this),document.id(i)},destroy:function(){return Element.empty(this),Element.dispose(this),e(this,!0),null},empty:function(){return $A(this.childNodes).each(function(e){Element.destroy(e)}),this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},hasChild:function(e){return!!(e=document.id(e,!0))&&(Browser.Engine.webkit&&Browser.Engine.version<420?$A(this.getElementsByTagName(e.tagName)).contains(e):this.contains?this!=e&&this.contains(e):!!(16&this.compareDocumentPosition(e)))},match:function(e){return!e||e==this||Element.get(this,"tag")==e}}),Native.implement([Element,Window,Document],{addListener:function(e,t){var i,s;return"unload"==e?(i=t,s=this,t=function(){s.removeListener("unload",t),i()}):a[this.uid]=this,this.addEventListener?this.addEventListener(e,t,!1):this.attachEvent("on"+e,t),this},removeListener:function(e,t){return this.removeEventListener?this.removeEventListener(e,t,!1):this.detachEvent("on"+e,t),this},retrieve:function(e,t){var i=n(this.uid),s=i[e];return null!=t&&null==s&&(s=i[e]=t),$pick(s)},store:function(e,t){return n(this.uid)[e]=t,this},eliminate:function(e){return delete n(this.uid)[e],this}}),window.addListener("unload",function(){Hash.each(a,e),Browser.Engine.trident&&$A(document.getElementsByTagName("object")).each(e),window.CollectGarbage&&CollectGarbage(),a=o=null})}(),Element.Properties=new Hash,Element.Properties.style={set:function(e){this.style.cssText=e},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html=function(){var n=document.createElement("div"),a={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};a.thead=a.tfoot=a.tbody;var e={set:function(){var e=Array.flatten(arguments).join(""),t=Browser.Engine.trident&&a[this.get("tag")];if(t){var i=n;i.innerHTML=t[1]+e+t[2];for(var s=t[0];s--;)i=i.firstChild;this.empty().adopt(i.childNodes)}else this.innerHTML=e}};return e.erase=e.set,e}(),Browser.Engine.webkit&&Browser.Engine.version<420&&(Element.Properties.text={get:function(){if(this.innerText)return this.innerText;var e=this.ownerDocument.newElement("div",{html:this.innerHTML}).inject(this.ownerDocument.body),t=e.innerText;return e.destroy(),t}}),function(){Element.implement({scrollTo:function(e,t){return v(this)?this.getWindow().scrollTo(e,t):(this.scrollLeft=e,this.scrollTop=t),this},getSize:function(){return v(this)?this.getWindow().getSize():{x:this.offsetWidth,y:this.offsetHeight}},getScrollSize:function(){return v(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return v(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var e=this,t={x:0,y:0};e&&!v(e);)t.x+=e.scrollLeft,t.y+=e.scrollTop,e=e.parentNode;return t},getOffsetParent:function(){var e=this;if(v(e))return null;if(!Browser.Engine.trident)return e.offsetParent;for(;(e=e.parentNode)&&!v(e);)if("static"!=u(e,"position"))return e;return null},getOffsets:function(){if(this.getBoundingClientRect){var e=this.getBoundingClientRect(),t=document.id(this.getDocument().documentElement),i=t.getScroll(),s=this.getScrolls(),n=this.getScroll(),a="fixed"==u(this,"position");return{x:e.left.toInt()+s.x-n.x+(a?0:i.x)-t.clientLeft,y:e.top.toInt()+s.y-n.y+(a?0:i.y)-t.clientTop}}var o,r=this,l={x:0,y:0};if(v(this))return l;for(;r&&!v(r);){l.x+=r.offsetLeft,l.y+=r.offsetTop,Browser.Engine.gecko?(d(r)||(l.x+=h(r),l.y+=c(r)),(o=r.parentNode)&&"visible"!=u(o,"overflow")&&(l.x+=h(o),l.y+=c(o))):r!=this&&Browser.Engine.webkit&&(l.x+=h(r),l.y+=c(r)),r=r.offsetParent}return Browser.Engine.gecko&&!d(this)&&(l.x-=h(this),l.y-=c(this)),l},getPosition:function(e){if(v(this))return{x:0,y:0};var t=this.getOffsets(),i=this.getScrolls(),s=t.x-i.x,n=t.y-i.y,a=(e=e&&document.id(e))?e.getPosition():{x:0,y:0};return{x:s-a.x,y:n-a.y}},getCoordinates:function(e){if(v(this))return this.getWindow().getCoordinates();var t=this.getPosition(e),i=this.getSize(),s={left:t.x,top:t.y,width:i.x,height:i.y};return s.right=s.left+s.width,s.bottom=s.top+s.height,s},computePosition:function(e){return{left:e.x-t(this,"margin-left"),top:e.y-t(this,"margin-top")}},setPosition:function(e){return this.setStyles(this.computePosition(e))}}),Native.implement([Document,Window],{getSize:function(){if(Browser.Engine.presto||Browser.Engine.webkit){var e=this.getWindow();return{x:e.innerWidth,y:e.innerHeight}}var t=i(this);return{x:t.clientWidth,y:t.clientHeight}},getScroll:function(){var e=this.getWindow(),t=i(this);return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop}},getScrollSize:function(){var e=i(this),t=this.getSize();return{x:Math.max(e.scrollWidth,t.x),y:Math.max(e.scrollHeight,t.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var e=this.getSize();return{top:0,left:0,bottom:e.y,right:e.x,height:e.y,width:e.x}}});var u=Element.getComputedStyle;function t(e,t){return u(e,t).toInt()||0}function d(e){return"border-box"==u(e,"-moz-box-sizing")}function c(e){return t(e,"border-top-width")}function h(e){return t(e,"border-left-width")}function v(e){return/^(?:body|html)$/i.test(e.tagName)}function i(e){var t=e.getDocument();return t.compatMode&&"CSS1Compat"!=t.compatMode?t.body:t.html}}(),Element.alias("setPosition","position"),Native.implement([Window,Document,Element],{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}});var Event=new Native({name:"Event",initialize:function(e,t){var i=(t=t||window).document;if((e=e||t.event).$extended)return e;this.$extended=!0;for(var s=e.type,n=e.target||e.srcElement;n&&3==n.nodeType;)n=n.parentNode;if(s.test(/key/)){var a,o=e.which||e.keyCode,r=Event.Keys.keyOf(o);"keydown"!=s||0<(a=o-111)&&a<13&&(r="f"+a),r=r||String.fromCharCode(o).toLowerCase()}else if(s.match(/(click|mouse|menu)/i)){i=i.compatMode&&"CSS1Compat"!=i.compatMode?i.body:i.html;var l,u={x:e.pageX||e.clientX+i.scrollLeft,y:e.pageY||e.clientY+i.scrollTop},d={x:e.pageX?e.pageX-t.pageXOffset:e.clientX,y:e.pageY?e.pageY-t.pageYOffset:e.clientY};s.match(/DOMMouseScroll|mousewheel/)&&(l=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3);var c=3==e.which||2==e.button,h=null;if(s.match(/over|out/)){switch(s){case"mouseover":h=e.relatedTarget||e.fromElement;break;case"mouseout":h=e.relatedTarget||e.toElement}!function(){for(;h&&3==h.nodeType;)h=h.parentNode;return!0}.create({attempt:Browser.Engine.gecko})()&&(h=!1)}}return $extend(this,{event:e,type:s,page:u,client:d,rightClick:c,wheel:l,relatedTarget:h,target:n,code:o,key:r,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey})}});Event.Keys=new Hash({enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46}),Event.implement({stop:function(){return this.stopPropagation().preventDefault()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),Element.Properties.events={set:function(e){this.addEvents(e)}},Native.implement([Element,Window,Document],{addEvent:function(e,t){var i=this.retrieve("events",{});if(i[e]=i[e]||{keys:[],values:[]},i[e].keys.contains(t))return this;i[e].keys.push(t);var s=e,n=Element.Events.get(e),a=t,o=this;n&&(n.onAdd&&n.onAdd.call(this,t),n.condition&&(a=function(e){return!n.condition.call(this,e)||t.call(this,e)}),s=n.base||s);var r=function(){return t.call(o)},l=Element.NativeEvents[s];return l&&(2==l&&(r=function(e){e=new Event(e,o.getWindow()),!1===a.call(o,e)&&e.stop()}),this.addListener(s,r)),i[e].values.push(r),this},removeEvent:function(e,t){var i=this.retrieve("events");if(!i||!i[e])return this;var s=i[e].keys.indexOf(t);if(-1==s)return this;i[e].keys.splice(s,1);var n=i[e].values.splice(s,1)[0],a=Element.Events.get(e);return a&&(a.onRemove&&a.onRemove.call(this,t),e=a.base||e),Element.NativeEvents[e]?this.removeListener(e,n):this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},removeEvents:function(e){var t;if("object"==$type(e)){for(t in e)this.removeEvent(t,e[t]);return this}var i=this.retrieve("events");if(!i)return this;if(e){if(i[e]){for(;i[e].keys[0];)this.removeEvent(e,i[e].keys[0]);i[e]=null}}else{for(t in i)this.removeEvents(t);this.eliminate("events")}return this},fireEvent:function(e,t,i){var s=this.retrieve("events");return s&&s[e]&&s[e].keys.each(function(e){e.create({bind:this,delay:i,arguments:t})()},this),this},cloneEvents:function(e,t){var i=(e=document.id(e)).retrieve("events");if(!i)return this;if(t)i[t]&&i[t].keys.each(function(e){this.addEvent(t,e)},this);else for(var s in i)this.cloneEvents(e,s);return this}});try{"undefined"!=typeof HTMLElement&&(HTMLElement.prototype.fireEvent=Element.prototype.fireEvent)}catch(e){}Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,load:1,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1},function(){function e(e){var t=e.relatedTarget;return null==t||!1!==t&&("document"!=$type(this)&&t!=this&&"xul"!=t.prefix&&!this.hasChild(t))}Element.Events=new Hash({mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:Browser.Engine.gecko?"DOMMouseScroll":"mousewheel"}})}(),Element.Properties.styles={set:function(e){this.setStyles(e)}},Element.Properties.opacity={set:function(e,t){t||(0==e?"hidden"!=this.style.visibility&&(this.style.visibility="hidden"):"visible"!=this.style.visibility&&(this.style.visibility="visible")),this.currentStyle&&this.currentStyle.hasLayout||(this.style.zoom=1),Browser.Engine.trident&&(this.style.filter=1==e?"":"alpha(opacity="+100*e+")"),this.style.opacity=e,this.store("opacity",e)},get:function(){return this.retrieve("opacity",1)}},Element.implement({setOpacity:function(e){return this.set("opacity",e,!0)},getOpacity:function(){return this.get("opacity")},setStyle:function(e,t){switch(e){case"opacity":return this.set("opacity",parseFloat(t));case"float":e=Browser.Engine.trident?"styleFloat":"cssFloat"}var i;return e=e.camelCase(),"string"!=$type(t)?(i=(Element.Styles.get(e)||"@").split(" "),t=$splat(t).map(function(e,t){return i[t]?"number"==$type(e)?i[t].replace("@",Math.round(e)):e:""}).join(" ")):t==String(Number(t))&&(t=Math.round(t)),this.style[e]=t,this},getStyle:function(e){switch(e){case"opacity":return this.get("opacity");case"float":e=Browser.Engine.trident?"styleFloat":"cssFloat"}e=e.camelCase();var t,i=this.style[e];if(!$chk(i)){for(var s in i=[],Element.ShortStyles)if(e==s){for(var n in Element.ShortStyles[s])i.push(this.getStyle(n));return i.join(" ")}i=this.getComputedStyle(e)}if(!i||(t=(i=String(i)).match(/rgba?\([\d\s,]+\)/))&&(i=i.replace(t[0],t[0].rgbToHex())),Browser.Engine.presto||Browser.Engine.trident&&!$chk(parseInt(i,10))){if(e.test(/^(height|width)$/)){var a=0;return("width"==e?["left","right"]:["top","bottom"]).each(function(e){a+=this.getStyle("border-"+e+"-width").toInt()+this.getStyle("padding-"+e).toInt()},this),this["offset"+e.capitalize()]-a+"px"}if(Browser.Engine.presto&&String(i).test("px"))return i;if(e.test(/(border(.+)Width|margin|padding)/))return"0"}return i},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},getStyles:function(){var t={};return Array.flatten(arguments).each(function(e){t[e]=this.getStyle(e)},this),t}}),Element.Styles=new Hash({left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@"}),Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each(function(i){var s=Element.ShortStyles,n=Element.Styles;["margin","padding"].each(function(e){var t=e+i;s[e][t]=n[t]="@px"});var e="border"+i;s.border[e]=n[e]="@px @ rgb(@, @, @)";var t=e+"Width",a=e+"Style",o=e+"Color";s[e]={},s.borderWidth[t]=s[e][t]=n[t]="@px",s.borderStyle[a]=s[e][a]=n[a]="@",s.borderColor[o]=s[e][o]=n[o]="rgb(@, @, @)"});var Fx=new Class({Implements:[Chain,Events,Options],options:{fps:50,unit:!1,duration:500,link:"ignore"},initialize:function(e){this.subject=this.subject||this,this.setOptions(e),this.options.duration=Fx.Durations[this.options.duration]||this.options.duration.toInt(),!1===this.options.wait&&(this.options.link="cancel")},getTransition:function(){return function(e){return-(Math.cos(Math.PI*e)-1)/2}},step:function(){var e,t=$time();t<this.time+this.options.duration?(e=this.transition((t-this.time)/this.options.duration),this.set(this.compute(this.from,this.to,e))):(this.set(this.compute(this.from,this.to,1)),this.complete())},set:function(e){return e},compute:function(e,t,i){return Fx.compute(e,t,i)},check:function(){if(!this.timer)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.bind(this,arguments)),!1}return!1},start:function(e,t){return this.check(e,t)&&(this.from=e,this.to=t,this.time=0,this.transition=this.getTransition(),this.startTimer(),this.onStart()),this},complete:function(){return this.stopTimer()&&this.onComplete(),this},cancel:function(){return this.stopTimer()&&this.onCancel(),this},onStart:function(){this.fireEvent("start",this.subject)},onComplete:function(){this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)},onCancel:function(){this.fireEvent("cancel",this.subject).clearChain()},pause:function(){return this.stopTimer(),this},resume:function(){return this.startTimer(),this},stopTimer:function(){return!!this.timer&&(this.time=$time()-this.time,this.timer=$clear(this.timer),!0)},startTimer:function(){return!this.timer&&(this.time=$time()-this.time,this.timer=this.step.periodical(Math.round(1e3/this.options.fps),this),!0)}});Fx.compute=function(e,t,i){return(t-e)*i+e},Fx.Durations={short:250,normal:500,long:1e3},Fx.CSS=new Class({Extends:Fx,prepare:function(e,t,i){$chk((i=$splat(i))[1])||(i[1]=i[0],i[0]=e.getStyle(t));var s=i.map(this.parse);return{from:s[0],to:s[1]}},parse:function(e){return(e="string"==typeof(e=$lambda(e)())?e.split(" "):$splat(e)).map(function(s){s=String(s);var n=!1;return Fx.CSS.Parsers.each(function(e,t){var i;n||$chk(i=e.parse(s))&&(n={value:i,parser:e})}),n=n||{value:s,parser:Fx.CSS.Parsers.String}})},compute:function(t,i,s){var n=[];return Math.min(t.length,i.length).times(function(e){n.push({value:t[e].parser.compute(t[e].value,i[e].value,s),parser:t[e].parser})}),n.$family={name:"fx:css:value"},n},serve:function(e,t){"fx:css:value"!=$type(e)&&(e=this.parse(e));var i=[];return e.each(function(e){i=i.concat(e.parser.serve(e.value,t))}),i},render:function(e,t,i,s){e.setStyle(t,this.serve(i,s))},search:function(n){if(Fx.CSS.Cache[n])return Fx.CSS.Cache[n];var a={};return Array.each(document.styleSheets,function(e,t){var i,s=e.href;s&&s.contains("://")&&!s.contains(document.domain)||(i=e.rules||e.cssRules,Array.each(i,function(i,e){var t;!i.style||(t=i.selectorText?i.selectorText.replace(/^\w+/,function(e){return e.toLowerCase()}):null)&&t.test("^"+n+"$")&&Element.Styles.each(function(e,t){i.style[t]&&!Element.ShortStyles[t]&&(e=String(i.style[t]),a[t]=e.test(/^rgb/)?e.rgbToHex():e)})}))}),Fx.CSS.Cache[n]=a}}),Fx.CSS.Cache={},Fx.CSS.Parsers=new Hash({Color:{parse:function(e){return e.match(/^#[0-9a-f]{3,6}$/i)?e.hexToRgb(!0):!!(e=e.match(/(\d+),\s*(\d+),\s*(\d+)/))&&[e[1],e[2],e[3]]},compute:function(i,s,n){return i.map(function(e,t){return Math.round(Fx.compute(i[t],s[t],n))})},serve:function(e){return e.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(e,t){return t?e+t:e}},String:{parse:$lambda(!1),compute:$arguments(1),serve:$arguments(0)}}),Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(e,t){this.element=this.subject=document.id(e),this.parent(t)},set:function(e){for(var t in"string"==typeof e&&(e=this.search(e)),e)this.render(this.element,t,e[t],this.options.unit);return this},compute:function(e,t,i){var s={};for(var n in e)s[n]=this.parent(e[n],t[n],i);return s},start:function(e){if(!this.check(e))return this;"string"==typeof e&&(e=this.search(e));var t={},i={};for(var s in e){var n=this.prepare(this.element,s,e[s]);t[s]=n.from,i[s]=n.to}return this.parent(t,i)}}),Element.Properties.morph={set:function(e){var t=this.retrieve("morph");return t&&t.cancel(),this.eliminate("morph").store("morph:options",$extend({link:"cancel"},e))},get:function(e){return!e&&this.retrieve("morph")||(!e&&this.retrieve("morph:options")||this.set("morph",e),this.store("morph",new Fx.Morph(this,this.retrieve("morph:options")))),this.retrieve("morph")}},Element.implement({morph:function(e){return this.get("morph").start(e),this}}),Fx.implement({getTransition:function(){var e,t=this.options.transition||Fx.Transitions.Sine.easeInOut;return"string"==typeof t&&(e=t.split(":"),t=(t=Fx.Transitions)[e[0]]||t[e[0].capitalize()],e[1]&&(t=t["ease"+e[1].capitalize()+(e[2]?e[2].capitalize():"")])),t}}),Fx.Transition=function(t,i){return i=$splat(i),$extend(t,{easeIn:function(e){return t(e,i)},easeOut:function(e){return 1-t(1-e,i)},easeInOut:function(e){return e<=.5?t(2*e,i)/2:(2-t(2*(1-e),i))/2}})},Fx.Transitions=new Hash({linear:$arguments(0)}),Fx.Transitions.extend=function(e){for(var t in e)Fx.Transitions[t]=new Fx.Transition(e[t])},Fx.Transitions.extend({Pow:function(e,t){return Math.pow(e,t[0]||6)},Expo:function(e){return Math.pow(2,8*(e-1))},Circ:function(e){return 1-Math.sin(Math.acos(e))},Sine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Back:function(e,t){return t=t[0]||1.618,Math.pow(e,2)*((t+1)*e-t)},Bounce:function(e){for(var t,i=0,s=1;;i+=s,s/=2)if((7-4*i)/11<=e){t=s*s-Math.pow((11-6*i-11*e)/4,2);break}return t},Elastic:function(e,t){return Math.pow(2,10*--e)*Math.cos(20*e*Math.PI*(t[0]||1)/3)}}),["Quad","Cubic","Quart","Quint"].each(function(e,t){Fx.Transitions[e]=new Fx.Transition(function(e){return Math.pow(e,[t+2])})}),Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(e,t){this.element=this.subject=document.id(e),this.parent(t)},set:function(e,t){return 1==arguments.length&&(t=e,e=this.property||this.options.property),this.render(this.element,e,t,this.options.unit),this},start:function(e,t,i){if(!this.check(e,t,i))return this;var s=Array.flatten(arguments);this.property=this.options.property||s.shift();var n=this.prepare(this.element,this.property,s);return this.parent(n.from,n.to)}}),Element.Properties.tween={set:function(e){var t=this.retrieve("tween");return t&&t.cancel(),this.eliminate("tween").store("tween:options",$extend({link:"cancel"},e))},get:function(e){return!e&&this.retrieve("tween")||(!e&&this.retrieve("tween:options")||this.set("tween",e),this.store("tween",new Fx.Tween(this,this.retrieve("tween:options")))),this.retrieve("tween")}},Element.implement({tween:function(e,t,i){return this.get("tween").start(arguments),this},fade:function(e){var t,i=this.get("tween"),s="opacity";switch(e=$pick(e,"toggle")){case"in":i.start(s,1);break;case"out":i.start(s,0);break;case"show":i.set(s,1);break;case"hide":i.set(s,0);break;case"toggle":var n=this.retrieve("fade:flag",1==this.get("opacity"));i.start(s,n?0:1),this.store("fade:flag",!n),t=!0;break;default:i.start(s,arguments)}return t||this.eliminate("fade:flag"),this},highlight:function(e,t){t=t||("transparent"==(t=this.retrieve("highlight:original",this.getStyle("background-color")))?"#fff":t);var i=this.get("tween");return i.start("background-color",e||"#ffff88",t).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),i.callChain()}.bind(this)),this}});var Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,noCache:!1},initialize:function(e){this.xhr=new Browser.Request,this.setOptions(e),this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.headers=new Hash(this.options.headers)},onStateChange:function(){4==this.xhr.readyState&&this.running&&(this.running=!1,this.status=0,$try(function(){this.status=this.xhr.status}.bind(this)),this.xhr.onreadystatechange=$empty,this.options.isSuccess.call(this,this.status)?(this.response={text:this.xhr.responseText,xml:this.xhr.responseXML},this.success(this.response.text,this.response.xml)):(this.response={text:null,xml:null},this.failure()))},isSuccess:function(){return 200<=this.status&&this.status<300},processScripts:function(e){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?$exec(e):e.stripScripts(this.options.evalScripts)},success:function(e,t){this.onSuccess(this.processScripts(e),t)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},setHeader:function(e,t){return this.headers.set(e,t),this},getHeader:function(e){return $try(function(){return this.xhr.getResponseHeader(e)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.bind(this,arguments)),!1}return!1},send:function(e){if(!this.check(e))return this;this.running=!0;var t=$type(e);"string"!=t&&"element"!=t||(e={data:e});var i,s,n,a,o=this.options,r=(e=$extend({data:o.data,url:o.url,method:o.method},e)).data,l=String(e.url),u=e.method.toLowerCase();switch($type(r)){case"element":r=document.id(r).toQueryString();break;case"object":case"hash":r=Hash.toQueryString(r)}this.options.format&&(i="format="+this.options.format,r=r?i+"&"+r:i),this.options.emulation&&!["get","post"].contains(u)&&(s="_method="+u,r=r?s+"&"+r:s,u="post"),this.options.urlEncoded&&"post"==u&&(n=this.options.encoding?"; charset="+this.options.encoding:"",this.headers.set("Content-type","application/x-www-form-urlencoded"+n)),this.options.noCache&&(a="noCache="+(new Date).getTime(),r=r?a+"&"+r:a);var d=l.lastIndexOf("/");return-1<d&&-1<(d=l.indexOf("#"))&&(l=l.substr(0,d)),r&&"get"==u&&(l=l+(l.contains("?")?"&":"?")+r,r=null),this.xhr.open(u.toUpperCase(),l,this.options.async),this.xhr.onreadystatechange=this.onStateChange.bind(this),this.headers.each(function(t,i){try{this.xhr.setRequestHeader(i,t)}catch(e){this.fireEvent("exception",[i,t])}},this),this.fireEvent("request"),this.xhr.send(r),this.options.async||this.onStateChange(),this},cancel:function(){return this.running&&(this.running=!1,this.xhr.abort(),this.xhr.onreadystatechange=$empty,this.xhr=new Browser.Request,this.fireEvent("cancel")),this}});!function(){var e={};["get","post","put","delete","GET","POST","PUT","DELETE"].each(function(t){e[t]=function(){var e=Array.link(arguments,{url:String.type,data:$defined});return this.send($extend(e,{method:t}))}}),Request.implement(e)}(),Element.Properties.send={set:function(e){var t=this.retrieve("send");return t&&t.cancel(),this.eliminate("send").store("send:options",$extend({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")},e))},get:function(e){return!e&&this.retrieve("send")||(!e&&this.retrieve("send:options")||this.set("send",e),this.store("send",new Request(this.retrieve("send:options")))),this.retrieve("send")}},Element.implement({send:function(e){var t=this.get("send");return t.send({data:this,url:e||t.options.url}),this}}),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1},processHTML:function(a){var e=a.match(/<body[^>]*>([\s\S]*?)<\/body>/i);a=e?e[1]:a;var o=new Element("div");return $try(function(){var e,t="<root>"+a+"</root>";if(Browser.Engine.trident?((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),!(t=e.getElementsByTagName("root")[0]))return null;for(var i=0,s=t.childNodes.length;i<s;i++){var n=Element.clone(t.childNodes[i],!0,!0);n&&o.grab(n)}return o})||o.set("html",a)},success:function(e){var t=this.options,i=this.response;i.html=e.stripScripts(function(e){i.javascript=e});var s=this.processHTML(i.html);i.tree=s.childNodes,i.elements=s.getElements("*"),t.filter&&(i.tree=i.elements.filter(t.filter)),t.update?document.id(t.update).empty().set("html",i.html):t.append&&document.id(t.append).adopt(s.getChildren()),t.evalScripts&&$exec(i.javascript),this.onSuccess(i.tree,i.elements,i.html,i.javascript)}}),Element.Properties.load={set:function(e){var t=this.retrieve("load");return t&&t.cancel(),this.eliminate("load").store("load:options",$extend({data:this,link:"cancel",update:this,method:"get"},e))},get:function(e){return!e&&this.retrieve("load")||(!e&&this.retrieve("load:options")||this.set("load",e),this.store("load",new Request.HTML(this.retrieve("load:options")))),this.retrieve("load")}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Object.type,url:String.type})),this}}),JSON.$specialChars={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.$replaceChars=function(e){return JSON.$specialChars[e]||"\\u00"+Math.floor(e.charCodeAt()/16).toString(16)+(e.charCodeAt()%16).toString(16)},JSON.encode=function(e){switch($type(e)){case"string":return'"'+e.replace(/[\x00-\x1f\\"]/g,JSON.$replaceChars)+'"';case"array":return"["+String(e.map(JSON.encode).clean())+"]";case"object":case"hash":var s=[];return Hash.each(e,function(e,t){var i=JSON.encode(e);i&&s.push(JSON.encode(t)+":"+i)}),"{"+s+"}";case"number":case"boolean":return String(e);case!1:return"null"}return null},JSON.decode=function(string,secure){return"string"!=$type(string)||!string.length||secure&&!/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(string.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""))?null:eval("("+string+")")},Request.JSON=new Class({Extends:Request,options:{secure:!0},initialize:function(e){this.parent(e),this.headers.extend({Accept:"application/json","X-Request":"JSON"})},success:function(e){this.response.json=JSON.decode(e,this.options.secure),this.onSuccess(this.response.json,e)}});var Cookie=new Class({Implements:Options,options:{path:!1,domain:!1,duration:!1,secure:!1,document:document},initialize:function(e,t){this.key=e,this.setOptions(t)},write:function(e){var t;return e=encodeURIComponent(e),this.options.domain&&(e+="; domain="+this.options.domain),this.options.path&&(e+="; path="+this.options.path),this.options.duration&&((t=new Date).setTime(t.getTime()+24*this.options.duration*60*60*1e3),e+="; expires="+t.toGMTString()),this.options.secure&&(e+="; secure"),this.options.document.cookie=this.key+"="+e,this},read:function(){var e=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return e?decodeURIComponent(e[1]):null},dispose:function(){return new Cookie(this.key,$merge(this.options,{duration:-1})).write(""),this}});Cookie.write=function(e,t,i){return new Cookie(e,i).write(t)},Cookie.read=function(e){return new Cookie(e).read()},Cookie.dispose=function(e,t){return new Cookie(e,t).dispose()},Element.Events.domready={onAdd:function(e){Browser.loaded&&e.call(this)}},function(){function e(){Browser.loaded||(Browser.loaded=!0,window.fireEvent("domready"),document.fireEvent("domready"))}var t;window.addEvent("load",e),Browser.Engine.trident?(t=document.createElement("div"),function(){$try(function(){return t.doScroll(),document.id(t).inject(document.body).set("html","temp").dispose()})?e():arguments.callee.delay(50)}()):Browser.Engine.webkit&&Browser.Engine.version<525?function(){["loaded","complete"].contains(document.readyState)?e():arguments.callee.delay(50)}():document.addEvent("DOMContentLoaded",e)}(),Native.implement([Document,Element],{getElements:function(e,t){for(var i,s={},n=0,a=(e=e.split(",")).length;n<a;n++){var o=e[n],r=Selectors.Utils.search(this,o,s);0!=n&&r.item&&(r=$A(r)),i=0==n?r:i.item?$A(i).concat(r):i.concat(r)}return new Elements(i,{ddup:1<e.length,cash:!t})}}),Element.implement({match:function(e){if(!e||e==this)return!0;var t=Selectors.Utils.parseTagAndID(e),i=t[0],s=t[1];if(!Selectors.Filters.byID(this,s)||!Selectors.Filters.byTag(this,i))return!1;var n=Selectors.Utils.parseSelector(e);return!n||Selectors.Utils.filter(this,n,{})}});var Selectors={Cache:{nth:{},parsed:{}},RegExps:{id:/#([\w-]+)/,tag:/^(\w+|\*)/,quick:/^(\w+|\*)$/,splitter:/\s*([+>~\s])\s*([a-zA-Z#.*:\[])/g,combined:/\.([\w-]+)|\[(\w+)(?:([!*^$~|]?=)(["']?)([^\4]*?)\4)?\]|:([\w-]+)(?:\(["']?(.*?)?["']?\)|$)/g}};Selectors.Utils={chk:function(e,t){if(!t)return!0;var i=$uid(e);return!t[i]&&(t[i]=!0)},parseNthArgument:function(e){if(Selectors.Cache.nth[e])return Selectors.Cache.nth[e];var t=e.match(/^([+-]?\d*)?([a-z]+)?([+-]?\d*)?$/);if(!t)return!1;var i=parseInt(t[1],10),s=i||0===i?i:1,n=t[2]||!1,a=parseInt(t[3],10)||0;if(0!=s){for(a--;a<1;)a+=s;for(;s<=a;)a-=s}else s=a,n="index";switch(n){case"n":t={a:s,b:a,special:"n"};break;case"odd":t={a:2,b:0,special:"n"};break;case"even":t={a:2,b:1,special:"n"};break;case"first":t={a:0,special:"index"};break;case"last":t={special:"last-child"};break;case"only":t={special:"only-child"};break;default:t={a:s-1,special:"index"}}return Selectors.Cache.nth[e]=t},parseSelector:function(e){if(Selectors.Cache.parsed[e])return Selectors.Cache.parsed[e];for(var t,i={classes:[],pseudos:[],attributes:[]};t=Selectors.RegExps.combined.exec(e);){var s,n=t[1],a=t[2],o=t[3],r=t[5],l=t[6],u=t[7];n?i.classes.push(n):l?(s=Selectors.Pseudo.get(l))?i.pseudos.push({parser:s,argument:u}):i.attributes.push({name:l,operator:"=",value:u}):a&&i.attributes.push({name:a,operator:o,value:r})}return i.classes.length||delete i.classes,i.attributes.length||delete i.attributes,i.pseudos.length||delete i.pseudos,i.classes||i.attributes||i.pseudos||(i=null),Selectors.Cache.parsed[e]=i},parseTagAndID:function(e){var t=e.match(Selectors.RegExps.tag),i=e.match(Selectors.RegExps.id);return[t?t[1]:"*",!!i&&i[1]]},filter:function(e,t,i){var s;if(t.classes)for(s=t.classes.length;s--;){var n=t.classes[s];if(!Selectors.Filters.byClass(e,n))return!1}if(t.attributes)for(s=t.attributes.length;s--;){var a=t.attributes[s];if(!Selectors.Filters.byAttribute(e,a.name,a.operator,a.value))return!1}if(t.pseudos)for(s=t.pseudos.length;s--;){var o=t.pseudos[s];if(!Selectors.Filters.byPseudo(e,o.parser,o.argument,i))return!1}return!0},getByTagAndID:function(e,t,i){if(i){var s=e.getElementById?e.getElementById(i,!0):Element.getElementById(e,i,!0);return s&&Selectors.Filters.byTag(s,t)?[s]:[]}return e.getElementsByTagName(t)},search:function(e,t,i){for(var s,n,a,o=[],r=t.trim().replace(Selectors.RegExps.splitter,function(e,t,i){return o.push(t),":)"+i}).split(":)"),l=0,u=r.length;l<u;l++){var d=r[l];if(0==l&&Selectors.RegExps.quick.test(d))s=e.getElementsByTagName(d);else{var c=o[l-1],h=Selectors.Utils.parseTagAndID(d),v=h[0],m=h[1];if(0==l)s=Selectors.Utils.getByTagAndID(e,v,m);else{for(var g={},_=[],p=0,T=s.length;p<T;p++)_=Selectors.Getters[c](_,s[p],v,m,g);s=_}var f=Selectors.Utils.parseSelector(d);if(f){n=[];for(var E=0,S=s.length;E<S;E++)a=s[E],Selectors.Utils.filter(a,f,i)&&n.push(a);s=n}}}return s}},Selectors.Getters={" ":function(e,t,i,s,n){for(var a=Selectors.Utils.getByTagAndID(t,i,s),o=0,r=a.length;o<r;o++){var l=a[o];Selectors.Utils.chk(l,n)&&e.push(l)}return e},">":function(e,t,i,s,n){for(var a=Selectors.Utils.getByTagAndID(t,i,s),o=0,r=a.length;o<r;o++){var l=a[o];l.parentNode==t&&Selectors.Utils.chk(l,n)&&e.push(l)}return e},"+":function(e,t,i,s,n){for(;t=t.nextSibling;)if(1==t.nodeType){Selectors.Utils.chk(t,n)&&Selectors.Filters.byTag(t,i)&&Selectors.Filters.byID(t,s)&&e.push(t);break}return e},"~":function(e,t,i,s,n){for(;t=t.nextSibling;)if(1==t.nodeType){if(!Selectors.Utils.chk(t,n))break;Selectors.Filters.byTag(t,i)&&Selectors.Filters.byID(t,s)&&e.push(t)}return e}},Selectors.Filters={byTag:function(e,t){return"*"==t||e.tagName&&e.tagName.toLowerCase()==t},byID:function(e,t){return!t||e.id&&e.id==t},byClass:function(e,t){return e.className&&e.className.contains&&e.className.contains(t," ")},byPseudo:function(e,t,i,s){return t.call(e,i,s)},byAttribute:function(e,t,i,s){var n=Element.prototype.getProperty.call(e,t);if(!n)return"!="==i;if(!i||null==s)return!0;switch(i){case"=":return n==s;case"*=":return n.contains(s);case"^=":return n.substr(0,s.length)==s;case"$=":return n.substr(n.length-s.length)==s;case"!=":return n!=s;case"~=":return n.contains(s," ");case"|=":return n.contains(s,"-")}return!1}},Selectors.Pseudo=new Hash({checked:function(){return this.checked},empty:function(){return!(this.innerText||this.textContent||"").length},not:function(e){return!Element.match(this,e)},contains:function(e){return(this.innerText||this.textContent||"").contains(e)},"first-child":function(){return Selectors.Pseudo.index.call(this,0)},"last-child":function(){for(var e=this;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"only-child":function(){for(var e=this;e=e.previousSibling;)if(1==e.nodeType)return!1;for(var t=this;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"nth-child":function(e,t){e=null==e?"n":e;var i=Selectors.Utils.parseNthArgument(e);if("n"!=i.special)return Selectors.Pseudo[i.special].call(this,i.a,t);var s=0;t.positions=t.positions||{};var n=$uid(this);if(!t.positions[n]){for(var a=this;a=a.previousSibling;)if(1==a.nodeType){s++;var o=t.positions[$uid(a)];if(null!=o){s=o+s;break}}t.positions[n]=s}return t.positions[n]%i.a==i.b},index:function(e){for(var t=this,i=0;t=t.previousSibling;)if(1==t.nodeType&&++i>e)return!1;return i==e},even:function(e,t){return Selectors.Pseudo["nth-child"].call(this,"2n+1",t)},odd:function(e,t){return Selectors.Pseudo["nth-child"].call(this,"2n",t)},selected:function(){return this.selected},enabled:function(){return!1===this.disabled}});var Swiff=new Class({Implements:[Options],options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:"high",allowScriptAccess:"always",wMode:"transparent",swLiveConnect:!0},callBacks:{},vars:{}},toElement:function(){return this.object},initialize:function(e,t){this.instance="Swiff_"+$time(),this.setOptions(t),t=this.options;var i=this.id=t.id||this.instance,s=document.id(t.container);Swiff.CallBacks[this.instance]={};var n=t.params,a=t.vars,o=t.callBacks,r=$extend({height:t.height,width:t.width},t.properties),l=this;for(var u in o)Swiff.CallBacks[this.instance][u]=function(e){return function(){return e.apply(l.object,arguments)}}(o[u]),a[u]="Swiff.CallBacks."+this.instance+"."+u;n.flashVars=Hash.toQueryString(a),Browser.Engine.trident?(r.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",n.movie=e):(r.type="application/x-shockwave-flash",r.data=e);var d='<object id="'+i+'"';for(var c in r)d+=" "+c+'="'+r[c]+'"';for(var h in d+=">",n)n[h]&&(d+='<param name="'+h+'" value="'+n[h]+'" />');d+="</object>",this.object=(s?s.empty():new Element("div")).set("html",d).firstChild},replaces:function(e){return(e=document.id(e,!0)).parentNode.replaceChild(this.toElement(),e),this},inject:function(e){return document.id(e,!0).appendChild(this.toElement()),this},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].extend(arguments))}});Swiff.CallBacks={},Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+"</invoke>");return eval(rs)},window.vui=window.vui||{},window.vui._getPlatformTizen=function(){return{clientType:"samsungTizen",id:"ceres",omnitureName:"Tizen",isLightDevice:!0,includeTarget:"samsung",isTizenBDPlayer:!1,init:function(){this.loadScript("$WEBAPIS/webapis/webapis.js");var e=setInterval(function(){window.tizen&&window.webapis&&window.webapis.productinfo&&(this.loadScript("node_modules/@vudu/asteroid-bundle-ceres/asteroid_aux.all.js"),this.loadScript("javascript/voiceControl.js"),clearInterval(e))}.bind(this),200);vui.SlowScrollTimeout=200,this.setAriaLabel("")},changeCookieStorage:function(){window.setCookie=function(e,t){null===t||""===t?window.localStorage.removeItem(e):window.localStorage.setItem(e,t)},window.getCookie=function(e){return window.localStorage.getItem(e)||""}},registerKeys:function(e){window.tizen&&window.tizen.application&&(window.tizen.tvinputdevice.registerKey("MediaFastForward"),window.tizen.tvinputdevice.registerKey("MediaPlayPause"),window.tizen.tvinputdevice.registerKey("MediaRewind"),window.tizen.tvinputdevice.registerKey("MediaPlay"),window.tizen.tvinputdevice.registerKey("MediaPause"),window.tizen.tvinputdevice.registerKey("MediaStop"),window.tizen.tvinputdevice.registerKey("ColorF0Red"),window.tizen.tvinputdevice.registerKey("ColorF3Blue"),window.tizen.tvinputdevice.registerKey("Caption"),window.tizen.tvinputdevice.registerKey("0"),window.tizen.tvinputdevice.registerKey("1"),window.tizen.tvinputdevice.registerKey("2"),window.tizen.tvinputdevice.registerKey("3"),window.tizen.tvinputdevice.registerKey("4"),window.tizen.tvinputdevice.registerKey("5"),window.tizen.tvinputdevice.registerKey("6"),window.tizen.tvinputdevice.registerKey("7"),window.tizen.tvinputdevice.registerKey("8"),window.tizen.tvinputdevice.registerKey("9"),e.KEY_RETURN=10009,e.KEY_PAUSE=19,e.KEY_RW=412,e.KEY_FF=417,e.KEY_PLAY=415,e.KEY_STOP=413,e.KEY_BLUE=406,e.KEY_RED=403,e.KEY_SUBTITLE=10221,e.KEY_PLAY_PAUSE=10252,e.KEY_SKIP_FF=10233,e.KEY_SKIP_RW=10232)},exitApplication:function(){var e=vui.getModel();e.userId&&e.sessionKey&&this.launchTizenBackground(),window.tizen&&window.tizen.application&&window.tizen.application.getCurrentApplication().exit()},getConnectionType:function(){var e="Unknown",t=null;try{t=webapis.network.getActiveConnectionType()}catch(e){alert("getActiveConnectionType exception ["+e.code+"] message: "+e.message)}if(null!==t)switch(t){case webapis.network.NetworkActiveConnectionType.DISCONNECTED:e="Unknown";break;case webapis.network.NetworkActiveConnectionType.WIFI:e="WiFi";break;case webapis.network.NetworkActiveConnectionType.CELLULAR:e="Cell";break;case webapis.network.NetworkActiveConnectionType.ETHERNET:e="Wired";break;default:e="Unknown"}return e},getSystemInfo:function(s){function e(){var t,i,e=Asteroid.Features.getVideoSupport();vui.vvPlatform.videoProfiles=(t=[],i={sd:"highP",hdx:"highP","sd-main10":"main10","hdx-main10":"main10",uhd:"main10","uhd-hdr10":"hdr10"},e.forEach(function(e){"uhd-sdr"===e?t=t.concat(["main10","dvheDtr"]):t.push(i[e])}),t.filter(function(e,t,i){return i.indexOf(e)===t})),vui.vvPlatform.uhdSupported=e.contains("uhd")||e.contains("uhd-sdr"),vui.vvPlatform.hdr10=e.contains("uhd-hdr10"),vui.vvPlatform.dolbyVision=!1,vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),s(!0)}window.Asteroid&&Asteroid.ready?e():window.addEventListener("com.vudu.asteroid.asteroid-ready",function(){e()})},getDeviceId:function(){var e;window.tizen&&window.webapis?0<=(e=webapis.productinfo.getModelCode()).indexOf("BD")?(VUDU.registry.deviceId="SAMB:"+(e+":"+webapis.productinfo.getDuid()).toUpperCase(),vui.vvPlatform.isTizenBDPlayer=!0):VUDU.registry.deviceId="SAMT:"+(e+":"+webapis.productinfo.getDuid()).toUpperCase():VUDU.registry.deviceId=123456},inBrowser:function(){return!window.tizen||!window.tizen.application},getDeepLinkParams:function(){var e,s="",n="",a="",o=!1,r="",l="",u="",d="",c="",h="",v="";if(window.tizen&&window.tizen.application){var t,i=window.tizen.application.getCurrentApplication().getRequestedAppControl();i&&(t=i.appControl.data,alert("launch data: "+JSON.stringify(t)),t&&0<t.length&&t.filter(function(e){return"PAYLOAD"==e.key}).forEach(function(e){var t=e.value[0];try{t=JSON.parse(t)}catch(e){return alert("problem parsing deeplink json","error"),!1}if(t.values){try{var i=JSON.parse(t.values)}catch(e){return alert("problem parsing deeplink json values","error"),!1}if(a=i.campaignId||"",v=i.launchSource||"deeplink",i.contentId)return o="content",s=i.contentId,n=i.contentType,!1;if(i.uxRowId)return o="uxRow",h=i.uxRowId,!1;if(i.uxPageId)return o="uxPage",c=i.uxPageId,!1;if(i.uiPageId)return o="uiPage",l=i.uiPageId,!1;if(i.uiEntryId)return o="uiEntry",r=i.uiEntryId,!1;if(i.spotlightTab)return o="spotlightTab",u=i.spotlightTab,!1;if(i.listName)return o="myVuduTab",d=i.listName,!1}}))}else if(vui.m)return(e=getDeepLinkParamsFromQueryString())&&e.type&&vui._.deleteZapApiEvarsFromSessionStore(),e;return o&&vui._.deleteZapApiEvarsFromSessionStore(),{type:o,contentId:s,uxRowId:h,uxPageId:c,uiPageId:l,uiEntryId:r,campaignId:a,spotlightTab:u,myVuduTab:d,launchSource:v,contentType:n}},addEventListeners:function(){var t,i;window.addEventListener("appcontrol",function(){alert("deep linking event!");var e=vui.deepLink.getDeepLinkParams(),t=e.contentId,i=e.contentType;""!==t&&window.controller&&(vui.deepLink.isPlayingContent(t)?alert("already playing this content, ignore notification"):(vui.deepLink.switchingToDeepLinkPage=!0,window.controller.goToPage("NewMovieDetails",{contentId:t,launchFromDeeplink:!0,contentType:i},!0)))}),window.addEventListener("mousemove",function e(){window.removeEventListener("mousemove",e),vui.vvPlatform.selectorFollowsMouse=!0,window.controller&&controller.baseLayer&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.onMouseMove&&controller.baseLayer.currentPage.onMouseMove()}),"object"==typeof webapis&&webapis&&webapis.network&&webapis.network.addNetworkStateChangeListener(function(e){e===webapis.network.NetworkState.GATEWAY_DISCONNECTED?t=t||setTimeout(function(){t=null,vui.vvPlatform.onNetworkLost(),i=!0},3e3):e===webapis.network.NetworkState.GATEWAY_CONNECTED&&(t&&(clearTimeout(t),t=null),i&&(vui.vvPlatform.onNetworkRestored(),i=!1))})},setAriaLabel:function(e){if(!this.muteTTS){for(var t=document.getElementById("ariaContainer");t.firstChild;)t.removeChild(t.firstChild);e=e.replace(/<br>/g,"");var i=document.createElement("div");i.setAttribute("role","option"),i.setAttribute("aria-live","assertive"),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e),t.appendChild(i),i.focus()}},createTempAlert:function(e){e=e.replace(/<br>/g,"");var t=function(){var e=document.getElementById("tmpAlert");e||((e=document.createElement("div")).setAttribute("role","option"),e.setAttribute("aria-live","assertive"),e.setAttribute("tabindex","-1"),e.setAttribute("id","tmpAlert"),document.body.appendChild(e));return e}();t.setAttribute("aria-label",e),t.focus()},authenticationSaved:function(){this.launchTizenBackground()},launchTizenBackground:function(){var e,t,i,s,n;alert("LAUNCHING TIZEN BACKGROUND!"),window.tizen&&(e="kk8MbItQ0H.TilesService",t={network:vui.getModel().network},null!=(i=vui.gConnectionInstance.getTizenEdenBarCacheTime())?(alert("Eden Bar cacheTime from SOC defined:"+i),t.cacheTime=i):alert("Eden Bar cacheTime not defined, use default"),(s=vui.getModel()).userId&&s.sessionKey&&(t.accountId=s.userId,t.sessionKey=s.sessionKey),!vui.getModel().directorCsClient||(n=vui.getModel().directorCsClient.getLightDeviceId())&&(t.lightDeviceId=n),tizen.application.launchAppControl(new tizen.ApplicationControl("http://tizen.org/appcontrol/operation/pick",null,"image/jpeg",null,[new tizen.ApplicationControlData("caller",["ForegroundApp"]),new tizen.ApplicationControlData("appData",[JSON.stringify(t)])]),e,function(){alert("Launch success: "+e)},function(e){alert("BACKGROUND ERROR: "+JSON.stringify(e))}),alert("DONE LAUNCHING TIZEN BACKGROUND!"))}}},window.vui=window.vui||{},window.vui._getPlatformUwp=function(){return{clientType:"xboxOne",id:"pallas",omnitureName:"XboxOne",isLightDevice:!0,includeTarget:"microsoft",deepLinkParams:{},isXbox:!0,clientTypeForStreamingStats:"XBOX1",init:function(){var s="http://images2.vudu.com/spacer.png";function a(e){}function o(e){Windows.Services.Store.StoreContext.getDefault().requestDownloadAndInstallStorePackageUpdatesAsync(e).then(function(e){e.overallState===Windows.Services.Store.StorePackageUpdateState.completed?alert("Successfully updated the app","info"):e.overallState===Windows.Services.Store.StorePackageUpdateState.otherError&&alert("Unknown error occurred during the update","error")},function(e){alert("Error updating the app: "+JSON.stringify(e),"error");var t=new Windows.UI.Popups.MessageDialog("Update failed. Please try again later.");t.commands.append(new Windows.UI.Popups.UICommand("Ok",a)),t.defaultCommandIndex=0,t.cancelCommandIndex=0,t.showAsync()})}function i(e){return e?e.getNetworkConnectivityLevel():null}function n(){return!("getNetworkConnectivityLevel"in(e=new Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile))||e.getNetworkConnectivityLevel()<3?Promise.resolve(!1):new Promise(function(t,e){var i=null;(i=new XMLHttpRequest).onreadystatechange=function(){4==i.readyState&&(200===i.status&&"image/png"===i.getResponseHeader("Content-Type")?(alert("We got a Vudu connectivity response."),t(!0)):t(!1))},i.error=function(e){0!==error.status&&alert("There was an error testing for Vudu Connectivity: "+JSON.stringify(e),"error"),t(!1)},i.abort=i.error,i.open("GET",s+"?t="+Date.now(),!0),i.send(null)});var e}Debug.debuggerEnabled&&(window.VUDU_APP_ARGS.debugcss=1),window.onKeyDown=function(e){var t=Windows.System.VirtualKey;switch(e.keyCode){case t.gamepadDPadUp:case t.gamepadLeftThumbstickUp:vui.onScalarDirectionUp();break;case t.gamepadDPadDown:case t.gamepadLeftThumbstickDown:vui.onScalarDirectionDown();break;case t.gamepadDPadLeft:case t.gamepadLeftThumbstickLeft:vui.onScalarDirectionLeft();break;case t.gamepadDPadRight:case t.gamepadLeftThumbstickRight:vui.onScalarDirectionRight();break;case t.gamepadView:vui.onClickInfo();break;case t.gamepadA:vui.onClickAction();break;case t.gamepadB:vui.onClickBack();break;case t.gamepadY:vui.onClickYellow();break;case t.gamepadMenu:vui.onClickBlue();break;case t.gamepadLeftShoulder:vui.onClickRW();break;case t.gamepadRightShoulder:vui.onClickFF();break;case t.gamepadX:vui.onClickPlay()}},this.loadScript("node_modules/@vudu/asteroid-bundle-pallas/asteroid_aux.all.js"),Windows.UI.WebUI.WebUIApplication.addEventListener("activated",vui.vvPlatform.activated,!1),Windows.UI.ViewManagement.ApplicationView.getForCurrentView().setDesiredBoundsMode(Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow),window.navigator.gamepadInputEmulation="keyboard",this.is4kXbox="XBOX_ONE_ED"===Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation().systemSku||"XBOX_ONE_SC"===Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation().systemSku||"XBOX_ONE_CH"===Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation().systemSku,this.uiSearchClientType=vui.vvPlatform.clientType,window.addEventListener("load",function(e){alert("Event window.load "+JSON.stringify(e),"info")}),Windows.UI.WebUI.WebUIApplication.addEventListener("activated",function(e){alert("Event App activated with args: "+JSON.stringify(e),"info"),Windows.Services.Store.StoreContext.getDefault().getAppAndOptionalStorePackageUpdatesAsync().then(function(e){if(0<e.length){for(var t=!1,i=0;i<e.length;i++)e[i].mandatory&&(t=!0);t?o(e):(s=e,(n=new Windows.UI.Popups.MessageDialog("Make watching movies more awesome. Update to the latest Vudu app.")).commands.append(new Windows.UI.Popups.UICommand("Ok",o.bind(null,[s]))),n.commands.append(new Windows.UI.Popups.UICommand("Later",a)),n.defaultCommandIndex=0,n.cancelCommandIndex=1,n.showAsync())}var s,n});var t=Windows.ApplicationModel.Activation;if(e.detail[0].kind===t.ActivationKind.protocol){alert("activated by a uri: "+JSON.stringify(e),"info");for(var i=e.detail[0].uri.queryParsed,s=0;s<i.length;s++){if("contentId"===i[s].name){vui.vvPlatform.deepLinkParams.type="content",vui.vvPlatform.deepLinkParams.contentId=i[s].value;break}if("uxPageId"===i[s].name){vui.vvPlatform.deepLinkParams.type="uxPage",vui.vvPlatform.deepLinkParams.uxPageId=i[s].value;break}if("uxRowId"===i[s].name){vui.vvPlatform.deepLinkParams.type="uxRow",vui.vvPlatform.deepLinkParams.uxRowId=i[s].value;break}if("uiPageId"===i[s].name){vui.vvPlatform.deepLinkParams.type="uiPage",vui.vvPlatform.deepLinkParams.uiPageId=i[s].value;break}if("uiEntryId"===i[s].name){vui.vvPlatform.deepLinkParams.type="uiEntry",vui.vvPlatform.deepLinkParams.uiEntryId=i[s].value;break}if("spotlightTab"===i[s].name){vui.vvPlatform.deepLinkParams.type="spotlightTab",vui.vvPlatform.deepLinkParams.spotlightTab=i[s].value;break}"listName"===i[s].name?(vui.vvPlatform.deepLinkParams.type="myVuduTab",vui.vvPlatform.deepLinkParams.myVuduTab=i[s].value):"contentType"===i[s].name&&(vui.vvPlatform.deepLinkParams.contentType=i[s].value),"campaignId"===i[s].name&&(vui.vvPlatform.deepLinkParams.campaignId=i[s].value)}}}),Windows.UI.WebUI.WebUIApplication.addEventListener("suspending",function(e){alert("Event app.suspending "+JSON.stringify(e),"info")}),Windows.UI.WebUI.WebUIApplication.addEventListener("resuming",function(e){alert("Event app.resuming "+JSON.stringify(e),"info");var t=Windows.UI.ViewManagement.ApplicationViewScaling.trySetDisableLayoutScaling(!1);console.log("Is this full screen? ",t)});var r=!1,l=Windows.Networking.Connectivity.NetworkInformation,u=i(l.getInternetConnectionProfile());l.onnetworkstatuschanged=function(e){var t=i(l.getInternetConnectionProfile());if(u!=t){switch(alert("network status changed: Event is: "+JSON.stringify(e),"info"),u=t){case Windows.Networking.Connectivity.NetworkConnectivityLevel.none:alert("network status changed: No network connectivity");break;case Windows.Networking.Connectivity.NetworkConnectivityLevel.localAccess:alert("network status changed: local access only");break;case Windows.Networking.Connectivity.NetworkConnectivityLevel.constrainedInternetAccess:alert("network status changed: constrained");break;case Windows.Networking.Connectivity.NetworkConnectivityLevel.internetAccess:alert("network status changed: Full Internet access");break;default:alert("There are no network connections")}r||(r=!0,function t(i){if(i<=0)return Promise.resolve(!0);return n().then(function(e){return e?Promise.resolve(!1):t(i-1)},function(e){return t(i-1)})}(3).then(function(e){r=!1,e?vui.vvPlatform.onNetworkLost():vui.vvPlatform.onNetworkRestored()},function(e){alert("There was an error testing for Vudu Connectivity: "+JSON.stringify(e),"error")}))}}},changeCookieStorage:function(){window.setCookie=function(e,t){null===t||""===t?window.localStorage.removeItem(e):window.localStorage.setItem(e,t)},window.getCookie=function(e){return window.localStorage.getItem(e)||""}},exitApplication:function(){window.close()},getConnectionType:function(){return Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().isWlanConnectionProfile?"WiFi":"Wired"},getSystemInfo:function(s){function e(){var t,i,e=Asteroid.Features.getVideoSupport();vui.vvPlatform.videoProfiles=(t=[],i={sd:"highP",hdx:"highP",uhd:"main10","sd-main10":"main10","hdx-main10":"main10","uhd-hdr10":"hdr10","uhd-dovi-5":"dvheStn"},e.forEach(function(e){"uhd-sdr"===e||"uhd-dovi-4"===e?t=t.concat(["main10","dvheDtr"]):t.push(i[e])}),t.filter(function(e,t,i){return i.indexOf(e)===t})),vui.vvPlatform.uhdSupported=e.contains("uhd")||e.contains("uhd-sdr"),vui.vvPlatform.hdr10=e.contains("uhd-hdr10"),vui.vvPlatform.dolbyVision=e.contains("uhd-dovi-5"),vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),vui.vvPlatform.dolbyVision&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV5),s(!0)}window.Asteroid&&Asteroid.ready?e():window.addEventListener("com.vudu.asteroid.asteroid-ready",function(){e()})},getDeviceId:function(){var e,t=Windows.Security.ExchangeActiveSyncProvisioning.EasClientDeviceInformation().systemSku;switch(alert("System SKU is: "+t),t){case"XBOX_ONE_ED":e="ONES:";break;case"XBOX_ONE_SC":case"XBOX_ONE_CH":e="ONEX:";break;default:e="ONE:"}var i,s,n=Windows.Security.Cryptography.Core,a=Windows.Security.Cryptography.CryptographicBuffer,o="123456";Windows.Foundation.Metadata.ApiInformation.isApiContractPresent("Windows.System.Profile.ProfileHardwareTokenContract",1,0)&&(i=Windows.System.Profile.HardwareIdentification.getPackageSpecificToken(null).id,s=n.HashAlgorithmProvider.openAlgorithm(n.HashAlgorithmNames.md5).hashData(i),o=a.encodeToHexString(s)),VUDU.registry.deviceId="XBOX:"+e+o},activated:function(e){var t=null;null!=e.user?null!=e.user?(alert("Activated with User","debug"),t=e.user):alert("Activated with No User","error"):alert("IActivatedEventArgsWithUser not present","debug"),vui.vvPlatform.setCurrentUser(t),vui.vvPlatform.is4kXbox?vui.vvPlatform.uhdSupported=!0:vui.vvPlatform.uhdSupported=!1,vui.vvPlatform.is3dSupported=!1},getInfoForUser:function(e){var t=new Array;return t[0]="XboxUserId",t[1]="Gamertag",e.getPropertiesAsync(t)},setCurrentUser:function(e){vui.vvPlatform.currentUser=vui.vvPlatform.currentUser||{},vui.vvPlatform.currentUser.user=e,null==vui.vvPlatform.currentUser.user?currentUserDisplay.innerText="No User Signed in":vui.vvPlatform.getInfoForUser(vui.vvPlatform.currentUser.user).then(function(e){alert("Setting Current User: Gamertag: "+e.Gamertag+", XboxUserId: "+e.XboxUserId,"debug"),vui.vvPlatform.currentUser.gamerTag=e.Gamertag,vui.vvPlatform.currentUser.xboxUserId=e.XboxUserId})},getWidgetVersion:function(e){var t;return vui._widgetVersion||(t=Windows.ApplicationModel.Package.current.id.version,vui._widgetVersion=t.major+"."+t.minor+"."+t.build+"."+t.revision),vui._widgetVersion},inBrowser:function(){return!1},getDeepLinkParams:function(){return vui.vvPlatform.deepLinkParams&&vui.vvPlatform.deepLinkParams.type&&vui._.deleteZapApiEvarsFromSessionStore(),vui.vvPlatform.deepLinkParams},addEventListeners:function(){window.addEventListener("keydown",onKeyDown,!0);var e=Windows.Media.SystemMediaTransportControls.getForCurrentView();e.isEnabled=!0,e.isPlayEnabled=!0,e.isPauseEnabled=!0,e.isStopEnabled=!0,e.isFastForwardEnabled=!0,e.isNextEnabled=!0,e.isPreviousEnabled=!0,e.isRewindEnabled=!0,e.displayUpdater.update(),e.addEventListener("buttonpressed",function(e){var t=Windows.Media.SystemMediaTransportControlsButton;switch(console.log("Button Pressed: ",e.button),e.button){case t.play:vui.onClickPlay();break;case t.pause:vui.onClickPause();break;case t.stop:vui.onClickStop();break;case t.next:vui.onClickSkipFF();break;case t.previous:vui.onClickSkipRW();break;case t.fastForward:vui.onClickFF();break;case t.rewind:vui.onClickRW();break;default:console.log("unhandled button: ",e.button)}},!1)}}},window.vui=window.vui||{},window.vui._getPlatformWebOS=function(){return{clientType:"lgWebOs",id:"vesta",omnitureName:"WebOS",isLightDevice:!0,includeTarget:"lua",connectionType:"Unknown",selectorFollowsMouse:!1,init:function(){document.write('<script src="javascript/webOS.js"><\/script>');var e=setInterval(function(){window.webOS&&(this.loadScript("node_modules/@vudu/asteroid-bundle-vesta/asteroid_aux.all.js"),clearInterval(e))}.bind(this),200);vui.SlowScrollTimeout=200},registerKeys:function(e){e.KEY_RETURN=461,e.KEY_BLUE=406,e.KEY_RED=403,e.KEY_PAUSE=19,e.KEY_RW=412,e.KEY_FF=417,e.KEY_PLAY=415,e.KEY_STOP=413,e.KEY_SUBTITLE=460},changeCookieStorage:function(){window.setCookie=function(e,t){null===t||""===t?window.localStorage.removeItem(e):window.localStorage.setItem(e,t)},window.getCookie=function(e){return window.localStorage.getItem(e)||""}},exitApplication:function(){window.close()},getConnectionType:function(){return vui.vvPlatform.connectionType},getSystemInfo:function(n){function e(){var t,i,e=Asteroid.Features.getVideoSupport();vui.vvPlatform.videoProfiles=(t=[],i={sd:"highP",hdx:"highP",uhd:"main10","sd-main10":"main10","hdx-main10":"main10","uhd-dovi-5":"dvheStn","uhd-hdr10":"hdr10"},e.forEach(function(e){"uhd-sdr"===e||"uhd-dovi-4"===e?t=t.concat(["main10","dvheDtr"]):t.push(i[e])}),t.filter(function(e,t,i){return i.indexOf(e)===t})),vui.vvPlatform.uhdFirmware=e.contains("uhd")||e.contains("uhd-sdr"),vui.vvPlatform.dolbyVision=e.contains("uhd-dovi-5")||e.contains("uhd-dovi-4"),vui.vvPlatform.hdr10=e.contains("uhd-hdr10"),vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),vui.vvPlatform.dolbyVision&&(e.contains("uhd-dovi-4")&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV4),e.contains("uhd-dovi-5")&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV5)),function(){function s(){webOS.service.request("luna://com.webos.service.sm",{method:"deviceid/getIDs",parameters:{idType:["LGUDID"]},onComplete:function(e){var t;e.returnValue?(alert("Result: "+JSON.stringify(e)),t=e.idList[0].idValue.replace(/-/g,""),vui.vvPlatform.deviceId="LGE-:"+vui.vvPlatform.chipSet+":"+t):(alert("Failed to get system ID information"),vui.vvPlatform.deviceId=123456),webOS.service.request("luna://com.webos.service.connectionmanager",{method:"getStatus",onComplete:function(e){function t(e){window.location.reload()}if(!e.returnValue)return alert("Failed to get network state"),void updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_PRESS_ANY_BUTTON"),"","",t);alert("Result: "+JSON.stringify(e)),e.isInternetConnectionAvailable?n(!0):updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_PRESS_ANY_BUTTON"),"","",t)}})}})}webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["boardType","UHD","_3d"]},onComplete:function(e){var t;e.returnValue?(alert("Result: "+JSON.stringify(e)),t=e.boardType.match(/(.*?)_/),vui.vvPlatform.chipSet=t&&t[1]):alert("Failed to get TV device information"),vui.vvPlatform.uhdSupported=JSON.parse(e.UHD)&&vui.vvPlatform.uhdFirmware?1:0,vui.vvPlatform.is3dSupported=JSON.parse(e._3d)?1:0;var i=vui.vvPlatform.clientType;vui.vvPlatform.is3dSupported&&(i+=".3D"),vui.vvPlatform.uhdSupported&&(i+=".4K"),vui.vvPlatform.uiSearchClientType=i,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),s()}}),webOS.service.request("luna://com.palm.connectionmanager",{method:"getStatus",onSuccess:function(e){"connected"===e.wifi.state||"connected"===e.wifiDirect.state?vui.vvPlatform.connectionType="WiFi":"connected"===e.wired.state?vui.vvPlatform.connectionType="Wired":vui.vvPlatform.connectionType="Unknown",alert("connectionType is: "+vui.vvPlatform.connectionType)},onFailure:function(e){alert("Failed to get network state. ["+e.errorCode+"]: "+e.errorText),vui.vvPlatform.connectionType="Unknown"}}),function(){window.networkSubscriptionHandle;var i=null;networkSubscriptionHandle=webOS.service.request("luna://com.webos.service.connectionmanager",{method:"getStatus",parameters:{subscribe:!0},onComplete:function(e){var t=e.returnValue;void 0===e.subscribed||e.subscribed?t?(alert("Result: "+JSON.stringify(e)),e.isInternetConnectionAvailable?vui.vvPlatform.isNetworkAvailable()||(vui.vvPlatform.setNetworkStatus(!0),i&&(clearTimeout(i),i=null),vui.vvPlatform.onNetworkRestored()):(vui.vvPlatform.setNetworkStatus(!1),i=i||setTimeout(vui.vvPlatform.onNetworkLost,500))):(vui.vvPlatform.setNetworkStatus(!1),i=i||setTimeout(vui.vvPlatform.onNetworkLost,3e3)):alert("Failed to subscribe network state")}})}();var i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.open("GET","appinfo.json",!0),i.onload=function(){var e=JSON.parse(i.responseText),t=e&&e.id||"vudu";alert("LG AppId:",t),webOS.service.request("luna://com.webos.settingsservice",{method:"setSystemSettings",parameters:{category:"picture",settings:{truMotionMode:"off"},app_id:t},onComplete:function(e){alert("disabled truMotion")}})},i.send()}()}window.Asteroid&&Asteroid.ready?e():window.addEventListener("com.vudu.asteroid.asteroid-ready",function(){e()})},getDeviceId:function(){VUDU.registry.deviceId=vui.vvPlatform.deviceId},inBrowser:function(){return 123456===vui.vvPlatform.deviceId},getDeepLinkParams:function(){var i={type:!1,contentId:""};if(!PalmSystem||!PalmSystem.launchParams)return i;var e=JSON.parse(PalmSystem.launchParams);if(!e.contentTarget)return i;if(vui._.deleteZapApiEvarsFromSessionStore(),-1===e.contentTarget.indexOf("https")&&-1===e.contentTarget.indexOf("http"))return-1===e.contentTarget.indexOf(":")?(alert("CONTENT TARGET IS A CONTENT ID"),alert("CONTENT TARGET CONTENT ID: "+e.contentTarget),{type:"content",contentId:e.contentTarget}):(alert("CONTENT TARGET IS AN OBJECT"),e.contentTarget.replace(/\s/g,"").split(",").forEach(function(e){var t=e.split(":");i[t[0]]=t[1],alert("CONTENT TARGET KEY: "+t[0]),alert("CONTENT TARGET VALUE: "+t[1])}),i.uxPageId?i.type="uxPage":i.uiPageId?i.type="uiPage":i.uxRowId?i.type="uxRow":i.uiEntryId&&(i.type="uiEntry"),i.contentId&&(i.type="content"),i.listName&&(i.type="myVuduTab",i.myVuduTab=i.listName),i);alert("CONTENT TARGET IS AN URL");var t=e.contentTarget.replace(/\s/g,"").split("/");return{type:"content",contentId:t[t.length-1]}},addEventListeners:function(){document.addEventListener("webOSLaunch",function(){vui.vvPlatform.getDeepLinkParams().type&&window.controller&&(controller.hidePopup(),controller.getStartPage(function(){vui.deepLink.switchingToDeepLinkPage=!0,window.controller.goToPage(vui.vvPlatform.startPage[0],vui.vvPlatform.startPage[1],!0)}))}),document.addEventListener("webOSRelaunch",function(){PalmSystem.activate(),vui.vvPlatform.startPage=null,vui.vvPlatform.getDeepLinkParams().type&&window.controller&&(controller.hidePopup(),controller.getStartPage(function(){vui.deepLink.switchingToDeepLinkPage=!0,window.controller.goToPage(vui.vvPlatform.startPage[0],vui.vvPlatform.startPage[1],!0)}))}),window.addEventListener("mousemove",function e(){window.removeEventListener("mousemove",e),vui.vvPlatform.selectorFollowsMouse=!0,window.controller&&controller.baseLayer&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.onMouseMove&&controller.baseLayer.currentPage.onMouseMove()})},setAriaLabel:function(e){var t=document.getElementById("ariaContainer");e=e.replace(/<br>/g," "),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-label",e)},createTempAlert:function(e,t){createDiv({className:"offscreen",text:e},t).setAttribute("role","alert")},isNetworkAvailable:function(){return alert("vui.vvPlatform.getNetworkStatus: "+vui.vvPlatform.isInternetConnectionAvailable),vui.vvPlatform.isInternetConnectionAvailable},setNetworkStatus:function(e){alert("vui.vvPlatform.setNetworkStatus: "+e),vui.vvPlatform.isInternetConnectionAvailable=e}}},window.vui=window.vui||{},window.vui._getPlatformBrowser=function(){return{init:function(){this.loadScript("node_modules/@vudu/asteroid-bundle-sol/asteroid_aux.all.js"),vui.SlowScrollTimeout=200},clientType:"samsungTizen",id:"sol",omnitureName:"Tizen",isLightDevice:!0,includeTarget:"lua",changeCookieStorage:function(){window.setCookie=function(e,t){null===t||""===t?window.localStorage.removeItem(e):window.localStorage.setItem(e,t)},window.getCookie=function(e){return window.localStorage.getItem(e)||""}},registerKeys:function(e){},exitApplication:function(){},getConnectionType:function(){return null},getSystemInfo:function(s){function e(){var t,i,e=Asteroid.Features.getVideoSupport();vui.vvPlatform.videoProfiles=(t=[],i={sd:"highP",hd:"highP",hdx:"highP",uhd:"main10","uhd-hdr10":"hdr10"},e.forEach(function(e){"uhd-sdr"===e?t=t.concat(["main10","dvheDtr"]):t.push(i[e])}),t.filter(function(e,t,i){return i.indexOf(e)===t})),vui.vvPlatform.uhdSupported=e.contains("uhd")||e.contains("uhd-sdr"),vui.vvPlatform.hdr10=e.contains("uhd-hdr10"),vui.vvPlatform.dolbyVision=!1,vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),s(!0)}window.Asteroid&&Asteroid.ready?e():window.addEventListener("com.vudu.asteroid.asteroid-ready",function(){e()})},getDeviceId:function(){VUDU.registry.deviceId=123456},inBrowser:function(){return!0},getDeepLinkParams:function(){var e,s="",n="",a=!1,o="",r="",l="",u="";if(window.tizen&&window.tizen.application){var t,i=window.tizen.application.getCurrentApplication().getRequestedAppControl();!i||(t=i.appControl.data)&&0<t.length&&t.filter(function(e){return"PAYLOAD"==e.key}).forEach(function(e){var t=e.value[0];if((t=JSON.parse(t)).values){var i=JSON.parse(t.values);if(n=i.campaignId||"",i.contentId)return a="content",s=i.contentId,!1;if(i.uxRowId)return a="uxRow",uxRowId=i.uxRowId,!1;if(i.uxPageId)return a="uxPage",uxPageId=i.uxPageId,!1;if(i.uiPageId)return a="uiPage",r=i.uiPageId,!1;if(i.uiEntryId)return a="uiEntry",o=i.uiEntryId,!1;if(i.spotlightTab)return a="spotlightTab",l=i.spotlightTab,!1;if(i.listName)return a="myVuduTab",u=i.listName,!1}})}else if(vui.m)return(e=getDeepLinkParamsFromQueryString())&&e.type&&vui._.deleteZapApiEvarsFromSessionStore(),e;return a&&vui._.deleteZapApiEvarsFromSessionStore(),{type:a,contentId:s,uiPageId:r,uiEntryId:o,campaignId:n,spotlightTab:l,myVuduTab:u}},addEventListeners:function(){window.addEventListener("appcontrol",function(){alert("deep linking event!");var e=vui.deepLink.getDeepLinkParams().contentId;""!==e&&window.controller&&(vui.deepLink.isPlayingContent(e)?alert("already playing this content, ignore notification"):(vui.deepLink.switchingToDeepLinkPage=!0,window.controller.goToPage("NewMovieDetails",{contentId:e},!0)))}),window.addEventListener("mousemove",function e(){window.removeEventListener("mousemove",e),vui.vvPlatform.selectorFollowsMouse=!0,window.controller&&controller.baseLayer&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.onMouseMove&&controller.baseLayer.currentPage.onMouseMove()})},setAriaLabel:function(e){for(var t=document.getElementById("ariaContainer");t.firstChild;)t.removeChild(t.firstChild);e=e.replace(/<br>/g,"");var i=document.createElement("div");i.setAttribute("role","option"),i.setAttribute("aria-live","assertive"),i.setAttribute("tabindex","-1"),i.setAttribute("aria-label",e),t.appendChild(i),i.focus()},createTempAlert:function(e){e=e.replace(/<br>/g,"");var t=document.createElement("div");t.setAttribute("role","option"),t.setAttribute("aria-live","assertive"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-label",e),document.body.appendChild(t),t.focus(),setTimeout(function(){document.body.removeChild(t),timeout=null},5e3)},authenticationSaved:function(){}}},window.vui=window.vui||{},window.vui._getPlatformVizioCast=function(){function i(){return void 0===window.VUDU_APP_ARGS["launch-source"]}var e;return{clientType:"chromecast",id:"hygiea",omnitureName:"VizioHTML5",isLightDevice:!0,includeTarget:"lua",connectionType:"Unknown",clientTypeForStreamingStats:"chromecastMPL",waitForAsyncPlatformLoad:!0,init:function(){vui.SlowScrollTimeout=150,this._CHROMECAST_IDLE_TIME=3e5},changeCookieStorage:function(){window.setCookie=function(e,t){window.VIZIO.isSmartCastDevice&&(null===t||""===t?window.localStorage.removeItem(e):window.localStorage.setItem(e,t))},window.getCookie=function(e){return window.localStorage.getItem(e)||""}},registerKeys:function(e){vui.vvPlatform.baseApp||(e.KEY_RETURN=8)},exitApplication:function(){vui.vvPlatform.baseApp?window.close():window.VIZIO.exitApplication()},getConnectionType:function(){return vui.vvPlatform.connectionType},getSystemInfo:function(t){function i(i){window.VIZIO.isSmartCastDevice?window.VIZIO.getDeviceId(function(e){var t=CryptoJS.SHA1(e);vui.vvPlatform.deviceId="VZTC:"+window.VIZIO.deviceInfo.modelSeries+":"+t,i(!0)}):i(!0)}function s(e){var t=[],i={sd:"highP",hdx:"highP",uhd:"main10","sd-main10":"main10","hdx-main10":"main10","uhd-hdr10":"hdr10","uhd-dovi-5":"dvheStn"};return e.forEach(function(e){"uhd-sdr"===e||"uhd-dovi-4"===e?t=t.concat(["main10","dvheDtr"]):t.push(i[e])}),t.filter(function(e,t,i){return i.indexOf(e)===t})}function e(){var e=Asteroid.Features.getVideoSupport();vui.vvPlatform.videoProfiles=s(e),vui.vvPlatform.uhdSupported=e.contains("uhd")||e.contains("uhd-sdr"),vui.vvPlatform.hdr10=e.contains("uhd-hdr10"),vui.vvPlatform.dolbyVision=e.contains("uhd-dovi-5"),vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),vui.vvPlatform.dolbyVision&&e.contains("uhd-dovi-5")&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV5),i(t)}var n;"chromecast"===vui.vvPlatform.clientType?(n=ancinus.FormatCheck.check(),vui.vvPlatform.uhdSupported=n.contains("uhd")||n.contains("uhd-sdr"),vui.vvPlatform.hdr10=n.contains("uhd-hdr10"),vui.vvPlatform.dolbyVision=n.contains("uhd-dovi-5")||n.contains("uhd-dovi-4"),vui.vvPlatform.videoProfiles=s(n),vui.vvPlatform.uhdSupport=UHD_SUPPORT_NONE,vui.vvPlatform.uhdSupported&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_SDR),vui.vvPlatform.hdr10&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_HDR10),vui.vvPlatform.dolbyVision&&(n.contains("uhd-dovi-4")&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV4),n.contains("uhd-dovi-5")&&(vui.vvPlatform.uhdSupport=vui.vvPlatform.uhdSupport|UHD_SUPPORT_DV5)),i(t)):window.VIZIO.failedVizioCompanionLib?i(t):window.Asteroid&&Asteroid.ready?e():window.addEventListener("com.vudu.asteroid.asteroid-ready",function(){e()}),VIZIO&&VIZIO.connectionType&&VIZIO.connectionType().then(function(e){vui.vvPlatform.connectionType="Ethernet"===e?"Wired":"WiFi"})},getDeviceId:function(){VUDU.registry.deviceId=vui.vvPlatform.deviceId},inBrowser:function(){return window.VIZIO&&window.VIZIO.failedVizioCompanionLib&&!vui.vvPlatform.baseApp},addAncinusHooks:function(){var e;i()&&((e=window.ancinus.PlayerProxy.getPlayerProxy()).addEventListener(ancinus.PlayerProxy.EVENTS.HAVE_TRACKS,function(e){var t;e&&e.detail&&event.detail.tracksInfo&&(ancinus.mediautil.loadTracksInfo(e.detail.tracksInfo),(t=vui.getPlayer()).tracks=e.detail.tracksInfo.tracks,t.activeTrackIds=event.detail.tracksInfo.activeTrackIds,console.info("notifyTracksAvailable called with tracksInfo"))}),e.addEventListener(ancinus.PlayerProxy.EVENTS.ACTIVE_TRACKS,function(e){var t=vui.getPlayer();e&&e.detail&&event.detail.tracksInfo&&event.detail.tracksInfo.activeTrackIds?(console.info("Active tracks changed: ",event.detail.tracksInfo.activeTrackIds),t.activeTrackIds=event.detail.tracksInfo.activeTrackIds):(console.info("notifyTracksChanged called with no active tracks: ",e),t.activeTrackIds=null)}),e.addEventListener(ancinus.PlayerProxy.EVENTS.STATE_CHANGE,function(){ancinus.mediautil.updateStatus()}),e.addEventListener(ancinus.PlayerProxy.EVENTS.PLAY,function(){console.info("on play"),vui.onClickPlay()}),e.addEventListener(ancinus.PlayerProxy.EVENTS.PAUSE,function(){console.info("on pause!"),vui.onClickPause()}),e.addEventListener(ancinus.PlayerProxy.EVENTS.STOP,function(){console.info("on stop!"),vui.onClickStop()}),e.addEventListener(ancinus.PlayerProxy.EVENTS.SEEK,function(e){var t=vui.getPlayer(),i=t.getChunkForTime(1e3*e.detail.position);t.seekToChunk(i)}),e.addEventListener(ancinus.PlayerProxy.EVENTS.CAPTIONS_CHANGE,function(e){if("Theater"===controller.baseLayer.currentPage.pageTitle){e.detail.enable||vui.executeOnContainer(window.vui.getSelected(),"hideSubtitles",{down:!1,count:1});for(var t=controller.baseLayer.currentPage.subtitleLanguages||[],i=0;i<t.length;i++)t[i].language===e.detail.name&&vui.executeOnContainer(window.vui.getSelected(),"setCurrentSubtitle",t[i])}}),e.addEventListener(ancinus.PlayerProxy.EVENTS.CAPTIONS_STYLE_CHANGE,function(e){console.info(e)}))},addEventListeners:function(){var e,t=function(){!window.VIZIO.failedVizioCompanionLib&&!window.VIZIO.isSmartCastDevice||i()?(vui.CastUtil.setup(),vui.vvPlatform.baseApp=!window.VIZIO.isSmartCastDevice||i(),vui.vvPlatform.clientType="chromecast",vui.vvPlatform.clientTypeForStreamingStats="chromecastMPL",vui.vvPlatform.omnitureName="Chromecast",vui.vvPlatform.startPage=["OpeningPitch_Remote",{}]):(vui.vvPlatform.clientType="vizioCast",vui.vvPlatform.clientTypeForStreamingStats=vui.vvPlatform.clientType),console.info("VIZIO.isSmartCastDevice: "+window.VIZIO.isSmartCastDevice),this.addAncinusHooks(),pluginAPI.setOnScreenSaver(),this.setPlatformIsLoaded()}.bind(this);document.addEventListener("VIZIO_LIBRARY_DID_LOAD",function(e){console.info("VIZIO LIBRARY LOADED"),t()},!1),i()?(alert("cast util loaded!"),window.VIZIO={isSmartCastDevice:!1,isDpadEnabled:!1,failedVizioCompanionLib:!0},e=setInterval(function(){window.ancinus&&(clearInterval(e),t())},200),window.VUDU_APP_ARGS.doCAF?(document.write('<script src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"><\/script>'),document.write('<script src="node_modules/@vudu/ancinus-caf/ancinus_aux.all.js"><\/script>')):(document.write('<script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"><\/script>'),document.write('<script src="//www.gstatic.com/cast/sdk/libs/mediaplayer/1.0.0/media_player.js"><\/script>'),document.write('<script src="node_modules/@vudu/ancinus/ancinus_aux.all.js"><\/script>'))):(this.loadScript("node_modules/@vudu/asteroid-bundle-intera/asteroid_aux.all.js"),this.loadScript("http://localhost:12345/scfs/cl/js/vizio-companion-lib.js")),window.addEventListener("mousemove",function e(){window.removeEventListener("mousemove",e),vui.vvPlatform.selectorFollowsMouse=!0,window.controller&&controller.baseLayer&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.onMouseMove&&controller.baseLayer.currentPage.onMouseMove()}),window.addEventListener("DOMContentLoaded",function e(){window.removeEventListener("DOMContentLoaded",e),window.addEventListener("offline",function(e){console.log("The display is offline"),vui.vvPlatform.onNetworkLost()}),window.addEventListener("online",function(e){console.log("The display is online"),vui.vvPlatform.onNetworkRestored()})}),vui.vvPlatform.setUpIdleTimers()},setUpIdleTimers:function(){pluginAPI.setOffScreenSaver=function(){"chromecast"===vui.vvPlatform.clientType&&(console.debug("calling pluginAPI.setOffScreenSaver()"),clearTimeout(e))},pluginAPI.setOnScreenSaver=function(){"chromecast"===vui.vvPlatform.clientType&&(console.debug("calling pluginAPI.setOnScreenSaver()"),clearTimeout(e),e=setTimeout(function(){console.debug("Idle Timer expired, exiting app!"),vui.vvPlatform.exitApplication()},vui.vvPlatform._CHROMECAST_IDLE_TIME))}},setAriaLabel:function(e){var t=new RegExp("vudu","ig");e=e.replace(t,"voodoo");for(var i=document.getElementById("ariaContainer");i.firstChild;)i.removeChild(i.firstChild);e=e&&e.replace(/<br>/g,"");var s=document.createElement("div");s.setAttribute("role","option"),s.setAttribute("aria-live","assertive"),s.setAttribute("tabindex","-1"),s.setAttribute("aria-label",e),i.appendChild(s),s.focus()},createTempAlert:function(e){e=e&&e.replace(/<br>/g,"");var t=document.createElement("div");t.setAttribute("role","option"),t.setAttribute("aria-live","assertive"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-label",e),document.body.appendChild(t),t.focus();setTimeout(function(){document.body.removeChild(t),0},5e3)},getAppLaunchedSource:function(){var e=window.VUDU_APP_ARGS;0<window.location.search.length&&(vui.vvPlatform._appLaunchedSource="organic");var t=e["launch-source"];return t&&(vui.vvPlatform._appLaunchedSource="partner-button"==t?"remoteButton":"content-link"==t?"deeplink":"organic"),vui.vvPlatform._appLaunchedSource?vui.vvPlatform._appLaunchedSource:vui.vvPlatform.getDefaultAppLaunchedSource()},getDeepLinkParams:function(){var e=function(){var e=window.VUDU_APP_ARGS,t={};if(!e.data)return t;try{var i=JSON.parse(e.data)}catch(e){return alert("problem parsing deeplink json","error"),t}return t.campaignId=i.campaignId||"",i.contentId?(t.type="content",t.contentId=i.contentId,t.contentType=i.contentType):i.uxRowId?(t.type="uxRow",t.uxRowId=i.uxRowId):i.uxPageId?(t.type="uxPage",t.uxPageId=i.uxPageId):i.uiPageId?(t.type="uiPage",t.uiPageId=i.uiPageId):i.uiEntryId?(t.type="uiEntry",t.uiEntryId=i.uiEntryId):i.spotlightTab?(t.type="spotlightTab",t.uiEntryId=i.spotlightTab):i.listName&&(t.type="myVuduTab",t.myVuduTab=i.listName),t}();return e?(e.type&&vui._.deleteZapApiEvarsFromSessionStore(),e):vui.vvPlatform._deepLinkParams?(vui.vvPlatform._deepLinkParams.type&&vui._.deleteZapApiEvarsFromSessionStore(),vui.vvPlatform._deepLinkParams):{contentId:""}},getDefaultAppLaunchedSource:function(){return"cast"},_mediaTekModels:{"M437-G0":1,"M507-G1":1,"M507RED-G1":1,"M556-G4":1,"M656-G4":1,"M706-G3":1,"E43-F1":1,"E70-F3":1},isMediatekChipset:function(){return null!=vui.vvPlatform._mediaTekModels[window.VIZIO.deviceModel]},getSystemInfoFromVizioUserAgent:function(){var e,t,i,s="unknown",n="unknown",a=navigator.userAgent.match(/VIZIO SmartCast\(([^\)]+)\)/);return a&&a[1]&&((t=(e=a[1]).match(/FW\/([^\s]+)/))&&t[1]&&(s=t[1]),(i=e.match(/Model\/([^\s]+)/))&&i[1]&&(n=i[1])),{model:n,fw:s}}}},function(){window.vui=window.vui||{};window.VUDU_APP_ARGS=function(){for(var e={},t=location.search.substring(1).split("&"),i=0;i<t.length;i++){var s,n,a=t[i].indexOf("=");-1!==a&&(s=t[i].substring(0,a),n=t[i].substring(a+1),e[s]=decodeURIComponent(n))}return e}();var e,t;window.vui.vvPlatform=(t=(e={platformMapping:{walmart:{}},waitForAsyncPlatformLoad:!1,clientType:"",uiSearchClientType:"",id:"",omnitureName:"",omnitureAccountSuite:"vudusamsung3qa",omnitureTestAccountSuite:"vudusamsung3prod",wmvOmnitureAccountSuite:"vudup34samsungprod",wmvOmnitureTestAccountSuite:"vudup34html5qa",trackerSource:"Samsung",isLightDevice:!1,includeTarget:"",appDeviceLabel:"",registryFirmwareKey:"",chipSet:"",is3dSupported:0,uhdSupported:0,deviceId:"12345",useWebkit:!1,loadScript:function(e){var t=document.createElement("script");t.src=e,document.head.appendChild(t)},changeCookieStorage:function(){},registerKeys:function(){},exitApplication:function(){},getSystemInfo:function(e){e(!0)},getDeviceId:function(){alert("PLEASE OVERWRITE IF SEEN ON DEVICE")},getConfigJSON:function(){if(!this._configJSON){var e=new XMLHttpRequest;e.overrideMimeType("application/json"),e.open("GET","config.json",!1),e.send(null);try{var t=JSON.parse(e.responseText);this._configJSON=t}catch(e){alert("Cannot parse config.json")}}return this._configJSON},getWidgetVersion:function(){var e=this.getConfigJSON();return e&&e.version?e.version:"unknown"},getConfigClientType:function(){if(window.VUDU_APP_ARGS.clientType)return window.VUDU_APP_ARGS.clientType;var e=this.getConfigJSON();return e&&e.clientType?e.clientType:"unknown"},inBrowser:function(){},setDeepLinkParams:function(e,t,i){vui.vvPlatform._deepLinkParams={contentId:e,campaignId:t,partnerCampaignId:i}},getDeepLinkParams:function(){return vui._.deleteZapApiEvarsFromSessionStore(),vui.vvPlatform._deepLinkParams?vui.vvPlatform._deepLinkParams:{contentId:""}},setAppLaunchedSource:function(e){vui.vvPlatform._appLaunchedSource=e},getAppLaunchedSource:function(){return vui.vvPlatform._appLaunchedSource?vui.vvPlatform._appLaunchedSource:vui.vvPlatform.getDefaultAppLaunchedSource()},getDefaultAppLaunchedSource:function(){return"organic"},addEventListeners:function(){},setPlatformIsLoaded:function(){var e=new CustomEvent("onPlatformLoaded");window.dispatchEvent(e)},startPlatformLoad:function(){this.addEventListeners(),this.waitForAsyncPlatformLoad||this.setPlatformIsLoaded()},onNetworkRestored:function(){alert("overwrite onNetworkRestored")},onNetworkLost:function(){alert("overwrite onNetworkLost")},setAriaLabel:function(){alert("overwrite setAriaLabel")},createTempAlert:function(){alert("overwrite createTempAlert")},appFeatureEnabled:function(e){var t=window.APPPROVIDER;return!(t&&e&&this.platformMapping.hasOwnProperty(t)&&!1===this.platformMapping[t][e]||!this.platformMapping.hasOwnProperty(t))},getDomain:function(){return window.APPPROVIDER?window.APPPROVIDER:"vudu"},getOmnitureAccountSuite:function(){return"walmart"===vui.vvPlatform.getDomain()?this.wmvOmnitureAccountSuite:this.omnitureAccountSuite},getOmnitureTestAccountSuite:function(){return"walmart"===vui.vvPlatform.getDomain()?this.wmvOmnitureTestAccountSuite:this.omnitureTestAccountSuite},reportAppStarted:function(){},reportVideoStarted:function(e){},reportVideoEnded:function(e){},reportError:function(e,t,i){},reportMetric:function(e,t){},init:function(){}}).getConfigClientType(),$extend(e,"xboxOne"===t?window.vui._getPlatformUwp():"samsungTizen"===t?window.vui._getPlatformTizen():"lgWebOs"===t?window.vui._getPlatformWebOS():"vizioCast"===t?window.vui._getPlatformVizioCast():window.vui._getPlatformBrowser())),window.vui.vvPlatform.init()}(),null==window.Common&&(window.Common=new Object),null==window.Common.API&&(window.Common.API=new Object),Common.API.TVKeyValue=function(){"pallas"!==vui.vvPlatform.id&&(this.KEY_TOOLS=84,this.KEY_MUTE=77,this.KEY_RETURN=27,this.KEY_UP=38,this.KEY_DOWN=40,this.KEY_LEFT=37,this.KEY_RIGHT=39,this.KEY_WHEELDOWN=29469,this.KEY_WHEELUP=29468,this.KEY_ENTER=13,this.KEY_INFO=73,this.KEY_EXIT=36,this.KEY_RED=108,this.KEY_GREEN=20,this.KEY_YELLOW=21,this.KEY_BLUE=22,this.KEY_INFOLINK=147,this.KEY_PAUSE=65,this.KEY_RW=45,this.KEY_FF=46,this.KEY_PLAY=80,this.KEY_STOP=83,this.KEY_1=49,this.KEY_2=50,this.KEY_3=51,this.KEY_4=52,this.KEY_5=53,this.KEY_6=54,this.KEY_7=55,this.KEY_8=56,this.KEY_9=57,this.KEY_0=48,this.KEY_EMPTY=109,this.KEY_PRECH=259,this.KEY_SOURCE=222,this.KEY_CHLIST=22222,this.KEY_MENU=262,this.KEY_WLINK=115,this.KEY_CC=118,this.KEY_CONTENT=261,this.KEY_FAVCH=256,this.KEY_REC=192,this.KEY_EMODE=148,this.KEY_DMA=260,this.KEY_PANEL_CH_UP=105,this.KEY_PANEL_CH_DOWN=106,this.KEY_PANEL_VOL_UP=203,this.KEY_PANEL_VOL_DOWN=204,this.KEY_PANEL_ENTER=309,this.KEY_PANEL_SOURCE=612,this.KEY_PANEL_MENU=613,this.KEY_PANEL_POWER=614,this.KEY_POWER=76,this.KEY_TV=77,this.KEY_VOL_UP=7,this.KEY_VOL_DOWN=11,this.KEY_CH_UP=68,this.KEY_CH_DOWN=65,this.KEY_TTX_MIX=650,this.KEY_GUIDE=651,this.KEY_SUBTITLE=652,this.KEY_ASPECT=653,this.KEY_DOLBY_SRR=654,this.KEY_MTS=655,this.KEY_SKIP_FF=1078,this.KEY_SKIP_RW=1080,vui.vvPlatform.registerKeys(this))};var VUDU=VUDU||{};VUDU.xboxAuthUtils={userAddressSet:function(n){var e={_type:"xboxTitleOrderTokenRequest",accountId:n,xboxType:"xboxOne"};vui.getModel().doQuery(e,function(e,t,i){var s;"xboxTitleOrderTokenResponse"===i._type&&(s=i.titleOrderToken,vui.ActivationController.getXboxTokenAsync("https://purchasetvod-gw.xboxlive.com").then(function(e){fetchUrl="https://purchasetvod-gw.xboxlive.com/users/xuid("+vui.vvPlatform.currentUser.xboxUserId+")/commerce/userinfo";var i=new XMLHttpRequest;i.open("GET",fetchUrl,!0),i.setRequestHeader("Authorization",e.token),i.setRequestHeader("TitleAssertion",s[0]),i.setRequestHeader("X-XBL-Contract-Version","2"),i.onload=function(){var e,t;200===i.status?(console.log(i.responseText),e=i.responseText,t={_type:"xboxBillingAddressSet",accountId:n,xboxType:"xboxOne",orderToken:e},vui.getModel().doQuery(t,function(e,t,i){"success"!==i._type&&console.log("Error getting billing address from Microsoft: ",i)})):console.log("Status code was "+i.status)},i.onerror=function(){console.log("Can't XHR "+JSON.stringify(url))},i.onprogress=function(e){console.log(e.loaded/e.total)},i.send()})),console.log(t)})}};var sprintf=function(){function v(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};return e.format=function(e,t){for(var i,s,n,a,o,r,l,u=1,d=e.length,c=[],h=0;h<d;h++)if("string"===(i=v(e[h])))c.push(e[h]);else if("array"===i){if((a=e[h])[2])for(s=t[u],n=0;n<a[2].length;n++){if(!s.hasOwnProperty(a[2][n]))throw sprintf('[sprintf] property "%s" does not exist',a[2][n]);s=s[a[2][n]]}else s=a[1]?t[a[1]]:t[u++];if(/[^s]/.test(a[8])&&"number"!=v(s))throw sprintf("[sprintf] expecting number but found %s",v(s));switch(a[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=a[7]?s.toExponential(a[7]):s.toExponential();break;case"f":s=a[7]?parseFloat(s).toFixed(a[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&a[7]?s.substring(0,a[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(a[8])&&a[3]&&0<=s?"+"+s:s,r=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",l=a[6]-String(s).length,o=a[6]?function(e,t){for(var i=[];0<t;i[--t]=e);return i.join("")}(r,l):"",c.push(a[5]?s+o:o+s)}return c.join("")},e.cache={},e.parse=function(e){for(var t=e,i=[],s=[],n=0;t;){if(null!==(i=/^[^\x25]+/.exec(t)))s.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(t)))s.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(i[2]){n|=1;var a=[],o=i[2],r=[];if(null===(r=/^([a-z_][a-z_\d]*)/i.exec(o)))throw"[sprintf] huh?";for(a.push(r[1]);""!==(o=o.substring(r[0].length));)if(null!==(r=/^\.([a-z_][a-z_\d]*)/i.exec(o)))a.push(r[1]);else{if(null===(r=/^\[(\d+)\]/.exec(o)))throw"[sprintf] huh?";a.push(r[1])}i[2]=a}else n|=2;if(3===n)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";s.push(i)}t=t.substring(i[0].length)}return s},e}(),vsprintf=function(e,t){return t.unshift(e),sprintf.apply(null,t)};function VoiceControl(){this.actionHandler={"tvMediaControl.ContinueWatching":this.onContinueWatching,"tvMediaControl.TrackPrevious":this.onTrackPrevious,"tvMediaControl.TrackNext":this.onTrackNext,"tvMediaControl.Restart":this.onRestart,"tvMediaControl.SkipBackward":this.onSkipBackward,"tvMediaControl.SkipForward":this.onSkipForward,"tvMediaControl.SetPlayPosition":this.onSetPlayPosition,"tvMediaControl.SetSubtitle":this.onSetSubtitle},this.EXCEPTION_SKIPBACKWARD_OFFSET_INVALID="Exception_SkipBackward_offset_Invalid",this.EXCEPTION_SKIPFORWARD_OFFSET_INVALID="Exception_SkipForward_offset_Invalid",this.EXCEPTION_SETPLAYPOSITION_POSITION_INVALID="Exception_SetPlayPosition_position_Invalid",this.EXCEPTION_SETSUBTITLE_OFF_UNSUPPORTED="Exception_SetSubtitle_Off_Unsupported",this.EXCEPTION_SETSUBTITLE_ON_UNSUPPORTED="Exception_SetSubtitle_on_Unsupported",this.EXCEPTION_SETSUBTITLE_ON_ALREADY_SET=" Exception_SetSubtitle_on_Already_Set",this.EXCEPTION_SETSUBTITLE_OFF_ALREADY_SET="Exception_SetSubtitle_Off_Already_Set",this.initialize()}window.vsprintf=vsprintf,window.vui||(window.vui={}),vui.strings={_languages:{},DEFAULT_LANGUAGE:"en",getLanguage:function(){var e=vui.USER_LANGUAGE;return e&&vui.strings._languages[e]?e:vui.strings.DEFAULT_LANGUAGE},register:function(e,t){vui.strings._languages[e]=t},get:function(e,t,i){var s=vui.strings._languages[e];if(!s)return alert("vui.strings failed, no strings for locale: "+e),"";var n=s[t];if("string"!=typeof n)return alert("vui.strings failed to find a string for key '"+t+"' in locale '"+e+"'"),"";try{return window.vsprintf(n.replace(/\n/g,"<br/>"),i)}catch(e){return alert("ERROR in vsprintf: "+e),"VSPRINTF ERROR"}},getText:function(e){if(null===e)return null;for(var t=[],i=1,s=arguments.length;i<s;i++)t.push(arguments[i]);return vui.strings.get(vui.strings.getLanguage(),e,t)},transformCase:function(e,t){return null===e?null:t?e.toUpperCase():e},getTransformedText:function(){return this.getText.apply(null,arguments)}},function(){var e={LANGUAGE_ENGLISH:"English",LANGUAGE_SPANISH:"Spanish",OPENING_PITCH_WELCOME_TITLE_NO_OFFER:"Try it free.",OPENING_PITCH_WELCOME_TITLE_OFFER:"Try it free, $%s credit.",OPENING_PITCH_WELCOME_SUBTITLE:"No sign-up fee, no monthly fees.",OPENING_PITCH_WELCOME_DISCLAIMER:"* Visit %s",OPENING_PITCH_PROMO_BUTTON_1:"Use",OPENING_PITCH_PROMO_BUTTON_2:"$%s",OPENING_PITCH_PROMO_BUTTON_3:"Credit",OPENING_PITCH_PROMO_BUTTON:"Use $%s Credit",OPENING_PITCH_SIGN_UP_BUTTON:"Sign Up Now",OPENING_PITCH_SIGN_UP_BUTTON_BREAK:"Sign Up\nNow",OPENING_PITCH_EXPLORE_VUDU:"Explore\nVudu",OPENING_PITCH_EXPLORE_APPX:"Explore\n%s",OPENING_PITCH_ALT_SIGN_UP_BUTTON:"Start Free Trial",OPENING_PITCH_WELCOME_ALT_TITLE_NO_OFFER:"Try it free.",OPENING_PITCH_WELCOME_ALT_TITLE_OFFER:"Free Trial: Receive $%s credit to get started!",OPENING_PITCH_WELCOME_ALT_SUBTITLE:"No sign-up fee. No monthly fees.",ACTIVATION_EMAIL_PROMPT_ALT_PROMO_TEXT:"Enter email address to start your free trial.",ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE:"By using Vudu, you agree to the Vudu terms of service and privacy policy at Vudu.com/tos.",ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX:"By using %s, you agree to the %s terms of service and privacy policy at %s/tos.",ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_FANDANGO:"By using Vudu, you agree to the Privacy Policy at %s and Terms and Policies at %s",ACTIVATION_FORGOT_PASSWORD_APPX:"Forgot your password? Visit %s/myaccount to reset it.",ACTIVATION_FORGOT_PASSWORD_WALMART:"Forgot your password?\nVisit https://www.walmart.com/account/forgotpassword to reset it.",OPENING_PITCH_NEW_RELEASES_TITLE:"New Releases  First",OPENING_PITCH_NEW_RELEASES_SUBTITLE_1:"Why wait?",OPENING_PITCH_NEW_RELEASES_SUBTITLE_2:"Watch it today on Vudu.*",OPENING_PITCH_NEW_RELEASES_SUBTITLE_2_APPX:"Watch it today on %s.*",OPENING_PITCH_GREAT_VALUE_TITLE:"Great Value",OPENING_PITCH_GREAT_VALUE_SUBTITLE_1:"Great daily deals plus thousands",OPENING_PITCH_GREAT_VALUE_SUBTITLE_2:"of titles available for $2 for 2 nights.",OPENING_PITCH_MOST_HD_TITLE:"The Most HD",OPENING_PITCH_MOST_HD_SUBTITLE_1:"Stunning 1080p.",OPENING_PITCH_MOST_HD_SUBTITLE_2:"Rich Dolby Digital Plus 7.1.",OPENING_PITCH_BROWSE_BUTTON:"Browse",OPENING_PITCH_SIGNIN_BUTTON:"Sign In",OPENING_PITCH_SIGNUP_BUTTON:"Sign Up",OPENING_PITCH_GET_STARTED_BUTTON:"Get Started",OPENING_PITCH_SIDEBAR_TITLE:"Try Vudu for Free",OPENING_PITCH_SIDEBAR_TITLE_APPX:"Try %s for Free",OPENING_PITCH_YOUR_FIRST_RENTAL_IS_FREE:"Your first rental is free! Try it now.",OPENING_PITCH_SIDEBAR_TOP_TEXT:"On Vudu Today",OPENING_PITCH_SIDEBAR_TOP_TEXT_APPX:"On %s Today",OPENING_PITCH_SIGNUP_BUTTON:"Sign Up",OPENING_PITCH_LOGIN_BUTTON:"Log In",OPENING_PITCH_TEXT_1:"Join for free",OPENING_PITCH_TEXT_1_OFFER:"Join free. Rent 3. Just 99¢ each*",OPENING_PITCH_TEXT_2:"Discover, watch, and collect movies & TV.",OPENING_PITCH_TEXT_3:"Rent or buy the latest movies & TV\nOr watch thousands of titles free with limited ads",OPENING_PITCH_TEXT_1_XBOX:"Welcome to Vudu",OPENING_PITCH_TEXT_1_XBOX_APPX:"Welcome to %s",OPENING_PITCH_TEXT_2_XBOX:"Discover, watch, and collect movies & TV",OPENING_PITCH_TEXT_3_XBOX:"* Stunning cinematic experiences, in up to 4K UHD.\n* Rent or buy over 100,000 movies & TV shows.\n* Join us freely. No subscriptions or commitments.",OPENING_PITCH_TERMS_APPLY:"*Limited time only. See terms and conditions at vudu.com/99cents",OPENING_PITCH_TERMS_APPLY_APPX:"*Limited time only. See terms and conditions at %s/99cents",OPENING_PITCH_WMV_TEXT_1:"Welcome to Walmart Video",OPENING_PITCH_WMV_TEXT_2:"",OPENING_PITCH_WMV_TEXT_3:"Your family-friendly home for movies & TV\nwith over 150,000 titles and prices starting at free.",ACTIVATION_CODE_TITLE:"Activate your %s",ACTIVATION_VUDU_ON_DEVICE:"Activate %s on Your Device",ACTIVATION_VUDU_TO_CONTINUE:"To Continue, Activate %s on Your Device",ACTIVATION_CODE_SIGN_IN:"Log In & Activate %s on Your Device",ACTIVATION_CODE_SIGN_UP:"Activate %s on Your Device",ACTIVATION_CODE_PURCHASE:"To Rent or Buy, Log In or Sign Up & Activate %s on Your Device",ACTIVATION_CODE_STEP_ONE:"1. On your computer or mobile phone, visit:",ACTIVATION_CODE_URL:"%s/start",ACTIVATION_CODE_STEP_TWO:"2. Enter the code and follow the on-screen instructions.",ACTIVATION_CODE_EXPIRED:"Code Expired",ACTIVATION_GET_NEW_CODE:"Get New Code",ACTIVATION_ACTIVATION_CODE_ERROR:"Unable to get activation code.",ACTIVATION_CODE_FOOTNOTE:"Once activation is complete, this screen will automatically update.",ACTIVATION_SUCCESS:"Success!",ACTIVATION_WELCOME:"You have activated Vudu on your device and can\nnow access thousands of movies and TV shows.",ACTIVATION_WELCOME_APPX:"You have activated %s on your device and can\nnow access thousands of movies and TV shows.",ACTIVATION_ADD_PAYMENT:"To rent or buy, add a payment method to your account at Vudu.com.",ACTIVATION_ADD_PAYMENT_APPX:"To rent or buy, add a payment method to your account at %s.",ACTIVATION_BROWSE_VUDU:"Browse %s",ACTIVATION_CONTINUE:"Continue",ACTIVATION_OKAY:"OK",ACTIVATION_EDIT_EMAIL_TITLE:"Edit email address",ACTIVATION_EDIT_EMAIL_HELP:"Enter email address",ACTIVATION_ERROR_TITLE:"Error",ACTIVATION_ERROR_DISMISS_BUTTON:"Browse",ACTIVATION_ACCOUNTLOCKED_ERROR_TEXT:"Account temporarily locked. Please try again in 30 minutes.",ACTIVATION_GENERAL_ERROR_TEXT:"There was an error processing your request. Please try again later. If you continue to see this error, please call Vudu Customer Care at %s.",ACTIVATION_GENERAL_ERROR_TEXT_APPX:"There was an error processing your request. Please try again later. If you continue to see this error, please call %s Customer Care at %s.",ACTIVATION_PW_RESET_SUCCESS_TITLE:"Password Reset Email Sent",ACTIVATION_PW_RESET_SUCCESS_TEXT:"We have sent you an email at [%s]. Once you have received your new password, please enter it to continue activation.",ACTIVATION_PW_RESET_SUCCESS_CONTINUE_BUTTON:"Continue",ACTIVATION_PW_RESET_ERROR_TEXT:"Unable to reset your password at this time. Please try again later or call Vudu Customer Care at %s.",ACTIVATION_PW_RESET_ERROR_TEXT_APPX:"Unable to reset your password at this time. Please try again later or call %s Customer Care at %s.",ACTIVATION_FORGOT_PW_TITLE:"Forgot Password",ACTIVATION_FORGOT_PW_TEXT:"Forgot your password? We can send you an email at [%s]. Click the link in the email and follow the instructions to set a new password.\n \nDidn't receive the email? Please call Vudu Customer Care at %s.",ACTIVATION_FORGOT_PW_SEND_EMAIL_BUTTON:"Send Email",ACTIVATION_FORGOT_PW_EDIT_EMAIL_BUTTON:"Edit Email",ACTIVATION_RESET_PW_TITLE:"Password Reset Required",ACTIVATION_RESET_PW_TEXT:"Your password has expired. You need to reset your password. We can send you an email at [%s]. Click the link in the email and follow the instructions to set a new password.\n \nDidn't receive the email? Please call Vudu Customer Care at %s.",ACTIVATION_RESET_PW_SEND_EMAIL_BUTTON:"Send email",ACTIVATION_RESET_PW_EDIT_EMAIL_BUTTON:"Edit email address",ACTIVATION_COMPLETE_TITLE:"Welcome to Vudu!",ACTIVATION_COMPLETE_TITLE_APPX:"Welcome to %s!",ACTIVATION_COMPLETE_PROMO_PREFIX:"Congratulations! You have received your free $%s credit to use against purchases of movies and TV content.\n \n",ACTIVATION_COMPLETE_TEXT:"You can now access thousands of the best and latest movies and TV shows.\n\nIf you are a new user, please first check your email to complete account setup.",ACTIVATION_COMPLETE_TEXT_VIZIO_UHD_PROMO:"Congratulations, you just received Mad Max: Fury Road in Vudu UHD. Enjoy Dolby Vision and 5K Ultra HD on your new VIZIO Reference Series Ultra HD Smart TV. \n\nFind it in your My Vudu library, or browse 100,000 more movies and TV available on Vudu.",ACTIVATION_ACCOUNT_CREATE_TEXT:"We have created a Vudu account for you.\n\nPlease check your email to complete account setup and claim your %s free movies.",ACTIVATION_ACCOUNT_CREATE_TEXT_APPX:"We have created a %s account for you.\n\nPlease check your email to complete account setup and claim your %s free movies.",ACTIVATION_COMPLETE_DISMISS_BUTTON:"Browse Movies",ACTIVATION_TOO_MANY_DEVICES_TITLE:"Too Many Devices",ACTIVATION_TOO_MANY_DEVICES_TEXT:"You Have Too Many Devices On This Account.\n \nTo add this device, please remove an existing device by visiting the Manage Devices account setting at %s.",ACTIVATION_TOO_MANY_DEVICES_RESTART_BUTTON:"Start Over",ACTIVATION_LOGIN_FAILED_TITLE:"Invalid Email/Password",ACTIVATION_LOGIN_FAILED_TEXT:"Please check your email or password and try again.",ACTIVATION_LOGIN_FAILED_TEXT_FORGOT_WALMART_PASSWORD:"Forgot your password?\nVisit www.walmart.com/account/forgotpassword.",ACTIVATION_LOGIN_FAILED_RETRY_BUTTON:"Retry",ACTIVATION_USER_EXISTS_TITLE:"User Exists",ACTIVATION_USER_EXISTS_TEXT:"There is already a Vudu account with the address you provided. Try logging in with that address and your password.",ACTIVATION_USER_EXISTS_TEXT_APPX:"There is already a %s account with the address you provided. Try logging in with that address and your password.",ACTIVATION_USER_EXISTS_RESTART_BUTTON:"Start Over",ACTIVATION_EMAIL_PROMPT_TITLE:"Enter email address",ACTIVATION_EMAIL_PROMPT_NO_PROMO_TEXT:"Enter email address and enjoy Vudu",ACTIVATION_EMAIL_PROMPT_NO_PROMO_TEXT_APPX:"Enter email address and enjoy %s",ACTIVATION_EMAIL_PROMPT_PROMO_TEXT:"Enter email address to get your free $%s credit.",ACTIVATION_EMAIL_PROMPT_HELP:"Enter email address",ACTIVATION_EMAIL_PROMPT_BACK_BUTTON:"Back",ACTIVATION_EMAIL_PROMPT_DONE_BUTTON:"Done",ACTIVATION_WMT_EMAIL_PROMPT_TITLE:"Enter email address",ACTIVATION_WMT_EMAIL_PROMPT_TEXT:"Enter the email address of your Walmart.com account.",ACTIVATION_WMT_EMAIL_PROMPT_HELP:"Enter email address",ACTIVATION_WMT_EMAIL_PROMPT_BACK_BUTTON:"Back",ACTIVATION_WMT_EMAIL_PROMPT_DONE_BUTTON:"Done",ACTIVATION_PASSWORD_PROMPT_TITLE:"Enter password",ACTIVATION_PASSWORD_PROMPT_TEXT:"You've already created an account with the email address %s.\nPlease enter your account password to continue.",ACTIVATION_PASSWORD_PROMPT_HELP:"Enter password",ACTIVATION_PASSWORD_PROMPT_BACK_BUTTON:"Back",ACTIVATION_PASSWORD_PROMPT_FORGOT_PASSWORD_BUTTON:"Forgot Password",ACTIVATION_PASSWORD_PROMPT_DONE_BUTTON:"Done",ACTIVATION_WMT_PASSWORD_PROMPT_TITLE:"Enter password",ACTIVATION_WMT_PASSWORD_PROMPT_HELP:"Enter password",ACTIVATION_WMT_PASSWORD_PROMPT_TEXT:"Please enter the password of your Walmart.com account.",ACTIVATION_WMT_PASSWORD_PROMPT_BACK_BUTTON:"Back",ACTIVATION_WMT_PASSWORD_PROMPT_DONE_BUTTON:"Done",ACTIVATION_EMAIL_INVALID_TITLE:"Invalid Email",ACTIVATION_EMAIL_EMPTY_TEXT:"You must enter an email address to continue.",ACTIVATION_EMAIL_INVALID_TEXT:"The email address you provided [%s] is not valid. Please try again.",ACTIVATION_EMAIL_INVALID_RETRY_BUTTON:"Retry",ACTIVATION_ACTIVATE_ERROR_TEXT:"We are unable to activate your device at this time. Please try again later or call Vudu Customer Care at %s.",ACTIVATION_ACTIVATE_ERROR_TEXT_APPX:"We are unable to activate your device at this time. Please try again later or call %s Customer Care at %s.",ACTIVATION_EMAIL_CONFIRMATION_TITLE:"Confirm Email",ACTIVATION_EMAIL_CONFIRMATION_TEXT:"You have entered your email address as: %s \nPlease confirm that this is correct.",ACTIVATION_EMAIL_CONFIRMATION_CONFIRM_BUTTON:"Confirm",ACTIVATION_EMAIL_CONFIRMATION_RETRY_BUTTON:"Change Email",ACTIVATION_NO_PAYMENT_DIALOG_TITLE:"No Payment Method",ACTIVATION_CODE_BASED_NO_PAYMENT_DIALOG_TITLE:"Missing Payment Method",ACTIVATION_NO_PAYMENT_DIALOG_TEXT:"Your account does not have a payment method on file. We previously sent an email to [%s] with instructions on completing account setup and adding a payment method. To continue, please complete account setup and then try again.",ACTIVATION_NO_PAYMENT_DIALOG_TEXT_P34:"Your account does not have a payment method on file. \nPlease visit video.walmart.com/paymentinfo to add one and try again!",ACTIVATION_CODE_BASED_NO_PAYMENT_DIALOG_TEXT:"Your account does not have a payment method on file. To add one and complete account setup, click below to send email instructions to [%s].",ACTIVATION_NO_PAYMENT_DIALOG_TITLE_XBOX:"Trying to pre-order?",ACTIVATION_NO_PAYMENT_DIALOG_TEXT_XBOX:"To pre-order, add a payment method to your Vudu account and try again. You can do so on %s or click 'Send Email' to receive instructions on completing account setup.",ACTIVATION_NO_PAYMENT_DIALOG_TEXT_XBOX_APPX:"To pre-order, add a payment method to your %s account and try again. You can do so on %s or click 'Send Email' to receive instructions on completing account setup.",ACTIVATION_NO_PAYMENT_DIALOG_SEND_BUTTON:"Send Email",ACTIVATION_NO_PAYMENT_DIALOG_RESEND_BUTTON:"Resend Email",ACTIVATION_NO_PAYMENT_DIALOG_CHANGE_BUTTON:"Change Email",ACTIVATION_NO_PAYMENT_DIALOG_DONE_BUTTON:"Dismiss",ACTIVATION_NO_PAYMENT_DIALOG_OK_BUTTON:"OK",ACTIVATION_EMAIL_CHANGED_DIALOG_TITLE:"Your email has been changed",ACTIVATION_EMAIL_CHANGED_DIALOG_TEXT:"We sent an email to you at [%s]. Please check your email and follow the instructions to complete account setup.",ACTIVATION_EMAIL_CHANGED_DIALOG_DONE_BUTTON:"Dismiss",ACTIVATION_CHANGE_EMAIL_ERROR_TITLE:"Error",ACTIVATION_CHANGE_EMAIL_ERROR_DONE_BUTTON:"OK",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_SELECT_DIFFERENT_EMAIL:"Please select a different email address than your current one.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_ACCOUNT_ALREADY_EXISTS:"An account already exists with the email address [%s]. To add this device to the existing account, please call Vudu Customer Care at %s. Otherwise, please select a different email address.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_ACCOUNT_ALREADY_EXISTS_APPX:"An account already exists with the email address [%s]. To add this device to the existing account, please call %s Customer Care at %s. Otherwise, please select a different email address.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING:"There was a problem changing your email address. Please call Vudu Customer Care at %s.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_APPX:"There was a problem changing your email address. Please call %s Customer Care at %s.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_TRY_AGAIN:"There was a problem changing your email address. Please try again later or call Vudu Customer Care at %s.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_TRY_AGAIN_APPX:"There was a problem changing your email address. Please try again later or call %s Customer Care at %s.",ACTIVATION_CHANGE_EMAIL_DIALOG_TITLE:"Change your email address",ACTIVATION_CHANGE_EMAIL_DIALOG_TEXT:"Please enter a new email address for your account. We will send instructions for completing account setup to this new email address.",ACTIVATION_CHANGE_EMAIL_DIALOG_HELP:"Enter new email",ACTIVATION_CHANGE_EMAIL_DIALOG_CANCEL_BUTTON:"Cancel",ACTIVATION_CHANGE_EMAIL_DIALOG_DONE_BUTTON:"Change Email",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TITLE:"Email sent",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TEXT:"We sent an email to you at [%s]. Please check your email and follow the instructions to complete account setup.",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_DONE_BUTTON:"Dismiss",ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_PLEASE_LOG_IN_TO_WWW:"Please log in to %s with your email [%s] and password and follow the instructions to enter your credit card information.",ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_WE_ARE_HAVING_TROUBLE:"We are having trouble emailing you. Please call Vudu Customer Care at %s.",ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_WE_ARE_HAVING_TROUBLE_APPX:"We are having trouble emailing you. Please call %s Customer Care at %s.",ACTIVATION_OPTIONS_DIALOG_TITLE:"Sign Up",ACTIVATION_OPTIONS_DIALOG_TITLE_SIGN_IN:"Log In",ACTIVATION_OPTIONS_DIALOG_NEW_USER:"New User",ACTIVATION_OPTIONS_DIALOG_EXISTING_USER:"Existing User",ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_BUTTON:"New User",ACTIVATION_OPTIONS_DIALOG_FREE_TRIAL:"Enter your email address to start your free trial.",ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_TEXT:"Enter email address and enjoy Vudu.",ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_TEXT_APPX:"I would like to sign up with %s.",ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_BUTTON:"Sign In",ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_TEXT:"I have a Vudu username and password.",ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_TEXT_APPX:"I have a %s username and password.",ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_BUTTON:"Sign In",ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_TEXT:"I have a Walmart.com username and password.",ACTIVATION_SUSPENDED_VERB:"suspended",ACTIVATION_CLOSED_VERB:"closed",ACTIVATION_SUSPENDED_DIALOG_TITLE:"Account Suspended",ACTIVATION_CLOSED_DIALOG_TITLE:"Account Closed",ACTIVATION_CONTACT_CARE_TEXT:"Your account has been %s.\n\nPlease visit %s to contact Vudu Customer Care about your account.",ACTIVATION_CONTACT_CARE_TEXT_APPX:"Your account has been %s.\n\nPlease visit %s to contact %s Customer Care about your account.",ACTIVATION_SUSPENDED_DIALOG_EXIT_BUTTON:"OK",REMINDER_NOPASSWORD_TITLE:"Complete Account Setup",REMINDER_NOPASSWORD_TEXT:"Please check your email to complete your Account Setup. If you can't find your Vudu Account Setup email, click on one of the options below.",REMINDER_NOPASSWORD_TEXT_APPX:"Please check your email to complete your Account Setup. If you can't find your %s Account Setup email, click on one of the options below.",REMINDER_NOPASSWORD_RESEND_BUTTON:"Resend Email",REMINDER_NOPASSWORD_CHANGE_BUTTON:"Change Email",REMINDER_NOPASSWORD_LATER_BUTTON:"Do It Later",REMINDER_UVLINK_TITLE:"UltraViolet Account Required",REMINDER_UVLINK_TEXT:"You need to create a new UltraViolet account or link to an existing one on http://www.vudu.com to access your UltraViolet movies on Vudu.",REMINDER_UVLINK_TEXT_APPX:"You need to create a new UltraViolet account or link to an existing one on %s to access your UltraViolet movies on %s.",REMINDER_UVLINK_LATER_BUTTON:"Do It Later",REMINDER_UVLINK_DONE_BUTTON:"Setup Is Done",ADVANCED_SETTINGS_TITLE:"ADVANCED SETTINGS",ADVANCED_SETTINGS_APPS_HOME:"Apps Home",ADVANCED_SETTINGS_DEBUGGING:"Debugging",CONFIRM_PURCHASE:"Confirm Purchase",TAB_NEW:"New",TAB_FEATURED:"Featured",TAB_SPOTLIGHT:"Spotlight",TAB_RECOMMENDED:"Recommended",TAB_EXPLORE:"Explore",TAB_BROWSE:"Browse",TAB_MOVIES:"Movies",TAB_TV:"TV",TAB_COLLECTIONS:"Collections",TAB_MY_VUDU:"My Vudu",TAB_YOUR_LIBRARY:"Your Library",TAB_DISCOVER:"Discover",TAB_SEARCH:"Search",TAB_SETTINGS_MY_OFFERS:"My Offers",TAB_SETTINGS_NEW:"Settings",TAB_TRAILERS:"Trailers",SUBTAB_PICKS:"Top Picks",SUBTAB_RENTALS:"New Rentals",SUBTAB_NEW_TV:"New TV",SUBTAB_TRAILERS:"New Trailers",SUBTAB_UPCOMING:"Coming Soon",SUBTAB_PREORDERS:"Pre-Orders",SUBTAB_SOCIAL_FEED:"News Feed",SUBTAB_SHOWCASE:"Showcases",SUBTAB_NETWORKS:"TV Networks",SUBTAB_RECOMMEND:"Recommended",SUBTAB_RECOMMEND2:"Recommended 2",SUBTAB_ENDORSED:"Endorsed",SUBTAB_MOST_WATCHED:"Most Watched",SUBTAB_MY_MOVIES:"My Movies",SUBTAB_MY_TV_SHOWS:"My TV",SUBTAB_MY_WISHLIST:"My Wishlist",SUBTAB_MY_DOWNLOADS:"My Downloads",SUBTAB_MY_PREORDERS:"My Pre-Orders",SUBTAB_SETTINGS:"Info & Settings",SUBTAB_SEARCH_TITLE:"Search for Titles",SUBTAB_SEARCH_PERSON:"Search for People",SEASON_TAB_EPISODES:"Episodes",SEASON_TAB_OVERVIEW:"Synopsis",SEASON_TAB_CAST:"Cast & Crew",SEASON_TAB_SIMILAR:"All Seasons",SEASON_TAB_MORE_INFO:"More Info",EPISODE_TAB_OVERVIEW:"Episode",EPISODE_TAB_EPISODES:"All Episodes",EPISODE_TAB_CAST:"Cast & Crew",EPISODE_TAB_SIMILAR:"All Seasons",EPISODE_TAB_MORE_INFO:"More Info",DEFAULT_TAB_OVERVIEW:"Overview",DEFAULT_TAB_EXTRAS:"Free Clips",DEFAULT_TAB_GENERIC_LOCKED_EXTRAS:"Extras",DEFAULT_TAB_LOCKED_EXTRAS:"Vudu Extras",DEFAULT_TAB_LOCKED_EXTRAS_APPX:"%s Extras",DEFAULT_TAB_CAST:"Cast & Crew",DEFAULT_TAB_REVIEWS:"Reviews",DEFAULT_TAB_SIMILAR:"Similar",DEFAULT_TAB_MORE_INFO:"More Info",DEFAULT_TAB_ABOUT_UHD:"About UHD",DEFAULT_TAB_FAMILY_PLAY:"Family Play",SOCIAL_FEED_TAB_PUBLIC:"EVERYONE",SOCIAL_FEED_TAB_FOLLOWING:"MY GROUP",SOCIAL_FEED_TAB_MINE:"ME",PLAYBACK_DEFAULT_LOADING:"LOADING ...",PLAYBACK_CHAPTER_NUMBER:"Ch. %d",MOVIE_CAST_EMPTY:"No cast & crew information is available.",REVIEWS_EMPTY:"No reviews are available.",THE_WORD_FREE:"Free",THE_WORD_FROM:"From",DETAILS_ABOUT_TITLE_1:"UHD - The Ultimate Home Cinema Experience",DETAILS_ABOUT_TITLE_1_APPX:"%s UHD - The Ultimate Home Cinema Experience",DETAILS_ABOUT_TITLE_2:"Featuring the latest video and audio technologies.",DETAILS_ABOUT_DESC_4K:"Eight million pixels for a stunning picture that is four times more detailed than 1080p HDX.",DETAILS_ABOUT_DESC_DVISION:"High Dynamic Range video delivers unparalleled picture brightness, color and contrast.",DETAILS_ABOUT_DESC_HDR:"Dolby Vision and HDR10 support for unparalleled picture color, brightness and contrast.",DETAILS_ABOUT_DESC_DATMOS:"Multi-dimensional sound that creates a more life-like moving audio experience.  ",DETAILS_ABOUT_DESC_DUHD:"Are you UHD-ready?\nLearn more at Vudu.com/UHD.",DETAILS_ABOUT_DESC_DUHD_APPX:"Are you UHD-ready?\nLearn more at %s/uhd.",RECOMMENDATIONS_TITLE:"Recommendations",RECOMMENDATIONS_TITLE_SIMILAR:"Recommendations like '%s'",FILMOGRAPHY_TITLE:"Filmography",CREDIT_TEXT:"Credits",CREDIT_DISPLAY:"$%.2f",POINTER_PAGE_UP:"Page Up",POINTER_PAGE_UP_ABBRV:"Pg Up",POINTER_PAGE_DOWN:"Page Down",POINTER_PAGE_DOWN_ABBRV:"Pg Down",HELP_BUTTON_HINT:"Press         for Help",RTO_PAGE_TITLE:"LIMITED TIME SPECIAL OFFER!",RTO_OFFER_TEXT:"%s this movie from $%.2f!\nPurchase within the next %s to get this special offer.",RTO_OWN_BUTTON:"Buy %s for $%.2f",RTO_CANCEL_BUTTON:"No thanks",DISCOVER_TITLE:"Your Discoveries",DISCOVER_START:"START",DISCOVER_ROUTE_PLANNER:"Discover By",DISCOVER_ROUTE_FINISH:"Complete!",DISCOVER_HELP_TEXT:" Tell us what you feel like watching and \n Discover something new in our library.",DISCOVER_INIT_ERROR_STATE:"Error contacting Vudu Discover Engine. Please try again later.",DISCOVER_DEFAULT_METAPANEL_TEXT:"TTake a journey through the Vudu library. Choose a combination of genres, moods, stories and more to discover a unique set of movies and TV tailored exactly to your tastes.",DISCOVER_CATEGORY_MOOD:"Lift your spirits, get sentimental, ratchet up the tension and more. Over a dozen different moods to help you discover a great movie or TV show that will suit yours, or maybe even change it.",DISCOVER_CATEGORY_STORY:"Find a story to enjoy. With plots featuring slick crimes, romances, family relations, society and more, movies and TV shows have been made about nearly everything. ",DISCOVER_CATEGORY_ERA:"Explore by time period and learn about life in the 1920's, see 1970's directors create the future, watch today's TV shows reimagine the wild west, and more.",DISCOVER_CATEGORY_STYLE:"Watch a surreal movie, a campy comedy, or an ensemble TV show. Style is how a movie or TV show looks, sounds, tells a story, or even how it appeals to the audience.  What style appeals to you?",DISCOVER_CATEGORY_PRAISE:"Oscar winner, cult film or Emmy-winning TV series? Choose your entertainment by praise and let public opinion, movie critics and industry pros guide you to an award-winning movie or TV show.",DOWNLOAD_OPTIONS_DEFAULT_TITLE:"Options",DOWNLOAD_OPTION_NOW:"Download Now",DOWNLOAD_OPTION_LATER:"Download Last",DOWNLOAD_OPTION_REMOVE:"Delete From Queue",DOWNLOAD_OPTION_CLEAR:"Clear Notification",DOWNLOAD_OPTION_MOVIE_DETAILS:"Go to Movie Details",DOWNLOAD_OPTION_SEASON_DETAILS:"Go to Season Details",DOWNLOAD_OPTION_EPISODE_DETAILS:"Go to Episode Details",DOWNLOAD_SUSPEND_ALL:"Suspend All",DOWNLOAD_RESUME_ALL:"Resume All",DOWNLOAD_SET_DATA_RATE:"Set Data Rate",DOWNLOAD_DELETE_ALL:"Delete All",DOWNLOAD_SUMMARY:"Summary",DOWNLOAD_DOWLOADING:"Downloading:",DOWNLOAD_SPEED:"Speed:",DOWNLOAD_ENABLED:"Enabled",DOWNLOAD_SUSPENDED:"Suspended",DOWNLOAD_HARDDRIVE_INFO:"Hard Drive Info",DOWNLOAD_TOTAL_AVAIL:"Total Available:",DOWNLOAD_USED:"Used:",DOWNLOAD_EST_FREE_SPACE:"Estimated Free Space",DOWNLOAD_HOUR:"hour",DOWNLOAD_HOURS:"hours",DOWNLOAD_MANAGE:"Download",DOWNLOAD_MANAGE_DOWNLOAD:"Download",DOWNLOAD_MANAGE_FIRST:"Download %s First",DOWNLOAD_MANAGE_REMOVE_QUEUE:"Remove %s From Queue",DOWNLOAD_MANAGE_DELETE_DISK:"Delete %s From Disk",DOWNLOAD_ERROR_DIDNT_FIT:"There was not enough space left to download this movie. Please delete some other movies and try again.",DOWNLOAD_ERROR_STALLED:"A network problem caused this download to fail.",DOWNLOAD_ERROR_FAILED:"Download failed to start. This can happen when there is no more space.",DOWNLOAD_ERROR_SUSPENDED:"Downloads are currently suspended. Go to My Downloads to resume downloads.",DOWNLOAD_ERROR_FULL:"The Download area is currently full. You will want to delete some downloads.",DOWNLOAD_DETAILS_CLICK_ADD_MESSAGE:"The current title was added to the Download queue",DOWNLOAD_DONE_BUTTON:"Done",DOWNLOAD_UNABLE_TO_DOWNLOAD:"Download Unavailable",DOWNLOAD_UNABLE_TO_DOWNLOAD_MSG:"This title is currently not available for offline playback.",DOWNLOAD_CANCEL_BUTTON:"Cancel",DOWNLOAD_RUN_TEST:"Run Test",MOVIE_DETAILS_SUBTITLES_TITLE:"Subtitles: ",MOVIE_DETAILS_LENGTH_MINUTES:"%d min",FILTER_CLEAR_ALL:"Clear All",FILTER_GENRE:"Genre",FILTER_GENRE_OPTION_ANY:"All",FILTER_STUDIO:"Studio",FILTER_STUDIO_OPTION_ANY:"All",FILTER_STUDIO_OPTION_OTHER:"Other Studios",FILTER_TOMATOMETER:"Tomatometer",FILTER_TOMATOMETER_OPTION_ANY:"All",FILTER_TOMATOMETER_OPTION_80:">80%% fresh",FILTER_TOMATOMETER_OPTION_60:">60%% fresh",FILTER_TOMATOMETER_OPTION_40:">40%% fresh",FILTER_TOMATOMETER_OPTION_20:">20%% fresh",FILTER_TOMATOMETER_FRESH:"Fresh only",FILTER_QUALITY:"Quality",FILTER_QUALITY_OPTION_ANY:"Any",FILTER_QUALITY_OPTION_UHD:"UHD",FILTER_QUALITY_OPTION_HDX:"HDX",FILTER_QUALITY_OPTION_HD:"HD",FILTER_QUALITY_OPTION_SD:"SD",FILTER_OFFERTYPE:"Option",FILTER_OFFERTYPE_OPTION_ANY:"Any",FILTER_OFFERTYPE_OPTION_PTR:"Rent",FILTER_OFFERTYPE_OPTION_PTO:"Buy",FILTER_STARRATING:"Rating",FILTER_STARRATING_OPTION_ANY:"Any",FILTER_STARRATING_OPTION_4:"4 or more stars",FILTER_STARRATING_OPTION_3:"3 or more stars",FILTER_STARRATING_OPTION_2:"2 or more stars",FILTER_STARRATING_OPTION_1:"1 or more stars",FILTER_CONTENTTYPE:"Movies or TV",FILTER_CONTENTTYPE_OPTION_MOVIES_AND_TV:"All",FILTER_CONTENTTYPE_OPTION_MOVIES:"Movies only",FILTER_CONTENTTYPE_OPTION_TV:"TV only",FILTER_CONTENTTYPE_OPTION_MY_MOVIES:"My Movies",FILTER_CONTENTTYPE_OPTION_MY_TV:"My TV",FILTER_SORT:"Sort",FILTER_SORT_OPTION_PURCHASETIME:"Purchase Date",FILTER_SORT_OPTION_FEATUREDSCORE:"Top Picks",FILTER_SORT_OPTION_WATCHEDSCORE:"Most Watched",FILTER_SORT_OPTION_TOMATOMETER:"Tomatometer",FILTER_SORT_OPTION_RELEASETIME:"Release Date",FILTER_SORT_OPTION_TITLE:"A-Z",FILTER_SORT_OPTION_EDITORPICKS:"Editorial Picks",FILTER_RELEASETIME:"Year",FILTER_RELEASETIME_OPTION_ANY:"All",FILTER_RELEASETIME_OPTION_NEWRELEASES:"New Releases",FILTER_RELEASETIME_OPTION_2010:"2010's",FILTER_RELEASETIME_OPTION_2000:"2000's",FILTER_RELEASETIME_OPTION_1990:"1990's",FILTER_RELEASETIME_OPTION_1980:"1980's",FILTER_RELEASETIME_OPTION_1970:"1970's",FILTER_RELEASETIME_OPTION_1960:"1960's",FILTER_RELEASETIME_OPTION_OLD:"1950's & earlier",FILTER_MPAARATING:"MPAA",FILTER_MPAARATING_OPTION_1:"All",FILTER_MPAARATING_OPTION_2:"R and below",FILTER_MPAARATING_OPTION_3:"FAM and below",FILTER_MPAARATING_OPTION_4:"PG-13 and below",FILTER_MPAARATING_OPTION_5:"PG and below",FILTER_MPAARATING_OPTION_6:"G",FILTER_TVRATING:"TV Rating",FILTER_TVRATING_OPTION_1:"All",FILTER_TVRATING_OPTION_2:"TV-MA and below",FILTER_TVRATING_OPTION_3:"TV-14 and below",FILTER_TVRATING_OPTION_4:"TV-PG and below",FILTER_TVRATING_OPTION_5:"TV-G and below",FILTER_TVRATING_OPTION_6:"TV-Y7 and below",FILTER_TVRATING_OPTION_7:"TV-Y",FILTER_MPAA_P34_MOVIE_RATING:"MPAA",FILTER_MPAA_P34_TV_RATING:"TV Rating",FILTER_COMMUNITY_RATING:"Community Rating",FILTER_COMMUNITY_RATING_OPTION_ANY:"Any",FILTER_COMMUNITY_RATING_OPTION_4_5:"4.5+ Stars",FILTER_COMMUNITY_RATING_OPTION_4:"4+ Stars",FILTER_COMMUNITY_RATING_OPTION_3_5:"3.5+ Stars",FILTER_COMMUNITY_RATING_OPTION_3:"3+ Stars",FILTER_COMMUNITY_RATING_OPTION_2:"2+ Stars",FILTER_COMMUNITY_RATING_OPTION_1:"1+ Stars",HELP_TITLE:"Remote Control Help",PS3_PARENTAL_CONTROL_WARNING:'NOTE: Vudu does not use "PlayStation" or "PSN" maturity level restrictions. To set parental controls for Vudu, go to My Vudu > Info & Settings.',PS4_PARENTAL_CONTROL_WARNING:'NOTE: Vudu does not use "PlayStation" or "PSN" maturity level restrictions. To set parental controls for Vudu, go to My Vudu > Info & Settings.',SETTINGS_SYSTEM_INFO_TEXT:"Device ID: %x \nUI Version: %s \nEmbedder Version: %s \nClient SDK Version: %s %s %s",SETTINGS_SYSTEM_INFO_STREAMER:"\nStreamer Version: %s",SETTINGS_VERSION_UNKNOWN:"Unknown",SETTINGS_REVISION_SUFFIX:"(rev %s)",SETTINGS_CREDITS_TEXT:"Portions of content provided by Rotten Tomatoes.\n\nCast images courtesy of PR Photos.\n\nAudio encoded under license from Dolby Laboratories. Dolby and Dolby Digital Plus are registered trademarks of Dolby Laboratories.\n\nThis software uses libraries from the FFmpeg project under the LGPLv2.1.",SETTINGS_CREDITS_TEXT_JINNI:"Personal content discovery matching your taste and moods by Jinni.",SETTINGS_CREDITS_TEXT_TOMATOMETER:"Portions of content provided by Rotten Tomatoes.",SETTINGS_CREDITS_TEXT_CASTIMAGE:"Premium image solutions provided by Baseline, a Gracenote company",SETTINGS_CREDITS_TEXT_AUDIO:"Audio encoded under license from Dolby Laboratories. Dolby, Dolby Digital Plus, Dolby Vision and Dolby Atmos are registered trademarks of Dolby Laboratories.",SETTINGS_CREDITS_TEXT_AUDIO_CERES:"Audio encoded under license from Dolby Laboratories. Dolby, Dolby Digital Plus and Dolby Atmos are registered trademarks of Dolby Laboratories.",SETTINGS_CREDITS_TEXT_VIDEO:"This software uses libraries from the FFmpeg project under the LGPLv2.1.\n\n",SETTINGS_CREDITS_TEXT_SPLIT:"Cast images courtesy of PR Photos.\n\nAudio encoded under license from Dolby Laboratories. Dolby and Dolby Digital Plus are registered trademarks of Dolby Laboratories.\n\nThis software uses libraries from the FFmpeg project under the LGPLv2.1.",SETTINGS_CREDITS_PS3_SUFFIX:"BE/Broadcasting Engine is a trademark of Sony Computer Entertainment Inc. Broadcasting Engine 2010 Sony Computer Entertainment Inc./Sony Computer Entertainment Korea Inc.",SETTINGS_SPEEDTEST_OPTION:"Internet Speed Test",SETTINGS_SPEEDTEST_HEADING:"Internet Speed Test",SETTINGS_SPEEDTEST_TXT:"This test will help determine which video qualities are compatible with your home network and internet connection.",SETTINGS_SPEEDTEST_BODY:"Press %s to continue.",SETTINGS_PLAYBACK_QUALITY:"Playback Quality",SETTINGS_PLAYBACK_QUALITY_HEADING:"Playback Quality Settings",SETTINGS_PLAYBACK_QUALITY_DESCRIPTION:"Set the default starting video quality when streaming your movies and TV shows.",SETTINGS_PLAYBACK_QUALITY_FOOTER:"Don't know which one to choose? Run the Internet Speed Test to figure \nout your optimal setting.",SETTINGS_PLAYBACK_QUALITY_UHD:"UHD - 4K",SETTINGS_PLAYBACK_QUALITY_HDX:"HDX - 1080p",SETTINGS_PLAYBACK_QUALITY_HD:" HD - 720p",SETTINGS_PLAYBACK_QUALITY_SD:" SD - 480p",SETTINGS_PARENTS_AND_KIDS_OPTION:"Parents & Kids",SETTINGS_FAMILY_OPTION:"Family Settings",SETTINGS_PARENTAL_CONTROLS_OPTION:"Parental Controls",SETTINGS_PARENTAL_CONTROLS_HEADING:"Parental Controls",SETTINGS_PARENTAL_CONTROLS_HEADING_DESCRIPTION:"Set ratings on what users can purchase and watch",SETTINGS_PARENTAL_CONTROLS_PURCHASE_OP_DESC:"Will invoke a prompt before purchasing movies rated higher than the rating selected",SETTINGS_PARENTAL_CONTROLS_PLAY_OP_DESC:"Will invoke a prompt before playing movies rated higher than the rating selected",SETTINGS_ACCOUNT_INFO_OPTION:"Account Info",SETTINGS_ACCOUNT_INFO_HEADING:"Account Info",SETTINGS_ACCOUNT_INFO_BALANCE:"My Credits:",SETTINGS_ACCOUNT_PROMO_BALANCE:"Promotions:",SETTINGS_ACCOUNT_INFO_CC_ON_FILE:"Payment Method:",SETTINGS_ACCOUNT_INFO_CC_EXPIRED:"Your credit card has expired. Please login to %s to edit your payment information.",SETTINGS_ACCOUNT_INFO_CREDIT_USE:"Credits are applied first to all eligible transactions.",SETTINGS_ACCOUNT_PRIVACY:"We care about your privacy. View our policies at vudu.com/privacy",SETTINGS_ACCOUNT_PRIVACY_NOTE:"NOTE: Go to Privacy settings at vudu.com to:\n1. Request for information collected about your account\n2. Request that Vudu not sell information collected about your account",SETTINGS_ACCOUNT_PRIVACY_APPX:'We care about your privacy. Go to %s to view our policies and access the links for "Request for Personal Information" and "Do Not Sell My Personal Information".',SETTINGS_ACCOUNT_INFO_CREDIT_USE_XBOX:"If applicable, Vudu credits are deducted from your total before charging your Microsoft payment method.",SETTINGS_ACCOUNT_INFO_CREDIT_USE_XBOX_APPX:"If applicable, %s credits are deducted from your total before charging your Microsoft payment method.",SETTINGS_ACCOUNT_INFO_NO_ACCOUNT:"Sign in or sign up for free to get started with Vudu!",SETTINGS_ACCOUNT_INFO_NO_ACCOUNT_APPX:"Sign in or sign up for free to get started with %s!",SETTINGS_ACCOUNT_INFO_FREE_CREDIT:"You get credits to watch movies for free on activation.",SETTINGS_ACCOUNT_INFO_UPDATE_CC:"Rent or buy movies and TV shows directly from this device. Add a credit card to your account at %s.",SETTINGS_ACCOUNT_INFO_UPDATE_CC_XBOX:"Rent or buy movies and TV right from Xbox, mobile devices and more. Add a payment method to your account at %s.",SETTINGS_ACCOUNT_INFO_ACTIVATE:"Activate Account",SETTINGS_ACCOUNT_INFO_CREDIT_EXPIRATION:"$%.2f expires on %s.",SETTINGS_ACCOUNT_PROMO_EXPIRATION:"%d expires on %s.",SETTINGS_ACCOUNT_PROMO_RENTALS:"complimentary rentals available.",SETTINGS_ACCOUNT_PROMO_RENTAL:"complimentary rental available.",SETTINGS_ACCOUNT_INFO_HAVE_CC_YES:"Yes",SETTINGS_ACCOUNT_INFO_HAVE_CC_NO:"No",SETTINGS_ACCOUNT_INFO_MEMBER:"A Vudu member since %s.",SETTINGS_ACCOUNT_INFO_ANNIVERSARY:"Happy %s year anniversary!",SETTINGS_ACCOUNT_INFO_CREDIT_APPLIED_FIRST:"Credits are applied first to all eligible transactions.",SETTINGS_ACCOUNT_INFO_PAYMENT_METHOD:"Please login to %s to add or edit your payment information.",SETTINGS_ACCOUNT_INFO_PRIVACY:'We care about your privacy. Go to %s to view our policies and access the links for "Request for Personal Information" and "Do Not Sell My Personal Information".',SETTINGS_ACCOUNT_INFO_FANDANGO_PRIVACY:'We care about your privacy. Go to %s to view our Privacy Policy, %s to view our Terms and Policies, and %s for "Do Not Sell My Info."',SETTINGS_OVERSCAN_OPTION:"Overscan Settings",SETTINGS_OVERSCAN_HEADING:"Overscan Settings",SETTINGS_OVERSCAN_TXT:"Optimize your viewing experience by adjusting the picture to fill the screen.",SETTINGS_OVERSCAN_BODY:"Press %s to continue.",SETTINGS_AUTOPLAY_OPTION:"Autoplay Settings",SETTINGS_AUTOPLAY_HEADING:"Autoplay Settings",SETTINGS_SYSTEM_INFO_OPTION:"System Info",SETTINGS_SYSTEM_INFO_HEADING:"System Info",SETTINGS_MY_ACCOUNT_OPTION:"My Account",SETTINGS_MY_ACCOUNT_HEADING:"My Account",SETTINGS_ACCOUNT_SIGNEDIN_AS:"Signed In as:",SETTINGS_YOUR_ACCOUNT_OPTION:"Your Account",SETTINGS_YOUR_ACCOUNT_HEADING:"Your Account",SETTINGS_ABOUT_OPTION:"About",SETTINGS_ABOUT_HEADING:"About",SETTINGS_CREDIT_OPTION:"Partners",SETTINGS_CREDIT_HEADING:"Partners",SETTINGS_ADVANCED_OPTION:"Advanced Settings",SETTINGS_AUDIO_SETTING_OPTION:"Audio Settings",SETTINGS_AUDIO_SETTINGS_HEADER:"Audio Output Settings",SETTINGS_TTSAUDIO_OPTION:"Accessibility",SETTINGS_TTSAUDIO_HEADING:"Accessibility",SETTINGS_TTSAUDIO_MDOE_ON_OFF:"Accessibility Mode",SETTINGS_TTSAUDIO_CURRENTLY_TEXT:"Currently",SETTINGS_TTSAUDIO_MODE_ON:"On",SETTINGS_TTSAUDIO_MODE_OFF:"Off",SETTINGS_TTS_AUDIO_TOGGLE_TEXT:"Toggle accessibility on or off in your device's settings.",SETTINGS_TTSAUDIO_SOUNDEFFECTS:"SOUND EFFECTS",SETTINGS_TTSAUDIO_VUDU:"Enable text-to-speech and other audio cues\nthat assist you in browsing Vudu.",SETTINGS_TTSAUDIO_VUDU_APPX:"Enable text-to-speech and other audio cues\nthat assist you in browsing %s.",SETTINGS_ADVANCED_HEADER:"Advanced Settings",SETTINGS_ADVANCED_BODY:"Press %s to continue.",SETTINGS_PC_LOCKED_STATE:"Enabled",SETTINGS_PC_UNLOCKED_STATE:"Disabled",SETTINGS_PC_PURCHASE_ALL:"Prompt to purchase movies:",SETTINGS_PC_PURCHASE_RATED:"Purchase Rating",SETTINGS_PC_PLAY_ALL:"Prompt to play movies:",SETTINGS_PC_PLAY_RATED:"Playback Rating",SETTINGS_PC_CHANGE_PASSCODE:"Change PIN",SETTINGS_PC_CURRENT_PASSCODE:"Please enter your current PIN.",SETTINGS_PC_CURRENT_PIN:"Please enter your current PIN.",SETTINGS_PC_PASSCODE_SELECTED:"New PIN selected!",SETTINGS_PC_PASSCODE_MISMATCH:"PIN did not match!",SETTINGS_PC_PASSCODE_VERIFY:"Please enter the same PIN again to verify.",SETTINGS_PC_NEW_PASSCODE:"Enter a new PIN.",SETTINGS_PC_NEW_PASSCODE_FIRST_TIME:"Please enter a PIN.",SETTINGS_NEW_PIN:"Enter a new PIN.",SETTINGS_PIN_GRACE_PERIOD:"Once confirmed, we won't ask you to enter it again for 5 minutes.",SETTINGS_PC_PASSCODE_REQUIRED:"To change settings, please enter your PIN.",SETTINGS_PC_PASSCODE_REQUIRED_TO_DISABLE:"A PIN is required to disable parental controls.",SETTINGS_PC_INCORRECT:"Incorrect PIN!",SETTINGS_PC_INCORRECT_TRY_AGAIN:"Incorrect PIN! Try again.",SETTINGS_PIN_INCORRECT:"Incorrect PIN!",SETTINGS_PIN_INCORRECT_TRY_AGAIN:"Incorrect PIN! Try again.",SETTINGS_PC_PASSCODE_DONE:"Confirm",SETTINGS_PC_PASSCODE_CANCEL:"Cancel",SETTINGS_PC_RATING_CHANGE_MESSAGE:"%s set to %s",SETTINGS_AUTOPLAY_HEADING:"Autoplay Settings",SETTINGS_AUTOPLAY_DESCRIPTION:"TV binge-watcher? Turn on Autoplay and we'll queue up the next episode as you finish to make watching your favorite TV shows even easier.",SETTINGS_AUTOPLAY_ENABLE_TEXT:"Enable Autoplay by choosing %s or disable it by choosing %s",SETTINGS_ABOUT_SERVICE:"Buy, rent, watch for free and more with %s.\nVisit us at %s.",SETTINGS_ABOUT_PARTNERS:"Portions of reviews provided by Rotten Tomatoes. Select images provided by Gracenote and PRPhotos.\nDolby Vision, Dolby Atmos, Dolby Digital Plus are trademark of Dolby Laboratories.",OLD_SETTINGS_SYSTEM_INFORMATION:"System Information",OLD_SETTINGS_DEVICE_ID:"Device ID",OLD_SETTINGS_VUDU_VERSION:"Vudu Version",OLD_SETTINGS_HARDWARE_ID:"Hardware ID",OLD_SETTINGS_WIDGET_VERSION:"Widget Version",OLD_SETTINGS_SERVER_VERSION:"Server Version",OLD_SETTINGS_DEVICE_FIRMWARE:"Device Firmware",OLD_SETTINGS_ADVANCED_BUTTON:"Advanced",OLD_SETTINGS_BACK_TO_SETTINGS:"Back to Settings",OLD_SETTINGS_CREDITS:"Credits",OLD_SETTINGS_CREDITS_TEXT:"Portions of content provided by Rotten Tomatoes.\n\nCast images courtesy of Photorazzi LLC. TM, Copyright 2007 (c) For personal non-commercial use only. All rights reserved.\n\nAudio encoded under license from Dolby Laboratories. Dolby and Dolby Digital Plus are registered trademarks of Dolby Laboratories.",OLD_SETTINGS_CREDITS_TEXT_TOMATOMETER:"Portions of content provided by Rotten Tomatoes.\n\n",OLD_SETTINGS_CREDITS_TEXT_SPLIT:"Cast images courtesy of PR Photos.\n\nAudio encoded under license from Dolby Laboratories. Dolby and Dolby Digital Plus are registered trademarks of Dolby Laboratories.\n\nThis software uses libraries from the FFmpeg project under the LGPLv2.1.",OLD_SETTINGS_AUDIO_OUTPUT_SETTINGS:"AUDIO OUTPUT SETTINGS",OLD_SETTINGS_AUDIO_OUTPUT_SELECTED_MODE:"Selected Mode: %s",OLD_SETTINGS_AUDIO_OUTPUT_DOLBY_DIGITAL:"Dolby Digital",OLD_SETTINGS_AUDIO_OUTPUT_PCM_STEREO:"PCM Stereo",OLD_SETTINGS_DEACTIVATE_TITLE:"Deactivate This Device",OLD_SETTINGS_DEACTIVATE_ARE_YOU_SURE:"Are you sure you want to deactivate this device from your Vudu account?",OLD_SETTINGS_DEACTIVATE_ARE_YOU_SURE_APPX:"Are you sure you want to deactivate this device from your %s account?",OLD_SETTINGS_DEACTIVATE_OK_BUTTON:"OK",OLD_SETTINGS_DEACTIVATE_CANCEL_BUTTON:"Cancel",OLD_SETTINGS_DEACTIVATE_PLEASE_WAIT:"Please wait while we deactivate this device...",OLD_SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN:"This device has been deactivated from your Vudu account",OLD_SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN_APPX:"This device has been deactivated from your %s account",OLD_SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM:"Sorry, there was a problem deactivating this device from your Vudu account",OLD_SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM_APPX:"Sorry, there was a problem deactivating this device from your %s account",OLD_SETTINGS_ADVANCED_TITLE:"ADVANCED",OLD_SETTINGS_ADVANCED_DEACTIVATE_DEVICE_BUTTON:"Deactivate Device",OLD_SETTINGS_ADVANCED_DEACTIVATE_THIS_DEVICE_FROM:"Deactivate this device from your Vudu account.\n\nOnce deactivated, you can still browse but you will not be able to buy or watch movies from this device",OLD_SETTINGS_ADVANCED_DEACTIVATE_THIS_DEVICE_FROM_APPX:"Deactivate this device from your %s account.\n\nOnce deactivated, you can still browse but you will not be able to buy or watch movies from this device",OLD_SETTINGS_ADVANCED_DEACTIVATE_DESC_TITLE:"Deactivation",OLD_SETTINGS_INFO_AND_SETTINGS_TITLE:"Info & Settings",OLD_SETTINGS_PARENTAL_CONTROLS_BUTTON:"Parental Controls",OLD_SETTINGS_PARENTAL_CONTROLS_DESC:"Limit:\n\n- Purchasing\n- Viewing",OLD_SETTINGS_PARENTAL_CONTROLS_DESC_TITLE:"Parental Controls",OLD_SETTINGS_SYSTEM_INFO_BUTTON:"System Info",OLD_SETTINGS_SYSTEM_INFO_DESC:"Information About:\n\n- Software Version\n- Device ID\n- Hardware ID",OLD_SETTINGS_SYSTEM_INFO_DESC_TITLE:"System Info",OLD_SETTINGS_AUDIO_SETTINGS_BUTTON:"Audio Settings",OLD_SETTINGS_AUDIO_SETTINGS_DESC:"Select digital audio output format:\n\n- PCM Stereo\n- Dolby Digital",OLD_SETTINGS_AUDIO_SETTINGS_DESC_TITLE:"Audio Settings",OLD_SETTINGS_CREDITS_BUTTON:"Credits",OLD_PARENTAL_CONTROLS_ARE_DISABLED:"Parental controls are currently disabled. You will not be able to set maximum rating levels until you enable parental controls.",OLD_PARENTAL_CONTROLS_ARE_ENABLED:"Parental controls are currently enabled. Maximum rating levels will be enforced and cause passcode prompts",OLD_PARENTAL_CONTROLS_PROMPT_TO_PLAY:"Prompt to play movies rated higher than:",OLD_PARENTAL_CONTROLS_PROMPT_TO_PURCHASE:"Prompt to purchase movies rated higher than:",OLD_PARENTAL_CONTROLS_NO_MOVIES_WILL_BE_HIDDEN:"No movies will be hidden from view.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_WILL_NOT:"Attempting to purchase a movie will not require a passcode to be entered.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_WILL_NOT:"Attempting to play a movie will not require a passcode to be entered.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_WILL:"Attempting to purchase any movie will require a passcode to be entered.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_WILL:"Attempting to play any movie will require a passcode to be entered.",OLD_PARENTAL_CONTROLS_MOVIES_RATED_HIGHER_THAN_X_HIDDEN:"Movies rated higher than %s will be hidden from view.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_RATED:"Attempting to purchase a movie rated higher than %s will require a passcode to be entered.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_RATED:"Attempting to play a movie rated higher than %s will require a passcode to be entered.",OLD_PARENTAL_CONTROLS_NR_DESC:"NR movies include movies rated 18+, NC-17, or movies which have no official rating.",OLD_PARENTAL_CONTROLS_R_DESC:"R movies include movies rated R or TV-MA.",OLD_PARENTAL_CONTROLS_FAM_DESC:"FAM movies include movies which have no official rating, but are family-friendly.",OLD_PARENTAL_CONTROLS_PG13_DESC:"PG-13 movies include movies rated PG-13 or TV-14",OLD_PARENTAL_CONTROLS_PG_DESC:"PG movies include movies rated PG or TV-PG.",OLD_PARENTAL_CONTROLS_G_DESC:"G movies include movies rated G, TV-G, or TV-Y7.",OLD_PARENTAL_CONTROLS_TITLE:"PARENTAL CONTROLS",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_PASSCODE:"Please input your current passcode.",OLD_PARENTAL_CONTROLS_CHANGE_PASSCODE:"Change Passcode",OLD_PARENTAL_CONTROLS_ARE_ENABLED_SHORT:"Parental controls are enabled",OLD_PARENTAL_CONTROLS_ARE_DISABLED_SHORT:"Parental controls are disabled",OLD_PARENTAL_CONTROLS_NEW_PASSCODE_SELECTED:"New passcode selected!",OLD_PARENTAL_CONTROLS_PASSCODES_DONT_MATCH:"Passcodes did not match!",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_SAME:"Please input the same passcode again to verify.",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_NEW:"Please input a new passcode.",OLD_PARENTAL_CONTROLS_PASSCODE_REQUIRED_TO_DISABLE:"A passcode is required to disable parental controls.",OLD_PARENTAL_CONTROLS_PASSCODE_REQUIRED_TO_CHANGE:"A passcode is required to change rating controls.",OLD_PARENTAL_CONTROLS_ARE_AVAILABLE_TO_CONTROL:"Parental controls are available to control access to features of the Vudu service. When enabled, you will be able to control which movies will be visible, and when a passcode will be required.",FAM_PLEASE_INPUT_PIN:"Please enter your current PIN.",FAM_NEW_PIN_SELECTED:"New PIN selected!",FAM_PIN_DONT_MATCH:"PINs did not match!",FAM_PLEASE_INPUT_SAME:"Re-enter your PIN to verify.",FAM_PLEASE_INPUT_NEW:"Please enter a PIN.",NO_RESULTS:"No movies or TV shows here yet. Check back soon.",FILTER_NO_RESULTS:"We couldn't find any matches! Please clear some of your filter options.",SEARCH_NO_RESULTS:"No results match your search.",ERROR_UV_UVLINKREQUIRED:"You need to link your Vudu account to an UltraViolet account in order to watch this movie. Please visit %s in order to create a new UltraViolet account (it's free) or link to your existing UltraViolet account.",ERROR_UV_UVLINKREQUIRED_APPX:"You need to link your %s account to an UltraViolet account in order to watch this movie. Please visit %s in order to create a new UltraViolet account (it's free) or link to your existing UltraViolet account.",ERROR_UV_UVLINKREJECTED:"Your account is currently not able to play back your movie or TV show. Please try again later.",ERROR_UV_NORIGHTSFORCONTENTVARIANT:"Your account does not currently have the rights to play back this movie. Please contact Vudu customer care.",ERROR_UV_NORIGHTSFORCONTENTVARIANT_APPX:"Your account does not currently have the rights to play back this movie. Please contact %s customer care.",ERROR_UV_GENERIC:"Unable to start playback. Please try again later, or contact Vudu customer care for help.",ERROR_UV_GENERIC_APPX:"Unable to start playback. Please try again later, or contact %s customer care for help.",ERROR_PLAYBACK:"Unable to start playback",ERROR_DOWNLOAD_CONFLICT:"You've already downloaded this content onto another device. To watch now, please first delete the download.",UV_TITLE_UNAVAILABLE:"This title is currently unavailable.",INTERSTITIAL_TITLE:"Slideshow View",INTERSTITIAL_SIMILAR_TITLE:"Similar",INTERSTITIAL_MORE_FROM_NETWORK:"More from %s",INTERSTITIAL_ACTION_RENT:"Rent / Buy",INTERSTITIAL_ACTION_PREORDER:"Pre-Order",INTERSTITIAL_ACTION_BUY_SEASON:"Rent / Buy",INTERSTITIAL_ACTION_SEASON_PASS:"Season Pass",INTERSTITIAL_ACTION_WATCH_X:"Watch %s",INTERSTITIAL_ACTION_WATCH:"Watch Next",INTERSTITIAL_WATCH_ON_X:"%s",INTERSTITIAL_WATCH_IN_X:"%s",INTERSTITIAL_ACTION_ADD:"Add to Wishlist",INTERSTITIAL_ACTION_PLAY_TRAILER:"Watch Trailer",INTERSTITIAL_ACTION_DETAILS:"See Details",INTERSTITIAL_ACTION_SEEN_IT:"Seen it?",INTERSTITIAL_ACTION_NOT_INTERESTED:"Not Interested",INTERSTITIAL_ACTION_SHARE:"Rate / Share",INTERSTITIAL_ACTION_BACK:"Return",SPLASH_THE_WORLDS_LARGEST_HD:"+ The world's largest HD library",SPLASH_FULL_1080P_QUALITY:"+ Full 1080p quality",SPLASH_WATCH_INSTANTLY:"+ Watch instantly",SPLASH_DOLBY_DIGITAL_PLUS:"+ 7.1 Dolby Digital Plus",SPLASH_DETAILS_COLON:"Details:",SPLASH_MORE_INFO_COLON:"More info:",SPLASH_HARDWARE_ID:"Hardware ID:",SPLASH_DEVICE_ID:"Device ID:",SPLASH_SOFTWARE_BUILD:"SW Build #:",SPLASH_TIMEOUT:"Timeout",SPLASH_VUDU_DETECTED_THE_ETHERNET:"We detected the ethernet cable is not plugged in. Please plug it in.",SPLASH_VUDU_HAS_LOST_CONNECTION:"This device has lost connection to its servers, and will try to reconnect as soon as possible",SPLASH_SORRY_VUDU_IS_NOT_AVAILABLE:"Sorry, Vudu is not available",SPLASH_SORRY_VUDU_IS_NOT_AVAILABLE_APPX:"Sorry, %s is not available",SPLASH_WE_ARE_SORRY_THIS_CONTENT_SERVICE:"We are sorry, this content service is only available for devices sold in the United States and Mexico due to international rights agreements and protection policy",SPLASH_THERE_IS_A_PROBLEM_WITH_THIS_DEVICE:"There's a problem with this device",SPLASH_PLEASE_CONTACT_YOUR_DEVICE_MANU:"Please contact your device manufacturer's customer service",SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK:"Failed to connect to the network",SPLASH_PLEASE_PRESS_RETURN_AND_CHECK:"Please check your network connections and try again.",SPLASH_CURL_TIMEOUT:"Network Timeout",SPLASH_BAD_COUNTRY:"Bad country",SPLASH_SELECT_A_DIFFERENT_COUNTRY_AND:"Select a different country and try again",SPLASH_COUNTRY_CODE:"Country code:",SPLASH_THERES_A_PROBLEM_WITH_THE_VUDU:"There's a problem with the Vudu service",SPLASH_THERES_A_PROBLEM_WITH_THE_VUDU_APPX:"There's a problem with the %s service",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER:"Please contact Vudu customer service at %s",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER_APPX:"Please contact %s customer service at %s",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER_URL:"Please contact Vudu customer service at http://support.vudu.com",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER_URL_APPX:"Please contact %s customer service at %s",SPLASH_CODE_COLON:"Code:",SPLASH_CURL_CODE_COLON:"Curl Code:",SPLASH_LOADING_DOT_DOT:"Loading...",SPLASH_MESSAGE_RECONNECTING:"Re-connecting...",SPLASH_CHECK_YOUR_NETWORK_PRESS_PLAY:'Check your network connections and press "Play" to retry',SPLASH_PRESS_ANY_BUTTON:"Press any key to retry",SPLASH_CHECK_CONNECTION_RETRY:"Check your internet connection. Press any key to retry.",SPLASH_NETWORK_CABLE_UNPLUGGED:"Network cable unplugged, or network disabled",SPLASH_PLEASE_CHECK_YOUR_NETWORK_CABLE:"Please check your network cable",SPLASH_PLEASE_CONSULT_YOUR_MANU_USER_MAN:"Please consult your device's user manual for detailed network configuration instructions",SPLASH_CHECK_YOUR_NETWORK_CONNECTIONS:"Check your network connections",AV_SETTINGS_DIALOG_TITLE:"Audio/Video Settings",AV_SETTINGS_DIALOG_AUDIO_BUTTON:"Audio Settings",AV_SETTINGS_DIALOG_VIDEO_BUTTON:"Video Settings",BANDWIDTH_REQUIREMENTS_DIALOG_TITLE:"Internet Speed Requirements",BANDWIDTH_REQUIREMENTS_DIALOG_FIRST_TIME:"We notice this is your first time %s an %s movie.",BANDWIDTH_REQUIREMENTS_DIALOG_TROUBLE_PLAYING:"We notice your device has had trouble playing %s movies before.",BANDWIDTH_REQUIREMENTS_DIALOG_YOU_CAN_WATCH:"You can watch the first %s minutes for free to verify that you have sufficient speed.",BANDWIDTH_REQUIREMENTS_DIALOG_MOVIES_REQUIRE:"%s movies require a minimum speed of %s and a recommended speed of %s.\n",BANDWIDTH_REQUIREMENTS_RECOMMEND_SPEED:"The Speed test has recommended that you watch movies in %s for the best experience. ",BANDWIDTH_REQUIREMENTS_TEST_NETWORK:"Would you like to test your home network and Internet connection?",BANDWIDTH_REQUIREMENTS_TEST_NETWORK_AGAIN:"Would you like to test your home network and Internet connection again?",BANDWIDTH_REQUIREMENTS_DIALOG_MBPS:"%s Mbps",BANDWIDTH_REQUIREMENTS_DIALOG_TEST_SPEED:"Test Speed",BANDWIDTH_REQUIREMENTS_DIALOG_TEST_INTERNET:"Test your internet",BANDWIDTH_REQUIREMENTS_DIALOG_TRY_IT:"TRY IT",BANDWIDTH_REQUIREMENTS_DIALOG_WATCH_X_MIN_FREE:"Watch %s minutes free",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_RENT_IT:"Just let me rent it",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_BUY_IT:"Just let me buy it",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_PREORDER_IT:"Just let me pre-order it",BANDWIDTH_REQUIREMENTS_DIALOG_CANCEL_BUTTON:"Cancel",BANDWIDTH_REQUIREMENTS_DIALOG_NOTICE:"Customers should have at least a 1000 kbps (1.0 Mbps) broadband internet connection in order to enjoy our Movies & TV streaming service.",BUNDLE_DETAILS_INCLUDED_MOVIES:"Included Movies:",BUNDLE_DETAILS_INCLUDES:"Included",MOVIE_DETAILS_N_A:"N/A",SHORT_MONTH_JAN:"Jan",SHORT_MONTH_FEB:"Feb",SHORT_MONTH_MAR:"Mar",SHORT_MONTH_APR:"Apr",SHORT_MONTH_MAY:"May",SHORT_MONTH_JUN:"Jun",SHORT_MONTH_JUL:"Jul",SHORT_MONTH_AUG:"Aug",SHORT_MONTH_SEP:"Sep",SHORT_MONTH_OCT:"Oct",SHORT_MONTH_NOV:"Nov",SHORT_MONTH_DEC:"Dec",TIME_LEFT_STR_IN_ONE_MIN:"in 1 minute",TIME_LEFT_STR_IN_X_MINS:"in %s mins",TIME_LEFT_STR_IN_X_HOURS:"in %s hours",TIME_LEFT_STR_ON_DATE:"on %s %s",TIME_LEFT_FOR_X_PRICE:"for $%s",BOTTOM_BLUE_HELP_BUTTON_HOME:"Home",PURCHASE_DIALOG_OK_BUTTON:"OK",PURCHASE_DIALOG_ALREADY_PURCHASED:"You have already purchased this movie.",PURCHASE_DIALOG_ACCOUNT_PROBLEM:"There is a problem with your user account. Please contact customer care at %s",PURCHASE_DIALOG_OFFER_EXPIRED:"This offer is no longer valid. We apologize for the inconvenience",PURCHASE_DIALOG_AMOUNT_CHANGED:"The transaction was not completed. The amount due for this purchase has changed due to recent account activity. Try this purchase again to see the new amount.",PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR_TITLE:"Update Payment Information",PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR:"We're missing some information needed to continue. Please check you have a valid payment method and correct billing or shipping address on file in your account at video.walmart.com and try again!",PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR_APPX:"We're missing some information needed to continue. Please check you have a valid payment method and correct billing or shipping address on file in your account at %s and try again!",PURCHASE_DIALOG_INSUFFICIENT_FUNDS:"Your account does not have sufficient funds for this purchase. Please visit %s to update your account information",PURCHASE_DIALOG_PROBLEM_WITH_PAYMENT_DATA:"There was a problem with your payment data. Please update the payment information with zip code by visiting %s.",PURCHASE_DIALOG_PROBLEM_COMPLETING_PURCHASE:"There was a problem completing the purchase. Please try again later.",PURCHASE_DIALOG_PROBLEM_COMPLETING_PREORDER:"There was a problem cancelling the Pre-Order. Please try again later.",PURCHASE_DIALOG_PASSCODE_REQUIRED:"To watch this title, please enter your PIN.",PURCHASE_DIALOG_PASSCODE_REQUIRED_PURCHASE:"To watch this title, please enter your PIN.",PURCHASE_DIALOG_PASSCODE_REQUIRED_PURCHASE_WITHOUT_CONTENT_TYPE:"To continue this transaction, please enter your PIN.",PURCHASE_DIALOG_PIN_REQUIRED:"To watch this title, please enter your PIN.",PURCHASE_DIALOG_PIN_REQUIRED_PURCHASE:"To continue this transaction, please enter your PIN.",PURCHASE_DIALOG_PIN_REQUIRED_PURCHASE_WITHOUT_CONTENT_TYPE:"To continue this transaction, please enter your PIN.",GENERIC_DIALOG_OK_BUTTON:"OK",KEYBOARD_DELETE_BUTTON:"Delete",KEYBOARD_SYMBOLS_BUTTON:"Symbols",KEYBOARD_LETTERS_BUTTON:"Letters",KEYBOARD_SPACE_BUTTON:"Space",KEYBOARD_CLEAR_BUTTON:"Clear",KEYBOARD_SHIFT_BUTTON:"Shift",TEXT_INPUT_DIALOG_CANCEL_BUTTON:"Cancel",TEXT_INPUT_DIALOG_DONE_BUTTON:"Done",KEYBOARD_SEARCH_KEYS:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",KEYBOARD_ABC_KEYS:"ABC/123",KEYBOARD_SYMBOL_KEYS:"@!=",KEYBOARD_BACK_KEY:"Back",KEYBOARD_SPACE_KEY:"Space",KEYBOARD_CLEAR_KEY:"Clear",MOVIE_DETAILS_MINUTES_SHORT:"min",GET_FULL_NAME_UNKNOWN:"Unknown",WATCH_FREE:"FREE",GET_BEST_OFFER_VALID_FOR:"OFFER VALID FOR %s",GET_BEST_PREORDER_OFFER_AVAILABLE_ON:"Available in %s",GET_BEST_OFFER_AVAILABLE_ON:"Available On %s",GET_BEST_OFFER_AVAILABLE_IN:"Available In %s",GET_BEST_OFFER_RENT_FOR:"RENT FOR $%s",GET_BEST_OFFER_OWN_FOR:"OWN FOR $%s",GET_BEST_OFFER_FROM:"%s FROM $%.2f",GET_BEST_OFFER_SEASON_FROM:"%s SEASON FROM $%.2f",GET_BEST_OFFER_YOU_OWN_IT:"You own",GET_BEST_OFFER_AVOD:"Watch with ads",GET_BEST_OFFER_AVOD_FREE:"Watch Free with ads",GET_BEST_OFFER_YOU_PREORDERED_IT:"Pre-Ordered",GET_BEST_OFFER_TIME_LEFT:"%s left",GET_BEST_OFFER_RENT:"Rent",GET_BEST_OFFER_OWN:"Buy",GET_PRICE_STRING:"$%s",MORE_INFO_GENRES:"Genres:",MORE_INFO_LENGTH:"Length:",MORE_INFO_RELEASED:"Released:",MORE_INFO_RATING:"Rating:",MORE_INFO_STUDIO:"Studio:",MORE_INFO_NETWORK:"Network:",MORE_INFO_LANGUAGE:"Language:",MORE_INFO_FULLSCREEN:"Fullscreen",MORE_INFO_WIDESCREEN:"Widescreen",MORE_INFO_ENHANCED_WIDESCREEN:"Enhanced Widescreen",MORE_INFO_STEREO:"Stereo",MORE_INFO_MINUTES:"%s Minutes",AVAIL_INFO_RENT:"Rent",AVAIL_INFO_OWN:"Buy",AVAIL_INFO_TIME_LEFT:"%s left",AVAIL_INFO_DELETING_DOWNLOAD:"deleting download",AVAIL_INFO_DOWNLOAD_ERROR:"download %s",AVAIL_INFO_DOWNLOAD_UNAVAILABLE:"Unavailable",MOVIE_DETAILS_ENHANCED_WIDESCREEN:"Enhanced Widescreen",MOVIE_DETAILS_FULLSCREEN:"Fullscreen",MOVIE_DETAILS_WIDESCREEN:"Widescreen",MOVIE_DETAILS_STEREO:"Stereo",MOVIE_DETAILS_SURROUND_SOUND:"Surround Sound",MOVIE_DETAILS_COLOR:"Color",MOVIE_DETAILS_UHD_FEATURES:"UHD Features:",MOVIE_DETAILS_B_W:"B&W",MOVIE_DETAILS_BUNDLE_INCLUDES:"Bundle Includes",MOVIE_DETAILS_SUMMARY:"Summary",MOVIE_DETAILS_RENT_FROM:"Rent From",MOVIE_DETAILS_OWN_FROM:"Buy From",MOVIE_DETAILS_MY_OFFER:"My Offer",MOVIE_DETAILS_AVAILABLE_TO:"Available To",MOVIE_DETAILS_WATCH_NOW:"Watch Now",MOVIE_DETAILS_CAST_CREW:"Cast & Crew",MOVIE_DETAILS_VUDU_COMMUNITY:"Community",MOVIE_DETAILS_MY_RATING:"My Rating",MOVIE_DETAILS_TOMATOMETER:"Tomatometer®",MOVIE_DETAILS_DIRECTOR:"Director",MOVIE_DETAILS_RENT_OWN_BUTTON:"Rent / Buy",MOVIE_DETAILS_RENT_BUTTON:"Rent",MOVIE_DETAILS_OWN_BUTTON:"Buy",MOVIE_DETAILS_PREORDER_BUTTON:"Pre-Order",MOVIE_DETAILS_SEASON_PURCHASE_BUTTON:"Buy Season",MOVIE_DETAILS_SEASON_PASS_BUTTON:"Season Pass",MOVIE_DETAILS_MANAGE_PREORDER:"Pre-Order",MOVIE_DETAILS_WATCH_TRAILER:"Watch Trailer",MOVIE_DETAILS_TRAILER:"Trailer",MOVIE_DETAILS_X_MINUTE_PREVIEW:"%s MIN PREVIEW",MOVIE_DETAILS_ADD_TO_WISHLIST:"Wishlist",MOVIE_DETAILS_REMOVE_FROM_WISHLIST:"Wishlist",MOVIE_DETAILS_RATE_SHARE:"Rate / Share",MOVIE_DETAILS_RATE:"Rate",MOVIE_DETAILS_WATCH_X:"Watch %s",MOVIE_DETAILS_RESUME_X:"Resume %s",MOVIE_DETAILS_WATCH_AGAIN:"Watch Again",MOVIE_DETAILS_WATCH_ON_X:"Watch on %s",MOVIE_DETAILS_WATCH_IN_X:"Watch in %s",MOVIE_DETAILS_COMING_SOON:"Coming Soon",MOVIE_DETAILS_WATCH_ADS:"Watch Free",MOVIE_DETAILS_WATCH_SOON:"Watch Soon",MOVIE_DETAILS_WATCH_TOKEN:"Watch",MOVIE_DETAILS_AVAILABLE_SOON:"Available Soon",MOVIE_DETAILS_UNAVAILABLE:"Unavailable",MOVIE_DETAILS_EPISODE_X_SEASON_X_ABBREV:"Ep%s : S%s",MOVIE_DETAILS_OFFER_VALID_FOR:"Offer valid for %s",MOVIE_DETAILS_AVAILABLE_X:"Available %s",MOVIE_DETAILS_OWNDISC:"DISC + DIGITAL",SIDE_PANEL_DIRECTOR:"Director",SIDE_PANEL_ACTORS:"Actors",SIDE_PANEL_BUNDLES:"Bundles",SIDE_PANEL_PLUS_X_MORE:"...Plus %s more!",SIDE_PANEL_EPISODE:"Episode",SIDE_PANEL_SEASON:"Season",SIDE_PANEL_SERIES:"Series",SIDE_PANEL_X_MINUTE_FREE_PREVIEW:"Free %s Min Preview",HOME_TOP_BLUE_BUTTON_SIGN_UP_NOW:"Sign Up Now",HOME_TOP_BLUE_BUTTON_USE_X_MONEY:"USE $%s",MOVIE_DETAILS_TRAILER_PASSCODE_REQUIRED:"A PIN is required to watch this trailer.",MOVIE_DETAILS_TRAILER_PIN_REQUIRED:"A PIN is required to watch this trailer.",RATING_WIDGET_MY_RATING:"My Rating",RATING_WIDGET_COMMUNITY_RATING:"Community",POSTER_RED_BANNER_OWN_FROM:"Buy from $%s",POSTER_RED_BANNER_WATCH_X:"Watch %s",POSTER_LIST_RANGE_X_TO_Y_OF_Z:"%s - %s of %s",QUALITY_CHOICE_DIALOG_PLEASE_SELECT_VIEWING:"Please Select Viewing Quality",QUALITY_CHOICE_DIALOG_YOU_CAN_CHANGE:'(You can change this later by pressing "Info" during playback)',QUALITY_CHOICE_DIALOG_BRILLIANT_1080P:"Brilliant 1080p: Our Best Quality",QUALITY_CHOICE_DIALOG_DOLBY_DIGITAL_PLUS:"Dolby Digital Plus 5.1 Surround",QUALITY_CHOICE_DIALOG_NEEDS_4_5:"Needs 4.5 Mbps Internet speed",QUALITY_CHOICE_DIALOG_720P_BANDWIDTH:"720p: Bandwidth-Friendly HD",QUALITY_CHOICE_DIALOG_NEEDS_225_MBPS:"Needs 2.25 Mbps Internet speed",QUALITY_CHOICE_DIALOG_480P_DVD:"480p: DVD Quality",QUALITY_CHOICE_DIALOG_STEREO_SOUND:"Stereo Sound",QUALITY_CHOICE_DIALOG_NEEDS_1_MBPS:"Needs 1 Mbps Internet speed",QUALITY_DIALOG_IT_APPEARS_YOU:"It appears you have been having trouble streaming this movie at the %s quality level. Would you like to select a different quality level? Selecting a lower quality level may allow playback with fewer buffering interruptions.",QUALITY_DIALOG_CONTINUE_X:"Continue %s",QUALITY_DIALOG_SWITCH_TO_X:"Switch to %s",RATE_DIALOG_TITLE:"Rate",RATE_DIALOG_HOW_DID_YOU:"How did you like the movie?",RATE_DIALOG_USE_THE_L_R:"Use the L / R arrows on your remote to rate \nthe movie. Push Select when done.",RATE_DIALOG_NO_RATING:"No Rating",RATE_DIALOG_DONE_BUTTON:"Done",RATE_DIALOG_RETURN_BUTTON:"Return",SEARCH_DIALOG_ENTER_A_NAME_TO_SEARCH:"Enter a name to search",SEARCH_DIALOG_X_SEARCH_RESULTS:"%s Search Results",SEARCH_DIALOG_X_SEARCH_RESULT:"%s Search Result",SEARCH_DIALOG_NO_SEARCH_RESULTS:"No Search Results",SEARCH_DIALOG_TOP_SEARCH_RESULTS:"Top Search Results",SEARCH_SCREEN_HEADER:"Search Movies and TV Shows by Title",SUGGESTED_SEARCH_PANEL_HEADER:"Search Suggestions",THEATER_HEADER_CHAPTERS_BUTTON:"Chapters",THEATER_HEADER_SWITCH_QUALITY_BUTTON:"Switch Quality",THEATER_ERROR_POPUP_OK_BUTTON:"OK",THEATER_ERROR_POPUP_MOVIE_ERROR:"Movie Error",THEATER_ERROR_POPUP_PLAYER_ERROR:"Player Error",THEATER_ERROR_POPUP_NETWORK_ERROR:"Network Error",THEATER_ERROR_POPUP_PLAYBACK_ERROR:"Playback Error",THEATER_ERROR_POPUP_RENTAL_EXPIRED:"Rental Expired",THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK:"Unable to stream this movie at the moment due to a network error.\nPlease try again a little later.",THEATER_3D_POPUP_WEAR_YOUR_GLASSES:"Wear your 3D glasses.\nPress the power button on the glasses.",THEATER_ERROR_POPUP_THIS_MOVIES_RENTAL_PERIOD_EXPIRED:"This movie's rental period has expired.\nIf you decide to rent it again, playback will resume where you left off",THEATER_ERROR_POPUP_THIS_MOVIES_AVOD_PERIOD_EXPIRED_TITLE:"Session Expired",THEATER_ERROR_POPUP_THIS_MOVIES_AVOD_PERIOD_EXPIRED:"Play the title again to continue watching.",THEATER_ERROR_POPUP_THIS_MOVIES_AVOD_ERROR_MESSAGE:"Error starting playback of this content. Please try again later.",THEATER_ERROR_POPUP_THIS_MOVIES_ANOTHER_DEVICE:"Another device on your account has started playing this content.",THEATER_LOADING_CHAPTER_X:"LOADING CHAPTER %s",THEATER_LOADING_CHAPTER_X_4:"LOADING CHAPTER %s ....",THEATER_LOADING_4:"LOADING....",THEATER_LOADING_CHAPTER_X_3:"LOADING CHAPTER %s ...",THEATER_LOADING_3:"LOADING...",THEATER_LOADING_2:"LOADING..",THEATER_SUBTITLE_NONE:"Off",THEATER_WATCH_NEXT_COUNTDOWN:"Up Next",THEATER_WATCH_NEXT_WATCHNOW:"Watch Now",THEATER_WATCH_NEXT_BACK:"Back",THEATER_WATCH_NEXT_COUNTDOWN_AUTODISABLE:"Binge-watching? Or asleep on the couch? \nClick 'WATCH NOW' if you're up and ready to watch.",THEATER_WATCH_NEXT_COUNTDOWN_AUTODISABLE_APPX:"Binge-watching? Or asleep on the couch? \nClick '%s' if you're up and ready to watch.",THEATER_WATCH_NEXT_SEC:"SEC",OFFER_DIALOG_RENTORBUY:"Rent or Buy",OFFER_DIALOG_RENT:"Rent",OFFER_DIALOG_OWN:"Buy",OFFER_DIALOG_SEASON_PASS:"Season Pass",OFFER_DIALOG_RENTAL:"Rental",OFFER_DIALOG_PURCHASE:"Purchase",OFFER_DIALOG_PREORDER:"Pre-Order",OFFER_DIALOG_PREORDER_TEXT:"Pre-Order",OFFER_DIALOG_CANCEL:"Cancel",CONFIRM_OFFER_DIALOG_CANCEL:"Cancel",TRANSACTION_SUCCESS_DIALOG_THANK_YOU:"Thank You",TRANSACTION_SUCCESS_DIALOG_WATCH_NOW:"Watch Now",TRANSACTION_SUCCESS_DIALOG_DMA_EXPIRED:"Your link to Disney Movies Anywhere has expired. Visit your account page on www.vudu.com to renew your link and sync your purchase between accounts.",TRANSACTION_SUCCESS_DIALOG_MA_EXPIRED_APPX:"Your link to Movies Anywhere has expired. To add this title to your Movies Anywhere library, renew your link at %s.",TRANSACTION_SUCCESS_DIALOG_DMA_ALMOST_EXPIRED:"Your link to Disney Movies Anywhere is about to expire. Visit your account page on www.vudu.com to renew your link and ensure future purchases sync between accounts.",TRANSACTION_SUCCESS_DIALOG_MA_ALMOST_EXPIRED_APPX:"Your link to Movies Anywhere will expire on %s. Renew your link at %s.",TRANSACTION_SUCCESS_DIALOG_TRANS_COMPLETE:"Transaction Complete",PREORDER_SUCCESS_DIALOG_TRANS_COMPLETE:"You have successfully pre-ordered the %s. Your pre-order title and any bonus content will be available upon title release, and you will not be charged until the title is released. (Exception: When you receive early access to content, your pre-order payment is processed immediately.)",TRANSACTION_SUCCESS_DIALOG_WATCH_LATER:"Watch Later",TRANSACTION_SUCCESS_DIALOG_DOWNLOAD_NOW:"Download",TRANSACTION_SUCCESS_DIALOG_DONE:"Done",PREVIEW_DIALOG_WATCH_A_X_MIN_PREVIEW:"Watch a %s min preview - choose resolution",PREVIEW_DIALOG_PREVIEW_OPTIONS:"Preview Options",PREVIEW_DIALOG_2160P:"2160p",PREVIEW_DIALOG_1080P:"1080p",PREVIEW_DIALOG_720P:"720p",PREVIEW_DIALOG_480P:"480p",PREVIEW_DIALOG_CANCEL:"CANCEL",PREVIEW_PURCHASE_DIALOG_PREVIEW_COMPLETE:"Free Preview Complete",PREVIEW_PURCHASE_DIALOG_TO_CONTINUE:"To continue watching this movie:",PREVIEW_PURCHASE_DIALOG_TO_CONTINUE_EPISODE:"To continue watching this episode:",PREVIEW_PURCHASE_DIALOG_RENT_FOR:"Rent for %s",PREVIEW_PURCHASE_DIALOG_OWN_FOR:"Buy for %s",PREVIEW_PURCHASE_DIALOG_NO_THANKS:"NO, THANKS",TRANSACTION_DIALOGS_EPISODE_X_SEASON_X_ABBREV:"Ep%s : S%s",CONFIRM_OFFER_RENTAL:"Rental",CONFIRM_OFFER_PURCHASE:"Purchase",CONFIRM_OFFER_RENT:"Rent",CONFIRM_OFFER_OWN:"Buy",CONFIRM_OFFER_CONFIRM_X:"Confirm %s",CONFIRM_OFFER_X_FOR_PRICE:"%s for $%s",CONFIRM_OFFER_Y_FOR_PRICE:"%s for $%.2f",CONFIRM_PREORDER:" Pre-Order",CONFIRM_OFFER_THIS_TITLE_AVAILABLE:"This title will be available for up to %s. \nOnce you start playing, you have %s to watch the title.",CONFIRM_OFFER_THIS_TITLE_ADDED:"This title will be added to your library.",CONFIRM_OFFER_THIS_TITLE_PREORDER:"Your pre-order title and any bonus content will be available upon title release, and you will not be charged until the title is released. (Exception: When you receive early access to content, your pre-order payment is processed immediately.)",CONFIRM_OFFER_TOTAL:"Total",CONFIRM_OFFER_X_PRICE:"$%s",CONFIRM_OFFER_SALES_TAX:"Tax",CONFIRM_OFFER_CREDIT:"Credit",CONFIRM_OFFER_PRICE:"Price",CONFIRM_OFFER_CHARGED_TO:"Charged to",CONFIRM_OFFER_GIFT_CARD:"Gift Card Amount",CONFIRM_OFFER_PAY_ONFILE:"Payment on File",CONFIRM_OFFER_NEG_X_PRICE:"-$%s",CONFIRM_OFFER_POS_X_PRICE:"+$%s",CONFIRM_OFFER_PROCESSING:"Processing Transaction",MANAGE_PREORDER_TITLE:"Manage Pre-Order",MANAGE_PREORDER_DESC:"Thank you for your pre-order. Your digital movie and any additional bonus content will be available in your account once your order has been processed. \n\nYour credit card will not be charged until the release date.",MANAGE_CANCEL_TO_PREORDER_DESC:"You have already pre-ordered this digital movie in %s. You can switch or upgrade to another definition by cancelling this order and placing a new one.",MANAGE_PREORDER_CANCEL:"Cancel Pre-Order",MANAGE_PREORDER_BACK:"Back",CANCEL_PREORDER_SUCCESS_TITLE:"Manage Pre-Order",CANCEL_PREORDER_SUCCESS_DESC:"Your pre-order has been cancelled successfully.",CANCEL_PREORDER_SUCCESS_DONE:"Done",SUBTAB_SETTINGS_PRESS_ENTER_FOR_INFO:"Press Enter for Info & Settings",SPLASH_COUNTRY_CHANGED:"Country Changed",SPLASH_THE_COUNTRY_DETECTED_FOR_THIS_DEVICE:"The country detected for this device has changed to %s. Please press 'RETURN' and then launch this app again to finalize your country settings.",SPLASH_CONNECTING_DOT_DOT:"Connecting...",KEYBOARD_DONE_BUTTON:"Done",CONFIRM_PURCHASE_MA:"This title will also be added to your Movies Anywhere library.",CONFIRM_PURCHASE_UV:"This purchase will also be registered with your UltraViolet account.",CONFIRM_PURCHASE_UVMA:"This purchase will also be registered with your Movies Anywhere and\nUltraViolet account.",PRE_ORDER_DISCLAIMER:"Pre-Order contents are subject to change without notice.",RATESHARE_TITLE:"Rate / Share",RATESHARE_SUB_TITLE:"How did you like the %s?",RATESHARE_DESC_1:"Use the Left / Right buttons on your remote to rate the %s.",RATESHARE_DESC_PS_1:"Use the Left / Right buttons on your controller to rate the %s.",RATESHARE_DESC_2:"Press %s when done.",RATESHARE_POINTER_DESC:"Click the Left / Right arrow buttons below to rate the %s.",RATESHARE_NO_RATING:"No Rating",RATESHARE_DONE:"Done",OVERSCAN_TITLE:"Overscan Settings",OVERSCAN_MAIN_TEXT:"Maximize the picture on your television by adjusting picture size (overscan).",OVERSCAN_SUB_TEXT:"Adjust the values until the tips of the arrows touch the edges of your screen.",OVERSCAN_LEFT:"Left",OVERSCAN_RIGHT:"Right",OVERSCAN_TOP:"Top",OVERSCAN_BOTTOM:"Bottom",OVERSCAN_RESET:"Reset Overscan",OVERSCAN_BACK:"Back To Settings",SPEED_TEST_TITLE:"Internet Speed Test",SPEED_TEST_WHAT_IS:"What is the Network Speed Test?",SPEED_TEST_INIT_TEXT:"This one minute test will help you determine the optimal video playback quality for your network and internet connection.",SPEED_TEST_RESULT_TEXT:"The Network Speed Test shows that your home network and Internet connection will be able to play videos up to %s quality",SPEED_TEST_SD_RESULT_TEXT:"The Network Speed Test shows that your home network and Internet connection will be able to play videos at %s quality",SPEED_TEST_STATUS_TITLE:"Status:",SPEED_TEST_STATUS_IDLE:"Idle",SPEED_TEST_STATUS_PROGRESS:"Testing In Progress",SPEED_TEST_STATUS_COMPLETE:"Testing Complete",SPEED_TEST_STATUS_INCOMPLETE:"Testing Incomplete",SPEED_TEST_RESULTS_TITLE:"Test Results:",SPEED_TEST_QUALITY_TITLE:"Quality",SPEED_TEST_NW_PROBLEMS:"Speed testing could not be completed due to network problems. Please test again.",SPEED_TEST_VUDU_RECOMMENDS:"We Recommend ",SPEED_TEST_START:"Start Test",SPEED_TEST_IN_PROGRESS:"In Progress",SPEED_TEST_TEST_AGAIN:"Test Again",SPEED_TEST_NETWORK_TIPS:"Network Tips",SPEED_TEST_BACK_SETTINGS:"Back To Settings",SPEED_TEST_BACK:"Back",SERVICE_UNAVAILABLE:"Service Unavailable",SERVICE_UNAVAILABLE_MSG_APPX:"Sorry, %s is currently unavailable, please try again later",NETWORK_TIPS_TITLE:"Network Tips",NETWORK_TIPS_QUEST_1:"Your wired/wireless internet download speed may be affecting your ability to stream.",NETWORK_TIPS_QUEST_2:"Your wireless signal strength may be affecting your ability to stream.",NETWORK_TIPS_QUEST_3:"Still not achieving the speed for your desired viewing quality?",NETWORK_TIPS_ANS_1:"Run the 'Internet Speed Test' to see if your speeds meet our minimum requirements: 1.0 Mbps for SD and 4.5 Mbps for HDX. Contact your Internet Service Provider if you need to upgrade your speed.",NETWORK_TIPS_ANS_1_UHD:"Run the 'Internet Speed Test' to see if your speeds meet our minimum requirements: 1.0 Mbps for SD, 4.5 Mbps for HDX, and 11 Mbps for UHD. Contact your Internet Service Provider if you need to upgrade your speed.",NETWORK_TIPS_ANS_2_LEFT_TEXT:"If you're experiencing buffering issues, try these tips:\n\n-- Minimize the distance between your device and your router. Barriers such as walls and furniture can limit the signal.\n\n-- Boost your wireless signal by getting a network range extender device to cover 'dead zones.'",NETWORK_TIPS_ANS_2_RIGHT_TEXT:"-- Reduce the number of devices on your network. Multiple wireless devices can affect signal strength.\n\n-- Change the channel/frequency that your router and adapter use to communicate. Contact the manufacturer for assistance with changing the settings.\n\n\n\n\n\n\n\n(Continued on next page)",NETWORK_TIPS_ANS_3:"Find more tips at https://support.vudu.com or contact Customer Care at 1-888-554-VUDU or support@vudu.com.",NETWORK_TIPS_ANS_3_APPX:"Find more tips at %s or contact Customer Care at %s or %s",NETWORK_TIPS_NEXT_PAGE:"Next Page",NETWORK_TIPS_PREV_PAGE:"Previous page",NETWORK_TIPS_BACK:"Back",TIME_STRING_SECOND:"Sec",TIME_STRING_MINUTE:"Min",TIME_STRING_HOUR:"Hr",TIME_STRING_DAY:"Day",TIME_STRING_SECOND_PLURAL:"Secs",TIME_STRING_MINUTE_PLURAL:"Mins",TIME_STRING_HOUR_PLURAL:"Hrs",TIME_STRING_DAY_PLURAL:"Days",BANDWIDTH_DIALOG_BUTTON_RENT_IT:"Rent It",BANDWIDTH_DIALOG_BUTTON_BUY_IT:"Buy It",BANDWIDTH_DIALOG_BUTTON_PREORDER_IT:"Pre-Order It",BANDWIDTH_DIALOG_BUTTON_RENTING_TEXT:"renting",BANDWIDTH_DIALOG_BUTTON_BUYING_TEXT:"buying",BANDWIDTH_DIALOG_BUTTON_PREORDERING_TEXT:"pre-ordering",BANDWIDTH_DIALOG_BUTTON_PLAYING_TEXT:"playing",FACEBOOK_SHARE_RATINGS:"rated this %s %0.1f stars on Vudu!",FACEBOOK_SHARE_WISH:"wants to watch this %s on Vudu!",FACEBOOK_SHARE_CHECKOUT:"wants you to check out this %s on Vudu!",FACEBOOK_WATCH_VUDU:"Watch on Vudu",FACEBOOK_SENT_FROM:"Sent from my",FACEBOOK_VUDU_ENABLED:"Vudu-enabled %s",TWITTER_SHARE_RATINGS:"rated %q %0.1f stars on #Vudu! %s",TWITTER_SHARE_CHECKOUT:"check out the %s %q on #Vudu! %s",CONTENT_TYPE_PROGRAM:"movie",CONTENT_TYPE_EPISODE:"episode",CONTENT_TYPE_SEASON:"season",CONTENT_TYPE_SERIES:"show",CONTENT_TYPE_BONUS:"trailer",CONTENT_TYPE_VIDEO:"video",CONTENT_TYPE_BUNDLE:"bundle",CONTENT_TYPE_MM:"Mix & Match",VIEW_OF_VIEWALL:"View",ALL_OF_VIEWALL:"All",HELP_SHOW_HELP_MENU:"Show or hide help menu",HELP_GOTO_HOME:"Go to Home page",HELP_PREV_PAGE:"Previous page",HELP_PREV_PAGE_EXIT:"Previous page / Exit App",HELP_SHOW_SYSTEM_MENU:"Show System menu",HELP_TV_FEATURES:"TV Features",HELP_EXIT_VUDU_MOVIES:"Exit App",SETTINGS_CLOSED_CAPTION_OPTION:"Closed Captioning",SETTINGS_CLOSED_CAPTION_HEADING:"Customize your captioning",SETTINGS_CLOSED_CAPTION_FROM_ROKU:"Customize closed captioning font, text, size, and more \non your device's settings.",SETTINGS_CLOSED_CAPTION_DEFAULT:"Restore Defaults",SETTINGS_CLOSED_CAPTION_AUTO_ENABLE:"AUTO ENABLE CC",SETTINGS_CLOSED_CAPTION_AUTO_DISABLE:"AUTO DISABLE CC",SETTINGS_DEACTIVATE_TITLE:"Deactivate This Device",SETTINGS_DEACTIVATE_ARE_YOU_SURE:"By signing out you will deactivate this device from your Vudu account.",SETTINGS_DEACTIVATE_ARE_YOU_SURE_APPX:"By signing out you will deactivate this device from your %s account.",SETTINGS_DEACTIVATE_ARE_YOU_SURE_PS:"By signing out you will deactivate this device from your Vudu account and remove any downloaded Vudu content.",SETTINGS_DEACTIVATE_ARE_YOU_SURE_PS_APPX:"By signing out you will deactivate this device from your %s account and remove any downloaded %s content.",SETTINGS_DEACTIVATE_OK_BUTTON:"OK",SETTINGS_DEACTIVATE_CANCEL_BUTTON:"Cancel",SETTINGS_DEACTIVATE_CONFIRM_BUTTON:"Confirm",SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN:"This device has been deactivated from your Vudu account.",SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN_APPX:"This device has been deactivated from your %s account.",SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM:"Sorry, there was a problem deactivating this device from your Vudu account",SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM_APPX:"Sorry, there was a problem deactivating this device from your %s account",SETTINGS_ADVANCED_DEACTIVATE_DEVICE_BUTTON:"Sign Out",SETTINGS_ADVANCED_SIGNIN_BUTTON:"Sign In",SETTINGS_ADVANCED_DEACTIVATE_DESC_TITLE:"Device Deactivated",SETTINGS_ALREADY_DEACTIVATED:"This device is already deactivated",SA_LEARN_MORE:"Learn More",SA_INFO_SENT:"Thanks, more information has been emailed to you!",SA_ADD_TO_CART:"Add to Cart",SA_PRODUCT_ADDED:"Success! This item is now in your cart. Check out at Walmart.com or in the Walmart app.",SA_ADD_TO_CART_FAILED:"Unable To Add Item. This item could not be added to your cart. Please try again later.",SA_PREORDER:"Pre-Order",SA_BUY:"Buy",FONT_TITLE:"Font Family",STYLE_TITLE:"Style",COLOR_TITLE:"Text Color",SIZE_TITLE:"Text Size",TEXT_EDGE:"Text Edges",TEXT_TRANSPARENCY:"Text Transparency",TEXT_OPACITY:"Text Opacity",CC_TEXT:"Text",CC_BACKGROUND:"Background",CC_TRANSPARENCY:"Opacity",CC_TEXT_BG:"Text Bg",CC_WINDOW:"Window",BACKGROUND_TITLE:"Text Bg Color",BACKGROUND_TRANSPARENCY:"Background Transparency",BACKGROUND_OPACITY:"Background Opacity",WINDOW_TITLE:"Window Bg Color",WINDOW_TRANSPARENCY:"Window Transparency",WINDOW_OPACITY:"Window Opacity",CC_TURNED_ON:"CC Always Turned On",CC_TURNED_ALWAYS_YES:"Yes",CC_TURNED_ALWAYS_NO:"No",CC_AUTO:"Auto",FONT_CURSIVE:"Cursive",FONT_CURSIVE_BOLD:"Cursive Bold",FONT_CASUAL:"Casual",FONT_MONOSPACE:"Monospace",FONT_SERIF:"Serif",FONT_SANS_SERIF:"Sans Serif",FONT_MONO_SANS_SERIF:"Mono Sans Serif",FONT_CAPS:"Small Caps",SIZE_SMALL:"Small",SIZE_MEDIUM:"Medium",SIZE_LARGE:"Large",COLOR_TRANSPARENT:"Transparent",COLOR_BLACK:"Black",COLOR_WHITE:"White",COLOR_RED:"Red",COLOR_GREEN:"Green",COLOR_BLUE:"Blue",COLOR_MAGENTA:"Magenta",COLOR_YELLOW:"Yellow",COLOR_CYAN:"Cyan",STYLE_BOLD:"Bold",STYLE_ITALIC:"Italic",STYLE_BOLD_ITALIC:"Bold italic",STYLE_BOLD_UNDERLINE:"Bold underline",STYLE_ITALIC_UNDERLINE:"Italic underline",STYLE_BOLD_ITALIC_UNDERLINE:"Bold italic underline",EDGE_RAISED:"Raised",EDGE_DEPRESSED:"Depressed",EDGE_UNIFORM:"Uniform",EDGE_DROP_SHADOWED:"Drop Shadowed",TEXT_NO_OPACITY:"Off",TEXT_OPACITY_25:"25%%",TEXT_OPACITY_50:"50%%",TEXT_OPACITY_75:"75%%",TEXT_OPACITY_100:"100%%",TRANSPARENCY_TRANSPARENT:"Transparent",TRANSPARENCY_SEMI_TRANSPARENT:"Semi transparent",TRANSPARENCY_OPAQUE:"Opaque",PASSCODE_BUTTON_NUMBER_START:"0",PC_DROPDOWN_0:"0",PC_DROPDOWN_1:"1",PC_DROPDOWN_2:"2",PC_DROPDOWN_3:"3",PC_DROPDOWN_4:"4",PC_DROPDOWN_5:"5",PC_DROPDOWN_6:"6",PC_DROPDOWN_7:"7",PC_DROPDOWN_8:"8",PC_DROPDOWN_9:"9",INSTANT_REPLAY:"Instant Replay",BUFFERING:"BUFFERING ...",SWITCHING_AUDIO:"SWITCHING AUDIO ...",BREADCRUM_SHOWCASE:"SPOTLIGHT - Collections",LOCKED_EXTRAS_NO_RIGHTS:" is only available when you rent or own ",LOCKED_EXTRAS_NO_RIGHTS_RENT:" is only available when you rent ",LOCKED_EXTRAS_NO_RIGHTS_OWN:" is only available when you own ",LOCKED_EXTRAS_VUDU_EXTRAS:"Vudu Extras",LOCKED_EXTRAS_VUDU_EXTRAS_APPX:"%s Extras",LOCKED_EXTRAS_NO_RIGHTS_2:" in ",LOCKED_EXTRAS_NO_RIGHTS_DLG_TITLE:"Buy to Watch",LOCKED_EXTRAS_NO_RIGHTS_DLG_TEXT:"Your account does not currently have the rights to play back this movie. ",LOCKED_EXTRAS_OR_HIGHER:" or higher",EXITING_VUDU_DIALOG_TITLE:"Exiting Vudu",EXITING_VUDU_DIALOG_TITLE_APPX:"Exiting %s",EXITING_VUDU_DIALOG_TEXT:"Are you sure you want to exit Vudu?",EXITING_VUDU_DIALOG_TEXT_APPX:"Are you sure you want to exit %s?",GRID_EMPTY_MY_VUDU_RESUME:"Come here to continue watching where you left off or find next episodes of TV shows.",GRID_EMPTY_MY_VUDU_MOVIES:"Check out the latest movies and deals in the Spotlight section.",GRID_EMPTY_MY_VUDU_TV:"Find the latest TV and more in the Spotlight section.",GRID_EMPTY_MY_VUDU_OFFERS:"You do not have any offers at this time. Check back later for more offers!",GRID_EMPTY_MY_VUDU_WISHLIST:"Add movies and TV shows to your wishlist and check back occasionally to see if they are on sale!",GRID_EMPTY_MY_VUDU_PREORDER:"Pre-Order movies and they will be added to your account the instant they are available on Vudu.",GRID_EMPTY_MY_VUDU_PREORDER_APPX:"Pre-Order movies and they will be added to your account the instant they are available on %s.",GRID_EMPTY_MY_VUDU_DOWNLOADS:"Download your movies and TV shows in advance to minimize streaming interruptions.",GRID_EMPTY_MY_VUDU_LIST:"Add movies and TV shows to your personal library collection.",GRID_LOGIN_MY_VUDU_RESUME:"Please sign in to continue where you left off.",GRID_LOGIN_MY_VUDU_CONTINUE:"Please sign in to continue where you left off.",GRID_LOGIN_MY_VUDU_MOVIES:"Please sign in or sign up to see the movies in your library.",GRID_LOGIN_MY_VUDU_TVS:"Please sign in or sign up to see the TV shows in your library.",GRID_LOGIN_MY_VUDU_WISHLIST:"Please sign in to see your wish list.",GRID_LOGIN_MY_VUDU_PREORDERS:"Please sign in to see your Pre-Orders.",GRID_LOGIN_MY_VUDU_OFFERS:"Please sign in or sign up to see your offers.",MULTILIST_EMPTY_RECOMMENDED:"You need to sign in or sign up to see personalized recommendations.",SETTINGS_HELP_OPTION:"Help Info",OWNDISC_ADD_ADDRESS_AND_PHONE_HEADER:"Add Shipping Address and Phone Number",OWNDISC_ADD_ADDRESS_HEADER:"Add Shipping Address",OWNDISC_ADD_PHONE_HEADER:"Add Phone Number",OWNDISC_VIEW_TOS:"View our policies on DVD/Blu-ray orders on vudu.com/ToS",OWNDISC_VIEW_TOS_APPX:"View our policies on DVD/Blu-ray orders on %s/tos",OWNDISC_UPDATE_ADDRESS_URL_TEXT:"www.vudu.com/MyAccount",OWNDISC_UPDATE_ADDRESS_URL_TEXT_APPX:"%s/myaccount",OWNDISC_UPDATE_ADDRESS:"You can update your address on the web at vudu.com/MyAccount",OWNDISC_UPDATE_ADDRESS_APPX:"You can update your address on the web at %s/myaccount",OWNDISC_CONFIRM_ADDRESS_HEADER:"Confirm Shipping Address",OFFERDISC_DIALOG_OWNDISC_DIGITAL:"Buy Disc + Digital",OFFERDISC_DIALOG_DISC_DIGITAL:"Disc + Digital",OWNDISC_SHIPPING:"Shipping: ",OWNDISC_SDDIGITAL:"Buy DVD disc + SD digital copy",OWNDISC_HDXDIGITAL:"Buy Blu-ray disc + HDX digital copy",OWNDISC_UHDDIGITAL:"Buy 4K Blu-ray disc + UHD digital copy",OWNDISC_FREE:"Free",OWNDISC_WITH_4K_BLURAY:"w/4K Blu-ray",OWNDISC_WITH_DVD:"w/ DVD",OWNDISC_WITH_BLURAY:"w/ Blu-ray",OWNDISC_SHIPPING_POLICY:"Your %s order will ship from Walmart.com to the address below.  The digital copy will be available to watch instantly.",OWNDISC_DIALOG_CONFIRM_BLURAY_TEXT:"Your order confirmation will be emailed to you, and you will receive your %s disc around ",OWNDISC_DIALOG_CONFIRM_MISSING_SHIPDATE:"Your %s will ship from Walmart.com.  Check your Balance & History page later for estimated delivery date.",OWNDISC_MISSING_ADDRESS_TEXT:"To continue, we need your shipping address.",OWNDISC_MISSING_PHONE_NUMBER_TEXT:"To continue, we need your phone number.",OWNDISC_MISSING_ADDRESS_AND_PHONE_TEXT:"To continue, we need your shipping address and phone number.",OWNDISC_INVALID_ADDRESS_TEXT:"Could not verify your shipping address. To update your address, visit your account settings at Vudu.com/MyAccount.",OWNDISC_INVALID_ADDRESS_TEXT_APPX:"Could not verify your shipping address. To update your address, visit your account settings at %s.",OWNDISC_INVALID_PHONE_NUMBER_TEXT:"Could not validate your phone number. To update your number, visit your account settings at Vudu.com/MyAccount.",OWNDISC_INVALID_PHONE_NUMBER_TEXT_APPX:"Could not validate your phone number. To update your number, visit your account settings at %s.",OWNDISC_OUTOFSTOCK_ERROR:"Sorry, this item is currently unavailable or out of stock at Walmart.com. Please try again later.",OWNDISC_MISSING_INFO_DISCLAIMER:"DVDs and Blu-rays are sold and shipped by Walmart.com.\nWatch the digital copy instantly on Vudu.",OWNDISC_MISSING_INFO_DISCLAIMER_APPX:"DVDs and Blu-rays are sold and shipped by Walmart.com.\nWatch the digital copy instantly on %s.",OWNDISC_ADD_ADDRESS_AND_PHONE_TEXT:"Update your Shipping Address and Phone Number on the web at:",OWNDISC_ADD_ADDRESS_TEXT:"Update your Shipping Address information on the web at:",OWNDISC_ADD_PHONE_TEXT:"Add it to your Contact Information on the web at:",OWNDISC_ADD_ADDRESS_BACK_BUTTON:"Back",OWNDISC_ADDRESS_CORRECT_TEXT:"Yes, Address is Correct",OWNDISC_PRICE_REDUCED_TEXT:"*Price Reduced!",OWNDISC_PRICE_UPDATED_TEXT:"Price Updated.",OWNDISC_DIALOG_GIFTCARD_TEXT:"Gift Card:",OWNDISC_FOR:"Buy for $%.2f",FREE_RENTAL_REDEEM:"Redeem Complimentary Rental",FREE_RENTAL_REDEEM_CONFIRM:"Redeem your Complimentary Rental and watch %s now? Once it starts, you will have %s to watch the title.",FREE_RENTAL_WATCHNOW_BUTTON:"Watch Now",FREE_RENTAL_CANCEL_BUTTON:"Cancel",FREE_RENTAL_ERROR_TITLE:"Unable to redeem",FREE_RENTAL_REDEEM_ERROR:"Be sure you have an available Complimentary Rental and try again later.",MM_OFFER_EXPIRED:"This Mix & Match offer is no longer available.  We'll have another offer soon.",MM_ALREADY_OWN_QUALITY:"You already own this in %s.\nPlease select another title for your Mix & Match.",MM_MIX_AND_MATCH_HEADER:"Mix & Match",MM_ADD_TO_BUNDLE:"Add to your Mix & Match",MM_ALREADY_OWN_TITLE:"You already own this title",MM_CART_FULL:"Your Mix & Match is full",MM_ALREADY_ADDED_TITLE:"Remove from your Mix & Match",MM_NO_OFFER_FOUND:"This title is not available in %s",MM_ALREADY_OWN_TITLE_IN_QUALITY:"You already own this in %s",MM_NO_PURCHASE_OFFER:"This title is currently not availble",MM_CHOOSE_ANOTHER_QUALITY:"Please select another title or purchase your Mix & Match in a higher quality.",MM_BUY_HIGHER_QUALITY:"Add to Mix & Match and buy %s",MM_SELECT_DIFF_TITLE:"Please select a different title.",MM_ERROR_ALREADY_OWN:"You already own one of your Mix & Match selections.",MM_ERROR_PROCESSING:"Looks like something went wrong. Please try later.",MM_ERROR_ACCOUNT_PAYMENT:"Error processing your Mix & Match purchase.\nPlease check your Account Payment Information.",MM_SELECT_QUALITY:"Select your desired quality",MM_YOUR_BUNDLE:"Your Mix & Match",MM_UNABLE_TO_PROCESS:"Unable to complete purchase",MM_ENJOY_BUNDLE:"Enjoy your Mix & Match",MM_BUY_MORE_BUTTON:"Buy More",MM_BUY_NOW_BUTTON:"Buy Now",MM_REMOVE:"Remove",MM_ADD:"Add",MM_CANCEL:"Cancel",MM_SEE_DETAILS:"See Details",MM_BUNDLE_ADD_TO_LIBRARY:"Buy these titles and add them to your collection",MM_OWN_PRICE:"Buy $",MM_OWN_PRICE_TAG:"Buy $%s",HDCP22_NOT_SUPPORTED_TITLE_PURCHASE:"Are you UHD-ready?",HDCP22_NOT_SUPPORTED_TITLE_PLAYBACK:"HDCP 2.2 Not Supported",HDCP22_NOT_SUPPORTED_TEXT_PURCHASE:"Your current set-up does not support 4K UHD playback from Vudu, but you can still purchase and watch in next highest-supported quality.  Learn more at vudu.com/uhd.",HDCP22_NOT_SUPPORTED_TEXT_PURCHASE_APPX:"Your current set-up does not support 4K UHD playback from %s, but you can still purchase and watch in next highest-supported quality.  Learn more at %s/uhd.",HDCP22_NOT_SUPPORTED_TEXT_PLAYBACK:"This device does not support HDCP 2.2 content protection required for UHD.  Playback will be limited to HDX quality.",THREED_NOT_SUPPORTED_TITLE_PURCHASE:"3D Not Supported",THREED_NOT_SUPPORTED_DEVICE_PURCHASE:"This device does not support 3D playback. You can continue with your transaction, but will need a supported 3D-capable TV to watch.",THREED_NOT_SUPPORTED_TV_PURCHASE:"You do not appear to have a 3D TV connected. You can continue with your transaction, but will need a 3D-capable TV through an HDMI connection to watch.",THREED_NOT_SUPPORTED_DEVICE_WATCH:"This device does not support 3D playback. ",THREED_NOT_SUPPORTED_TV_WATCH:"You do not appear to have a 3D TV connected. Please connect a 3D TV through an HDMI connection to continue.",THIRD_PARTY_ALSO_ON:"Also on",THIRD_PARTY_WATCH_ON:"Available on",THIRD_PARTY_PLUS_MORE:"& more",TAB_FAMILY_PARENTAL_GUIDE:"Parental Guide",TAB_FAMILY_PARENT_GUIDE:"Parent Guide",FAMILY_AGE_RATING:"Age Rating",FAMILY_META_EDUCATIONAL_VALUE:"Educational Value",FAMILY_META_VIOLENCE:"Violence & Scariness",FAMILY_META_SEX:"Sexy Stuff",FAMILY_META_POSITIVE_MESSAGES:"Positive Messages",FAMILY_META_CONSUMERISM:"Consumerism",FAMILY_META_DRINKING_DRUGS:"Drinking, Drugs & \nSmoking",FAMILY_META_ROLE_MODELS:"Positive Role Models\n& Representations",FAMILY_META_LANGUAGE:"Language",FAMILY_PARENTS_NEED_TO_KNOW:"What Parents Need To Know",FAMILY_PARENTS_READ_MORE:"Read More",FAMILY_PARENTS_BACK:"Back",FAMILY_META_NO_RATING:"Not Present",COMMON_MEDIA_DISCLAIMER:"Review by Common Sense Media®",COMMON_MEDIA_DISCLAIMER_DESCRIPTION:"Common Sense Media is a registered trademark, other associated names and logos are trademarks of Common Sense Media, a 501(c)(3) nonprofit organization.",FILTER_AGE_RATING:"Age Rating",FILTER_AGE_ANY:"All",FILTER_AGE_PRESCHOOLERS:"Preschoolers (<5)",FILTER_AGE_LITTLE_KIDS:"Little Kids (<8)",FILTER_AGE_BIG_KIDS:"Big Kids (<10)",FILTER_AGE_TWEENS:"Tweens (<13)",FILTER_AGE_TEENS:"Teens (<18)",FILTER_VODTYPE_WAYS:"Ways To Watch",FILTER_VODTYPE_ANY:"All",FILTER_VODTYPE_AVOD:"Free with ads",FILTER_VODTYPE_TVOD:"Rent or Buy",FILTER_VODTYPE_SVOD:"Other",FILTER_GENRE_ACTION:"Action",FILTER_GENRE_ANIMATION:"Animation",FILTER_GENRE_COMEDY:"Comedy",FILTER_GENRE_CRIME_THRILLER:"Crime & Thrillers",FILTER_GENRE_KIDS_FAMILY:"Kids & Family",FILTER_GENRE_ROMANCE:"Romance",FILTER_GENRE_SCIFI:"Sci-Fi",FILTER_GENRE_SUSPENSE:"Horror",FILTER_GENRE_OTHER:"Other",FILTER_RESULT_TITLE:"Browse All %s",FILTER_RESULT_TITLE_FILTERED_SUFFIX:" (Filtered)",FILTER_WATCHABILITY:"Wachability",FILTER_WATCHABILITY_ALL:"All",FILTER_VODTYPE:"Watchability",FILTER_VODTYPE_SVOD:"Subscription",FILTER_FAMILYPLAY:"Family Play",FILTER_FAMILYPLAY_OPTION_ALL:"All",FILTER_FAMILYPLAY_OPTION_AVAIL:"Available",TRANSACTION_PANEL_CANCEL_BUTTON:"Cancel",ON:"On",OFF:"Off",DONE_BUTTON:"Done",BACK_BUTTON:"Back",PRECERT:"Precert",DEBUGGING:"Debugging",CONTINUE:"Continue",CONTENT_RESUME:"Resume",CONTENT_RESTART:"Start Over",CONTENT_DETAILS:"See Details",CONTENT_REMOVE_FROM_WATCHLIST:"Remove from Watchlist",KIDS_DIALOG_CANCEL:"Cancel",KIDS_DIALOG_ENTER:"Enter",KIDS_HELLO:"Hello again!",KIDS_BACK_TO_KIDS_MODE:"Jump back to Kids Mode?",KIDS_BTN_YES:"Yeah!",KIDS_NOT_A_KID:"No, I'm not a kid!",KIDS_LEARN_MORE:"Learn More at %s",KIDS_ENTERING:"Entering Kids Mode",KIDS_NEED_PIN_EXIT:"To exit, you'll need your PIN!",KIDS_CHANGE_SETTING:"You can change these settings and more in Settings > Family Settings",KIDS_MODE_EMPTY:"Kids Mode is Empty!",KIDS_NO_CONTENT:"Change the age limit, add some movies or TV to your\ncollection, or show free content with ads.",KIDS_NO_CONTENT2:"Change the age limit, add some movies or TV to your\ncollection, or show free content with ads.",KIDS_ENABLE_AVOD:"Show Free Content",KIDS_SETTINGS_TITLE:"Kids Mode Settings",KIDS_SETTINGS_DESC:"A safe space for kids with age-appropriate movies and TV from your library.",KIDS_VIEW_PRIVACY:"We care about your children's privacy.  View our policies at %s",KIDS_SETTINGS_SET_CHANGE_PIN:"Set / Change PIN",KIDS_SETTINGS_PP_CONTROLS_TITLE:"Purchase & Playback Controls",KIDS_SETTINGS_PP_CONTROLS_DESC:"Browse all content but restrict purchase and playback in the entire Walmart Video app.",KIDS_SETTINGS_KM_TITLE:"Customize",KIDS_SETTINGS_KM_DESC:"Show only age-appropriate content from your library, and that is free with ads. No purchases are allowed.",KIDS_SETTINGS_KM_MORE:"Learn more at video.walmart.com/family",FAMILY_SETTINGS_TITLE:"Family Settings",FAMILY_SETTINGS_DESC:"Put more control of family entertainment in your hands.",FAMILY_SETTINGS_KM:"Kids Mode",FAMILY_SETTINGS_DESC_KM:"A safe space for kids with age-appropriate movies and TV from your library.",FAMILY_SETTINGS_DESC_KM_EXTRA:"A safe space for kids where they can watch on their own! Shows your content and no purchases allowed.",FAMILY_SETTINGS_BUTTON_KM:"Customize",FAMILY_SETTINGS_DESC_PC:"Require PIN to buy or watch content based on rating.",FAMILY_SETTINGS_BUTTON_PC:"Set Controls",KIDS_ENTRY_HINT:"Customize Kids Mode even more in Settings > Family Settings.",FAMILY_SETTINGS_DESC2:"Set your family friendly settings with Parental Control and Kids Mode.",FAMILY_SETTINGS_TO_PC:"Parental Control",FAMILY_SETTINGS_PC_DESC:"Require PIN to buy or watch content based on rating.",FAMILY_SETTINGS_TO_PC:"Set Controls",ENTER_KIDS_MODE:"Enter Kids Mode",EXIT_KIDS_MODE:"Exit Kids Mode",EXIT_KIDS_MODE_BUTTON_TEXT:"Exit",KIDS_EXIT_ENTER_PIN:"Is there an adult in the room? Please enter your PIN.",KIDS_SHOW_AVOD:"Show Free Content with Ads ",KIDS_REQ_PIN_PURCHASE:"Require PIN to Buy",KIDS_REQ_PIN_PLAYBACK:"Require PIN to Watch",KIDS_REQ_PIN_OPTIONAL:"Require PIN to Exit (Optional)",KIDS_REQ_PIN:"Require PIN to Exit",KIDS_AGE_LIMIT:"Age Limit",KIDS_SHOW_AVOD_SHOW:"Show",KIDS_SHOW_AVOD_HIDE:"Hide",KIDS_REQ_PIN_TO_EXIT_YES:"Yes",KIDS_REQ_PIN_TO_EXIT_NO:"No",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_OFF:"Off",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_ALL:"All",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_G:"G and above",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_FAMILY:"Family and above",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG:"PG and above",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG_13:"PG-13 and above",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_R:"R and above",KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_NOT_RATED:"NR and above",KIDS_AGE_LIMIT:"Age Limit",KIDS_AGE_LIMIT_NOT_SET:"Age Limit Not Set",KIDS_AGE_LIMIT_18:"18 years and below",KIDS_AGE_LIMIT_17:"17 years and below",KIDS_AGE_LIMIT_16:"16 years and below",KIDS_AGE_LIMIT_15:"15 years and below",KIDS_AGE_LIMIT_14:"14 years and below",KIDS_AGE_LIMIT_13:"13 years and below",KIDS_AGE_LIMIT_12:"12 years and below",KIDS_AGE_LIMIT_11:"11 years and below",KIDS_AGE_LIMIT_10:"10 years and below",KIDS_AGE_LIMIT_9:"9 years and below",KIDS_AGE_LIMIT_8:"8 years and below",KIDS_AGE_LIMIT_7:"7 years and below",KIDS_AGE_LIMIT_6:"6 years and below",KIDS_AGE_LIMIT_5:"5 years and below",KIDS_AGE_LIMIT_4:"4 years and below",KIDS_AGE_LIMIT_3:"3 years and below",KIDS_AGE_LIMIT_2:"2 years and below",KIDS_AGE_LIMIT_SETTING_12:"12 years and below",KIDS_AGE_LIMIT_SETTING_11:"11 years and below",KIDS_AGE_LIMIT_SETTING_10:"10 years and below",KIDS_AGE_LIMIT_SETTING_9:"9 years and below",KIDS_AGE_LIMIT_SETTING_8:"8 years and below",KIDS_AGE_LIMIT_SETTING_7:"7 years and below",KIDS_AGE_LIMIT_SETTING_6:"6 years and below",KIDS_AGE_LIMIT_SETTING_5:"5 years and below",KIDS_AGE_LIMIT_SETTING_4:"4 years and below",KIDS_AGE_LIMIT_SETTING_3:"3 years and below",KIDS_AGE_LIMIT_SETTING_2:"2 years and below",KIDS_SETTINGS_HINT:"Customize Kids Mode even more in Settings > Family Settings.",KIDS_AGE_AND_BELOW:"& below",FAM_BUY_WATCH_CONTROLS_HEADING:"Parental Controls",FAM_KM_HEADING:"Kids Mode",USER_COLLECTION_HEADING:"Lists",FAM_BUY_WATCH_CONTROLS_DESC:"Require PIN to buy or watch content based on rating.",FAM_PARENTAL_CONTROLS_PIN_REQUIRED:"To change settings, please enter your PIN.",FAM_KIDS_MODE_PIN_REQUIRED:"Enter PIN to change setting.",SA_LEARN_MORE:"Learn More",SA_LEARN_MORE:"Learn More",SA_INFO_SENT:"Thanks, more information has been emailed to you!",SA_ADD_TO_CART:"Add to Cart",SA_PRODUCT_ADDED:"Success! This item is now in your cart. Check out at Walmart.com or in the Walmart app.",SA_ADD_TO_CART_FAILED:"Unable To Add Item. This item could not be added to your cart. Please try again later.",SA_PREORDER:"Pre-Order",SA_BUY:"Buy",SA_HINT:"Press %s to",FP_SETTING_TITLE:"Family Play",FP_SETTING_TITLE_LUA:"Family Play (Beta)",FP_SETTING_HEADER:"Get more control and skip inappropriate scenes and mute dialogue while watching.",FP_SETTING_ON:"ON",FP_SETTING_OFF:"OFF",FP_SETTING_VALUE_ON:"On",FP_SETTING_VALUE_OFF:"Off",FP_SETTING_SKIP:"Skip",FP_SETTING_SEE:"See",FP_SETTING_HEAR:"Hear",FP_SETTING_MUTE:"Mute",FP_SETTING_YES:"Yes",FP_SETTING_NO:"No",FP_SET_OPTIONS:"Set Options",FP_SETTING_CATEGORIES_FPENABLED:"Family Play",FP_SETTING_CATEGORIES_FPENABLED_LUA:"Family Play (Beta)",FP_SETTINGS_REQUIRE_PIN_DESC:"A PIN is required to change settings.",FP_SETTINGS_REQUIRE_PIN_DESC_GRACE_PERIOD:"A PIN is required to change settings.\nOnce confirmed, we won't ask you to enter it again for 5 minutes.",FP_SETTING_CATEGORIES_NUDITY:"Sex/Nudity",FP_SETTING_CATEGORIES_VIOLENCE:"Violence",FP_SETTING_CATEGORIES_LANGUAGE:"Language",FP_SETTING_CATEGORIES_SUBSTANCE:"Substance Abuse",FP_SETTING_CATEGORIES_RESTRICT:"Require PIN to turn off \nFamily Play while watching",FP_SETTING_CATEGORIES_RESTRICT_1:"Require PIN to turn off",FP_SETTING_CATEGORIES_RESTRICT_2:"Family Play while watching",FP_SETTING_WITH_CLOSED_CAPTION:"Family Play does not currently hide objectionable language in Closed Captioning.",FP_SETTING_VIEWER_DISCRETION_NOTICE:"Family Play skips and mutes strong scenes of inappropriate content and language, but still may not represent your personal preferences. Viewer discretion is still advised.",FP_SETTING_VIEWER_DISCRETION_NOTICE_2:"Family Play skips and mutes strong scenes of inappropriate content and language,\nbut still may not represent your personal preferences. Viewer discretion is still advised.",FP_SETTING_DIALOG_PIN_REQUIRED:"Set / Change PIN",FP_THEATER_NOTICE_TITLE:"Family Play is Now On",FP_THEATER_NOTICE_TITLE_LUA:"Family Play (Beta) is Now On",FP_THEATER_NOTICE_DESC:"Playback of this title will be modified from its original version based on your settings.",FP_THEATER_NOTICE_OK:"OK",FP_THEATER_DIALOG_TURN_ON_TITLE:"Turn On Family Play",FP_THEATER_DIALOG_TURN_ON_TITLE_LUA:"Turn On Family Play (Beta)",FP_THEATER_DIALOG_TURN_ON_DESC1:"Family Play lets you skip past or mute strong scenes of sexuality, violence, substance abuse, and language.",FP_THEATER_DIALOG_TURN_ON_DESC2:"Manage parental and other preferences for Family Play in Settings > Family Settings.",FP_THEATER_DIALOG_TURN_ON_DESC3:"Manage parental and other preferences for\nFamily Play in Settings > Family Settings.",FP_THEATER_DIALOG_TURN_ON_LOCKED_DESC:"Currently, turning off Family Play is restricted. To disable, go to Settings > Family Settings.",FP_THEATER_DIALOG_TURN_ON_BUTTON_ON:"Turn On",FP_THEATER_DIALOG_TURN_ON_BUTTON_CANCEL:"Cancel",FP_THEATER_DIALOG_TURN_OFF_LOCKED_TITLE:"Family Play is Locked",FP_THEATER_DIALOG_TURN_OFF_LOCKED_DESC:"Turning off Family Play is restricted. \nTo disable, go to Settings > Family Settings",FP_THEATER_DIALOG_TURN_OFF_LOCKED_BUTTON_OK:"OK",FP_THEATER_DIALOG_TURN_OFF_LOCKED_BUTTON_TO_SETTINGS_1:"Settings",FP_THEATER_DIALOG_TURN_OFF_LOCKED_BUTTON_TO_SETTINGS:"Go to Settings",FP_THEATER_DIALOG_TURN_OFF_TITLE:"Turn Off Family Play",FP_THEATER_DIALOG_TURN_OFF_TITLE_LUA:"Turn Off Family Play (Beta)",FP_THEATER_DIALOG_TURN_OFF_DESC:"Playback will resume with original, non-modified version of the title.",FP_THEATER_DIALOG_TURN_OFF_BUTTON_OFF:"Turn Off",FP_THEATER_DIALOG_TURN_OFF_BUTTON_CANCEL:"Cancel",FP_THEATER_WITH_CLOSED_CAPTION:"Family Play does not currently hide objectionable language in Closed Captioning.",FP_THEATER_WITH_CLOSED_CAPTION_2:"Family Play does not currently hide\nobjectionable language in Closed Captioning.",DETAILS_FAMILY_PLAY_TITLE:"Watch with Family Play",DETAILS_FAMILY_PLAY_TITLE_LUA:"Watch with Family Play (Beta)",DETAILS_FAMILY_PLAY_DESC1:"Family Play lets you skip past or mute strong scenes of sexuality, violence, substance abuse, and language. Customize categories based on your preferences and turn them on or off at any time.",DETAILS_FAMILY_PLAY_DESC2:"You can turn on Family Play while you're watching. Manage your preferences in Family Settings.",DETAILS_FAMILY_PLAY_BY:"Powered by",FP_SETTINGS_INFO_DESC:"Look for the Family Play logo on\nmovie pages for eligibility.",SHOW_FREE_ONLY:"Show Free Only",USERLIB_SORT_LIST:"Sort List",USERLIB_MANAGE_LIST:"Manage List",USERLIB_CREATE_LIST:"New List",USERLIB_DELETE_LIST:"Delete List",USERLIB_RENAME_LIST:"Rename List",USERLIB_CUSTOM_NAME:"Custom Name",USERLIB_ADD_TO_LISTS:"Add to List(s)",USERLIB_EDIT_LIST:"Edit List",USERLIB_SUGGESTED_LIST_NAMES:"Suggested List Names:",USERLIB_DELETE_TEXT:"Owned title will remain in your account.",USERLIB_ADDED_TO_LIST:"This title has been added to your %s list.",USERLIB_ADDED_TO_LISTS:"This title has been added to your %s list and %d others.",USERLIB_MOVIE_DETAILS_ADD_TO_MYLIST_BUTTON:"Add to List",USERLIB_SORTBY_RELEASE_DATE:"Release Date",USERLIB_SORTBY_A_TO_Z:"A - Z",USERLIB_SORTBY_RECENTLY_ADDED:"Recently Added",USERLIB_SORTBY_CUSTOM_ORDER:"Custom Order",USERLIB_DELETE_BTN:"Delete",USERLIB_CANCEL_BTN:"Cancel",USERLIB_DONE_BTN:"Done",USERLIB_DELETE_DIALOG_TITLE:"Are you sure you want to delete this list?",USERLIB_DELETE_DIALOG_DESC:"Deleting lists does not remove movie or TV shows from your account.",USERLIB_NAME_YOUR_LIST:"Name Your List",USERLIB_CREATE_NEW_LIST:"Create New List",USERLIB_CREATE_BTN:"Create",USERLIB_SEARCH_BTN:"Search To Add",USERLIB_SAVE_BTN:"Save",USERLIB_EMPTY_LIST_CREATE_NEW:"Create a new list and start organizing movies and TV shows.",USERLIB_EMPTY_LIST_LABEL:"Add movies and TV shows to this list by selecting the + LIST button on any Movie or TV season page."};vui.strings.register("en",e)}(),VoiceControl.prototype.initialize=function(){for(var e in webapis.bixby.initialize(),this.actionHandler)webapis.bixby.setActionExecutionListener(e,this.onActionReceive.bind(this));console.log("Finished initializing Bixby module！")},VoiceControl.prototype.onActionReceive=function(e,t){var i,s=t.actionId||"";this.isValidAction(s)&&this.isInValidState(s)?i=this.actionHandler[s].call(this,t):(i=this.getFailureResponse(),console.log("Error: no action handler for this action, action_id: "+e,"error")),webapis.bixby.completeActionExecution(e,i)},VoiceControl.prototype.destroy=function(){if("object"==typeof webapis&&webapis&&webapis.bixby){for(var e in this.actionHandler)webapis.bixby.unsetActionExecutionListener(e);webapis.bixby.deinitialize(),console.log("Samsung Bixby - deinitialized")}else console.log("Error in deinitialize - webapis.bixby not found!","error")},VoiceControl.prototype.onContinueWatching=function(){return window.controller&&window.controller.enteredUI?controller.continueWatchingFromDeeplink():window.launchFromBixby=!0,this.getSuccessResponse()},VoiceControl.prototype.onTrackPrevious=function(){return vui.onClickSkipRW(),this.getSuccessResponse()},VoiceControl.prototype.onTrackNext=function(){return vui.onClickSkipFF(),this.getSuccessResponse()},VoiceControl.prototype.onRestart=function(){return vui.onVoiceControlSetPosition(0),this.getSuccessResponse()},VoiceControl.prototype.onSkipBackward=function(e){e=e||{};var t=1e3*Number(e.offset)||1e4;return"exception"===vui.onVoiceControlSkip(-t)?this.getExceptionResponse(this.EXCEPTION_SKIPBACKWARD_OFFSET_INVALID):this.getSuccessResponse()},VoiceControl.prototype.onSkipForward=function(e){e=e||{};var t=1e3*Number(e.offset)||1e4;return"exception"===vui.onVoiceControlSkip(t)?this.getExceptionResponse(this.EXCEPTION_SKIPFORWARD_OFFSET_INVALID):this.getSuccessResponse()},VoiceControl.prototype.onSetPlayPosition=function(e){e=e||{};var t=1e3*Number(e.position)||-1;return"exception"===vui.onVoiceControlSetPosition(t)?this.getExceptionResponse(this.EXCEPTION_SETPLAYPOSITION_POSITION_INVALID):this.getSuccessResponse()},VoiceControl.prototype.onSetSubtitle=function(e){var t="on"===(e=e||{}).toggle,i=this.getSuccessResponse();switch(vui.onVoiceControlSetSubtitle(t)){case"unsupported":i=this.getExceptionResponse(t?this.EXCEPTION_SETSUBTITLE_ON_UNSUPPORTED:this.EXCEPTION_SETSUBTITLE_OFF_UNSUPPORTED);break;case"onAlreadySet":i=this.getExceptionResponse(this.EXCEPTION_SETSUBTITLE_ON_ALREADY_SET);break;case"offAlreadySet":i=this.getExceptionResponse(this.EXCEPTION_SETSUBTITLE_OFF_ALREADY_SET)}return i},VoiceControl.prototype.isInValidState=function(e){return"tvMediaControl.ContinueWatching"===e||"Theater"===controller.baseLayer.currentTemplate},VoiceControl.prototype.isValidAction=function(e){return void 0!==this.actionHandler[e]},VoiceControl.prototype.getSuccessResponse=function(){return'{"result_code" : "SUCCESS"}'},VoiceControl.prototype.getFailureResponse=function(){return'{"result_code" : "FAILURE"}'},VoiceControl.prototype.getExceptionResponse=function(e){var t={result_code:"EXCEPTION",user_response:{responseSID:e}};return JSON.stringify(t)},vui.getVoiceControl=function(){var e=null;return function(){return"object"==typeof webapis&&webapis&&webapis.bixby&&webapis.bixby.initialize&&!e&&(e=new VoiceControl),e}}(),vui.getVoiceControl(),function(){window.vui=window.vui||{},window.isMaple=!1,window.alert=function(e){console.log(e)},VUDU_APP_ARGS.wmv&&(window.APPPROVIDER="walmart");var e,t;vui.USER_COUNTRY="US"!=(e=window.VUDU_APP_ARGS.country)&&"MX"==e?"mex":"usa",vui.REAL_USER_LANGUAGE=(t=window.VUDU_APP_ARGS.lang)&&"en"!=t?0===t.indexOf("es-")?"es":(alert("Language code "+t+" doesn't match what expect, just use 'en' instead"),"en"):"en","mex"===vui.USER_COUNTRY?vui.USER_LANGUAGE="es":vui.USER_LANGUAGE="en",window.globalVuduHardwareId="",window.globalVuduDeviceId="",window.getSystemInfoMoreInfo=function(){var e=VUDU.registry&&VUDU.registry.deviceId||"N.A.",t=null;vui.m&&vui.getModel().directorCsClient&&(t=vui.getModel().directorCsClient.getLightDeviceId()),t=t?parseInt(t).toString(16):"N.A.";var i=vui.getWidgetVersion(),s=vui.strings;return s.getText("SPLASH_HARDWARE_ID")+"&nbsp;&nbsp;&nbsp;"+e+"<br/>"+s.getText("SPLASH_DEVICE_ID")+"&nbsp;&nbsp;&nbsp;"+t+"&nbsp;&nbsp;&nbsp;, "+s.getText("SPLASH_SOFTWARE_BUILD")+"&nbsp;&nbsp;&nbsp;"+i},window.vuduHasUpdatedSplashScreen=!1,window.vuduServiceErrorHasOccurred=!1,window.vuduSplashScreenIsShowing=!1,window.vuduSplashScreenCallback=function(){},window.updateVuduSplashScreen=function(e,t,i,s,n,a){t=t||"",i=i||"",vui.gConnectionInstance&&t&&i&&vui._.setAriaLabel(t+". "+i),vui&&vui.strings&&t===vui.strings.getTransformedText("SPLASH_CONNECTING_DOT_DOT")&&vui._&&vui._.setAriaLabel&&vui._.setAriaLabel("connecting"),window.vuduHasUpdatedSplashScreen=!0,a?(window.vuduSplashScreenCallback=function(e){window.removeEventListener("keydown",window.vuduSplashScreenCallback),a(e)},window.addEventListener("keydown",window.vuduSplashScreenCallback)):(window.removeEventListener("keydown",window.vuduSplashScreenCallback),window.vuduSplashScreenCallback=function(){});var o=vui.strings;if(document.getElementById("splashDetailLabel").innerHTML=o.getText("SPLASH_DETAILS_COLON"),document.getElementById("splashInfoLabel").innerHTML=o.getText("SPLASH_MORE_INFO_COLON"),"splash"==e)for(var r=1;r<=4;r++)document.getElementById("splashPromo"+r).style.display="block";else"error"==e&&(window.vuduServiceErrorHasOccurred=!0);var l=document.getElementById("splashWhatHappened");t?(l.style.display="block",l.innerHTML=t):l.style.display="none";var u=document.getElementById("splashWhatNow");i?(u.style.display="block",u.innerHTML=i):u.style.display="none";var d=document.getElementById("splashDetailLabel"),c=document.getElementById("splashDetail");s?(d.style.display="block",c.style.display="block",c.innerHTML=s):(d.style.display="none",c.style.display="none");var h=document.getElementById("splashInfoLabel"),v=document.getElementById("splashInfo");n?(h.style.display="block",v.style.display="block",v.innerHTML=n):(h.style.display="none",v.style.display="none"),"none"==e?(window.vuduSplashScreenIsShowing=!1,document.getElementById("main").style.visibility="visible",document.getElementById("splash").style.visibility="hidden"):(window.vuduSplashScreenIsShowing=!0,document.getElementById("main").style.visibility="hidden",document.getElementById("splash").style.visibility="visible")},window.pluginCheckStatus="ok";window.vuduLoadingTimeoutId=setTimeout(function(){alert("CALLING LOADINGTIMOEOUT"),vui.networkHandler&&vui.networkHandler.destroy&&vui.networkHandler.destroy(),vui.connection&&vui.connection.destroy(),window.vuduHasUpdatedSplashScreen&&!window.vuduServiceErrorHasOccurred?(updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_PRESS_ANY_BUTTON"),"Connection Timeout",getSystemInfoMoreInfo(),function(){window.location.reload()}),alert("REACHED LOADING TIMEOUT, SHOW ERROR SCREEN")):alert("REACHED LOADING TIMEOUT, DO NOT UPDATE ERROR SCREEN")},12e4),window.tvKey=new Common.API.TVKeyValue,window.pluginAPI={},-1!==navigator.userAgent.indexOf("iPad")&&(window.isIpad=!0),window.unloadVuduApp=function(){alert("EMPTY UNLOAD VUDU APP")},vui.vvPlatform.isLightDevice&&(SCRIPT_SRC_URL="",VUDU_CDN_SERVER=SCRIPT_SRC_URL);function s(){try{var e=document.createElement("div");e.className="vudu_css_was_loaded",document.getElementById("main").appendChild(e);var t="none"===vui.getStyle(e,"display");document.getElementById("main").removeChild(e);return t}catch(e){alert(spewCaughtError(e,"checkCSS!"))}}var n=null,a=null;window.loadCSS=function(e){if(s())return alert("FOUND CSS LOADCSS"),void e(!0);var t=document.getElementsByTagName("head")[0],i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=VUDU_CDN_SERVER+"css/bundle.css",window.VUDU_APP_ARGS.debugcss&&("hd"===window.WIDGETRESOLUTION?i.href=VUDU_CDN_SERVER+"css/main.css":"hdx"===window.WIDGETRESOLUTION?i.href=VUDU_CDN_SERVER+"css/main_hdx.css":window.vui.vvPlatform.appFeatureEnabled()&&(i.href=VUDU_CDN_SERVER+"css/main_p34.css")),i.media="screen",t.appendChild(i),n&&(clearInterval(n),n=null),a&&(clearTimeout(a),a=null);n=setInterval(function(){s()&&(clearTimeout(a),a=null,clearInterval(n),e(!(n=null)))},100);a=setTimeout(function(){clearInterval(n),a=n=null,t.removeChild(i),e(!1)},3e4)},window.loadVuduApp=function(){var e=vui.strings.getText("SPLASH_CONNECTING_DOT_DOT");updateVuduSplashScreen("splash",e,null,null,null),console.debug("in load vudu app")}}(),function(){window.vui=window.vui||{},window.vui.ResDef_hdx={};var e=window.vui.ResDef_hdx;e.ONE=6,e.TWO=12,e.THREE=18,e.FOUR=24,e.FIVE=30,e.SCREEN_WIDTH=1920,e.SCREEN_HEIGHT=1080,e.POSTER_W=216,e.POSTER_BLOWUP_W=240,e.ANIM_DURATION=600,e.POSTER={},e.POSTER.PROMO_T=33,e.POSTER.PROMO_W=210,e.POSTER.PROMO_H=31,e.POSTER.BOTTOM_H=42,e.POSTER.BOTTOM_BLOWUP_H=42,e.POSTER.PROMO_W=30,e.widget={},e.widget.MENU_BUTTON_DEFAULT_W=390,e.widget.MENU_BUTTON_DEFAULT_H=60,e.widget.MENU_PANEL_DEFAULT_W=444,e.widget.MENU_PANEL_DEFAULT_H=705,e.widget.ACTION_BUTTON_DEFAULT_W=285,e.remoteOpening={},e.remoteOpening.ONE_LINE_TITLE_HEIGHT=63,e.remoteOpening.DESCRIPTION_TOP_1=438,e.remoteOpening.DESCRIPTION_TOP_2=498,e.home={},e.home.TAB_PADDING=15,e.home.TAB_HEIGHT=42,e.home.TAB_SEARCH_HEIGHT=42,e.home.TAB_ICON_WIDTH=42,e.home.TAB_SEARCH_ICON_WIDTH=159,e.home.TAB_ICON_PADDING=0,e.home.TAB_SEARCH_MARGIN_TOP=45,e.home.TAB_SETTING_HEIGHT=42,e.home.TAB_SETTING_MARGIN_TOP=60,e.movieInfoPanel={},e.movieInfoPanel.RATING_W=135,e.movieInfoPanel.RATING_4_5=136,e.movieInfoPanel.RATING_3_5=105,e.movieInfoPanel.RATING_2_5=75,e.movieInfoPanel.RATING_1_5=43,e.movieInfoPanel.RATING_0_5=13,e.movieDetails={},e.movieDetails.RATING_W=150,e.GridViewNew3={},e.GridViewNew3.POSTERGRID_LEFT=159,e.GridViewNew3.POSTERGRID_TOP=220,e.GridViewNew3.MOVIEINFOPANEL_L=1500,e.GridViewNew3.MOVIEINFOPANEL_T=180,e.GridViewNew3.SORTBAR_LEFT=30,e.GridViewNew3.SORTBAR_TOP=225,e.PosterGrid={},e.PosterGrid.SCROLLBAR_LEFT=1200,e.PosterGrid.SCROLLBAR_TOP=66,e.PosterGrid.POSTER_WIDTH=216,e.PosterGrid.POSTER_HEIGHT=306,e.PosterGrid.POSTER_IMG_H=183,e.PosterGrid.POSTER_BLOW_W=240,e.PosterGrid.POSTER_BLOW_H=342,e.PosterGrid.POSTER_BLOW_T=36,e.PosterGrid.POSTER_BLOW_L=48,e.PosterGrid.POSTER_OUTLINE_T=30,e.PosterGrid.POSTER_OUTLINE_L=42,e.PosterGrid.POSTER_GLOW_W=336,e.PosterGrid.POSTER_GLOW_H=420,e.PosterGrid.PAD_GLOW_W=96,e.PosterGrid.PAD_GLOW_H=78,e.PosterGrid.PAD_OUTLINE_W=6,e.PosterGrid.PAD_OUTLINE_H=6,e.PosterGrid.POSTER_GLOW_BG_T=6,e.PosterGrid.POSTER_EPISODE_OVERLAY_H=42,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_W=252,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_H=48,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_T=336,e.PosterGrid.SIMILAR_POSTER_W=216,e.PosterGrid.SIMILAR_POSTER_H=306,e.PosterGrid.SIMILAR_BLOWUP_POSTER_W=240,e.PosterGrid.SIMILAR_BLOWUP_POSTER_H=342,e.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_L=990,e.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_T=6,e.PosterGrid.POSTER_IMAGE_UPSCALEWIDTH=348,e.PosterGrid.PROMO_H=30,e.PosterGrid.PROMO_W=216,e.ScrollingGrid={},e.ScrollingGrid.ROW_HEIGHT=345,e.SortBar={},e.Theater={},e.Theater.TC_T=930,e.Theater.TC_L=0,e.Theater.TH_HEIGHT=144,e.Theater.TH_TOP=72,e.Theater.TH_LEFT=156,e.Theater.TH_SEAON_TOP=36,e.Theater.CHAPTER_T=162,e.Theater.CHAPTER_L=120,e.Theater.POPUP3D_T=690,e.Theater.POPUP3D_L=60,e.Theater.CLOSEDCAPTION_SCALE=1,e.Theater.CLOSEDCAPTION_FONTSIZE_SMALL=30,e.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM=48,e.Theater.CLOSEDCAPTION_FONTSIZE_LARGE=57,e.Theater.STRIPBG_W=1920,e.Theater.STRIPBG_H=441,e.Theater.STRIPBG_T=318,e.Theater.BUFFERING={},e.Theater.BUFFERING.ROOT_W=1920,e.Theater.BUFFERING.ROOT_H=1080,e.Theater.BUFFERING.IMG_T=111,e.Theater.BUFFERING.IMG_L=726,e.Theater.BUFFERING.IMG_W=465,e.Theater.BUFFERING.IMG_H=660,e.Theater.BUFFERING.MS_L=799,e.Theater.BUFFERING.MS_W=600,e.Theater.BUFFERING.MS_H=52,e.Theater.BUFFERING.SPINNER_W=54,e.Theater.BUFFERING.SPINNER_H=54,e.Theater.BUFFERING.AVOD_SPINNER_W=150,e.Theater.BUFFERING.AVOD_SPINNER_H=150,e.Theater.BUFFERING.SPINNER_T=808,e.Theater.BUFFERING.MS_L2=877,e.Theater.BUFFERING.PADDING=301,e.Theater.BUFFERING.BG_T=879,e.Theater.BUFFERING.TEXT_T=816,e.Theater.TH_DOLBY_T=72,e.Theater.TH_DOLBY_L=1446,e.Theater.TH_HB_T=66,e.Theater.TH_HB_L=1590,e.Theater.TH_HB_W=42,e.Theater.TH_HB_H=48,e.Theater.THUMB_T=360,e.Theater.THUMB0_L=0,e.Theater.THUMB2_L=1281,e.Theater.THUMB_W=654,e.Theater.THUMB_H=360,e.Theater.NEXT_EPI_BTN_H=54,e.TheaterControls={},e.TheaterControls.WIDTH=1920,e.TheaterControls.HEIGHT=150,e.TheaterControls.BTN_H=63,e.TheaterControls.BTN_TOP=12,e.TheaterControls.BTN_LEFT_BACK=30,e.TheaterControls.BTN_LEFT_QTY=30,e.TheaterControls.BTN_BACK_L=114,e.TheaterControls.BTN_BACK_T=30,e.TheaterControls.ICON_BACK_W=39,e.TheaterControls.ICON_BACK_H=30,e.TheaterControls.BTN_RW15_L=249,e.TheaterControls.BTN_RW15_T=36,e.TheaterControls.ICON_RW15_W=54,e.TheaterControls.ICON_RW15_H=54,e.TheaterControls.ICON_theaterBack_W=72,e.TheaterControls.ICON_theaterBack_H=72,e.TheaterControls.ICON_PULLUP_H=12,e.TheaterControls.BTN_QTY_W=120,e.TheaterControls.BTN_QTY_H=54,e.TheaterControls.BTN_QTY_L=360,e.TheaterControls.BTN_QTY_T=48,e.TheaterControls.BTN_QTY_PU_T=3,e.TheaterControls.BTN_QTY_PU_L=102,e.TheaterControls.BTN_FP_PU_T=7,e.TheaterControls.BTN_FP_PU_L=127,e.TheaterControls.ICON_QTY_W=96,e.TheaterControls.ICON_QTY_H=33,e.TheaterControls.ICON_QTY_H_P34=36,e.TheaterControls.MENU_QTY_T=0,e.TheaterControls.MENU_QTY_L=0,e.TheaterControls.MENU_QTY_W=165,e.TheaterControls.MENU_QTY_PAD_T=15,e.TheaterControls.MENU_QTY_PAD_B=3,e.TheaterControls.MENU_QTY_MARGINBOTTOM=15,e.TheaterControls.MENU_QTY_BTN_W=150,e.TheaterControls.MENU_QTY_BTN_H=48,e.TheaterControls.MENU_QTY_BAR_H=6,e.TheaterControls.MENU_CC_BTN_H=45,e.TheaterControls.MENU_CC_ICON_H=39,e.TheaterControls.MENU_CP_BTN_H=48,e.TheaterControls.MENU_CP_BTN_W=139,e.TheaterControls.BTN_CHAPTER_LEFT=546,e.TheaterControls.BTN_CHAPTER_TOP=48,e.TheaterControls.ICON_CHAPTER_WIDTH=135,e.TheaterControls.ICON_CHAPTER_HEIGHT=45,e.TheaterControls.BTN_RW_LEFT=768,e.TheaterControls.BTN_RW_TOP=36,e.TheaterControls.ICON_RW_WIDTH=78,e.TheaterControls.ICON_RW_HEIGHT=78,e.TheaterControls.BTN_PLAY_LEFT=936,e.TheaterControls.BTN_PLAY_TOP=36,e.TheaterControls.ICON_PLAY_WIDTH=78,e.TheaterControls.ICON_PLAY_HEIGHT=78,e.TheaterControls.BTN_FF_LEFT=1080,e.TheaterControls.BTN_FF_TOP=36,e.TheaterControls.ICON_FF_WIDTH=78,e.TheaterControls.ICON_FF_HEIGHT=78,e.TheaterControls.BTN_CC_L=1200,e.TheaterControls.BTN_CC_T=48,e.TheaterControls.ICON_CC_W=90,e.TheaterControls.ICON_CC_H=48,e.TheaterControls.ICON_CC_IMG_H=48,e.TheaterControls.SHOPPABLE_ADD_IMAGE_SIZE=120,e.TheaterControls.MODE_T=63,e.TheaterControls.MODE_L=1767,e.TheaterControls.TIMELINE_TEXT_T=60,e.TheaterControls.TIMELINE_TEXT_L=1476,e.TheaterControls.TIMELINE_TEXT_T_AD=991,e.TheaterControls.CURRENT_TIME_L=0,e.TheaterControls.TIMELINE_TEXT_SLASH_L=138,e.TheaterControls.TOTAL_TIME_L=168,e.TheaterControls.TL_HEIGHT=12,e.TheaterChapters={},e.TheaterChapters.THUMB_PAD=12,e.TheaterChapters.IMG_W=324,e.TheaterChapters.IMG_H=186,e.TheaterChapters.TXT_W=324,e.TheaterChapters.TXT_H=48,e.TheaterChapters.TXT_PAD=12,e.tabs={},e.tabs.OUTER_SUBTAB_CONTAINER_TOP=105,e.tabs.OUTER_SUBTAB_CONTAINER_LEFT=0,e.tabs.OUTER_SUBTAB_CONTAINER_HEIGHT=67,e.infoSettingsView={},e.infoSettingsView.RIGHT_MENU_L=450,e.infoSettingsView.MENU_BUTTON_EN_W=300,e.infoSettingsView.MENU_BUTTON_ES_W=300,e.infoSettingsView.MENU_BUTTON_EN_H=60,e.infoSettingsView.RIGHT_PANEL_HEADER_T=60,e.infoSettingsView.SYSTEM_INFO_TITLEPANEL_T=150,e.infoSettingsView.SYSTEM_INFO_TITLEPANEL_SPACING=60,e.infoSettingsView.CC_MENU_BUTTON_W=240,e.infoSettingsView.CC_MENU_BUTTON_H=54,e.infoSettingsView.CC_MENU_TABLE1_T=345,e.infoSettingsView.CC_MENU_TABLE2_T=495,e.infoSettingsView.CC_MENU_TABLE_L=0,e.infoSettingsView.CREDITS_T=150,e.infoSettingsView.CREDITS_H=90,e.infoSettingsView.CREDITS_SPACING=60,e.infoSettingsView.PC_MENU_BUTTON_W=324,e.infoSettingsView.PC_MENU_BUTTON_H=90,e.infoSettingsView.PC_SCROLLER_H=186,e.infoSettingsView.PC_SCROLLER_SPACING=3,e.infoSettingsView.PC_BUTTON_OFFSET=12,e.infoSettingsView.QUALITY_BUTTON_T=294,e.infoSettingsView.QUALITY_BUTTON_SPACING=66,e.myVuduView={},e.myVuduView.T=102,e.myVuduView.L=150,e.myVuduView.LOL_T=150,e.myVuduView.LOL_L=0,e.myVuduView.LOL_VISIBLE_H=900,e.myVuduView.LOL_ROW_H=390,e.myVuduView.LOL_ROW_HEADER_H=48,e.myVuduView.LOL_W=1338,e.myVuduView.RESUME_MP_L=1470,e.myVuduView.POSTER_W=240,e.myVuduView.POSTER_H=342,e.myVuduView.POSTER_BLOW_W=264,e.myVuduView.POSTER_BLOW_H=378,e.myVuduView.RESUME_RANGE=1770,e.myVuduView.RESUME_POSTER_PADDING=12,e.myVuduView.RESUME_POSTER_W=420,e.myVuduView.RESUME_POSTER_LEFT=75,e.myVuduView.RESUME_POSTER_TOP=15,e.myVuduView.RESUME_POSTER_H=306,e.myVuduView.RESUME_POSTER_IMG_W=216,e.myVuduView.RESUME_POSTER_IMG_UPSCALE_W=330,e.myVuduView.RESUME_POSTER_IMG_H=306,e.myVuduView.RESUME_PLAY_BTN_H=72,e.myVuduView.LOL_RESUME_ROW_H=372,e.myVuduView.VIEWALL_W=1290,e.myVuduView.VIEWALL_HEADER_H=42,e.myVuduView.VIEWALL_BODY_H=348,e.myVuduView.LOL_RESUME_ROW_HEADER_H=42,e.myVuduView.LOL_RESUME_ROW_BODY_H=306,e.myVuduView.LOL_RESUME_ROW_BODY_W=1320,e.myVuduView.CONTAINER_L=0,e.myVuduView.CONTAINER_SORT_L=129,e.myVuduView.CONTAINER_SORT_L_VUDU=204,e.myVuduView.CONTAINER_SORT_LIST_L=402,e.myVuduView.CONTAINER_SORT_LIST_L_VUDU=420,e.myVuduView.SORT_CONTAINER_H=48,e.myVuduView.SORT_OPTION_BTN_H=48,e.myVuduView.SORT_OPTION_BTN_W=255,e.myVuduView.SORT_CUE_H=48,e.myVuduView.COLLECTION_MINI_POSTER_W=105,e.myVuduView.COLLECTION_MINI_POSTER_H=147,e.myVuduView.COLLECTION_POSTER_W=423,e.myVuduView.COLLECTION_POSTER_H=306,e.myVuduView.COLLECTION_POSTER_IMG_UPSCALE_W=330,e.myVuduView.MY_COLLECTION_TIP_W=636,e.myVuduView.MY_COLLECTION_TIP_H=216,e.myVuduView.STAR_ICON_BUTTON_W=91,e.detailPage={},e.detailPage.POSTER_WIDTH=330,e.detailPage.SUBTAB_WIDTH=300,e.detailPage.SUBTAB_HEIGHT=66,e.detailPage.SUBTAB_HEIGHT_P34=61,e.detailPage.EXTRA_POSTER_WIDTH=187,e.detailPage.EXTRA_POSTER_HEIGHT=258,e.detailPage.ACTION_BUTTON_HEIGHT=60,e.detailPage.PRICING_PANEL_T_1=285,e.detailPage.PRICING_PANEL_T_2=354,e.detailPage.ANIMATION_DURATION=900,e.detailPage.OVERVIEW_SPACING=6,e.detailPage.OVERVIEW_TOP=96,e.detailPage.UV_ICON_TOP_SPACING=22,e.detailPage.UV_ICON_LEFT_TM=438,e.detailPage.UV_ICON_LEFT_WTM=252,e.detailPage.UV_ICON_RIGHT_SPACING=48,e.detailPage.BOTTOM_CONTAINER_TOP=102,e.detailPage.RIGHT_CONTAINER_HIDE_LEFT=0,e.detailPage.RIGHT_CONTAINER_SHOW_LEFT=642,e.detailPage.RIGHT_CONTAINER_HIDE_LEFT_HD_NONWEBKIT=360,e.detailPage.RIGHT_CONTAINER_SHOW_LEFT_HD_NONWEBKIT=1002,e.detailPage.RIGHT_CONTAINER_LEFT=1002,e.detailPage.RIGHT_CONTAINER_RIGHT=375,e.detailPage.ACTIOR_ITEM_BASE_WIDTH=427,e.detailPage.ACTIOR_ITEM_BASE_HEIGHT=156,e.detailPage.ACTIOR_ITEM_BASE_PADDING=12,e.detailPage.ACTIOR_ITEM_IMAGE_WIDTH=213,e.detailPage.SUMMARY_LINE_HEIGHT=40,e.detailPage.REVIEW_ITEM_BASE_WIDTH=438,e.detailPage.REVIEW_ITEM_BASE_HEIGHT=90,e.detailPage.REVIEW_ITEM_HIGHLIGHT_HEIGHT=330,e.detailPage.REVIEW_ITEM_LABEL_HEIGHT=90,e.detailPage.REVIEW_ITEM_PADDING_BOTTOM=24,e.detailPage.REVIEW_ITEM_COMMENT_HEIGHT=0,e.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT=27,e.detailPage.REVIEW_ITEM_COMMENT_LIMIT=300,e.detailPage.EPISODE_ITEM_BASE_WIDTH=660,e.detailPage.EPISODE_ITEM_BASE_HEIGHT=150,e.detailPage.SEASON_ITEM_BASE_WIDTH=810,e.detailPage.SEASON_ITEM_BASE_HEIGHT=306,e.detailPage.POSTER_W=507,e.detailPage.POSTER_BACKGROUND=330,e.detailPage.SEASON_ITEM_BASE_PADDING=18,e.detailPage.BOOKMARK_SHELL_WIDTH=540,e.detailPage.GRIDLIST_PADDING_RIGHT=12,e.detailPage.GRIDLIST_PADDING_BOTTOM=12,e.detailPage.PARENTAL_GUIDE_CIRCLE_W=21,e.detailPage.PARENTAL_GUIDE_CIRCLE_SPACING=9,e.detailPage.PROMO_TAG_H=36,e.detailPage.PROMO_TAG_W=330,e.detailPage.BUNDLE_LIST_START=12,e.detailPage.PROMO_ICON_PADDING=30,e.detailPage.DOLBYATMOS=120,e.detailPage.DOLBYVISIONLOGO=114,e.detailPage.DOLBYVISIONLOGOGREY=114,e.detailPage.HDR10_DETAILS_ENABLED=114,e.detailPage.HDR10_DETAILS_DISABLED=114,e.detailPage.UHDLOGO=36,e.detailPage.DOLBYDIGITALPLUS=120,e.detailPage.DOLBYDIGITAL=120,e.movieGridList={},e.movieGridList.PADDING_RIGHT=24,e.movieGridList.PADDING_BOTTOM=42,e.overlays={},e.overlays.QUALITY_ICON_HDX_WIDTH=78,e.overlays.QUALITY_ICON_SD_WIDTH=60,e.overlays.QUALITY_ICON_UHD_WIDTH=82,e.overlays.QUALITY_ICON_HD_WIDTH=60,e.overlays.QUALITY_ICON_SPACING=12,e.overlays.ITEMIZED_BILL_SPACING=42,e.overlays.OVERLAY_DIALOGUE_BUTTON_SPACING=66,e.overlays.BADNWIDTH_DIALOGUE_BUTTON_TOP=360,e.overlays.RATE_DIALOGUE_STAR_W=30,e.overlays.RATE_DIALOGUE_STAR_SPACE=6,e.overlays.RATE_DIALOGUE_LEFT=690,e.overlays.RATE_DIALOGUE_CLICK_SPACE=33,e.overlays.ADDRESS_CANCEL_LEFT=402,e.overlays.SCROLL_LENGTH=66,e.overlays.TOS_HEIGHT=15e3,e.overlays.SPINNER_H=150,e.overlays.SPINNER_W=150,e.explore={},e.explore.BAR_START_AT=156,e.explore.BAR_MARGIN=30,e.explore.BAR_START_END=1632,e.explore.SUB_BAR_START_AT=390,e.explore.SUB_BAR_START_END=1656,e.explore.CONTAINER_PADDING=0,e.explore.BAR_BTN_W=204,e.explore.BAR_BTN_H=144,e.explore.BAR_IMG_W=198,e.explore.BAR_IMG_H=144,e.explore.BAR_GNAME_T=78,e.explore.BAR_GNAME_H=60,e.explore.BAR_GNAME_S_T=78,e.explore.BAR_GNAME_S_H=60,e.explore.BAR_BLOW_W=216,e.explore.BAR_BLOW_H=156,e.explore.BAR_IMG_BLOW_W=210,e.explore.BAR_IMG_BLOW_H=150,e.explore.BAR_BLOW_SIGN_T=30,e.explore.BAR_BLOW_NO_SIGN_T=24,e.explore.BAR_BTN_MARGIN=6,e.explore.BAR_MARGIN_LEFT=0,e.explore.BAR_BTN_SIGN_H=48,e.explore.BAR_BTN_SIGN_T=30,e.explore.BAR_BTN_GNAME_H=60,e.explore.BAR_BTN_ARROW_W=60,e.explore.BTN_GENRE_L=120,e.explore.MP_ANNOUNCEMENT_W=330,e.explore.MP_PROMO_H=54,e.explore.MP_PROMO_W=330,e.recom={},e.recom.POSTER_W=216,e.recom.POSTER_H=306,e.recom.POSTER_ML=24,e.recom.ROW_W=1344,e.recom.ROW_H=420,e.recom.HEADER_H=70,e.recom.BODY_H=360,e.recom.MARGIN_T=30,e.recom.VISIBLE_H=900,e.collection={},e.collection.POSTERGRID_LEFT=159,e.collection.POSTERGRID_TOP=114,e.collection.MOVIEINFOPANEL_L=1500,e.collection.MOVIEINFOPANEL_T=72,e.collection.HEADER_L=279,e.collection.BAR_GNAME_T=72,e.collection.BAR_BLOW_SIGN_T=48,e.collection.BAR_START_AT=156,e.collection.BAR_START_END=1422,e.xOfY={},e.xOfY.CART_POSTER_W=145,e.lol={},e.lol.POSTER_POS_W=240,e.lol.POSTER_POS_DOUBLE_W=399,e.lol.POSTER_POS_START=126,e.lol.POSTER_W=216,e.lol.POSTER_H=306,e.lol.POSTER_BLOW_W=240,e.lol.POSTER_BLOW_H=342,e.lol.TRIPLE_POSTER_W=1173,e.lol.TRIPLE_POSTER_H=153,e.lol.TRIPLE_POSTER_IMAGE_W=1176,e.lol.TRIPLE_POSTER_BLOW_W=1200,e.lol.TRIPLE_POSTER_BLOW_H=165,e.lol.TRIPLE_POSTER_BLOW_PADDING_T=6,e.lol.TRIPLE_ROW_H=300,e.lol.TRIPLE_BODY_H=240,e.lol.DOUBLE_POSTER_W=375,e.lol.DOUBLE_POSTER_H=153,e.lol.DOUBLE_POSTER_IMAGE_W=375,e.lol.DOUBLE_POSTER_BLOW_W=399,e.lol.DOUBLE_POSTER_BLOW_H=165,e.lol.DOUBLE_POSTER_BLOW_PADDING_T=6,e.lol.DOUBLE_ROW_H=300,e.lol.DOUBLE_BODY_H=240,e.lol.SMALL_POSTER_W=198,e.lol.SMALL_POSTER_H=279,e.lol.SMALL_POSTER_BLOW_W=216,e.lol.SMALL_POSTER_BLOW_H=312,e.lol.SMALL_POSTER_BLOW_PADDING_T=15,e.lol.BANNER_POSTER_W=1173,e.lol.BANNER_POSTER_H=153,e.lol.BANNER_POSTER_IMAGE_W=1176,e.lol.BANNER_POSTER_BLOW_W=1200,e.lol.BANNER_POSTER_BLOW_H=165,e.lol.BANNER_POSTER_BLOW_PADDING_T=6,e.lol.BANNER_ROW_H=300,e.lol.BANNER_BODY_H=240,e.lol.PLACARD_POSTER_W=378,e.lol.PLACARD_POSTER_H=213,e.lol.PLACARD_POSTER_BLOW_W=396,e.lol.PLACARD_POSTER_BLOW_H=222,e.lol.PLACARD_POSTER_BLOW_PADDING_T=6,e.lol.PLACARD_ROW_H=300,e.lol.PLACARD_BODY_H=240,e.lol.LONG_POSTER_W=378,e.lol.LONG_POSTER_H=285,e.lol.LONG_POSTER_BLOW_W=396,e.lol.LONG_POSTER_BLOW_H=318,e.lol.LONG_POSTER_BLOW_PADDING_T=15,e.searchView={},e.searchView.MOVIEINFOPANEL_L=1308,e.searchView.MOVIEINFOPANEL_T=240,e.searchView.SUGGESTED_GRIDLIST_PADDING_BOTTOM=6,e.searchView.KEYPAD_BUTTON_TOP=54,e.searchView.KEYPAD_BUTTON_LEFT=54,e.searchView.SUGGESTED_POSTER_WIDTH=450,e.searchView.SUGGESTED_POSTER_HEIGHT=54,e.activation={},e.activation.SEARCH_KEPYAD_ROW_HEIGHT_SMALL=48,e.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL=54,e.activation.SEARCH_KEPYAD_ROW_HEIGHT_SPECIAL=60,e.activation.SEARCH_KEPYAD_SINGLE_KEY_WIDTH=48,e.activation.SEARCH_KEPYAD_KEY_PADDING=6,e.myoffers={},e.myoffers.OFFERCARD_W=817,e.myoffers.OFFERCARD_H=342,e.myoffers.OUTLINE_W=6,e.myoffers.PADDING_BOTTOM=18,e.mm={},e.mm.CART_POSTER_W=348,e.discovery={},e.discovery.POSTER_POS_W=222,e.discovery.POSTER_WIDTH=198,e.discovery.POSTER_HEIGHT=279,e.discovery.ROW_W=1440,e.discovery.ROW_H=360,e.discovery.HEADER_H=60,e.discovery.BODY_H=330,e.discovery.ROUTE_WIDGET_TOP=60,e.discovery.ROUTE_WIDGET_HEIGHT=66,e.discovery.ROUTE_WIDGET_WIDTH=306,e.discovery.ROUTE_WIDGET_RIGHT_PADDING=24,e.discovery.ROUTE_WIDGET_NAME_TOPPOS=60,e.discovery.ROUTE_WIDGET_START=0,e.discovery.GENE_WIDGET_HEIGHT=42,e.discovery.ROUTE_WIDGET_CONTAINER_HEIGHT=405,e.discovery.ROUTE_WIDGET_CONTAINER_TOP=474,e.discovery.MP_T=60,e.discovery.MP_L=1470,e.kidsMode={},e.kidsMode.RESUME_POSTER_W=402,e.kidsMode.RESUME_POSTER_H=306,e.kidsMode.RESUME_POSTER_IMG_W=201,e.kidsMode.RESUME_POSTER_IMG_H=282,e.kidsMode.RESUME_POSTER_IMG_UPSCALE_W=330,e.kidsMode.RESUME_POSTER_POSITION_W=420,e.kidsMode.ROW_W=1920,e.kidsMode.ROW_H=420,e.kidsMode.HEADER_H=60,e.kidsMode.BODY_H=360,e.kidsMode.EPISODE_POSTER_W=378,e.kidsMode.EPISODE_POSTER_H=292,e.kidsMode.EPISODE_POSTER_IMG_W=378,e.kidsMode.EPISODE_POSTER_IMG_H=213}(),function(){window.vui=window.vui||{},window.vui.ResDef_hd={};var e=window.vui.ResDef_hd;e.ONE=4,e.TWO=8,e.THREE=12,e.FOUR=16,e.FIVE=20,e.SCREEN_WIDTH=1280,e.SCREEN_HEIGHT=720,e.POSTER_W=144,e.POSTER_BLOWUP_W=160,e.ANIM_DURATION=400,e.POSTER={},e.POSTER.PROMO_T=22,e.POSTER.PROMO_W=140,e.POSTER.PROMO_H=21,e.POSTER.BOTTOM_H=28,e.POSTER.BOTTOM_BLOWUP_H=28,e.POSTER.PROMO_W=20,e.widget={},e.widget.MENU_BUTTON_DEFAULT_W=260,e.widget.MENU_BUTTON_DEFAULT_H=40,e.widget.MENU_PANEL_DEFAULT_W=296,e.widget.MENU_PANEL_DEFAULT_H=470,e.widget.ACTION_BUTTON_DEFAULT_W=190,e.remoteOpening={},e.remoteOpening.ONE_LINE_TITLE_HEIGHT=42,e.remoteOpening.DESCRIPTION_TOP_1=292,e.remoteOpening.DESCRIPTION_TOP_2=332,e.home={},e.home.TAB_PADDING=10,e.home.TAB_HEIGHT=28,e.home.TAB_SEARCH_HEIGHT=28,e.home.TAB_ICON_WIDTH=28,e.home.TAB_SEARCH_ICON_WIDTH=106,e.home.TAB_ICON_PADDING=0,e.home.TAB_SEARCH_MARGIN_TOP=30,e.home.TAB_SETTING_HEIGHT=28,e.home.TAB_SETTING_MARGIN_TOP=40,e.movieInfoPanel={},e.movieInfoPanel.RATING_W=90,e.movieInfoPanel.RATING_4_5=91,e.movieInfoPanel.RATING_3_5=70,e.movieInfoPanel.RATING_2_5=50,e.movieInfoPanel.RATING_1_5=29,e.movieInfoPanel.RATING_0_5=9,e.movieDetails={},e.movieDetails.RATING_W=100,e.GridViewNew3={},e.GridViewNew3.POSTERGRID_LEFT=106,e.GridViewNew3.POSTERGRID_TOP=147,e.GridViewNew3.MOVIEINFOPANEL_L=1e3,e.GridViewNew3.MOVIEINFOPANEL_T=120,e.GridViewNew3.SORTBAR_LEFT=20,e.GridViewNew3.SORTBAR_TOP=150,e.PosterGrid={},e.PosterGrid.SCROLLBAR_LEFT=800,e.PosterGrid.SCROLLBAR_TOP=44,e.PosterGrid.POSTER_WIDTH=144,e.PosterGrid.POSTER_HEIGHT=204,e.PosterGrid.POSTER_IMG_H=122,e.PosterGrid.POSTER_BLOW_W=160,e.PosterGrid.POSTER_BLOW_H=228,e.PosterGrid.POSTER_BLOW_T=24,e.PosterGrid.POSTER_BLOW_L=32,e.PosterGrid.POSTER_OUTLINE_T=20,e.PosterGrid.POSTER_OUTLINE_L=28,e.PosterGrid.POSTER_GLOW_W=224,e.PosterGrid.POSTER_GLOW_H=280,e.PosterGrid.PAD_GLOW_W=64,e.PosterGrid.PAD_GLOW_H=52,e.PosterGrid.PAD_OUTLINE_W=4,e.PosterGrid.PAD_OUTLINE_H=4,e.PosterGrid.POSTER_GLOW_BG_T=4,e.PosterGrid.POSTER_EPISODE_OVERLAY_H=28,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_W=168,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_H=32,e.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_T=224,e.PosterGrid.SIMILAR_POSTER_W=144,e.PosterGrid.SIMILAR_POSTER_H=204,e.PosterGrid.SIMILAR_BLOWUP_POSTER_W=160,e.PosterGrid.SIMILAR_BLOWUP_POSTER_H=228,e.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_L=660,e.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_T=4,e.PosterGrid.POSTER_IMAGE_UPSCALEWIDTH=232,e.PosterGrid.PROMO_H=20,e.PosterGrid.PROMO_W=144,e.ScrollingGrid={},e.ScrollingGrid.ROW_HEIGHT=230,e.SortBar={},e.Theater={},e.Theater.TC_T=620,e.Theater.TC_L=0,e.Theater.TH_HEIGHT=96,e.Theater.TH_TOP=48,e.Theater.TH_LEFT=104,e.Theater.TH_SEAON_TOP=24,e.Theater.CHAPTER_T=108,e.Theater.CHAPTER_L=80,e.Theater.POPUP3D_T=460,e.Theater.POPUP3D_L=40,e.Theater.CLOSEDCAPTION_SCALE=1,e.Theater.CLOSEDCAPTION_FONTSIZE_SMALL=20,e.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM=32,e.Theater.CLOSEDCAPTION_FONTSIZE_LARGE=38,e.Theater.STRIPBG_W=1280,e.Theater.STRIPBG_H=294,e.Theater.STRIPBG_T=212,e.Theater.BUFFERING={},e.Theater.BUFFERING.ROOT_W=1280,e.Theater.BUFFERING.ROOT_H=720,e.Theater.BUFFERING.IMG_T=74,e.Theater.BUFFERING.IMG_L=484,e.Theater.BUFFERING.IMG_W=310,e.Theater.BUFFERING.IMG_H=440,e.Theater.BUFFERING.MS_L=533,e.Theater.BUFFERING.MS_W=400,e.Theater.BUFFERING.MS_H=35,e.Theater.BUFFERING.SPINNER_W=36,e.Theater.BUFFERING.SPINNER_H=36,e.Theater.BUFFERING.AVOD_SPINNER_W=100,e.Theater.BUFFERING.AVOD_SPINNER_H=100,e.Theater.BUFFERING.SPINNER_T=539,e.Theater.BUFFERING.MS_L2=585,e.Theater.BUFFERING.PADDING=201,e.Theater.BUFFERING.BG_T=586,e.Theater.BUFFERING.TEXT_T=544,e.Theater.TH_DOLBY_T=48,e.Theater.TH_DOLBY_L=964,e.Theater.TH_HB_T=44,e.Theater.TH_HB_L=1060,e.Theater.TH_HB_W=28,e.Theater.TH_HB_H=32,e.Theater.THUMB_T=240,e.Theater.THUMB0_L=0,e.Theater.THUMB2_L=854,e.Theater.THUMB_W=436,e.Theater.THUMB_H=240,e.Theater.NEXT_EPI_BTN_H=36,e.TheaterControls={},e.TheaterControls.WIDTH=1280,e.TheaterControls.HEIGHT=100,e.TheaterControls.BTN_H=42,e.TheaterControls.BTN_TOP=8,e.TheaterControls.BTN_LEFT_BACK=20,e.TheaterControls.BTN_LEFT_QTY=20,e.TheaterControls.BTN_BACK_L=76,e.TheaterControls.BTN_BACK_T=20,e.TheaterControls.ICON_BACK_W=26,e.TheaterControls.ICON_BACK_H=20,e.TheaterControls.BTN_RW15_L=166,e.TheaterControls.BTN_RW15_T=24,e.TheaterControls.ICON_RW15_W=36,e.TheaterControls.ICON_RW15_H=36,e.TheaterControls.ICON_theaterBack_W=48,e.TheaterControls.ICON_theaterBack_H=48,e.TheaterControls.ICON_PULLUP_H=8,e.TheaterControls.BTN_QTY_W=80,e.TheaterControls.BTN_QTY_H=36,e.TheaterControls.BTN_QTY_L=240,e.TheaterControls.BTN_QTY_T=32,e.TheaterControls.BTN_QTY_PU_T=2,e.TheaterControls.BTN_QTY_PU_L=68,e.TheaterControls.BTN_FP_PU_T=5,e.TheaterControls.BTN_FP_PU_L=85,e.TheaterControls.ICON_QTY_W=64,e.TheaterControls.ICON_QTY_H=22,e.TheaterControls.ICON_QTY_H_P34=24,e.TheaterControls.MENU_QTY_T=0,e.TheaterControls.MENU_QTY_L=0,e.TheaterControls.MENU_QTY_W=110,e.TheaterControls.MENU_QTY_PAD_T=10,e.TheaterControls.MENU_QTY_PAD_B=2,e.TheaterControls.MENU_QTY_MARGINBOTTOM=10,e.TheaterControls.MENU_QTY_BTN_W=100,e.TheaterControls.MENU_QTY_BTN_H=32,e.TheaterControls.MENU_QTY_BAR_H=4,e.TheaterControls.MENU_CC_BTN_H=30,e.TheaterControls.MENU_CC_ICON_H=26,e.TheaterControls.MENU_CP_BTN_H=32,e.TheaterControls.MENU_CP_BTN_W=93,e.TheaterControls.BTN_CHAPTER_LEFT=364,e.TheaterControls.BTN_CHAPTER_TOP=32,e.TheaterControls.ICON_CHAPTER_WIDTH=90,e.TheaterControls.ICON_CHAPTER_HEIGHT=30,e.TheaterControls.BTN_RW_LEFT=512,e.TheaterControls.BTN_RW_TOP=24,e.TheaterControls.ICON_RW_WIDTH=52,e.TheaterControls.ICON_RW_HEIGHT=52,e.TheaterControls.BTN_PLAY_LEFT=624,e.TheaterControls.BTN_PLAY_TOP=24,e.TheaterControls.ICON_PLAY_WIDTH=52,e.TheaterControls.ICON_PLAY_HEIGHT=52,e.TheaterControls.BTN_FF_LEFT=720,e.TheaterControls.BTN_FF_TOP=24,e.TheaterControls.ICON_FF_WIDTH=52,e.TheaterControls.ICON_FF_HEIGHT=52,e.TheaterControls.BTN_CC_L=800,e.TheaterControls.BTN_CC_T=32,e.TheaterControls.ICON_CC_W=60,e.TheaterControls.ICON_CC_H=32,e.TheaterControls.ICON_CC_IMG_H=32,e.TheaterControls.SHOPPABLE_ADD_IMAGE_SIZE=80,e.TheaterControls.MODE_T=42,e.TheaterControls.MODE_L=1178,e.TheaterControls.TIMELINE_TEXT_T=40,e.TheaterControls.TIMELINE_TEXT_L=984,e.TheaterControls.TIMELINE_TEXT_T_AD=661,e.TheaterControls.CURRENT_TIME_L=0,e.TheaterControls.TIMELINE_TEXT_SLASH_L=92,e.TheaterControls.TOTAL_TIME_L=112,e.TheaterControls.TL_HEIGHT=8,e.TheaterChapters={},e.TheaterChapters.THUMB_PAD=8,e.TheaterChapters.IMG_W=216,e.TheaterChapters.IMG_H=124,e.TheaterChapters.TXT_W=216,e.TheaterChapters.TXT_H=32,e.TheaterChapters.TXT_PAD=8,e.tabs={},e.tabs.OUTER_SUBTAB_CONTAINER_TOP=70,e.tabs.OUTER_SUBTAB_CONTAINER_LEFT=0,e.tabs.OUTER_SUBTAB_CONTAINER_HEIGHT=45,e.infoSettingsView={},e.infoSettingsView.RIGHT_MENU_L=300,e.infoSettingsView.MENU_BUTTON_EN_W=200,e.infoSettingsView.MENU_BUTTON_ES_W=200,e.infoSettingsView.MENU_BUTTON_EN_H=40,e.infoSettingsView.RIGHT_PANEL_HEADER_T=40,e.infoSettingsView.SYSTEM_INFO_TITLEPANEL_T=100,e.infoSettingsView.SYSTEM_INFO_TITLEPANEL_SPACING=40,e.infoSettingsView.CC_MENU_BUTTON_W=160,e.infoSettingsView.CC_MENU_BUTTON_H=36,e.infoSettingsView.CC_MENU_TABLE1_T=230,e.infoSettingsView.CC_MENU_TABLE2_T=330,e.infoSettingsView.CC_MENU_TABLE_L=0,e.infoSettingsView.CREDITS_T=100,e.infoSettingsView.CREDITS_H=60,e.infoSettingsView.CREDITS_SPACING=40,e.infoSettingsView.PC_MENU_BUTTON_W=216,e.infoSettingsView.PC_MENU_BUTTON_H=60,e.infoSettingsView.PC_SCROLLER_H=124,e.infoSettingsView.PC_SCROLLER_SPACING=2,e.infoSettingsView.PC_BUTTON_OFFSET=8,e.infoSettingsView.QUALITY_BUTTON_T=196,e.infoSettingsView.QUALITY_BUTTON_SPACING=44,e.myVuduView={},e.myVuduView.T=68,e.myVuduView.L=100,e.myVuduView.LOL_T=100,e.myVuduView.LOL_L=0,e.myVuduView.LOL_VISIBLE_H=600,e.myVuduView.LOL_ROW_H=260,e.myVuduView.LOL_ROW_HEADER_H=32,e.myVuduView.LOL_W=892,e.myVuduView.RESUME_MP_L=980,e.myVuduView.POSTER_W=160,e.myVuduView.POSTER_H=228,e.myVuduView.POSTER_BLOW_W=176,e.myVuduView.POSTER_BLOW_H=252,e.myVuduView.RESUME_RANGE=1180,e.myVuduView.RESUME_POSTER_PADDING=8,e.myVuduView.RESUME_POSTER_W=280,e.myVuduView.RESUME_POSTER_LEFT=50,e.myVuduView.RESUME_POSTER_TOP=10,e.myVuduView.RESUME_POSTER_H=204,e.myVuduView.RESUME_POSTER_IMG_W=144,e.myVuduView.RESUME_POSTER_IMG_UPSCALE_W=220,e.myVuduView.RESUME_POSTER_IMG_H=204,e.myVuduView.RESUME_PLAY_BTN_H=48,e.myVuduView.LOL_RESUME_ROW_H=248,e.myVuduView.VIEWALL_W=860,e.myVuduView.VIEWALL_HEADER_H=28,e.myVuduView.VIEWALL_BODY_H=232,e.myVuduView.LOL_RESUME_ROW_HEADER_H=28,e.myVuduView.LOL_RESUME_ROW_BODY_H=204,e.myVuduView.LOL_RESUME_ROW_BODY_W=880,e.myVuduView.CONTAINER_L=0,e.myVuduView.CONTAINER_SORT_L=86,e.myVuduView.CONTAINER_SORT_L_VUDU=136,e.myVuduView.CONTAINER_SORT_LIST_L=268,e.myVuduView.CONTAINER_SORT_LIST_L_VUDU=280,e.myVuduView.SORT_CONTAINER_H=32,e.myVuduView.SORT_OPTION_BTN_H=32,e.myVuduView.SORT_OPTION_BTN_W=170,e.myVuduView.SORT_CUE_H=32,e.myVuduView.COLLECTION_MINI_POSTER_W=70,e.myVuduView.COLLECTION_MINI_POSTER_H=98,e.myVuduView.COLLECTION_POSTER_W=282,e.myVuduView.COLLECTION_POSTER_H=204,e.myVuduView.COLLECTION_POSTER_IMG_UPSCALE_W=220,e.myVuduView.MY_COLLECTION_TIP_W=424,e.myVuduView.MY_COLLECTION_TIP_H=144,e.myVuduView.STAR_ICON_BUTTON_W=61,e.detailPage={},e.detailPage.POSTER_WIDTH=220,e.detailPage.SUBTAB_WIDTH=200,e.detailPage.SUBTAB_HEIGHT=44,e.detailPage.SUBTAB_HEIGHT_P34=41,e.detailPage.EXTRA_POSTER_WIDTH=125,e.detailPage.EXTRA_POSTER_HEIGHT=172,e.detailPage.ACTION_BUTTON_HEIGHT=40,e.detailPage.PRICING_PANEL_T_1=190,e.detailPage.PRICING_PANEL_T_2=236,e.detailPage.ANIMATION_DURATION=600,e.detailPage.OVERVIEW_SPACING=4,e.detailPage.OVERVIEW_TOP=64,e.detailPage.UV_ICON_TOP_SPACING=15,e.detailPage.UV_ICON_LEFT_TM=292,e.detailPage.UV_ICON_LEFT_WTM=168,e.detailPage.UV_ICON_RIGHT_SPACING=32,e.detailPage.BOTTOM_CONTAINER_TOP=68,e.detailPage.RIGHT_CONTAINER_HIDE_LEFT=0,e.detailPage.RIGHT_CONTAINER_SHOW_LEFT=428,e.detailPage.RIGHT_CONTAINER_HIDE_LEFT_HD_NONWEBKIT=240,e.detailPage.RIGHT_CONTAINER_SHOW_LEFT_HD_NONWEBKIT=668,e.detailPage.RIGHT_CONTAINER_LEFT=668,e.detailPage.RIGHT_CONTAINER_RIGHT=250,e.detailPage.ACTIOR_ITEM_BASE_WIDTH=285,e.detailPage.ACTIOR_ITEM_BASE_HEIGHT=104,e.detailPage.ACTIOR_ITEM_BASE_PADDING=8,e.detailPage.ACTIOR_ITEM_IMAGE_WIDTH=142,e.detailPage.SUMMARY_LINE_HEIGHT=27,e.detailPage.REVIEW_ITEM_BASE_WIDTH=292,e.detailPage.REVIEW_ITEM_BASE_HEIGHT=60,e.detailPage.REVIEW_ITEM_HIGHLIGHT_HEIGHT=220,e.detailPage.REVIEW_ITEM_LABEL_HEIGHT=60,e.detailPage.REVIEW_ITEM_PADDING_BOTTOM=16,e.detailPage.REVIEW_ITEM_COMMENT_HEIGHT=0,e.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT=18,e.detailPage.REVIEW_ITEM_COMMENT_LIMIT=200,e.detailPage.EPISODE_ITEM_BASE_WIDTH=440,e.detailPage.EPISODE_ITEM_BASE_HEIGHT=100,e.detailPage.SEASON_ITEM_BASE_WIDTH=540,e.detailPage.SEASON_ITEM_BASE_HEIGHT=204,e.detailPage.POSTER_W=338,e.detailPage.POSTER_BACKGROUND=220,e.detailPage.SEASON_ITEM_BASE_PADDING=12,e.detailPage.BOOKMARK_SHELL_WIDTH=360,e.detailPage.GRIDLIST_PADDING_RIGHT=8,e.detailPage.GRIDLIST_PADDING_BOTTOM=8,e.detailPage.PARENTAL_GUIDE_CIRCLE_W=14,e.detailPage.PARENTAL_GUIDE_CIRCLE_SPACING=6,e.detailPage.PROMO_TAG_H=24,e.detailPage.PROMO_TAG_W=220,e.detailPage.BUNDLE_LIST_START=8,e.detailPage.PROMO_ICON_PADDING=20,e.detailPage.DOLBYATMOS=80,e.detailPage.DOLBYVISIONLOGO=76,e.detailPage.DOLBYVISIONLOGOGREY=76,e.detailPage.HDR10_DETAILS_ENABLED=76,e.detailPage.HDR10_DETAILS_DISABLED=76,e.detailPage.UHDLOGO=24,e.detailPage.DOLBYDIGITALPLUS=80,e.detailPage.DOLBYDIGITAL=80,e.movieGridList={},e.movieGridList.PADDING_RIGHT=16,e.movieGridList.PADDING_BOTTOM=28,e.overlays={},e.overlays.QUALITY_ICON_HDX_WIDTH=52,e.overlays.QUALITY_ICON_SD_WIDTH=40,e.overlays.QUALITY_ICON_UHD_WIDTH=55,e.overlays.QUALITY_ICON_HD_WIDTH=40,e.overlays.QUALITY_ICON_SPACING=8,e.overlays.ITEMIZED_BILL_SPACING=28,e.overlays.OVERLAY_DIALOGUE_BUTTON_SPACING=44,e.overlays.BADNWIDTH_DIALOGUE_BUTTON_TOP=240,e.overlays.RATE_DIALOGUE_STAR_W=20,e.overlays.RATE_DIALOGUE_STAR_SPACE=4,e.overlays.RATE_DIALOGUE_LEFT=460,e.overlays.RATE_DIALOGUE_CLICK_SPACE=22,e.overlays.ADDRESS_CANCEL_LEFT=268,e.overlays.SCROLL_LENGTH=44,e.overlays.TOS_HEIGHT=1e4,e.overlays.SPINNER_H=100,e.overlays.SPINNER_W=100,e.explore={},e.explore.BAR_START_AT=104,e.explore.BAR_MARGIN=20,e.explore.BAR_START_END=1088,e.explore.SUB_BAR_START_AT=260,e.explore.SUB_BAR_START_END=1104,e.explore.CONTAINER_PADDING=0,e.explore.BAR_BTN_W=136,e.explore.BAR_BTN_H=96,e.explore.BAR_IMG_W=132,e.explore.BAR_IMG_H=96,e.explore.BAR_GNAME_T=52,e.explore.BAR_GNAME_H=40,e.explore.BAR_GNAME_S_T=52,e.explore.BAR_GNAME_S_H=40,e.explore.BAR_BLOW_W=144,e.explore.BAR_BLOW_H=104,e.explore.BAR_IMG_BLOW_W=140,e.explore.BAR_IMG_BLOW_H=100,e.explore.BAR_BLOW_SIGN_T=20,e.explore.BAR_BLOW_NO_SIGN_T=16,e.explore.BAR_BTN_MARGIN=4,e.explore.BAR_MARGIN_LEFT=0,e.explore.BAR_BTN_SIGN_H=32,e.explore.BAR_BTN_SIGN_T=20,e.explore.BAR_BTN_GNAME_H=40,e.explore.BAR_BTN_ARROW_W=40,e.explore.BTN_GENRE_L=80,e.explore.MP_ANNOUNCEMENT_W=220,e.explore.MP_PROMO_H=36,e.explore.MP_PROMO_W=220,e.recom={},e.recom.POSTER_W=144,e.recom.POSTER_H=204,e.recom.POSTER_ML=16,e.recom.ROW_W=896,e.recom.ROW_H=280,e.recom.HEADER_H=47,e.recom.BODY_H=240,e.recom.MARGIN_T=20,e.recom.VISIBLE_H=600,e.collection={},e.collection.POSTERGRID_LEFT=106,e.collection.POSTERGRID_TOP=76,e.collection.MOVIEINFOPANEL_L=1e3,e.collection.MOVIEINFOPANEL_T=48,e.collection.HEADER_L=186,e.collection.BAR_GNAME_T=48,e.collection.BAR_BLOW_SIGN_T=32,e.collection.BAR_START_AT=104,e.collection.BAR_START_END=948,e.xOfY={},e.xOfY.CART_POSTER_W=97,e.lol={},e.lol.POSTER_POS_W=160,e.lol.POSTER_POS_DOUBLE_W=266,e.lol.POSTER_POS_START=84,e.lol.POSTER_W=144,e.lol.POSTER_H=204,e.lol.POSTER_BLOW_W=160,e.lol.POSTER_BLOW_H=228,e.lol.TRIPLE_POSTER_W=782,e.lol.TRIPLE_POSTER_H=102,e.lol.TRIPLE_POSTER_IMAGE_W=784,e.lol.TRIPLE_POSTER_BLOW_W=800,e.lol.TRIPLE_POSTER_BLOW_H=110,e.lol.TRIPLE_POSTER_BLOW_PADDING_T=4,e.lol.TRIPLE_ROW_H=200,e.lol.TRIPLE_BODY_H=160,e.lol.DOUBLE_POSTER_W=250,e.lol.DOUBLE_POSTER_H=102,e.lol.DOUBLE_POSTER_IMAGE_W=250,e.lol.DOUBLE_POSTER_BLOW_W=266,e.lol.DOUBLE_POSTER_BLOW_H=110,e.lol.DOUBLE_POSTER_BLOW_PADDING_T=4,e.lol.DOUBLE_ROW_H=200,e.lol.DOUBLE_BODY_H=160,e.lol.SMALL_POSTER_W=132,e.lol.SMALL_POSTER_H=186,e.lol.SMALL_POSTER_BLOW_W=144,e.lol.SMALL_POSTER_BLOW_H=208,e.lol.SMALL_POSTER_BLOW_PADDING_T=10,e.lol.BANNER_POSTER_W=782,e.lol.BANNER_POSTER_H=102,e.lol.BANNER_POSTER_IMAGE_W=784,e.lol.BANNER_POSTER_BLOW_W=800,e.lol.BANNER_POSTER_BLOW_H=110,e.lol.BANNER_POSTER_BLOW_PADDING_T=4,e.lol.BANNER_ROW_H=200,e.lol.BANNER_BODY_H=160,e.lol.PLACARD_POSTER_W=252,e.lol.PLACARD_POSTER_H=142,e.lol.PLACARD_POSTER_BLOW_W=264,e.lol.PLACARD_POSTER_BLOW_H=148,e.lol.PLACARD_POSTER_BLOW_PADDING_T=4,e.lol.PLACARD_ROW_H=200,e.lol.PLACARD_BODY_H=160,e.lol.LONG_POSTER_W=252,e.lol.LONG_POSTER_H=190,e.lol.LONG_POSTER_BLOW_W=264,e.lol.LONG_POSTER_BLOW_H=212,e.lol.LONG_POSTER_BLOW_PADDING_T=10,e.searchView={},e.searchView.MOVIEINFOPANEL_L=872,e.searchView.MOVIEINFOPANEL_T=160,e.searchView.SUGGESTED_GRIDLIST_PADDING_BOTTOM=4,e.searchView.KEYPAD_BUTTON_TOP=36,e.searchView.KEYPAD_BUTTON_LEFT=36,e.searchView.SUGGESTED_POSTER_WIDTH=300,e.searchView.SUGGESTED_POSTER_HEIGHT=36,e.activation={},e.activation.SEARCH_KEPYAD_ROW_HEIGHT_SMALL=32,e.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL=36,e.activation.SEARCH_KEPYAD_ROW_HEIGHT_SPECIAL=40,e.activation.SEARCH_KEPYAD_SINGLE_KEY_WIDTH=32,e.activation.SEARCH_KEPYAD_KEY_PADDING=4,e.myoffers={},e.myoffers.OFFERCARD_W=545,e.myoffers.OFFERCARD_H=228,e.myoffers.OUTLINE_W=4,e.myoffers.PADDING_BOTTOM=12,e.mm={},e.mm.CART_POSTER_W=232,e.discovery={},e.discovery.POSTER_POS_W=148,e.discovery.POSTER_WIDTH=132,e.discovery.POSTER_HEIGHT=186,e.discovery.ROW_W=960,e.discovery.ROW_H=240,e.discovery.HEADER_H=40,e.discovery.BODY_H=220,e.discovery.ROUTE_WIDGET_TOP=40,e.discovery.ROUTE_WIDGET_HEIGHT=44,e.discovery.ROUTE_WIDGET_WIDTH=204,e.discovery.ROUTE_WIDGET_RIGHT_PADDING=16,e.discovery.ROUTE_WIDGET_NAME_TOPPOS=40,e.discovery.ROUTE_WIDGET_START=0,e.discovery.GENE_WIDGET_HEIGHT=28,e.discovery.ROUTE_WIDGET_CONTAINER_HEIGHT=270,e.discovery.ROUTE_WIDGET_CONTAINER_TOP=316,e.discovery.MP_T=40,e.discovery.MP_L=980,e.kidsMode={},e.kidsMode.RESUME_POSTER_W=268,e.kidsMode.RESUME_POSTER_H=204,e.kidsMode.RESUME_POSTER_IMG_W=134,e.kidsMode.RESUME_POSTER_IMG_H=188,e.kidsMode.RESUME_POSTER_IMG_UPSCALE_W=220,e.kidsMode.RESUME_POSTER_POSITION_W=280,e.kidsMode.ROW_W=1280,e.kidsMode.ROW_H=280,e.kidsMode.HEADER_H=40,e.kidsMode.BODY_H=240,e.kidsMode.EPISODE_POSTER_W=252,e.kidsMode.EPISODE_POSTER_H=195,e.kidsMode.EPISODE_POSTER_IMG_W=252,e.kidsMode.EPISODE_POSTER_IMG_H=142}(),function(){window.vui=window.vui||{},window.vui.Theme_Vudu={};var e=window.vui.Theme_Vudu;e.primaryBackgroundColor="#041c2c",e.openingPitchBorder="4px solid #041c2c",e.activeForegroundColor="black",e.activeTabTextColor="#000",e.primaryDefaultTextColor="#FFF",e.primarySelectedTextColor="#000",e.primaryDefaultButtonColor="#007bc4",e.primarySelectedButtonColor="#FFFFFF",e.alternateSelectedButtonColor="#FFFFFF",e.activeTextColor="#d2d2d2",e.secondaryDefaultTextColor="#6d6d6d",e.discountColor="#ff8f02",e.activeBorder="2px solid #FFFFFF",e.invisibleBorder="2px solid transparent",e.activeWideBorder="4px solid #FFFFFF",e.activeVariableBorder="px solid #FFFFFF",e.actorItemBorder="1px solid #005A8F",e.poster={},e.poster.overlayBackgroundColor="rgb(0, 0, 0)",e.poster.transparentOverlayBackgroundColor="rgba(0, 0, 0, 0.7)",e.poster.overlayTextColor="#999",e.movieDetailsTabDefaultTextColor="#FFF",e.kidsMode={},e.kidsMode.activeWideBorder="4px solid #FFC220",e.kidsMode.invisibleBorder="4px solid transparent",e.kidsMode.scrubber="#007BC4",e.kidsMode.scrubberBg="#041C2C",e.kidsMode.activeBorderColor="#FFC220",e.kidsMode.chapterButtonColor="#023B44",e.darkDefaultButtonColor="#007BC4",e.scrubber="#007BC4",e.scrubberBg="#002841"}(),function(){window.vui=window.vui||{},window.vui.Theme_Vudu=window.vui.Theme_Vudu||{},window.vui.Theme_WMV=Object.create(vui.Theme_Vudu);var e=window.vui.Theme_WMV;e.primaryBackgroundColor="#041E42",e.openingPitchBorder="4px solid #041E42",e.activeForegroundColor="white",e.activeTabTextColor="white",e.primaryDefaultTextColor="#FFF",e.primarySelectedTextColor="#FFF",e.primaryDefaultButtonColor="#0065FF",e.darkDefaultButtonColor="#041E42",e.primarySelectedButtonColor="#CB2C90",e.alternateSelectedButtonColor="#5C1442",e.activeTextColor="#d2d2d2",e.secondaryDefaultTextColor="#6d6d6d",e.discountColor="#ff8f02",e.activeBorder="2px solid #CB2C90",e.activeWideBorder="4px solid #CB2C90",e.activeVariableBorder="px solid #CB2C90",e.actorItemBorder="2px solid transparent",e.poster={},e.poster.overlayBackgroundColor="rgb(0, 0, 0)",e.poster.transparentOverlayBackgroundColor="rgba(0, 0, 0, 0.7)",e.poster.overlayTextColor="#999",e.movieDetailsTabDefaultTextColor="#B0BEC5",e.kidsMode={},e.kidsMode.activeWideBorder="4px solid #FFC220",e.kidsMode.invisibleBorder="4px solid transparent",e.kidsMode.scrubber="#0065FF",e.kidsMode.scrubberBg="#4E0FC5",e.scrubber="#0065FF",e.scrubberBg="#163257"}(),window.vui=window.vui||{},window.vui.ResDef={},window.vui.Theme={},window.WIDGETRESOLUTION&&"hd"==window.WIDGETRESOLUTION?window.vui.ResDef=window.vui.ResDef_hd:window.vui.ResDef=window.vui.ResDef_hdx,window.vui.vvPlatform.appFeatureEnabled()?window.vui.Theme=window.vui.Theme_WMV:window.vui.Theme=window.vui.Theme_Vudu;var vui=window.vui||{};vui.NetLogLocal={log:function(e){var t;void 0===this.logServerAddress&&vui.account&&vui.account.getLabels()&&(vui.account.getLabels().logServerAddress?this.logServerAddress="http://"+vui.account.getLabels().logServerAddress:this.logServerAddress=null),this.logServerAddress&&((t=new XMLHttpRequest).open("POST",this.logServerAddress,!0),t.onerror=function(){},t.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),t.send(e))}},MooTools.More={version:"1.2.5.1",build:"254884f2b83651bf95260eed5c6cceb838e22d8e"},function(){function e(){if(i.console&&console.log)try{console.log.apply(console,arguments)}catch(e){console.log(Array.slice(arguments))}else Log.logged.push(arguments);return this}function t(){return this.logged.push(arguments),this}var i=this;this.Log=new Class({logged:[],log:t,resetLog:function(){return this.logged.empty(),this},enableLog:function(){return this.log=e,this.logged.each(function(e){this.log.apply(this,e)},this),this.resetLog()},disableLog:function(){return this.log=t,this}}),Log.extend(new Log).enableLog(),Log.logger=function(){return this.log.apply(this,arguments)}}(),Request.JSONP=new Class({Implements:[Chain,Events,Options,Log],options:{url:"",data:{},retries:0,timeout:0,link:"ignore",callbackKey:"callback",injectScript:document.head},initialize:function(e){this.setOptions(e),this.options.log&&this.enableLog(),this.running=!1,this.requests=0,this.triesRemaining=[]},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.bind(this,arguments)),!1}return!1},send:function(t){if(!$chk(arguments[1])&&!this.check(t))return this;var e=$type(t),i=this.options,s=$chk(arguments[1])?arguments[1]:this.requests++;"string"!=e&&"element"!=e||(t={data:t}),t=$extend({data:i.data,url:i.url},t),$chk(this.triesRemaining[s])||(this.triesRemaining[s]=this.options.retries);var n=this.triesRemaining[s];return function(){var e=this.getScript(t);this.fireEvent("request",e),this.running=!0,function(){n?(this.triesRemaining[s]=n-1,e&&(this.log("Retrying retrieving script with url: "+getPrintableGETRequest(e.get("src"))),e.destroy(),this.send(t,s).fireEvent("retry",this.triesRemaining[s]))):this.running&&e&&this.options.timeout&&(this.log("Timeout retrieving script with url: "+getPrintableGETRequest(e.get("src"))),e.destroy(),this.cancel().fireEvent("failure"))}.delay(this.options.timeout,this)}.delay(Browser.Engine.trident?50:0,this),this},cancel:function(){return this.running&&(this.running=!1,this.fireEvent("cancel")),this},getScript:function(e){var t,i=Request.JSONP.counter;switch(Request.JSONP.counter++,$type(e.data)){case"element":t=document.id(e.data).toQueryString();break;case"object":case"hash":t=Hash.toQueryString(e.data)}var s=e.url+(e.url.test("\\?")?"&":"?")+(e.callbackKey||this.options.callbackKey)+"=Request.JSONP.request_map.request_"+i+(t?"&"+t:"");2083<s.length&&this.log("JSONP "+s+" will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs");var n=new Element("script",{type:"text/javascript",src:s});return Request.JSONP.request_map["request_"+i]=function(){this.success(arguments,n,i)}.bind(this),n.inject(this.options.injectScript)},success:function(e,t,i){if(!this.running)return!1;t&&t.destroy(),this.running=!1,this.fireEvent("complete",e).fireEvent("success",e).callChain(),delete Request.JSONP.request_map["request_"+i]}}),Request.JSONP.counter=0,Request.JSONP.request_map={},function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=e()}(function(){return function a(o,r,l){function u(i,e){if(!r[i]){if(!o[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(d)return d(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var n=r[i]={exports:{}};o[i][0].call(n.exports,function(e){var t=o[i][1][e];return u(t||e)},n,n.exports,a,o,r,l)}return r[i].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,i){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,s,n){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+s),n);else for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){for(var t,i,s,n=0,a=0,o=e.length;a<o;a++)n+=e[a].length;for(s=new Uint8Array(n),a=t=0,o=e.length;a<o;a++)i=e[a],s.set(i,t),t+=i.length;return s}},a={arraySet:function(e,t,i,s,n){for(var a=0;a<s;a++)e[n+a]=t[i+a]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],2:[function(e,t,i){"use strict";function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var i="",s=0;s<t;s++)i+=String.fromCharCode(e[s]);return i}var u=e("./common"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var d=new u.Buf8(256),s=0;s<256;s++)d[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;d[254]=d[254]=1,i.string2buf=function(e){for(var t,i,s,n,a=e.length,o=0,r=0;r<a;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&(56320==(64512&(s=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(s-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new u.Buf8(o),r=n=0;n<o;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&(56320==(64512&(s=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(s-56320),r++)),i<128?t[n++]=i:(i<2048?t[n++]=192|i>>>6:(i<65536?t[n++]=224|i>>>12:(t[n++]=240|i>>>18,t[n++]=128|i>>>12&63),t[n++]=128|i>>>6&63),t[n++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new u.Buf8(e.length),i=0,s=t.length;i<s;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){for(var i,s,n=t||e.length,a=new Array(2*n),o=0,r=0;r<n;)if((i=e[r++])<128)a[o++]=i;else if(4<(s=d[i]))a[o++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<n;)i=i<<6|63&e[r++],s--;1<s?a[o++]=65533:i<65536?a[o++]=i:(i-=65536,a[o++]=55296|i>>10&1023,a[o++]=56320|1023&i)}return l(a,o)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+d[e[i]]>t?i:t}},{"./common":1}],3:[function(e,t,i){"use strict";t.exports=function(e,t,i,s){for(var n=65535&e|0,a=e>>>16&65535|0,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;a=a+(n=n+t[s++]|0)|0,--o;);n%=65521,a%=65521}return n|a<<16|0}},{}],4:[function(e,t,i){"use strict";var r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,s){var n=r,a=s+i;e^=-1;for(var o=s;o<a;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}},{}],5:[function(e,t,i){"use strict";function l(e,t){return e.msg=C[t],t}function u(e){return(e<<1)-(4<e?9:0)}function c(e){for(var t=e.length;0<=--t;)e[t]=0}function d(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(f.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function h(e,t){E._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,d(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function m(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function a(e,t){var i,s,n=e.max_chain_length,a=e.strstart,o=e.prev_length,r=e.nice_match,l=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,u=e.window,d=e.w_mask,c=e.prev,h=e.strstart+G,v=u[a+o-1],m=u[a+o];e.prev_length>=e.good_match&&(n>>=2),r>e.lookahead&&(r=e.lookahead);do{if(u[(i=t)+o]===m&&u[i+o-1]===v&&u[i]===u[a]&&u[++i]===u[a+1]){a+=2,i++;do{}while(u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&u[++a]===u[++i]&&a<h);if(s=G-(h-a),a=h-G,o<s){if(e.match_start=t,r<=(o=s))break;v=u[a+o-1],m=u[a+o]}}}while((t=c[t&d])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead}function g(e){var t,i,s,n,a,o,r,l,u,d,c=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=c+(c-F)){for(f.arraySet(e.window,e.window,c,c,0),e.match_start-=c,e.strstart-=c,e.block_start-=c,t=i=e.hash_size;s=e.head[--t],e.head[t]=c<=s?s-c:0,--i;);for(t=i=c;s=e.prev[--t],e.prev[t]=c<=s?s-c:0,--i;);n+=c}if(0===e.strm.avail_in)break;if(o=e.strm,r=e.window,l=e.strstart+e.lookahead,u=n,d=void 0,d=o.avail_in,u<d&&(d=u),i=0===d?0:(o.avail_in-=d,f.arraySet(r,o.input,o.next_in,d,l),1===o.state.wrap?o.adler=S(o.adler,r,d,l):2===o.state.wrap&&(o.adler=I(o.adler,r,d,l)),o.next_in+=d,o.total_in+=d,d),e.lookahead+=i,e.lookahead+e.insert>=U)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+U-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<U)););}while(e.lookahead<F&&0!==e.strm.avail_in)}function s(e,t){for(var i,s;;){if(e.lookahead<F){if(g(e),e.lookahead<F&&t===y)return W;if(0===e.lookahead)break}if(i=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-F&&(e.match_length=a(e,i)),e.match_length>=U)if(s=E._tr_tally(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(h(e,!1),0===e.strm.avail_out))return W}return e.insert=e.strstart<U-1?e.strstart:U-1,t===w?(h(e,!0),0===e.strm.avail_out?K:q):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?W:Y}function n(e,t){for(var i,s,n;;){if(e.lookahead<F){if(g(e),e.lookahead<F&&t===y)return W;if(0===e.lookahead)break}if(i=0,e.lookahead>=U&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-F&&(e.match_length=a(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===U&&4096<e.strstart-e.match_start)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-U,s=E._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+U-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=U-1,e.strstart++,s&&(h(e,!1),0===e.strm.avail_out))return W}else if(e.match_available){if((s=E._tr_tally(e,0,e.window[e.strstart-1]))&&h(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return W}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=E._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,t===w?(h(e,!0),0===e.strm.avail_out?K:q):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?W:Y}function o(e,t,i,s,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=s,this.func=n}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*k),this.dyn_dtree=new f.Buf16(2*(2*M+1)),this.bl_tree=new f.Buf16(2*(2*x+1)),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(B+1),this.heap=new f.Buf16(2*L+1),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*L+1),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function r(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=N,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?H:V,e.adler=2===t.wrap?0:1,t.last_flush=y,E._tr_init(t),A):l(e,O)}function p(e){var t,i=r(e);return i===A&&((t=e.state).window_size=2*t.w_size,c(t.head),t.max_lazy_match=z[t.level].max_lazy,t.good_match=z[t.level].good_length,t.nice_match=z[t.level].nice_length,t.max_chain_length=z[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=U-1,t.match_available=0,t.ins_h=0),i}function T(e,t,i,s,n,a){if(!e)return O;var o=1;if(t===b&&(t=6),s<0?(o=0,s=-s):15<s&&(o=2,s-=16),n<1||D<n||i!==R||s<8||15<s||t<0||9<t||a<0||P<a)return l(e,O);8===s&&(s=9);var r=new _;return(e.state=r).strm=e,r.wrap=o,r.gzhead=null,r.w_bits=s,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=n+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+U-1)/U),r.window=new f.Buf8(2*r.w_size),r.head=new f.Buf16(r.hash_size),r.prev=new f.Buf16(r.w_size),r.lit_bufsize=1<<n+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new f.Buf8(r.pending_buf_size),r.d_buf=+r.lit_bufsize,r.l_buf=3*r.lit_bufsize,r.level=t,r.strategy=a,r.method=i,p(e)}var f=e("../utils/common"),E=e("./trees"),S=e("./adler32"),I=e("./crc32"),C=e("./messages"),y=0,w=4,A=0,O=-2,b=-1,P=4,N=2,R=8,D=9,L=286,M=30,x=19,k=2*L+1,B=15,U=3,G=258,F=G+U+1,H=42,V=113,W=1,Y=2,K=3,q=4,z=[new o(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(g(e),0===e.lookahead&&t===y)return W;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+i;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,h(e,!1),0===e.strm.avail_out))return W;if(e.strstart-e.block_start>=e.w_size-F&&(h(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===w?(h(e,!0),0===e.strm.avail_out?K:q):(e.strstart>e.block_start&&(h(e,!1),e.strm.avail_out),W)}),new o(4,4,8,4,s),new o(4,5,16,8,s),new o(4,6,32,32,s),new o(4,4,16,16,n),new o(8,16,32,32,n),new o(8,16,128,128,n),new o(8,32,128,256,n),new o(32,128,258,1024,n),new o(32,258,258,4096,n)];i.deflateInit=function(e,t){return T(e,t,R,15,8,0)},i.deflateInit2=T,i.deflateReset=p,i.deflateResetKeep=r,i.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?O:(e.state.gzhead=t,A)},i.deflate=function(e,t){var i,s,n,a,o;if(!e||!e.state||5<t||t<0)return e?l(e,O):O;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&t!==w)return l(e,0===e.avail_out?-5:O);if(s.strm=e,i=s.last_flush,s.last_flush=t,s.status===H&&(2===s.wrap?(e.adler=0,v(s,31),v(s,139),v(s,8),s.gzhead?(v(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),v(s,255&s.gzhead.time),v(s,s.gzhead.time>>8&255),v(s,s.gzhead.time>>16&255),v(s,s.gzhead.time>>24&255),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(v(s,255&s.gzhead.extra.length),v(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=I(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(v(s,0),v(s,0),v(s,0),v(s,0),v(s,0),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,3),s.status=V)):(o=R+(s.w_bits-8<<4)<<8,o|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(o|=32),o+=31-o%31,s.status=V,m(s,o),0!==s.strstart&&(m(s,e.adler>>>16),m(s,65535&e.adler)),e.adler=1)),69===s.status)if(s.gzhead.extra){for(n=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),d(e),n=s.pending,s.pending!==s.pending_buf_size));)v(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),d(e),n=s.pending,s.pending===s.pending_buf_size)){a=1;break}a=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,v(s,a)}while(0!==a);s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),0===a&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),d(e),n=s.pending,s.pending===s.pending_buf_size)){a=1;break}a=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,v(s,a)}while(0!==a);s.gzhead.hcrc&&s.pending>n&&(e.adler=I(e.adler,s.pending_buf,s.pending-n,n)),0===a&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&d(e),s.pending+2<=s.pending_buf_size&&(v(s,255&e.adler),v(s,e.adler>>8&255),e.adler=0,s.status=V)):s.status=V),0!==s.pending){if(d(e),0===e.avail_out)return s.last_flush=-1,A}else if(0===e.avail_in&&u(t)<=u(i)&&t!==w)return l(e,-5);if(666===s.status&&0!==e.avail_in)return l(e,-5);if(0!==e.avail_in||0!==s.lookahead||t!==y&&666!==s.status){var r=2===s.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(g(e),0===e.lookahead)){if(t===y)return W;break}if(e.match_length=0,i=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(h(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===w?(h(e,!0),0===e.strm.avail_out?K:q):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?W:Y}(s,t):3===s.strategy?function(e,t){for(var i,s,n,a,o=e.window;;){if(e.lookahead<=G){if(g(e),e.lookahead<=G&&t===y)return W;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=U&&0<e.strstart&&((s=o[n=e.strstart-1])===o[++n]&&s===o[++n]&&s===o[++n])){a=e.strstart+G;do{}while(s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&s===o[++n]&&n<a);e.match_length=G-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(i=E._tr_tally(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=E._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(h(e,!1),0===e.strm.avail_out))return W}return e.insert=0,t===w?(h(e,!0),0===e.strm.avail_out?K:q):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?W:Y}(s,t):z[s.level].func(s,t);if(r!==K&&r!==q||(s.status=666),r===W||r===K)return 0===e.avail_out&&(s.last_flush=-1),A;if(r===Y&&(1===t?E._tr_align(s):5!==t&&(E._tr_stored_block(s,0,0,!1),3===t&&(c(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),d(e),0===e.avail_out))return s.last_flush=-1,A}return t!==w?A:s.wrap<=0?1:(2===s.wrap?(v(s,255&e.adler),v(s,e.adler>>8&255),v(s,e.adler>>16&255),v(s,e.adler>>24&255),v(s,255&e.total_in),v(s,e.total_in>>8&255),v(s,e.total_in>>16&255),v(s,e.total_in>>24&255)):(m(s,e.adler>>>16),m(s,65535&e.adler)),d(e),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?A:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==H&&69!==t&&73!==t&&91!==t&&103!==t&&t!==V&&666!==t?l(e,O):(e.state=null,t===V?l(e,-3):A):O},i.deflateSetDictionary=function(e,t){var i,s,n,a,o,r,l,u,d=t.length;if(!e||!e.state)return O;if(2===(a=(i=e.state).wrap)||1===a&&i.status!==H||i.lookahead)return O;for(1===a&&(e.adler=S(e.adler,t,d,0)),i.wrap=0,d>=i.w_size&&(0===a&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new f.Buf8(i.w_size),f.arraySet(u,t,d-i.w_size,i.w_size,0),t=u,d=i.w_size),o=e.avail_in,r=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,g(i);i.lookahead>=U;){for(s=i.strstart,n=i.lookahead-(U-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[s+U-1])&i.hash_mask,i.prev[s&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=s,s++,--n;);i.strstart=s,i.lookahead=U-1,g(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=U-1,i.match_available=0,e.next_in=r,e.input=l,e.avail_in=o,i.wrap=a,A},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,i){"use strict";function s(e){for(var t=e.length;0<=--t;)e[t]=0}function o(e,t,i,s,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=s,this.max_length=n,this.has_stree=e&&e.length}function n(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function l(e){return e<256?Y[e]:Y[256+(e>>>7)]}function u(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function d(e,t,i){e.bi_valid>D-i?(e.bi_buf|=t<<e.bi_valid&65535,u(e,e.bi_buf),e.bi_buf=t>>D-e.bi_valid,e.bi_valid+=i-D):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function c(e,t,i){d(e,i[2*t],i[2*t+1])}function h(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function v(e,t,i){for(var s,n=new Array(R+1),a=0,o=1;o<=R;o++)n[o]=a=a+i[o-1]<<1;for(s=0;s<=t;s++){var r=e[2*s+1];0!==r&&(e[2*s]=h(n[r]++,r))}}function r(e){for(var t=0;t<O;t++)e.dyn_ltree[2*t]=0;for(t=0;t<b;t++)e.dyn_dtree[2*t]=0;for(t=0;t<P;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*M]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){8<e.bi_valid?u(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function a(e,t,i,s){var n=2*t,a=2*i;return e[n]<e[a]||e[n]===e[a]&&s[t]<=s[i]}function g(e,t,i){for(var s=e.heap[i],n=i<<1;n<=e.heap_len&&(n<e.heap_len&&a(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!a(t,s,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=s}function _(e,t,i){var s,n,a,o,r=0;if(0!==e.last_lit)for(;s=e.pending_buf[e.d_buf+2*r]<<8|e.pending_buf[e.d_buf+2*r+1],n=e.pending_buf[e.l_buf+r],r++,0==s?c(e,n,t):(c(e,(a=K[n])+A+1,t),0!==(o=U[a])&&d(e,n-=q[a],o),c(e,a=l(--s),i),0!==(o=G[a])&&d(e,s-=z[a],o)),r<e.last_lit;);c(e,M,t)}function p(e,t){var i,s,n,a=t.dyn_tree,o=t.stat_desc.static_tree,r=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=N,i=0;i<l;i++)0!==a[2*i]?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):a[2*i+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[n]=0,e.opt_len--,r&&(e.static_len-=o[2*n+1]);for(t.max_code=u,i=e.heap_len>>1;1<=i;i--)g(e,a,i);for(n=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],g(e,a,1),s=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=s,a[2*n]=a[2*i]+a[2*s],e.depth[n]=(e.depth[i]>=e.depth[s]?e.depth[i]:e.depth[s])+1,a[2*i+1]=a[2*s+1]=n,e.heap[1]=n++,g(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){for(var i,s,n,a,o,r=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,c=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,v=t.stat_desc.max_length,m=0,g=0;g<=R;g++)e.bl_count[g]=0;for(r[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<N;i++)v<(g=r[2*r[2*(s=e.heap[i])+1]+1]+1)&&(g=v,m++),r[2*s+1]=g,l<s||(e.bl_count[g]++,a=0,h<=s&&(a=c[s-h]),o=r[2*s],e.opt_len+=o*(g+a),d&&(e.static_len+=o*(u[2*s+1]+a)));if(0!==m){do{for(g=v-1;0===e.bl_count[g];)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[v]--,m-=2}while(0<m);for(g=v;0!==g;g--)for(s=e.bl_count[g];0!==s;)l<(n=e.heap[--i])||(r[2*n+1]!==g&&(e.opt_len+=(g-r[2*n+1])*r[2*n],r[2*n+1]=g),s--)}}(e,t),v(a,u,e.bl_count)}function T(e,t,i){var s,n,a=-1,o=t[1],r=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(i+1)+1]=65535,s=0;s<=i;s++)n=o,o=t[2*(s+1)+1],++r<l&&n===o||(r<u?e.bl_tree[2*n]+=r:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[2*x]++):r<=10?e.bl_tree[2*k]++:e.bl_tree[2*B]++,a=n,u=(r=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4))}function f(e,t,i){var s,n,a=-1,o=t[1],r=0,l=7,u=4;for(0===o&&(l=138,u=3),s=0;s<=i;s++)if(n=o,o=t[2*(s+1)+1],!(++r<l&&n===o)){if(r<u)for(;c(e,n,e.bl_tree),0!=--r;);else 0!==n?(n!==a&&(c(e,n,e.bl_tree),r--),c(e,x,e.bl_tree),d(e,r-3,2)):r<=10?(c(e,k,e.bl_tree),d(e,r-3,3)):(c(e,B,e.bl_tree),d(e,r-11,7));a=n,u=(r=0)===o?(l=138,3):n===o?(l=6,3):(l=7,4)}}function E(e,t,i,s){var n,a,o,r;d(e,(y<<1)+(s?1:0),3),a=t,o=i,r=!0,m(n=e),r&&(u(n,o),u(n,~o)),S.arraySet(n.pending_buf,n.window,a,o,n.pending),n.pending+=o}var S=e("../utils/common"),I=0,C=1,y=0,w=29,A=256,O=A+1+w,b=30,P=19,N=2*O+1,R=15,D=16,L=7,M=256,x=16,k=17,B=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(O+2));s(V);var W=new Array(2*b);s(W);var Y=new Array(512);s(Y);var K=new Array(256);s(K);var q=new Array(w);s(q);var z=new Array(b);s(z);var Q,X,j,$=!1;i._tr_init=function(e){$||(function(){for(var e,t,i,s=new Array(R+1),n=0,a=0;a<w-1;a++)for(q[a]=n,e=0;e<1<<U[a];e++)K[n++]=a;for(K[n-1]=a,a=i=0;a<16;a++)for(z[a]=i,e=0;e<1<<G[a];e++)Y[i++]=a;for(i>>=7;a<b;a++)for(z[a]=i<<7,e=0;e<1<<G[a]-7;e++)Y[256+i++]=a;for(t=0;t<=R;t++)s[t]=0;for(e=0;e<=143;)V[2*e+1]=8,e++,s[8]++;for(;e<=255;)V[2*e+1]=9,e++,s[9]++;for(;e<=279;)V[2*e+1]=7,e++,s[7]++;for(;e<=287;)V[2*e+1]=8,e++,s[8]++;for(v(V,O+1,s),e=0;e<b;e++)W[2*e+1]=5,W[2*e]=h(e,5);Q=new o(V,U,A+1,O,R),X=new o(W,G,0,b,R),j=new o(new Array(0),F,0,P,L)}(),$=!0),e.l_desc=new n(e.dyn_ltree,Q),e.d_desc=new n(e.dyn_dtree,X),e.bl_desc=new n(e.bl_tree,j),e.bi_buf=0,e.bi_valid=0,r(e)},i._tr_stored_block=E,i._tr_flush_block=function(e,t,i,s){var n,a,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,i=0;i<=31;i++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*i])return I;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return C;for(i=32;i<A;i++)if(0!==e.dyn_ltree[2*i])return C;return I}(e)),p(e,e.l_desc),p(e,e.d_desc),o=function(e){var t;for(T(e,e.dyn_ltree,e.l_desc.max_code),T(e,e.dyn_dtree,e.d_desc.max_code),p(e,e.bl_desc),t=P-1;3<=t&&0===e.bl_tree[2*H[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=n&&(n=a)):n=a=i+5,i+4<=n&&-1!==t?E(e,t,i,s):4===e.strategy||a===n?(d(e,2+(s?1:0),3),_(e,V,W)):(d(e,4+(s?1:0),3),function(e,t,i,s){var n;for(d(e,t-257,5),d(e,i-1,5),d(e,s-4,4),n=0;n<s;n++)d(e,e.bl_tree[2*H[n]+1],3);f(e,e.dyn_ltree,t-1),f(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),r(e),s&&m(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(K[i]+A+1)]++,e.dyn_dtree[2*l(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){var t;d(e,2,3),c(e,M,V),16===(t=e).bi_valid?(u(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":1}],8:[function(e,t,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,i){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.options=r.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0,(i=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy))!==c)throw new Error(a[i]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){var i,s="string"==typeof t.dictionary?l.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if((i=o.deflateSetDictionary(this.strm,s))!==c)throw new Error(a[i]);this._dict_set=!0}}function s(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}var o=e("./zlib/deflate"),r=e("./utils/common"),l=e("./utils/strings"),a=e("./zlib/messages"),u=e("./zlib/zstream"),d=Object.prototype.toString,c=0,h=-1,v=0,m=8;n.prototype.push=function(e,t){var i,s,n=this.strm,a=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?n.input=l.string2buf(e):"[object ArrayBuffer]"===d.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new r.Buf8(a),n.next_out=0,n.avail_out=a),1!==(i=o.deflate(n,s))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(l.buf2binstring(r.shrinkBuf(n.output,n.next_out))):this.onData(r.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==i);return 4===s?(i=o.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==s||(this.onEnd(c),!(n.avail_out=0))},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=n,i.deflate=s,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,s(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,s(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")}),function(){var e={LANGUAGE_ENGLISH:"Inglés",LANGUAGE_SPANISH:"Español",OPENING_PITCH_WELCOME_TITLE_NO_OFFER:"Probar gratis.",OPENING_PITCH_WELCOME_TITLE_OFFER:"Prueba gratis, $%s de crédito.",OPENING_PITCH_WELCOME_SUBTITLE:"Sin cuota de suscripción, ni cuotas mensuales.",OPENING_PITCH_WELCOME_DISCLAIMER:"* Visita %s",OPENING_PITCH_PROMO_BUTTON_1:"Usar",OPENING_PITCH_PROMO_BUTTON_2:"$%s",OPENING_PITCH_PROMO_BUTTON_3:"Crédito",OPENING_PITCH_PROMO_BUTTON:"Usar $%s de crédito.",OPENING_PITCH_SIGN_UP_BUTTON:"Regístrate",OPENING_PITCH_SIGN_UP_BUTTON_BREAK:"Regístrate\nahora",OPENING_PITCH_EXPLORE_VUDU:"Explora\nVUDU",OPENING_PITCH_ALT_SIGN_UP_BUTTON:"Prueba Gratis",OPENING_PITCH_WELCOME_ALT_TITLE_NO_OFFER:"Probar gratis.",OPENING_PITCH_WELCOME_ALT_TITLE_OFFER:"Prueba VUDU... ¡Gratis! ¡Sólo registra este equipo!",OPENING_PITCH_WELCOME_ALT_SUBTITLE:"Paga sólo lo que ves, sin inscripción ni pagos mensuales.",ACTIVATION_EMAIL_PROMPT_ALT_PROMO_TEXT:"Ingresa tu dirección de correo electrónico para iniciar tu prueba gratis..",ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE:"** Para conocer más sobre nuestros términos de servicio y política de privacidad, visita %s.",OPENING_PITCH_NEW_RELEASES_TITLE:"Los últimos estrenos online",OPENING_PITCH_NEW_RELEASES_SUBTITLE_1:"Los estrenos más recientes y un amplio",OPENING_PITCH_NEW_RELEASES_SUBTITLE_2:"catálogo para tu entretenimiento.",OPENING_PITCH_GREAT_VALUE_TITLE:"Streaming al instante",OPENING_PITCH_GREAT_VALUE_SUBTITLE_1:"Sólo elige la película y",OPENING_PITCH_GREAT_VALUE_SUBTITLE_2:"disfrútala al momento.",OPENING_PITCH_MOST_HD_TITLE:"La mejor calidad HD y HDX",OPENING_PITCH_MOST_HD_SUBTITLE_1:"Disfruta la mejor experiencia con calidad",OPENING_PITCH_MOST_HD_SUBTITLE_2:"HD (720p) y HDX (1080p / Blu Ray).",OPENING_PITCH_BROWSE_BUTTON:"Explorar",OPENING_PITCH_BOXEE_NAV_HINT:'Para navegar en VUDU, usa la tecla "Enter" y los cursores.',OPENING_PITCH_SIDEBAR_TITLE:"Probar VUDU en forma gratuita.",OPENING_PITCH_YOUR_FIRST_RENTAL_IS_FREE:"¡Tu primera renta es gratis! Prueba ahora.",OPENING_PITCH_SIDEBAR_BROWSEALL_BUTTON:"Explorar Todo",ACTIVATION_EDIT_EMAIL_TITLE:"Edita la dirección de correo electrónico.",ACTIVATION_EDIT_EMAIL_HELP:"Ingresa la dirección de correo electrónico.",ACTIVATION_ERROR_TITLE:"Error",ACTIVATION_ERROR_DISMISS_BUTTON:"Explorar películas",ACTIVATION_GENERAL_ERROR_TEXT:"Se produjo un error al procesar tu solicitud. Inténtalo de nuevo más tarde. Si continúas viendo este error, llama a Atención al cliente de VUDU al %s.",ACTIVATION_PW_RESET_SUCCESS_TITLE:"Correo electrónico enviado para restablecer la contraseña.",ACTIVATION_PW_RESET_SUCCESS_TEXT:"Hemos enviado un correo electrónico a [%s]. Una vez que hayas recibido tu nueva contraseña, ingrésala para continuar con la activación.",ACTIVATION_PW_RESET_SUCCESS_CONTINUE_BUTTON:"Continuar",ACTIVATION_PW_RESET_ERROR_TEXT:"No se puede restablecer tu contraseña en este momento. Inténtalo de nuevo más tarde o llama a Atención al cliente de VUDU al %s.",ACTIVATION_FORGOT_PW_TITLE:"Recuperar contraseña.",ACTIVATION_FORGOT_PW_TEXT:"¿Olvidaste tu contraseña? Para recuperarla podemos enviarte un correo electrónico a [%s]. Haz clic en el enlace del correo electrónico y sigue las instrucciones para establecer una nueva contraseña.\n \n¿No recibiste el correo electrónico? Llama a Atención al cliente de VUDU al %s.",ACTIVATION_FORGOT_PW_SEND_EMAIL_BUTTON:"Recuperar",ACTIVATION_FORGOT_PW_EDIT_EMAIL_BUTTON:"Intenta de nuevo",ACTIVATION_COMPLETE_TITLE:"¡Felicidades!",ACTIVATION_COMPLETE_PROMO_PREFIX:"¡Felicidades! Has recibido $%s de crédito gratis para comprar y rentar películas.\n \n",ACTIVATION_COMPLETE_TEXT:"¡Estás preparado para explorar las miles de películas más vistas de Hollywood disponibles en VUDU!",ACTIVATION_ACCOUNT_CREATE_TEXT:"¡Estás preparado para explorar las miles de películas más vistas de Hollywood disponibles en VUDU!",ACTIVATION_COMPLETE_DISMISS_BUTTON:"Explorar películas",ACTIVATION_TOO_MANY_DEVICES_TITLE:"Demasiados dispositivos",ACTIVATION_TOO_MANY_DEVICES_TEXT:"Lo lamentamos, ya cuentas con (5) dispositivos en esta cuenta.\n \nPara agregar este dispositivo, primero debes eliminar el dispositivo existente en la cuenta visitando http://my.vudu.mx.\n \nTambién puedes crear una cuenta nueva utilizando una dirección de correo electrónico diferente.",ACTIVATION_TOO_MANY_DEVICES_RESTART_BUTTON:"Comenzar de nuevo",ACTIVATION_LOGIN_FAILED_TITLE:"Correo electrónico/contraseña no válidos",ACTIVATION_LOGIN_FAILED_TEXT:"Los detalles de la cuenta que has suministrado no son correctos. Inténtalo de nuevo.",ACTIVATION_LOGIN_FAILED_RETRY_BUTTON:"Rever",ACTIVATION_USER_EXISTS_TITLE:"El nombre de usuario ya existe.",ACTIVATION_USER_EXISTS_TEXT:"Ya existe una cuenta VUDU con la dirección que ingresaste. Intenta iniciar sesión con esa dirección y tu contraseña.",ACTIVATION_USER_EXISTS_RESTART_BUTTON:"Comenzar de nuevo",ACTIVATION_EMAIL_PROMPT_TITLE:"Ingresa la dirección de correo electrónico.",ACTIVATION_EMAIL_PROMPT_NO_PROMO_TEXT:"¡Ingresa tu dirección de correo electrónico y empieza a disfrutar VUDU!",ACTIVATION_EMAIL_PROMPT_PROMO_TEXT:"Ingresa tu dirección de correo electrónico para obtener $%s de crédito gratis.",ACTIVATION_EMAIL_PROMPT_HELP:"Ingresa la dirección de correo electrónico.",ACTIVATION_EMAIL_PROMPT_BACK_BUTTON:"Volver",ACTIVATION_EMAIL_PROMPT_DONE_BUTTON:"Hecho",ACTIVATION_WMT_EMAIL_PROMPT_TITLE:"Ingresa la dirección de correo electrónico.",ACTIVATION_WMT_EMAIL_PROMPT_TEXT:"Ingresa la dirección de correo electrónico de su cuenta Walmart.com.",ACTIVATION_WMT_EMAIL_PROMPT_HELP:"Ingresa la dirección de correo electrónico.",ACTIVATION_WMT_EMAIL_PROMPT_BACK_BUTTON:"Cancelar",ACTIVATION_WMT_EMAIL_PROMPT_DONE_BUTTON:"Hecho",ACTIVATION_PASSWORD_PROMPT_TITLE:"Ingresa la contraseña",ACTIVATION_PASSWORD_PROMPT_TEXT:"Ya has creado una cuenta con la dirección de correo electrónico %s. \nIngresa la contraseña de tu cuenta para continuar.",ACTIVATION_PASSWORD_PROMPT_HELP:"Ingresa la contraseña",ACTIVATION_PASSWORD_PROMPT_BACK_BUTTON:"Volver",ACTIVATION_PASSWORD_PROMPT_FORGOT_PASSWORD_BUTTON:"Recuperar",ACTIVATION_PASSWORD_PROMPT_DONE_BUTTON:"Hecho",ACTIVATION_WMT_PASSWORD_PROMPT_TITLE:"Ingresa la contraseña",ACTIVATION_WMT_PASSWORD_PROMPT_HELP:"Ingresa la contraseña",ACTIVATION_WMT_PASSWORD_PROMPT_TEXT:"Ingresa la contraseña de su cuenta Walmart.com.",ACTIVATION_WMT_PASSWORD_PROMPT_BACK_BUTTON:"Volver",ACTIVATION_WMT_PASSWORD_PROMPT_DONE_BUTTON:"Hecho",ACTIVATION_EMAIL_INVALID_TITLE:"Correo electrónico no válido",ACTIVATION_EMAIL_EMPTY_TEXT:"Debes ingresar una dirección de correo electrónico para continuar.",ACTIVATION_EMAIL_INVALID_TEXT:"La dirección de correo electrónico que suministraste [%s] no es válida. Inténtalo de nuevo.",ACTIVATION_EMAIL_INVALID_RETRY_BUTTON:"Volver",ACTIVATION_ACTIVATE_ERROR_TEXT:"No se puede activar tu dispositivo en este momento. Inténtalo de nuevo más tarde o llámanos a Atención al cliente de VUDU al %s.",ACTIVATION_EMAIL_CONFIRMATION_TITLE:"Confirmar correo electrónico",ACTIVATION_EMAIL_CONFIRMATION_TEXT:"Has ingresado tu dirección de correo electrónico como: %s \nConfirma que sea correcta.",ACTIVATION_EMAIL_CONFIRMATION_CONFIRM_BUTTON:"Confirmar",ACTIVATION_EMAIL_CONFIRMATION_RETRY_BUTTON:"Cambiar",ACTIVATION_NO_PAYMENT_DIALOG_TITLE:"No hay método de pago",ACTIVATION_NO_PAYMENT_DIALOG_TEXT:"Tu cuenta no tiene una tarjeta de crédito. Te enviamos un correo electrónico a [%s] con instrucciones para completar la configuración de tu cuenta y agregar una tarjeta de crédito. Completa la configuración de tu cuenta y vuelve a intentar esta compra.",ACTIVATION_NO_PAYMENT_DIALOG_RESEND_BUTTON:"Reenviar",ACTIVATION_NO_PAYMENT_DIALOG_CHANGE_BUTTON:"Cambiar",ACTIVATION_NO_PAYMENT_DIALOG_DONE_BUTTON:"Descartar",ACTIVATION_EMAIL_CHANGED_DIALOG_TITLE:"Tu correo electrónico ha sido cambiado.",ACTIVATION_EMAIL_CHANGED_DIALOG_TEXT:"Te hemos enviado un correo electrónico a [%s]. Verifica tu correo electrónico y sigue las instrucciones para completar la configuración de la cuenta.",ACTIVATION_EMAIL_CHANGED_DIALOG_DONE_BUTTON:"Descartar",ACTIVATION_CHANGE_EMAIL_ERROR_TITLE:"Error",ACTIVATION_CHANGE_EMAIL_ERROR_DONE_BUTTON:"OK",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_SELECT_DIFFERENT_EMAIL:"Selecciona una dirección de correo electrónico diferente a la actual.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_ACCOUNT_ALREADY_EXISTS:"Ya existe una cuenta con la dirección de correo electrónico [%s]. Para agregar este dispositivo a la cuenta existente, llama a Atención al cliente de VUDU al %s. De otro modo, selecciona una dirección de correo electrónico diferente.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING:"Se produjo un problema al cambiar tu dirección de correo electrónico. Inténtalo de nuevo más tarde o llama a Atención al cliente de VUDU al %s.",ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_TRY_AGAIN:"Se produjo un problema al cambiar su dirección de correo electrónico. Inténtelo de nuevo más tarde o llame a Atención al cliente de VUDU al %s.",ACTIVATION_CHANGE_EMAIL_DIALOG_TITLE:"Cambia tu dirección de correo electrónico",ACTIVATION_CHANGE_EMAIL_DIALOG_TEXT:"Ingresa una nueva dirección de correo electrónico para tu cuenta. Te enviaremos instrucciones para completar la configuración de la cuenta a esta nueva dirección de correo electrónico.",ACTIVATION_CHANGE_EMAIL_DIALOG_HELP:"Ingresa el nuevo correo electrónico",ACTIVATION_CHANGE_EMAIL_DIALOG_CANCEL_BUTTON:"Descartar",ACTIVATION_CHANGE_EMAIL_DIALOG_DONE_BUTTON:"Cambiar",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TITLE:"Correo electrónico enviado",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TEXT:"Te hemos enviado un correo electrónico a [%s]. Verifica tu correo electrónico y sigue las instrucciones para completar la configuración de la cuenta.",ACTIVATION_EMAIL_WAS_RESENT_DIALOG_DONE_BUTTON:"Descartar",ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_PLEASE_LOG_IN_TO_WWW:"Inicia sesión en www.vudu.mx con tu correo electrónico [%s] y contraseña y sigue las instrucciones para ingresar la información de tu tarjeta de crédito.",ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_WE_ARE_HAVING_TROUBLE:"Estamos teniendo problemas para enviarte correos electrónicos. Llama a Atención al cliente de VUDU al %s.",ACTIVATION_OPTIONS_DIALOG_TITLE:"Regístrate",ACTIVATION_OPTIONS_DIALOG_TITLE_SIGN_IN:"Login",ACTIVATION_OPTIONS_DIALOG_NEW_USER:"Crear",ACTIVATION_OPTIONS_DIALOG_EXISTING_USER:"Usuario existente",ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_BUTTON:"Cuenta nueva",ACTIVATION_OPTIONS_DIALOG_FREE_TRIAL:"Ingresa la dirección de correo electrónico para iniciar tu prueba gratis.",ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_TEXT:"Me gustaría registrarme en VUDU.",ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_BUTTON:"Iniciar sesión",ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_TEXT:"Ya tengo un nombre de usuario y una contraseña de VUDU.",ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_BUTTON:"Iniciar sesión",ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_TEXT:"Ya tengo un nombre de usuario y una contraseña de Walmart.com.",ACTIVATION_SUSPENDED_VERB:"suspended",ACTIVATION_CLOSED_VERB:"closed",ACTIVATION_SUSPENDED_DIALOG_TITLE:"Account Suspended",ACTIVATION_CLOSED_DIALOG_TITLE:"Account Closed",ACTIVATION_CONTACT_CARE_TEXT:"Your account has been %s.\n\nPlease visit %s to contact VUDU Customer Care about your account.",ACTIVATION_SUSPENDED_DIALOG_EXIT_BUTTON:"Exit",REMINDER_NOPASSWORD_TITLE:"Complete Account Setup",REMINDER_NOPASSWORD_TEXT:"Please check your email to complete your Account Setup. If you can't find your VUDU Account Setup email, click on one of the options below.",REMINDER_NOPASSWORD_RESEND_BUTTON:"Resend Email",REMINDER_NOPASSWORD_CHANGE_BUTTON:"Change Email",REMINDER_NOPASSWORD_LATER_BUTTON:"Do It Later",REMINDER_UVLINK_TITLE:"UltraViolet Account Required",REMINDER_UVLINK_TEXT:"You need to create a new UltraViolet account or link to an existing one on http://www.vudu.com to access your UltraViolet movies on VUDU.",REMINDER_UVLINK_LATER_BUTTON:"Do It Later",REMINDER_UVLINK_DONE_BUTTON:"Setup Is Done",ADVANCED_SETTINGS_TITLE:"CONFIGURACIONES AVANZADAS",ADVANCED_SETTINGS_APPS_HOME:"Apps Home",ADVANCED_SETTINGS_DEBUGGING:"Depuración de programa",TAB_NEW:"Novedades",TAB_BROWSE:"Catálogo",TAB_MOVIES:"Títulos",TAB_TV:"TV",TAB_COLLECTIONS:"Colecciones",TAB_MY_VUDU:"Mi VUDU",TAB_SEARCH:"Búsqueda",TAB_FEATURED:"FEATURED",TAB_RECOMMENDED:"RECOMMENDED",TAB_EXPLORE:"EXPLORE",SUBTAB_GENRES:"GENRES",SUBTAB_PICKS:"Top 20",SUBTAB_RENTALS:"Estrenos",SUBTAB_NEW_TV:"Nuevos TV",SUBTAB_TRAILERS:"Nuevos tráilers",SUBTAB_UPCOMING:"Próximos estrenos",SUBTAB_PREORDERS:"Pre-orders",SUBTAB_SOCIAL_FEED:"Redes sociales",SUBTAB_SHOWCASE:"Colecciones",SUBTAB_NETWORKS:"Cadenas de TV",SUBTAB_RECOMMEND:"Recomendada",SUBTAB_MOST_WATCHED:"Más vistas",SUBTAB_MY_MOVIES:"Mis títulos",SUBTAB_MY_TV_SHOWS:"Mi TV",SUBTAB_MY_WISHLIST:"Mi wishlist",SUBTAB_MY_DOWNLOADS:"Mi descargas",SUBTAB_MY_PREORDERS:"Mi Pre-orders",SUBTAB_SETTINGS:"Información y configuraciones",SUBTAB_SEARCH_TITLE:"Buscar por título",SUBTAB_SEARCH_PERSON:"Buscar por actor",SEASON_TAB_EPISODES:"Episodios",SEASON_TAB_OVERVIEW:"Sinopsis",SEASON_TAB_CAST:"Reparto",SEASON_TAB_SIMILAR:"Todas las temporadas",SEASON_TAB_MORE_INFO:"Más información",EPISODE_TAB_OVERVIEW:"Episodio",EPISODE_TAB_EPISODES:"Todos los episodios",EPISODE_TAB_CAST:"Reparto",EPISODE_TAB_SIMILAR:"Todas las temporadas",EPISODE_TAB_MORE_INFO:"Más información",DEFAULT_TAB_OVERVIEW:"Sinopsis",DEFAULT_TAB_EXTRAS:"Extras",DEFAULT_TAB_CAST:"Reparto",DEFAULT_TAB_REVIEWS:"Críticas",DEFAULT_TAB_SIMILAR:"Similares",DEFAULT_TAB_MORE_INFO:"Más información",SOCIAL_FEED_TAB_PUBLIC:"TODOS",SOCIAL_FEED_TAB_FOLLOWING:"MI GRUPO",SOCIAL_FEED_TAB_MINE:"YO",PLAYBACK_DEFAULT_LOADING:"Cargando",PLAYBACK_CHAPTER_NUMBER:"Ch. %d",MOVIE_CAST_EMPTY:"No hay información disponible acerca de los actores y equipo de producción.",REVIEWS_EMPTY:"No reviews are available.",RECOMMENDATIONS_TITLE:"Recomendaciones",RECOMMENDATIONS_TITLE_SIMILAR:"Recomendaciones como '%s'",CREDIT_DISPLAY:"Crédito: $%.2f",POINTER_PAGE_UP:"Página anterior",POINTER_PAGE_UP_ABBRV:"Pág. anterior",POINTER_PAGE_DOWN:"Página siguiente",POINTER_PAGE_DOWN_ABBRV:"Pág. siguiente",HELP_BUTTON_HINT:"Presione        para ayuda",RTO_PAGE_TITLE:"¡OFERTA ESPECIAL POR TIEMPO LIMITADO!",RTO_OFFER_TEXT:"Obtener esta película desde sólo %.2f!\nCómprala dentro de los próximas %s para acceder a esta oferta especial.",RTO_OWN_BUTTON:"Comprar %s por $%.2f",RTO_CANCEL_BUTTON:"No, gracias.",DOWNLOAD_OPTIONS_DEFAULT_TITLE:"Opciones",DOWNLOAD_OPTION_NOW:"Descargar ahora",DOWNLOAD_OPTION_LATER:"Descargar última",DOWNLOAD_OPTION_REMOVE:"Borrar de la cola",DOWNLOAD_OPTION_CLEAR:"Limpiar las notificaciones",DOWNLOAD_OPTION_MOVIE_DETAILS:"Ir a detalles de películas",DOWNLOAD_OPTION_SEASON_DETAILS:"Ir a detalles de temporadas",DOWNLOAD_OPTION_EPISODE_DETAILS:"Ir a detalles de episodios",DOWNLOAD_SUSPEND_ALL:"Suspender todas",DOWNLOAD_RESUME_ALL:"Reanudar todas",DOWNLOAD_SET_DATA_RATE:"Establecer transmisión de datos",DOWNLOAD_DELETE_ALL:"Borrar todas",DOWNLOAD_SUMMARY:"Resumen",DOWNLOAD_DOWLOADING:"Descargando:",DOWNLOAD_SPEED:"Velocidad:",DOWNLOAD_ENABLED:"Habilitado",DOWNLOAD_SUSPENDED:"Suspendido",DOWNLOAD_HARDDRIVE_INFO:"Información de disco duro",DOWNLOAD_TOTAL_AVAIL:"Espacio total disponible:",DOWNLOAD_USED:"Espacio utilizado:",DOWNLOAD_EST_FREE_SPACE:"Espacio libre estimado:",DOWNLOAD_HOUR:"hora",DOWNLOAD_HOURS:"horas",DOWNLOAD_MANAGE:"Administrar la descarga",DOWNLOAD_MANAGE_DOWNLOAD:"Descargar %s",DOWNLOAD_MANAGE_FIRST:"Descargar %s primero",DOWNLOAD_MANAGE_REMOVE_QUEUE:"Quitar %s de la cola",DOWNLOAD_MANAGE_DELETE_DISK:"Borrar %s del disco",DOWNLOAD_ERROR_DIDNT_FIT:"No queda espacio suficiente para descargar esta película. Borra algunas de las otras películas e inténtalo de nuevo.",DOWNLOAD_ERROR_STALLED:"Un problema de red ocasionó una falla en esta descarga.",DOWNLOAD_ERROR_FAILED:"No se pudo iniciar la descarga. Esto puede ocurrir cuando no queda espacio libre.",DOWNLOAD_ERROR_SUSPENDED:"Las descargas están suspendidas en este momento. Ir a Mis descargas para reanudar las descargas.",DOWNLOAD_ERROR_FULL:"El área de descargas está saturada en este momento. Debes borrar algunas descargas.",DOWNLOAD_DONE_BUTTON:"Hecho",MOVIE_DETAILS_SUBTITLES_TITLE:"Subtítulos: ",MOVIE_DETAILS_LENGTH_MINUTES:"%d min",FILTER_GENRE:"Género",FILTER_GENRE_OPTION_ANY:"Todos",FILTER_STUDIO:"Estudio",FILTER_STUDIO_OPTION_ANY:"Todos",FILTER_STUDIO_OPTION_OTHER:"Otros",FILTER_TOMATOMETER:"Tomatómetro",FILTER_TOMATOMETER_OPTION_ANY:"Todos",FILTER_TOMATOMETER_OPTION_80:">80%%",FILTER_TOMATOMETER_OPTION_60:">60%%",FILTER_TOMATOMETER_OPTION_40:">40%%",FILTER_TOMATOMETER_OPTION_20:">20%%",FILTER_QUALITY:"Calidad",FILTER_QUALITY_OPTION_ANY:"Todas",FILTER_QUALITY_OPTION_HDX:"HDX",FILTER_QUALITY_OPTION_HD:"HD",FILTER_QUALITY_OPTION_SD:"SD",FILTER_OFFERTYPE:"Opción",FILTER_OFFERTYPE_OPTION_ANY:"Todas",FILTER_OFFERTYPE_OPTION_PTR:"Renta",FILTER_OFFERTYPE_OPTION_PTO:"Compra",FILTER_STARRATING:"Clasificación",FILTER_STARRATING_OPTION_ANY:"Todas",FILTER_STARRATING_OPTION_4:"4 estrellas o más",FILTER_STARRATING_OPTION_3:"3 estrellas o más",FILTER_STARRATING_OPTION_2:"2 estrellas o más",FILTER_STARRATING_OPTION_1:"1 estrella o más",FILTER_CONTENTTYPE:"Tipo",FILTER_CONTENTTYPE_OPTION_MOVIES_AND_TV:"Películas y TV",FILTER_CONTENTTYPE_OPTION_MOVIES:"Películas",FILTER_CONTENTTYPE_OPTION_TV:"TV",FILTER_SORT:"Ordenar",FILTER_SORT_OPTION_PURCHASETIME:"Comprar tiempo",FILTER_SORT_OPTION_FEATUREDSCORE:"Más elegidas",FILTER_SORT_OPTION_WATCHEDSCORE:"Más vistas",FILTER_SORT_OPTION_TOMATOMETER:"Tomatómetro",FILTER_SORT_OPTION_RELEASETIME:"Año",FILTER_SORT_OPTION_TITLE:"De la A a la Z",FILTER_SORT_OPTION_EDITORPICKS:"Editorial Picks",FILTER_RELEASETIME:"Año",FILTER_RELEASETIME_OPTION_ANY:"Todos",FILTER_RELEASETIME_OPTION_NEWRELEASES:"Nuevos estrenos",FILTER_RELEASETIME_OPTION_2000:"2000",FILTER_RELEASETIME_OPTION_1990:"1990s",FILTER_RELEASETIME_OPTION_1980:"1980s",FILTER_RELEASETIME_OPTION_1970:"1970s",FILTER_RELEASETIME_OPTION_1960:"1960s",FILTER_RELEASETIME_OPTION_OLD:"1950s y antes",FILTER_MPAARATING:"Rating",FILTER_MPAARATING_OPTION_1:"Todas",FILTER_MPAARATING_OPTION_2:"D o menos",FILTER_MPAARATING_OPTION_3:"C o menos",FILTER_MPAARATING_OPTION_4:"B-15 o menos",FILTER_MPAARATING_OPTION_5:"B o menos",FILTER_MPAARATING_OPTION_6:"A",FILTER_COMMUNITY_RATING:"Calificación de la comunidad",FILTER_COMMUNITY_RATING_OPTION_ANY:"Todas",FILTER_COMMUNITY_RATING_OPTION_4_5:"4.5 estrellas o más",FILTER_COMMUNITY_RATING_OPTION_4:"4 estrellas o más",FILTER_COMMUNITY_RATING_OPTION_3_5:"3.5 estrellas o más",FILTER_COMMUNITY_RATING_OPTION_3:"3 estrellas o más",FILTER_COMMUNITY_RATING_OPTION_2:"2 estrellas o más",FILTER_COMMUNITY_RATING_OPTION_1:"1 estrella o más",HELP_TITLE:"Ayuda de control remoto",PS3_PARENTAL_CONTROL_WARNING:'Atención: VUDU no usa las restricciones del nivel de madurez "PlayStation" o "PSN". Para establecer los controles parentales en VUDU, ir a Mi VUDU > Información y configuraciones.',PS4_PARENTAL_CONTROL_WARNING:'Atención: VUDU no usa las restricciones del nivel de madurez "PlayStation" o "PSN". Para establecer los controles parentales en VUDU, ir a Mi VUDU > Información y configuraciones.',SETTINGS_SYSTEM_INFO_TEXT:"Identificación del dispositivo: %x \n\nVersión de UI: %s \n\nVersión de Embedder: %s \n\nVersión VUDU del cliente: %s %s",SETTINGS_VERSION_UNKNOWN:"Desconocido",SETTINGS_REVISION_SUFFIX:"(rev %s)",SETTINGS_CREDITS_TEXT:"Parte del contenido es suministrado por Rotten Tomatoes.\n\nImágenes del elenco cortesía de PR Photos. \n\nAudio codificado bajo licencia de Laboratorios Dolby. Dolby y Dolby Digital Plus son marcas registradas de Laboratorios Dolby. \n\nEste software usa bibliotecas del proyecto Ffmpeg bajo el LGPLv2.1.",SETTINGS_CREDITS_TEXT_TOMATOMETER:"Parte del contenido es suministrado por Rotten Tomatoes.\n\n",SETTINGS_CREDITS_TEXT_CASTIMAGE:"Imágenes del elenco cortesía de PR Photos.\n\n",SETTINGS_CREDITS_TEXT_AUDIO:"Audio codificado bajo licencia de Laboratorios Dolby. Dolby y Dolby Digital Plus son marcas registradas de Laboratorios Dolby.\n\n",SETTINGS_CREDITS_TEXT_VIDEO:"Este software usa bibliotecas del proyecto Ffmpeg bajo el LGPLv2.1.\n\n",SETTINGS_CREDITS_TEXT_SPLIT:"Imágenes del elenco cortesía de PR Photos. \n\nAudio codificado bajo licencia de Laboratorios Dolby. Dolby y Dolby Digital Plus son marcas registradas de Laboratorios Dolby. \n\nEste software usa bibliotecas del proyecto Ffmpeg bajo el LGPLv2.1.",SETTINGS_CREDITS_PS3_SUFFIX:"BE/Broadcasting Engine es una marca registrada de Sony Computer Entertainment Inc. Broadcasting Engine © 2010 Sony Computer Entertainment Inc./Sony Computer Entertainment Korea Inc.",SETTINGS_SPEEDTEST_OPTION:"Test de velocidad de la red",SETTINGS_SPEEDTEST_HEADING:"Test de velocidad de la red",SETTINGS_SPEEDTEST_BODY:"Este test determinará qué calidades de video son compatibles con la red y la conexión a Internet de tu casa. Presiona %s para continuar.",SETTINGS_PARENTAL_CONTROLS_OPTION:"Controles parentales",SETTINGS_PARENTAL_CONTROLS_HEADING:"Controles parentales",SETTINGS_ACCOUNT_INFO_OPTION:"Información de la cuenta",SETTINGS_ACCOUNT_INFO_HEADING:"Información de la cuenta",SETTINGS_ACCOUNT_INFO_BALANCE:"Balance de la cuenta",SETTINGS_ACCOUNT_INFO_CC_ON_FILE:"Tarjeta de crédito en el archivo",SETTINGS_ACCOUNT_INFO_CC_EXPIRED:"Tu tarjeta de crédito ha vencido. Ingresa a my.vudu.mx para editar tu información de pago.",SETTINGS_ACCOUNT_INFO_CREDIT_USE:"Atención: Cuando rentas o compras, tomaremos fondos de tu crédito disponible antes de realizar un cargo a tu tarjeta de crédito.",SETTINGS_ACCOUNT_INFO_NO_ACCOUNT:"Atención: No tienes una cuenta en VUDU.",SETTINGS_ACCOUNT_INFO_FREE_CREDIT:"Tienes créditos disponibles para ver películas.",SETTINGS_ACCOUNT_INFO_UPDATE_CC:"Para agregar la información de tu tarjeta de crédito, visita %s.",SETTINGS_ACCOUNT_INFO_ACTIVATE:"Activar cuenta",SETTINGS_ACCOUNT_INFO_CREDIT_EXPIRATION:"$%.2f de este crédito se vencerá en %s.",SETTINGS_ACCOUNT_INFO_HAVE_CC_YES:"Sí",SETTINGS_ACCOUNT_INFO_HAVE_CC_NO:"No",SETTINGS_OVERSCAN_OPTION:"Configuración de pantalla",SETTINGS_OVERSCAN_HEADING:"Configuración de pantalla",SETTINGS_OVERSCAN_BODY:"Optimiza tu experiencia de visualización adaptando la imagen a tu pantalla. Presiona %s para continuar.",SETTINGS_SYSTEM_INFO_OPTION:"Información del sistema",SETTINGS_SYSTEM_INFO_HEADING:"Información del sistema",SETTINGS_CREDIT_OPTION:"Créditos",SETTINGS_CREDIT_HEADING:"Créditos",SETTINGS_ADVANCED_OPTION:"Configuraciones avanzadas",SETTINGS_ADVANCED_HEADER:"Configuraciones avanzadas",SETTINGS_ADVANCED_BODY:"Presionar %s para continuar.",SETTINGS_PC_PURCHASE_ALL:"Pedir para comprar películas:",SETTINGS_PC_PURCHASE_RATED:"Pedir para comprar películas\ncon una calificación más alta que:",SETTINGS_PC_PLAY_ALL:"Pedir para reproducir películas:",SETTINGS_PC_PLAY_RATED:"Pedir para reproducir películas\ncon una calificación más alta que:",SETTINGS_PC_CHANGE_PASSCODE:"Cambiar el código de seguridad",SETTINGS_PC_CURRENT_PASSCODE:"Ingresa tu código de seguridad actual.",SETTINGS_PC_PASSCODE_SELECTED:"¡Nuevo código de seguridad seleccionado!",SETTINGS_PC_PASSCODE_MISMATCH:"¡Los códigos de entrada no coincidieron!",SETTINGS_PC_PASSCODE_VERIFY:"Ingresa nuevamente el mismo código de seguridad para verificar.",SETTINGS_PC_NEW_PASSCODE:"Ingresa un nuevo código de seguridad.",SETTINGS_PC_PASSCODE_REQUIRED:"Se requiere un código de seguridad para cambiar los controles de calificaciones.",SETTINGS_PC_PASSCODE_REQUIRED_TO_DISABLE:"Se requiere un código de seguridad para desactivar los controles parentales.",SETTINGS_PC_INCORRECT:"¡Código incorrecto! Inténtalo de nuevo.",SETTINGS_PC_INCORRECT_TRY_AGAIN:"¡código de seguridad incorrecto!",SETTINGS_PC_PASSCODE_DONE:"Hecho",SETTINGS_PC_PASSCODE_CANCEL:"Cancelar",OLD_SETTINGS_SYSTEM_INFORMATION:"INFORMACIÓN DEL SISTEMA",OLD_SETTINGS_DEVICE_ID:"Identificación del dispositivo",OLD_SETTINGS_VUDU_VERSION:"Versión de VUDU",OLD_SETTINGS_HARDWARE_ID:"Identificación del hardware",OLD_SETTINGS_WIDGET_VERSION:"Versión del dispositivo",OLD_SETTINGS_SERVER_VERSION:"Versión del servidor",OLD_SETTINGS_DEVICE_FIRMWARE:"Firmware del dispositivo",OLD_SETTINGS_ADVANCED_BUTTON:"Avanzadas",OLD_SETTINGS_BACK_TO_SETTINGS:"Volver a configuraciones",OLD_SETTINGS_CREDITS:"CRÉDITOS",OLD_SETTINGS_CREDITS_TEXT:"Parte del contenido es suministrado por Rotten Tomatoes.\n\nImágenes del elenco cortesía de PR Photos. \n\nAudio codificado bajo licencia de Laboratorios Dolby. Dolby y Dolby Digital Plus son marcas registradas de Laboratorios Dolby. \n\nEste software usa bibliotecas del proyecto Ffmpeg bajo el LGPLv2.1.",OLD_SETTINGS_CREDITS_TEXT_TOMATOMETER:"Parte del contenido es suministrado por Rotten Tomatoes.\n\n",OLD_SETTINGS_CREDITS_TEXT_SPLIT:"Imágenes del elenco cortesía de PR Photos. \n\nAudio codificado bajo licencia de Laboratorios Dolby. Dolby y Dolby Digital Plus son marcas registradas de Laboratorios Dolby. \n\nEste software usa bibliotecas del proyecto Ffmpeg bajo el LGPLv2.1.",OLD_SETTINGS_AUDIO_OUTPUT_SETTINGS:"CONFIGURACIONES DE LA SALIDA DE AUDIO",OLD_SETTINGS_AUDIO_OUTPUT_SELECTED_MODE:"Modo seleccionado: %s",OLD_SETTINGS_AUDIO_OUTPUT_DOLBY_DIGITAL:"Dolby Digital",OLD_SETTINGS_AUDIO_OUTPUT_PCM_STEREO:"Estéreo PCM",OLD_SETTINGS_DEACTIVATE_TITLE:"Desactivar este dispositivo",OLD_SETTINGS_DEACTIVATE_ARE_YOU_SURE:"¿Estás seguro de querer desactivar este dispositivo de tu cuenta VUDU?",OLD_SETTINGS_DEACTIVATE_OK_BUTTON:"OK",OLD_SETTINGS_DEACTIVATE_CANCEL_BUTTON:"Cancelar",OLD_SETTINGS_DEACTIVATE_PLEASE_WAIT:"Espera mientras desactivamos este dispositivo...",OLD_SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN:"Este dispositivo ha sido desactivado de tu cuenta VUDU",OLD_SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM:"Lo lamentamos, se produjo un problema al desactivar este dispositivo de tu cuenta VUDU",OLD_SETTINGS_ADVANCED_TITLE:"AVANZADAS",OLD_SETTINGS_ADVANCED_DEACTIVATE_DEVICE_BUTTON:"Desactivar dispositivo",OLD_SETTINGS_ADVANCED_DEACTIVATE_THIS_DEVICE_FROM:"Desactivar este dispositivo de tu cuenta VUDU.\n\nUna vez desactivado, puedes continuar explorando pero no podrás comprar o ver películas desde este dispositivo",OLD_SETTINGS_ADVANCED_DEACTIVATE_DESC_TITLE:"Desactivación",OLD_SETTINGS_INFO_AND_SETTINGS_TITLE:"INFORMACIÓN Y CONFIGURACIONES",OLD_SETTINGS_PARENTAL_CONTROLS_BUTTON:"Controles parentales",OLD_SETTINGS_PARENTAL_CONTROLS_DESC:"Límite:\n\n- Compra\n- Visualización",OLD_SETTINGS_PARENTAL_CONTROLS_DESC_TITLE:"Controles parentales",OLD_SETTINGS_SYSTEM_INFO_BUTTON:"Información del sistema",OLD_SETTINGS_SYSTEM_INFO_DESC:"Información acerca de:\n\n- Versión de software\n- Identificación del dispositivo\n- Identificación del hardware",OLD_SETTINGS_SYSTEM_INFO_DESC_TITLE:"Información del sistema",OLD_SETTINGS_AUDIO_SETTINGS_BUTTON:"Configuraciones de audio",OLD_SETTINGS_AUDIO_SETTINGS_DESC:"Seleccionar formato de salida de audio digital:\n\n- Estéreo PCM\n- Dolby Digital",OLD_SETTINGS_AUDIO_SETTINGS_DESC_TITLE:"Configuraciones de audio",OLD_SETTINGS_CREDITS_BUTTON:"Créditos",OLD_PARENTAL_CONTROLS_ARE_DISABLED:"Los controles parentales están actualmente desactivados. No podrás establecer los niveles máximos de clasificación hasta que habilites los controles parentales.",OLD_PARENTAL_CONTROLS_ARE_ENABLED:"Los controles parentales están actualmente activados. Los niveles máximos de clasificación serán respetados y te solicitarán el código de seguridad",OLD_PARENTAL_CONTROLS_PROMPT_TO_PLAY:"Pedir código para reproducir películas con una clasificación más alta que:",OLD_PARENTAL_CONTROLS_PROMPT_TO_PURCHASE:"Pedir código para comprar películas con una clasificación más alta que:",OLD_PARENTAL_CONTROLS_NO_MOVIES_WILL_BE_HIDDEN:"Ninguna película dejará de estar a la vista.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_WILL_NOT:"El intento de comprar una película no requerirá que se ingrese un código de seguridad.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_WILL_NOT:"El intento de reproducir una película no requerirá que se ingrese un código de seguridad.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_WILL:"El intento de comprar cualquier película requerirá que se ingrese un código de seguridad.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_WILL:"El intento de reproducir una película requerirá que se ingrese un código de seguridad.",OLD_PARENTAL_CONTROLS_MOVIES_RATED_HIGHER_THAN_X_HIDDEN:"Las películas con una clasificación más alta que %s no estarán visibles.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PURCHASE_RATED:"La compra de una película con una clasificación mayor que %s requerirá que se ingrese un código de seguridad.",OLD_PARENTAL_CONTROLS_ATTEMPTING_TO_PLAY_RATED:"La reproducción de una película con una clasificación mayor que %s requerirá que se ingrese un código de entrada.",OLD_PARENTAL_CONTROLS_NR_DESC:"La clasificación NR incluye películas con una clasificación 18+, NC-17 o películas que no tienen una clasificación oficial.",OLD_PARENTAL_CONTROLS_R_DESC:"La clasificación R incluye películas que tienen una clasificación R o TV-MA.",OLD_PARENTAL_CONTROLS_FAM_DESC:"La clasificación ATP incluye películas que no tienen una clasificación oficial pero son aptas para toda la familia.",OLD_PARENTAL_CONTROLS_PG13_DESC:"La clasificación PG-13 incluye películas que tienen una clasificación PG-13 o TV-14",OLD_PARENTAL_CONTROLS_PG_DESC:"La clasificación PG incluye películas que tienen una clasificación PG o TV-PG.",OLD_PARENTAL_CONTROLS_G_DESC:"La clasificación G incluye películas que tienen una clasificación G, TV-G o TV-Y7",OLD_PARENTAL_CONTROLS_TITLE:"CONTROLES PARENTALES",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_PASSCODE:"Ingresa tu código de entrada actual.",OLD_PARENTAL_CONTROLS_CHANGE_PASSCODE:"Cambiar el código de entrada",OLD_PARENTAL_CONTROLS_ARE_ENABLED_SHORT:"Los controles parentales están activados",OLD_PARENTAL_CONTROLS_ARE_DISABLED_SHORT:"Los controles parentales están desactivados",OLD_PARENTAL_CONTROLS_NEW_PASSCODE_SELECTED:"¡Nuevo código de entrada seleccionado!",OLD_PARENTAL_CONTROLS_PASSCODES_DONT_MATCH:"¡Los códigos de entrada no coinciden!",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_SAME:"Ingresa nuevamente el mismo código de entrada para verificar.",OLD_PARENTAL_CONTROLS_PLEASE_INPUT_NEW:"Ingresa un nuevo código de entrada.",OLD_PARENTAL_CONTROLS_PASSCODE_REQUIRED_TO_DISABLE:"Se requiere un código de entrada para desactivar los controles parentales.",OLD_PARENTAL_CONTROLS_PASSCODE_REQUIRED_TO_CHANGE:"Se requiere un código de entrada para cambiar los controles de clasificaciones.",OLD_PARENTAL_CONTROLS_ARE_AVAILABLE_TO_CONTROL:"Los controles parentales están disponibles para controlar el acceso a las películas del servicio VUDU. Cuando estén habilitados, podrás controlar qué películas estarán siempre disponibles y con cuáles se requerirá un código de entrada.",NO_RESULTS:"No se encontraron resultados.",ERROR_UV_UVLINKREQUIRED:"You need to link your VUDU account to an UltraViolet account in order to watch this movie. Please visit %s in order to create a new UltraViolet account it's free) or link to your existing UltraViolet account.",ERROR_UV_UVLINKREJECTED:"Your account may be currently running the maximum amount of allowed simultaneous streams. Please terminate one of the existing streams and try again.",ERROR_UV_NORIGHTSFORCONTENTVARIANT:"Your account does not currently have the rights to play back this movie. Please contact VUDU customer care.",ERROR_UV_GENERIC:"Unable to start playback. Please try again later, or contact VUDU customer care for help.",INTERSTITIAL_TITLE:"Diapositivas",INTERSTITIAL_SIMILAR_TITLE:"Similares",INTERSTITIAL_MORE_FROM_NETWORK:"Más desde %s",INTERSTITIAL_ACTION_RENT:"Renta/Compra",INTERSTITIAL_ACTION_PREORDER:"Pre-order",INTERSTITIAL_ACTION_BUY_SEASON:"Renta/Compra",INTERSTITIAL_ACTION_SEASON_PASS:"Pase de Temporada",INTERSTITIAL_ACTION_WATCH_X:"Ver %s",INTERSTITIAL_ACTION_WATCH:"Ver la próxima película",INTERSTITIAL_WATCH_ON_X:"%s",INTERSTITIAL_WATCH_IN_X:"%s",INTERSTITIAL_ACTION_ADD:"Agregar a la lista de favoritos",INTERSTITIAL_ACTION_PLAY_TRAILER:"Ver tráiler",INTERSTITIAL_ACTION_DETAILS:"Ver detalles",INTERSTITIAL_ACTION_SEEN_IT:"Califica",INTERSTITIAL_ACTION_NOT_INTERESTED:"No Mostrar",INTERSTITIAL_ACTION_SHARE:"Calificación/Compartir",INTERSTITIAL_ACTION_BACK:"Regresar",SPLASH_THE_WORLDS_LARGEST_HD:"+ La biblioteca HD más grande del mundo.",SPLASH_FULL_1080P_QUALITY:"+ Calidad full 1080p",SPLASH_WATCH_INSTANTLY:"+ Ver instantáneamente",SPLASH_DOLBY_DIGITAL_PLUS:"+ Sistema Dolby Digital Plus 7.1",SPLASH_DETAILS_COLON:"Detalles:",SPLASH_MORE_INFO_COLON:"Más información:",SPLASH_HARDWARE_ID:"Identificación del hardware:",SPLASH_DEVICE_ID:"Identificación del dispositivo:",SPLASH_SOFTWARE_BUILD:"SW Build #:",SPLASH_TIMEOUT:"Timeout",SPLASH_VUDU_DETECTED_THE_ETHERNET:"El cable de Ethernet no está conectado. Por favor conéctalo.",SPLASH_VUDU_HAS_LOST_CONNECTION:"VUDU ha perdido conexión con el servidor y tratará de reconectarse.",SPLASH_SORRY_VUDU_IS_NOT_AVAILABLE:"Lo lamentamos, VUDU no se encuentra disponible",SPLASH_WE_ARE_SORRY_THIS_CONTENT_SERVICE:"Lo lamentamos, este servicio de contenido solo se encuentra disponible para dispositivos vendidos en los Estados Unidos y México debido a las políticas de protección y acuerdos internacionales de derechos",SPLASH_THERE_IS_A_PROBLEM_WITH_THIS_DEVICE:"Hay un problema con este dispositivo.",SPLASH_PLEASE_CONTACT_YOUR_DEVICE_MANU:"Ponte en contacto con servicio al cliente del fabricante de tu dispositivo",SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK:"Falló al conectarse a la red.",SPLASH_PLEASE_PRESS_RETURN_AND_CHECK:'Presiona "RETURN" y verifica tus conexiones de red',SPLASH_CURL_TIMEOUT:"Curl timeout",SPLASH_BAD_COUNTRY:"País equivocado",SPLASH_SELECT_A_DIFFERENT_COUNTRY_AND:"Selecciona un país diferente e inténtalo de nuevo.",SPLASH_COUNTRY_CODE:"Código del país:",SPLASH_THERES_A_PROBLEM_WITH_THE_VUDU:"Hay un problema con el servicio VUDU",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER:"Ponte en contacto con Servicio al cliente de VUDU en %s",SPLASH_CODE_COLON:"Código",SPLASH_CURL_CODE_COLON:"Código del bucle:",SPLASH_LOADING_DOT_DOT:"Cargando...",SPLASH_MESSAGE_RECONNECTING:"Volver a conectar...",SPLASH_CHECK_YOUR_NETWORK_PRESS_PLAY:'Verifica tus conexiones de red y presiona "Play" para volver a intentar',SPLASH_NETWORK_CABLE_UNPLUGGED:"Cable de red desconectado o red desactivada",SPLASH_PLEASE_CHECK_YOUR_NETWORK_CABLE:"Revisa tu cable de red",SPLASH_PLEASE_CONSULT_YOUR_MANU_USER_MAN:"Consulta el manual del usuario para obtener información detallada sobre la configuración de red",SPLASH_CHECK_YOUR_NETWORK_CONNECTIONS:"Verifica tus conexiones de red",AV_SETTINGS_DIALOG_TITLE:"Configuraciones de Audio/Video",AV_SETTINGS_DIALOG_AUDIO_BUTTON:"Configuraciones de audio",AV_SETTINGS_DIALOG_VIDEO_BUTTON:"Configuraciones de Video",BANDWIDTH_REQUIREMENTS_DIALOG_TITLE:"Requisitos de velocidad de Internet",BANDWIDTH_REQUIREMENTS_DIALOG_FIRST_TIME:"Notamos que ésta es la primera vez que %s una película %s.\n \n",BANDWIDTH_REQUIREMENTS_DIALOG_TROUBLE_PLAYING:"Notamos que tu dispositivo ya ha tenido problemas al reproducir películas %s.\n\n",BANDWIDTH_REQUIREMENTS_DIALOG_YOU_CAN_WATCH:"Puedes ver los primeros %s minutos gratis para comprobar que tienes la velocidad suficiente.",BANDWIDTH_REQUIREMENTS_DIALOG_MOVIES_REQUIRE:"Las películas %s requieren una velocidad mínima de %s y una velocidad recomendada de %s.\n",BANDWIDTH_REQUIREMENTS_RECOMMEND_SPEED:"La velocidad detectada recomienda que rentes la película en %s para tener la mejor experiencia de VUDU.",BANDWIDTH_REQUIREMENTS_TEST_NETWORK:"Te gustaría probar tu red y conexión de Internet?",BANDWIDTH_REQUIREMENTS_TEST_NETWORK_AGAIN:"Te gustaría probar tu red y conexión de Internet otra vez?",BANDWIDTH_REQUIREMENTS_DIALOG_MBPS:"%s Mbps",BANDWIDTH_REQUIREMENTS_DIALOG_TEST_SPEED:"Probar Red",BANDWIDTH_REQUIREMENTS_DIALOG_TEST_INTERNET:"Probar tu conexión",BANDWIDTH_REQUIREMENTS_DIALOG_TRY_IT:"Probar",BANDWIDTH_REQUIREMENTS_DIALOG_WATCH_X_MIN_FREE:"Ver %s minutos gratis",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_RENT_IT:"Rentar sin probar",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_BUY_IT:"Comprar sin probar",BANDWIDTH_REQUIREMENTS_DIALOG_JUST_LET_ME_PREORDER_IT:"Just let me pre-order it",BANDWIDTH_REQUIREMENTS_DIALOG_CANCEL_BUTTON:"Cancelar",BUNDLE_DETAILS_INCLUDED_MOVIES:"Películas incluidas:",BUNDLE_DETAILS_INCLUDES:"Incluye:",MOVIE_DETAILS_N_A:"N/A",SHORT_MONTH_JAN:"Ene",SHORT_MONTH_FEB:"Feb",SHORT_MONTH_MAR:"Mar",SHORT_MONTH_APR:"Abr",SHORT_MONTH_MAY:"May",SHORT_MONTH_JUN:"Jun",SHORT_MONTH_JUL:"Jul",SHORT_MONTH_AUG:"Ago",SHORT_MONTH_SEP:"Set",SHORT_MONTH_OCT:"Oct",SHORT_MONTH_NOV:"Nov",SHORT_MONTH_DEC:"Dic",TIME_LEFT_STR_IN_ONE_MIN:"en 1 minuto",TIME_LEFT_STR_IN_X_MINS:"en %s minutos",TIME_LEFT_STR_IN_X_HOURS:"en %s hrs",TIME_LEFT_STR_ON_DATE:"en %s %s",TIME_LEFT_FOR_X_PRICE:"por $%s",BOTTOM_BLUE_HELP_BUTTON_HOME:"Página de inicio",PURCHASE_DIALOG_OK_BUTTON:"OK",PURCHASE_DIALOG_ALREADY_PURCHASED:"Ya has comprado esta película.",PURCHASE_DIALOG_ACCOUNT_PROBLEM:"Hay un problema con el nombre de usuario de tu cuenta. Ponte en contacto con Atención al cliente en www.vudu.mx",PURCHASE_DIALOG_OFFER_EXPIRED:"Esta oferta ya no se encuentra disponible. Pedimos disculpas por el inconveniente",PURCHASE_DIALOG_AMOUNT_CHANGED:"No se completó la transacción. El importe a pagar por esta compra ha cambiado debido a actividad reciente en la cuenta. Intentar nuevamente esta compra para ver el nuevo importe.",PURCHASE_DIALOG_INSUFFICIENT_FUNDS:"Tu cuenta no tiene fondos suficientes para esta compra. Visita %s para actualizar la información de tu cuenta",PURCHASE_DIALOG_PROBLEM_WITH_PAYMENT_DATA:"Se produjo un problema con tu información de pago. Actualiza tu información de pago visitando %s.",PURCHASE_DIALOG_PROBLEM_COMPLETING_PURCHASE:"Se produjo un problema al completar la compra. Inténtalo de nuevo más tarde.",PURCHASE_DIALOG_PROBLEM_COMPLETING_PREORDER:"There was a problem cancelling the Pre-order. Please try again later.",PURCHASE_DIALOG_PASSCODE_REQUIRED:"Se requiere un código de seguridad para ver esta película.",GENERIC_DIALOG_OK_BUTTON:"OK",KEYBOARD_DELETE_BUTTON:"Borrar",KEYBOARD_SYMBOLS_BUTTON:"Símbolos",KEYBOARD_LETTERS_BUTTON:"Letras",KEYBOARD_SPACE_BUTTON:"Espacio",KEYBOARD_CLEAR_BUTTON:"Limpiar",KEYBOARD_SHIFT_BUTTON:"MAY/min",TEXT_INPUT_DIALOG_CANCEL_BUTTON:"Cancelar",TEXT_INPUT_DIALOG_DONE_BUTTON:"Hecho",KEYBOARD_SEARCH_KEYS:"ABCDEFGHIJKLMNOPQRSTUVWXYZÁÉÍÑÓÚÜ123456789",MOVIE_DETAILS_MINUTES_SHORT:"min",GET_FULL_NAME_UNKNOWN:"Desconocido",WATCH_FREE:"Gratuito",GET_BEST_OFFER_VALID_FOR:"Oferta válida por %s",GET_BEST_PREORDER_OFFER_AVAILABLE_ON:"Pre-order: Available on %s",GET_BEST_OFFER_AVAILABLE_ON:"Disponible en %s",GET_BEST_OFFER_AVAILABLE_IN:"Disponible en %s",GET_BEST_OFFER_RENT_FOR:"Rentar por $%s",GET_BEST_OFFER_OWN_FOR:"Comprar por $%s",GET_BEST_OFFER_FROM:"%s de $%.2f",GET_BEST_OFFER_SEASON_FROM:"%s temporada de $%.2f",GET_BEST_OFFER_YOU_OWN_IT:"Comprada",GET_BEST_OFFER_YOU_PREORDERED_IT:"You Pre-ordered It",GET_BEST_OFFER_TIME_LEFT:"Quedan %s",GET_BEST_OFFER_RENT:"Renta",GET_BEST_OFFER_OWN:"Compra",GET_PRICE_STRING:"$%s",MORE_INFO_GENRES:"Género:",MORE_INFO_LENGTH:"Duración:",MORE_INFO_RELEASED:"Año:",MORE_INFO_RATING:"Clas.:",MORE_INFO_STUDIO:"Estudio:",MORE_INFO_NETWORK:"Red:",MORE_INFO_LANGUAGE:"Idioma:",MORE_INFO_FULLSCREEN:"Pantalla completa",MORE_INFO_WIDESCREEN:"Pantalla ancha",MORE_INFO_ENHANCED_WIDESCREEN:"Pantalla ancha mejorada",MORE_INFO_STEREO:"Estéreo",MORE_INFO_MINUTES:"%s minutos",AVAIL_INFO_RENT:"Renta",AVAIL_INFO_OWN:"Compra",AVAIL_INFO_TIME_LEFT:"Quedan %s",AVAIL_INFO_DELETING_DOWNLOAD:"Eliminando descarga",AVAIL_INFO_DOWNLOAD_ERROR:"Descargar %s",AVAIL_INFO_DOWNLOAD_UNAVAILABLE:"No disponible",MOVIE_DETAILS_ENHANCED_WIDESCREEN:"Pantalla ancha mejorada",MOVIE_DETAILS_FULLSCREEN:"Pantalla completa",MOVIE_DETAILS_WIDESCREEN:"Pantalla ancha",MOVIE_DETAILS_STEREO:"Estéreo",MOVIE_DETAILS_SURROUND_SOUND:"Sonido Surround",MOVIE_DETAILS_COLOR:"Color",MOVIE_DETAILS_B_W:"B&W",MOVIE_DETAILS_CAST_CREW:"Equipo artístico y técnico",MOVIE_DETAILS_RENT_OWN_BUTTON:"Rentar/Comprar",MOVIE_DETAILS_RENT_BUTTON:"Rentar",MOVIE_DETAILS_OWN_BUTTON:"Comprar",MOVIE_DETAILS_PREORDER_BUTTON:"Pre-order",MOVIE_DETAILS_SEASON_PURCHASE_BUTTON:"Comprar Season",MOVIE_DETAILS_SEASON_PASS_BUTTON:"Pase de Temporada",MOVIE_DETAILS_MANAGE_PREORDER:"Manage Pre-order",MOVIE_DETAILS_WATCH_TRAILER:"Tráiler",MOVIE_DETAILS_X_MINUTE_PREVIEW:"%s min gratis",MOVIE_DETAILS_ADD_TO_WISHLIST:"+ wishlist",MOVIE_DETAILS_REMOVE_FROM_WISHLIST:"- wishlist",MOVIE_DETAILS_RATE_SHARE:"Calificar",MOVIE_DETAILS_RATE:"Calificación",MOVIE_DETAILS_WATCH_X:"Ver %s",MOVIE_DETAILS_RESUME_X:"Continuar %s",MOVIE_DETAILS_WATCH_ON_X:"Ver en %s",MOVIE_DETAILS_WATCH_IN_X:"Watch en %s",MOVIE_DETAILS_COMING_SOON:"Próximos estrenos",MOVIE_DETAILS_WATCH_SOON:"Ver Pronto",MOVIE_DETAILS_AVAILABLE_SOON:"Disponible Pronto",MOVIE_DETAILS_UNAVAILABLE:"Indisponible",MOVIE_DETAILS_EPISODE_X_SEASON_X_ABBREV:"Ep%s : S%s",MOVIE_DETAILS_OFFER_VALID_FOR:"Oferta válida por %s",MOVIE_DETAILS_AVAILABLE_X:"Disponible %s",SIDE_PANEL_DIRECTOR:"Director",SIDE_PANEL_ACTORS:"Actores",SIDE_PANEL_BUNDLES:"Combos",SIDE_PANEL_PLUS_X_MORE:"¡...Mas %s más!",SIDE_PANEL_EPISODE:"Episodio",SIDE_PANEL_SEASON:"Temporada",SIDE_PANEL_SERIES:"Series",SIDE_PANEL_X_MINUTE_FREE_PREVIEW:"%s min gratis",HOME_TOP_BLUE_BUTTON_SIGN_UP_NOW:"Registrarse ahora",HOME_TOP_BLUE_BUTTON_USE_X_MONEY:"Usar $%s",MOVIE_DETAILS_TRAILER_PASSCODE_REQUIRED:"Se requiere un código de seguridad para ver este tráiler.",RATING_WIDGET_MY_RATING:"Mi calificación",RATING_WIDGET_COMMUNITY_RATING:"Comunidad VUDU",POSTER_RED_BANNER_OWN_FROM:"Comprar desde $%s",POSTER_RED_BANNER_WATCH_X:"Ver %s",POSTER_LIST_RANGE_X_TO_Y_OF_Z:"%s - %s de %s",QUALITY_CHOICE_DIALOG_PLEASE_SELECT_VIEWING:"Seleccionar calidad de visualización",QUALITY_CHOICE_DIALOG_YOU_CAN_CHANGE:'(Puedes cambiar esto más tarde presionando "Info" durante la nueva reproducción)',QUALITY_CHOICE_DIALOG_BRILLIANT_1080P:"Brilliante 1080p: Nuestra mejor calidad",QUALITY_CHOICE_DIALOG_DOLBY_DIGITAL_PLUS:"Sistema Dolby Digital Plus 5.1 Surround",QUALITY_CHOICE_DIALOG_NEEDS_4_5:"Necesita una velocidad de Internet de 4,5 Mbps",QUALITY_CHOICE_DIALOG_720P_BANDWIDTH:"720p: HD apto para banda ancha",QUALITY_CHOICE_DIALOG_NEEDS_225_MBPS:"Necesita una velocidad de Internet de 2,25 Mbps",QUALITY_CHOICE_DIALOG_480P_DVD:"480p: Calidad DVD",QUALITY_CHOICE_DIALOG_STEREO_SOUND:"Sonido estéreo",QUALITY_CHOICE_DIALOG_NEEDS_1_MBPS:"Necesita una velocidad de Internet de 1 Mbps",QUALITY_DIALOG_IT_APPEARS_YOU:"Parece que has estado teniendo problemas con la descarga y visualización simultánea de esta película en %s del nivel de calidad. ¿Te gustaría seleccionar un nivel de calidad diferente? Al seleccionar un nivel de calidad inferior te permitirá iniciar una nueva reproducción con menos interrupciones debido a una conexión deficiente.",QUALITY_DIALOG_CONTINUE_X:"Continuar %s",QUALITY_DIALOG_SWITCH_TO_X:"Cambiar a %s",RATE_DIALOG_TITLE:"Calificación",RATE_DIALOG_HOW_DID_YOU:"¿Te gustó la película?",RATE_DIALOG_USE_THE_L_R:'Usa el cursor derecho o izquierdo en tu control remoto para calificar la película. Presiona "Select" cuando lo hayas hecho.',RATE_DIALOG_NO_RATING:"No calificar",RATE_DIALOG_DONE_BUTTON:"Hecho",RATE_DIALOG_RETURN_BUTTON:"Volver",SEARCH_DIALOG_ENTER_A_NAME_TO_SEARCH:"Ingresa un nombre para buscar",SEARCH_DIALOG_X_SEARCH_RESULTS:"%s resultados de la búsqueda",SEARCH_DIALOG_X_SEARCH_RESULT:"%s resultado de la búsqueda",SEARCH_DIALOG_NO_SEARCH_RESULTS:"No hay resultados para la búsqueda",SEARCH_DIALOG_TOP_SEARCH_RESULTS:"Resultados principales de la búsqueda",THEATER_HEADER_CHAPTERS_BUTTON:"Capítulos",THEATER_HEADER_SWITCH_QUALITY_BUTTON:"Cambiar calidad",THEATER_ERROR_POPUP_OK_BUTTON:"OK",THEATER_ERROR_POPUP_MOVIE_ERROR:"Error de película",THEATER_ERROR_POPUP_PLAYER_ERROR:"Error de reproductor",THEATER_ERROR_POPUP_NETWORK_ERROR:"Error de red",THEATER_ERROR_POPUP_PLAYBACK_ERROR:"Error de nueva reproducción",THEATER_ERROR_POPUP_RENTAL_EXPIRED:"El periodo de renta ha vencido",THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK:"En este momento, la descarga directa de esta película no es posible debido a un error de red.\nInténtalo de nuevo más tarde.",THEATER_3D_POPUP_WEAR_YOUR_GLASSES:"Usa sus lentes 3D.\nPresiona el botón de encendido de los lentes.",THEATER_ERROR_POPUP_THIS_MOVIES_RENTAL_PERIOD_EXPIRED:"El periodo de renta de esta película ha vencido.\nSi decides rentarla nuevamente, tu video comenzará donde la hayas dejado de ver.",THEATER_ERROR_POPUP_THIS_MOVIES_ANOTHER_DEVICE:"Otro dispositivo en tu cuenta ha iniciado la reproducción de esta película.",THEATER_LOADING_CHAPTER_X:"Cargando capítulo %s",THEATER_LOADING_CHAPTER_X_4:"Cargando capítulo %s...",THEATER_LOADING_4:"Cargando...",THEATER_LOADING_CHAPTER_X_3:"Cargando capítulo %s...",THEATER_LOADING_3:"Cargando...",THEATER_LOADING_2:"Cargando...",THEATER_SUBTITLE_NONE:"Off",OFFER_DIALOG_RENT:"Rentar",OFFER_DIALOG_OWN:"Comprar",OFFER_DIALOG_SEASON_PASS:"Pase de Temporada",OFFER_DIALOG_RENTAL:"Rentar",OFFER_DIALOG_PURCHASE:"Compra",OFFER_DIALOG_PREORDER:"Pre-order",OFFER_DIALOG_PREORDER:"Confirm Pre-order",OFFER_DIALOG_CANCEL:"Cancelar",CONFIRM_OFFER_DIALOG_CANCEL:"Cancelar",TRANSACTION_SUCCESS_DIALOG_THANK_YOU:"Gracias",TRANSACTION_SUCCESS_DIALOG_WATCH_NOW:"Ver ahora",TRANSACTION_SUCCESS_DIALOG_TRANS_COMPLETE:"Transacción completa",PREORDER_SUCCESS_DIALOG_TRANS_COMPLETE:'You have successfully pre-ordered the %s. You can check the status of your order at "My Pre-orders" under "My VUDU".',TRANSACTION_SUCCESS_DIALOG_WATCH_LATER:"Ver más tarde",TRANSACTION_SUCCESS_DIALOG_DOWNLOAD_NOW:"Descargar y ver más tarde",TRANSACTION_SUCCESS_DIALOG_DONE:"Hecho",PREVIEW_DIALOG_WATCH_A_X_MIN_PREVIEW:"Ver un avance de %s min - Elegir una resolución",PREVIEW_DIALOG_PREVIEW_OPTIONS:"Opciones de",PREVIEW_DIALOG_1080P:"1080p",PREVIEW_DIALOG_720P:"720p",PREVIEW_DIALOG_480P:"480p",PREVIEW_DIALOG_CANCEL:"Cancelar",PREVIEW_PURCHASE_DIALOG_PREVIEW_COMPLETE:"Terminó avance gratis",PREVIEW_PURCHASE_DIALOG_TO_CONTINUE:"Para continuar viendo esta película:",PREVIEW_PURCHASE_DIALOG_TO_CONTINUE_EPISODE:"Para continuar viendo este episodio:",PREVIEW_PURCHASE_DIALOG_RENT_FOR:"Rentar por %s",PREVIEW_PURCHASE_DIALOG_OWN_FOR:"Comprar por %s",PREVIEW_PURCHASE_DIALOG_NO_THANKS:"No, gracias",TRANSACTION_DIALOGS_EPISODE_X_SEASON_X_ABBREV:"Ep%s : S%s",CONFIRM_OFFER_RENTAL:"Renta",CONFIRM_OFFER_PURCHASE:"Compra",CONFIRM_OFFER_RENT:"Rentar",CONFIRM_OFFER_OWN:"Comprar",CONFIRM_OFFER_CONFIRM_X:"Confirmar %s",CONFIRM_OFFER_X_FOR_PRICE:"%s por $%s",CONFIRM_OFFER_Y_FOR_PRICE:"%s por $%.2f",CONFIRM_PREORDER:"Pre-order",CONFIRM_OFFER_THIS_TITLE_AVAILABLE:"Este título estará disponible durante %s. \nUna vez que hayas empezado la reproducción, tienes %s para ver la película.",CONFIRM_OFFER_THIS_TITLE_ADDED:"El título se agregará a tu biblioteca",CONFIRM_OFFER_THIS_TITLE_PREORDER:"Your digital movie and any additional bonus content will be available in your account once your order has been processed. Your credit card will not be charged until the release date.",CONFIRM_OFFER_TOTAL:"Total tarjeta de crédito",CONFIRM_OFFER_X_PRICE:"$%s",CONFIRM_OFFER_SALES_TAX:"Impuestos",CONFIRM_OFFER_CREDIT:"Crédito",CONFIRM_OFFER_PRICE:"Precio",CONFIRM_OFFER_NEG_X_PRICE:"-$%s",CONFIRM_OFFER_PROCESSING:"Transacción en proceso",MANAGE_PREORDER_TITLE:"Manage Pre-order",MANAGE_PREORDER_DESC:"Thank you for your pre-order. Your digital movie and any additional bonus content will be available in your account once your order has been processed. Your credit card will not be charged until release date.",MANAGE_CANCEL_TO_PREORDER_DESC:"You have already pre-ordered this digital movie in %s. You can switch or upgrade to another definition by cancelling this order and placing a new one.",MANAGE_PREORDER_CANCEL:"Cancel Pre-order",MANAGE_PREORDER_BACK:"Back",CANCEL_PREORDER_SUCCESS_TITLE:"Manage Pre-order",CANCEL_PREORDER_SUCCESS_DESC:"Your pre-order has been cancelled successfully.",CANCEL_PREORDER_SUCCESS_DONE:"Done",SUBTAB_SETTINGS_PRESS_ENTER_FOR_INFO:'Presionar "Enter" para Información y configuraciones',SPLASH_COUNTRY_CHANGED:"Cambio de país",SPLASH_THE_COUNTRY_DETECTED_FOR_THIS_DEVICE:"El país detectado para este dispositivo ha cambiado a %s. Presionar 'RETURN' y luego activar VUDU nuevamente para finalizar la configuración de tu país.",SPLASH_CONNECTING_DOT_DOT:"Conectando...",KEYBOARD_DONE_BUTTON:"Hecho",RATESHARE_TITLE:"Calificar",RATESHARE_SUB_TITLE:"Califica la película.",RATESHARE_DESC_1:"Usa flechas der / izq de tu control para calificar.",RATESHARE_DESC_PS_1:"Usa flechas der / izq de tu control para calificar.",RATESHARE_DESC_2:"Selecciona %s al terminar.",RATESHARE_POINTER_DESC:"Clic las flechas der / izq para calificar la %s.",RATESHARE_NO_RATING:"No calificar",RATESHARE_DONE:"Hecho",OVERSCAN_TITLE:"CONFIGURACION DE PANTALLA",OVERSCAN_MAIN_TEXT:"Optimiza tu experiencia de visualización adaptando el tamaño de la imagen a tu pantalla.",OVERSCAN_SUB_TEXT:"Ajusta los valores hasta que la punta de las flechas toquen las orillas de tu pantalla.",OVERSCAN_LEFT:"Izquierda",OVERSCAN_RIGHT:"Derecha",OVERSCAN_TOP:"Arriba",OVERSCAN_BOTTOM:"Abajo",OVERSCAN_RESET:"Cambiar a tamaño original",OVERSCAN_BACK:"Volver a configuraciones",SPEED_TEST_TITLE:"TEST DE VELOCIDAD DE LA RED",SPEED_TEST_WHAT_IS:"¿Qué es el Test de velocidad de la red?",SPEED_TEST_INIT_TEXT:"Este test de un minuto determinará qué calidades de video son compatibles con la red y la conexión a Internet de tu casa.",SPEED_TEST_RESULT_TEXT:"El Test de velocidad de la red muestra que la red y la conexión a Internet de tu casa podrán reproducir videos hasta una calidad de %s.",SPEED_TEST_SD_RESULT_TEXT:"El Test de velocidad de la red muestra que la red y la conexión a Internet de tu casa podrán reproducir videos de una calidad de %s.",SPEED_TEST_STATUS_TITLE:"Estado",SPEED_TEST_STATUS_IDLE:"Inactivo",SPEED_TEST_STATUS_PROGRESS:"Test en progreso",SPEED_TEST_STATUS_COMPLETE:"Test finalizado",SPEED_TEST_STATUS_INCOMPLETE:"Test incompleto",SPEED_TEST_RESULTS_TITLE:"Resultados del test",SPEED_TEST_QUALITY_TITLE:"Calidad",SPEED_TEST_NW_PROBLEMS:"El test no se pudo completar debido a problemas de red. Inténtalo de nuevo.",SPEED_TEST_VUDU_RECOMMENDS:"VUDU recomienda ",SPEED_TEST_START:"Comenzar el test",SPEED_TEST_IN_PROGRESS:"En Progreso",SPEED_TEST_TEST_AGAIN:"Prueba de nuevo",SPEED_TEST_NETWORK_TIPS:"Recomendaciones de red",SPEED_TEST_BACK_SETTINGS:"Volver a configuraciones",SPEED_TEST_BACK:"Volver",NETWORK_TIPS_TITLE:"Tips sobre tu red",NETWORK_TIPS_QUEST_1:"¿Recibes suficiente velocidad de Internet de tu proveedor de servicio de Internet? (PSI)",NETWORK_TIPS_QUEST_2:"¿Utilizas una conexión inalámbrica a tu dispositivo VUDU?",NETWORK_TIPS_QUEST_3:"¿No tienes la velocidad adecuada para la calidad de video deseada?",NETWORK_TIPS_ANS_1:"Asegúrate de que la red de tu casa tenga suficiente ancho de banda. 4.5 Mbps para HDX, 2.25 Mbps para HD y 1.0 Mbps para SD. Comunícate con tu PSI para actualizar tu velocidad de Internet.",NETWORK_TIPS_ANS_2_LEFT_TEXT:"Para determinar si el problema es la conexión inalámbrica a tu dispositivo, utiliza tu computadora para realizar un test en www.vudu.com/speedtest.\nSi los resultados de tu computadora son iguales a los resultados de tu dispositivo VUDU, posiblemente debas comunicarte con tu PSI para realizar una actualización.\nSi los resultados de tu computadora son mejores que los resultados del dispositivo VUDU, es posible que tengas problemas con tu conexión inalámbrica. Paredes, techos y pisos pueden limitar la potencia de la señal",NETWORK_TIPS_ANS_2_RIGHT_TEXT:"que llega a tu adaptador inalámbrico. Además, demasiados dispositivos inalámbricos funcionando en la misma red o frecuencia pueden afectar la potencia de la señal. Aquí se muestran algunas sugerencias:\n\nA. Minimiza la distancia entre tu dispositivo VUDU y tu router.\n\nB. También puedes probar cambiar el canal o la frecuencia que tu router y adaptador utilizan para comunicarse. Comunícate con el fabricante para obtener asistencia con el cambio de configuración.\n\nC. Elimina posibles fuentes de interferencia a la rede inalámbrica apagando el horno de microondas o teléfonos inalámbricos.\n\n(Continúa en la página siguiente.)",NETWORK_TIPS_ANS_3:"Si las sugerencias anteriores no te resultan útiles, puedes encontrar más consejos en nuestro sitio web: www.vudu.mx/support, o puedes comunicarte con Atención al cliente.",NETWORK_TIPS_NEXT_PAGE:"Página siguiente",NETWORK_TIPS_PREV_PAGE:"Página anterior",NETWORK_TIPS_BACK:"Volver",TIME_STRING_SECOND:"seg",TIME_STRING_MINUTE:"min",TIME_STRING_HOUR:"hr",TIME_STRING_DAY:"día",TIME_STRING_SECOND_PLURAL:"segs",TIME_STRING_MINUTE_PLURAL:"mins",TIME_STRING_HOUR_PLURAL:"hrs",TIME_STRING_DAY_PLURAL:"días",BANDWIDTH_DIALOG_BUTTON_RENT_IT:"Rentar",BANDWIDTH_DIALOG_BUTTON_BUY_IT:"Comprar",BANDWIDTH_DIALOG_BUTTON_PREORDER_IT:"Pre-order it",BANDWIDTH_DIALOG_BUTTON_RENTING_TEXT:"rentas",BANDWIDTH_DIALOG_BUTTON_BUYING_TEXT:"compras",BANDWIDTH_DIALOG_BUTTON_PREORDERING_TEXT:"pre-ordering",BANDWIDTH_DIALOG_BUTTON_PLAYING_TEXT:"reproduce",PURCHASE_DIALOG_PASSCODE_REQUIRED_PURCHASE:"Se requiere un código de seguridad para comprar esta película.",PURCHASE_DIALOG_PASSCODE_REQUIRED_PURCHASE_WITHOUT_CONTENT_TYPE:"Se requiere un código de seguridad para comprar ",SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER_URL:"Ponte en contacto con servicio al cliente de VUDU en http://support.vudu.mx",FACEBOOK_SHARE_RATINGS:"{*actor*} calificó %s %0.1f estrellas en VUDU!",FACEBOOK_SHARE_WISH:"{*actor*} quiere ver el %s en VUDU!",FACEBOOK_SHARE_CHECKOUT:"{*actor*} quiere que veas %s en VUDU!",FACEBOOK_WATCH_VUDU:"Ve en VUDU",FACEBOOK_SENT_FROM:"Enviado desde mi",FACEBOOK_VUDU_ENABLED:"VUDU-enabled %s",TWITTER_SHARE_RATINGS:"calificó %q %0.1f estrellas en #VUDU! %s",TWITTER_SHARE_CHECKOUT:"te recomiendo ver %s %q en #VUDU! %s",CONTENT_TYPE_PROGRAM:"esta película",CONTENT_TYPE_EPISODE:"este episodio",CONTENT_TYPE_SEASON:"esta temporada",CONTENT_TYPE_SERIES:"esta serie",CONTENT_TYPE_BONUS:"este tráiler",CONTENT_TYPE_VIDEO:"este video",CONTENT_TYPE_BUNDLE:"este combo",VIEW_OF_VIEWALL:"Ver",ALL_OF_VIEWALL:"Todo",HELP_SHOW_HELP_MENU:"Mostrar / Ocultar este menu",HELP_GOTO_HOME:"Ir al Home",HELP_PREV_PAGE:"Regresar",HELP_PREV_PAGE_EXIT:"Regresar / Salir",HELP_SHOW_SYSTEM_MENU:"Mostrar System menu",HELP_TV_FEATURES:"TV Features",HELP_EXIT_VUDU_MOVIES:"Salir de VUDU",SETTINGS_CLOSED_CAPTION_OPTION:"Seteo de subtítulos",SETTINGS_CLOSED_CAPTION_HEADING:"Subtítulos",SETTINGS_CLOSED_CAPTION_DEFAULT:"Reajustar",FONT_TITLE:"Fuente",STYLE_TITLE:"Estilo",COLOR_TITLE:"Color",SIZE_TITLE:"Tamaño",TEXT_EDGE:"Edge",TEXT_TRANSPARENCY:"Text Transparency",BACKGROUND_TITLE:"Color de fondo",BACKGROUND_TRANSPARENCY:"Background Transparency",WINDOW_TITLE:"Window",WINDOW_TRANSPARENCY:"Window Transparency",CC_AUTO:"Auto",FONT_CURSIVE:"Cursiva",FONT_CASUAL:"Casual",FONT_MONOSPACE:"Monospace",FONT_SERIF:"Serif",FONT_SANS_SERIF:"Sans Serif",FONT_MONO_SANS_SERIF:"Mono Sans Serif",FONT_CAPS:"Mayúscula",SIZE_SMALL:"Pequeño",SIZE_MEDIUM:"Mediano",SIZE_LARGE:"Grande",COLOR_TRANSPARENT:"Transparente",COLOR_BLACK:"Negro",COLOR_WHITE:"Blanco",COLOR_RED:"Rojo",COLOR_GREEN:"Verde",COLOR_BLUE:"Azul",COLOR_MAGENTA:"Magenta",COLOR_YELLOW:"Amarillo",COLOR_CYAN:"Cyan",STYLE_BOLD:"Negrita",STYLE_ITALIC:"Itálica",STYLE_BOLD_ITALIC:"Itálica negrita",STYLE_BOLD_UNDERLINE:"Negrita subrayado",STYLE_ITALIC_UNDERLINE:"Itálica subrayado",STYLE_BOLD_ITALIC_UNDERLINE:"Itálica negrita subrayado",EDGE_RAISED:"Raised",EDGE_DEPRESSED:"Depressed",EDGE_UNIFORM:"Uniform",EDGE_DROP_SHADOWED:"Drop Shadowed",TEXT_TRANSPARENCY_TRANSPARENT:"Transparent",TEXT_TRANSPARENCY_SEMI_TRANSPARENT:"Semi transparent",TEXT_TRANSPARENCY_OPAQUE:"Opaque",TRANSPARENCY_TRANSPARENT:"Transparent",TRANSPARENCY_SEMI_TRANSPARENT:"Semi transparent",TRANSPARENCY_OPAQUE:"Opaque",SUBTAB_ENDORSED:"Endorsed"};vui.strings.register("es",e)}(),Request.VuduJSON=new Class({Extends:Request.JSON,JSONFilter:function(e){var t=e.match(/^\/\*-secure-([\s\S]*)\*\/\s*$/);return t[1]?t[1]:null},success:function(e){e=this.JSONFilter(e),this.parent(e)}});var VuduHashExtend={toDirectorQueryString:function(n){var a=[];return Hash.each(this,function(e,t){var i;switch(n&&(t=n),$type(e)){case"object":i=Hash.toDirectorQueryString(e,t);break;case"array":var s={};e.each(function(e,t){s[t]=e}),i=Hash.toDirectorQueryString(s,t);break;default:i=t+"="+encodeURIComponent(e)}null!=e&&a.push(i)}),a.join("&")}};Hash.implement(VuduHashExtend);var toRedactList=["sessionKey","xboxOneToken","xboxToken","password"];function getPrintablePOSTRequest(i){return toRedactList.each(function(e){var t=new RegExp("&"+e+"=[^&]*");i=i.replace(t,"&"+e+"=*****")}),i}function getPrintableGETRequest(i){return toRedactList.each(function(e){var t=new RegExp("/"+e+"/[^/]*");i=i.replace(t,"/"+e+"/*****")}),i}function supportsUHD(){return vui.vvPlatform.uhdSupport&this.UHD_SUPPORT_SDR}function supportsHDR10(){return vui.vvPlatform.uhdSupport&this.UHD_SUPPORT_HDR10}function supportsDV4(){return vui.vvPlatform.uhdSupport&this.UHD_SUPPORT_DV4}function supportsDV5(){return vui.vvPlatform.uhdSupport&this.UHD_SUPPORT_DV5}function supportMain10(){return!!Array.isArray(vui.vvPlatform.videoProfiles)&&vui.vvPlatform.videoProfiles.contains("main10")}function mapHDXOrderPreference(){var e=["highP"];return supportMain10()&&vui.gConnectionInstance.getMain10HDXEnabled()&&e.unshift("main10"),e}function mapUhdOrderPreference(){var e=["highP"];return supportsUHD()&&(supportsHDR10()||supportsDV4()?supportsHDR10()&&!supportsDV4()?e.unshift("hdr10","main10","dvheDtr"):supportsHDR10()&&supportsDV4()?e.unshift("dvheDtr","hdr10","main10"):!supportsHDR10()&&supportsDV4()&&e.unshift("dvheDtr","main10"):e.unshift("main10","dvheDtr"),supportsDV5()&&e.unshift("dvheStn")),e}function getBestEdition(e){1===this.UHD_Order_Preference.length&&(this.UHD_Order_Preference=mapUhdOrderPreference());var t=this.UHD_Order_Preference;vui.gConnectionInstance.getIsHideUHD()&&(t=isSamsungJazz()?["dvheDtr","highP"]:t.filter(function(e){return"dvheStn"!==e}));var i=vui.gConnectionInstance.getMVPForced();i&&(t=[i]);for(var s=0,n=t.length;s<n;s++)for(var a=0,o=e.length;a<o;a++)if(t[s]===e[a].videoProfile[0]&&"dash"===e[a].editionFormat[0])return{editionId:e[a].editionId[0],videoProfile:e[a].videoProfile[0]};return{editionId:null,videoProfile:null}}function isSamsungJazz(){return-1<VUDU.registry.deviceId.indexOf("SAMT:16_JAZZM_UHD")}function getUHDVariant(e){return e.filter(function(e){return"uhd"===e.videoQuality[0]})}function isDashStreamAvailable(e,t){var i=e.filter(function(e){return e.videoQuality[0]===t});return!!(i.length&&i[0].editions[0]&&i[0].editions[0].edition)&&i[0].editions[0].edition.some(function(e){return"dash"===e.editionFormat[0]})}function getEditionVideoProfile(e,t){var i=e&&vui._.aStr(e.contentVariants)&&e.contentVariants[0].contentVariant,s=isVariantUHD(t,i);if(vui.gConnectionInstance.getIsMVPEnabled()&&vui.vvPlatform.uhdSupported&&vui._.isUHDContent(e)&&i&&s){var n=getUHDVariant(i);if(n[0].editions[0].edition)return getBestEdition(n[0].editions[0].edition).videoProfile}return""}function isVariantUHD(t,e){if(Array.isArray(e))return e.some(function(e){return e.contentVariantId[0]===t&&"uhd"===e.videoQuality[0]})}function isMaContent(e){return"true"===vui._.aStr(e.ptoKeyChestMaEligible)}function getXofYTokenPurchasePlan(e,t,s){var i={_type:"purchaseForTokenPreflight",offerId:e,tokenOfferId:t,accountId:vui.account.getAccountId()};vui.getModel().doQuery(i,function(e,t,i){i&&i.purchasePlan&&i.purchaseStatus?s(i.purchaseStatus,i.purchasePlan):(alert("Bad purchaseForTokenPreflight ","error"),s(null))})}function purchaseXofYWithToken(e,t,i,n){var s={_type:"purchaseForTokenRequest",offerId:e,tokenOfferId:t,accountId:vui.account.getAccountId(),expectedPurchasePlan:i};vui.getModel().doQuery(s,function(e,t,i){var s;i?("alreadyPurchased"==(s=i.purchaseStatus)?alert("Attempted to purchase offerId with token but movie already purchased","warning"):"ok"==s&&alert("XofY token purchase status",s,"info"),n(s)):(alert("Bad status. Status="+t,"error"),n(null))})}function getDeepLinkParamsFromQueryString(){var e={},t=JSON.decode(vui.args.data);if(t)return e.campaignId=t.campaignId||"",t.contentId?(e.type="content",e.contentId=t.contentId):t.uxRowId?(e.type="uxRow",e.uxRowId=t.uxRowId):t.uxPageId?(e.type="uxPage",e.uxPageId=t.uxPageId):t.uiPageId?(e.type="uiPage",e.uiPageId=t.uiPageId):t.uiEntryId?(e.type="uiEntry",e.uiEntryId=t.uiEntryId):t.spotlightTab?(e.type="spotlightTab",e.spotlightTab=t.spotlightTab):t.listName&&(e.type="myVuduTab",e.myVuduTab=t.listName),e}function getThirdPartyInfo(e,t){var i,s={},n=vui.m.getBestOffer(e);if(e&&e.ownerships&&vui.m.isOwnedOrRented(e.ownerships)||n[0].contains("Pre-Ordered"))return s.hasOffers=!1,s.more=!1,s.title="",s.icons=[],s;n[2]||"true"===vui._.aStr(e.isAdvertEnabled)?(s.hasOffers=!0,s.title=vui.strings.getTransformedText("THIRD_PARTY_ALSO_ON")):(s.hasOffers=!1,s.title=vui.strings.getTransformedText("THIRD_PARTY_WATCH_ON")),i="detail"===t?s.hasOffers?1:3:2;var a=e.subscriptionServiceContents[0].subscriptionServiceContent.map(function(e){return vui._.aStr(e.subscriptionServiceId)});s.icons=[];for(var o=0;o<a.length;o++){var r=vui.getModel().getThirdPartyImageUrl("whiteLogo/"+a[o]+"-96");if(r&&s.icons.push(r),s.icons.length===i)break}return a.length>i?s.more=!0:s.more=!1,s}function bSearch(e,t,i,s){null==s&&(s=!0);for(var n=0,a=e.length-1,o=null,r=null;n<=a;)if(i(r=e[o=n+Math.floor((a-n)/2)],t)<0)n=o+1;else{if(!(0<i(r,t)))return[o];a=o-1}return s&&r?i(t,r)<0?0<o?[o-1,o]:[o]:o<e.length-1?[o,o+1]:[o]:[]}function bSearchNumbers(e,t,i){return null==i&&(i=!0),bSearch(e,t,function(e,t){return e-t},i)}this.UHD_SUPPORT_NONE=0,this.UHD_SUPPORT_SDR=1,this.UHD_SUPPORT_HDR10=2,this.UHD_SUPPORT_DV4=4,this.UHD_SUPPORT_DV5=8,this.UHD_Order_Preference=["highP"],Request.VuduJSONP=new Class({Extends:Request.JSONP,getScript:function(e){var t,i,s=Request.JSONP.counter;switch(Request.JSONP.counter++,$type(e.data)){case"element":t=document.id(e.data).toQueryString();break;case"object":case"hash":t=Hash.toQueryString(e.data)}2083<(i=this.options.doPath?e.url+"/"+(e.callbackKey||this.options.callbackKey)+"/Request.JSONP.request_map.request_"+s+(t?"/"+t:""):e.url+(e.url.test("\\?")?"&":"?")+(e.callbackKey||this.options.callbackKey)+"=Request.JSONP.request_map.request_"+s+(t?"&"+t:"")).length&&this.log("JSONP "+i+" will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs");var n=new Element("script",{type:"text/javascript",src:i});return Request.JSONP.request_map["request_"+s]=function(){this.success(arguments,n,s)}.bind(this),n.inject(this.options.injectScript)}}),-1===navigator.userAgent.indexOf("Maple")&&-1===navigator.userAgent.indexOf("SmartHub")?window.isMaple=!1:window.isMaple=!0,Request.runPOSTRequest=function(e,t,n){var a=new XMLHttpRequest;a.open("POST",e,!0),vui.vvPlatform.isLightDevice&&!vui.vvPlatform.inBrowser()&&a.setRequestHeader("Origin","http://vudu.com"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var i="claimedAppId="+vui.vvPlatform.clientType+"&";t.format="application/json",i+=(new vui.DirectorCsClient.DirectorRequestBuilder).buildRequest(t);var s="contentType=application/x-vudu-url-note&query="+encodeURIComponent(i),o=getPrintablePOSTRequest(i);a.onload=function(e){alert("For POST request: "+o+"\nGot Resonse:"+a.responseText);var t,i,s=JSON.decode((t=a.responseText,(i=t.match(/^\/\*-secure-([\s\S]*)\*\/\s*$/))&&i[1]?i[1]:null));n("",vui.getModel().queryStatus.ST_SUCCESS,s)},a.onerror=function(e){alert("Error with POST request: "+o+"\nError:"+JSON.stringify(e),"error"),alert(e.error,"error"),n("",vui.getModel().queryStatus.ST_GENERIC_ERROR)},a.ontimeout=function(){alert("Timeout during POST request: "+o,"error"),n("",vui.getModel().queryStatus.ST_TIMEOUT)},a.send(s)},vui.features={NEW_TRAILERS:!0,NEWS_FEED:!0,RECOMMENDATIONS:!0,FACEBOOK_TWITTER_SHARE:!0,TV_CONTENT:!0,TOMATOMETER:!0,WALMART_LOGIN:!0,init:function(){var e=vui.USER_LANGUAGE,t=vui.features;"es"===e&&(t.NEW_TRAILERS=!1,t.NEWS_FEED=!1,t.RECOMMENDATIONS=!1,t.FACEBOOK_TWITTER_SHARE=!1,t.TV_CONTENT=!1,t.WALMART_LOGIN=!1)}},vui.features.init(),window.VUDUPARAM=window.VUDUPARAM||{},window.VUDU=window.VUDU||{},window.vui=window.vui||{},"function"!=typeof VUDU.install&&(VUDU.install=function(plugin){if("function"!=typeof plugin.VuduQuery)throw new Error("plugin.VuduQuery");function quote(e){return'"'+e.replace(/"/g,'""')+'"'}function str(e){switch(typeof e){case"string":return quote(e);case"number":return isFinite(e)?String(e):"null";case"boolean":return String(e);case"object":if("[object Array]"!==Object.prototype.toString.apply(e))return"{"+VUDUPARAM.stringify(e)+"}";for(var t=[],i=e.length,s=0;s<i;s+=1)t[s]=str(e[s])||"null";return 0===t.length?"[]":"["+t.join(",")+"]"}return null}function getId(){return g_id+=1}var g_id,cbmap,sourceMap;function directorDoIt(e,t,i){var s={};s.handler=t,s.callbackFunc=i;return VUDU.query("director",e,function(e){s.callbackFunc(s.handler,1,e)})}function directorDoIt2(e,t,i,s){var n={};n.note=e,n.url=s;var a={};a.handler=t,a.callbackFunc=i;return VUDU.query("fetchHTTP",n,function(e){a.callbackFunc(a.handler,1,e)})}"function"!=typeof VUDUPARAM.stringify&&(VUDUPARAM.stringify=function(e){var t,i=[];for(t in e)Object.hasOwnProperty.call(e,t)&&(v=str(e[t]),v&&i.push(t+"="+v));return 0===i.length?"":i.join(",")}),"function"!=typeof VUDU.query&&(g_id=0,cbmap={},VUDU.verbose=!1,VUDU.alert=function(e){VUDU.verbose&&alert(e)},VUDU.log=function(e,t){t&&(e="<"+t+">: "+e),plugin.VuduQuery("log",e,"")},VUDU.querylog=function(e){VUDU.verbose&&VUDU.log(e)},VUDU.queryResult=function(jsonResult){if(VUDU.querylog("VUDU.queryResult("+jsonResult+")"),eval("var result= "+jsonResult),result.director&&"0"==result.id&&result.director.note)VUDU.onDirectorRequest(result.director.id,result.director.version,result.director.note);else{var func=cbmap[String(result.id)];if("function"==typeof func)return"number"==typeof result.id&&(cbmap[String(result.id)]=null),void func(result);null==func?VUDU.querylog("no handler func found for "+String(result.id)):VUDU.querylog("bad func found for "+String(result.id)),VUDU.querylog("VUDU.queryResult() called"),VUDU.querylog("jsonResult: "+jsonResult),VUDU.querylog("        id: "+result.id),VUDU.querylog("   success: "+result.success)}},-1!==navigator.userAgent.toLowerCase().indexOf("webkit")?plugin.OnCallback=VUDU.queryResult:plugin.OnCallback="VUDU.queryResult",VUDU.registerHandler=function(e,t){cbmap[String(e)]=t},VUDU.query=function(name,params,callb){var paramstring=VUDUPARAM.stringify(params);if(1024<paramstring.length)return alert("SORRY TOO LONG!!"),{};if("function"!=typeof callb)throw new SyntaxError("VUDU.Query(,,<function>)");var id=String(getId());cbmap[id]=callb,alert("CALLING VuduQuery:"+name+", params: "+paramstring+", id:"+id);var json=plugin.VuduQuery(name,paramstring,id);return json&&eval("json="+json),json},VUDU.cancel=function(e){var t,i=cbmap[String(e)];i&&(cbmap[String(e)]=null,plugin.VuduQuery("cancelQuery","{'id':"+String(e)+"}",""),"function"==typeof i&&((t={success:!1,message:"cancelled"}).id=e,i(t)))},VUDU.removeHandler=function(e){cbmap[String(e)]=null},VUDU.call=function(name,params){var paramstring=VUDUPARAM.stringify(params),json=plugin.VuduQuery(name,paramstring,"");return json&&eval("json="+json),json}),"function"!=typeof VUDU.registerSystemListener&&(sourceMap={},VUDU.registerSystemListener=function(e,t,i){if(null==e)throw new SyntaxError("VUDU.registerSystemListener:arg #1");if("function"!=typeof i)throw new SyntaxError("VUDU.registerSystemListener:arg #3");null==sourceMap[e]&&(sourceMap[e]={source:e,listeners:[]});var s=sourceMap[e],n={source:e,listener:i};return t&&(n.type=t),s.listeners.push(n),n},VUDU.unregisterSystemListener=function(e){for(var t=sourceMap[e.source].listeners,i=0;i<t.length;++i)if(t[i]===e)return 1===t.length?void(sourceMap[e.source]=null):void t.splice(i,1)},VUDU.registerHandler("systemEvent",function(e){var t=sourceMap[e.event.source];if(t){var s=t.listeners.slice();for(i=0;i<s.length;++i)null!=s[i].type&&s[i].type!=e.event.type||s[i].listener(e.event.source,e.event.type,e.event.params)}else VUDU.querylog("onSystemEvent() source="+e.event.source+"; type="+e.event.type)})),VUDU.init=function(e){var t=VUDU.call("init",{config:field});return t.success?t.result[field]:""},VUDU.registryGet=function(e){var t=VUDU.call("registry",{command:"get",field:e});return t.success?t.result[e]:""},VUDU.connectionQuery=function(e){return VUDU.call("connection",e).success?1:0},VUDU.directorDoIt=directorDoIt,VUDU.directorDoIt2=directorDoIt2,VUDU.loadUser=function(s){directorDoIt({_type:"userSearch",deviceId:VUDU.registry.deviceId},null,function(e,t,i){"error"==i.director._type?(VUDU.log("DIRECTOR ERROR in loadUserAndCommentary: code:"+i.director.code+", text:"+i.director.text),s(null)):i.director.user&&i.director.user[0]?(VUDU.log("director query succeeded , userId:"+i.director.user[0].userId),s(i.director.user[0].userId)):(VUDU.log("The loadUser query succeeded, but director did not return a user"),s(null))})},VUDU.ACTIVATION_POLL_INTERVAL=10,VUDU.waitForDeactivatedDevice=function(t){VUDU.log("Waiting for "+VUDU.registry.deviceIdHex+" to be deactivated.");var e=function(e){null===e?(VUDU.log("Device "+VUDU.registry.deviceIdHex+" is now deactivated"),t()):setTimeout(function(){VUDU.waitForDeactivatedDevice(t)},1e3*VUDU.ACTIVATION_POLL_INTERVAL)}.bind(this);VUDU.loadUser(e)},VUDU.deactivate=function(s){directorDoIt({_type:"deviceDeactivate",deviceId:VUDU.registry.deviceId},null,function(e,t,i){return"error"==i._type?(VUDU.log("Failed to deactivate "+VUDU.registry.deviceIdHex),void s(!1)):(VUDU.log("Requested deactivation for "+VUDU.registry.deviceIdHex),void VUDU.waitForDeactivatedDevice(function(){s(!0)}))})},VUDU.debug={},VUDU.debug.traceroute=function(e){return VUDU.call("traceroute",e)},VUDU.video={},VUDU.video.getMultiBufferInfo=function(){var e=VUDU.call("video",{command:"getMultiBufferInfo"});return e.success?e.result:{}},VUDU.video.play=function(){return VUDU.call("video",{command:"play"}).success},VUDU.video.stop=function(){return alert("VUDU video stop called"),VUDU.call("video",{command:"stop"}).success},VUDU.video.prepareToPlay=function(e){e.command="prepareToPlay";var t=VUDU.call("video",e);return t.success?t.result.sessionId:0},VUDU.video.setPipelinePaused=function(e){return VUDU.call("video",{command:"setPipelinePaused",paused:e}).success},VUDU.video.setPaused=function(e){return VUDU.call("video",{command:"setPaused",paused:e}).success},VUDU.video.setPipelineRateKbps=function(e){return VUDU.call("video",{command:"setPipelineRateKbps",rate:e}).success},VUDU.video.getTimestamps=function(e,t){var i=VUDU.call("video",{command:"getTimestamps",startChunk:e,stopChunk:t});return i.success?i.result.timestamps:[]},VUDU.video.getMinBuffer=function(e,t){var i=VUDU.call("video",{command:"getMinBuffer",bitrate:e,chunk:t});return i.success?i.result.minBuffer:0},VUDU.vuduTime=function(){var json=plugin.VuduQuery("time","","");return eval("var data = "+json),1e3*data.result.time},VUDU.startEvents=function(){VUDU.call("control",{command:"listen"})},VUDU.stopEvents=function(){VUDU.call("control",{command:"stopListening"})},VUDU.updateDeviceId=function(){var e=VUDU.registry.deviceId||0;VUDU.registry.deviceId=VUDU.registryGet("deviceId"),VUDU.registry.deviceIdHex="0x"+VUDU.registry.deviceId.toString(16),alert("Updating the device id from "+e+" to "+VUDU.registry.deviceIdHex)},VUDU.sendResponseToDirector=function(requestId,response){var paramstring=VUDUPARAM.stringify(response),json=plugin.VuduQuery("directorResponse",paramstring,requestId);return alert("directorResponse: sending paramstring: "+paramstring),alert("sending requestId: "+requestId),alert("Query returned: "+json),json&&eval("json="+json),json},VUDU.setDirectorRequestHandler=function(e,t){e||Throw("missing required parameter requestType"),VUDU.directorRequestHandlers||(VUDU.directorRequestHandlers={}),VUDU.directorRequestHandlers[e]=t},VUDU.onDirectorRequest=function(e,t,i){var s,n=i._type,a=VUDU.directorRequestHandlers||{};return a[n]?(alert("Dispatching director request of type "+n+" to handler"),s=a[n](i)):(s={_type:"error",code:"invalidArgument",text:"No handler for type"+n},alert("Unhandled director request of type "+n)),VUDU.sendResponseToDirector(e,s)},VUDU.changeCountry=function(country){alert("CHANGING COUNTRY");var json=plugin.VuduQuery("changecountry",country,"");return eval('var data = "'+json+'"'),data},VUDU.session={},VUDU.session.sessionManagerVersion=function(){var e=VUDU.call("sessionmanager",{command:"sessionManagerVersion"});return e.success?e.result.version:0},VUDU.session.createSessionManager=function(e){var t=VUDU.call("sessionmanager",{command:"createSessionManager",script:e});return!!t.success||(alert("createSessionManager failed with "+t.message),!1)},VUDU.session.destroySessionManager=function(){return VUDU.call("sessionmanager",{command:"destroySessionManager"}).success},VUDU.session.sendMessage=function(e){return VUDU.call("sessionmanager",{command:"sendSessionMessage",message:e}).success},VUDU.registry={},VUDU.updateDeviceId(),VUDU.registry.hardwareId=VUDU.registryGet("hardwareId"),VUDU.registry.softwareVersion=VUDU.registryGet("softwareVersion"),VUDU.registry.embedderSoftwareVersion=VUDU.registryGet("embedderSoftwareVersion"),VUDU.registry.softwareBuildChange=VUDU.registryGet("softwareBuildChange"),VUDU.registry.supportedTicketVersion=VUDU.registryGet("supportedTicketVersion")||1}),function(){window.origAlert=window.alert,window.logsBeforeConnected=[],window.netLogStarted=!1,window.onerror||"sol"===vui.vvPlatform.id||window.VUDU_APP_ARGS.debug||(window.onerror=function(e,t,i,s,n){return alert("Error occured: "+JSON.stringify({msg:e,source:t,lineno:i,colno:s,error:JSON.stringify(n||{})}),"error"),!0}),window.alert2NetLog=function(e,t){VUDU.log(e,t)},window.alert=function(e,t){var i;window.netLogStarted||window.logsBeforeConnected.push(e),VUDU.log?window.alert2NetLog(e,t):"undefined"!=typeof console?console[t]?console[t](e):console.log(e):((i=document.getElementById("log"))||((i=new Element("textarea")).style.position="absolute",i.style.top="540px",i.id="log",i.rows="10",i.cols="140",document.body.appendChild(i)),i.appendChild(document.createTextNode(e+"\n")))},window.insertText=function(e,t){var i=e.childNodes;i&&0<i.length&&3==i[0].nodeType?i[0].nodeValue=t:e.appendChild(document.createTextNode(t))},window.setCookieBrowser=function(e,t){var i=new Date;i.setTime(i.getTime()+31536e7),window.document.cookie=e+"="+escape(t)+"; expires="+i.toGMTString()+"; path=/"},window.getCookieBrowser=function(e){return 0<document.cookie.length&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""};var r="cookies.txt";window.chomp=function(e){return e.replace(/(\n|\r)+$/,"")},window.readCookieFile=function(){var e=new Object,t=new FileSystem,i=t.openCommonFile(r,"r");if(!i)return alert("VUDU: FILE DOES NOT EXIST"),e;var s=i.readAll();t.closeCommonFile(i);for(var n=(s=chomp(s)).split(";"),a=0;a<n.length;a++){var o=n[a].split("=");e[unescape(o[0])]=unescape(o[1])}return t=null,e},window.writeCookieFile=function(e){var t=new FileSystem,i=new Array,s=t.openCommonFile(r,"w");if(s){for(var n in e){var a=escape(n)+"="+escape(e[n]);i.push(a)}s.writeAll(i.join(";"))?(t.closeCommonFile(s),t=null):alert("VUDU: WRITE COOKIE FILE FAILED: "+r)}else alert("VUDU: OPEN FILE FOR WRITE COOKIE FAILED: "+r)},window.setCookieFile=function(e,t){var i=readCookieFile();t?i[e]=t:delete i[e],writeCookieFile(i)},window.getCookieFile=function(e){return readCookieFile()[e]},window.setCookie=setCookieBrowser,window.getCookie=getCookieBrowser,vui.vvPlatform.changeCookieStorage(),window.closestBinarySearch=function(e,t){if(void 0!==e){alert("CLOSEST SEARCH: find:"+t),alert("CLOSEST SEARCH: length:"+e.length);for(var i,s=0,n=e.length-1;s<=n;)if(e[i=parseInt((s+n)/2,10)]<t)s=i+1;else{if(!(e[i]>t))return i;n=i-1}for(;e[i]&&e[i]>t&&1<i;)i--;return alert("BINARY SEARCH FOUND: -1:"+(i-1)+":"+e[i-1]),alert("BINARY SEARCH FOUND: "+i+":"+e[i]),alert("BINARY SEARCH FOUND: +1:"+(i+1)+":"+e[i+1]),i}alert("BINARY SEARCH DID NOT HAVE AN ARRAY")},window.spewCaughtError=function(e,t){return t+": An exception occurred in the script. Error name: "+e.name+". Line number: "+e.lineNumber+". Error message: "+e.message+", stack: "+e.stack},window.zeroPad=function(e,t){var s="";if(t>(e=e.toString()).length)for(i=0;i<t-e.length;i++)s+="0";return s+e.toString()},window.MILLISECONDS_PER_HOUR=36e5,window.MILLISECONDS_PER_MINUTE=6e4,window.timeAsString=function(e,t){if(!e)return"h:mm"===t?"0:00":"mm:ss"===t?"00:00":"0:00:00";e<0&&(e=0);var i=Math.floor(e/MILLISECONDS_PER_HOUR),s=e-i*MILLISECONDS_PER_HOUR,n=Math.floor(s/MILLISECONDS_PER_MINUTE);s-=n*MILLISECONDS_PER_MINUTE;var a=Math.min(Math.floor(s/1e3+.5),59);if("h:mm"!=t)return"mm:ss"==t?zeroPad(n,2)+":"+zeroPad(a,2):i+":"+zeroPad(n,2)+":"+zeroPad(a,2);var o=Math.ceil(n+a/60);return 60==o&&(o=0,i+=1),i+":"+zeroPad(o,2)},window.truncate=function(e,t){return e.length>t?"."==(e=(e=e.substring(0,t)).replace(/\s*\w*$/,"")).charAt(e.length-1)?e+"&nbsp&#8230;":e+"&#8230;":e},window.truncateSlice=function(e,t,i){var s,n=e.length>i+t?((s=i+t)>e.length&&(s=e.length),(n=e.substring(t,s)).replace(/\s*\w*$/,"")):e.substring(t);return n},window.parseDate=function(e,t){if(!isNaN(e)&&1e4<e)return new Date(e);if(null==t&&(t=/(\d+)\-(\d+)\-(\d+)\s+(\d+):(\d+):(\d+)/),match=t.exec(e),!match&&(match=(t=/(\d+)\-(\d+)\-(\d+)/).exec(e),!match))return null;var i=new Date;return i.setUTCFullYear(parseInt(match[1],10),parseInt(match[2],10)-1,parseInt(match[3],10)),match[4]?i.setUTCHours(parseInt(match[4],10),parseInt(match[5],10),parseInt(match[6],10)):i.setUTCHours(0,0,0),i},vui.displayReleaseTime=function(e){/^\d\d\d\d$/.exec(e)&&(e+="-01-01");/^\d\d\d\d-\d\d$/.exec(e)&&(e+="-01");var t=window.parseDate(e),i=new Date(VUDU.vuduTime());return t?i.getUTCFullYear()==t.getUTCFullYear()?monthsMap[t.getUTCMonth()]+" "+t.getUTCDate():t.getUTCFullYear():""},vui.displayDate=function(e){var t=window.parseDate(e);return t?monthsMap[t.getUTCMonth()]+" "+t.getUTCDate()+", "+t.getUTCFullYear():""},vui.getTVMinDate=function(){return vui.getManyDaysAgo(14)},vui.getManyDaysAgo=function(e){var t=new Date(new Date-86400*e*1e3);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},window.requireCallbacks=function(e,t){function i(){s<=++n&&e()}for(var s=t.length,n=0,a=0;a<t.length;a++)t[a](i)},window.monthsMap={0:vui.strings.getText("SHORT_MONTH_JAN"),1:vui.strings.getText("SHORT_MONTH_FEB"),2:vui.strings.getText("SHORT_MONTH_MAR"),3:vui.strings.getText("SHORT_MONTH_APR"),4:vui.strings.getText("SHORT_MONTH_MAY"),5:vui.strings.getText("SHORT_MONTH_JUN"),6:vui.strings.getText("SHORT_MONTH_JUL"),7:vui.strings.getText("SHORT_MONTH_AUG"),8:vui.strings.getText("SHORT_MONTH_SEP"),9:vui.strings.getText("SHORT_MONTH_OCT"),10:vui.strings.getText("SHORT_MONTH_NOV"),11:vui.strings.getText("SHORT_MONTH_DEC")},window.getPriceStr=function(e){var t=(e=String(e)).indexOf(".");return-1!==t?(t+2>=e.length&&(e+="0"),e.substring(0,t+3)):e+".00"},window.getFutureDateString=function(e){var t=VUDU.vuduTime();$defined(e)&&(e=parseDate(e));var i,s=!0,n="";return $defined(e)&&e.getTime()>t&&(s=!1,n=(i=(e-t)/1e3)<60?vui.strings.getText("TIME_LEFT_STR_IN_ONE_MIN"):i<3540?vui.strings.getText("TIME_LEFT_STR_IN_X_MINS",Math.ceil(i/60)+""):i<172800?vui.strings.getText("TIME_LEFT_STR_IN_X_HOURS",Math.ceil(i/3600)+""):31536e3<i?vui.strings.getText("MOVIE_DETAILS_WATCH_SOON"):vui.strings.getText("TIME_LEFT_STR_ON_DATE",monthsMap[e.getMonth()+""],e.getDate())),s?null:n},window.getPartialString=function(e){var t,i;return e.startTime&&(t=window.getFutureDateString(e.startTime[0])),$defined(t)?i=!1:(i=!0,t=vui.strings.getText("TIME_LEFT_FOR_X_PRICE",getPriceStr(e.price[0]))),[t,i]};var d={second:1,minute:60,hour:3600,day:86400},c={day:"hour",hour:"minute",minute:"second",second:null},l={second:"TIME_STRING_SECOND",minute:"TIME_STRING_MINUTE",hour:"TIME_STRING_HOUR",day:"TIME_STRING_DAY"},u={second:"TIME_STRING_SECOND_PLURAL",minute:"TIME_STRING_MINUTE_PLURAL",hour:"TIME_STRING_HOUR_PLURAL",day:"TIME_STRING_DAY_PLURAL"};window.getTimeString=function(e,t,i,s){if(0==e)return"no time";if(e<0)return"negative time!";if(!t||!d[t]){t="second";for(var n in d){if(e<=+d[n])break;t=n}}var a=d[t];if(e<a)return"";var o,r,l=Math.floor(e/a),u=e%a;return u&&0<u&&(o="",reminderUnitSeconds=d[r=c[t]],u&&u>=reminderUnitSeconds&&(o=Math.ceil(u/reminderUnitSeconds))),convertTimeBasedOnReminderValue(l,t,o,r,i,s)},window.convertTimeBasedOnReminderValue=function(e,t,i,s,n,a){var o=parseInt(e),r=parseInt(i);switch(t){case"day":24===i&&(o+=1,r=0);break;case"hour":case"minute":60===i&&(o+=1,r=0)}return a&&0!==r?n?[o,vui.strings.getText(l[t]),r,vui.strings.getText(l[s])]:o+" "+(1==o?vui.strings.getText(l[t]):vui.strings.getText(u[t]))+" "+r+" "+(1==r?vui.strings.getText(conv_string_map[s]):vui.strings.getText(u[s])):n?[o,vui.strings.getText(l[t])]:o+" "+(1==o?vui.strings.getText(l[t]):vui.strings.getText(u[t]))},window.getTimeDiffString=function(e,t,i,s){var n=VUDU.vuduTime();if("string"==typeof e&&(e=parseDate(e)),n<e.getTime()){var a=(e.getTime()-n)/1e3;return t&&d[t]&&a<d[t]?window.getTimeString(a,null,i,s):window.getTimeString(a,t,i,s)}return alert("Trying to get diff for time in the past: "+e.toString()+" of now: "+new Date(n).toString()),null},window.getMMDDYYYYDateString=function(e){if(e){"string"==typeof e&&(e=parseDate(e));var t=e.getDate(),i=e.getMonth()+1;return t<10&&(t="0"+t),i<10&&(i="0"+i),i+"/"+t+"/"+e.getFullYear()}},vui.checkOwnedCacheValidity=function(e){var t,i=!1,s=VUDU.vuduTime();for(var n in e){e[n].isRented?"string"==typeof(t=e[n].ends)&&s<(t=parseDate(t)).getTime()&&(i=!0):e[n].isOwned&&(i=!0)}return i},vui.ImageLoader=new Class({initialize:function(e){this.cache=[],this.hash={},this.lastProcessedIndex=0,this.state="STOPPED",this.interval=500,this.increment=4,this.max=e||20},stop:function(){clearInterval(this.timerId),this.state="STOPPED"},start:function(){clearInterval(this.timerId),this.state="STARTED",this.lastProcessedIndex=0;var e=function(){try{for(var e=0;this.lastProcessedIndex<this.cache.length;this.lastProcessedIndex++)if(this.cache[this.lastProcessedIndex]){var t=this.cache[this.lastProcessedIndex];if("loading"!=t.state&&"completed"!=t.state){var i=document.createElement("img");i.src=t.src,t.img=i;var s=this;if(i.onload=function(){s.hash[this.src]&&s.hash[this.src].img===this&&(s.hash[this.src].state="completed")},i.onerror=function(e){s.hash[this.src]&&s.hash[this.src].img===this&&(alert("IMG ERROR:"+this.src),s.hash[this.src].state="error",s.hash[this.src].img=null,delete s.hash[this.src].img)},t.state="loading",e+=1,this.increment<=e)break}}this.lastProcessedIndex>=this.cache.length-1&&this.stop()}catch(e){alert(spewCaughtError(e,"ERROR Loading IMAGES:"))}}.bind(this);this.timerId=setInterval(e,this.interval)},add:function(e){var t,i,s;this.lastProcessedIndex=0,this.hash[e]?(t=this.hash[e],i=this.cache.indexOf(t),this.cache.splice(i,1)):(t={src:e,state:"start"},this.hash[e]=t),this.cache.push(t),this.cache.length>this.max&&((s=this.cache.shift()).img&&(delete s.onload,delete s.onerror,s.img="",delete s.img,delete this.hash[s.src]),s=null),"STOPPED"==this.state&&this.start()}}),vui._imageLoaders={},vui.getImageLoader=function(e,t){var i;return vui._imageLoaders[e]?i=vui._imageLoaders[e]:(i=new vui.ImageLoader(t),vui._imageLoaders[e]=i),i},vui.stopAllImageLoaders=function(){for(var e in vui._imageLoaders)vui._imageLoaders[e].stop()},vui.executeOnContainer=function(e,t,i){for(;e;){if(e[t]&&"function"==typeof e[t])return e[t].bind(e)(i);e=e.parentWidget}alert("Function "+t+" not caught")},window.friendlyUSARatings={nr:"NR","18up":"18UP",nc17:"NC-17",nc17r:"NC17/R",nrr:"NR/R",rnr:"R/NR",r:"R",tvma:"TV-MA","16up":"16UP","15up":"15UP",nrFamilyFriendly:"FAM",tv14:"TV-14",pg13:"PG-13","13up":"13UP","12up":"12UP",pg:"PG",tvpg:"TV-PG",g:"G",tvg:"TV-G",tvy7:"TV-Y7","7up":"7UP",tvy:"TV-Y"},window.friendlyMEXRatings={aa:"AA",a:"A",b:"B",b15:"B-15",c:"C",d:"D",nr:"NR"},window.getFriendlyRating=function(e){var t="mex"==e.ratingSystem[0]?window.friendlyMEXRatings[e.ratingValue[0]]:window.friendlyUSARatings[e.ratingValue[0]];return t||(alert("window.getFriendlyRating: not mapped:"+e.ratingValue[0]),"NR")},window.friendlyToGenericUSA={NR:"NR","18UP":"NR","NC-17":"NR","NC17/R":"NR","NR/R":"NR","R/NR":"NR",R:"R","TV-MA":"R","16UP":"R","15UP":"R",FAM:"FAM","TV-14":"PG-13","PG-13":"PG-13","13UP":"PG-13","12UP":"PG-13",PG:"PG","TV-PG":"PG",G:"G","TV-G":"G","TV-Y7":"G","7UP":"G","TV-Y":"G"},window.friendlyToGenericMEX={AA:"AA",A:"A",B:"B","B-15":"B-15",C:"C",D:"D",NR:"NR"},window.getFriendlyToGeneric=function(e){var t;return"mex"==vui.RATING_SYSTEM?window.friendlyToGenericMEX[e]&&(t=window.friendlyToGenericMEX[e]):window.friendlyToGenericUSA[e]&&(t=window.friendlyToGenericUSA[e]),t||(alert("window.getFriendlyToGeneric: not mapped:"+e),null)},window.createDiv=function(e,t){var i=document.createElement("div");if(e.position?i.style.position=e.position:i.style.position="absolute",e.width&&(i.style.width=e.width+"px"),e.height&&(i.style.height=e.height+"px"),null!=e.top&&(i.style.top=e.top+"px"),null!=e.left&&(i.style.left=e.left+"px"),e.id&&(i.id=e.id),e.className&&(i.className=e.className),e.text&&(i.innerHTML=e.text),t&&t.appendChild(i),e.style){var s=e.style;for(var n in s)i.style[n]=s[n]}return i},window.createImg=function(e,t){var i=document.createElement("img");if(e.className&&(i.className=e.className),e.position?i.style.position=e.position:i.style.position="absolute",e.width&&(i.style.width=e.width+"px",i.width=e.width),e.height&&(i.style.height=e.height+"px",i.height=e.height),e.top&&(i.style.top=e.top+"px"),e.left&&(i.style.left=e.left+"px"),e.src&&(i.src=e.src),t&&t.appendChild(i),e.style){var s=e.style;for(var n in s)i.style[n]=s[n]}return i},vui.Animation=new Class({initialize:function(e){this.params=e,this.objects=[],this.callback=function(){try{for(var e=(new Date).getTime(),t=this.objects.length,i=[],s=0;s<t;s++){var n,a=this.objects[s];e>=a.endTime?(a.elem.style[a.property]=a.end+"px",i.push(s),a.onComplete()):(n=(e-a.startTime)/a.duration,a.elem.style[a.property]=a.start+n*a.length+"px")}var o=i.length;if(0<o)for(var r=0;r<o;r++)this.objects.splice(r,1);0===this.objects.length&&this.cancel()}catch(e){vui.setBusy(!1),alert("ERROR IN ANIMATION CALLBACK:"+e.toString()),this.cancel()}}.bind(this)},start:function(){this.intervalId=setInterval(this.callback,vui.Animation.INTERVAL)},add:function(e){this.intervalId||this.start();var t={};e.start?t.start=parseInt(e.start,10):t.start=parseInt(window.getComputedStyle(e.elem,null).getPropertyValue(e.property)),t.elem=e.elem,t.property=e.property,t.end=parseInt(e.end,10),t.length=t.end-t.start,t.startTime=(new Date).getTime(),t.duration=e.duration,t.endTime=t.startTime+t.duration,t.onComplete=e.onComplete,this.objects.push(t)},cancel:function(){clearInterval(this.intervalId),delete this.intervalId}}),vui.Animation.INTERVAL=50,vui.createAnimation=function(e){return vui._currentAnimation||(vui._currentAnimation=new vui.Animation),vui._currentAnimation.add(e),vui._currentAnimation},vui.deepCopy=function(e){var t=e instanceof Array?[]:{};for(var i in e){var s=e[i];if("object"==typeof s)if(s instanceof Array){t[i]=[];for(var n=0;n<s.length;n++)"object"!=typeof s[n]?t[i].push(s[n]):t[i].push(vui.deepCopy(s[n]))}else t[i]=vui.deepCopy(s);else t[i]=s}return t},vui.emailValidate=function(e){return!!e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&(!e.match(/[.][.]/)&&!e.match(/,/))},vui.getWidgetVersion=function(){return vui.vvPlatform.getWidgetVersion()},vui.getLuaScript=function(){var e;return vui._luaScript||((e=new XMLHttpRequest).open("GET","newLuaStreamer.lua",!1),e.send(null),vui._luaScript=e.responseText,alert("load newLuaStreamer with length["+vui._luaScript.length+"]")),vui._luaScript},vui.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,"")[t]:e.style[t]},window.AssertException=function(e){this.message=e},window.AssertException.prototype.toString=function(){return"AssertException: "+this.message},window.assert=function(e,t){if($chk(e))return e;throw new window.AssertException(t)},vui.addHomeHelp=function(e){},vui.playBonusContent=function(e,s,n,a){n=n||"bonus";var o=function(e){try{var t={type:n,data:s,contentId:e,isCast:!1,dontFakeCastLoad:!0};void 0!==a&&(t.variant=a,t.variantId=vui._.aStr(a.contentVariantId),t.hasAssignedQuality=!0);var i=["Theater",{data:t}];return function(){controller.goToPage(i[0],i[1])}}catch(e){alert(spewCaughtError(e,"watch button createOnAction"))}}(e),t=function(e){var t,i;e&&e.data&&(t=e.data,vui.getModel().parentalControls.isRestricted("play",window.getFriendlyRating(t.contentRating[0]))?(vui.analytics.showDialog(window.APPNAME+":Transaction ParentalControls Dialog"),i=vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED"):vui.strings.getText("PURCHASE_DIALOG_PASSCODE_REQUIRED"),"bonus"===n&&"newTrailer"===s.bonusTag&&(i=vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("MOVIE_DETAILS_TRAILER_PIN_REQUIRED"):vui.strings.getText("MOVIE_DETAILS_TRAILER_PASSCODE_REQUIRED")),vui.passcodePrompt({promptText:i,callback:function(e){"correct"==e&&o(),alert("HIDING BECAUSE RESTRICTED"),controller.hidePopup()}})):o())}.bind(this),i=s.contentId&&s.contentId[0];i?vui.getModel().getMovieInfo(i,t):(alert("Bonus doesnt have bonusOfContentId?"),o())},vui.doActivationOr=function(e,t,i){window.assert(e,"alreadyActivated action must be provided"),vui.getModel().userId?e(i):vui.ActivationController.beginActivation(function(e){"success"==e&&t&&t(i)},i.calledFrom)},vui._cachedTextWidths={},vui.measureTextWidth=function(e,t,i){var s;if(i&&(s=t+e,vui._cachedTextWidths[s]))return vui._cachedTextWidths[s];var n=document.getElementById("_measureTextDiv");n||((n=document.createElement("div")).id="_measureTextDiv",n.style.position="absolute",n.style.width="auto",n.style.height="auto",n.style.visibility="hidden",n.appendChild(document.createTextNode("")),document.body.appendChild(n)),t&&(n.className=t),n.childNodes[0].nodeValue=e;var a=n.offsetWidth,o=e.length;return 0<o&&e.lastIndexOf(this.nbsp)==o-1&&(o<2||e[o-2]!=this.nbsp)&&(a+=6),i&&(vui._cachedTextWidths[s]=a),a},vui.measureDimensions=function(e,t){var i=document.getElementById("_measureTextDimensions");i||((i=document.createElement("div")).id="_measureTextDimensions",i.style.position="absolute",i.style.visibility="hidden",i.style.display="block",document.body.appendChild(i)),t&&(i.className=t),i.innerHTML=e;var s=i.offsetWidth,n=i.offsetHeight,a=e.length;return 0<a&&e.lastIndexOf(this.nbsp)===a-1&&(a<2||e[a-2]!==this.nbsp)&&(width+=6),alert("vui.measureDimensions: "+n+" width: "+s),{height:n,width:s}},vui.DoWebLogin=function(){vui.ActivationController.beginActivation(function(){controller.refreshCurrentPage()})},vui.DoWebLogout=function(){vui.getModel().logout(),controller.refreshCurrentPage()},vui.addDashSuffixToFileName=function(e,t){var i=e.lastIndexOf("."),s=e.lastIndexOf("/"),n=e.lastIndexOf("-");return e=s<n?n<i?e.substring(0,n)+"-"+t+e.substring(i):e.substring(0,n)+"-"+t:s<i?e.substring(0,i)+"-"+t+e.substring(i):e+"-"+t},vui.parseEntry=function(e,t){var i=e.parameters[0],s=i._type;e.placardUrlPath&&(e.placardUrl=vui.getModel().getUiEntryImageUrl(e.placardUrlPath[0])),e.placardUrl&&("showcase"!=e.uiEntryType?e.resizedPlacardUrl=vui.addDashSuffixToFileName(e.placardUrl[0],216):"hd"===window.WIDGETRESOLUTION?e.resizedPlacardUrl=vui._.aStr(e.placardUrl):e.resizedPlacardUrl=vui.addDashSuffixToFileName(e.placardUrl[0],960)),e.posterUrlPath&&("contentParameters"==s&&i.contentId&&e.uiEntryType&&"filmstrip"==e.uiEntryType[0]?e.posterUrl=vui.getModel().getUiEntryFilmstripPosterUrl(e.posterUrlPath[0]):e.posterUrl=vui.getModel().getUiEntryImageUrl(e.posterUrlPath[0])),e.ribbonUrlPath&&(e.ribbonUrl=vui.getModel().getUiEntryImageUrl(e.ribbonUrlPath[0])),e.backgroundUrlPath&&(e.backgroundUrl=vui._.aStr(vui.m.getUiEntryImageUrl(vui._.aStr(e.backgroundUrlPath)))),e.template="Showcase",e.reportText="Ad:"+(e.title||"unknown");var n="";try{"vui.widgets.FeaturedView"==controller.baseLayer.currentPage.children[1].children[0].name&&(n="SPOTLIGHT - "+controller.baseLayer.currentPage.children[1].children[0].subTab.getSelectedName())}catch(e){}if(i.tokenOffer&&i.tokenOffer.length&&"tokenOffer"===i.name[0]){var a=vui.addDashSuffixToFileName(vui._.aStr(vui.m.getUiEntryImageUrl(e.posterUrlPath)),window.vui.ResDef.mm.CART_POSTER_W),o=vui._.aStr(e.placardUrlPath),r=vui.addDashSuffixToFileName(e.backgroundUrl,vui.ResDef.SCREEN_WIDTH);e.launchParams={listType:"customList",title:vui._.aStr(e.title)||"",headerUrl:a,description:e.description,tokenOffer:i.tokenOffer,placardUrl:o,backgroundUrl:r},e.launch=function(){controller.goToPage("XofYShowcase",this.launchParams)},e.template="XofYShowcase"}else if("contentParameters"==s)"bonus"==i.type?e.launch=function(){vui.playBonusContent(i.contentId)}:e.launch=function(){vui._.setAriaLabel(""),controller.goToPage("NewMovieDetails",{contentId:i.contentId})};else if("contentSearchParameters"==s){r="";a=e.uiEntryType&&"moviesAd"!=e.uiEntryType[0]&&"tvChannels"!=e.uiEntryType[0]?vui._.aStr(e.placardUrl):vui._.aStr(e.posterUrl),e.uiEntryType&&"featuredPromo"==e.uiEntryType[0]&&(a="",r=e.backgroundUrl);var l=i.contentSearch[0],u=e.ribbonSearchParam||null;e.launchParams={listType:"customList",title:i.title,query:l,headerUrl:a,backgroundUrl:r},u&&(e.launchParams.selectedRibbonInd=t,e.launchParams.ribbonSearchParam=u),(n=vui._.findParentTitle())&&(e.launchParams.parentTitle=n),e.launch=function(){controller.goToPage("Showcase",this.launchParams)}}else try{var d=i.name[0],c=i[d][0].pageId[0];c&&(e.launchParams={listType:"customList",title:i.title,selectedRibbonInd:t,query:l,headerUrl:a,ribbonSearchParam:e.ribbonSearchParam||null,pageId:c},(n=vui._.findParentTitle())&&(e.launchParams.parentTitle=n),e.launch=function(){controller.goToPage("Showcase",this.launchParams)})}catch(e){}return e},window._gcCount=0,window.callCGEvery20Times=function(){window.executeImageGC&&(20<=window._gcCount?(window.executeImageGC(),window._gcCount=0):window._gcCount++)},vui.formatAddressAndNumber=function(e,t){var i=vui.user.getFullName()+"<br>";return i+=vui._.aStr(e.street).toUpperCase()+"<br>",e.street2&&(i+=vui._.aStr(e.street2).toUpperCase()+"<br>"),i+=vui._.aStr(e.city).toUpperCase()+", "+vui._.aStr(e.state)+" "+vui._.aStr(e.zipCode)+"<br>",i+=t},vui.getFreePreviewMinutes=function(e){return $defined(e.freePreviewStartSeconds)&&$defined(e.freePreviewStopSeconds)?Math.floor((e.freePreviewStopSeconds[0]-e.freePreviewStartSeconds[0])/60):0},vui.getEpisodeSeasonLabel=function(e){var t=e.episodeNumberInSeason&&e.episodeNumberInSeason[0],i=e.seasonNumber&&e.seasonNumber[0];return null!=t&&null!=i?"S"+i+" Ep"+t:""},vui.rgb2hex=function(e){var t=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(color),i=parseInt(t[2],10).toString(16),s=parseInt(t[3],10).toString(16),n=parseInt(t[4],10).toString(16);return"#"+((1==i.length?"0"+i:i)+(1==s.length?"0"+s:s)+(1==n.length?"0"+n:n))},vui.hex2rgba=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);if(!t)return e;var i=1;return t[4]&&(0<=(i=Math.round(parseInt(t[4],16)/255*100)/100)&&i<=1||(i=1)),"rgba("+parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16)+", "+i+")"}}(),function(){window.vui=window.vui||{},window.vui.staticFunctions={},window.vui._=window.vui.staticFunctions;var r=window.vui._;r.isIndex=function(e){return parseInt(e,10)==e&&0<=e},r.isID=function(e){return parseInt(e,10)==e&&1<=e},r.innerHTML=function(e,t){var i;e?(i=t||"",e.innerHTML=i):alert("Error: no divElement")},r.measureTextWidth=function(e,t,i){var s;if(i&&(s=t+e,vui._cachedTextWidths[s]))return vui._cachedTextWidths[s];var n=document.getElementById("_measureTextDiv");n||((n=document.createElement("div")).id="_measureTextDiv",n.style.position="absolute",n.style.width="auto",n.style.height="auto",n.style.visibility="hidden",n.appendChild(document.createTextNode("")),document.body.appendChild(n)),t&&(n.className=t),n.childNodes[0].nodeValue=e;var a=n.offsetWidth,o=e.length;return 0<o&&e.lastIndexOf(this.nbsp)===o-1&&(o<2||e[o-2]!=this.nbsp)&&(a+=6),i&&(vui._cachedTextWidths[s]=a),a},r.removeElement=function(e,t){e.deleteChild?e.deleteChild(t):e.removeChild(t)},r.removeAllElements=function(e){if(e&&e.childNodes)for(var t=e.childNodes;t&&0<t.length;)e.removeChild(t[0]);else alert("error: no parent node")},r.firstArray=function(e){return e&&e[0]||null},r.aStr=function(e){var t="";return"string"==typeof e?t=e:e&&e[0]&&(t=e[0]),t},r.toLower=function(e){return"string"==typeof e?e.toLowerCase():""},r.multiLineEllipsis=function(e,t){return"hd"==window.WIDGETRESOLUTION?e:window.truncate(e,t)},r.getTransformX=function(e){var t=e.match(/translateX\(([\-0-9]*)px\)/i);return t&&t[1]?parseInt(t[1],10):0},r.getTransformY=function(e){var t=e.match(/translateY\(([\-0-9]*)px\)/i);return t&&t[1]?parseInt(t[1],10):0},r.anim_XY=function(e,t,i,s,n){var a,o,r;!0===window.useWebkit?(a=vui.setBusy(!0,i),e.style.transitionDuration=i/1e3+"s","x"==n?e.style.left=t+"px":e.style.top=t+"px",setTimeout(function(){vui.setBusy(!1,null,a),e.style.transitionDuration="1ms",s&&s()},i)):(a=vui.setBusy(!0,Math.max(i,500)),o="",o="x"==n?"left":"top",alert("Anim_XY"+o+" "+t),r={elem:e,property:o,duration:i,end:0+t,onComplete:function(){vui.setBusy(!1,null,a),s&&s()}.bind(this)},(new vui.Animation).add(r))},r.animY=function(e,t,i,s){vui._.anim_XY(e,t,i,s,"y")},r.animX=function(e,t,i,s){vui._.anim_XY(e,t,i,s,"x")},r.animOpacity=function(e,t,i,s){var n;!0===window.useWebkit&&(n=e.className,e.className=n+" Webkit_fade_anim",e.style.webkitTransitionDuration=i/1e3+"s",e.style.opacity=t,setTimeout(function(){s&&s(),e.className=n},i))},r.getPromoUrl=function(e,t){var i,s,n;if(e)return e&&e.contentId&&vui.getModel().ownedMovieCache[e.contentId[0]]||e.containerId&&vui.getModel().anyOfCidsPurchased(e.containerId)?null:(e.uxPromoTag&&e.uxPromoTag.length&&(i=vui._.aStr(e.uxPromoTag),s={poster:window.vui.ResDef.PosterGrid.PROMO_W,meta:window.vui.ResDef.explore.MP_PROMO_W,detail:window.vui.ResDef.detailPage.PROMO_TAG_W},n=vui.getModel().getPromoTagImageUrl("assets/promo/dark/"+vui.vvPlatform.getDomain()+"/"+i+"-"+s[t])),n||null)},r.regExpEscape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},r.addTotalCount=function(e){for(var t=!1,i=0,s=e.length;i<s;i++)if("totalCount"==e[i]){t=!0;break}t||e.push("totalCount")},r.parseUIPage=function(e){var t={};t.type=e._type,t.title=e.title&&e.title[0]||"",t.description=e.description&&e.description[0]||"",e.backgroundUrlPath&&(e.backgroundUrl=vui.getModel().getUiPageBgImageUrl(e.backgroundUrlPath[0])),t.backgroundUrl=e.backgroundUrl&&e.backgroundUrl[0]||"";var i,s={};e.parameters&&e.parameters[0]&&"uiPageMultiContentListParameters"==e.parameters[0]._type&&(s=(i=e.parameters[0].multiParameters)&&i[0]&&i[0].list),t.parameters={},t.parameters.listParameters=[],s.length||alert("ERROR: parameters.length is empty");for(var n,a,o,r,l=0,u=0;u<s.length;u++)a=(n=s[u])&&n.listParameters&&n.listParameters[0],o=n&&n.contentParameters&&n.contentParameters[0],a&&o&&((r={}).contentSearchParameters=o,r.contentSearchParameters._type=a.type&&a.type[0],r.layoutControl={},r.layoutControl.viewAll=a.viewAll&&!0,r.layoutHint=vui._.aStr(a.layoutHint),r.elementControl={},r.elementControl.enlargeOnSelection=a.enlargeOnSelection||!1,r.title=a.title&&a.title[0]||"",t.parameters.listParameters[l]=r,l++);return t},r.posterOnAction=function(e,t){if("bonus"==e.type||e.elementSubType&&"bonus"===e.elementSubType)vui.playBonusContent(e.contentId,e);else if(e&&e.contentId&&0<e.contentId[0])vui._.setAriaLabel(""),controller.goToPage("NewMovieDetails",{contentId:e.contentId});else if("credit"==e._type)controller.goToPage("FilmographyView",{model:{firstName:e.firstName,personId:e.personId,portraitUrl:e.posterUrl},listType:"filmography"});else if(e.elementType)switch(vui._.aStr(e.elementType)){case"content":controller.goToPage("NewMovieDetails",{contentId:vui._.aStr(e.uxElementId)});break;case"person":controller.goToPage("FilmographyView",{model:{firstName:e.firstName,personId:e.personId,portraitUrl:e.posterUrl},listType:"filmography"});break;case"mixMatch":controller.goToPage("XofYShowcase",{uiEntryId:vui._.aStr(e.uxElementId)});break;default:e.parentTitle||(e.parentTitle=vui._.findParentTitle()),t&&t.uxRowTrackingId&&(e.uxRowTrackingId=t.uxRowTrackingId,e.uxRowIsPersonal=t.uxRowIsPersonal),controller.goToPage("PersonalizedShowcase",e)}},r.findParentTitle=function(){var e="";try{"vui.widgets.FeaturedView"!=controller.baseLayer.currentPage.children[1].children[0].name&&"vui.widgets.PersonalizedTabbedView"!=controller.baseLayer.currentPage.children[1].children[0].name||(e="SPOTLIGHT - "+controller.baseLayer.currentPage.children[1].children[0].subTab.getSelectedName())}catch(e){}return e},r.findReportParentTitle=function(){var e="";try{"vui.widgets.FeaturedView"!=controller.baseLayer.currentPage.children[1].children[0].name&&"vui.widgets.PersonalizedTabbedView"!=controller.baseLayer.currentPage.children[1].children[0].name||(e="spotlight:"+controller.baseLayer.currentPage.children[1].children[0].subTab.getSelectedName())}catch(e){}return e},r.preFetchDataAfterActivated=function(){vui.m&&vui.m.recommendedCache&&vui.m.recommendedCache.preFetch&&vui.m.recommendedCache.preFetch()},r.toOmFilterStr=function(e){var t=[];for(i in e)t.push(i+"-"+e[i]);return t.join(":")},r.reloadApp=function(e){vui.vvPlatform.isXbox?Windows.UI.WebUI.WebUIApplication.requestRestartAsync({}):(window.location.reload(),vui.Model.PopulateOwnedMovieCache(function(){alert("REFRESH MOVIE BECAUSE RELOAD APP")}))},r.isUHDContent=function(e){if(e&&(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll())){if(vui.gConnectionInstance.getIsHideUHD()&&isSamsungJazz()&&!((t=e).variants&&t.variants.uhd&&t.variants.uhd.videoProfile&&t.variants.uhd.videoProfile.contains("dvheDtr"))&&"program"===vui._.aStr(e.type))return!1;if("uhd"==vui._.aStr(e.bestDashVideoQuality))return!0;if(e.variants&&e.variants.uhd)return!0;if(e.offers&&e.offers.uhd&&(e.offers.uhd.Purchase.preOrderStartTime||e.offers.uhd.Rental.preOrderStartTime))return!0}var t;return!1},r.isFreeContent=function(e){return!!("trailer"==e.type||e.data&&e.data.tag&&"mainTrailer"===e.data.tag[0])||!!("bonus"==e.type&&e.data&&e.data.tag&&e.data.tag.contains("freeOffer"))},r.dolbyAudio=function(e){var t=e.variants,i=vui.m.qualityArrayWithUHD;if(!vui.gConnectionInstance.getIsUHDSupported()&&!vui.gConnectionInstance.get4KForAll())return null;for(var s=0;s<i.length;s++){var n=t[i[s]];if(n&&n.audioCodec)return vui._.aStr(n.audioCodec)}return null},r.iframeQueryHelpers={parseQueryParameters:function(e){return e.split("?")[1].split("&").reduce(function(e,t){var i=t.split("=").map(decodeURIComponent);return e[i[0]]=i[1],e},{})},validateErrorDetails:function(e){queryParameters=r.iframeQueryHelpers.parseQueryParameters(e);var i={};return["httpStatus","failureName","failureUrl"].forEach(function(e){var t=queryParameters[e];t&&(i[e]=t)}),i}},r.doIframeQuery=function(t,i,s,n){var a=document.createElement("iframe");a.src="https://my.vudu.com/iframeDirector.html",a.height="0",a.width="0",a.style.border="none",document.body.appendChild(a);var o=function(e){var t;e.data&&"string"==typeof e.data&&e.data.contains("frommsapperror:")?(t=r.iframeQueryHelpers.validateErrorDetails(e.data),VUDU.log("iframeDirector failed to load: "+JSON.stringify(t),"warn")):a.contentWindow===e.source&&(s("",vui.getModel().queryStatus.ST_SUCCESS,e.data),document.body.removeChild(a),window.removeEventListener("message",o))};window.addEventListener("message",o,!1),a.onload=function(){var e={baseUrl:t,query:i,headers:n};a.contentWindow.postMessage(e,"*")}},r.setAriaLabel=function(e){$defined(e)&&(vui.ariaTimeout?setTimeout(function(){vui.ariaTimeout=null,vui.vvPlatform.setAriaLabel(e.toString())},1500):vui.vvPlatform.setAriaLabel(e.toString()))},r.createTempAlert=function(e,t,i){vui.ariaTimeout=i,vui.gConnectionInstance.getTTSEnabled()&&vui.vvPlatform.createTempAlert(e,t)},r.getSymbolLabel=function(e){return{1:"one","~":"tilde","!":"exclamation mark","=":"equal sign",".":"period",":":"colon",";":"semicolon","&":"ampersand","&amp;":"ampersand","'":"apostrophe","`":"back tick","{":"open curly brace","}":"close curly brace","\\":"backslash","/":"forward slash","^":"caret","+":"plus sign","-":"dash",_:"underscore","(":"open parenthesis",")":"close parenthesis","[":"open square bracket","]":"close square bracket",">":"greater than","&gt;":"greater than","&lt;":"less than","<":"less than","*":"asterisk","#":"pound sign",'"':"quotation mark","|":"pipe","%":"percent sign",",":"comma","?":"question mark",".edu":"dot e d u"}[e]||e},r.hasValidPhysicalOffers=function(e){var t=vui.m.qualityArrayNoUHD;(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll())&&(t=vui.m.qualityArrayWithUHD);for(var i=0;i<t.length;i++)if(e[t[i]]&&e[t[i]].walmartOffer)return!0;return!1},r.messages=[],r.index=0,r.logToAzure=function(e){vui._.messages.push("BOL: "+vui._.index+++" "+new Date+":  "+e);var t=new XMLHttpRequest;t.open("POST","https://mleong-logger.azurewebsites.net/api/HttpTriggerJS1?code=HIg7FBJ3a86DDUQKJk4UKDaplUFK3NzKR06iZtFvyUrCD7eHkjW4gg==",!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onload=function(){vui._.messages=[]},t.send(JSON.stringify({message:vui._.messages,deviceId:VUDU.registry.deviceId}))},r.getWalmartItemIdsMap=function(e){var t={};return e.contentVariants&&e.contentVariants[0]&&e.contentVariants[0].contentVariant&&e.contentVariants[0].contentVariant.filter(function(e){return e.walmartItemId}).forEach(function(e){t[vui._.aStr(e.videoQuality)]=vui._.aStr(e.walmartItemId)}),Object.keys(t).length?t:null},r.isDiskAvailable=function(t){return 0<Object.keys(t).filter(function(e){return t[e]&&t[e][0].stock&&"Available"===t[e][0].stock[0]}).length},r.debounce=function(i,s,n){var a,o,r,l,u;return function(){r=this,o=arguments,l=new Date;var t=function(){var e=new Date-l;e<s?a=setTimeout(t,s-e):(a=null,n||(u=i.apply(r,o)))},e=n&&!a;return a=a||setTimeout(t,s),e&&(u=i.apply(r,o)),u}},r.getElementId=function(e){return"banner"===e.posterType&&("mixMatch"===e.elementType||"page"===e.elementType)||"row"===e.elementType?r.aStr(e.uxElementId):"person"===e.elementType?r.aStr(e.personId):"content"===e.elementType?r.aStr(e.contentId):void 0},r.getZapApiEvarsFromSessionStore=function(){return{channel:vui.m.userSessionStore.getFromStore("zap-api-main-tab"),pageId:vui.m.userSessionStore.getFromStore("zap-api-page-id"),rowId:vui.m.userSessionStore.getFromStore("zap-api-row-id"),elementId:vui.m.userSessionStore.getFromStore("zap-api-element-id"),rowIndex:vui.m.userSessionStore.getFromStore("zap-api-row-index"),columnIndex:vui.m.userSessionStore.getFromStore("zap-api-column-index")}},r.deleteZapApiEvarsFromSessionStore=function(){vui.m.userSessionStore.deleteFromStore("zap-api-main-tab"),vui.m.userSessionStore.deleteFromStore("zap-api-page-id"),vui.m.userSessionStore.deleteFromStore("zap-api-row-id"),vui.m.userSessionStore.deleteFromStore("zap-api-element-id"),vui.m.userSessionStore.deleteFromStore("zap-api-row-index"),vui.m.userSessionStore.deleteFromStore("zap-api-column-index")}}(),vui.debugLevel=0,vui.Connection=new Class({initialize:function(e){VUDU.log("Connection created"),this.callback=e},currentState:"INIT",actionTransitionFunctions:{INIT:{DO_CONNECT:function(){return this.doConnect(),"CONNECTING"}},CONNECTING:{CONNECTION_SUCCESS:function(){return VUDU.log("ENTERING UI"),"CONNECTED"},ERROR:function(e){return this.showError(e.reason),"DISCONNECTED"},CONNECTING:function(){return VUDU.log("The C++ state machine caught up with me"),"CONNECTING"},DO_CONNECT:function(){return this.doConnect(),"CONNECTING"}},UNPROVISIONING:{UNPROVISION_SUCCESS:function(){return VUDU.log("Unprovisioning succeeded"),"DISCONNECTED"},ERROR:function(e){return this.showError(e.reason),"DISCONNECTED"}},CONNECTED:{ERROR:function(){return VUDU.log("Got an error while connected"),"DISCONNECTED"}},DISCONNECTED:{DO_CONNECT:function(){return this.doConnect(),"CONNECTING"},CONNECTING:function(){return"CONNECTING"},ERROR:function(){return VUDU.log("Still getting ERROR events. Is autoReconnect set to TRUE?"),"DISCONNECTED"}}},destroy:function(){delete this.callback},showError:function(e){VUDU.log("CONNECTION ERROR: "+e)},handleEvent:function(e){var t,i;this.callback?(VUDU.log("handleEvent(e.type="+e.type+") in state "+this.currentState),null!=(t=this.actionTransitionFunctions[this.currentState][e.type])?(i=t.call(this,e))!=this.currentState?(VUDU.log("Connection: state transition from "+this.currentState+" to "+i),this.currentState=i,this.callback(this.currentState,e)):VUDU.log("Staying in same state ("+this.currentState+")"):VUDU.log("Unhandled event (no actionTransitionFunction)")):alert("CONNECTION HAS BEEN DESTROYED, don't callback")},_serviceOwnedConfig:{},_updateSOC:function(e,t){return this._serviceOwnedConfig[e]!=(this._serviceOwnedConfig[e]=t)},getSocValue:function(e,t){e||VUDU.log("ERROR: SOC key is missing");var i=this._serviceOwnedConfig[e];return void 0!==i?i:t},_oauthClientId:[null,"wmtsim","wmtsimqa","wmtsimproduction","wmtdev","wmt"],getWmtOauthClientId:function(){return this._oauthClientId[this.getSocValue(vui.Connection.SOC_KEYS.CLIENT_WMT_OAUTH_CLIENT_ID,0)]},showVudutestContent:function(){return this.getSocValue(vui.Connection.SOC_KEYS.LUA_FORCE_SHOW_VUDUTEST_CONTENT,0)},getSubtitleGroup:function(){return this.getSocValue(vui.Connection.SOC_KEYS.LUA_SHOW_SUBTITLES,0)},getSupport708CC:function(){return this.getSocValue(vui.Connection.SOC_KEYS.SUPPORT_CEA708_CC,0)},getUseSeamlessSwitching:function(){return this.getSocValue(vui.Connection.SOC_KEYS.USE_SEAMLESS_SWITCHING,0)},getUseLuaStreamer:function(){return this.getSocValue(vui.Connection.SOC_KEYS.LUA_USE_PIPELINELESS_STREAMER,0)},getLuaStreamingBufferSize:function(){return this.getSocValue(vui.Connection.SOC_KEYS.CAPABILITY_ALLOW_BW_LIMIT_OVERRIDE,0)},getDisplayUIEntriesForTopPicks:function(){return this.getSocValue(vui.Connection.SOC_KEYS.DISPLAY_UIENTRIES_FOR_TOPPICKS,0)},getIsUHDSupported:function(){return this.getSocValue(vui.Connection.SOC_KEYS.UHD_SUPPORTED,0)},restartCore:function(e){alert("going to restartCore:"+e);var t=function(){alert("NOW RESTARTING CORE!"),this.ignoreNextDisconnectedMessage=1;var e=function(){alert("RECONNECTING"),this.currentState="INIT",this.connect()}.bind(this);setTimeout(e,5e3)}.bind(this);setTimeout(t,5e3)},doConnect:function(){(c=this).listenerHandle||(this.listenerHandle=VUDU.registerSystemListener("connection",null,function(e,t,i){VUDU.log("Connection::systemEvent source="+e+" type="+t);var s={type:"",reason:"",extra:""};if(i.result||(i.result={}),"stateChanged"==t)if(VUDU.log("Connection::systemEvent stateChanged state="+i.state+" reason="+i.reason),"disconnected"==i.state){if(this.ignoreNextDisconnectedMessage)return void delete this.ignoreNextDisconnectedMessage;alert("ERROR:"+JSON.encode(i)),s.type="ERROR";var n,a;if(s.reason={cant_reach_server:"NETWORK",invalid_cert:"VUDU",invalid_hardware_id:"DEVICE",no_network:"NETWORK",connection_dropped:"NETWORK",provisioning_acknowledge_failed:"NETWORK",provisioning_failed:"NETWORK",provisioning_save_acknowledge_failed:"NETWORK",provisioning_save_failed:"DEVICE",provisioning_corrupt:"VUDU",timed_out_connecting:"NETWORK",login_failed:"VUDU"}[i.reason],"provisioning_corrupt"==i.reason){alert("provisioning_corrupt"),alert("deleting vudu-json-settings.txt");try{var o=document.getElementById("pluginFilesystem"),r=o.Delete("/mtd_down/vudu/db/vudu-json-settings.txt");alert("delete /mtd_down/vudu/db/vudu-json-settings.txt result: "+r);var l=o.Delete("/mtd_rwarea/vudu/db/vudu-json-settings.txt");alert("delete /mtd_rwarea/vudu/db/vudu-json-settings.txt result: "+l)}catch(s){alert("Deleting vudu-json-settings.txt error.")}return void updateVuduSplashScreen("error","Hardware changes are detected. ","Please restart VUDU and sign in with your credential again.","If the problem persists, please contact Vudu customer service at 1-888-554-VUDU","")}alert("not provisioning_corrupt"),i.result.note&&(s.reason="VUDU",s.extra+=i.result.note),i.result.connection_failure_type&&(s.reason="VUDU",s.extra+=" CFT ="+i.result.connection_failure_type),i.result.client_login_error&&(s.reason="VUDU",s.extra+=" CLE="+i.result.client_login_error),i.result.client_side_error&&(s.reason="VUDU",s.extra+=" CSE="+i.result.client_side_error),i.result.country&&(s.reason="VUDU",s.extra+=" COUNTRY="+i.result.country),i.result.curlCode&&(s.reason="NETWORK",n={2:"Failed to initialize.",5:"Could not resolve  proxy.",6:"Could not resolve host.",7:"Failed to connect to host.",18:"Partial file.",23:"Write error.",26:"Read error.",27:"Out of memory.",28:"Operation timeout. ",34:"HTTP post error.",35:"SSL connect error.",45:"Interface  error.",47:"Too many redirects.",53:"SSL crypto engine not found",55:"Failed sending network data",56:"Failure receiving network data",58:"Problem with the certificate",59:"Could not use SSL cipher",60:"Problem with the CA cert",61:"Unrecognized transfer encoding",66:"Failed to initialise SSL Engine"}[i.result.curlCode],s.extra+=" Network Error =",s.extra+=n||i.result.curlCode),i.result.httpStatus&&200!=i.result.httpStatus&&(s.reason="NETWORK",a={400:"Bad request",401:"Unauthorized",403:"Forbidden",404:"Not found",406:"Not acceptable",407:"Proxy authentication required",408:"Request timeout",409:"Conflict",500:"Internal server error",503:"Service unavailable"}[i.result.httpStatus],s.extra+=" HTTP code = ",s.extra+=a||i.result.curlCode),i.result.server_requested_unprovisioning&&(s.reason="AS_REQUESTED",s.type="DO_CONNECT",VUDU.connectionQuery({type:"resetProvisioning"})),s.reason||(s.reason="VUDU",s.extra+="Unknown error")}else"connecting"==i.state?s.type="CONNECTING":"connected"==i.state&&(s.type="CONNECTION_SUCCESS");else"notification"==t&&"link_changed"==i.reason&&0==i.link?VUDU.log("Connection::systemEvent notification reason="+i.reason+" link="+i.link):"serverOwnedConfigChanged"==t&&(VUDU.log("Connection::systemEvent serverOwnedConfigChanged key="+i.key+" value="+i.value),i.key&&void 0!==i.value?this._updateSOC(i.key,i.value)&&alert("serviceOwnedConfig "+i.key+" changed to "+i.value):VUDU.log("WARNING: Connection::systemEvent serverOwnedConfigChanged key or value was null!"),i.key==vui.Connection.SOC_KEYS.DEBUG_LEVEL?(alert("SETTING DEBUG LEVEL TO:"+i.value),vui.debugLevel=i.value):i.key==vui.Connection.SOC_KEYS.BOOKMARK_FLUSH_INTERVAL?vui.bookmarkFlushInterval=i.value:i.key==vui.Connection.SOC_KEYS.SUPPORT_CEA708_CC&&(1==i.value?window.SUPPORTS_NEW_FCC_CEA708=!0:2==i.value&&(window.SUPPORTS_NEW_FCC_CEA708=!1)));"ERROR"==s.type&&VUDU.connectionQuery({type:"sosLog"}),""!=s.type&&c.handleEvent(s)}.bind(this))),VUDU.connectionQuery({type:"connect"})},connect:function(){this.handleEvent({type:"DO_CONNECT",reason:"AS_REQUESTED"})}}),vui.Connection.SOC_KEYS={CAPABILITY_ADULT:17,CAPABILITY_ALLOW_BW_LIMIT_OVERRIDE:28,CAPABILITY_MQC_UI:31,BUILD_CHANGE_NUMBER:32,LUA_MOVIE_UI_VERSION:34,LUA_HIDE_VUDULABS:35,DEBUG_LEVEL:37,CAPABILITY_ENABLE_LOCAL_MOVIE_STORAGE:38,LUA_SHOW_DEVELOPER_APPS:39,BOOKMARK_FLUSH_INTERVAL:40,LUA_USE_LUA_STREAMER:41,WIDEVINE_PREFIX_ID:42,RECOMMENDATION_CONTROL_GROUP_ID:43,LUA_SHOW_SOCIAL_FEED:44,LUA_SHOW_RENTAL_DOWNLOAD:45,MAPPED_CLIENT_SW_VERSION:46,MAPPED_LUA_SW_VERSION:47,LUA_SELECTOR_FOLLOWS_MOUSE:48,LUA_FORCE_SHOW_VUDUTEST_CONTENT:50,CLIENT_WMT_OAUTH_CLIENT_ID:53,LUA_SHOW_SUBTITLES:56,LUA_USE_PIPELINELESS_STREAMER:57,DISPLAY_UIENTRIES_FOR_TOPPICKS:63,STARTUP_EMBEDDED_VERSION:65,MOVIE_UI_VERSION:67,SUPPORT_CEA708_CC:68,USE_SEAMLESS_SWITCHING:72},vui.NetworkHandler=new Class({currentState:"HIDDEN",currentMessage:"",currentConnectionState:"GOOD",currentLinkState:"GOOD",currentQueryManagerState:"GOOD",currentPlayerState:"NOT_PLAYING",initialize:function(e){this.callback=e;new vui.ConnectionMonitor(this.connectionCallback.bind(this)),new vui.LinkMonitor(this.linkCallback.bind(this)),new vui.QueryMonitor(this.queryManagerCallback.bind(this)),new vui.PlayerMonitor(this.playerCallback.bind(this));alert("NetworkHandler created")},updateCurrentState:function(){var e,t,i,s;this.callback?(e="BAD"==this.currentConnectionState&&"BAD"==this.currentQueryManagerState||"BAD"==this.currentLinkState,t="","BAD"==this.currentLinkState&&(t=vui.strings.getText("SPLASH_VUDU_DETECTED_THE_ETHERNET")),"BAD"==this.currentConnectionState&&(t=vui.strings.getText("SPLASH_VUDU_HAS_LOST_CONNECTION")),i=!1,(s=e?"SHOWING":"HIDDEN")!=this.currentState&&(alert("NetworkHandler: state changed to "+s),this.currentState=s,i|=!0),i&&(vui.getPlayer().pause(),this.callback(s,t,this))):alert("NETWORKHANDLER DESTROYED, don't callback")},connectionCallback:function(e){alert("NetworkHandler::connectionCallback(state = "+e+")"),this.currentConnectionState=e,this.updateCurrentState()},linkCallback:function(e){alert("NetworkHandler::linkCallback(state = "+e+")"),this.currentLinkState=e,this.updateCurrentState()},playerCallback:function(e){alert("NetworkHandler::playerCallback(state = "+e+")"),"ERROR"==(this.currentPlayerState=e)&&(this.currentQueryManagerState="BAD"),this.updateCurrentState()},queryManagerCallback:function(e){alert("NetworkHandler::queryManagerCallback(state = "+e+")","debug"),this.currentQueryManagerState=e,this.updateCurrentState()},destroy:function(){delete this.callback}}),vui.ConnectionMonitor=new Class({initialize:function(e){this.registerCallback(e),this.listenerHandle=VUDU.registerSystemListener("connection",null,function(e,t,i){alert("ConnectionMonitor::systemEvent source="+e+" type="+t),"stateChanged"==t&&(alert("ConnectionMonitor::systemEvent stateChanged state="+i.state+" reason="+i.reason),i.state,this.setState("connected"==i.state?"GOOD":"BAD"))}.bind(this))},registerCallback:function(e){this.callback=e},setState:function(e){this.callback(e)}}),vui.LinkMonitor=new Class({onNetworkRestored:function(){controller.setOnNetworkRestore(!0);var e=this;alert("network reconnected event"),vui.getModel().userId?(e.setState("BAD"),"vesta"!==vui.vvPlatform.id&&updateVuduSplashScreen("splash",vui.strings.transformCase("Restoring secure network connection"),vui.strings.transformCase("Please wait"),"",""),e.networkEventsTimer&&(window.clearTimeout(e.networkEventsTimer),e.networkEventsTimer=null),e.networkEventsTimer=window.setTimeout(function(){e.networkEventsTimer=null,vui.getModel().loadUser(function(){alert("account refreshed after network reconnection"),e.setState("GOOD"),controller.baseLayer&&controller.baseLayer.currentPage?(controller.refreshCurrentPage(),controller.setOnNetworkRestore(!1)):controller.goHome()})},3e3)):(e.setState("GOOD"),controller.refreshCurrentPage(),controller.setOnNetworkRestore(!1))},onNetworkLost:function(){var t=this;alert("network disconnect event"),null==t.networkEventsTimer&&(t.networkEventsTimer=window.setTimeout(function(){var e;controller.baseLayer.currentPage&&(e=controller.baseLayer.currentPage,controller.baseLayer.currentParams=e.save?e.save():{}),t.setState("BAD"),t.networkEventsTimer=null},1e3))},initialize:function(e){this.registerCallback(e),vui.vvPlatform.onNetworkRestored=this.onNetworkRestored.bind(this),vui.vvPlatform.onNetworkLost=this.onNetworkLost.bind(this)},networkEventsTimer:null,registerCallback:function(e){this.callback=e},setState:function(e){this.callback(e)}}),vui.QueryMonitor=new Class({initialize:function(e){this.registerCallback(e),alert("QueryMonitor created"),vui.getModel().registerQueryStatusCallback(function(e){alert("QueryMonitor::statusCallback status="+e,"debug"),this.setState(e?"GOOD":"BAD")}.bind(this))},registerCallback:function(e){this.callback=e},setState:function(e){this.callback(e)}}),vui.PlayerMonitor=new Class({initialize:function(e){this.registerCallback(e),alert("PlayerMonitor created"),vui.getFacade().registerObserver(vui.Facade.PLAYER_STATE,this)},registerCallback:function(e){this.callback=e},setState:function(e){this.callback(e)},notifyObserver:function(e){var t=e.getName(),i=e.getBody();alert("PlayerMonitor.notifyObserver(name="+t+" body="+i),t==vui.Facade.PLAYER_STATE&&(i==vui.widgets.Player.PLAYING||i==vui.widgets.Player.UNDERRUN?this.setState("PLAYING"):this.setState("NOT_PLAYING"))}}),LRUObjectCache={create:function(e){function t(e){this._objects={},this._accessTimes={},this._creationTimes={},this._count=0,this._maxCount=e&&e.maxCount||10,this.expirationPeriod=1e3*e.expirationPeriod}return t.prototype=this,new t(e)},check:function(e,t){var i=this._objects[e],s=VUDU.vuduTime();return i?this.expirationPeriod&&this._creationTimes[e]+this.expirationPeriod<s?(this.drop(e),null):(t||(this._accessTimes[e]=s),i):null},add:function(e,t){var i=VUDU.vuduTime();if(this._objects[e])return this._objects[e]=t,this._accessTimes[e]=i,void(this._creationTimes[e]=i);this._count==this._maxCount&&this._evict(),this._count=this._count+1,this._objects[e]=t,this._accessTimes[e]=i,this._creationTimes[e]=i},drop:function(e){return this._objects[e]?(delete this._objects[e],delete this._accessTimes[e],delete this._creationTimes[e],this._count=this._count-1,0):1},_evict:function(){var e,t=VUDU.vuduTime()+1,i=null;for(var s in this._accessTimes){!Object.hasOwnProperty.call(this._accessTimes,s)||(e=this._accessTimes[s])<t&&(i=s,t=e)}i&&this.drop(i)},getKeys:function(){return new Hash(this._objects).getKeys()}},window.vudu=null,vui.pages={},window.selectDelay=200,window.dimmerDelay=750,window.FILTER_COLLECTIONS_AFTER=40,window.APPNAME="MovieApp",window.REPORTDELAY=1500,"es"==vui.USER_LANGUAGE?vui.RATING_SYSTEM="mex":vui.RATING_SYSTEM="usa",vui._CONS=vui._CONS||{},vui._CONS.showcaseRibbonCap=35,vui.init=function(){for(var e in vui.args=VUDU_APP_ARGS,vui.args)alert(e+": "+vui.args[e]);if(window.useWebkit=void 0,"hd"===window.WIDGETRESOLUTION&&vui.vvPlatform.useWebkit)try{void 0!==document.body.style.webkitTransform?window.useWebkit=!0:alert("HD version but not support webkitTranform???!!!")}catch(e){alert("HD document.body.style.transform check error.")}VUDU.registry={deviceId:1234567},vui.vvPlatform.getDeviceId(),vui.deviceInfo={},vui.deviceInfo.hardwareId="SAMTX121UN32F5500.......5CF6DCE307CF187A9463",vui.deviceInfo.embedderSoftwareVersion="SystemDriver 1.0",vui.deviceInfo.softwareBuildChange="100000",vui.deviceInfo.softwareVersion="3.1.0",vui.deviceInfo[vui.vvPlatform.registryFirmwareKey]="T-INFOLINK2013-1014",vui.deviceInfo.yearVersion=2015;var t=vui.deviceInfo.hardwareId.substr(0,8);vui.deviceInfo.hardwareIdPrefix8=t,VUDU.registryGet=function(){return"123456789"},VUDU.vuduTime=function(){return(new Date).getTime()},VUDU.registerSystemListener=function(e,t,i){"player"===e?window.pretendPlayerCallback=i:"connection"===e&&vui.DirectorCsClient.addStateListener(i);return{}},VUDU.video={prepareToPlay:function(){var e=window.pretendPlayerCallback;setTimeout(function(){e("player","bitrateChanged",{bitrate:1e3,rates:[1e3,2e3]})},500);setTimeout(function(){e("player","stateChanged",{state:"preparing_to_play"}),vui.getPlayer().state=vui.getPlayer().BUFFERING,window.endDrawLoading();vui.getPlayer().startTime=1275e3,window.setCurTime(1275e3)},1e3)},stop:function(){},getMinBuffer:function(){return 1},getTimestamps:function(){return[0,12,34]},setPipelinePaused:function(){},setPaused:function(){},setPipelineRateKbps:function(){}},VUDU.isDeactivating=function(){return!1},VUDU.deactivate=function(e){setTimeout(e,3e3)},VUDU.setDirectorRequestHandler=function(){},VUDU.log=function(e,t){t&&console[t]?console[t](e):console.log(e);try{e.match(/.{1,1000}/g).every(function(e){return vui.netLogger.addLogString(e,t),!0})}catch(e){console.error("Error in netLogs: "+e,"error")}vui&&vui.NetLogLocal&&vui.NetLogLocal.log(e)}},vui.is2013X12AndOldFirmware=function(){if(!window.DEVICE_IS_X12_2013)return!1;var e=window.FirmwareVersion.lastIndexOf("-");if(e<0)return alert("ERROR: COULD NOT FIND A DASH"),!1;var t=window.FirmwareVersion.substring(e+1);return(t=parseInt(t,10))<1002},vui.getUpgradeFirmwareMessage=function(){return'Please upgrade your firmware to enjoy 3D content. Press "Menu" on your remote control and then go to Support > Software Update > Update Now.'},function(){window.vui.images=window.vui.images||{};var e=window.vui.images,t=VUDU_CDN_SERVER+"images/";window.vui.vvPlatform.appFeatureEnabled()&&vui.vvPlatform.inBrowser()?t=VUDU_CDN_SERVER+"images_p34/":"hdx"==window.WIDGETRESOLUTION&&vui.vvPlatform.inBrowser()&&(t=VUDU_CDN_SERVER+"images_hdx/"),e.logo=t+"vuduLogo.png",e.cat=t+"cat.svg",e.dolbyIcon=t+"theater/dolby.png",e.dolbyPlusIcon=t+"theater/dolby_plus.png",e.dolbyAtmosIcon=t+"theater/dolby_atmos.png",e.playTrailerIcon=t+"trailerIcon.png",e.BG_Temp=t+"default_bg.jpg",e.healthBars=t+"healthBars.png",e.healthBar0=t+"theater/health_bar_0.png",e.healthBar1=t+"theater/health_bar_1.png",e.healthBar2=t+"theater/health_bar_2.png",e.healthBar3=t+"theater/health_bar_3.png",e.blueRemoteButton=t+"blue_button.png",e.returnRemoteButton=t+"return_icon.png",e.family_mode_on=t+"theater/family_play_on.png",e.family_mode_off=t+"theater/family_play_off.png",e.family_mode_icon=t+"theater/family_play.png",e.familyplay_info_icon=t+"movieDetail_fpInfo.png",e.familyplay_jumping_guys=t+"jumpingGuys.png",e.uxWelcomeScreen_default=t+"welcome.jpg",e.newVuduLogo=t+"home/vudu_logo.png",e.p34Logo=t+"home/P34_logo.png",e.wmvLogo=t+"home/wmv_logo.png",e.whiteCheck=t+"settings/btn_check.png",e.walmartLogo=t+"walmartLogo.png",e.empty1x1=t+"empty1x1.png",e.chaptersIcon=t+"theater/chapters.png",e.chapterBG=t+"theater/chapterBG.png";var i=t+"dolby/";e.dolbyAtmosIcon=i+"dolby_atmos_icon_on_player_98x19px.png",e.dolbyAtmos=i+"dolby_atmos.png",e.dolbyDigitalPlus=i+"dolby_digital_plus_icon_on_player_81x19px.png",e.dolbyDigital=i+"dolby_digital_icon_on_player_78x19.png",e.dolbyVisionIcon=i+"dolby_vision_icon_89x18.png",e.dolbyVisionLogo=i+"dolby_vision_icon_on_player_94x19px.png",e.dolbyVisionLogoGrey=i+"dolby_vision_logo_gray.png",e.uhdLogo=i+"uhd_4k_logo.png";var s=t+"hdr10/";e.hdr10_about=s+"hdr10_icon_about.png",e.hdr10_details_disabled=s+"hdr10_icon_details_disabled.png",e.hdr10_details_enabled=s+"hdr10_icon_details_enabled.png";var n=t+"theater/";e.backIcon=n+"back.png",e.rw15Icon=n+"rw15.png",e.qty_uhd=n+"uhd.png",e.qty_hdx=n+"hdx.png",e.qty_sd=n+"sd.png",e.qty_uhd_white=n+"uhd_white.png",e.qty_hdx_white=n+"hdx_white.png",e.qty_sd_white=n+"sd_white.png",e.pullup=n+"pullup.png",e.menu_qty_line=n+"menu_qty_line.jpg",e.rewindIcon=n+"rw.png",e.playIcon=n+"play.png",e.pauseIcon=n+"pause.png",e.forwardIcon=n+"ff.png",e.cc_bg=n+"cc_bg.png",e.ccIcon=n+"cc.png",e.enIcon=n+"en.png",e.esIcon=n+"es.png",e.cc_menu_off=n+"ic_off_menu.png",e.cc_menu_en=n+"cc_menu_en.png",e.cc_menu_es=n+"cc_menu_es.png",e.timelineBG=n+"timelineBG.png",e.timeline=n+"timeline.png",e.mode_FAST_FORWARD_1=n+"mode_ff_2.png",e.mode_FAST_FORWARD_2=n+"mode_ff_3.png",e.mode_FAST_FORWARD_3=n+"mode_ff_4.png",e.mode_REWIND_1=n+"mode_rw_2.png",e.mode_REWIND_2=n+"mode_rw_3.png",e.mode_REWIND_3=n+"mode_rw_4.png",e.spinner=n+"loading_animation.png",e.spinner_transaction=n+"spinner.png",e.spinner_avod=n+"avod-4-frames-no-fade.png",e.nextEpisodeBG=n+"nextEpisodeBG.png",e.ad_sparkle=n+"ad_sparkle.png",e.ad_checkmark=n+"ad_checkmark.png",e.ad_error=n+"ad_error.png",e.km_backIcon=n+"km_back.png",e.km_ccIcon=n+"km_cc.png",e.km_enIcon=n+"km_en.png",e.km_esIcon=n+"km_es.png",e.km_cc_menu_en=n+"km_cc_menu_en.png",e.km_cc_menu_off=n+"km_ic_off_menu.png",e.km_cc_menu_es=n+"km_cc_menu_es.png",e.km_chaptersIcon=n+"km_chapters.png",e.km_pause=n+"km_pause.png",e.km_play=n+"km_play.png",e.km_rwIcon=n+"km_rw.png",e.km_ff=n+"km_ff.png";var a=t+"metaPanel/";e.mp={},e.mp.vuduRating=a+"vuduRating.png",e.mp.communityRating=a+"community.png",e.mp.myRating=a+"myRating.png",e.mp.greenStar=a+"whiteStar.png",e.mp.grayStar=a+"grayStar.png",e.mp.whiteStar=a+"whiteStar.png",e.mp.tomato=a+"tomato.png",e.mp.rottenTomato=a+"rotten_tomato.png",e.mp.certifiedTomato=a+"certified_tomato.png",e.mp.freshTomato=a+"fresh_tomato.png",e.mp.tomato_text=a+"tomato_text.png",e.mp.line=a+"line.png",e.mp.hdx_on=a+"hdx_on.png",e.mp.hdx_off=a+"hdx_off.png",e.mp.hd_on=a+"hd_on.png",e.mp.hd_off=a+"hd_off.png",e.mp.sd_on=a+"sd_on.png",e.mp.sd_off=a+"sd_off.png",e.mp.uhd_on=a+"uhd_on.png",e.mp.uv=a+"uv.png",e.mp.ma=a+"ma_icon.png",e.mp.saveBurst=a+"saveBurst.png",e.mp.reviewSplat=a+"review_splat.png",e.mp.hdr=a+"HDR_lua.png";var o=t+"myVudu/";e.my={},e.my.bar=o+"bar.png",e.my.bar_on=o+"bar_on.png",e.my.bar_bg=o+"bar_bg.png",e.my.play=o+"btn_play.png",e.mexicoTransactionPanelDisclaimer=t+"mexicoTransactionPanelDisclaimer.png",e.preOrderDisclaimer=t+"preOrder_disclaimer.png",e.welcomeOverlay=t+"Overlay_Poster_Welcome.png",e.genericOverlay=t+"Overlay_Poster_Generic.png",e.home={},e.blank=t+"blank.gif";var r=t+"home/";e.home.search=r+"search_icon.png",e.home.setting=r+"setting_icon.png",e.home.scroller_dotted=r+"scroll_bar_dotted.png",e.home.lock=r+"lock.png",e.home.sort=r+"sort_icon.png",e.home.view_all=r+"view_all_icon.png",e.home.homeTop=r+"homeTop.png",e.home.default_ribbon=r+"default_ribbon.png",e.home.clear_icon=r+"clear_all_icon.png",e.home.myoffers_notification_read=r+"notification_bell_read_icon.png",e.home.myoffers_notification_unread=r+"notification_bell_unread_icon.png";var l=t+"myoffers/";e.myoffers={},e.myoffers.card_unread_icon=l+"orange_dot_unread_icon_offer_card.png",e.myoffers.promo_tag=l+"my_offer_promo_tag.png",e.myoffers.infopanel_price_title=l+"infopanel_price_title.png",e.myoffers.infopanel_banner=l+"my_offer_promo_banner2.png";var u=t+"avodpromotag/";e.avod={},e.avod.promo_tag=u+"poster.png",e.avod.metaPanel_banner=u+"metadataImage.png",e.avod.detailsPage_banner=u+"productDetailImage.png",e.topHomeIcon=r+"top_home_icon.png",e.topBackIcon=r+"top_back_icon.png";var d=t+"explore/";e.explore={},e.explore.ribbon_bg=d+"ribbon_bg.png",e.explore.divider=d+"divider.png",e.explore.arrow_left=d+"arrow_left.png",e.explore.arrow_right=d+"arrow_right.png",e.explore.genre_add=d+"genre_add.png",e.explore.genre_check=d+"genre_check.png",e.explore.genre_clear=d+"genre_clear.png",e.explore.sub_genre_add=d+"sub_genre_add.png",e.explore.sub_genre_check=d+"sub_genre_check.png",e.dolby_logo=t+"settings/Dolby_Digital_Plus.png",e.jinni_logo=t+"settings/Jinni.png",e.prPhoto_logo=t+"settings/PRPhotos.png",e.rt_logo=t+"settings/Rotten_Tomatoes.png",e.upArrow=t+"settings/pointer_arrow_up_off.png",e.downArrow=t+"settings/pointer_arrow_down_off.png",e.bookmarkBg=t+"detailPage/bookmark_bg_v2.png",e.bookmarkFg=t+"detailPage/bookmark_fg_v2.png",e.ownCheckmark=t+"detailPage/own_checkmark.png",e.interstitial_next_arrow=t+"detailPage/interstitial_next_arrow.png",e.interstitial_prev_arrow=t+"detailPage/interstitial_prev_arrow.png",e.rentalInfo_days_hrs=t+"detailPage/rentalInfo_days_hrs.png",e.rentalInfo_hrs_min=t+"detailPage/rentalInfo_hrs_min.png",e.rentalInfo_min_sec=t+"detailPage/rentalInfo_min_sec.png",e.menu_arrow=t+"menu_arrow.png",e.menu_arrow_black=t+"menu_arrow_black.png",e.checkmark=t+"overlays/checkmark.png",e.uhd_offer=t+"overlays/uhd_offer.png",e.hd_offer=t+"overlays/hd_offer.png",e.hdx_offer=t+"overlays/hdx_offer.png",e.sd_offer=t+"overlays/sd_offer.png",e.sd_overlay=t+"overlays/sd_icon.png",e.hd_overlay=t+"overlays/hd.png",e.hdx_overlay=t+"overlays/hdx_icon.png",e.uhd_overlay=t+"overlays/uhd_icon.png",e.ld=t+"overlays/legalDisclaimer.png",e.quality_panel_bg=t+"overlays/quality_panel_bg.png",e.quality_panel=t+"overlays/quality_panel.png",e.rating_dialog_stars=t+"overlays/rating_dialog_stars.png",e.watch_icon=t+"buttonIcon/btn_play.png",e.watch_icon_disabled=t+"buttonIcon/btn_play_disabled.png",e.rent_own_icon=t+"buttonIcon/btn_own.png",e.add_wishlist_icon=t+"buttonIcon/btn_wishlist_add.png",e.remove_wishlist_icon=t+"buttonIcon/btn_wishlist_minus.png",e.remove_wishlist_icon_disabled=t+"buttonIcon/btn_wishlist_minus_disabled.png",e.rate_share_icon=t+"buttonIcon/btn_rate_Share.png",e.continue_icon=t+"buttonIcon/btn_continue.png",e.confirm_icon=t+"buttonIcon/btn_confirm.png",e.confirm_icon_bl=t+"buttonIcon/btn_confirm_bl.png",e.cancel_icon=t+"buttonIcon/btn_cancel.png",e.back_icon=t+"buttonIcon/btn_back.png",e.browse_icon=t+"buttonIcon/btn_browse.png",e.email_icon=t+"buttonIcon/btn_email.png",e.enter_email_icon=t+"buttonIcon/btn_login.png",e.startOver_icon=t+"buttonIcon/btn_reset.png",e.edit_icon=t+"buttonIcon/btn_edit.png",e.questionMark_icon=t+"buttonIcon/btn_questionmark.png",e.retry_icon=t+"buttonIcon/btn_retry.png",e.details_icon=t+"buttonIcon/btn_details.png",e.information_icon=t+"buttonIcon/information.png",e.search_icon_no_text=t+"buttonIcon/btn_search_no_text.png",e.setting_btn_icon=t+"buttonIcon/btn_setting.png",e.trash_icon=t+"buttonIcon/btn_trash.png",e.reorder_icon=t+"buttonIcon/btn_reorder.png",e.reorder_icon_disabled=t+"buttonIcon/btn_reorder_disabled.png",e.text_field=t+"text_field.png",e.subway_bg=t+"discovery/subway_bg.jpg",e.subway_genes_bg=t+"discovery/subway_genes_bg.png",e.subway_route_base_bg=t+"discovery/subway_route_base_bg.png",e.subway_route_line_bg=t+"discovery/subway_route_line_bg.png",e.discovery_visited_stop_img=t+"discovery/category_pressed.png",e.discovery_visited_path_img=t+"discovery/lines_stacked.png",e.discovery_stops_stacked_img=t+"discovery/stops_stacked.png",e.discovery_back_Arrow_img=t+"discovery/back_arrow.png";var c=t+"commonSense/";e.commonSense={},e.commonSense.age2_detail=c+"csm2+_details.png",e.commonSense.age3_detail=c+"csm3+_details.png",e.commonSense.age4_detail=c+"csm4+_details.png",e.commonSense.age5_detail=c+"csm5+_details.png",e.commonSense.age6_detail=c+"csm6+_details.png",e.commonSense.age7_detail=c+"csm7+_details.png",e.commonSense.age8_detail=c+"csm8+_details.png",e.commonSense.age9_detail=c+"csm9+_details.png",e.commonSense.age10_detail=c+"csm10+_details.png",e.commonSense.age11_detail=c+"csm11+_details.png",e.commonSense.age12_detail=c+"csm12+_details.png",e.commonSense.age13_detail=c+"csm13+_details.png",e.commonSense.age14_detail=c+"csm14+_details.png",e.commonSense.age15_detail=c+"csm15+_details.png",e.commonSense.age16_detail=c+"csm16+_details.png",e.commonSense.age17_detail=c+"csm17+_details.png",e.commonSense.age18_detail=c+"csm18+_details.png",e.commonSense.age2_meta=c+"age_2+_metainfo.png",e.commonSense.age3_meta=c+"age_3+_metainfo.png",e.commonSense.age4_meta=c+"age_4+_metainfo.png",e.commonSense.age5_meta=c+"age_5+_metainfo.png",e.commonSense.age6_meta=c+"age_6+_metainfo.png",e.commonSense.age7_meta=c+"age_7+_metainfo.png",e.commonSense.age8_meta=c+"age_8+_metainfo.png",e.commonSense.age9_meta=c+"age_9+_metainfo.png",e.commonSense.age10_meta=c+"age_10+_metainfo.png",e.commonSense.age11_meta=c+"age_11+_metainfo.png",e.commonSense.age12_meta=c+"age_12+_metainfo.png",e.commonSense.age13_meta=c+"age_13+_metainfo.png",e.commonSense.age14_meta=c+"age_14+_metainfo.png",e.commonSense.age15_meta=c+"age_15+_metainfo.png",e.commonSense.age16_meta=c+"age_16+_metainfo.png",e.commonSense.age17_meta=c+"age_17+_metainfo.png",e.commonSense.age18_meta=c+"age_18+_metainfo.png",e.commonSense.mediaLogo=c+"common_sense_media_logo.png",e.commonSense.consumerismIcon=c+"consumerism_icon.png",e.commonSense.drugsIcon=c+"drinking_drugs_smoking_icon.png",e.commonSense.educationalIcon=c+"educational_value_icon.png",e.commonSense.languageIcon=c+"language_icon.png",e.commonSense.messagesIcon=c+"positive_messages_icon.png",e.commonSense.roleModelsIcon=c+"positive_role_models_representations_icon.png",e.commonSense.sexIcon=c+"sex_icon.png",e.commonSense.violenceIcon=c+"violence_icon.png",e.mixMatch={},e.mixMatch.emptyPoster=t+"empty_poster_top_bundle_row.png",e.mixMatch.smallMinusIcon=t+"buttonIcon/small_minus_icon.png",e.mixMatch.minusIcon=t+"buttonIcon/selected_remove_minus_poster_icon.png";var h=t+"3p/";e.thirdParty={},e.thirdParty.showtime_detail=h+"showtime_logo_details_page.png",e.thirdParty.showtime_meta=h+"showtime_red_logo_metadata_panel.png",e.thirdParty.starz_detail=h+"starz_logo_details_page.png",e.thirdParty.starz_meta=h+"starz_logo_metadata_panel.png",e.thirdParty.netflix_detail=h+"showtime_logo_details_page.png",e.thirdParty.netflix_meta=h+"showtime_red_logo_metadata_panel.png",e.thirdParty.hbo_detail=h+"starz_logo_details_page.png",e.thirdParty.hbo_meta=h+"starz_logo_metadata_panel.png",e.thirdParty.hbo_longPoster=t+"test/channels/hbo_longPoster.png",e.thirdParty.showtime_longPoster=t+"test/channels/showtime_longPoster.png",e.thirdParty.starz_longPoster=t+"test/channels/starz_longPoster.png";var v=t+"kidsMode/";e.kidsMode={},e.kidsMode.exitButtonBg=v+"kidsModeExitButton.png",e.kidsMode.exitButtonBg_hover=v+"kidsModeExitButton_hover.png",e.kidsMode.logo_landing_page=v+"kids_logo_landing_page.png",e.kidsMode.logo_large=v+"kids_logo_large.png",e.kidsMode.logo_settings=v+"kids_logo_settings.png",e.kidsMode.logo_your_library=v+"kids_logo_your_library.png",e.kidsMode.logo_one_size=v+"kids_logo_one_size.png",e.kidsMode.star_icon_white_hello_again=v+"kids_star_icon_white_hello_again.png",e.kidsMode.star_icon_on_button=v+"star_icon_on_button.png",e.kidsMode.star_icon_focus_vudu=v+"star_icon_focus_vudu.png",e.kidsMode.star_icon_sec_focus_vudu=v+"star_icon_secondary_focus_vudu.png",e.kidsMode.scroll_arrow_up=v+"kids_scroll_arrow_up.png",e.kidsMode.scroll_arrow_down=v+"kids_scroll_arrow_down.png",e.kidsMode.scroll_arrow_up_black=v+"kids_scroll_arrow_up_black.png",e.kidsMode.scroll_arrow_down_black=v+"kids_scroll_arrow_down_black.png",e.kidsMode.view_all=v+"kids_view_all_default.png",e.clearplay_w_text=t+"clearplay_logo.png",e.clearplay_icon=t+"clearplay_icon.png";var m=t+"userCollection/";e.userCollection={},e.userCollection.sort_default=m+"user_collection_sort_default.png",e.userCollection.sort_select=m+"user_collection_sort_select.png",e.userCollection.edit_default=m+"user_collection_edit_default.png",e.userCollection.edit_select=m+"user_collection_edit_select.png",e.userCollection.confirmation=m+"user_collection_add_confirmation.png",e.userCollection.checked=m+"user_collection_checked.png",e.userCollection.unchecked=m+"user_collection_unchecked.png",e.userCollection.left_arrow=m+"tool_tip_triangle_left.png",e.userCollection.up_arrow=m+"tool_tip_triangle_up.png",e.userCollection.circle_empty=m+"user_collection_empty_circle.png",e.userCollection.circle_empty_black=m+"user_collection_empty_circle_black.png",e.userCollection.circle_gray=m+"user_collection_gray_circle.png",e.userCollection.circle_green=m+"user_collection_green_circle.png",e.userCollection.circle_red=m+"user_collection_red_circle.png",e.userCollection.tooltip_bubble_nav=m+"tooltip_bubble_nav.png",e.userCollection.tooltip_bubble_details=m+"tooltip_bubble_details.png"}(),vui.SelectorDelegate={},vui.selNavType={WHEEL:1,DIRECTION:2,POINTER:3},vui.SelectorDelegate.Leaf=new Class({autoFocus:!0,drawSelector:function(e){vui.drawSelector(this,e)},hideSelector:function(){vui.hideSelector()},select:function(e){var t;window.controller.batchSelectorDraw||this.drawSelector(_vuidata.selectorVisible),vui.setSelected(this),this.onSelect&&(this.onSelectDelay&&0<this.onSelectDelay?(t=function(){_vuidata.selectorDelegateTimer=null,vui.getSelected()==this&&this.onSelect(e)}.bind(this),_vuidata.selectorDelegateTimer&&(clearTimeout(_vuidata.selectorDelegateTimer),_vuidata.selectorDelegateTimer=null),_vuidata.selectorDelegateTimer=setTimeout(t,this.onSelectDelay)):vui.getSelected()==this&&this.onSelect(e))},deselect:function(){this.hideSelector(),vui.setSelected(null),this.elem.blur(),this.onDeselect&&this.onDeselect()},onAction:function(e){this.action?this.action():vui.executeOnContainer(this.parentWidget,"onAction",e)},initSelector:function(){this.isLeafWidget=!0,this.pointerCursor=vui.pointerCursorClickable}}),vui.SelectorDelegate.Linear=new Class({autoFocus:!0,_doBasicWheelHandling:function(e){if(0==this.autoFocus&&vui.getSelected()==this)return vui.executeOnContainer(this.parentWidget,"uiWheel",e);null==this.selected&&(this.selected=0);var t=this.children,i=t.length,s=-1,n=this.selected;e.down&&(s=1,n=i-this.selected-1);for(var a=this.selected,o=e.count,r=this.selected,l=null;0<e.count&&0<n;)if(--n,0!=t[r+=s].selectable&&(--e.count,t[l=r].uiWheel))return vui.select(t[r]),t[r].uiWheel(e);var u,d,c,h,v=!1;if(e.down?"vui.widgets.UIScrollList"==this.name?(o=2,this.scrollDown&&!t[a+o]&&(v=this.scrollDown())):(u=function(){for(var e=a+1;e<t.length;e++)if(t[e].selectable)return!0;return!1},!this.scrollDown||t[a+o]&&t[a+o].selectable||!u()&&"FeaturedLoL"===this.elem.className||(v=this.scrollDown())):"vui.widgets.UIScrollList"==this.name?(o=2,this.scrollUp&&!t[a-o]&&(v=this.scrollUp())):(u=function(){for(var e=a-1;0<=e;e--)if(t[e].selectable)return!0;return!1},!this.scrollUp||t[a-o]&&t[a-o].selectable||!u()&&"FeaturedLoL"===this.elem.className||(v=this.scrollUp())),v){if(1==t[a].selectable)t[a]&&t[a].onSelect&&t[a].onSelect(),this.selected=a;else for(var m=this.children.length-1;0<=m;m--)if(t[m].selectable){vui.select(t[m],e.navType);break}this.rows&&1<this.rows&&e.direction&&(d=this.columns*this.rows-1,c=2<this.rows?d-this.columns:d,"right"==e.direction&&this.selected==c?(h=this.selected-this.columns+1,t[h]?(this.selected=h,vui.select(t[this.selected],e.navType)):t[this.columns]&&(this.selected=this.columns,vui.select(t[this.selected],e.navType))):"left"==e.direction&&0===this.selected&&t[this.columns-1]&&(this.selected=this.columns-1,vui.select(t[this.selected],e.navType))),e.count=0}else null==l||!e.down&&0!==e.count||vui.select(t[l],e.navType)},_moveLinear:function(e){return this._doBasicWheelHandling(e),!(0<e.count&&this.parentWidget)},uiWheel:function(e){var t=e||{};if(t.navType=vui.selNavType.WHEEL,!this._moveLinear(t))return vui.executeOnContainer(this.parentWidget,"uiWheel",t)},changeSelection:function(e){if(this.children){var t,i=this.children;if("number"==typeof e){if((t=e)<0||t>=i.length)return alert("CHANGE SLEECTION, out of range "),1}else{if("object"!=typeof e)return e?void alert("CHANGE SLEECTION, ELSE RETURNING"):(alert("CHANGE SLEECTION, ! child "),this.selected=null,void vui.select(this));if(!$defined(t=this.getChildIndex(e)))return 1}this.selected=t,vui.isOnSelectionPath(this)?vui.select(i[t]):alert("CHANGE SLEECTION,  NOT ON SELECTION PATH")}},_selectChild:function(e){if(null!=this.selected)if(this.children[this.selected]&&0==this.children[this.selected].selectable){var t=this.selected-1;for(this.selected=null;1<=t;){if(0!=this.children[t].selectable){this.selected=t;break}--t}}else this.children[this.selected]||(alert("Bad selection. Error in vui."),this.selected=null);if(null==this.selected)for(var t=0,i=this.children.length;t<i;t++)if(0!=this.children[t].selectable){this.selected=t;break}if(null==this.selected)return this._allChildrenUnselectable=!0,void(this.selectionInheritance?(this._reselectOnAttachedChild=!0,this.selectable=!1):(this._descendOnAttachedChild=!0,vui.setSelected(this)));vui.select(this.children[this.selected],e)},select:function(){0!=this.autoFocus?this._selectChild(this):(0==this.autoFocus&&this.drawSelector(_vuidata.selectorVisible),vui.setSelected(this))},deselect:function(){0==this.autoFocus&&vui.hideSelector(),vui.setSelected(null),this._descendOnAttachedChild=!1},getSelectedIndex:function(){return null!=this.selected&&{modelIndex:this.selected,visibleViewIndex:this.selected}},getSelectedChild:function(){return null!=this.selected?this.children[this.selected]:null},setSelectedIndex:function(e){this.changeSelection(e.modelIndex)},watchChildSelectable:function(e){if(0==e.selectable){if(null!=this.selected&&this.children[this.selected]==e&&vui.isOnSelectionPath(e))vui.select(this);else if(this.selectionInheritance){for(var t=!0,i=0,s=this.children.length;i<s;i++)if(0!=this.children[i].selectable){t=!1;break}t&&(alert("Hmm. this "+this.name+" has no selectable children. Marking it unselectable"),this._reselectOnAttachedChild=!0,this.selectable=!1)}}else 1==this._descendOnAttachedChild?(this._descendOnAttachedChild=!1,this.selected=this.getChildIndex(e),vui.select(e)):1==this._reselectOnAttachedChild&&(this.selectable=!0)},_onAttachChild:function(e,t){null!=this.selected&&this.selected>=t&&this.selected<this.children.length-1&&(this.selected=this.selected+1),this._descendOnAttachedChild&&0!=e.selectable&&(this._descendOnAttachedChild=!1,this.selected=t,vui.select(e)),this._reselectOnAttachedChild&&0!=e.selectable&&(this.selectable=!0)},_onDetachChild:function(e,t){null!=this.selected&&this.selected<t||(null!=this.selected&&this.selected>t?this.selected=this.selected-1:(0===this.children.length?this.selected=null:this.selected=Math.min(this.children.length-1,this.selected||0),vui.isOnSelectionPath(e)&&vui.select(this)))},onAction:function(){0==this.autoFocus?(vui.hideSelector(),this._selectChild(this)):vui.executeOnContainer(this.parentWidget,"onAction")},onBack:function(){alert("SELECTOR ON BACK"),0==this.autoFocus&&vui.getSelected()!=this?vui.select(this):vui.executeOnContainer(this.parentWidget,"onBack")},drawSelector:function(e){this.autoFocus},initSelector:function(){var e=this.selector&&this.selector.type,t=function(n,a){return function(e){try{n?this.beforeOnDirectionDown&&this.beforeOnDirectionDown():this.beforeOnDirectionUp&&this.beforeOnDirectionUp();var t=this.layout&&(this.layout.cols||this.layout.rows)||1,i={down:n,count:t},s=this._moveLinear(i);return!s&&this.scrollWrap&&(s=(this.selected=!n&&this.children&&this.children.length||0,this._moveLinear({down:n,count:i.count}))),n?this.afterOnDirectionDown&&this.afterOnDirectionDown():this.afterOnDirectionUp&&this.afterOnDirectionUp(),!!s||vui.executeOnContainer(this.parentWidget,a,{down:n,count:i.count})}catch(e){alert(spewCaughtError(e,"ERROR in getMoveFunction"))}}.bind(this)}.bind(this);"vertical"==(e=e||(this.layout&&this.layout.type||"vertical"))?(this.onDirectionDown||(this.onDirectionDown=t(!0,"onDirectionDown")),this.onDirectionUp||(this.onDirectionUp=t(!1,"onDirectionUp")),this.onDirectionLeft||(this.strideModLeft=0,this.onDirectionLeft=function(e){var t=e&&e.count||1,i=this.layout&&(this.layout.cols||this.layout.rows)||1,s=this.getSelectedIndex(),n=s&&s.modelIndex;if(null==n)return vui.executeOnContainer(this.parentWidget,"onDirectionLeft",e);var a,o=n%i!=this.strideModLeft||this.layout&&1==this.layout.wrapLeft;1!=i&&o?(a={count:t,down:!1,direction:"left"},this._moveLinear(a)||vui.executeOnContainer(this.parentWidget,"onDirectionLeft",a)):vui.executeOnContainer(this.parentWidget,"onDirectionLeft",e)}.bind(this)),this.onDirectionRight||(this.strideModRight=this.columns-1,this.onDirectionRight=function(e){var t=e&&e.count||1,i=this.layout&&(this.layout.cols||this.layout.rows)||1,s=this.getSelectedIndex(),n=s&&s.modelIndex;if(null==n)return vui.executeOnContainer(this.parentWidget,"onDirectionRight",e);var a=n%i!=this.strideModRight||this.layout&&1==this.layout.wrapRight;if(1!=i&&a){var o=this.children[n+1];if(!o||!o.data&&!o.chapterNo)return;var r={count:t,down:!0,direction:"right"};this._moveLinear(r)||vui.executeOnContainer(this.parentWidget,"onDirectionRight",r)}else this.preventRightSiblingSelection||vui.executeOnContainer(this.parentWidget,"onDirectionRight",e)}.bind(this))):"horizontal"==e&&(this.onDirectionLeft||(this.onDirectionLeft=t(!1,"onDirectionLeft")),this.onDirectionRight||(this.onDirectionRight=t(!0,"onDirectionRight")))}}),vui.SelectorDelegate.Scroller=new Class({Implements:vui.SelectorDelegate.Linear,_doBasicWheelHandling:function(e){if(0==this.autoFocus&&vui.getSelected()==this)return vui.executeOnContainer(this.parentWidget,"uiWheel",e);null==this.selected&&(this.selected=0);var t,i=this.children,s=this.layout&&(this.layout.cols||this.layout.rows)||1;if(this.viewStartIndex&&this.visibleCount&&this.cacheCount){for(var n,a,o,r=e.down?(t=1,n=this.visibleCount+this.cacheCount-this.viewStartIndex+1-s,(this.modelFirstVisibleIndex+this.visibleCount-1>=this._getModelLength()||this.selected>n)&&(n+=s),(n=Math.min(n,i.length))-this.selected):(t=-1,a=this.cacheCount-this.viewStartIndex+1+s+1,(1==this.modelFirstVisibleIndex||this.selected<a)&&(a=1),this.selected-a),l=this.selected;0<e.count&&0<r;)if(--r,0!=i[l+=t].selectable&&(e.count=e.count-1,o=this.selected=l,0<e.count&&i[l].uiWheel))return vui.select(i[l]),i[l].uiWheel(e);o&&vui.select(i[o],e.navType)}},_moveLinear:function(e){var t;if((this._doBasicWheelHandling(e),0<e.count)&&(e.down&&(this._canScrollDown&&this._canScrollDown()&&this._scrollDown?(t=this._scrollDown(e),this._selectChild(),e.count=e.count-t,0<e.count&&this.uiWheel(e)):this._canScrollUp&&this._canScrollUp()&&this._scrollUp&&(t=this._scrollUp(e),this._selectChild(),e.count=e.count-t,0<e.count&&this.uiWheel(e))),this.parentWidget&&0<e.count))return!!e.ignoreExtra;return!0},initSelector:function(){this.parent.initSelector();var e=function(e){if(!this._moveLinear({down:!1,count:Math.max(0,(this.visibleCount||1)-1),ignoreExtra:!0}))return vui.executeOnContainer(this.parentWidget,"onPageUp",{down:!1,count:1})}.bind(this),t=function(e){if(!this._moveLinear({down:!0,count:Math.max(0,(this.visibleCount||1)-1),ignoreExtra:!0}))return vui.executeOnContainer(this.parentWidget,"onPageUp",{down:!0,count:1})}.bind(this);this.onPageUp=e,this.onPageDown=t}}),vui.saveSelectorPosition=function(e){for(var t=[],e=e;e&&e.getSelectedIndex;){var i=e.getSelectedIndex();t.push(i),e=e.getSelectedChild()}return t},vui.restoreSelectorPosition=function(e,t){if(t)for(var i=0,s=t.length;i<s&&(e.setSelectedIndex(t[i]),e=e.getSelectedChild());i++);},window._vuidata={},_vuidata.selector=null,_vuidata.selected=null,_vuidata.selected_pressed=null,vui.layeredScreen={},vui.ScreenSelector=new Class({_selectors:{},initialize:function(){this.rootElem=new Element("div",{id:"selectorLayer"}),this.rootElem.style.pointerEvents="none",document.getElementById("main").appendChild(this.rootElem)},setSelector:function(e){this.currentSelectorType&&this.currentSelectorType==e||(this.selector&&this.selector.display(!1,window.vui.getSelected()),null!=this._selectors[e]?this.selector=this._selectors[e]:("rect"==e?this.selector=this._selectors[e]=new vui.widgets.RectSelector:"round"==e?this.selector=this._selectors[e]=new vui.widgets.RoundSelector:"solidrect"==e?this.selector=this._selectors[e]=new vui.widgets.SolidRectSelector:"roundsolidrect"==e?this.selector=this._selectors[e]=new vui.widgets.RoundSolidRectSelector:"none"==e?this.selector=this._selectors[e]=new vui.widgets.NoSelector:"highLightSelector"==e&&(this.selector=this._selectors[e]=new vui.widgets.HighLightSelector),this.rootElem.appendChild(this.selector.getElem()),this.selector.elem.style.zIndex="1000"),this.currentSelectorType=e)},draw:function(e,t){var i,s,n,a,o,r,l,u,d;window.controller.batchSelectorDraw||(i=e.elem,e.selectorType&&"none"!=e.selectorType&&(null!=e.selectorType?this.setSelector(e.selectorType,e):this.setSelector("none",e),n=(s=i.getPosition()).x,a=s.y,r=o=0,(e.selectorPaddingTop||e.selectorPaddingLeft)&&(o=e.selectorPaddingLeft||0,r=e.selectorPaddingTop||0),this.selector.elem.style.left=n-o+"px",this.selector.elem.style.top=a-r+"px",d=vui.movie20?(u=(l=i.getSize()).x+2*o,l.y+2*r):(u=parseInt(i.style.width)+2*o,parseInt(i.style.height)+2*r),this.selector.elem.style.width=u+"px",this.selector.elem.style.height=d+"px",this.selector.resize(u,d),this.selector.display(!0,window.vui.getSelected()),this.showSelector(t,e)))},showSelector:function(e,t){1!=e||window.isIpad?(this.showingSelector=!1,this.selector&&(t=t||window.vui.getSelected(),this.selector.display(!1,t))):(this.showingSelector=!0,this.selector&&(t=t||window.vui.getSelected(),this.selector.display(!0,t)))}}),vui.layeredScreen.selector=new vui.ScreenSelector,vui.getSelected=function(){return window._vuidata.selected},vui.setSelected=function(e){e?"object"==typeof e?window._vuidata.selected=e:alert("You are trying to set selected to a non-widget of type "+typeof e):window._vuidata.selected&&delete window._vuidata.selected},vui.drawSelector=function(e,t){vui.layeredScreen.selector.draw(e,t)},vui.hideSelector=function(){vui.layeredScreen.selector.showSelector(!1)},vui.ignoreKeyRepeat=function(){return!!vui.KEY_REPEAT_THRESHOLD&&(!!(vui.lastKeyTimestamp&&Date.now()-vui.lastKeyTimestamp<vui.KEY_REPEAT_THRESHOLD)||(vui.lastKeyTimestamp=Date.now(),!1))},vui.onScalarDirectionDown=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onDirectionDown",{down:!0,count:1})},vui.onScalarDirectionUp=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onDirectionUp",{down:!1,count:1})},vui.onScalarDirectionRight=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onDirectionRight",{down:!0,count:1})},vui.onScalarDirectionLeft=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onDirectionLeft",{down:!1,count:1})},vui.onClickAction=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(vui.getSelected(),"onAction")},vui.onClickKey=function(e){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(vui.getSelected(),"onKey",e)},vui.onClickBackspace=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onBackspaceKey")},vui.onClickNumeric=function(e){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(vui.getSelected(),"onNumeric",e)},vui.onClickBack=function(){if(window.vuduSplashScreenIsShowing)controller.exitApp();else if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat()){var e=window.vui.getSelected();if(e)return vui.executeOnContainer(e,"onBack",{down:!1,count:1});controller.exitApp()}},vui.onClickYellow=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onYellow",{down:!1,count:1})},vui.onClickBlue=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onBlue",{down:!1,count:1})},vui.onClickRed=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onRed",{down:!1,count:1})},vui.onClickTools=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onTools",{down:!1,count:1})},vui.onClickStop=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onStop",{down:!1,count:1})},vui.onClickPause=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onPause",{down:!1,count:1})},vui.onClickPlay=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onPlay",{down:!1,count:1})},vui.onClickSkipRW=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onSkipRW",{down:!1,count:1})},vui.onClickSkipFF=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onSkipFF",{down:!1,count:1})},vui.onClickFF=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onFF",{down:!1,count:1})},vui.onClickRW=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onRW",{down:!1,count:1})},vui.onVoiceControlSkip=function(e){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onVoiceControlSkip",{down:!1,count:1,offset:e})},vui.onVoiceControlSetPosition=function(e){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onVoiceControlSetPosition",{down:!1,count:1,position:e})},vui.onVoiceControlSetSubtitle=function(e){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onVoiceControlSetSubtitle",{down:!1,count:1,toggle:e})},vui.onClickInfo=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onInfo",{down:!1,count:1})},vui.onVolumeUp=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onVolumeUp",{down:!1,count:1})},vui.onVolumeDown=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onVolumeDown",{down:!1,count:1})},vui.onMute=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onMute",{down:!1,count:1})},vui.onExit=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onExit",{down:!1,count:1})},vui.toggleCC=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"toggleCC",{down:!1,count:1})},vui.onClickRepeat=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.executeOnContainer(window.vui.getSelected(),"onRw15",{down:!1,count:1})},vui.onClickPlayPause=function(){if(!window._vuidata.ignoreUserEvents&&!vui.ignoreKeyRepeat())return vui.getPlayer().state&&vui.getPlayer().state!=vui.getPlayer().PAUSED?vui.executeOnContainer(window.vui.getSelected(),"onPause",{down:!1,count:1}):vui.executeOnContainer(window.vui.getSelected(),"onPlay",{down:!1,count:1})},vui.select=function(e,t){var i,s=vui.getSelected();e&&s&&e==s||(s&&(s.isSelected=!1,s.deselect&&s.deselect(),vui.setSelected(null)),e&&(e.isSelected=!0,(i=function(e){var t=e.parentWidget;if(t){if(t.getChildIndex)return t.selected=t.getChildIndex(e),i(t);alert("Parent doesn't support getChildIndex. parent="+t.name+"child = "+e.name)}})(e),e.select?e.select(t):vui.setSelected(e)))},vui.setBusyTimeout={},vui.setBusy=function(e,t,i){var s=null;e&&0<t?(s=+new Date,vui.setBusyTimeout[s]=setTimeout(function(){vui.setBusy(!1),delete vui.setBusyTimeout[s],alert("Warning: setBusy Timeout is fired: "+t)},t)):!e&&0<i&&(clearTimeout(vui.setBusyTimeout[i]),delete vui.setBusyTimeout[i]);var n=_vuidata.ignoreUserEventsCount||0;return e?n+=1:--n<=0&&n<0&&(n=0),_vuidata.ignoreUserEventsCount=n,_vuidata.ignoreUserEvents=0<n,s},vui.setSelectorVisible=function(e){_vuidata.selectorVisible=e,vui.onRedraw()},vui.onRedraw=function(){var e;controller.baseLayer?(vui.getSelected()||vui.select(controller.baseLayer),(e=vui.getSelected())&&e.drawSelector&&e.drawSelector(_vuidata.selectorVisible)):alert("NO BASE LAYER")},vui.addWatch=function(t,i,s){function e(){return r}function n(e){return r=a===e?e:(a=e,o=r,s.call(t,i,o,e))}var a,o=t[i],r=o;delete t[i]&&(Object.defineProperty?Object.defineProperty(t,i,{get:e,set:n}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,i,e),Object.prototype.__defineSetter__.call(t,i,n)))},Object.prototype.unwatch?vui.removeWatch=function(e,t){e.unwatch(t)}:vui.removeWatch=function(e,t){var i=e[t];delete e[t],e[t]=i},vui.isAncestorOf=function(e,t){for(;t;){if(e==t)return!0;t=t.parentWidget}return!1},vui.isOnSelectionPath=function(e){return vui.isAncestorOf(e,vui.getSelected())},vui.widgets={},vui.widgets._nextWidgetId=0,vui.widgets._getNextWidgetId=function(){return vui.widgets._nextWidgetId++},vui.START_EVENT=vui.isTouch?"touchstart":"mousedown",vui.MOVE_EVENT=vui.isTouch?"touchmove":"mousemove",vui.END_EVENT=vui.isTouch?"touchend":"mouseup",vui.widgets.Base=new Class({Implements:Events,elemTag:"div",elemPosition:"absolute",selectable:!1,children:[],el:{},createElement:function(){"none"==this.elemPosition?this.elem=new Element(this.elemTag):this.elem=new Element(this.elemTag,{styles:{position:this.elemPosition}}),this.elemClassName&&(this.elem.className=this.elemClassName)},initialize:function(){this.widgetId=vui.widgets._getNextWidgetId(),this._facade=vui.getFacade(),this.init||alert("WARNING: init not defined"),this.createElement(),vui.addWatch(this,"selectable",function(e,t,i){return this.selectable=i,this.watchSelectable(),i}.bind(this)),this.init&&this.init.apply(this,arguments)},getElem:function(){if(this.elem)return this.elem;alert("ERROR: Called widget get without a this.elem")},sendNotification:function(e,t){this._facade.sendNotification(e,t)},notifyObserver:function(e){alert(e)},setSelectable:function(e){e?(this.selectable=!0,this.sendNotification(vui.Facade.WIDGET_SELECTABLE,this)):(this.selectable=!1,this.sendNotification(vui.Facade.WIDGET_NOT_SELECTABLE,this))},getChildIndex:function(e){return this.indexed||this._reindex(),e.index},_reindex:function(e){if(this.children&&0<this.children.length){for(var t=e||0,i=this.children,s=t,n=i.length;s<n;s++)i[s].index=s;this.indexed=!0}},attachChild:function(e,t,i,s){if(t=t||this.elem,vui.isAncestorOf(e,this))return alert("Cycles not permitted in view hierarchy"),!1;var n=e.parentWidget;if(n&&!n.detachChild(e))return!1;var a=this.children;(null==i||i<0||i>a.length-1)&&(i=a.length),a.splice(i,0,e),(e.parentWidget=this).indexed?this._reindex(i):this._reindex(),s||t.appendChild(e.elem),this._onAttachChild&&this._onAttachChild(e,i),this.onAttachChild&&this.onAttachChild(e,i),e.onAttachParent&&e.onAttachParent(i),this.doLayout&&this.doLayout()},attachWidget:function(e,t){this.attachChild(e,null,t,!0)},detachChild:function(e){if(!e)return!1;var t=this.getChildIndex(e);return this.children[t]==e&&(this.children.splice(t,1),this._reindex(t),delete e.index,delete e.parentWidget,this._onDetachChild&&this._onDetachChild(e,t),this.onDetachChild&&this.onDetachChild(e),e.onDetached&&e.onDetached(),this.destroyRecursive(e),e.elem.parentNode&&(e.elem.parentNode.deleteChild?e.elem.parentNode.deleteChild(e.elem):e.elem.parentNode.removeChild(e.elem)),this.doLayout&&this.doLayout(),!0)},detachAllChildren:function(e){for(var t;t=this.children.pop();)delete t.parentWidget,delete t.index,this._onDetachChild&&this._onDetachChild(t,this.children.length),this.onDetachChild&&this.onDetachChild(t),this.destroyRecursive(t),t.elem.parentNode&&(t.elem.parentNode.deleteChild&&!e?t.elem.parentNode.deleteChild(t.elem):t.elem.parentNode.removeChild(t.elem));this.children=[]},show:function(){this.elem.style.display="block",this.elem.removeEvents(),this.attachListeners&&this.attachListeners()},hide:function(){this.elem.style.display="none"},destroyRecursive:function(e){if(e.children&&e.children.length)for(;0<e.children.length;)this.destroyRecursive(e.children[0]),e.children[0].parentWidget.detachChild(e.children[0]);e.removeListener&&e.removeListener(),e.elem.removeEvents(),e.elem.destroy()},watchSelectable:function(e){var t=this.parentWidget;t&&t.watchChildSelectable&&t.watchChildSelectable(this,e)}}),vui.widgets.LeafContainer=new Class({Extends:vui.widgets.Base,Implements:vui.SelectorDelegate.Leaf,selectable:!0,initialize:function(){this.parent.apply(this,arguments),this.initSelector(),this.attachListeners(),this.elem.setAttribute("role","option")},attachListeners:function(){var e=function(e){this.onClick(e)}.bind(this),t=function(e){e.stopPropagation(),controller.isBusy||this.elem.className.match(/blowup/i)||this.onMouseEnter(e)}.bind(this),i=function(e){var t;e.stopPropagation(),e.preventDefault(),window._vuidata.ignoreUserEvents||(controller.setBusy(!0),setTimeout(function(){controller.setBusy(!1)},1e3),(t=vui.getSelected())?vui.executeOnContainer(t.parentWidget,"onMouseWheel",e):vui.select(controller.baseLayer.currentPage))}.bind(this);this.elem.addClass("clickable"),this.elem.addEvents({click:e,mouseenter:t,mousewheel:i})},onClick:function(e){e.stopPropagation();var t=vui.getSelected();t&&t.onAction&&(t==this||this.elem.className.match(/blowup/i))&&t.onAction(e)},onMouseEnter:function(e){var t=vui.getSelected();window._vuidata.ignoreUserEvents&&t&&t.parentWidget&&t.parentWidget.Rowdata||(t?t!=this&&(t.deselect(),vui.select(this)):vui.select(controller.baseLayer.currentPage))}}),vui.widgets.Container=new Class({Extends:vui.widgets.Base,Implements:vui.SelectorDelegate.Linear,selectable:!0,initialize:function(){this.parent.apply(this,arguments),this.initSelector(),this.attachListeners()},attachListeners:function(){var e=function(e){e.stopPropagation(),e.preventDefault();var t=vui.getSelected();t?vui.executeOnContainer(t.parentWidget,"onMouseWheel",e):vui.select(controller.baseLayer.currentPage)}.bind(this),t=function(e){e.stopPropagation(),this.onClick()}.bind(this);this.elem.addEvents({click:t,mousewheel:e})},onMouseWheel:function(e){0<e.wheel?this.onDirectionUp?this.onDirectionUp():vui.executeOnContainer(this.parentWidget,"onMouseWheel",e):this.onDirectionDown?this.onDirectionDown():vui.executeOnContainer(this.parentWidget,"onMouseWheel",e)},onClick:function(){vui.getSelected()&&vui.getSelected().parentWidget&&vui.getSelected().parentWidget.pageTitle&&"Theater"==vui.getSelected().parentWidget.pageTitle&&vui.getSelected().onAction()},addAutoRefreshListener:function(e){return this.refreshNotifier||(this.refreshNotifier=new vui.RefreshNotifier),this.refreshNotifier.addAutoRefreshListener(e[0],e[1]),!0},removeAutoRefreshListener:function(e){return this.refreshNotifier&&this.refreshNotifier.removeAutoRefreshListener(e),!0}}),vui.widgets.HorizontalContainer=new Class({Extends:vui.widgets.Container,Implements:vui.SelectorDelegate.Linear,layout:{type:"horizontal"},initialize:function(){this.parent.apply(this,arguments),this.initSelector()},init:function(e){e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName)}}),vui.widgets.GridContainer=new Class({Extends:vui.widgets.Base,Implements:vui.SelectorDelegate.Grid,selectable:!0,initialize:function(){this.parent.apply(this,arguments)}}),vui.widgets.BorderLayout=new Class({thickness:12,initializeBorder:function(){var e=this.elem;e.style.height="152px",e.style.width="106px";var t=["nw","n","ne","w","sw","s","se","e","shade"];this.images={};for(var i,s,n=0;n<t.length;n++){(i=document.createElement("img")).width=i.height=0,i.style.position="absolute",e.appendChild(i),this.images[t[n]]=i}this.fill&&((i=document.createElement("div")).id="fill",(s=i.style).position="absolute",s.background=vui.Theme.darkDefaultButtonColor,s.zIndex=1,e.appendChild(i),this.fill=i)},display:function(e){var t=e?"visible":"hidden";this.elem.style.visibility=t;var i=this.images;for(var s in i)i[s].style.visibility=t;this.fill&&(this.fill.elem.visibility=t),this.shade&&(this.shade.elem.visibility=t)},resize:function(e,t){var i,s;0!=e&&0!=t&&this.images&&(i=this.thickness,this.images.nw.style.width=this.images.nw.style.height=i+"px",this.images.n.style.left=i+"px",this.images.n.width=e-2*i,this.images.n.height=i,this.images.ne.style.left=e-i+"px",this.images.ne.width=i,this.images.ne.height=i,this.images.e.style.left=e-i+"px",this.images.e.style.top=i+"px",this.images.e.width=i,this.images.e.height=t-2*i,this.images.se.style.left=e-i+"px",this.images.se.style.top=t-i+"px",this.images.se.width=i,this.images.se.height=i,this.images.s.style.left=i+"px",this.images.s.style.top=t-i+"px",this.images.s.width=e-2*i,this.images.s.height=i,this.images.sw.style.top=t-i+"px",this.images.sw.width=i,this.images.sw.height=i,this.images.w.style.top=i+"px",this.images.w.width=i,this.images.w.height=t-2*i,this.images.shade&&(this.images.shade.style.left=i+"px",this.images.shade.style.top=i+"px",this.images.shade.width=e-2*i,this.images.shade.height=t-2*i),this.fill&&((s=this.fill.style).left=i+"px",s.top=i+"px",s.width=e-2*i+"px",s.height=t-2*i+"px"),this.elem.style.width=e+"px",this.elem.style.height=t+"px")}}),vui.widgets.Border=new Class({Extends:vui.widgets.Base,Implements:vui.widgets.BorderLayout}),vui.widgets.NoSelector=new Class({Extends:vui.widgets.Border,init:function(){}}),vui.widgets.Spinner=new Class({Extends:vui.widgets.Base,name:"vui.widgets.Spinner",init:function(){this.width=window.vui.ResDef.Theater.BUFFERING.SPINNER_W,this.height=window.vui.ResDef.Theater.BUFFERING.SPINNER_H;var e=this.elem;e.style.background="url("+vui.images.spinner+")",e.style.overflow="hidden",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.display="none",this.leftClip=this.startAt=this.width,this.endAt=8*this.width,e.style.backgroundPosition=this.endAt+"px 0",this.spinnerDelay=50},doSpin:function(){this.leftclip>this.startAt?this.leftclip-=this.width:this.leftclip=this.endAt,this.elem.style.backgroundPosition=this.leftclip+"px 0"},spin:function(){this.timer||(this.elem.style.display="block",this.timer=setInterval(this.doSpin.bind(this),this.spinnerDelay))},stop:function(){this.timer&&(this.elem.style.display="none",clearInterval(this.timer),delete this.timer)}}),vui.widgets.TransactionSpinner=new Class({Extends:vui.widgets.Base,name:"vui.widgets.TransactionSpinner",init:function(){this.width=window.vui.ResDef.overlays.SPINNER_W,this.height=window.vui.ResDef.overlays.SPINNER_H;var e=this.elem;e.style.background="url("+vui.images.spinner_transaction+")",e.style.overflow="hidden",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.display="none",this.leftClip=this.startAt=this.width,this.endAt=20*this.width,e.style.backgroundPosition=this.endAt+"px 0",this.spinnerDelay=50},doSpin:function(){this.leftclip>this.startAt?this.leftclip-=this.width:this.leftclip=this.endAt,this.elem.style.backgroundPosition=this.leftclip+"px 0"},spin:function(){this.timer||(this.elem.style.display="block",this.timer=setInterval(this.doSpin.bind(this),this.spinnerDelay))},stop:function(){this.timer&&(this.elem.style.display="none",clearInterval(this.timer),delete this.timer)}}),vui.widgets.AvodSpinner=new Class({Extends:vui.widgets.Base,name:"vui.widgets.AvodSpinner",init:function(){this.width=window.vui.ResDef.Theater.BUFFERING.AVOD_SPINNER_W,this.height=window.vui.ResDef.Theater.BUFFERING.AVOD_SPINNER_H;var e=this.elem;e.style.background="url("+vui.images.spinner_avod+")",e.style.overflow="hidden",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.display="none",this.leftClip=this.startAt=this.width,this.endAt=20*this.width,e.style.backgroundPosition=this.endAt+"px 0",this.spinnerDelay=50},doSpin:function(){this.leftclip>this.startAt?this.leftclip-=this.width:this.leftclip=this.endAt,this.elem.style.backgroundPosition=this.leftclip+"px 0"},spin:function(){this.timer||(this.elem.style.display="block",this.timer=setInterval(this.doSpin.bind(this),this.spinnerDelay))},stop:function(){this.timer&&(this.elem.style.display="none",clearInterval(this.timer),delete this.timer)}}),vui.widgets.ThumbnailFocus=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.ThumbnailFocus",elemClassName:"theater_thumbnailFocus",selectable:!1,init:function(){this.selectorType="none",this.elem.id="thumbnailFocus",this.img=document.createElement("img"),this.img.id="thumbnailFocusImg",this.img.className="theater_thumbnailFocusImg",this.elem.appendChild(this.img),this.elem.style.borderColor="#CCC"},show:function(){this.elem.style.display="block",this.selectable=!0},hide:function(){this.elem.style.display="none",this.selectable=!1},onDeselect:function(){this.elem.style.borderColor="#CCC"},onSelect:function(){var e=vui.Theme.primarySelectedButtonColor;vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(e=vui.Theme.kidsMode.activeBorderColor),this.elem.style.borderColor=e},onDirectionLeft:function(e){vui.executeOnContainer(this.parentWidget,"trickplayLeft")},onDirectionRight:function(e){vui.executeOnContainer(this.parentWidget,"trickplayRight")}}),vui.widgets.StickyLeafContainer=new Class({Extends:vui.widgets.LeafContainer,selectorType:"none",createElement:function(){this.elem=this.targetElem},initialize:function(){this.targetElem=arguments[0],this.parent.apply(this,arguments)}}),vui.widgets.LogoBar=new Class({Extends:vui.widgets.Base,name:"vui.widgets.LogoBar",elemClassName:"logoBar",init:function(){var e=new Element("img",{class:"vuduLogoHeaderImg",border:"0"});e.src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.elem.appendChild(e)}}),vui.widgets.MotionIcons=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MotionIcons",elemClassName:"motionIcons",init:function(){this.selectable=!1;var e=function(){vui.executeOnContainer(this.parentWidget,"onBack")}.bind(this),t=new vui.widgets.motionIcon("topBack",vui.images.topBackIcon,e);this.attachChild(t);var i=new vui.widgets.motionIcon("topHome",vui.images.topHomeIcon,function(){controller.goHome()});this.attachChild(i)}}),vui.widgets.motionIcon=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.motionIcon",init:function(e,t,i){this.elem.className=e,this.icon=createDiv({className:"icon"},this.elem),this.icon.style.backgroundImage="url("+t+")",this.icon.style.backgroundPosition="0% 100%",this.fn=i,this.selectable=!1},onAction:function(){this.fn()},onSelect:function(){this.icon.style.backgroundPosition="0% 0%",this.elem.style.backgroundColor=vui.Theme.primarySelectedButtonColor},onDeselect:function(){this.icon.style.backgroundPosition="0% 100%",this.elem.style.backgroundColor="transparent"}}),vui.widgets.IconButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.IconButton",imgSrc:vui.images.blank,iconHeight:0,selectorType:"none",dontMoveSelector:!0,onSelect:function(){this.setIconActive(),vui.executeOnContainer(this.parentWidget,"onSelect")},onDeselect:function(){this.setIconDefault()},setIconActive:function(){},setIconDefault:function(){}}),vui.widgets.HighLightSelector=new Class({Extends:vui.widgets.Border,thickness:5,init:function(){},display:function(e,t){var i,s;t&&(i=t.highLightElement?t.highLightElement:t,s=t.selectorClassName?t.selectorClassName:"highlightDefault",e?(!i.className||i.className&&-1==i.className.indexOf(s))&&(i.className=t.selectorClassName+" "+i.className):i.className&&(i.className=i.className.replace(t.selectorClassName,"")))}}),vui.widgets.Table=new Class({Extends:vui.widgets.Container,name:"vui.widgets.Table",elemTag:"table",init:function(e){e&&e.elemClassName&&(this.getElem().className=e.elemClassName)},addRow:function(){var e=new Element("tr");return this.elem.appendChild(e),e},addCell:function(e){var t=new Element("td");return e.appendChild(t),t}}),vui.widgets.MenuButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.MenuButton",textClassName:"menuButton-headerText",disabledTextClassName:"disabledButtonText",init:function(e,t){var i=t.width||window.vui.ResDef.widget.MENU_BUTTON_DEFAULT_W,s=t.height||window.vui.ResDef.widget.MENU_BUTTON_DEFAULT_H,n=this.getElem();n.id=e,t.elemClassName&&(n.className=t.elemClassName),n.style.width=i+"px",n.style.height=s+"px";var a=document.createElement("div");a.className=this.textClassName,a.appendChild(document.createTextNode("")),n.appendChild(a),t.customDiv&&n.appendChild(t.customDiv),this.label=a,t.label&&this.setLabel(t.label),(this.definition=t).disabled?this.disable():this.enable(),t.onDirectionUp&&(this.onDirectionUp=t.onDirectionUp),t.onSelect&&(this.onSelectFunc=t.onSelect),this.highLightElement=this.label,this.selectorClassName=t.selectorClassName||"highlightDefault",this.highlightClassName=t.highlightClassName||this.selectorClassName,this.selectorType=t.selectorType||"highLightSelector"},onSelect:function(){vui._.setAriaLabel(this.label.innerHTML),this.onSelectFunc&&this.onSelectFunc(),this.markSelected(),vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.elem.addClass(this.selectorClassName)},onDeselect:function(){this.unMarkSelected(),this.elem.removeClass(this.selectorClassName)},markSelected:function(){},unMarkSelected:function(){},setLabel:function(e){this.label.innerHTML=e},enable:function(){this.label.className=this.textClassName,this.onAction=this.definition.onAction.bind(this),this.setSelectable(!0)},disable:function(){this.label.className=this.disabledTextClassName,this.setSelectable(!1)}}),vui.widgets.MenuPanelButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.MenuPanelButton",selectorType:"none",init:function(e,t){(t=t||{}).width&&(this.elem.style.width=t.width+"px"),t.height&&(this.elem.style.height=t.height+"px"),this.elem.className=t.elemClassName?t.elemClassName:"imageActionButton noDefaultBg",t.defaultClassName&&(this.defaultClassName=t.defaultClassName),this.noBgClassName="noDefaultBg",t.imgSrc&&(this.elem.style.backgroundImage="url('"+t.imgSrc+"')"),t.selectClassName&&(this.selectClassName=t.selectClassName),t.disabledClassName&&(this.disabledClassName=t.disabledClassName),this.icon=document.createElement("div"),this.icon.selectable=!1,this.icon.className="imageActionButton_icon_default",this.elem.appendChild(this.icon),t.iconSrc?(this.icon.style.backgroundImage="url('"+t.iconSrc+"')",this.icon.style.display="block"):this.icon.style.display="none",this.label=document.createElement("p"),this.label.className="imageActionButton_label",t.labelClassName&&(this.label.className=this.label.className+" "+t.labelClassName),this.label.selectable=!1,this.elem.appendChild(this.label),t.onDirectionUp&&(this.onDirectionUp=t.onDirectionUp),t.onAction&&(this.onAction=t.onAction),t.label&&this.setLabel(t.label),t.onSelect&&(this.onSelectFunc=t.onSelect),t.elemPosition&&(this.elem.style.position=t.elemPosition)},onAction:function(){alert("NO ACTION DEFINED!")},onSelect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),this.elem.className=this.elem.className.replace(this.noBgClassName,""),-1===this.elem.className.indexOf(this.selectClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.selectClassName)),this.icon&&(this.icon.className="imageActionButton_icon_select"),this.onSelectFunc&&this.onSelectFunc()},onDeselect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.selectClassName,""),-1===this.elem.className.indexOf(this.defaultClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.noBgClassName)),this.icon&&(this.icon.className="imageActionButton_icon_default")},setLabel:function(e){this.label.innerHTML=e},getLabel:function(){return this.label.innerHTML||""},setIcon:function(e){this.icon&&(this.icon.style.display="block",this.icon.style.backgroundImage="url('"+e+"')")},disable:function(){this.elem.className&&this.disabledClassName&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),this.elem.className=this.elem.className.replace(this.noBgClassName,""),-1===this.elem.className.indexOf(this.disabledClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.disabledClassName)),this.setSelectable(!1)},enable:function(){this.elem.className&&this.disabledClassName&&(this.elem.className=this.elem.className.replace(this.disabledClassName,""),-1===this.elem.className.indexOf(this.noBgClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.noBgClassName)),this.setSelectable(!0)},markSelected:function(){this.elem.addClass("active"),this.elem.className&&(this.elem.className=this.elem.className.replace(this.selectClassName,""),this.elem.className=this.elem.className.replace(this.noBgClassName,""),-1===this.elem.className.indexOf(this.defaultClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.defaultClassName)),this.icon&&(this.icon.className="imageActionButton_icon_default")},unMarkSelected:function(){this.elem.removeClass("active"),this.elem.className&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),this.elem.className=this.elem.className.replace(this.selectClassName,""),-1===this.elem.className.indexOf(this.noBgClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.noBgClassName)),this.icon&&(this.icon.className="imageActionButton_icon_default")},setSelected:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),this.elem.className=this.elem.className.replace(this.noBgClassName,""),-1===this.elem.className.indexOf(this.selectClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.selectClassName)),this.icon&&(this.icon.className="imageActionButton_icon_select")}}),vui.widgets.ImageActionButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.ImageActionButton",selectorType:"none",init:function(e){e=e||{},this.elem.className=e.elemClassName?e.elemClassName:"imageActionButton",e.defaultClassName&&(this.defaultClassName=e.defaultClassName),e.defaultClassName&&!e.doNotApplyDefaultClassName&&(this.elem.className+=" "+e.defaultClassName),e.imgSrc&&(this.elem.style.backgroundImage="url('"+e.imgSrc+"')"),e.doNotApplyDefaultClassName&&(this.elem.className=this.elem.className+" noDefaultBg"),e.selectClassName&&(this.selectClassName=e.selectClassName),e.disabledClassName&&(this.disabledClassName=e.disabledClassName),e.iconDisabledClassName&&(this.iconDisabledClassName=e.iconDisabledClassName),e.desc&&(this.desc=e.desc),this.iconDefaultClassName=e.iconDefaultClassName||"imageActionButton_icon_default",this.iconSelectClassName=e.iconSelectClassName||"imageActionButton_icon_select",this.icon=document.createElement("div"),this.icon.selectable=!1,this.icon.className=this.iconDefaultClassName,this.elem.appendChild(this.icon),e.iconSrc&&!vui.vvPlatform.appFeatureEnabled()?(this.icon.style.backgroundImage="url('"+e.iconSrc+"')",this.icon.style.display="block"):e.background?(this.icon.style.background=e.background,this.icon.style.display="block"):this.icon.style.display="none",this.label=document.createElement("p"),this.label.className="imageActionButton_label",e.labelClassName&&this.label.addClass(e.labelClassName),this.label.selectable=!1,this.elem.appendChild(this.label),e.onAction&&(this.onAction=e.onAction),e.label&&this.setLabel(e.label),e.onSelect&&(this.onSelectFunc=e.onSelect)},onAction:function(){alert("NO ACTION DEFINED!")},onSelect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),-1===this.elem.className.indexOf(this.selectClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.selectClassName)),this.icon&&(this.icon.className=this.iconSelectClassName),this.onSelectFunc&&this.onSelectFunc(),vui._.setAriaLabel(this.desc||this.label.innerHTML)},onDeselect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.selectClassName,""),-1===this.elem.className.indexOf(this.defaultClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.defaultClassName)),this.icon&&(this.icon.className=this.iconDefaultClassName)},setLabel:function(e){this.label.innerHTML=e},getLabel:function(){return this.label.innerHTML||""},setDescription:function(e){e&&(this.desc=e)},setIcon:function(e){this.icon&&(this.icon.style.display="inline-block",this.icon.style.backgroundImage="url('"+e+"')")},disable:function(){this.disabled=!0,this.elem.className&&this.disabledClassName&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),-1===this.elem.className.indexOf(this.disabledClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.disabledClassName)),this.icon&&this.iconDisabledClassName&&(this.icon.className=this.iconDisabledClassName),this.setSelectable(!1)},enable:function(){this.disabled=!1,this.elem.className&&this.disabledClassName&&(this.elem.className=this.elem.className.replace(this.disabledClassName,""),-1===this.elem.className.indexOf(this.selectClassName)&&-1===this.elem.className.indexOf(this.defaultClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.defaultClassName)),this.icon&&this.icon.className&&-1===this.icon.className.indexOf(this.iconSelectClassName)&&(this.icon.className=this.iconDefaultClassName),this.setSelectable(!0)}}),vui.widgets.IconActionButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.IconActionButton",selectorType:"none",init:function(e){e=e||{},this.elem.className=e.elemClassName?e.elemClassName:"iconActionButton",e.defaultClassName&&(this.elem.className+=" "+e.defaultClassName,this.defaultClassName=e.defaultClassName),e.imgSrc&&(this.elem.style.backgroundImage="url('"+e.imgSrc+"')"),e.selectClassName&&(this.selectClassName=e.selectClassName),this.icon=document.createElement("div"),this.elem.appendChild(this.icon),e.onAction&&(this.onAction=e.onAction),e.iconSrc&&this.setIcon(e.iconSrc)},onAction:function(){alert("NO ACTION DEFINED!")},onSelect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.defaultClassName,""),-1===this.elem.className.indexOf(this.selectClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.selectClassName))},onDeselect:function(){this.elem.className&&(this.elem.className=this.elem.className.replace(this.selectClassName,""),-1===this.elem.className.indexOf(this.defaultClassName)&&(this.elem.className=this.elem.className.trim()+" "+this.defaultClassName))},setIcon:function(e){this.icon.style.backgroundImage="url('"+e+"')"}}),vui.widgets.TextPanel=new Class({Extends:vui.widgets.Container,name:"vui.widgets.TextPanel",init:function(e){var t=this.getElem();e.elemClassName&&(t.className=e.elemClassName),this.textLabel=document.createElement("div"),e.textLabel&&this.textLabel.appendChild(document.createTextNode(e.textLabel)),t.appendChild(this.textLabel),e.top&&(t.style.top=e.top+"px"),this.selectable=!1},setText:function(e){this.textLabel.innerHTML=e}}),vui.widgets.ImageAndTextPanel=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ImageAndTextPanel",init:function(e){var t=this.getElem();e.elemClassName&&(t.className=e.elemClassName);var i=document.createElement("div");this.imgIcon=i,this.imgIcon.className="imgIcon",t.appendChild(this.imgIcon),e.imgSrc&&(this.imgIcon.style.backgroundImage="url("+e.imgSrc+")"),this.textLabel=document.createElement("div"),this.textLabel.className="rightText",e.textLabel&&this.textLabel.appendChild(document.createTextNode(e.textLabel.trim())),t.appendChild(this.textLabel),e.top&&(t.style.top=e.top+"px")},setText:function(e){this.textLabel.innerHTML=e.trim()},setImage:function(e){this.imgIcon.style.background="url("+e+")"}}),vui.widgets.StarRating=new Class({Extends:vui.widgets.Base,elemPosition:"static",elemClassName:"starRating",init:function(){var e=this.elem,t=document.createElement("img");t.className="starRatingBg",t.src=vui.images.mp.grayStar,e.appendChild(t),this.bg=t;var i=document.createElement("div");this.fg=i,this.fg.className="starRatingFg",e.appendChild(i),this.noRatingText=createDiv({className:"detailText",text:vui.strings.getText("RATE_DIALOG_NO_RATING")}),this.noRatingText.style.display="none",e.appendChild(this.noRatingText)},bind:function(e,t){this.fg.style.background="url("+vui.images.mp[e+"Star"]+")",this.fg.style.width=Math.round(t*window.vui.ResDef.movieDetails.RATING_W)+"px",0==t?(this.noRatingText.style.display="block",this.bg.style.display="none"):(this.noRatingText.style.display="none",this.bg.style.display="block")}}),vui.widgets.NoDataMessage=new Class({Extends:vui.widgets.Container,name:"vui.widgets.NoDataMessage",elemClassName:"NoDataMessage",init:function(e){this.setSelectable(!1),this.el.title=document.createElement("div"),this.el.title.className="NoDataMessage_title",this.elem.appendChild(this.el.title),this.setTitle(e)},setTitle:function(e){this.el.title.innerHTML=e}}),vui.widgets.ScrollableContainer=new Class({Extends:vui.widgets.Container,elemClassName:"scrollableContainer",selectable:!1,init:function(){this.scrollableArea=createDiv({className:"scrollableArea"},this.elem),this.areaTop=0},addWidget:function(e){this.attachChild(e,this.scrollableArea)},hasScrollableContent:function(){return this.scrollableArea.scrollHeight>this.elem.clientHeight},canScrollDown:function(){return this.scrollableArea.scrollHeight-(this.elem.clientHeight+-this.areaTop)<0},scrollUp:function(){0!=this.areaTop&&(this.areaTop+=window.vui.ResDef.overlays.SCROLL_LENGTH,this.scrollableArea.style.top=this.areaTop+"px")},scrollDown:function(){this.canScrollDown()||(this.areaTop-=window.vui.ResDef.overlays.SCROLL_LENGTH,this.scrollableArea.style.top=this.areaTop+"px")},getCurrentScrollRatio:function(){return this.getRatio(this.areaTop)},getRatio:function(e){var t=this.scrollableArea.scrollHeight,i=this.elem.clientHeight;return t<i?t=i:t-=i,(0-e)/t}}),vui.widgets.RadioButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.RadioButton",iconHeight:0,selectorType:"none",elemClassName:"radio_button",selectable:!0,init:function(e){if(this.params=e,this.callback=e.callback,e.style){var t=e.style;for(var i in t)this.elem.style[i]=t[i]}this.button=document.createElement("input"),this.button.type="radio",this.button.name=e.name,this.button.value=e.value,this.button.className="hidden",this.button.checked=e.checked,this.elem.appendChild(this.button),this.label=document.createElement("label"),this.label.className="radio",this.label.innerText=e.value,this.elem.appendChild(this.label),this.span=document.createElement("div"),this.span.className="check",this.elem.appendChild(this.span)},onAction:function(){this.button.checked||this.callback&&this.callback(this.setIconActive.bind(this))},onDeselect:function(){this.button.classList.remove("active"),this.label.classList.remove("active")},setIconActive:function(){vui.select(this),this.button.checked=!0,this.button.classList.add("active"),this.label.classList.add("active")},onSelect:function(){this.button.classList.add("active"),this.label.classList.add("active"),vui._.setAriaLabel(this.params.label+", "+this.button.value)},setIconDefault:function(){},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")},onDirectionLeft:function(){this.params.onDirectionLeft&&this.params.onDirectionLeft()},onDirectionRight:function(){this.params.onDirectionRight&&this.params.onDirectionRight()},onDirectionUp:function(){this.params.onDirectionUp&&this.params.onDirectionUp()},onDirectionDown:function(){this.params.onDirectionDown&&this.params.onDirectionDown()}}),vui.widgets.HomeTop=new Class({Extends:vui.widgets.LeafContainer,name:"HomeTop",elemClassName:"HomeTop",selectorType:"none",init:function(){this.elem.style.background="url('"+vui.images.home.homeTop+"') 0 0 no-repeat"},onAction:function(){controller.goHome()},onSelect:function(){this._setIconActive()},onDeselect:function(){this._setIconDefault()},_setIconActive:function(){this.elem.style.color="white",this.elem.style.backgroundPosition="0% 100%"},_setIconDefault:function(){this.elem.style.color="white",this.elem.style.backgroundPosition="0% 0%"}}),vui.widgets.ScrollingBase=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ScrollingBase",scrollIncrement:1,windowSize:10,preventRightSiblingSelection:!1,init:function(e,t){e=e||{},t&&(this.getMovieListModel=t),this.imageLoader=vui.getImageLoader("common",20),this.widgets=[],this.currentStart=e&&e.scrollOffset||0},refresh:function(){this._refresh()},getMovieListModel:function(){return alert("getMovieListModel should be overwritten"),null},createWidget:function(){return alert("createWidget should be overwritten."),null},addWidgets:function(e){for(var t,i=0;i<this.numVisible;i++){var s=this.createWidget(i);s&&(s.unbind(),e?this.attachChild(s,e):this.attachChild(s),this.widgets.push(s))}e.children&&((t=e.children[0].style.width)?(this.paddingRight&&(t=parseInt(t,10)+this.paddingRight),e.style.width=parseInt(t,10)*this.columns+"px"):e.style.width="712px")},reset:function(){for(var e=this.numVisible,t=0;t<e;t++)this.widgets[t].setSelectable(!0);this.currentStart=0},resetAndRefresh:function(){this.reset(),this.refresh()},_refresh:function(){this.firstQuery=!0;var e=function(e,t,i){this.dataReceived_(e,t,i)}.bind(this);this.movieListModel=this.getMovieListModel(e),this.movieListModel?delete this.currentMod:alert("must define movieListModel")},dataReceived_:function(e,t,i){this.movieListModel=e,this.firstQuery&&this.addWidgetsAfterLoaded&&this.addWidgetsAfterLoaded(),this.bind(e,t,i),(this.firstQuery||vuiFilters.hasFilter()&&!e.totalCount)&&(vui.executeOnContainer(this.parentWidget,"listDataReceived",e),delete this.firstQuery)},bind:function(e,t,i){if(!(this.movieListModel=e)||!e.data||0==e.realTotalCount)return this.elem.style.display="none",this.setRatio(null),this.currentStart=0,this.update(),void(this.disableEmptyList?this.loading&&(this.loading.hide(),this.sendNotification(vui.Facade.PANEL_LOADED,"scrolling")):this.sendNotification(vui.Facade.EMPTY_LIST,!0));try{this.elem&&this.elem.style&&(this.elem.style.display="block")}catch(e){alert("ERROR: 2011 - devices might have problem here.")}if(!(i<this.currentStart||t>this.currentStart+this.numVisible))try{e.totalCount&&vui.executeOnContainer(this.parentWidget,"setTotalCount",e.totalCount),this.update(),this.loading&&(this.loading.hide(),this.sendNotification(vui.Facade.PANEL_LOADED,"scrolling"))}catch(e){alert(spewCaughtError(e,"scrolling list bind:"))}},update:function(e){if(this.movieListModel){var t=this.partialRow?this.columns*(this.rows-1):this.columns*this.rows;this.movieListModel.totalCount>t?this.setRatio(this.currentStart/(this.movieListModel.totalCount-t)):this.setRatio(null);var i=this.movieListModel.totalCount||0,s=Math.min(i-this.currentStart,t),n=Math.min(i-this.currentStart,this.numVisible);this.updateRange&&this.updateRange([this.currentStart+1,this.currentStart+s,this.movieListModel.totalCount]);for(var a,o=0;o<this.numVisible;o++){n<=o?(this.widgets[o].setSelectable(!1),this.widgets[o].unbind()):(this.widgets[o]==vui.getSelected()&&e&&this.widgets[o].onDeselect&&this.widgets[o].onDeselect(),a=o+this.currentStart,movie=this.movieListModel.get(a),movie?(this.widgets[o].bind(movie,a),window.callCGEvery20Times(),o>=this.numVisible-this.columns&&1==this.partialRow||o<this.columns&&0<this.currentStart&&2<this.rows||o>=this.numVisible-this.columns&&this.currentStart+this.numVisible<=i-1&&2<this.rows?this.widgets[o].setSelectable(!1):this.widgets[o].setSelectable(!0)):this.widgets[o].clear?this.widgets[o].clear():(this.widgets[o].setSelectable(!1),this.widgets[o].unbind(),this.loading&&this.loading.show()))}var r=vui.getSelected();r&&(r.elem.className.match(/gridPoster/)||r.pageTitle||r.elem.className.match("rt_review")||r.elem.className.match(/imageActionButton/))&&(r?r.select():this.select())}},_updateCache:function(e,t){t=t||1;var i,s=this.numVisible||this.windowSize,n=this.currentStart+t*this.numVisible,a=Math.floor(n/s);if(a!=this.currentMod){if(1===t){if(n===this.movieListModel.totalCount-1)return;(i=n+s+Math.round(s/2))>this.movieListModel.totalCount&&(i=this.movieListModel.totalCount);for(var o=n;o<i;o++){this.movieListModel.get(o)&&(r=e(this.movieListModel.get(o)),this.imageLoader.add(r))}}else{if(0===n)return;(i=n-(s+Math.round(s/2)))<0&&(i=0);for(o=n;i<=o;o--){var r=e(this.movieListModel.get(o));this.imageLoader.add(r)}}this.currentMod=a}},updateSelected:function(){var e=this.widgets[0],t=this.widgets[this.numVisible-1];return 0==this.currentStart?(e.data&&e.setSelectable(!0),0):e.selectable&&e.setSelectable(!1),this.currentStart==this.movieListModel.totalCount-this.numVisible?(t.data&&t.setSelectable(!0),0):t.selectable&&t.setSelectable(!1),!0},scrollUp:function(){return 0<this.currentStart&&(this.currentStart-=this.scrollIncrement,this.update(-1),1==this.scrollIncrement)&&(this.widgets[1].onSelect&&this.widgets[1].onSelect(),this.updateSelected())},scrollDown:function(){return this.currentStart<this.movieListModel.totalCount-this.numVisible&&(this.currentStart+=this.scrollIncrement,1<this.scrollIncrement&&this.currentStart+this.numVisible>this.movieListModel.totalCount&&this.changeSelectionOld(this.widgets[this.movieListModel.totalCount-this.currentStart-1]),this.update(1),1==this.scrollIncrement)&&(this.widgets[this.numVisible-2].onSelect&&this.widgets[this.numVisible-2].onSelect(),this.updateSelected())},getScrollOffset:function(){return this.currentStart},_setWidth:function(e){e=e||"normal",this.columns=this.settings&&this.settings[e]&&this.settings[e].columns,this.rows=this.settings&&this.settings[e]&&this.settings[e].rows||4,this.scrollIncrement=this.settings&&this.settings[e]&&this.settings[e].scrollIncrement||this.columns,this.numVisible=this.columns*this.rows,this.layout={type:"vertical",cols:this.columns}},setRatio:function(e){this.beginArrow&&(this.beginArrow.setRatio(e),this.endArrow&&this.endArrow.setRatio(e))},setBeginArrow:function(e){this.beginArrow=e},setEndArrow:function(e){this.endArrow=e},destroy:function(){this.movieListModel&&(this.movieListModel.removeEvents&&this.movieListModel.removeEvents(),this.movieListModel.destroy());for(var e=0;e<this.numVisible;e++)this.widgets[e]&&this.widgets[e].unbind()}}),vui.keyPad={},vui.keyPad.activationKeypadArray=[{index:0,keyString:[{keyStr:"A",keyWidth:1},{keyStr:"B",keyWidth:1},{keyStr:"C",keyWidth:1},{keyStr:"D",keyWidth:1},{keyStr:"E",keyWidth:1},{keyStr:"F",keyWidth:1},{keyStr:"G",keyWidth:1},{keyStr:"H",keyWidth:1},{keyStr:"I",keyWidth:1},{keyStr:"J",keyWidth:1},{keyStr:"K",keyWidth:1},{keyStr:"L",keyWidth:1},{keyStr:"M",keyWidth:1},{keyStr:"N",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:1,keyString:[{keyStr:"O",keyWidth:1},{keyStr:"P",keyWidth:1},{keyStr:"Q",keyWidth:1},{keyStr:"R",keyWidth:1},{keyStr:"S",keyWidth:1},{keyStr:"T",keyWidth:1},{keyStr:"U",keyWidth:1},{keyStr:"V",keyWidth:1},{keyStr:"W",keyWidth:1},{keyStr:"X",keyWidth:1},{keyStr:"Y",keyWidth:1},{keyStr:"Z",keyWidth:1},{keyStr:"1",keyWidth:1},{keyStr:"2",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:2,keyString:[{keyStr:"3",keyWidth:1},{keyStr:"4",keyWidth:1},{keyStr:"5",keyWidth:1},{keyStr:"6",keyWidth:1},{keyStr:"7",keyWidth:1},{keyStr:"8",keyWidth:1},{keyStr:"9",keyWidth:1},{keyStr:"0",keyWidth:1},{keyStr:"-",keyWidth:1},{keyStr:"_",keyWidth:1},{keyStr:"/",keyWidth:1},{keyStr:"&",keyWidth:1},{keyStr:"}",keyWidth:1},{keyStr:"~",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:3,keyString:[{keyStr:"!",keyWidth:1},{keyStr:"#",keyWidth:1},{keyStr:"$",keyWidth:1},{keyStr:"%",keyWidth:1},{keyStr:"\\",keyWidth:1},{keyStr:"'",keyWidth:1},{keyStr:"*",keyWidth:1},{keyStr:"+",keyWidth:1},{keyStr:"=",keyWidth:1},{keyStr:"?",keyWidth:1},{keyStr:"^",keyWidth:1},{keyStr:"`",keyWidth:1},{keyStr:"{",keyWidth:1},{keyStr:"|",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:4,keyString:[{keyStr:"@",keyWidth:1},{keyStr:".",keyWidth:1},{keyStr:"@GMAIL.COM",keyWidth:4},{keyStr:"@YAHOO.COM",keyWidth:4},{keyStr:"@HOTMAIL.COM",keyWidth:4}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:5,keyString:[{keyStr:".COM",keyWidth:2},{keyStr:".NET",keyWidth:2},{keyStr:".EDU",keyWidth:2},{keyStr:".ORG",keyWidth:2},{keyStr:".BIZ",keyWidth:2},{keyStr:"DELETE",keyWidth:2},{keyStr:"CLEAR",keyWidth:2}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_SMALL}],vui.keyPad.passwordLowercaseArray=[{index:0,keyString:[{keyStr:"a",keyWidth:1},{keyStr:"b",keyWidth:1},{keyStr:"c",keyWidth:1},{keyStr:"d",keyWidth:1},{keyStr:"e",keyWidth:1},{keyStr:"f",keyWidth:1},{keyStr:"g",keyWidth:1},{keyStr:"h",keyWidth:1},{keyStr:"i",keyWidth:1},{keyStr:"j",keyWidth:1},{keyStr:"k",keyWidth:1},{keyStr:"l",keyWidth:1},{keyStr:"m",keyWidth:1},{keyStr:"n",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:1,keyString:[{keyStr:"o",keyWidth:1},{keyStr:"p",keyWidth:1},{keyStr:"q",keyWidth:1},{keyStr:"r",keyWidth:1},{keyStr:"s",keyWidth:1},{keyStr:"t",keyWidth:1},{keyStr:"u",keyWidth:1},{keyStr:"v",keyWidth:1},{keyStr:"w",keyWidth:1},{keyStr:"x",keyWidth:1},{keyStr:"y",keyWidth:1},{keyStr:"z",keyWidth:1},{keyStr:"1",keyWidth:1},{keyStr:"2",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:2,keyString:[{keyStr:"3",keyWidth:1},{keyStr:"4",keyWidth:1},{keyStr:"5",keyWidth:1},{keyStr:"6",keyWidth:1},{keyStr:"7",keyWidth:1},{keyStr:"8",keyWidth:1},{keyStr:"9",keyWidth:1},{keyStr:"0",keyWidth:1},{keyStr:"~",keyWidth:1},{keyStr:"`",keyWidth:1},{keyStr:"!",keyWidth:1},{keyStr:"@",keyWidth:1},{keyStr:"#",keyWidth:1},{keyStr:"$",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:3,keyString:[{keyStr:"%",keyWidth:1},{keyStr:"^",keyWidth:1},{keyStr:"&",keyWidth:1},{keyStr:"*",keyWidth:1},{keyStr:"(",keyWidth:1},{keyStr:")",keyWidth:1},{keyStr:"_",keyWidth:1},{keyStr:"-",keyWidth:1},{keyStr:"+",keyWidth:1},{keyStr:"=",keyWidth:1},{keyStr:"{",keyWidth:1},{keyStr:"[",keyWidth:1},{keyStr:"}",keyWidth:1},{keyStr:"]",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:4,keyString:[{keyStr:"|",keyWidth:1},{keyStr:"\\",keyWidth:1},{keyStr:":",keyWidth:1},{keyStr:";",keyWidth:1},{keyStr:'"',keyWidth:1},{keyStr:"'",keyWidth:1},{keyStr:"<",keyWidth:1},{keyStr:",",keyWidth:1},{keyStr:">",keyWidth:1},{keyStr:".",keyWidth:1},{keyStr:"?",keyWidth:1},{keyStr:"/",keyWidth:1},{keyStr:"SHIFT",keyWidth:2}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:5,keyString:[{keyStr:"DELETE",keyWidth:4},{keyStr:"SPACE",keyWidth:6},{keyStr:"CLEAR",keyWidth:4}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL}],vui.keyPad.passwordUppercaseArray=[{index:0,keyString:[{keyStr:"A",keyWidth:1},{keyStr:"B",keyWidth:1},{keyStr:"C",keyWidth:1},{keyStr:"D",keyWidth:1},{keyStr:"E",keyWidth:1},{keyStr:"F",keyWidth:1},{keyStr:"G",keyWidth:1},{keyStr:"H",keyWidth:1},{keyStr:"I",keyWidth:1},{keyStr:"J",keyWidth:1},{keyStr:"K",keyWidth:1},{keyStr:"L",keyWidth:1},{keyStr:"M",keyWidth:1},{keyStr:"N",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:1,keyString:[{keyStr:"O",keyWidth:1},{keyStr:"P",keyWidth:1},{keyStr:"Q",keyWidth:1},{keyStr:"R",keyWidth:1},{keyStr:"S",keyWidth:1},{keyStr:"T",keyWidth:1},{keyStr:"U",keyWidth:1},{keyStr:"V",keyWidth:1},{keyStr:"W",keyWidth:1},{keyStr:"X",keyWidth:1},{keyStr:"Y",keyWidth:1},{keyStr:"Z",keyWidth:1},{keyStr:"1",keyWidth:1},{keyStr:"2",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:2,keyString:[{keyStr:"3",keyWidth:1},{keyStr:"4",keyWidth:1},{keyStr:"5",keyWidth:1},{keyStr:"6",keyWidth:1},{keyStr:"7",keyWidth:1},{keyStr:"8",keyWidth:1},{keyStr:"9",keyWidth:1},{keyStr:"0",keyWidth:1},{keyStr:"~",keyWidth:1},{keyStr:"`",keyWidth:1},{keyStr:"!",keyWidth:1},{keyStr:"@",keyWidth:1},{keyStr:"#",keyWidth:1},{keyStr:"$",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:3,keyString:[{keyStr:"%",keyWidth:1},{keyStr:"^",keyWidth:1},{keyStr:"&",keyWidth:1},{keyStr:"*",keyWidth:1},{keyStr:"(",keyWidth:1},{keyStr:")",keyWidth:1},{keyStr:"_",keyWidth:1},{keyStr:"-",keyWidth:1},{keyStr:"+",keyWidth:1},{keyStr:"=",keyWidth:1},{keyStr:"{",keyWidth:1},{keyStr:"[",keyWidth:1},{keyStr:"}",keyWidth:1},{keyStr:"]",keyWidth:1}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:4,keyString:[{keyStr:"|",keyWidth:1},{keyStr:"\\",keyWidth:1},{keyStr:":",keyWidth:1},{keyStr:";",keyWidth:1},{keyStr:'"',keyWidth:1},{keyStr:"'",keyWidth:1},{keyStr:"<",keyWidth:1},{keyStr:",",keyWidth:1},{keyStr:">",keyWidth:1},{keyStr:".",keyWidth:1},{keyStr:"?",keyWidth:1},{keyStr:"/",keyWidth:1},{keyStr:"SHIFT",keyWidth:2}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL},{index:5,keyString:[{keyStr:"DELETE",keyWidth:4},{keyStr:"SPACE",keyWidth:6},{keyStr:"CLEAR",keyWidth:4}],rowHeight:window.vui.ResDef.activation.SEARCH_KEPYAD_ROW_HEIGHT_GENERAL}],vui.keyPad.mode={EMAIL:vui.keyPad.activationKeypadArray,PASSWORD_LOWERCASE:vui.keyPad.passwordLowercaseArray,PASSWORD_UPPERCASE:vui.keyPad.passwordUppercaseArray,TOGGEL:[]},vui.keyPad.calculateTopPosOfRow=function(e){for(var t=0,i=0;i<e.length;i++)e[i].topPos=t,t+=e[i].rowHeight},vui.keyPad.calculateLeftPosOfKey=function(e){for(var t=0,i=0;i<e.length;i++)0<i&&(t=e[i-1].leftPos+e[i-1].keyWidth*window.vui.ResDef.activation.SEARCH_KEPYAD_SINGLE_KEY_WIDTH+e[i-1].keyWidth*window.vui.ResDef.activation.SEARCH_KEPYAD_KEY_PADDING),e[i].leftPos=t},vui.widgets.KeyButtonLayout=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){var t="font16";if((e=e||{}).keyWidth)switch(e.keyWidth){case 1:e.defaultClassName="btn_bg_default btn_bg_size13_default",e.selectClassName="btn_bg_select btn_bg_size13_select",t="font28";break;case 2:e.defaultClassName="btn_bg_default btn_bg_size15_default",e.selectClassName="btn_bg_select btn_bg_size15_select",t="font16";break;case 3:e.defaultClassName="btn_bg_default btn_bg_size14_default",e.selectClassName="btn_bg_select btn_bg_size14_select",t="font16";break;case 4:e.defaultClassName="btn_bg_default btn_bg_size17_default",e.selectClassName="btn_bg_select btn_bg_size17_select",t="font16";break;case 6:e.defaultClassName="btn_bg_default btn_bg_size23_default",e.selectClassName="btn_bg_select btn_bg_size23_select",t="font16";break;default:e.defaultClassName="btn_bg_default btn_bg_size13_default",e.selectClassName="btn_bg_select btn_bg_size13_select"}else e.defaultClassName="btn_bg_default btn_bg_size13_default",e.selectClassName="btn_bg_select btn_bg_size13_select";this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" "+t,this.elem.style.left=e.leftPos+"px"},bind:function(e){this.keyWidth=e.keyWidth,this.setLabel(e.keyStr),this.key=e.keyStr,"EMAIL"==this.parentWidget.parentWidget.mode&&(this.key=this.key.toLowerCase())},onAction:function(){vui.executeOnContainer(this.parentWidget,"onKey",this.getLabel())},onSelect:function(){this.parent(),vui._.setAriaLabel(vui._.getSymbolLabel(this.key))},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"selectLeft")},onDirectionRight:function(){vui.executeOnContainer(this.parentWidget,"selectRight")},onBackspaceKey:function(){vui.executeOnContainer(this.parentWidget,"onKey","DELETE")}}),vui.widgets.KeypadRowLayout=new Class({Extends:vui.widgets.Container,name:"vui.widgets.KeypadRowLayout",layout:{type:"horizontal"},init:function(){this.keyButton=[]},bind:function(e){this.rowIndex=e.index,this.elem.className="keypadRowLayout_"+e.index,this.elem.style.top=e.topPos+"px",this.keyString=e.keyString,vui.keyPad.calculateLeftPosOfKey(e.keyString);for(var t=0;t<e.keyString.length;t++)this.keyButton[t]||(this.keyButton[t]=new vui.widgets.KeyButtonLayout(e.keyString[t]),this.attachChild(this.keyButton[t])),this.keyButton[t].bind(e.keyString[t])},selectLeft:function(){for(var e=0,t=0;t<this.keyButton.length&&vui.getSelected()!=this.keyButton[t];t++)e+=this.keyButton[t].keyWidth;0<e?vui.select(this.children[t-1]):vui.executeOnContainer(this.parentWidget,"wrapUp",{index:this.rowIndex,selectedButtonIndex:this.keyButton.length-1})},selectRight:function(){for(var e=1,t=0;t<this.keyButton.length&&vui.getSelected()!=this.keyButton[t];t++)e++;e<this.children.length?vui.select(this.children[t+1]):vui.executeOnContainer(this.parentWidget,"wrapDown",{index:this.rowIndex})},onDirectionDown:function(){for(var e=0,t=0;t<this.keyButton.length&&vui.getSelected()!=this.keyButton[t];t++)e+=this.keyButton[t].keyWidth;vui.executeOnContainer(this.parentWidget,"rowDown",{index:this.rowIndex,selectedButtonIndex:e})},onDirectionUp:function(){for(var e=0,t=0;t<this.keyButton.length&&vui.getSelected()!=this.keyButton[t];t++)e+=this.keyButton[t].keyWidth;vui.executeOnContainer(this.parentWidget,"rowUp",{index:this.rowIndex,selectedButtonIndex:e})}}),vui.widgets.KeyPadLayout=new Class({Extends:vui.widgets.Container,name:"vui.widgets.KeyPadLayout",elemClassName:"keyPadLayout",layout:{type:"vertical"},init:function(){this.rows=[]},setMode:function(e){e&&"TOGGLE"==e.mode?this.mode&&"PASSWORD_LOWERCASE"==this.mode?this.mode="PASSWORD_UPPERCASE":this.mode&&"PASSWORD_UPPERCASE"==this.mode?this.mode="PASSWORD_LOWERCASE":alert("invalid mode"):this.mode=e.mode},bind:function(e){if(this.setMode(e),this.keyPadArray=vui.keyPad.mode[this.mode],vui.keyPad.calculateTopPosOfRow(this.keyPadArray),this.lastRowIndex=this.keyPadArray.length-1,this.keyPadArray)for(var t=0;t<this.keyPadArray.length;t++)this.rows[t]||(this.rows[t]=new vui.widgets.KeypadRowLayout,this.attachChild(this.rows[t])),this.rows[t].bind(this.keyPadArray[t])},rowDown:function(e){var t;if(e.index<this.lastRowIndex&&(t=e.index+1),this.rows[t]&&this.rows[t].children){for(var i=this.rows[t].children,s=0,n=0;n<i.length;n++)if((s+=i[n].keyWidth)>e.selectedButtonIndex){vui.select(this.rows[t].children[n]);break}}else vui.executeOnContainer(this,"onDirectionDown")},rowUp:function(e){var t;if(0<e.index&&(t=e.index-1),this.rows[t]&&this.rows[t].children){for(var i=this.rows[t].children,s=0,n=0;n<i.length;n++)if((s+=i[n].keyWidth)>e.selectedButtonIndex){vui.select(this.rows[t].children[n]);break}}else vui.executeOnContainer(this,"onDirectionUp")},wrapUp:function(e){var t,i;0<e.index&&(t=e.index-1),this.rows[t]&&this.rows[t].children?(i=this.rows[t].children,vui.select(i[i.length-1])):vui.executeOnContainer(this,"onDirectionUp")},wrapDown:function(e){var t,i;e.index<this.lastRowIndex&&(t=e.index+1),this.rows[t]&&this.rows[t].children?(i=this.rows[t].children,vui.select(i[0])):vui.executeOnContainer(this,"onDirectionDown")},selectLastButton:function(){var e=this.rows[this.lastRowIndex].children;vui.select(e[e.length-1])}}),vui.widgets.SubTitleWidgets=new Class({Extends:vui.widgets.Base,elemClassName:"subtitleContainer",w:{},s:{},rollMaxLines:null,myStyle:{},clear:function(){this.w={},this.elem.innerHTML=""},subtitleWidgetDefaults:{position:"absolute",left:"0",top:"0",width:"auto",height:"auto"},TextShadow:{raised:"-1px 0 0 silver, 0 -1px 0 silver, 0 1px 0 #111111, 1px 0 0 #111111",depressed:"1px 0 0 silver, 0 1px 0 silver, 0 -1px 0 #111111, -1px 0 0 #111111",uniform:"#FFFFFF -1px 0, #FFFFFF 0 1px, #FFFFFF 1px 0, #FFFFFF 0 -1px","drop shadowed":"1px 1px 2px #000000"},subtitleStyleDefaults:{font:"Bariol",color:"#FFFD52",fontSize:window.vui.ResDef.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM+"px",textAlign:"left",verticalAlign:"middle",padding:"0",background:"",window:"",edge:""},errorHighlightStyle:{fontFamily:"AveniBla",color:"#ff1010",fontSize:"26px","text-align":"center",textShadow:"#000000 -1px 0, #000000 0 1px, #000000 1px 0, #000000 0 -1px"},createWidgetWidthMode:function(e,t,i){var s,n;this.w[e]||this.createWidget(e),window.SUPPORTS_NEW_FCC_CEA708?(s=t.match(/^rollup([0-9]{1,2})$/i))&&0<parseInt(s[1],10)?(this.w[e].mode="rollup",this.w[e].rollMaxLines=parseInt(s[1],10),n=(this.w[e].current_y=i)&&parseInt(i*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE,10)||parseInt(this.w[e].container.style.top,10)||100,alert("_____ rollup_top: "+n),this.w[e].container.style.top=n+"px",this.w[e].container.style.overflow="hidden"):(delete this.w[e].mode,delete this.w[e].rollMaxLines):alert("rollup: older devices don't support rollup")},_cleanContainerDivs:function(e){if(this.w[e]&&this.w[e].container)for(var t=this.w[e].container,i=0;i<t.childNodes.length;i++){var s=t.childNodes[i];s&&"DIV"==s.tagName.toUpperCase()&&t.removeChild(s)}},initW:function(e,t){for(var i in t.mode&&this.createWidgetWidthMode(e,t.mode,t.y),t){var s=t[i];this.w[e]&&"rollup"==this.w[e].mode&&"y"==i?(this._cleanContainerDivs(e),this.w[e].container.style.top=parseInt(t.y*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE,10)+"px"):this.changeWidget(e,i,s)}},createWidget:function(e){if(this.w[e])alert("there is already a widget by that name"+e);else{var t={};$extend(t,this.subtitleWidgetDefaults);var i=new Element("div",{id:e,styles:t});this.elem.appendChild(i);var s={};$extend(s,this.subtitleStyleDefaults);var n=new Element("span",{styles:s});if(n.style.float="left",n.style.width="auto",n.style.height="auto",n.style.display="table-cell",i.style.display="table","mex"==vui.USER_COUNTRY){n.style.textAlign="center",n.style.verticalAlign="bottom",n.style.float="",n.style.color="#FFFD52";var a=vui.CCModel.getOnlyMyStyles();for(var o in a)"color"==o?n.style[o]="#"+a[o]:"background"==o?n.style[o]=a[o]:"size"==o?n.style.fontSize=a[o]:"font"==o?n.style.fontFamily=a[o]:"edge"==o&&window.SUPPORTS_NEW_FCC_CEA708?n.style.textShadow=this.TextShadow[a[o]]:"color_transparent"==o&&a.color&&window.SUPPORTS_NEW_FCC_CEA708&&(n.style.color=this.addTransparency("",a.color,a[o]))}i.appendChild(n),this.w[e]={container:i,content:n}}},deleteText:function(e){if(e.childNodes)for(var t=e.childNodes.length-1;0<=t;t--){var i=e.childNodes[t];(1!==i.nodeType||"SPAN"!==i.tagName.toUpperCase()&&"BR"!==i.tagName.toUpperCase())&&1===i.nodeType||e.removeChild(i)}},addText:function(e,t){if(window.SUPPORTS_NEW_FCC_CEA708||(t=t.replace(/[\u2600-\u2700]/g,"*")),/\S/.test(t))for(var i=t.split("\n"),s=0;s<i.length;s++)e.appendChild(document.createTextNode(i[s])),s<i.length-1&&e.appendChild(document.createElement("br"))},changeWidget:function(e,t,i){if(!this.w[e]){if(!e)return void alert("Reference to null widget");this.createWidget(e)}var s=this.w[e];if("object"==$type(i))this.changeWidgetValue(s,e,"style",i.style),this.changeWidgetValue(s,e,"text",i.text);else if("array"==$type(i)){alert("_____TYPE IS ARRAY");var n=s.content||s;this.deleteText(n),n.style.background="transparent";for(var a=0,o=i.length;a<o;a++){var r=new Element("span");n.appendChild(r),this.changeWidgetValue(r,e,"text",i[a].text),this.changeWidgetValue({container:this.w[e].container,content:r},e,"style",i[a].style)}}else this.changeWidgetValue(s,e,t,i)},changeWidgetValue:function(e,t,i,s){var n,a;e.container?(n=e.container,a=e.content):n=a=e;var o,r,l,u="container";if("x"==i?(u="container",i=["style","left"],(s=Math.round(s*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE))<16&&(s=16),o=parseInt(n.style.height,10)||0,"mex"==vui.USER_COUNTRY&&s+o>window.vui.ResDef.SCREEN_HEIGHT-10?s=parseInt(window.vui.ResDef.SCREEN_HEIGHT-o-25,10)+"px":s+="px"):"y"==i?(u="container",i=["style","top"],s=Math.round(s*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE),s+="px"):"width"==i?(u="container",i=["style","width"],s=Math.round(s*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE),s+="px"):"height"==i?(u="container",i=["style","height"],s=Math.round(s*window.vui.ResDef.Theater.CLOSEDCAPTION_SCALE),r=parseInt(n.style.top,10)||0,"mex"==vui.USER_COUNTRY&&s+r>window.vui.ResDef.SCREEN_HEIGHT-10?s=parseInt(window.vui.ResDef.SCREEN_HEIGHT-r-25,10)+"px":s+="px"):"hidden"==i?(u="container",i=["style","display"],s=!0===s?"none":"block"):"align"==i?(u="container",i=["style","textAlign"]):"valign"==i?(u="container",i=["style","verticalAlign"]):"fillColor"==i?(u="container",i=["style","background"],(s=s.replace("#","")).match(/^[0-9a-f]{6,8}$/i)&&((l=vui.CCModel.getOptionValueByName("window_transparent"))&&2===l.length&&(s=s.substr(0,6)+l),s=vui.hex2rgba(s))):"text"==i?(u="content",i=["elem","innerHTML"],window.SUPPORTS_NEW_FCC_CEA708&&"string"==typeof s&&0<s.length?a.style.margin="5px":a.style.margin="0"):"edge"==i&&(u="content",i=["style","textShadow"]),"parent"==i)return n.parentNode&&n.parentNode.removeChild(n),void(s?this.w[s].content.appendChild(n):this.elem.appendChild(n));if("style"!=i){if("eol"==i&&1==s)return n.parentNode&&(n.parentNode.deleteChild?n.parentNode.deleteChild(n):n.parentNode.removeChild(n)),void delete this.w[t];var d="content"==u?a:n;"elem"==i[0]?"innerHTML"===i[1]?this.w[t]&&"rollup"==this.w[t].mode?s?this.doRollup(t,s):(this._cleanContainerDivs(t),alert("______ rollup mode but value is empty!!!")):(this.deleteText(d),this.addText(d,s)):d[i[1]]=s:d[i[0]]?d[i[0]][i[1]]=s:alert("_____FINAL CHANGE: for:"+t+", attr:"+JSON.encode(i)+", value:"+JSON.encode(s))}else this.s[s]?this.applyStyle(e,this.s[s].style):alert("_____reference to unknown style: "+s)},doRollup:function(e,t){var s=this.w[e].container;this.w[e].content.style.margin="0",s.style.overflow="hidden";var i=new Element("div");i.style.overflow="hidden";var n=new Element("span");n.innerHTML=t,$extend(n.style,this.w[e].content.style),i.appendChild(n),s.appendChild(i),i.style.display="none",this.w[e].content=n;for(var a,o,l,u,d,c=0,h=this.w[e].rollMaxLines,v=s.childNodes.length-1;0<=v;v--){var m,g=s.childNodes[v];"DIV"==g.tagName.toUpperCase()?++c>this.w[e].rollMaxLines?(d=new Fx.Morph(g,{duration:200,onComplete:function(){s.removeChild(g);for(var e=0,t=s.childNodes.length-1;0<=t;t--){var i=s.childNodes[t];"DIV"==i.tagName.toUpperCase()&&(h<++e?s.removeChild(i):i.style.display="block")}}}),m=0-(m=this.w[e].rowHeight||r.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM),d.start({marginTop:[0,m]})):i.style.display="block":"SPAN"===g.tagName.toUpperCase()&&(g.style.marginTop="0",g.style.display="none")}1<c&&c<=this.w[e].rollMaxLines&&(a=i.getHeight()||r.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM,alert("get rollup rowHeight: "+a),this.w[e].rowHeight=a,o=parseInt(s.style.top,10),s.style.overflow="hidden",l=parseInt(o-a,10),u=parseInt(a*c,10),l<10&&(l=10),(d=new Fx.Morph(s,{duration:200})).start({top:l,height:u}))},createStyle:function(e){var t;this.s[e]?alert("there is already a style by that name"+e):($extend(t={},this.subtitleStyleDefaults),this.s[e]={style:t})},changeStyle:function(e,t,i){var s=vui.CCModel.getStyleOverride(t);if(s&&("font"==t?this.userFont=s:i=s),!this.s[e]){this.createStyle(e);var n=vui.CCModel.getOnlyMyStyles();for(var a in this.myStyles=n,this.s[e].style[t]=i,n)this.s[e].style[a]=n[a]}"eol"!=t||!0!==i?"super"==t||"sub"==t||(this.s[e].style[t]=i):delete this.s[e]},fontFamilyMap:{"Helvetica Neue 55 Condensed":"HelveticaNeueLTPro-Cn","Helvetica Neue 55 Condensed Bold":"HelveticaNeueLTPro-BdCn","Helvetica Neue Roman":"HelveticaNeueLTPro-Roman",Bariol:"Bariol",Anonymous:"Anonymous",Aleo:"Aleo",VeraMono:"VeraMono",ProximaNova:"ProximaNova",LobsterTwo:"LobsterTwo",LobsterTwoBold:"LobsterTwoBold",Comictalk:"Comictalk",EngraversGothic:"EngraversGothic",Courier:"Anonymous",Georgia:"Aleo",Verdana:"ProximaNova",Cursive:"LobsterTwo","Cursive Bold":"LobsterTwoBold",Chalkboard:"Comictalk",BlairMdITC:"EngraversGothic"},applyStyle:function(e,t){var i,s=e.container||e,n=e.content||e;for(var a in t)if("background_transparent"!=a&&"window_transparent"!=a)if("color_transparent"!=a){if(t[a],i=t[a],"font"==a)i.match(/Oblique/)?n.style.fontStyle="italic":n.style.fontStyle="normal",i.match(/Underline/)?n.style.textDecoration="underline":n.style.textDecoration="none",(i=i.replace(/\s+$/g,"")).replace("Underline",""),i.replace("Oblique",""),a="fontFamily",this.userFont&&(i=this.userFont),i=this.fontFamilyMap[i]||"Bariol";else if("size"==a)a="fontSize",i+="px";else if("align"==a)a="textAlign";else if("valign"==a)a="verticalAlign";else{if("autoSize"==a&&"true"==t[a]){s.style.width="auto",s.style.height="auto",n.style.whiteSpace="nowrap";continue}if("edge"==a)i="raised"==t[a]?(a="textShadow",this.TextShadow.raised):"depressed"==t[a]?(a="textShadow",this.TextShadow.depressed):"uniform"==t[a]?(a="textShadow",this.TextShadow.uniform):"drop shadowed"==t[a]?(a="textShadow",this.TextShadow["drop shadowed"]):(a="textShadow","");else{if("textShadow"==a)return;if("color"!=a){if("background"==a){i&&"Default"!=i&&(i=this.addTransparency(a,i,t[a+"_transparent"]),n.style.background=i);continue}if("window"!=a)continue;i&&"Default"!=i&&(i=this.addTransparency(a,i,t[a+"_transparent"]),s.style.background=i);continue}i=this.addTransparency(a,i,t[a+"_transparent"])}}n.style[a]=i}else"00"===t[a]&&(n.style.textShadow="")},addTransparency:function(e,t,i){return i&&i.match(/^[0-9a-f]{2}$/i)||(i="ff"),t.match(/^#?[0-9a-f]{6}$/i)&&(t=vui.hex2rgba(""+t+i)),t}}),vui.TimeData=new Class({data:{state_tees:null,state_data:null,layout_tees:null,layout_change:null,text_tees:null,text_content:null,text_target:null,text_styles:null,layoutTimeIndex:null,textTimeIndex:null,currentTime:null},findIndex:function(e,t){var i=0,s=e.length-1,n=Math.floor((i+s)/2);if(assert(0<=s),t<e[0])return-1;for(;e[s]>t;){if(t==e[n]||i==n)return n;t<e[n]?s=n:i=n,n=Math.floor((i+s)/2)}return s},getFullStateBefore:function(e){if((this.currentTime=null)==this.state_tees||0===this.state_tees.length)return alert("No full state known! Start from first delta"),this.layoutTimeIndex=0,this.textTimeIndex=0,this.currentTime=-1,null;var t=this.findIndex(this.state_tees,e);return-1==t?(alert("No full state prior or on that point! Start from first delta"),this.layoutTimeIndex=0,this.textTimeIndex=0,this.currentTime=-1,null):(this.currentTime=this.state_tees[t],this.layout_tees&&(this.layoutTimeIndex=this.findIndex(this.layout_tees,this.currentTime),-1==this.layoutTimeIndex&&(this.layoutTimeIndex=0)),this.textTimeIndex=this.findIndex(this.text_tees,this.currentTime),-1==this.textTimeIndex&&(this.textTimeIndex=0),alert("_____ state data: "+JSON.encode(this.state_data[t])),this.state_data[t])},setTextOnTarget:function(e,t,i,s){if("array"===$type(i)){var n=s,a=[];if("array"!==$type(n))return void alert("ERROR: styles in setTextOnTarget is not an array");if(n.length!==i.length)return void alert("ERROR: styles.length in setTextOnTarget does not == text.length");for(var o=0,r=i.length;o<r;o++){i[o];(s=n[o])?a.push({text:i[o],style:s}):alert("Reference to undefined style!",s)}e.changeWidget(t,"text",a)}else{var l;s?(assert("string"===$type(s)),l={text:i,style:s},e.changeWidget(t,"text",l)):e.changeWidget(t,"text",i)}},getUpcomingTee:function(){if(null==this.text_tees)return null;var e=this.text_tees[this.textTimeIndex];if(null==this.layout_tees)return e;var t=this.layout_tees[this.layoutTimeIndex];return null==e||null!=t&&t<e?t:e},_pushTop:function(e){for(var t=0;t<this.top_arr.length;t++)if(e.top<this.top_arr[t].top)return void this.top_arr.splice(t,0,e);this.top_arr.push(e)},_pushBottom:function(e){for(var t=0;t<this.bottom_arr.length;t++)if(e.top>this.bottom_arr[t].top)return void this.bottom_arr.splice(t,0,e);this.bottom_arr.push(e)},_fixOverlapTop:function(){for(var e=1;e<this.top_arr.length;e++){var t=this.top_arr[e-1],i=this.top_arr[e],s=t.top+t.height;i.top+1<s&&(i.top=s,i.el.style.top=s+"px")}},_fixOverlapBottom:function(){for(var e=1;e<this.bottom_arr.length;e++){var t=this.bottom_arr[e-1],i=this.bottom_arr[e];i.top+i.height>t.top+1&&(i.top=t.top-i.height,i.el.style.top=i.top+"px")}},catchupTo:function(e,t){if(null!=this.layoutTimeIndex&&null!=this.textTimeIndex&&null!=this.currentTime&&null!=this.text_content){(new Date).getTime();var i,s=null!=this.text_styles;if(this.layout_tees)for(i=this.layoutTimeIndex,v=this.layout_tees.length;i<v&&!(this.layout_tees[i]>t);i++){for(var n=0,a=this.layout_change[i].length;n<a;n++){var o=this.layout_change[i][n];for(var r in o){var l,u,d=o[r];if("w"==r.charAt(0))e.initW(r,d);else if("s"==r.charAt(0))for(l in d)u=d[l],e.changeStyle(r,l,u);else alert("unsupported thing:"+r)}}this.layoutTimeIndex=i+1}(new Date).getTime();for(var c={},h=this.textTimeIndex,v=this.text_tees.length;h<v&&!(this.text_tees[h]>t);h++){var m,g=this.text_content[h],_=null;if("array"===$type(m=this.text_target?this.text_target[h]:"w1"))for(i=0;i<m.length;i++){var p=m[i];s&&(_=this.text_styles[h][i]);var T=g[i];c[p]={text:T,style:_}}else s&&(_=this.text_styles[h]),c[m]={text:g,style:_};this.textTimeIndex=h+1}for(m in this.top_arr=[],this.bottom_arr=[],c){this.setTextOnTarget(e,m,c[m].text,c[m].style);var f,E,S,I=c[m].text;c[m].style;I&&0<I.length&&(f=parseInt(e.w[m].container.style.top,10),S=(E=e.w[m].container.getSize())&&E.y||30,f<240?this._pushTop({el:e.w[m].container,top:f,height:S}):this._pushBottom({el:e.w[m].container,top:f,height:S}))}2<=this.top_arr.length&&this._fixOverlapTop(),2<=this.bottom_arr.length&&this._fixOverlapBottom(),this.currentTime=t,(new Date).getTime()}}}),vui.widgets.SubTitle=new Class({Extends:vui.widgets.Base,elemClassName:"subtitleContainer",JUMP_THRESHOLD:3e4,initialize:function(){this.parent(),this.sw=new vui.widgets.SubTitleWidgets,this.attachChild(this.sw),this.td=new vui.TimeData,this.subtitleBaseUri=[],this.version="",this.languageCode="",this.subtitleUriSuffix="",this.subtitleIndex=0},setPlayer:function(e,t){1==vui.gConnectionInstance.getSubtitleGroup()&&(this.unsetPlayer(),this.player=e,this.load(t))},unsetPlayer:function(){this.player&&(this.sw.hide(),delete this.player)},heartbeat:function(){var e;this.player&&(e=this.player.getCurrentTime(),this.advanceTo(e),this.sw.show())},onPlaying:function(){var e;this.player?(e=this.player.getCurrentTime(),this.queueUp(e)):alert("ERROR: there was a problem loading the subtitles/CC!")},onStopped:function(){alert("Stopped now")},onPlayPaused:function(){alert("playing_paused now. Hide mythis")},setSubtitleInfo:function(e,t,i,s){this.subtitleBaseUri=e,this.version=t,this.languageCode=i,this.subtitleUriSuffix=s,this.subtitleIndex=0},setURI:function(e){var t=this.subtitleBaseUri[e]+"/subtitle."+this.version+"."+this.languageCode+".json";this.subtitleUriSuffix&&""!=this.subtitleUriSuffix&&(t+=this.subtitleUriSuffix),this.url=t,alert("SETTING URI:"+this.url)},setOverrideURL:function(e){this.url=e},load:function(a){this.sw.clear();var o=this.player;alert("START SUB TITLE LOAD!!");function e(e){r(a)}var r=function(e,t){alert("GOT AN ERROR LOADING SUBTITLES: currentSubtitleIndex: "+this.subtitleIndex+" #oflocations:"+this.subtitleBaseUri.length);try{this.subtitleIndex++,this.subtitleIndex<this.subtitleBaseUri.length?(alert("ERROR LOADING SUBTITLES, TRYING INDEX:"+this.subtitleIndex),this.setURI(this.subtitleIndex),i()):(alert("ERROR LOADING SUBTITLES NO OPTION AVAILABLE"),e&&e())}catch(e){alert("Error occured in errorCallback: "+JSON.encode(e))}}.bind(this),t=function(e){alert("LOADED SUBTITLE from WEB");var t=(new Date).getTime();if(alert("JSON FETCH TOOK:"+((t-l)/1e3).toFixed(3)+" secs"),e){this.td.state_tees=null,this.td.state_data=null,this.td.layout_tees=null,this.td.layout_change=null,this.td.text_tees=null,this.td.text_content=null,this.td.text_target=null,this.td.text_styles=null,this.td.layoutTimeIndex=0,this.td.textTimeIndex=0,this.td.currentTime=0;var i,s=(new Date).getTime();try{i=JSON.decode(e)}catch(e){return void alert("ERROR: Can't decode that json!:"+JSON.encode(e))}var n=(new Date).getTime();if(alert("JSON DECODE TOOK:"+((n-s)/1e3).toFixed(3)+" secs"),!i)return void alert("That json is empty"+e);this.td.state_tees=i.state_tees,this.td.state_data=i.state_data,this.td.layout_tees=i.layout_tees,this.td.layout_change=i.layout_change,this.td.text_tees=i.text_tees,this.td.text_content=i.text_content,this.td.text_target=i.text_target,this.td.text_styles=i.text_styles,o&&(this.player=o),"playing"==this.player.currentPlayerState&&this.onPlaying(),a&&a()}else r(a)}.bind(this),i=function(){new Request({method:"get",url:this.url,onSuccess:t,onError:e,onFailure:e,onTimeout:e}).send()}.bind(this);alert("load subtitles from "+this.url);var l=(new Date).getTime();i()},previousTime:null,overwriteChangeStyle:function(e,t){var i,s=vui.CCModel.getOnlyMyStyles();for(i in s)t[i]||(t[i]=s[i]);for(i in t){var n=t[i];this.sw.changeStyle(e,i,n)}},queueUp:function(e){alert("Queue up at "+e),this.sw.clear(),this.sw.hide();var t=this.td.getFullStateBefore(e);if(t)for(var i=0,s=t.length;i<s;i++){var n=t[i];for(var a in n){var o=n[a];"w"===a.charAt(0)?this.sw.initW(a,o):"s"===a.charAt(0)&&(this.sw.createStyle(a),this.overwriteChangeStyle(a,o))}}this.td.catchupTo(this.sw,e),this.previousTime=e},advanceTo:function(e){return null==this.previousTime?(alert("No previous time. Do queue up first"),void this.queueUp(e)):this.previousTime>e?(alert("Time running backwards. Do queue up first"),void this.queueUp(e)):Math.abs(e-this.previousTime)>this.JUMP_THRESHOLD?(alert("Time jumped too much. Do queue up first"),void this.queueUp(e)):(this.td.catchupTo(this.sw,e),void(this.previousTime=e))}}),vui.Notification=new Class({initialize:function(e,t){this.name=e,this.body=t},getName:function(){return this.name},getBody:function(){return this.body},toString:function(){return"[vui.Notification] name: "+this.name+", body:"+this.body}}),vui.FacadeMixin={notifyObservers:function(e){var t=this._observerMap[e.getName()];if(null!=t)for(var i=0,s=t.length;i<s;i++)t[i].notifyObserver(e)},registerObserver:function(e,t){for(var i=(i=this._observerMap[e])||(this._observerMap[e]=[]),s=-1,n=0;n<i.length;n++)i[n]==t&&(s=n);-1===s&&i.push(t)},removeObserverNotification:function(e,t){var i=this._observerMap[e];if(i){for(var s=-1,n=0;n<i.length;n++)i[n]==t&&(s=n);-1!==s&&i.splice(s,1)}},removeObserver:function(e){for(var t in this._observerMap)this.removeObserverNotification(t,e)},sendNotification:function(e,t){this.notifyObservers(new vui.Notification(e,t))}},vui.Facade=new Class({initialize:function(){this._observerMap={}}}),vui.Facade.implement(vui.FacadeMixin),vui.Facade.PLAYER_STATE="player_state",vui.Facade.PLAYER_ERROR="player_error",vui.Facade.PLAYER_TIME="player_time",vui.Facade.MOVIE_FOCUS="movie_focus",vui.Facade.MOVIE_DEFOCUS="movie_defocus",vui.Facade.WIDGET_SELECTABLE="widget_selectable",vui.Facade.WIDGET_NOT_SELECTABLE="widget_not_selectable",vui.Facade.MULTI_WIDGET_SELECTABLE="multi_widget_selectable",vui.Facade.MULTI_WIDGET_NOT_SELECTABLE="multi_widget_not_selectable",vui.Facade.EMPTY_LIST="empty_list",vui.Facade.SEARCH_KEY_EVENT="search_key_event",vui.Facade.START_GRID_GROUP="start_grid_group",vui.Facade.END_GRID_GROUP="end_grid_group",vui.Facade.SET_PRECOMPUTED_MAP="set_precomputed_map",vui.Facade.PANEL_LOADING="panel_loading",vui.Facade.PANEL_LOADED="panel_loaded",vui.Facade.KEYBOARD_INPUT="keyboard_input",vui.Facade.HIDE_EMPTY_LIST="hide_empty_list",vui.Facade.GENRE_FOCUS="genre_focus",vui.Facade.GENRE_DEFOCUS="genre_defocus",vui.Facade.CLEAR_MOVIE_INFO="clear_movie_info",vui.Facade.SHOW_MOVIE_INFO="show_movie_info",vui.Facade.PLAYER_DEBUG_INFO="player_debug_info",vui.getFacade=function(){return vui._facade||(vui._facade=new vui.Facade),vui._facade},vui.widgets.Book=new Class({Extends:vui.widgets.Container,fullScreenMode:!0,init:function(){this.resetHistory()},resetHistory:function(){this._history=new vui.History({maxLength:this.maxHistoryLength})},goToPage:function(e,t,i){t=t||{};var s,n,a=this.pages[e]&&this.pages[e].widgetClass;a?(this.hideDialog(),this.fullScreenMode&&!window._vuidata.ignoreUserEvents&&(vui.setBusy(!0),vui.setSelectorVisible(!1)),alert("G TO PAGE, target is: "+e+"  curerntpage is:"+(this.currentPage&&this.currentPage.name)),s=this.currentPage,i||this._savePageToHistory(),(n=new a(t))||alert("ERROR: goToPage():no widget for this template: "+e),n._template=e,this.pages[e].pageTitle&&(n.pageTitle=this.pages[e].pageTitle),n._skipHistory=this.pages[e].skipHistory||n.skipHistory,this._switchPages(s,n,t,!0)):alert("ERROR: You requested a template that has not been defined in this.pages:"+e)},initiateHistoryForDeepLink:function(){this.resetHistory(),this._history.push(["Home",{}])},initiateHistoryForVoiceControl:function(){this.resetHistory(),vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?this._history.push(["kidsModeWhosWatching",{}]):this._history.push(["Home",{}])},pushToHistory:function(e){this._history.push(e)},popHistory:function(){this._history.pop()},_getHistory:function(){return this._history},_setHistory:function(e){this._history=e},_savePageToHistory:function(){alert("SAVE PAGE TO HIS, curerntpage is:"+(this.currentPage&&this.currentPage.name));var e=this.currentPage;e&&(e._skipHistory||(e.save?this._history.push([e._template,e.save()]):this._history.push([e._template,{}])))},_restorePageFromHistory:function(){var e=this._history.top();if(!e)return null;var t=e[0],i=e[1];this.pages[t]||alert("_restorePageFromHistory, target doesn't exist:"+t);var s=new this.pages[t].widgetClass(i);return s||alert("ERROR: goToPage(): vui.createWidgets did not return a widget for this template: "+t),s._template=t,this.pages[t].pageTitle&&(s.pageTitle=this.pages[t].pageTitle),this._history.pop(),[s,i||{}]},_switchPages:function(e,t,i,s){t.selectable?this.selectable=!0:this.selectable=!1,e&&(e.hide&&e.hide(),this.detachChild(e)),this.attachChild(t),this.currentPage=t,this.currentTemplate=t._template,this.currentParams=i,t.show&&t.show(i,!s),this.fullScreenMode&&(vui.setBusy(!1),vui.setSelectorVisible(!0))},_switchPagesAnimate:function(e,t,i,s){var n,a,o,r;t.selectable?this.selectable=!0:this.selectable=!1,this.attachChild(t),(this.currentPage=t).show&&t.show(i,!s),e?(n=function(){e.hide&&e.hide(),this.detachChild(e)}.bind(this),e.onTransition||t.onTransition?(o=a=0,r=function(){(o+=1)===a&&(n(),vui.setBusy(!1),vui.setSelectorVisible(!0))},t.onTransition&&(a+=1,t.onTransition({transitionForward:s,transitionIn:!0},r)),e.onTransition&&(a+=1,e.onTransition({transitionForward:s,transitionIn:!1},r))):(n(),vui.setBusy(!1),vui.setSelectorVisible(!0))):t.onTransition?(r=function(){vui.setBusy(!1),vui.setSelectorVisible(!0)},t.onTransition({transitionForward:!0,transitionIn:!0},r)):(vui.setBusy(!1),vui.setSelectorVisible(!0)),this.onPageTransition&&this.onPageTransition(t)},goBack:function(){alert("Going back: "+this.name);var e=this.currentPage;if(!e)return alert("No current page"),1;var t=this._restorePageFromHistory();if(!t||2!==t.length)return 1;var i=t[0],s=t[1];return i?(vui.setSelectorVisible(!1),this._switchPages(e,i,s,!1),0):(alert("Restoring page from history doesn't work!"),1)},onBack:function(e){0!==this.goBack()&&vui.executeOnContainer(this.parentWidget,"onBack",e)},showDialog:function(e,t){alert("Showing Dialog"),this.dialogs[e]||alert("showDialog(): template isn't defined in self.dialogs[]: "+e);var i,s,n=this.dialogs[e].widgetClass;n?((i=new n(t))||alert("ERROR: showDialog(): no widget for this template: "+e),this.currentDialog&&(this.currentDialog.hide&&this.currentDialog.hide(),this.detachChild(this.currentDialog)),this.currentDialog=i,this.attachChild(i),this.currentPage&&(this.currentPage.selectable=!1),i.trackingName&&(s=i.trackingName),vui.analytics.showDialog(s),i.show&&i.show(t)):alert("ERROR: You requested a template that has not been defined in this.dialog:"+e)},hideDialog:function(){alert("Hiding Dialog"),this.currentDialog&&(this.currentDialog.hide&&this.currentDialog.hide(),vui.analytics.hideDialog(),this.detachChild(this.currentDialog),delete this.currentDialog,this.currentPage&&(this.currentPage.selectable=!0))},hide:function(){this.parent(),this.hideDialog(),this.currentPage&&this.currentPage.hide()},getPageTitle_:function(){return this.currentPage&&this.currentPage.pageTitle||""}}),vui.NewPage=new Class({Extends:vui.widgets.Container,elemClassName:"pageContainer",init:function(e){this._observerMap={}}}),vui.NewPage.implement(vui.FacadeMixin),vui.DynamicListBase=new Class({name:"vui.DynamicListBase",initialized:!1,initialize:function(e,t){this.save={},this.queryService=e.queryService,this.query=e.query,this.name=e.name,e.listElement&&(this.listElement=e.listElement),this.startAt=e.startAt||0,this.elementParser=e.elementParser,this.maxResults=e.maxResults,this.totalCount=e.maxResults,this.batchSize=e.batchSize||40,this.cacheSize=e.cacheSize||200,this.availStart=-1,this.availEnd=-1,this.windowStart=-1,this.windowEnd=-1,this.listener=t,this.showRank=e.showRank||!1,this.data={}},getQuery:function(e,t){var i=this.query;return i.offset=e,i.count=t,i},getList:function(e){var t=this.listElement&&e[this.listElement]||e;return e.recommendationContentList&&e.recommendationContentList[0]&&(t=e.recommendationContentList[0]&&e.recommendationContentList[0].recommendationContent,e.totalCount=e.recommendationContentList[0].totalCount[0]),"contentDiscoverResponse"==e._type&&e.contents&&e.contents[0]&&(t=e.contents[0]&&e.contents[0].content,e.totalCount=e.contents[0].totalCount[0]),"preOrderList"==e._type&&e.preOrder&&(t=e.preOrder),e.query&&"creditList"===e.query._type&&(t=e.content,e.totalCount=t&&t.length||0),"mediaObjectList"==e._type&&(t=e.mediaObject,e.totalCount=t&&t.length||0),t},haveResultRange:function(e,t){return e>=this.availStart&&e+t-1<=this.availEnd},getNewWindowStart:function(e){return Math.max(e-Math.floor(this.batchSize/2),0)},getNewWindowEnd:function(e){return e+Math.ceil(this.batchSize/2)-1},_doQuery:function(e){var u,t;alert("Issuing query");var i=this.getNewWindowStart(e),s=this.getNewWindowEnd(e);this.totalCount&&(s=Math.min(s,this.totalCount-1)),this.maxResults&&(s=Math.min(s,this.maxResults));var n,a=this.availStart,o=this.availEnd;if(a<=i){o+1<i?(n=o,u=i,t=s):(u=o+1,t=s,n=Math.min(s-this.cacheSize,o));for(var r=a;r<=n;r++)delete this.data[r];this.availStart=Math.max(a,n+1),this.availStart>=this.availEnd&&(this.availStart=-1,this.availEnd=-1)}else{for(var l=s<a-1?(u=i,t=s,a):(u=i,t=a-1,Math.max(i+this.cacheSize,a)),r=l;r<=o;r++)delete this.data[r];this.availEnd=Math.min(l-1,o)}this.query=this.getQuery(u,t-u+1);var d=this.query;if(this.currentQuery&&this.queryService.cancelQuery(this.currentQuery),this.windowStart=i,this.windowEnd=s,0<this.realTotalCount&&d.followup&&0<d.followup.length)for(r=0;r<d.followup.length;r++)if("totalCount"==d.followup[r]){d.followup.splice(r,1),d.followup&&0===d.followup.length&&delete d.followup,alert("remove totalcount followup");break}var c=function(e,t,i){try{if(t!=vui.getModel().queryStatus.ST_SUCCESS)return t==vui.getModel().queryStatus.ST_CANCELLED?void 0:t==vui.getModel().queryStatus.ST_TIMEOUT?(this.queryState="RETRYING",void(this.currentQuery=this.queryService.doQuery(d,c))):(this.queryState="FAILED",delete this.currentQuery,alert(" error status "+t,"error"),alert(JSON.encode(i)),void(this.listener&&this.listener(null)));delete this.queryState,delete this.currentQuery;var s,n=this.getList(i);vui._.isIndex(i.totalCount)&&(s=parseInt(i.totalCount,10));var a=0;if(n){a=n.length||0,(u<this.availStart||-1==this.availStart)&&(this.availStart=u);var o=u+n.length-1;(o>this.availEnd||-1==this.availEnd)&&(this.availEnd=o);for(var r=0;r<n.length;r++){var l=n[r];this.elementParser?this.data[u+r]=this.elementParser(l):this.data[u+r]=l,1==this.showRank&&(this.data[u+r].listRank=u+r+1)}}s&&(this.realTotalCount=s),i.moreBelow&&"false"==i.moreBelow&&(s=u+a),vui._.isIndex(s)&&(!this.maxResults||s<=this.maxResults?this.totalCount=s:this.totalCount=this.maxResults,this.windowEnd>s-1&&(this.windowEnd=s-1)),this.query._type&&"userCollectionContentsGet"===this.query._type&&"error"===i._type&&(this.error=i),this.listener&&this.listener(this,u,u+a-1)}catch(e){alert("GOTT ERR!!!")}}.bind(this);this.query.query&&"creditList"===this.query.query._type?c(null,vui.getModel().queryStatus.ST_SUCCESS,this.query):this.currentQuery=this.queryService.doQuery(this.query,c)},get:function(e){if(!this.doInit||this.initialized)return this._get(e);var t=function(){this.initialized=!0,this._get(e)}.bind(this);return this.doInit(t),null},_get:function(e){if(!vui._.isIndex(e))return null;var t=this.totalCount;if(t&&t-1<e)return null;var i=Math.floor(this.batchSize/5),s=this.windowStart;-1<this.availStart&&this.availStart<s&&(s=this.availStart);var n=Math.max(this.windowEnd,this.availEnd);return(e<s+i+1&&0!=s||n-i+1<e&&n!=t-1)&&vui._.debounce(this._doQuery(e),300),this.data[e]?this.data[e]:null},length:function(){return this.totalCount||0},hasOutstandingQuery:function(){return null!=this.currentQuery},getListener:function(){return this.listener},setListener:function(e){this.listener=e},destroy:function(){alert("Destroying!"),this.currentQuery&&(alert("Cancelling list query:"+this.currentQuery),this.queryService.cancelQuery(this.currentQuery)),this.listener=null},cleanup:function(){this.listener=null},fetch:function(){alert("TODO: remove me. I shouldnt be called.")}}),vui.DynamicList=new Class({Extends:vui.DynamicListBase,initialize:function(){this.parent.apply(this,arguments),this.get(this.startAt)}}),vui.DynamicMovieList=new Class({Extends:vui.DynamicList,name:"vui.DynamicMovieList",listElement:"content",initialize:function(e){this.addFilters(e.query,e.defaultFilters),this.addFilters(e.query,e.filters),this.defaultFilters=e.defaultFilters||{},this.filters=e.filters||{},this.parent.apply(this,arguments)},addFilters:function(e,t){for(var i in t=t||{}){var s=t[i],n=vuiFilters.getQueryFilters(i,s)||{};for(var a in n){var o=n[a];""!=o&&$defined(o)?e[a]=o:delete e[a]}}},getQuery:function(e,t){var i=this.query;return i.offset=e,i.count=t,"userCollectionContentsGet"===i._type&&(delete i.offset,delete i.count),i},getFilterValue:function(e){return this.filters[e]||this.getDefaultFilterValue(e)},getDefaultFilterValue:function(e){return this.defaultFilters[e]},getAllFilters:function(){var e={};if(this.defaultFilters)for(var t in this.defaultFilters)e[t]=this.defaultFilters[t];if(this.filters)for(var t in this.filters)e[t]=this.filters[t];return e},getSortOrder:function(){return vui.SortFilter.getQueryFilters(this.getFilterValue("sortBy")).sortBy},getSortName:function(){return vui.SortFilter.getDisplayName(this.getFilterValue("sortBy"))},getIndexByContentId:function(e){var t=this.data;for(var i in t)if(t[i].contentId[0]==e)return parseInt(i,10);return 0}}),vui.EmptyMovieList=new Class({initialize:function(e,t){return(this.listener=t)&&t(this,0,0),this},get:function(){return null},length:function(){return 0},hasOutstandingQuery:function(){return!1},getListener:function(){return this.listener},destroy:function(){this.listener=null},cleanup:function(){this.listener=null}}),vui.StaticList=new Class({initialize:function(e,t){if(this.queryService=e.queryService,this.query=e.query,this.listElement=e.listElement,this.parseKey=e.parseKey,this.parseValue=e.parseValue,this.maxResults=e.maxResults,this.totalCount=e.maxResults||0,this.batchSize=e.batchSize||51,this.windowEnd=0,this.listener=t,this.hasMultipleValues=e.hasMultipleValues||!1,this.list={},!this.query||!e.queryService)return null;this._doQuery()},_doQueryRange:function(d,e,c){this.maxResults&&d+e>this.maxResults&&(e=this.maxResults-d),e<=0&&c(!0);var h=this.query;h.offset=d,h.count=e;var v=function(e,t,i){var s=!1,n=this.queryService;if(t!=n.queryStatus.ST_SUCCESS)return t==n.queryStatus.ST_CANCELLED?void 0:t==n.queryStatus.ST_TIMEOUT?void(this.currentQuery=n.doQuery(h,v)):void c(null,t);var a,o=this.listElement&&i[this.listElement]||i;if(o){a=o.length;for(var r=0;r<a;r++){var l=o[r],u=this.parseKey?this.parseKey(l):r;this.parseValue&&(l=this.parseValue(l)),this.hasMultipleValues?(this.list[u]||(this.list[u]=[]),this.list[u].push(l)):this.list[u]=l}return this.windowEnd=d+a-1,i.totalCount&&(this.totalCount=parseInt(i.totalCount,10)),i.moreBelow&&(s="false"==i.moreBelow),i.totalCount?this.totalCount=i.totalCount:this.totalCount<=d+a-1&&(this.totalCount=d+a),this.maxResults&&this.windowEnd+1>=this.maxResults&&(s=!0),c(s)}}.bind(this);this.currentQuery=this.queryService.doQuery(h,v)},_doQuery:function(){var i=this.batchSize;this.currentQuery&&this.queryService.cancelQuery(this.currentQuery),this.list={};var s=function(e,t){t?this.listener&&this.listener(null,t):e?this.listener&&this.listener(this):0<this.windowEnd?this._doQueryRange(this.windowEnd+1,i,s):(alert("Error: Not Done. "+this.windowEnd),this.listener&&this.listener(null,"error"))}.bind(this);this._doQueryRange(0,i,s)},get:function(e){return e&&this.list[e]},length:function(){return this.totalCount||0},setListener:function(e){this.listener=e}}),vui.Collections=new Class({newReleases:null,filmstrip:null,search:[],initialize:function(r){var l=vui.getModel(),e={onTimeout:l.QueryOptions.RETRY},t=function(e,t,i){var s=[];if(t==l.queryStatus.ST_SUCCESS){var n=i.collection;if(!n)return void r(!0);for(var a=0;a<n.length;a++){var o=n[a];"search"==o.collectionGroup[0]?s.push(o):"filmstrip"==o.collectionGroup[0]&&"movie_home"==o.title[0]?(this.filmstrip=o,this.filmstripId=o.collectionId[0]):"newReleases"==o.collectionGroup[0]&&"New Releases"==o.title[0]&&(this.newReleases=o,this.newReleasesId=o.collectionId[0])}this.search=s,r(!0)}else r(!1)}.bind(this);l.doQuery({_type:"collectionSearch",count:100},t,e)},getNewReleasesCollection:function(){return this.newReleases},getMovieHomeCollection:function(){return this.filmstrip},getBrowseableCollections:function(){return this.search},getCollectionByTitle:function(e){for(var t=this.getBrowseableCollections(),i=0,s=t.length;i<s;i++){var n=t[i];if(n.title==e)return n}return null}}),vui.DirectorRequestHandler=new Class({initialize:function(){var e=function(e){return alert("GOT A directorRequest for: "+this.noteType),this._notifyHandlers(e)}.bind(this);VUDU.setDirectorRequestHandler(this.noteType,e)},_handlers:{},_notifyHandler:function(e,t){var i=this._handlers[e];i?(alert("FOUND "+e+" HANDLER FOR :"+this.noteType),i(t)):alert("handlerType: '"+e+"' is not registered for noteType:"+this.noteType)},parseNote:function(){return[]},_notifyHandlers:function(e){return alert("NOTIFYING HANDLER FOR: "+this.noteType),alert("NOTE:"+JSON.encode(e)),this.parseNote(e).each(function(e){alert("doing changed:"+e.handlerType),this._notifyHandler(e.handlerType,e.parameters)}.bind(this)),{_type:"success"}},setHandler:function(e,t){alert("SETTING handlerType: "+e+" for noteType: "+this.noteType),this._handlers[e]=t}}),vui.DataChangedHandler=new Class({Extends:vui.DirectorRequestHandler,noteType:"dataChanged",_handlers:{account:null,purchasesToOwn:null,purchasesToRent:null,wishLists:null,ratings:null},parseNote:function(e){var t=[];return"string"==typeof e.changed?t.push({handlerType:e.changed}):e.changed.each(function(e){t.push({handlerType:e})}),t}}),vui.DeviceOperateHandler=new Class({Extends:vui.DirectorRequestHandler,noteType:"deviceOperate",_handlers:{viewMovieDetails:null,playMovie:null,echo:null,alert:null},parseNote:function(e){var t,i,s,n,a,o,r=[];return e.parameters[0]&&(-1<(s=(i=e.parameters[0]).indexOf(" "))?(t=i.substring(0,s),n=(a=i.substring(s+1)).search(/[^\s]/),a=a.substring(n)):t=i,o={handlerType:t},a&&(o.parameters=a),r.push(o)),r}}),vui.AutomationHandler=new Class({Extends:vui.DirectorRequestHandler,noteType:"clientMessageSend",_handlers:{playTrailer:null,playMovie:null,playBonus:null,showHomePage:null,showDebugPage:null,showContentDetails:null,showOfferGridDialog:null,showSearchResults:null},parseNote:function(e){var t,i=[];return e.message&&((t={}).handlerType=vui._.aStr(e.message[0].type),t.parameters=e.message[0],i.push(t)),i}}),vui.ParentalControlsModel=new Class({enabled:!1,newEnabled:!1,passcode:null,browseMaximum:null,playMaximum:null,purchaseMaximum:null,adultButtonMode:"prompt",lastAuthTimes:{},maxAuthTimes:{parental_controls:1/0,_default:300},saveLoadKey:"parentalControls",passcodePrompt:null,initialize:function(){"mex"==vui.RATING_SYSTEM?(this.ratingLevel=this.ratingLevelMEX,this.maxTranslateTable=this.maxTranslateTableMEX,this.directorRatingLevel=this.directorRatingLevelMEX):(this.ratingLevel=this.ratingLevelUSA,this.maxTranslateTable=this.maxTranslateTableUSA,this.directorRatingLevel=this.directorRatingLevelUSA),this.queryType="user";var e=function(e){return this.handleResetRequest(e)}.bind(this);VUDU.setDirectorRequestHandler("deviceParentalControlReset",e)},browseProtected:function(){return this.enabled&&this.browseMaximum&&"NR"!=this.browseMaximum},handleResetRequest:function(e){return alert("Received parental controls reset request; disabling parental controls and clearing passcode"),delete this.passcode,this.enabled=!1,this.save(),{_type:"success"}},isAuthorized:function(e){e=e||"_default";var t=this.lastAuthTimes[e],i=this.maxAuthTimes[e],s=VUDU.vuduTime();return!!(t&&(s-t)/1e3<=i)},authorize:function(e){e=e||"_default",this.lastAuthTimes[e]=VUDU.vuduTime()},deauthorize:function(e){e=e||"_default",delete this.lastAuthTimes[e]},ratingLevelUSA:{ALL:0,G:1,FAM:2,PG:3,"PG-13":4,R:5,NR:6},ratingLevelMEX:{ALL:0,A:1,B:2,"B-15":3,C:4,D:5,NR:6},maxTranslateTableUSA:{NR:"nr",R:"r",FAM:"nrFamilyFriendly","PG-13":"tv14",PG:"pg",G:"g"},maxTranslateTableMEX:{AA:"aa",A:"a",B:"b","B-15":"b15",C:"c",D:"d",NR:"nr"},directorRatingLevelUSA:{nr:6,r:5,nrFamilyFriendly:4,tv14:3,pg:2,g:1},directorRatingLevelMEX:{nr:7,d:6,c:5,b15:4,b:3,a:2,aa:1},isRestricted:function(e,t){if(!this.newEnabled)return!1;var i={browse:this.browseMaximum||!1,play:this.playMaximum||!1,purchase:this.purchaseMaximum||!1}[e];if(!i)return alert("Invalid action: "+e),!1;if(0==i)return!1;var s=this.ratingLevel[i];if(null==s)return alert("Unknown rating ratingLevel: "+i),!1;var n=window.getFriendlyToGeneric(t);if(!$defined(n))return alert("Unknown rating friendlyToGeneric: "+t),!1;var a=this.ratingLevel[n];return null==a?(alert("Unknown rating genericRating for ratingLevel: "+n),!1):this.isAuthorized()?(alert("still authorized"),!1):s<=a},printSettings:function(){alert("Parental controls settings:"),alert(" controls enabled: "+this.enabled),alert(" new controls enabled: "+this.newEnabled),alert(" passcode: "+this.passcode),alert(" browseMaximum: "+this.browseMaximum),alert(" playMaximum: "+this.playMaximum),alert(" purchaseMaximum: "+this.purchaseMaximum),alert(" adultButtonMode: "+this.adultButtonMode)},getParams:function(){return vui.settings.getLoadQueryParams(this.queryType,this.saveLoadKey)},fakeSetPC:function(){return this.enabled=!0,this.passcode="1234",this.browseMaximum="G",this.playMaximum="G",this.purchaseMaximum="ALL",this.adultButtonMode=!1,this.printSettings(),this},getCallback:function(e,t,i){if(delete this.getQuery,dataName="appUserData",t!=vui.getModel().queryStatus.ST_SUCCESS)return alert("Failed to get parental controls from director."),null;if(i[dataName]&&i[dataName][0]&&i[dataName][0].value&&i[dataName][0].value[0]){alert("Got settings from director.");var s=i[dataName][0].value[0];return this.enabled=this.intToBool(s.enabled&&s.enabled[0]),this.newEnabled=this.intToBool(s.newEnabled&&s.newEnabled[0]),s.passcode&&(this.passcode=s.passcode[0]),"back"==this.passcode&&(this.passcode="0000"),this.playMaximum=s.playMaximum&&s.playMaximum[0]||this.playMaximum,this.purchaseMaximum=s.purchaseMaximum&&s.purchaseMaximum[0]||this.purchaseMaximum,this.adultButtonMode=s.adultButtonMode[0]||this.adultButtonMode,this.printSettings(),this}return alert("No parental controls saved"),this},getOld:function(e){e(this)},get:function(e){return this.getQuery=vui.settings.load(this.queryType,this.saveLoadKey,e),this.qetQuery},boolToInt:function(e){return 1==e?1:0},intToBool:function(e){return 1==e},save:function(t){this.saveQuery&&vui.getModel().cancelQuery(this.saveQuery);var e=[{enabled:this.boolToInt(this.enabled),newEnabled:this.boolToInt(this.newEnabled),browseMaximum:this.browseMaximum,playMaximum:this.playMaximum,purchaseMaximum:this.purchaseMaximum,adultButtonMode:this.adultButtonMode}];this.passcode&&(e[0].passcode=this.passcode),this.printSettings();return this.saveQuery=vui.settings.save(this.queryType,this.saveLoadKey,e,function(e){delete this.saveQuery,0<e?(alert("SUCCESSFULLY SAVED PARENTAL CONTROLS"),t&&t(this)):(alert("Failed to save parental controls! status = "+status+" result = "+JSON.encode(e)),t&&t(null))}),this.saveQuery}}),vui.myCollectionsModel=new Class({userId:"",myCollections:[],hasCollections:!1,updatingTitleCounter:0,hasSeenNavTip:!0,hasSeenDetailTip:!0,tipQueryType:"user",tipQueryKey:"userCollectionTipState",maxCollectionCount:100,maxContentCount:200,maxCollectionNameLen:75,posterCount:3,initialize:function(e){this.userId=e&&e.userId,e&&e.myCollectionsModel&&e.myCollectionsModel.myCollections&&(this.myCollections=e.myCollectionsModel.myCollections),this.load()},load:function(t,e){var i={};i.loadForBundle=e,i.callback=function(e){e&&e.userCollection?(this.myCollections=e.userCollection,this.hasCollections=0<e.userCollection.length):(this.myCollections=[],this.hasCollections=!1),t&&t(e)}.bind(this),this.searchCollection(i)},loadTipState:function(){if(vui.ActivationController&&vui.ActivationController.getActivationMethod&&"newAccount"===vui.ActivationController.getActivationMethod())return this.hasSeenNavTip=!0,void(this.hasSeenDetailTip=!0);vui.settings.load(this.tipQueryType,this.tipQueryKey,function(e){var t;Array.isArray(e)&&0<e.length?(t=e[0],this.hasSeenNavTip="1"===vui._.aStr(t.nav),this.hasSeenDetailTip="1"===vui._.aStr(t.detail)):(this.hasSeenNavTip=!1,this.hasSeenDetailTip=!1)}.bind(this))},saveTipState:function(e){var t,i;e&&(t={},"nav"===e?(this.hasSeenNavTip=!0,t.nav=1,t.detail=this.hasSeenDetailTip?1:0):"detail"===e&&(this.hasSeenDetailTip=!0,t.detail=1,t.nav=this.hasSeenNavTip?1:0),i=[t],vui.settings.save(this.tipQueryType,this.tipQueryKey,i,function(e){e&&alert("save user collection tip state successfully")}.bind(this)))},getHasSeenTip:function(e){return!vui.gConnectionInstance.getUserCollectionOnboardingTipEnabled()||(!this.userId||("nav"===e?this.hasSeenNavTip:"detail"===e&&this.hasSeenDetailTip))},storeCollection:function(o){var e,t;this.userId&&o&&o.name?(e={_type:"userCollectionStore",userId:this.userId,name:o.name},o.userCollectionId&&(e.userCollectionId=o.userCollectionId),t=function(e,t,i){var s,n,a;t===vui.m.queryStatus.ST_SUCCESS&&o.callback&&i&&("userCollection"===i._type?(s=function(){this.load(function(){o.callback("success")})}.bind(this),o.contentId?this.addContents({contentId:o.contentId,userCollectionId:i.userCollectionId,callback:s}):s()):"error"===i._type?i.code&&(n=vui._.aStr(i.code),a=i.subCode&&vui._.aStr(i.subCode)||null,"duplicateObject"===n&&o.callback("existed"),"invalidArgument"===n&&a&&"notFound"===a&&o.callback("notFound")):(alert("userCollectionStore unknown error"),o.callback("error")))}.bind(this),alert("execute user collection store query "+JSON.encode(e)),vui.getModel().doQuery(e,t)):alert("No userId or collection name")},storeContents:function(s){this.userId&&s&&s.userCollectionId||(alert("No userId or userCollectionId found"),s.callback&&s.callback("failed"));var e={_type:"userCollectionContentsStore",userId:this.userId,contentId:s.contentId,userCollectionId:s.userCollectionId};alert("execute user collection contents store query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)})},searchCollection:function(s){if(!this.userId||!s)return alert("No userId found"),void(s.callback&&s.callback("failed"));var e={_type:"userCollectionSearch",userId:this.userId,contentCount:this.posterCount};s.loadForBundle&&"true"===s.loadForBundle&&(e.contentCount=this.getMaxContentCount());alert("execute user collection search query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)})},removeCollection:function(s){var e,t;this.userId&&s&&s.userCollectionId?(e={_type:"userCollectionRemove",userId:this.userId,userCollectionId:s.userCollectionId},t=function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)}.bind(this),alert("execute user collection remove query "+JSON.encode(e)),vui.getModel().doQuery(e,t)):alert("No userId or userCollectionId")},updateMyCollections:function(e,t,i,s,n){var a=function(e){"ok"===e||e&&"success"===e._type?(alert("Collections have been updated."),this.load(function(){n&&n(e)})):(n&&n(e),alert("Title failed to be added to or removed from collections"))}.bind(this);i&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.addContents({contentId:e,userCollectionId:i,callback:a}),t&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.removeContents({contentId:e,userCollectionId:t,callback:a}),s&&2===s.length&&s[1].setWished(s[0],a)},addContents:function(s){var e;this.userId&&s.contentId&&s.userCollectionId?(e={_type:"userCollectionContentsAdd",userId:this.userId,contentId:s.contentId,userCollectionId:s.userCollectionId},alert("execute user collection addContents query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)})):alert("No userId, contentId or userCollectionId")},getContents:function(s){var e;this.userId&&s.userCollectionId?(e={_type:"userCollectionContentsGet",userId:this.userId,userCollectionId:s.userCollectionId},s.count&&(e.count=s.count),s.sortOrder&&(e.sortOrder=s.sortOrder),alert("execute user collection getContents query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)})):alert("No userId, contentId or userCollectionId")},removeContents:function(s){var e;this.userId&&s.contentId&&s.userCollectionId?(e={_type:"userCollectionContentsRemove",userId:this.userId,contentId:s.contentId,userCollectionId:s.userCollectionId},alert("execute user collection removeContents query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&s.callback&&s.callback(i)})):alert("No userId, contentId or userCollectionId")},getCache:function(e){var t=[];if(e){var i={name:"Wishlist",_type:"wishlist"};if(vui.getModel().wishedMovieCache){var s=vui.getModel().wishedMovieCache.wished&&vui.getModel().wishedMovieCache.wished.list,n=s&&Object.keys(s),a=[];if(n)for(var o=0;o<n.length;o++)s[n[o]]&&a.push({contentId:n[o]});var r=(i.contents=a).length+""||"0";i.contentCount=[r]}t.push(i)}if(this.myCollections&&0<this.myCollections.length)for(o=0;o<this.myCollections.length;o++)t.push(this.myCollections[o]);return t},getHasCollections:function(){return this.hasCollections},getCollectionsWithContent:function(a){if(!this.userId||!a||!a.contentId)return alert("params not found"),void(a.callback&&a.callback("failed"));var e={_type:"userCollectionSearch",userId:this.userId,contentId:a.contentId};alert("execute user collection search query "+JSON.encode(e)),vui.getModel().doQuery(e,function(e,t,i){if(t===vui.m.queryStatus.ST_SUCCESS&&a.callback)if("userCollectionList"===i._type&&0<Number(vui._.aStr(i.totalCount))&&i.userCollection){for(var s=[],n=0;n<i.userCollection.length;n++)s.push(vui._.aStr(i.userCollection[n].name));a.callback(s)}else a.callback([])})},getIsContentInCollection:function(e,t,i){return!!e&&(!(!t||"Wishlist"!==e._type||!vui.getModel().wishedMovieCache.check(t))||!(!i||"userCollection"!==e._type||!i.contains(vui._.aStr(e.name))))},getIsBundleInCollection:function(e,t){if(!e||!t||!t.bundledContent)return!1;for(var i=0,s=0;s<e.length;s++)for(var n=0;n<t.bundledContent.length;n++)vui._.aStr(e[s].contentId)===vui._.aStr(t.bundledContent[n].contentId)&&(i+=1);return i===t.bundledContent.length},getMaxCollectionCount:function(){return this.maxCollectionCount},getMaxContentCount:function(){return this.maxContentCount},checkIfCollectionNameExists:function(e){if(!this.myCollections)return!1;for(var t=0;t<this.myCollections.length;t++)if(e===vui._.aStr(this.myCollections[t].name))return!0;return!1},checkCollectionNameValidity:function(e){return!!e&&e.length<this.maxCollectionNameLen},checkIfCanAddMoreCollections:function(){return!this.myCollections||this.myCollections.length<this.maxCollectionCount},checkIfCanAddMoreTitles:function(e){return e<this.maxContentCount},reset:function(){this.userId=null,this.myCollections=[],this.hasCollections=!1,this.updatingTitleCounter=0}}),vui.account={},vui.account._initState={callbacks:[],initialized:!1},vui.account._accountData=null,vui.account._paymentData=null,vui.account.paymentMethodMap={firstDataCreditCard:"Credit Card",firstDataGiftCard:"Gift Card",walmartWallet:"From Walmart.com",payPalPaymentMethod:"PayPal",xboxWallet:"From Xbox"},vui.account._listeners=[],vui.account.notifyOnInit=function(e){vui.account._initState.callbacks.push(e)},vui.account.isInitialized=function(){return vui.account._initState.initialized},vui.account._notifyInitialized=function(){if(vui.account._initState.initialized=!0,vui.account._initState.callbacks){for(var e=0;e<vui.account._initState.callbacks.length;e++){(0,vui.account._initState.callbacks[e])()}delete vui.account._initState.callbacks}},vui.account.refresh=function(o){var r=vui.account.getAccountId(),e={_type:"accountSearch",followup:["paymentMethod","shippingAddress","accountAddress"]},t=vui.getModel();if(t.userId)return e.userId=t.userId,e.sessionKey=t.sessionKey,vui.getModel().doQuery(e,function(e,t,i){if(t===vui.getModel().queryStatus.ST_SUCCESS){if(vui.account._accountData=i.account&&i.account[0],vui.account._accountData&&vui.account._accountData.labels&&vui.account._accountData.labels[0]&&Array.isArray(vui.account._accountData.labels[0].label)){for(var s={},n=0;n<vui.account._accountData.labels[0].label.length;n++){var a=vui.account._accountData.labels[0].label[n];Array.isArray(a.name)&&Array.isArray(a.value)&&(s[a.name[0]]=a.value[0])}vui.account._accountData.labels=s}try{vui.debugLevel={notice:0,warn:0,log:0,info:1,debug:2}[vui.account.getUserLogLevel()]||0}catch(e){alert("error parsing debugLevel label: "+vui.account.getUserLogLevel())}vui.account.getAccountId()!==r&&vui.account._notifyListeners()}else alert("Failed to get account data","error");vui.account.getPaymentMethodDetails(function(){o(t)})});t.scheduleAsyncCall(function(){vui.account._accountData=null,vui.account._paymentData=null,vui.account._notifyListeners(),o(t.queryStatus.ST_SUCCESS)})},vui.account._onAccountDataChanged=function(){alert("Received account dataChanged notification. Executing accountSearch."),vui.account.refresh(function(){alert("Done refreshing account data after dataChanged notification")})},vui.account.init=function(t){return alert("vui.account.init begin"),vui.account.refresh(function(e){alert("vui.account.init done"),vui.account._notifyInitialized(),t(e)})},vui.account.getAccountId=function(){return vui.account._accountData&&vui.account._accountData.accountId&&vui.account._accountData.accountId[0]},vui.account.getHasPaymentStatus=function(){return vui.account._accountData&&vui.account._accountData.paymentConfigStatus&&"hasPaymentMethod"===vui.account._accountData.paymentConfigStatus[0]},vui.account.getAccountId=function(){return vui.account._accountData&&vui.account._accountData.accountId&&vui.account._accountData.accountId[0]},vui.account.getPaymentMethodId=function(){return vui.account._accountData&&vui.account._accountData.paymentMethodId&&vui.account._accountData.paymentMethodId[0]},vui.account.getShippingAddress=function(){return vui.account._accountData&&vui.account._accountData.shippingAddress&&vui.account._accountData.shippingAddress[0]||null},vui.account.getPhoneNumber=function(){return vui._.aStr(vui.account._accountData.phone)},vui.account.isUsingWalmartWallet=function(){var e=vui.account._accountData&&vui.account._accountData.paymentMethod,t=(e=e&&e[0])&&e.paymentMethodType&&0<e.paymentMethodType.length&&e.paymentMethodType[0];return alert("PAYMENT METHOD TYPE:"+t),"walmartWallet"===t},vui.account.getLabels=function(){return vui.account._accountData&&vui.account._accountData.labels},vui.account.isInMQC=function(){return vui.account.getLabels()&&vui.account.getLabels().location&&vui.account.getLabels().location&&"LOC_MQC"===vui.account.getLabels().location},vui.account.hasLevel2DebugLabel=function(){return vui.account.getLabels()&&vui.account.getLabels().debugLevel&&"LEVEL_2"===vui.account.getLabels().debugLevel},vui.account.hasInternetAppsFlag=function(){return vui.account.getLabels()&&vui.account.getLabels().Internet_Apps_flag&&"INTERNET_APPS_ENABLED"===vui.account.getLabels().Internet_Apps_flag},vui.account.getUserLogLevel=function(){var e=vui.account.getLabels()&&vui.account.getLabels().userLogLevel||"notice";return"notice"===e?"log":e},vui.account.showTestContent=function(){return vui.account.getLabels()&&vui.account.getLabels().testContent&&"SHOW"==vui.account.getLabels().testContent},vui.account.isUVLinkActive=function(n){var e={_type:"ultraVioletRequiredPurchaseStatusGet",accountId:vui.account.getAccountId()};vui.getModel().doQuery(e,function(e,t,i){var s=!0;t===vui.getModel().queryStatus.ST_SUCCESS?i&&"true"===i.hasUltraVioletRequiredPurchases&&"false"===i.isUltraVioletLinkActive&&(s=!1):alert("Error getting UV status","error"),alert("uvStatus is:"+s),n&&n(s)})},vui.account.getPaymentMethodDetails=function(s){var e={_type:"paymentMethodSearch",followup:["paymentDetails","partnerPaymentInfo"]},t=vui.getModel();if(t.userId)return e.accountId=t.userId,e.sessionKey=t.sessionKey,vui.getModel().doQuery(e,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS?vui.account._paymentData=i.paymentMethod&&i.paymentMethod[0]:alert("Failed to get payment data","error"),s(t)})},vui.account.hasPaymentMethod=function(){if(!vui.account._paymentData)return!1;var e=vui.account._paymentData.paymentMethodType;return!(!e||!e[0])&&("walmartWallet"!==e[0]||(vui.account._paymentData.partnerPaymentInfo&&vui.account._paymentData.partnerPaymentInfo[0]||!1))},vui.account.getPaymentMethodType=function(){if(!vui.account._paymentData)return"None";var e=vui.account._paymentData.paymentMethodType;return e&&e[0]?vui.account.paymentMethodMap[e]?vui.account.paymentMethodMap[e]:"On File":"None"},addListenerSupport=function(i){i.listenCount=0,i._listeners={},i.addListener=function(e){var t=i.listenCount;return i.listenCount++,i._listeners[t]=e,t},i.removeListener=function(e){i._listeners[e]=null},i._notifyListeners=function(){for(var e in i._listeners){var t;!i._listeners.hasOwnProperty(e)||(t=i._listeners[e])&&t()}}},addListenerSupport(vui.account),vui.fund={},vui.fund._listeners={},vui.fund.init=function(t){alert("vui.fund.init begin");return vui.fund._fundData={},vui.account.addListener(function(){vui.fund.refresh()}),vui.fund.refresh(function(e){alert("vui.fund.init done"),vui.fund.initTimer(),t&&t(e)})},vui.fund.initTimer=function(){vui.fund._fundData.fund_timer=setInterval(function(){vui.fund.refresh()},36e5)},vui.fund.refresh=function(l){var u=vui.getModel().queryStatus,e=vui.account.getAccountId();if(e){var t={_type:"fundSearch",accountId:e,balanceMin:"0.01",expired:"false",closed:"false",count:"100",offset:"0",followup:["fundPolicy"]};return vui.getModel().doQuery(t,function(e,t,i){var s=vui.fund._fundData;if(t===u.ST_SUCCESS){if(i&&i.fund){alert("FUND GOT "+JSON.encode(i)),s.tokens=[],s.balance=0,s.tokenBalance=0,s.earlyExiprationTime=null,s.earlyExiprationBalance=0,s.tokenExpirationTime=null,s.tokenExpirationBalance=0;for(var n=i.fund.length,a=0;a<n;a++){var o,r=i.fund[a];switch(r.expirationTime&&(o=r.expirationTime[0].substring(0,10)),vui._.aStr(r.fundType)){case"ptrToken":s.tokens.push(vui.fund._createToken(r)),s.tokenBalance+=+r.balance[0],o&&(s.tokenExpirationTime=o,s.tokenExpirationBalance+=+r.balance[0]);break;case"ptoToken":break;default:s.balance+=+r.balance[0],o&&(s.earlyExiprationTime=o,s.earlyExiprationBalance+=+r.balance[0])}}}else s.tokens=[],s.balance=0,s.tokenBalance=0;vui.fund._notifyListeners()}else alert("FUND ERROR "+t);l&&l(t)})}vui.fund._notifyListeners(),l&&l(u.ST_SUCCESS)},vui.fund._createToken=function(e){var t={};return"ptrToken"===vui._.aStr(e.fundType)&&"0.00"!==vui._.aStr(e.balance)&&(t.expirationTime=vui._.aStr(e.expirationTime)||0,t.fundType=vui._.aStr(e.fundType),t.count=vui._.aStr(e.balance),e.fundPolicy&&(t.offerType=vui._.aStr(e.fundPolicy[0].offerType),t.maxVideoQuality=vui._.aStr(e.fundPolicy[0].maxVideoQuality))),t},vui.fund.getServiceBalance=function(){return vui.fund._fundData&&vui.fund._fundData.balance||0},vui.fund.getEarlyExpirationDate=function(){return vui.fund._fundData&&vui.fund._fundData.earlyExiprationTime||0},vui.fund.getEarlyExpirationBalance=function(){return vui.fund._fundData&&vui.fund._fundData.earlyExiprationBalance||0},vui.fund.getValidTokens=function(){var e=vui.fund._fundData&&vui.fund._fundData.tokens,t=[];if(e)for(var i=0;i<e.length;i++)(!e[i].expirationTime||getTimeDiffString(e[i].expirationTime))&&t.push(e[i]);return t},vui.fund.getValidTokenBalance=function(){for(var e=0,t=vui.fund.getValidTokens(),i=0;i<t.length;i++)e+=+t[i].count;return e},vui.fund.getTokenExpirationDate=function(){return vui.fund._fundData&&vui.fund._fundData.tokenExpirationTime||0},vui.fund.getTokenExpirationBalance=function(){return vui.fund._fundData&&vui.fund._fundData.tokenExpirationBalance||0},window.addListenerSupport(vui.fund),vui.user={},vui.user._initState={callbacks:[],initialized:!1},vui.user._userData=null,vui.user._listeners=[],vui.user.notifyOnInit=function(e){vui.user._initState.callbacks.push(e)},vui.user.isInitialized=function(){return vui.user._initState.initialized},vui.user._notifyInitialized=function(){if(vui.user._initState.initialized=!0,vui.user._initState.callbacks){for(var e=0;e<vui.user._initState.callbacks.length;e++){(0,vui.user._initState.callbacks[e])()}delete vui.user._initState.callbacks}},vui.user.refresh=function(s){if(vui.user._userData&&vui.user._userData.timeRefreshed+1e4>VUDU.vuduTime())s&&s(vui.m.queryStatus.ST_SUCCESS);else{if(vui.m.userId){var e={_type:"userSearch",deviceId:VUDU.registry.deviceId};return vui.getModel().doQuery(e,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS?(vui.user._userData=i&&vui._.aStr(i.user),vui.user._userData.timeRefreshed=VUDU.vuduTime(),vui.user._notifyListeners()):alert("ERROR WITH USERSEARCH","error"),s&&s(t)},{onTimeout:vui.getModel().QueryOptions.RETRY})}s()}},vui.user.init=function(t){return alert("vui.user.init begin"),vui.user.refresh(function(e){alert("vui.user.init done"),vui.user._notifyInitialized(),t(e)})},vui.user.getEmail=function(){return vui.user._userData&&vui.user._userData.email&&vui.user._userData.email[0]||""},vui.user.getFullName=function(){var e=vui.user._userData&&vui.user._userData.firstName&&vui.user._userData.firstName[0]?vui.user._userData.firstName[0].toUpperCase():"",t=vui.user._userData&&vui.user._userData.lastName&&vui.user._userData.lastName[0]?vui.user._userData.lastName[0].toUpperCase():"";return e&&t?e+" "+t:e||t?e||t:""},vui.user.getUserId=function(){return vui.user._userData&&vui.user._userData.userId&&vui.user._userData.userId[0]||""},vui.user.foundUser=function(){return!!vui.user._userData},addListenerSupport=function(i){i.listenCount=0,i._listeners={},i.addListener=function(e){var t=i.listenCount;return i.listenCount++,i._listeners[t]=e,t},i.removeListener=function(e){i._listeners[e]=null},i._notifyListeners=function(){for(var e in i._listeners){var t;!i._listeners.hasOwnProperty(e)||(t=i._listeners[e])&&t()}}},addListenerSupport(vui.user),vui.subscriptions={},vui.subscriptions._initState={callbacks:[],initialized:!1},vui.subscriptions._subscriptionsData=null,vui.subscriptions._listeners=[],vui.subscriptions.notifyOnInit=function(e){vui.subscriptions._initState.callbacks.push(e)},vui.subscriptions.isInitialized=function(){return vui.subscriptions._initState.initialized},vui.subscriptions._notifyInitialized=function(){if(vui.subscriptions._initState.initialized=!0,vui.subscriptions._initState.callbacks){for(var e=0;e<vui.subscriptions._initState.callbacks.length;e++){(0,vui.subscriptions._initState.callbacks[e])()}delete vui.subscriptions._initState.callbacks}},vui.subscriptions.refresh=function(s){if(!(vui.subscriptions._subscriptionsData&&vui.subscriptions._subscriptionsData.timeRefreshed+1e4>VUDU.vuduTime())){if(!vui.m.userId)return vui.subscriptions._subscriptionsData=null,void(s&&s());return vui.getModel().doQuery({_type:"subscriptionSearch",accountId:"11111",status:["active"]},function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS?(vui.subscriptions._subscriptionsData=i&&i.subscription,vui.subscriptions._notifyListeners()):alert("ERROR WITH subscriptionSearch","error"),s&&s(t)},{onTimeout:vui.getModel().QueryOptions.RETRY})}s&&s(vui.m.queryStatus.ST_SUCCESS)},vui.subscriptions.init=function(t){return vui.subscriptions.refresh(function(e){vui.subscriptions._notifyInitialized(),t(e)})},vui.subscriptions.getSubscriptions=function(){return vui.subscriptions._subscriptionsData},addListenerSupport=function(i){i.listenCount=0,i._listeners={},i.addListener=function(e){var t=i.listenCount;return i.listenCount++,i._listeners[t]=e,t},i.removeListener=function(e){i._listeners[e]=null},i._notifyListeners=function(){for(var e in i._listeners){var t;!i._listeners.hasOwnProperty(e)||(t=i._listeners[e])&&t()}}},addListenerSupport(vui.subscriptions),function(e){for(var t={},i="a".charCodeAt(0),s="z".charCodeAt(0);i<=s;i++)t[String.fromCharCode(i)]=!0;for(i="A".charCodeAt(0),s="Z".charCodeAt(0);i<=s;i++)t[String.fromCharCode(i)]=!0;for(i="0".charCodeAt(0),s="9".charCodeAt(0);i<=s;i++)t[String.fromCharCode(i)]=!0;t[" "]=!0,t["-"]=!0,t._=!0,t["."]=!0;function f(e){var t=encodeURIComponent(e);return t=(t=(t=t.replace(/\*/g,"%2a")).replace(/%20/g,"+")).replace(/%/g,"*")}var E=function(e){var t=e.note,i=e.prefix;null==i&&(i=""),0<e.buf.length&&"/"!=e.buf.charAt(e.buf.length-1)&&(e.buf+="/");var s,n,a=0==i.length?"":i+".",o=!1;if("_type"in(n=t)&&""!=n._type)e.buf+=a+"_type/"+f("_type"in(s=t)?s._type:""),o=!0;else if(function(e){for(var t in e)if("_type"!=t)return!1;return!0}(t)&&0<i.length)return void(e.buf+=a+"_type/*00");for(var r,l,u=function(e){var t=[];for(var i in e)"_type"!=i&&t.push(i);return t.sort()}(t),d=0,c=u.length;d<c;d++)for(var h,v,m,g=u[d],_=a+f(g),p=((l=g)in(r=t)&&void 0!==r[l]&&null!==r[l]?"string"==typeof r[l]||"number"==typeof r[l]?1:r[l].length:0),T=0;T<p;T++){"STRING"==function(e,t,i){if(!(t in e))throw t+" is not present";if("string"==typeof e[t])return"STRING";if(i<0||i>=e[t].length)throw t+" has no value at index "+i;return"object"==typeof e[t][i]?"NOTE":"STRING"}(t,g,T)?(o&&(e.buf+="/"),h=function(e,t,i){if(!(t in e))throw t+" is not present";var s=typeof e[t];if("string"==s||"number"==s)return e[t];if(i<0||i>=e[t].length)throw t+" has no value at index "+i;return"object"==s?e[t][i]:void 0}(t,g,T),h=(h=f(h)).length<=0?"*00":h,e.buf+=_+"/"+h):(v=_+"."+T,e.prefix=v,m=function(e,t,i){if(!(t in e))throw t+" is not present";if(i<0||i>=e[t].length)throw t+" has no value at index "+index;return e[t][i]}(t,g,T),e.note=m,E(e)),o=!0}};NoteUrlPath={toString:function(e){var t={note:e,prefix:"",buf:""};return E(t),t.buf}};var n={claimedAppId:1,contentEncoding:1,format:1,noCache:1,clientType:1,sessionKey:1,callback:1,includeTarget:1};NoteUrlPath.toStringGeneric=function(e){var t=JSON.parse(JSON.stringify(e));for(var i in e)e.hasOwnProperty(i)&&n[i]&&delete t[i];return vui.NoteUrlPath.toString(t)},e.vui||(e.vui={}),e.vui.NoteUrlPath=NoteUrlPath}("undefined"==typeof window?this:window),vui.ByteArray=function(e){this._length=e,this._pos=0;var t=new ArrayBuffer(e);this._data=t,this._view=new DataView(t)},vui.ByteArray.prototype.length=function(){return this._pos},vui.ByteArray.prototype.maxLength=function(){return this._length},vui.ByteArray.prototype.writeByte=function(e){this._view.setUint8(this._pos,e),this._pos++},vui.ByteArray.prototype.writeShort=function(e){this._view.setUint16(this._pos,e,!0),this._pos+=2},vui.ByteArray.prototype.writeInt=function(e){this._view.setUint32(this._pos,e,!0),this._pos+=4},vui.ByteArray.prototype.writeBytes=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),0===i&&(i=e._pos);for(var s=new DataView(e._data),n=t;n<t+i;n++)this._view.setUint8(this._pos++,s.getUint8(n))},vui.ByteArray.prototype.writeUTFBytes=function(e){if(null!=e)for(var t=new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)})),i=0;i<t.length;i++)this._view.setUint8(this._pos++,t[i])},vui.ByteArray.prototype.compress=function(){var e=new Uint8Array(this._data,0,this._pos),t=pako.deflate(e);this._data=t.buffer,this._pos=t.length,this._view=new DataView(this._data)},vui.ByteArray.prototype.asString=function(){for(var e="",t=new Uint8Array(this._data,0,this._pos),i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},vui.Packer=new Class({packEnum:function(e,t){t.writeByte(e<<1)},packI8:function(e,t){t.writeByte(e)},packI16:function(e,t){t.writeShort(e)},packI32:function(e,t){t.writeInt(e)},packI64:function(e,t){var i=Math.floor(e/Math.pow(2,32)),s=0|e;t.writeInt(s),t.writeInt(i)},packString:function(e,t){t.writeShort(e.length),t.writeUTFBytes(e)},packByteArray:function(e,t){t.writeShort(e.length()),t.writeBytes(e,0,e.length())},packI16Array:function(e,t){for(var i=0;i<e.length;i++)t.writeShort(e[i])},packI32Array:function(e,t){for(var i=0;i<e.length;i++)t.writeInt(e[i])},packLogUnit:function(e){var t=8+e.mContent.length()+4,i=new vui.ByteArray(t);return this.packEnum(e.mType,i),this.packI32(e.mTime,i),this.packByteArray(e.mContent,i),i},packLogChunk:function(e){e.mContent.compress();var t=4+e.mContent.length()+4,i=new vui.ByteArray(t);return this.packEnum(1,i),this.packByteArray(e.mContent,i),i}}),vui.netLogger={mLogs:new vui.ByteArray(65536),mUnitCount:0,packer:new vui.Packer,MAX_LOGS_SIZE:49151,logType:{STRING:1,AGG_STAT:6},flushing:!1},vui.netLogger.addLogString=function(e,t){var i,s,n,a={error:0,warn:1,log:2,notice:2,info:3,debug:4},o=void 0!==a[t]?a[t]:3;o>{0:2,1:3,2:4}[vui.debugLevel]||(s=6+(i={mLogSource:"chromecast"===vui.vvPlatform.clientType?"chromecastMPL":vui.vvPlatform.clientType,mLogPriority:o,mTid:0,mLogString:e}).mLogSource.length+4+i.mLogString.length+4,n=new vui.ByteArray(s),this.packer.packString(i.mLogSource,n),this.packer.packI8(i.mLogPriority,n),this.packer.packI32(i.mTid,n),this.packer.packString(i.mLogString,n),this.addLog(this.logType.STRING,n))},vui.netLogger.addAggStatLog=function(e){var t=200+e.clientData.length+e.movieUrl.length+4,i=new vui.ByteArray(t);this.packer.packI64(e.sessionId,i),this.packer.packI32(e.editionId,i),this.packer.packString(e.clientData,i),this.packer.packString(e.movieUrl,i),this.packer.packI32(e.startTimeSec,i),this.packer.packI32(e.endTimeSec,i),this.packer.packI16(e.startingChunkNum,i),this.packer.packI16(e.endingChunkNum,i),this.packer.packI8(e.levels,i),this.packer.packI16Array(e.bitrates,i),this.packer.packI32Array(e.milliSecsPerRate,i),this.packer.packI32Array(e.downloadMilliSecsPerRate,i),this.packer.packI32Array(e.wordsPerRate,i),this.packer.packI16(e.numRetries,i),this.packer.packI16(e.numUnderruns,i),this.packer.packI32(e.lowBufLevelCount,i),this.addLog(this.logType.AGG_STAT,i),this.flushLogs()},vui.netLogger.addLog=function(e,t){var i,s;vui.m.userId&&((i={}).mType=e,i.mTime=VUDU.vuduTime()/1e3,i.mContent=t,s=this.packer.packLogUnit(i),this.mLogs.length()+s.length()>this.MAX_LOGS_SIZE&&this.flushLogs(),this.mLogs.writeBytes(s),this.mUnitCount++)},vui.netLogger.flushLogs=function(){var e,t;0!==this.mLogs.length()&&vui.m.userId&&((e={}).mContent=this.mLogs,lcBytes=this.packer.packLogChunk(e),t=btoa(lcBytes.asString()),this.mLogs=new vui.ByteArray(65536),this.mUnitCount=0,vui.m.directorCsClient&&!this.flushing&&(this.flushing=!0,vui.m.directorCsClient.sendNetLogs(t),this.flushing=!1))},window.vuduQueryId=0,vui.Model=new Class({doFetchHTTP:!0,movieInfoCacheMaxCount:25,tvGenrelist:null,movieGenrelist:null,tvSubGenreList:{},movieSubGenreList:{},zToken:null,initialize:function(){var e;this.network=window.getCookie("network")||"production",vui.args.network&&(this.network=vui.args.network),"hygiea"!==vui.vvPlatform.id&&"sol"!==vui.vvPlatform.id||window.getCookie("network")||(-1<(e=window.location.hostname).indexOf("dev.marquee.net")||-1<e.indexOf("wmv-dev.walmart.com")?this.network="dev":(-1<e.indexOf("qa.marquee.net")||-1<e.indexOf("wmv-qa.walmart.com"))&&(this.network="qa"));var t,i=window.location.search;"sol"===vui.vvPlatform.id&&(-1<i.indexOf("env=qa")?this.network="qa":-1<i.indexOf("env=dev")&&(this.network="dev")),"mex"==vui.USER_COUNTRY&&(this.network="mex"),t="mex"===this.network?"api.vudu.mx/api2/":"production"===this.network?"api.vudu.com/api2/":"qa"===this.network?vui.args.haosunProxy?"mockapi.devmlp.marquee.net/api2/":"api.qa.marquee.net/api2/":"pre-production"===this.network?"api.preprod.vudu.com/api2/":"api.dev.marquee.net/api2/",this.secureBaseUrl="https://"+t,this.avodManager=new vui.AvodManager(this,"dash"),this.ownedMovieCache={},this.clearMovieCaches(),this.nextQueryId=137,this.vuduToJsQueryMap={},this.jsToVuduQueryMap={},this.retryQueryPool={},this.QueryOptions={RETRY:1,FAIL:2,FAIL_AND_UPDATE_GLOBAL_STATE:3,FAIL_TRY_NEXT:4},this.queryStatus={ST_TIMEOUT:1,ST_SUCCESS:2,ST_NOT_CONNECTED:3,ST_GENERIC_ERROR:4,ST_CANCELLED:5},this.directorCsClient=null,this.queryStatusCallback=function(e){alert("queryStatusCallback not registered. status = "+e)},this.supportEmail=vui.vvPlatform.appFeatureEnabled()?"support@video.walmart.com":"support@vudu.com",this.supportPhone=vui.vvPlatform.appFeatureEnabled()?"844-4-WMT-VID":"1-888-554-VUDU",this.supportUrl=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/support":"http://support.vudu.com",this.vuduUrl=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com":"www.vudu.com",this.myVuduUrl="http://my.vudu.com",this.vuduDifferenceUrl="http://www.vudu.com",this.signUpSuccessMessage="We have created a Vudu account for you.",this.parentalControls=new vui.ParentalControlsModel,this.preferences=new vui.preferences(this),this.kidsModeCache=new vui.KidsModeCache(this),this.ratedMovieCache=new vui.RatedMovieCache(this),this.wishedMovieCache=new vui.WishedMovieCache(this),this.conditionalOfferCache=new vui.ConditionalOfferCache(this),this.preOrderedMovieCache=new vui.PreOrderedMovieCache(this),this.bookmarkCache=new vui.BookmarkCache(this),this.recommendedCache=new vui.RecommendedCache(this),this.featuredCache=new vui.FeaturedCache(this),this.personalizedCache=new vui.PersonalizedCache(this),this.uiPageCache=new vui.UiPageCache(this),this.uiEntryRibbonCache=new vui.UiEntryRibbonCache(this),this.dataChangedHandler=new vui.DataChangedHandler,this.deviceOperateHandler=new vui.DeviceOperateHandler,this.automationHandler=new vui.AutomationHandler,this.registerDataChangedHandlers(),this.registerDeviceOperateHandlers(),this.registerAutomationHandlers(),"chromecast"!==vui.vvPlatform.clientType&&(this.myCollectionsModel=new vui.myCollectionsModel(this),this.setSessionFromCookie()),this.userSessionStore=new vui.UserSessionStore},setSessionFromCookie:function(){var e=getCookie("sessionKey");e&&(this.sessionKey=e);var t=getCookie("userId");t&&(this.userId=t);var i=getCookie("lightDeviceId");i&&(this.lightDeviceId=i),this.userId&&this.sessionKey&&this.createCsConnection()},createCsConnection:function(){this.directorCsClient&&this.directorCsClient.close(),this.directorCsClient=new vui.DirectorCsClient(this,function(e){var t=this.onCsNotificationArrived(e);t&&this.directorCsClient.sendCsNotificationResponse(e,t)}.bind(this),function(e){this.onCsConnectionError(e)}.bind(this),this.directorCsClient)},closeCsConnection:function(){null!==this.directorCsClient&&(this.directorCsClient.close(),this.directorCsClient=null)},onCsConnectionError:function(e){if(this.closeCsConnection(),e==vui.DirectorCsClient.ERRORS.LOGIN_ERROR||e==vui.DirectorCsClient.ERRORS.KICKSTART_ERROR)this.logout(),vui.account.refresh(function(){controller.refreshCurrentPage()}),controller.goHome();else{var t=vui.getPlayer();if(t&&t.pause(),window.vuduSplashScreenIsShowing)return;updateVuduSplashScreen("splash","Network Connection Lost",vui.strings.getText("SPLASH_CHECK_CONNECTION_RETRY"),"","",function(){updateVuduSplashScreen("splash",vui.strings.transformCase("Restoring secure network connection",!0),vui.strings.transformCase("Please wait",!0),"",""),vui.m.loadUser(function(){updateVuduSplashScreen("none"),controller.refreshCurrentPage()})})}},onCsNotificationArrived:function(e){var t;return"dataChanged"==e._type?this.dataChangedHandler._notifyHandlers(e):"playbackStarted"==e._type?this.onPlaybackStartedNotification(e):"clientMessageSend"==e._type&&(t=this.automationHandler._notifyHandlers(e)),t},onPlaybackStartedNotification:function(e){controller.baseLayer.currentPage&&"Theater"==controller.baseLayer.currentTemplate&&controller.baseLayer.currentPage.onPlaybackStartedOtherDeviceNotification(e)},registerQueryStatusCallback:function(e){alert("Model::registerQueryStatusCallback: registering callback"),this.queryStatusCallback=e},doCacheableInit:function(e){var t=[],i=function(e){this.initCollections(e)}.bind(this);t.push(i),window.requireCallbacks(function(){e(!0)},t)},setZToken:function(e){this.zToken=e},getUxRowSearch:function(e,t,s){var i={_type:"uxRowSearch",count:10,elementCount:30,offset:t,pageId:e,zToken:this.zToken};this.doQuery(i,function(e,t,i){s(i)}.bind(this))},getUxPage:function(e,s){var t={_type:"uxPageGet",elementCount:30,pageId:e,rowCount:10,zToken:this.zToken};this.doQuery(t,function(e,t,i){s(i)}.bind(this))},getUxCollection:function(e,s){var t={_type:"uxRowGet",uxRowId:e};this.doQuery(t,function(e,t,i){s(i)}.bind(this))},contentSuggestionGet:function(s,n){var e;null==this.lastContentSuggestionResultKey||null==this.lastContentSuggestionResult||this.lastContentSuggestionResultKey!==s?(e={_type:"contentSuggestionGet",phrase:s,vodType:["tvod","avod"]},vui.gConnectionInstance.getThirdPartyEnabled()&&e.vodType.push("svod"),this.doQuery(e,function(e,t,i){this.lastContentSuggestionResultKey=s,this.lastContentSuggestionResult=i,n(i)}.bind(this))):n(this.lastContentSuggestionResult)},getUxRowListKey:function(e){var t=e.uxRowId,i=e.filters;if(i)for(var s in i)i.hasOwnProperty(s)&&(t+=s+i[s]);return t},getUxRowList:function(e){var t=e.callback,i=this.getUxRowListKey(e),s=this.rowListCache;if((n=s.check(i))&&"FAILED"==n.queryState&&(s.drop(i),n=null),n){if(vui._.isIndex(e.currentStart)&&vui._.isIndex(n.availStart)&&e.currentStart>=n.availStart)return alert("FOUND IN CACHE: params.currentStart "+e.currentStart+" l.availStart "+n.availStart),n.availEnd,t(n),n;alert("Drop cache because of data window frame doesnt match: params.currentStart "+e.currentStart+" l.availStart "+n.availStart),n.availEnd,s.drop(i),n=null}var n=new vui.DynamicUxRowList(e,t);return s.add(i,n),n},getFeaturedSubTabs:function(s){var e={_type:"uiEntrySearch",uiEntryType:"pivot",sortBy:"featuredScore",count:50};e.clientType=vui.vvPlatform.clientType,this.doQuery(e,function(e,t,i){if(t===this.queryStatus.ST_SUCCESS)try{0<i.uiEntry.length?s(i.uiEntry):(s(null),alert("ERROR: feture uiEntrySearch"))}catch(e){}else s(null),alert("ERROR: feture")}.bind(this),{onTimeout:this.QueryOptions.RETRY})},getFeatured:function(e,s){var t={_type:"uiPageSearch"};t.uiPageId=e,this.doQuery(t,function(e,t,i){if(t===this.queryStatus.ST_SUCCESS)try{return void s(i.uiPage[0])}catch(e){}else alert("ERROR: feture")}.bind(this),{onTimeout:this.QueryOptions.RETRY})},geneGenreSearch:function(s,n){var e={_type:"geneGenreSearch",count:100};if("tvOnly"==s){if(this.tvGenreList&&0<this.tvGenreList.length)return void n(this.tvGenreList);e.allowedContentType=["moviesAndTv","tv"]}else{if(this.movieGenreList&&0<this.movieGenreList.length)return void n(this.movieGenreList);e.allowedContentType=["moviesAndTv","movies"]}this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?("tvOnly"==s?this.tvGenreList=i.geneGenre:this.movieGenreList=i.geneGenre,n&&n(i.geneGenre)):(n&&n(!1),alert("ERROR: genreList no data!"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},geneSubGenreSearch:function(s,n,a){var e={_type:"geneSubGenreSearch",count:100};e.geneGenreId=n,e.allowedContentType="tvOnly"==s?["moviesAndTv","tv"]:["moviesAndTv","movies"],this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS&&i.geneSubGenre&&0<i.geneSubGenre.length?("tvOnly"==s?this.tvSubGenreList[n]=i.geneSubGenre:this.movieSubGenreList[n]=i.geneSubGenre,a(i.geneSubGenre)):(a(!1),alert("ERROR: subGenreList no data!"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},getRecommended:function(s){var e={_type:"recommendedTasteContentsGet"};e.userId=this.userId,e.limit=50,this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?s(i):(s(null),alert("ERROR: recommendedGeneByGenresfailed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},recommendedGeneByGenres:function(){var e={_type:"recommendationCategoryGeneGet",category:"genres",count:100};this.doQuery(e,function(e,t,i){t==this.queryStatus.ST_SUCCESS||alert("ERROR: recommendedGeneByGenresfailed")}.bind(this),{onTimeout:this.QueryOptions.RETRY})},getAnnouncement:function(s){var e={_type:"uiEntrySearch",uiEntryType:"announcement",count:5,sortBy:"featuredScore"};e.clientType=vui.vvPlatform.clientType,this.doQuery(e,function(e,t,i){if(t===this.queryStatus.ST_SUCCESS)try{i.uiEntry&&i.uiEntry[0]&&(this.announcementSrc=vui.addDashSuffixToFileName(vui._.aStr(i.uiEntry[0].placardUrl),vui.ResDef.explore.MP_ANNOUNCEMENT_W))}catch(e){}s(!0)}.bind(this),{onTimeout:this.QueryOptions.RETRY})},urlInfoGet:function(s){var e={_type:"urlInfoGet",getMultiUrls:"true"};this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?(vui.gConnectionInstance.getHTTPSSetting()<1?this.directorCacheUrlArray=i.cachingUrl:this.directorCacheUrlArray=i.secureCachingUrl,this.directorCacheUrl=this.directorCacheUrlArray[0],vui.account.isInMQC()&&(this.directorCacheUrl="https://api.mqc.vudu.com/api2/"),this.currentCacheUrlIndex=0,this.doCacheableInit(s)):(s(!1),alert("ERROR: INFO GET urls get failed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},mediaUrlsGet:function(s){var e={_type:"mediaUrlsGet",isSecure:"true"};vui.gConnectionInstance.getHTTPSSetting()<2&&(e.isSecure="false"),e.getMultiUrls="true",this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?(this.mediaUrlsResult=i,this.baseUrlArray=i.baseMediaUrl,this.currentCDNIndex=0,this.CDNRetryCount=0,vui.getModel().generateMediaUrls(),vui.getModel().isAlivePosterBaseUrl(),s(!0)):(alert("ERROR: Media urls get failed"),s(!1))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},loadPCSettings:function(n){alert("in loadPCSettings");var e=this.parentalControls.getParams(),t=function(e,t,i){alert("init result: "+JSON.encode(i));var s=!0;t===this.queryStatus.ST_SUCCESS?i?(i?(i=this.parentalControls.getCallback(e,t,i))||alert("Failed to parse parental controls response?"):(alert("Didn't seem to get anything for parental controls query+."),s=!1),s?(alert("All queries succeeded."),n(0)):(alert("Not all queries succeeded!"),n(1))):(alert("Setting sequence query got unexpected result!"),n(1)):(alert("Setting sequence query failed!"),n(1))}.bind(this);e?this.doQuery(e,t):n(1)},onFoundUserId:function(e,t){var i,s;vui.vvPlatform.baseApp||(this.userId=e,vui.myOffers.setAccountId(e),this.ratedMovieCache=new vui.RatedMovieCache(this),this.wishedMovieCache=new vui.WishedMovieCache(this),this.preOrderedMovieCache=new vui.PreOrderedMovieCache(this),this.bookmarkCache=new vui.BookmarkCache(this,this.bookmarkCache),this.recommendedCache=new vui.RecommendedCache(this),this.myCollectionsModel=new vui.myCollectionsModel(this),this.myCollectionsModel&&this.myCollectionsModel.loadTipState(),i=function(){this.recommendedCache.preFetch(),t&&t(e),this.notifyActivationListeners(e)}.bind(this),vui.Model.PopulateOwnedMovieCache(i),vui.user.refresh(),vui.gConnectionInstance.getThirdPartyEnabled()&&vui.subscriptions.refresh(),vui.fund.init(),s={callback:function(){vui.m.kidsModeCache.load()}},vui.familyModel.init(s),vui.gConnectionInstance.isClearplayEnabled()&&!vui.clearPlaySettings&&(vui.clearPlaySettings=new vui.ClearPlaySettings),vui.gConnectionInstance.getFamilyPlayCalloutAnimationEnabled()&&(this.familyPlayCalloutAnimation=new vui.FamilyPlayCalloutAnimation,this.familyPlayCalloutAnimation.load()))},onFirstFoundUserId:function(e,t){var i;vui.vvPlatform.baseApp||(this.bookmarkCache=new vui.BookmarkCache(this),i=function(){t&&t(e),this.notifyActivationListeners(e)}.bind(this),vui.Model.PopulateOwnedMovieCache(i),vui.myOffers.setAccountId(e),vui.myOffers.refresh())},activationListenerCount:1,activationListeners:{},addActivationListener:function(e){alert("Registering activation listener");var t=this.activationListenerCount;return this.activationListeners[t]=e,this.activationListenerCount=t+1,this.userIdPollTimer||this.userId||this.pollForUserId(),t},removeActivationListener:function(e){alert("Unregistering activation listener"),delete this.activationListeners[e]},notifyActivationListeners:function(e){for(var t in alert("Notifying listeners that we are activated"),this.activationListeners){alert("FOUND A LISTENER AT:"+t);var i=this.activationListeners[t];i.onActivationComplete?i.onActivationComplete(e):alert("ERROR: This listener did not have the function we expected (onActivationComplete)")}},ACTIVATION_POLL_TIMER:15e3,pollForUserId:function(n){var e=function(e,t,i){var s;delete this.userIdPollTimer,t===this.queryStatus.ST_SUCCESS?(alert("POLL RESULTS:"+JSON.encode(i)),i&&i.user&&0<i.user.length?(s=i.user[0].userId[0],alert("Found a userId for this device: "+s),this.onFirstFoundUserId(s,n)):(alert("Didn't find a userId; box isn't activated yet."),this.userIdPollTimer=setTimeout(a,this.ACTIVATION_POLL_TIMER))):t===this.queryStatus.ST_CANCELLED?alert("pollForUserId CANCELLED"):(alert("Error status "+t+" for userSearch query"),this.userIdPollTimer=setTimeout(a,this.ACTIVATION_POLL_TIMER))}.bind(this),a=function(){this.doQuery({_type:"userSearch",deviceId:VUDU.registry.deviceId},e)}.bind(this);this.userIdPollTimer&&(clearTimeout(this.userIdPollTimer),delete this.userIdPollTimer),this.userIdPollTimer=setTimeout(a,this.ACTIVATION_POLL_TIMER)},initUserId:function(i){if(!this.userId)return alert("skip query userSearch"),void i(-1);vui.user.refresh(function(e){var t;e===this.queryStatus.ST_SUCCESS&&(vui.user.foundUser()?(t=vui.user.getUserId(),alert("initUserId: GOT USER: "+t),this.onFoundUserId(t),i(1)):(alert("initUserId: DID NOT GET USER"),this.initDeviceEmail(function(){alert("in callback assigned to initDeviceEmail, from initUserId"),i(0)})))}.bind(this))},loadUser:function(s){alert("in loadUser");var e=function(){var e=function(e){alert("in initUserId callback"),1==e?alert("initUserId return 1, a user"):0==e?alert("initUserId return 0, no user"):alert("initUserId return -1, error!");var t=[],i=function(e){this.loadPCSettings(e)}.bind(this);t.push(i),i=function(e){this.preferences.load(e)}.bind(this),t.push(i),t.push(vui.fund.init),t.push(vui.user.init),vui.gConnectionInstance.getThirdPartyEnabled()&&t.push(vui.subscriptions.init),window.requireCallbacks(s,t)}.bind(this);this.initUserId(e)}.bind(this);this.userId?this.openCsConnection(function(){vui.account.init(e)}):vui.account.init(e)},initCollections:function(t){var e;vui.vvPlatform.baseApp?t():(e=function(e){1==e&&(this.ListQueries["FEATURED TITLES DETAILED"].query.collectionId=this.collections.filmstripId,delete this.ListQueries["NOW AVAILABLE ON VUDU DETAILED"].query.listType,delete this.ListQueries["NOW AVAILABLE ON VUDU DETAILED"].query.featured,this.ListQueries["NOW AVAILABLE ON VUDU DETAILED"].query.collectionId=this.collections.newReleasesId),t(e)}.bind(this),this.collections=new vui.Collections(e),this.xofycollections=new vui.Xofycollections)},fetchAppData:function(n){this.doQuery({_type:"appDataSearch",applicationId:"movie_ui",name:"keys"},function(e,t,i){var s;t===this.queryStatus.ST_SUCCESS?i.appData&&i.appData[0]&&i.appData[0].value&&i.appData[0].value[0]?(s=i.appData[0].value[0],alert("GOT APP DATA:"+JSON.encode(s)),this.supportEmail=null!=s.supportEmail?s.supportEmail[0]:"",this.supportPhone=null!=s.supportPhone?s.supportPhone[0]:"",this.supportUrl=null!=s.supportUrl?s.supportUrl[0]:"",this.vuduUrl=null!=s.vuduUrl?s.vuduUrl[0]:"",this.myVuduUrl=null!=s.myVuduUrl?s.myVuduUrl[0]:"",this.vuduDifferenceUrl=null!=s.vuduDifferenceUrl?s.vuduDifferenceUrl[0]:"",this.signUpSuccessMessage=null!=s.signInSuccess?s.signInSuccess[0]:"",n(!0)):(alert("No App data saved"),n(!1)):(alert("ERROR: App data fetch failed"),n(!1))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},accountRefresh:function(s){var e={_type:"accountRefresh",accountId:vui.account.getAccountId()};this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?alert("SUCCESS: got response from accountRefresh:"+JSON.encode(i.info)):alert("ERROR: failed to invoke account refresh operation"),s&&s()}.bind(this))},preload:function(i){var e=function(){var e=[];window.isDeepLinking&&vui.account.getAccountId()&&(t=function(e){vui.Model.PopulateOwnedMovieCache(e)},e.push(t));var t=function(e){this.urlInfoGet(e)}.bind(this);e.push(t);t=function(e){this.mediaUrlsGet(e)}.bind(this);e.push(t),vui.vvPlatform.baseApp||(t=function(e){this.getAnnouncement(e)}.bind(this),e.push(t),t=function(e){vui.promo.init(e)}.bind(this),e.push(t),t=function(e){vui.puser.init(e)}.bind(this),e.push(t),t=function(e){vuiFilters.init(e)}.bind(this)),e.push(t),window.requireCallbacks(i,e)}.bind(this),t=function(){vui.account.getAccountId()?(alert("HAS ACCOUNT ID, do required functions.."),vui.getPlayer().registerPlaybackSession(),this.accountRefresh(e)):(alert("NO ACCOUNT ID, don't execute account related functions.."),e())}.bind(this);this.loadUser(t)},clearMovieCaches:function(){this.MovieListCache=LRUObjectCache.create({maxCount:20,expirationPeriod:3600}),this.MovieInfoCache=LRUObjectCache.create({maxCount:this.movieInfoCacheMaxCount,expirationPeriod:3600}),this.MyListCache=LRUObjectCache.create({maxCount:6}),this.EntryInfoCache=LRUObjectCache.create({maxCount:10,expirationPeriod:3600}),this.PersonInfoCache=LRUObjectCache.create({maxCount:6,expirationPeriod:3600}),this.rowListCache=LRUObjectCache.create({maxCount:6,expirationPeriod:3600})},MyLists:{"MY RENTALS":!0,"MY MOVIES":!0,"ALL MY MOVIES":!0,"ALL MY MOVIES DETAILED":!0,"MY WISH LIST":!0,"MY TV SHOWS":!0,"MY PREORDER LIST":!0,"MY COLLECTION CONTENTS":!0},getMoviesByListName:function(e){alert("GET MOVIES BY LIST NAME");var t=e.name,i=e.callback,s=vui.Model.makeListKey(t,e),n=this.MyLists[t]?this.MyListCache:this.MovieListCache;if((m=n.check(s))&&"FAILED"==m.queryState&&(n.drop(s),m=null),m){var a=e.numVisible||10;if(vui._.isIndex(e.currentStart)&&vui._.isIndex(m.availStart)&&e.currentStart>=m.availStart&&a<=m.availEnd)return alert("FOUND IN CACHE: params.currentStart "+e.currentStart+" l.availStart "+m.availStart),m.availEnd,i(m),m;alert("Drop cache because of data window frame doesnt match: params.currentStart "+e.currentStart+" l.availStart "+m.availStart),m.availEnd,n.drop(s),m=null}var o=t.match(/^COLLECTIONSHORT:(.+)$/);if(o){d=o[1];if(!(u=this.collections.getCollectionByTitle(d)))return new vui.EmptyMovieList(v,i);var r={callback:i,collectionId:u.collectionId,maxResults:8,name:t},l=this.getCollectionList(r);return this.MovieListCache.add(s,l),l}if(o=null,o=t.match(/^COLLECTION:(.+)$/)){var u,d=o[1];if(!(u=this.collections.getCollectionByTitle(d)))return new vui.EmptyMovieList(v,i);r={callback:i,collectionId:u.collectionId,filters:e.filters,name:t},l=this.getCollectionList(r);return this.MovieListCache.add(s,l),l}"FEATURED TITLES DETAILED"==t&&1==vui.gConnectionInstance.getDisplayUIEntriesForTopPicks()&&(t="FEATURED TITLES UIENTRY");var c=this.ListQueries[t];if(alert("GETTING LIST BY NAME:"+t),!c)return alert("Error: no getMovieList params"),new vui.EmptyMovieList;var h,v=vui.deepCopy(c);if("MY WISH LIST"==t&&vui.gConnectionInstance.getThirdPartyEnabled()&&v.query.followup.push("subscriptionServiceContents"),v.name=s,v.queryService=this,v.filters=vui.deepCopy(e.filters),this.avodManager.addAvodEnabledFollowup(v.query),v.requiresDeviceId){if(!this.userId)return new vui.EmptyMovieList(v,i);v.query.userId=this.userId}else{v.requiresClientType&&(h=vui.vvPlatform.uiSearchClientType||vui.vvPlatform.clientType+(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll()?".4K":""),v.query.clientType=h)}if(v.requiresUserId){if(!this.userId)return new vui.EmptyMovieList(v,i);v.query.userId=this.userId}if(v.requiresAccountId){if(!vui.account.getAccountId())return new vui.EmptyMovieList(v,i);v.query.accountId=vui.account.getAccountId()}(e.maxResults||v.maxResults)&&(v.query.count=e.maxResults||v.maxResults),0<e.currentStart&&(v.startAt=e.currentStart);var m=new vui.DynamicMovieList(v,i);return n.add(s,m),m},getMovieList:function(e){var t={_type:"contentSearch",type:["program","episode","season","bundle","bonus"],followup:["totalCount","uxPromoTags"]};for(var i in e.searchParams)t[i]=e.searchParams[i];"uiEntrySearch"==t._type&&(delete t.type,t.followup=["totalCount"],t.clientType=vui.vvPlatform.clientType),this.avodManager.addAvodEnabledFollowup(t);var s={queryService:this,query:t,filters:e.filters,name:e.name};return t.count&&(s.maxResults=parseInt(t.count[0],10)),"uiEntrySearch"==t._type&&(s.listElement="uiEntry"),e.searchParams.sortBy?s.defaultFilters={sortBy:e.searchParams.sortBy}:e.searchParams.collectionId?(s.defaultFilters={sortBy:"editorPicks"},s.query.type=["program","series","season","bonus","bundle","episode"]):"uiEntrySearch"==e.searchParams._type?s.defaultFilters={sortBy:"featuredScore"}:s.defaultFilters={sortBy:"-watchedScore"},e.maxResults&&0<e.maxResults&&(s.maxResults=e.maxResults),e.startAt&&(s.startAt=e.startAt),e.batchSize&&(s.batchSize=e.batchSize),new vui.DynamicMovieList(s,e.callback)},getCollectionList:function(e){alert("getCollectionList, id:"+e.collectionId);var t=e.callback,i={queryService:this,query:{_type:"contentSearch",collectionId:e.collectionId,responseSubset:"micro",type:["program","season","series","episode","bundle","bonus"],followup:["totalCount","uxPromoTags"]},filters:e.filters,defaultFilters:{sortBy:"editorPicks"},maxResults:e.maxResults};return e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},getTopSearchResults:function(e){alert("getTopSearchResults, term:"+e.term);var t=e.callback,i={queryService:this,query:{_type:"contentSearch",listType:"topSearchResults",includeComingSoon:"true",followup:["totalCount","uxPromoTags"],type:["program","episode","season","series","bundle","bonus"]},filters:e.filters};return e.maxResults&&(i.maxResults=e.maxResults),e.currentStart&&(i.startAt=e.currentStart),this.avodManager.addAvodEnabledFollowup(i.query),new vui.DynamicMovieList(i,t)},getKidsModeList:function(e){var t={_type:"contentSearch",responseSubset:"micro",deviceId:VUDU.registry.deviceId,followup:["totalCount","hasBackgroundImage"]},i=e.query;for(var s in i)t[s]=i[s];t.followup&&!t.followup.contains("totalCount")&&t.followup.push("totalCount"),vui.familyModel&&vui.familyModel.getAgeLimit&&(t.ageGroup=vui._.aStr(vui.familyModel.getAgeLimit()));var n={};return n.searchParams=t,e.callback&&(n.callback=e.callback),e.name&&(n.name=e.name),e.currentStart&&(n.startAt=e.currentStart),this.getMovieList(n)},getMyCollections:function(e){alert("getMyCollections for:"+e.name);var t=e.callback,i={queryService:this,query:{_type:"userCollectionContentsGet",userId:vui.account.getAccountId(),userCollectionId:e.userCollectionId}};return e&&e.sortOrder&&(i.query.sortOrder=e.sortOrder),new vui.DynamicMovieList(i,t)},getSuggestedSearchResults:function(e){alert("getSuggestedSearchResults, term:"+e.term);var t=e.callback,i={queryService:this,query:{_type:"mediaObjectSearch",phrase:e.term}};return e.maxResults&&(i.maxResults=e.maxResults),e.currentStart&&(i.startAt=e.currentStart),i.listElement="mediaObject",new vui.DynamicMovieList(i,t)},getMoviesBySearch:function(e){alert("getMoviesBySearch, term:"+e.term);var t=e.callback,i=e.term,s=vui.account.isInMQC()?{queryService:this,query:{_type:"contentSearch",includeComingSoon:"true",includePreOrders:"true",titleMagic:i,followup:["totalCount","uxPromoTags"],type:["program","episode","season","series","bundle","bonus"]}}:{queryService:this,query:{_type:"contentMetaSearch",phrase:i,followup:["totalCount"],includePreOrders:"true"}};return e.maxResults&&(s.maxResults=e.maxResults),e.currentStart&&(s.startAt=e.currentStart),new vui.DynamicMovieList(s,t)},getSeriesSeasons:function(e){if(e.seriesId){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",seriesId:e.seriesId,listType:"useful",includeComingSoon:"true",sortBy:"-seasonNumber",followup:["totalCount","uxPromoTags"],type:["season"]},startAt:e.currentStart,defaultFilters:{sortBy:"-seasonNumber"}};return new vui.DynamicMovieList(i,t)}},getSeasonEpisodes:function(e){if(e.seasonId){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",seasonId:e.seasonId,listType:e.listType||"useful",followup:["totalCount","ratingsSummaries","streamableOffers","uxPromoTags"],sortBy:"episodeNumberInSeason",type:["episode"]},defaultFilters:{sortBy:"episodeNumberInSeason"}};return e.listType&&"rentedOrOwned"===e.listType&&(i.query.userId=vui.account.getAccountId()),e.currentStart&&(i.startAt=e.currentStart),e.isAdvertEnabled&&(i.query.isAdvertEnabled="true"),new vui.DynamicMovieList(i,t)}},getGenres:function(e){var t={queryService:this,listElement:"genre",query:{_type:"genreSearch"},maxResults:50};return new vui.DynamicList(t,e)},getStudios:function(e){var t={queryService:this,listElement:"studio",query:{_type:"studioSearch",isFeatured:"true"},maxResults:50};return new vui.DynamicList(t,e)},getChannels:function(e){var t=e.callback,i={queryService:this,listElement:"uiEntry",query:{_type:"uiEntrySearch",uiEntryType:"tvChannels",followup:["totalCount"],sortBy:"featuredScore"},defaultFilters:{sortBy:"featuredScore"}};return e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicList(i,t)},getChannelSeasons:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",distributionStudioId:e.distributionStudioId,type:["series","bundle"],superType:"tv",followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-releaseTime"}};return e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},destroy:function(e){!e.name||e!=this.MovieListCache.check(e.name,!0)&&e!=this.MyListCache.check(e.name,!0)?e.destroy&&e.destroy():e.cleanup()},getMoviesByGenre:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",genreId:e.genreId,responseSubset:"micro",type:["program","bundle"],followup:["totalCount"],sortBy:e.sortBy||"-watchedScore"},defaultFilters:{sortBy:"-watchedScore"},filters:e.filters};return e.maxResults&&(i.maxResults=e.maxResults),e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},getFilmography:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",responseSubset:"micro",creditPersonId:e.personId,type:["program","episode","season","series","bundle"],groupBy:"series",includeComingSoon:"true",includePreOrders:"true",followup:["totalCount","uxPromoTags","episodeNumberInSeason","seasonNumber"]},defaultFilters:{sortBy:"-releaseTime"}};return e.filters&&(i.filters=e.filters),e.currentStart&&(i.startAt=e.currentStart),this.avodManager.addAvodEnabledFollowup(i.query),new vui.DynamicMovieList(i,t)},getGeneCollection:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",responseSubset:"micro",geneId:e.geneId,type:["program","season","bundle"],includeComingSoon:"true",followup:["seasonNumber","seasonId","totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-releaseTime"}};return e.filters&&(i.filters=e.filters),e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},getDiscoveryInfo:function(s,e){var t={_type:"contentDiscoverRequest",count:6};return e&&0<e.length&&(t.geneId=e),vui.getModel().doQuery(t,function(e,t,i){i&&"contentDiscoverResponse"==i._type?s(i):(alert("Failed to get discovery data: "+JSON.encode(i)),s(null))})},getDiscoveriesByGenes:function(e){var t=e.selectedGenes,i=e.callback,s={queryService:this,query:{_type:"contentDiscoverRequest",geneId:t}};return e.currentStart&&(s.startAt=e.currentStart),new vui.DynamicMovieList(s,i)},getSimilarMovies:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSimilarSearch",includePreOrders:"true",contentId:e.contentId,count:20,dimensionality:e.dimensionality?e.dimensionality:"any",followup:["totalCount"]}};return e.currentStart&&(i.startAt=e.currentStart),e.maxResults&&(i.maxResults=e.maxResults),new vui.DynamicMovieList(i,t)},getLockedExtras:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",containerId:e.contentId,listType:"useful",sortBy:"-watchedScore",type:["program"],followup:["totalCount","uxPromoTags"]}};return e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},getExtras:function(e){var t=e.callback,i={queryService:this,query:{_type:"contentSearch",responseSubset:"micro",bonusOfContentId:e.contentId,tag:"extras",sortBy:"-watchedScore",followup:["totalCount","uxPromoTags"]}};return e.currentStart&&(i.startAt=e.currentStart),new vui.DynamicMovieList(i,t)},getKidsModeSampleList:function(s){var e={_type:"contentSearch",responseSubset:"micro",followup:["totalCount","hasBackgroundImage"],count:7,includeTarget:["none"],mpaaRatingMax:"pg13"};vui.familyModel&&vui.familyModel.getAgeLimit&&(e.ageGroup=vui._.aStr(vui.familyModel.getAgeLimit()));var t=s.query;for(var i in t.listType&&(e.deviceId=VUDU.registry.deviceId),t)e[i]=t[i];vui.m.doQuery(e,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&(i.title=s.name,s.callback(i))},{onTimeout:vui.m.QueryOptions.RETRY})},contentSearchByIdWithAgeLimit:function(e,s){var t={_type:"contentSearch",contentId:e,followup:["ageLimit"],responseSubset:"micro"};vui.m.doQuery(t,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&i.content?s(i.content):(s(null),alert("ERROR: contentSearchByIdWithAgeLimit"))},{onTimeout:vui.m.QueryOptions.RETRY})},contentSearchWithContentIds:function(e,s){this.data=[];var t={_type:"contentSearch"};t.contentId=e,t.followup=["uxPromoTags","episodeNumberInSeason","seasonNumber"],t.responseSubset="micro",this.avodManager.addAvodEnabledFollowup(t),vui.m.doQuery(t,function(e,t,i){t===vui.m.queryStatus.ST_SUCCESS&&i.content?s(i.content):(s(null),alert("ERROR: contentSearchWithContentIds"))}.bind(this),{onTimeout:vui.m.QueryOptions.RETRY})},getRecommendedByTasteId:function(e){var t=e.tasteId,i=this.recommendedCache.tasteCache[t];return i?(e.callback(i,0,i.realTotalCount),i):(i=new vui.StaticRecommendedList(e),this.recommendedCache.tasteCache[t]=i)},getCustomList:function(e){var t={};return t.searchParams=e.query,t.filters=e.filters,t.callback=e.callback,e.currentStart&&(t.startAt=e.currentStart),this.getMovieList(t)},getActorData:function(s,n){if(s){var e=this.PersonInfoCache.check(s);if(!e){var t={_type:"personSearch",personId:s},i=function(e,t,i){t===this.queryStatus.ST_SUCCESS&&i&&i.person?(this.PersonInfoCache.add(s,i.person[0]),n&&n(i.person[0])):n&&n(null,t)}.bind(this);return this.doQuery(t,i,{onTimeout:this.QueryOptions.RETRY})}n(e)}else alert("NO PERSON ID IN getActorData()")},getCastBySearch:function(e){var t=e.term,i=e.callback,s={queryService:this,query:{_type:"personSearch",nameMagic:t,followup:"totalCount"},listElement:"person"};return e.currentStart&&(s.startAt=e.currentStart),new vui.DynamicList(s,i)},getMoviePlaybackInfo:function(n,a,e){var t,i,s={_type:"editionLocationGet",contentVariantId:n.contentVariantId,getMultiSubtitleUrls:"true",editionFormat:"dash",forFreePreview:e,isSecure:"true"};vui.getModel().userId&&(s.userId=vui.getModel().userId),vui.vvPlatform.uhdSupported&&n.isUHDContent&&n.variants&&isVariantUHD(n.contentVariantId,n.variants)&&vui.gConnectionInstance.getIsMVPEnabled()&&(t=getBestEdition(getUHDVariant(n.variants)[0].editions[0].edition),"hygiea"===vui.vvPlatform.id&&vui.account.hasLevel2DebugLabel()&&((i=document.createElement("div")).id="uhd-edition",i.innerHTML=t.videoProfile+" : "+t.editionId,i.style.zIndex="100000",i.style.position="absolute",i.style.top="20px",i.style.left="20px",i.style.color="blue",i.style.fontSize="20px",document.body.appendChild(i)),alert("HDR10 EditionLocationGet id="+t.editionId+" videoProfile = "+t.videoProfile,"debug"),s.editionId=t.editionId),n.contentVariantId?s.contentVariantId=n.contentVariantId:n.editionId&&(s.editionId=n.editionId),n.advertContentId&&(s.advertContentId=n.advertContentId),void 0===e&&(s.forFreePreview=[!1]),n.useMain10&&(s.videoProfile=mapHDXOrderPreference()),this.doQuery(s,function(e,t,i){if(t!==vui.getModel().queryStatus.ST_SUCCESS)return alert("editionLocationGet query failure"),void a(null);if("editionLocation"!=i._type)return alert("editionLocationGet failed to return editionLocation"),void a(null);var s={};s.payload=i,s.duration=n.runTimeSeconds,s.contentVariantId=n.contentVariantId,a(s)}.bind(this))},getTrailerPlaybackInfo:function(t,n){var s=function(s){var e={_type:"editionLocationGet"};e.editionId=t.editionId,e.editionFormat="dash",e.getMultiSubtitleUrls="true",e.isSecure="true",this.doQuery(e,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS?(i.aspectRatio=s.edition[0].aspectRatio[0],s.edition[0].encodingFormat3D?i.encodingFormat3D=s.edition[0].encodingFormat3D[0]:i.encodingFormat3D="none",n(i)):(alert("PLAYBACK QUERY FAILED"),n(null))})}.bind(this),e={_type:"editionSearch",editionId:t.editionId};this.doQuery(e,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS&&i.edition?s(i):(alert("PLAYBACK QUERY FAILED"),n(null))})},queriesAcceptingStreamable:{contentSearch:!0,editionSearch:!0,personSearch:!0},queriesAcceptingDimensionality:{contentSearch:!0,contentVariantSearch:!0,contentMetaSearch:!0},queriesAcceptingIncludeTarget:{contentSearch:!0},filterStreamable:function(e){this.queriesAcceptingStreamable[e._type]&&(e.streamable="true")},filterIncludeTarget:function(e){this.queriesAcceptingIncludeTarget[e._type]&&(e.includeTarget=e.includeTarget||["vudu","none"],vui.account.showTestContent()&&(e.includeTarget.push("vudutest"),alert("also include vudutest content!")))},preProcessQuery:function(e){this.filterStreamable(e),this.filterIncludeTarget(e)},ListQueries:{"MOST WATCHED":{query:{_type:"contentSearch",followup:["totalCount","uxPromoTags"],responseSubset:"micro",type:["program","series","bundle"]},defaultFilters:{sortBy:"-watchedScore"},maxResults:100,showRank:!0},"FEATURED TITLES":{query:{_type:"contentSearch",responseSubset:"micro",type:["program","bundle"],followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-featuredScore"}},"FEATURED TITLES DETAILED":{query:{_type:"contentSearch",responseSubset:"micro",type:["program","episode","season","bundle","bonus","series"],followup:["totalCount","streamableOffers","uxPromoTags"]},defaultFilters:{}},"NEW TO RENT FEATURED":{query:{_type:"contentSearch",responseSubset:"micro",listType:"newToRent",featured:"true",type:["program","episode"],followup:["totalCount","streamableOffers","uxPromoTags"]},defaultFilters:{sortBy:"-firstRentableTime"}},"NEW TV":{query:{_type:"contentSearch",responseSubset:"micro",type:"episode",releaseTimeMin:vui.getTVMinDate(),followup:["seasonNumber","episodeNumberInSeason","totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-firstRentableTime"}},"NEW TRAILERS":{query:{_type:"contentSearch",responseSubset:"micro",type:["bonus"],tag:"newTrailer",followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-firstRentableTime"}},"NEW TRAILERS_3D":{query:{_type:"contentSearch",responseSubset:"micro",type:["bonus"],followup:["totalCount"],dimensionality:"threeD",includeTarget:vui.vvPlatform.includeTarget}},"NEW TO RENT":{query:{_type:"contentSearch",responseSubset:"micro",listType:"newToRent",type:["program"],followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-firstRentableTime"}},"NEW TO OWN":{query:{_type:"contentSearch",responseSubset:"micro",listType:"newToOwn",type:["program"],followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-firstVuduableTime"}},"TOP NEW TITLES":{query:{_type:"contentSearch",responseSubset:"micro",listType:"newTitles",featured:"true",type:["program","bundle"],followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-firstVuduableTime"}},"COMING SOON":{query:{_type:"contentSearch",responseSubset:"micro",listType:"comingSoon",type:["program","bundle","episode","season","series"],followup:["totalCount","uxPromoTags"],groupBy:"series"},defaultFilters:{sortBy:"offerStartTime"}},"NOW AVAILABLE ON VUDU DETAILED":{query:{_type:"contentSearch",type:["program"],followup:["totalCount","streamableOffers","uxPromoTags"]},defaultFilters:{}},"ALL MY MOVIES":{query:{_type:"contentSearch",responseSubset:"micro",dimensionality:"any",listType:"rentedOrOwned",type:["program","bundle"],superType:"movies",followup:["totalCount"]},defaultFilters:{sortBy:"purchaseTime"},listElement:"content",requiresDeviceId:!0},"ALL MY MOVIES DETAILED":{query:{_type:"contentSearch",listType:"rentedOrOwned",dimensionality:"any",type:["program","bundle"],superType:"movies",followup:["totalCount","streamableOffers"]},defaultFilters:{sortBy:"purchaseTime"},listElement:"content",requiresDeviceId:!0},"EXPLORE HD":{query:{_type:"contentSearch",responseSubset:"micro",videoQuality:"hd",followup:["totalCount"],type:["program","season","series"]},defaultFilters:{sortBy:"-featuredScore"}},"EXPLORE TV SHOWS":{query:{_type:"contentSearch",responseSubset:"micro",type:"season",followup:["totalCount"]},defaultFilters:{sortBy:"-featuredScore"}},COLLECTIONS:{query:{_type:"uiEntrySearch",uiEntryType:"showcase",sortBy:"featuredScore",followup:["totalCount"]},listElement:"uiEntry",defaultFilters:{sortBy:"featuredScore"},requiresClientType:!0},"MY COLLECTION CONTENTS":{query:{_type:"contentSearch",responseSubset:"micro",listType:"rentedOrOwned",type:["program","bundle","season","series"],groupBy:"series",followup:["totalCount"]},defaultFilters:{sortBy:"purchaseTime"},listElement:"content",requiresDeviceId:!0},"MY MOVIES":{query:{_type:"contentSearch",responseSubset:"micro",listType:"rentedOrOwned",type:["program","bundle"],superType:"movies",followup:["totalCount"]},defaultFilters:{sortBy:"purchaseTime"},listElement:"content",requiresDeviceId:!0},"MY TV SHOWS":{query:{_type:"contentSearch",responseSubset:"micro",listType:"rentedOrOwned",type:["episode","season","bundle","series"],superType:"tv",followup:["totalCount","seasonNumber","episodeNumberInSeason"],groupBy:"series"},defaultFilters:{sortBy:"purchaseTime"},listElement:"content",requiresDeviceId:!0},"MY WISH LIST":{query:{_type:"contentSearch",responseSubset:"micro",listType:"wished",type:["program","episode","season","bundle","series"],followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"title"},listElement:"content",requiresUserId:!0},"MY PREORDER LIST":{query:{_type:"preOrderSearch",followup:["content"],status:["waiting","error"]},listElement:"preOrder",elementParser:function(e){return e.content[0]},requiresAccountId:!0},FAKE:{query:{_type:"contentSearch",responseSubset:"micro",titleMagic:"z",followup:["totalCount"],type:["program"]},defaultFilters:{sortBy:"title"}},"2for2Nights":{query:{_type:"contentSearch",responseSubset:"micro",type:"program",tag:"2for2",followup:["totalCount"]},defaultFilters:{sortBy:"-watchedScore"},listElement:"content"},"2for2NightsShort":{query:{_type:"contentSearch",responseSubset:"micro",type:"program",tag:"2for2",followup:["totalCount"]},defaultFilters:{sortBy:"-watchedScore"},maxResults:16,listElement:"content"},"ALL TITLES":{query:{_type:"contentSearch",responseSubset:"micro",followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-watchedScore"},listElement:"content"},"ALL MOVIES":{query:{_type:"contentSearch",type:["program","bundle"],superType:"movies",responseSubset:"micro",followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-watchedScore"},listElement:"content"},"ALL TV":{query:{_type:"contentSearch",type:["season","bundle"],superType:"tv",responseSubset:"micro",followup:["totalCount","uxPromoTags"]},defaultFilters:{sortBy:"-watchedScore"},listElement:"content"},"FEATURED TITLES UIENTRY":{query:{_type:"uiEntrySearch",uiEntryType:"filmstrip",followup:["totalCount","contentInfo"]},listElement:"uiEntry",defaultFilters:{sortBy:"featuredScore"},requiresDeviceId:!0}},doQuery:function(e,t,i){var s=this.nextQueryId;return this.nextQueryId++,this.doQueryInternal(s,e,t,i),s},doQueryAll:function(e,s,n){var a={};$extend(a,e);var o=0,r=e.count,l=[],u=function(e,t,i){t===this.queryStatus.ST_SUCCESS&&i.moreBelow?(l.push(i),"true"==i.moreBelow[0]?(o+=r,a.offset=o,this.doQuery(a,u,n)):s(l)):s(l)}.bind(this);this.doQuery(a,u,n)},cancelQuery:function(e){var t=function(e){alert("CANNCING QUERY");var t,i=this.jsToVuduQueryMap[e];i?(alert("Cancelling jsQueryId:"+e+" vuduQueryId: "+i),vudu.cancelQuery(i)):this.retryQueryPool[e]&&(alert("Cancelling jsQueryId: "+e+" from retry pool"),t=this.retryQueryPool[e],delete this.retryQueryPool[e],t[1]&&t[2](e,ST_CANCELLED,null))}.bind(this);if("array"!=$type(e))"number"==typeof e&&t(e);else for(var i=0;i<e;i++){t(e[i])}},uncacheableQueryTypes:{sequencePerform:!0,urlInfoGet:!0,emailSend:!0,sessionKeyRequest:!0,userPasswordResetAndEmail:!0,accountCreate:!0,userPasswordSet:!0,linkedAccountSessionKeyRequest:!0,linkedAccountShadowAccountCreate:!0,lightDeviceRequest:!0,userNetLogRequest:!0},doQueryInternal:function(e,t,r,l){var u=JSON.parse(JSON.stringify(t));this.preProcessQuery(u);var d=l&&l.onTimeout||this.QueryOptions.FAIL,c=l&&l.onError||this.QueryOptions.FAIL,h="director2",v=function(i,s,e){alert("MULTICDN vuduQueryId: "+i+" status: "+s,"info");var n=e,a=this.vuduToJsQueryMap[i];delete this.vuduToJsQueryMap[i],delete this.jsToVuduQueryMap[a];var t=function(){return!!(this.directorCacheUrl&&this.directorCacheUrlArray&&this.currentCacheUrlIndex<this.directorCacheUrlArray.length-1)}.bind(this),o=function(e){if(e==this.QueryOptions.RETRY){alert("policy = RETRY!");var t=this.vuduQueryWrapper(h,u,v);this.vuduToJsQueryMap[t]=a,this.jsToVuduQueryMap[a]=t,alert("Js Query id: "+a+" Vudu queryId: "+i+" Status: "+s+"Retrying as queryid: "+t)}else{if(e==this.QueryOptions.FAIL)return alert("policy = FAIL"),alert("JS Query id: "+a+" Vudu queryId: "+i+" Status: "+s+" Failing"),r(a,s,n);if(e==this.QueryOptions.FAIL_AND_UPDATE_GLOBAL_STATE)return alert("policy = FAIL_AND_UPDATE_GLOBAL_STATE"),GlobalErrorHandler.notifyFatalError("JS Query id = "+a+" Vudu queryId: "+i+" Status: "+s),r(a,s,n);if(e==this.QueryOptions.FAIL_TRY_NEXT){if(alert("policy = FAIL_TRY_NEXT"),!this.directorCacheUrl||!this.directorCacheUrlArray)return alert("on fail JS Query id: "+a+" Vudu queryId: "+i+" Status: "+s+" Failing"),r(a,s,n);if(!(this.currentCacheUrlIndex<this.directorCacheUrlArray.length-1))return alert("MULTICDN else part JS Query id: "+a+" Vudu queryId: "+i+" Status: "+s+" Failing","info"),r(a,s,n);alert("MULTICDN incrementing urlinfoget cdn index currentIndex is: "+this.currentCacheUrlIndex,"info"),this.currentCacheUrlIndex++,this.directorCacheUrl=this.directorCacheUrlArray[this.currentCacheUrlIndex];t=this.vuduQueryWrapper(h,u,v);this.vuduToJsQueryMap[t]=a,this.jsToVuduQueryMap[a]=t,alert("MULTICDN on retry next Js Query id: "+a+" Vudu queryId: "+i+" Status: "+s+"Retrying as queryid: "+t,"info")}}}.bind(this);if(s===this.queryStatus.ST_TIMEOUT)alert("GOT TIMEOUT"),o(d),this.queryStatusCallback(!1);else{if(s===this.queryStatus.ST_SUCCESS||s===this.queryStatus.ST_CANCELLED)return this.queryStatusCallback(!0),r(a,s,n);s===this.queryStatus.ST_NOT_CONNECTED?this.retryQueryPool[a]=[params,r,l]:(this.queryStatus.ST_GENERIC_ERROR,s===this.queryStatus.ST_GENERIC_ERROR&&!e&&t()?(alert("MULTICDN generic error retry next url","info"),o(this.QueryOptions.FAIL_TRY_NEXT)):(alert("OTHER ERROR"),o(c))),this.queryStatusCallback(!1)}}.bind(this),i=this.vuduQueryWrapper(h,u,v);this.vuduToJsQueryMap[i]=e,this.jsToVuduQueryMap[e]=i},vuduQueryWrapper:function(e,t,i){var s,n,a,o;t.count||"contentSearch"!=t._type&&"collectionSearch"!=t._type&&"genreSearch"!=t._type&&"personSearch"!=t._type||(t.count=50),vui.QueryProxy.proxy(t,i)?console.warn("Query was proxied!:"+JSON.stringify(t)):(s=void 0!==t.userId||t.deviceId||t.accountId||t._type&&"userNetLogRequest"===t._type,delete t.deviceId,s&&this.directorCsClient&&(t.userId||t.accountId||(t.userId=this.userId),this.directorCsClient.doItNote(t,i))||(s&&(t.sessionKey=this.sessionKey),t.format="application/json",n="",2e3<((n=!this.directorCacheUrl||t._type&&this.uncacheableQueryTypes[t._type]||s?this.secureBaseUrl:this.directorCacheUrl)+(a=vui.NoteUrlPath.toString(t))).length?(alert("running POST request"),n=this.secureBaseUrl,alert("base URL: "+n+", params: "+a),vui._.doIframeQuery(n,t,i)):(o=n+a,alert("jsonp request url: "+o),new Request.VuduJSONP({url:o,timeout:1e4,log:!0,doPath:!0,onFailure:function(){i(window.vuduQueryId,this.queryStatus.ST_GENERIC_ERROR),alert("error in director response, got onFailure: "+t._type+" moreInfo: "+o,"warn")}.bind(this),onTimeout:function(){i(window.vuduQueryId,this.queryStatus.ST_TIMEOUT),alert("error in director response, got onTimeout: "+t._type,"warn")}.bind(this),onSuccess:function(e){e?i(window.vuduQueryId,this.queryStatus.ST_SUCCESS,e):(alert("VUDU GOT TIMEOUT FROM DIRECTOR:","warn"),i(window.vuduQueryId,this.queryStatus.ST_TIMEOUT,null))}.bind(this)}).send())))},_ordinalQuality:{none:1,SD:2,HD:3,HDX:4,UHD:5},_populateOwnedMovieCache:function(e,t){if(0!=e.length&&e[0].contentVariant)for(var i=0,s=e.length;i<s;i++)for(var n=0,a=e[i].contentVariant.length;n<a;n++){var o=e[i].contentVariant[n];this.ownedMovieCache[o.contentId[0]]||(this.ownedMovieCache[o.contentId[0]]={});var r=this.ownedMovieCache[o.contentId[0]];"rented"==t&&o.expirationTime?((!r.rented||this._ordinalQuality[r.rented]<this._ordinalQuality[o.videoQuality[0]])&&(r.rented=o.videoQuality[0]),(!r.firstExpiration||r.firstExpiration<o.expirationTime[0])&&(r.firstExpiration=o.expirationTime[0]),r.rentedList||(r.rentedList={}),r.rentedList[o.videoQuality[0]]=o):((!r.owned||this._ordinalQuality[r.owned]<this._ordinalQuality[o.videoQuality[0]])&&(r.owned=o.videoQuality[0]),r.ownedList||(r.ownedList={}),r.ownedList[o.videoQuality[0]]=o)}else alert("NO POPULATING OWNEDMOVIES, no contentVariant return:"+JSON.encode(e))},saveDiscoverState:function(e){this.discoverState=e},getDiscoverState:function(){return this.discoverState?this.discoverState:{}},anyOfCidsPurchased:function(e){var t=null;if("array"==$type(e))for(var i=0;i<e.length&&!(t=this.ownedMovieCache[e[i]]);i++);else t=this.ownedMovieCache[e];return t},movieIsPurchased:function(e){if(!e.ownerships)return!1;for(var t in e.ownerships)if(1==e.ownerships[t].isOwned)return!0;return!1},getConditionalOffer:function(e){return vui.getModel().conditionalOfferCache.check(e)},typeMap:{pto:"Purchase",ptr:"Rental",ptoWal:"walmartOffer"},getOffers:function(e){var t={},i=VUDU.vuduTime();if(!e.contentVariants[0].contentVariant)return t;var s=vui.getModel().conditionalOfferCache.check(e.contentId);if(s){for(var n={},a=0;a<e.contentVariants[0].contentVariant.length;a++){var o=e.contentVariants[0].contentVariant[a];n[o.contentVariantId]=o.videoQuality[0]}var r,l={};for(var u in Array.each(s,function(e){var t,i=e.contentVariantId[0],s=n[i];s&&(l[s]||(l[s]={}),t=this.typeMap[e.offerType[0]],l[s][t]?l[s][t].push(e):l[s][t]=[e])}.bind(this)),l)for(var d in l[u]){var c,h=vui.Model.getValidConditionalOffers(l[u][d]),v=null,m=[];Array.each(h,function(e,t){var i=parseFloat(e.price[0]);!$defined(v)||i<v?(v=i,m=[e]):$defined(v)&&i===v&&m.push(e),(!$defined(r)||i<r)&&(r=i)}),0<m.length&&(t[u]||(t[u]={}),c=null,Array.each(m,function(e,t){(!$defined(c)||c.stopTime[0]<e.stopTime[0])&&(c=e)}),c.isConditional=!0,t[u][d]=c)}}alert("GET OFFERS, AFTER CONDITIONAL OFFERS ARE:"+JSON.encode(t));for(a=0;a<e.contentVariants[0].contentVariant.length;a++){if((o=e.contentVariants[0].contentVariant[a]).offers&&!(o.offers.length<1)&&o.offers[0].offer)for(var g=0;g<o.offers[0].offer.length;g++){var _=o.offers[0].offer[g];if(vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&_.isWalmartOffer&&e.walmartCatalogItems&&e.walmartCatalogItems[o.videoQuality]&&(_.price=e.walmartCatalogItems[vui._.aStr(o.videoQuality)]&&e.walmartCatalogItems[vui._.aStr(o.videoQuality)][0].price||_.price),_.offerType=_.isWalmartOffer?"ptoWal":_.offerType,t[o.videoQuality]||(t[o.videoQuality]={}),t[o.videoQuality][this.typeMap[_.offerType]]){var p=t[o.videoQuality][this.typeMap[_.offerType]];p.preOrderStartTime&&p.preOrderStartTime[0]?_.preOrderStartTime&&_.preOrderStartTime[0]&&_.preOrderStopTime&&parseDate(_.preOrderStopTime[0]).getTime()>=i?p.preOrderStopTime&&parseDate(p.preOrderStopTime[0]).getTime()<=i&&(t[o.videoQuality][this.typeMap[_.offerType]]=_):_.preOrderStartTime||_.startTime&&!(_.startTime&&_.startTime[0]&&parseDate(_.startTime[0]).getTime()<=i)||(t[o.videoQuality][this.typeMap[_.offerType]]=_):p.startTime&&p.startTime[0]&&parseDate(p.startTime[0]).getTime()>=i?_.preOrderStartTime&&_.preOrderStartTime[0]&&_.preOrderStopTime&&parseDate(_.preOrderStopTime[0]).getTime()>=i&&(t[o.videoQuality][this.typeMap[_.offerType]]=_):parseFloat(p.price)>parseFloat(_.price)&&(t[o.videoQuality][this.typeMap[_.offerType]]=_),t[o.videoQuality][this.typeMap[_.offerType]].discount=Math.round(100*(parseFloat(_.price[0])-parseFloat(p.price[0])))/100+""}else if(!_.preOrderStartTime||_.preOrderStartTime&&_.preOrderStartTime[0]&&_.preOrderStopTime&&parseDate(_.preOrderStopTime[0]).getTime()>=i){if(_.isWalmartOffer&&e.walmartCatalogItems&&e.walmartCatalogItems[vui._.aStr(o.videoQuality)]&&e.walmartCatalogItems[vui._.aStr(o.videoQuality)]&&e.walmartCatalogItems[vui._.aStr(o.videoQuality)][0].stock&&"Available"!==e.walmartCatalogItems[vui._.aStr(o.videoQuality)][0].stock[0]||_.isWalmartOffer&&e.walmartCatalogItems&&!e.walmartCatalogItems[vui._.aStr(o.videoQuality)])continue;t[o.videoQuality][this.typeMap[_.offerType]]=_}}}return{offers:t,conditionalOfferPrice:r}},offerIsCurrent:function(e){if(!e||!e.startTime)return!1;var t=parseDate(e.startTime[0]),i=VUDU.vuduTime();return t.getTime()<i},offerHasStarted:function(e){if(!e)return!1;if(!e.startTime)return!0;var t=parseDate(e.startTime[0]),i=VUDU.vuduTime();return t.getTime()<i||!!(e.preOrderStartTime&&e.preOrderStartTime[0]&&parseDate(e.preOrderStartTime[0]).getTime()<i)},qualityArray:["uhd","hdx","hd","sd"],qualityArrayNoHD:["uhd","hdx","sd"],qualityArrayNoUHD:["hdx","hd","sd"],qualityArrayWithUHD:["uhd","hdx","sd"],qualMap:{uhd:4,hdx:3,hd:2,sd:1},qualDisc:{uhd:"4K Blu-ray",hdx:"Blu-ray",sd:"DVD"},deviceToManufacturerMap:{samsungTizen:"Samsung",lgWebOs:"LG",vizioCast:"Vizio",chomecast:"Chromecast",xboxOne:"Xbox One"},getPriceString:function(e){var t,i,s=VUDU.vuduTime();e.startTime&&(t=new Date(e.startTime[0])),e.preOrderStartTime&&(i=parseDate(e.preOrderStartTime[0]));return!i&&t&&t.getTime()>s?(isCurrent=!1,monthsMap[t.getMonth()+""]+" "+t.getDate()):vui.strings.getText("GET_PRICE_STRING",getPriceStr(e.price[0]))},getOfferMatrix:function(e){e.refreshOffers();var t,s=e.data,n={uhd:[],hdx:[],hd:[],sd:[]},a=s.offers,o=s.ownerships,r=s.validOffers,l=vui._.isUHDContent(s)?this.qualityArrayWithUHD:this.qualityArrayNoUHD,u=e.hasBeenPreOrdered();for(u&&(t=e.highestQualPreOrdered()),i=0;i<l.length;i++){var d,c,h,v,m,g=l[i],_=o&&o[g],p=a&&a[g],T=_&&_.isRented&&_.ends&&getTimeDiffString(_.ends)&&vui.strings.getText("GET_BEST_OFFER_TIME_LEFT",getTimeDiffString(_.ends));T?n[g][0]=T:r&&r[g]&&r[g].Rental&&(h=p&&p.Rental,m=this.offerHasStarted(h),(c=vui.m.conditionalOfferCache.discountCheck(g,h))&&parseFloat(c)<parseFloat(vui._.aStr(h.price))?(v=this.getPriceString({price:[c]}),n[g][0]={price:v,discount:!0,hasStarted:m,type:vui._.aStr(s.type)}):(v=this.getPriceString(h),n[g][0]={price:v,isConditional:p.Rental.isConditional,hasStarted:m,type:vui._.aStr(s.type)})),_&&_.isOwned?n[g][1]="mine":r&&r[g]&&r[g].Purchase&&(d=!1,(h=p&&p.Purchase)&&h.preOrderStartTime&&h.preOrderStartTime[0]&&u&&t==g&&(d=!0,n[g][1]="mine"),c=vui.m.conditionalOfferCache.discountCheck(g,h),h&&c&&parseFloat(c)<parseFloat(vui._.aStr(h.price))?(v=this.getPriceString({price:[c]}),m=this.offerHasStarted(h),n[g][1]={price:v,discount:!0,hasStarted:m,type:vui._.aStr(s.type)}):0==d&&(v=this.getPriceString(h),m=this.offerHasStarted(h),n[g][1]={price:v,isConditional:p.Purchase.isConditional,hasStarted:m,type:vui._.aStr(s.type)})),r&&r[g]&&r[g].walmartOffer&&(h=p&&p.walmartOffer,v=this.getPriceString(h),m=this.offerHasStarted(h),n[g][2]={price:v,isConditional:p.walmartOffer.isConditional,hasStarted:m,type:vui._.aStr(s.type)})}return n.isOfferOk=function(e){return!(!e||"object"!=typeof e)},n},getPhysicalOfferMatrix:function(e){e.refreshOffers();var t=e.data,s={uhd:[],hdx:[],hd:[],sd:[]},n=t.offers,a=t.ownerships,o=t.validOffers,r=vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll()?this.qualityArrayWithUHD:this.qualityArrayNoUHD;for(i=0;i<r.length;i++){var l,u,d,c=r[i],h=a&&a[c],v=n&&n[c];h&&h.isOwned&&(s[c][0]="mine"),o&&o[c]&&(o[c].walmartOffer?(l=v&&v.walmartOffer,u=this.getPriceString(l),d=this.offerHasStarted(l),s[c][0]={price:u,isConditional:v.walmartOffer.isConditional,hasStarted:d}):s[c][0]={}),s.isOfferOk=function(e){return!(!e||"object"!=typeof e)}}return s},offerVerb:{Rental:"GET_BEST_OFFER_RENT_FOR",Purchase:"GET_BEST_OFFER_OWN_FOR",PreOrder:"Preorder"},getSoonestExp:function(e){if(e){if(e.owned||!e.rented)return;var t=e.rented;if(t&&e.rentedList&&e.rentedList[t]&&e.rentedList[t].expirationTime){var i=vui._.aStr(e.rentedList[t].expirationTime);if(""==i)return;var s=getTimeDiffString(i);if(s)return vui.strings.getText("GET_BEST_OFFER_TIME_LEFT",s)}}return null},_checkRental:function(e){var t=vui.getModel().ownedMovieCache;if(!t)return null;var i=t[e];if(!i)return null;if(i.owned)return null;var s=i.rented;return s&&i.rentedList&&i.rentedList[s]&&i.rentedList[s].expirationTime?vui._.aStr(i.rentedList[s].expirationTime):i.rented&&i.firstExpiration?i.firstExpiration:null},isOwnedOrRented:function(e){var t=VUDU.vuduTime(),i=!1;for(var s in e){var n=e[s];if(n.isRented){if(parseDate(n.ends).getTime()<t)continue;i=!0}else i=!0}return i},getBestOfferAndOwnershipInfo:function(a){if(a){var o=VUDU.vuduTime(),e=this.qualityArray,r={},t=a.ownerships;if(t)for(var i=0;i<e.length;i++){var s=t[A=e[i]];if(s){if(s.isOwned)return r.result1=A.toUpperCase()+": "+vui.strings.getText("GET_BEST_OFFER_YOU_OWN_IT"),r;if(s.isRented){var n,l=getTimeDiffString(s.ends);l&&(n=vui.strings.getText("GET_BEST_OFFER_TIME_LEFT",l),r.result1?r.result2=n:r.result1=n);break}}}if(r.result1&&r.result2)return r;var u,d={};if(a.contentVariants[0]){var c=a.contentVariants[0].contentVariant;if(c&&c[0])for(var h,i=0;i<c.length;i++){var v,m=c[i],g=m.videoQuality;"true"==m.p2pable?(v=m.contentVariantId,m.streamableContentVariantId&&(_vqp_p2p=m)):d[g]=m;var _={};if(_.contentVariantId=v,_.contentId=a.contentId,_.editionId=m.editionId,_.acpLevel=m.acpLevel,_.dimension=m.dimension,_.audioChannels=m.audioChannels,_.audioCodec=m.audioCodec,_.audioType=m.audioType,_.videoQuality=m.videoQuality,_.pictureSubtitled=!1,_.url=!1,_.freePreviewStartSeconds=m.freePreviewStartSeconds,_.freePreviewStopSeconds=m.freePreviewStopSeconds,_.streamable=m.streamable,m.offers){var p=m.offers[0].offer;if(p){_.offers={};for(var T=0;T<p.length;T++){var f={};p[T].startTime?f.offerStartTime=parseDate(p[T].startTime[0]).getTime():f.offerStartTime=1,f.contentVariantId=_.contentVariantId,f.contentId=a.contentId,f.offerId=p[T].offerId;var E,S,I,C={ptr:"Rental",pto:"Purchase"},y=C[p[T].offerType];f.type=y,f.price=parseFloat(p[T].price),f.regularPrice=parseFloat(p[T].regularPrice),f.maySufferBlackoutWindows=p[T].maySufferBlackoutWindows,f.ends=null,f.endOfViewableWindow=null,f.extendedRental=p[T].extendedRental,f.inExtensionWindow=!1,f.maxExtensibleSeconds=0,f.url=null,(_.editionId&&_.streamable||"season"==m.type||"bundle"==m.type)&&("uhd"!=m.videoQuality||"uhd"==m.videoQuality&&(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll()))&&(u?(E=u[y])?(S=f.offerStartTime<=o,I=E.offerStartTime<=o,!S&&I||!(S&&!I||f.price<E.price)||(u[y]=f)):u[y]=f:((u={})[y]=f,h=u))}}}}}if(u=h){if(a.offers&&u.Purchase&&0<u.Purchase.price)for(i=0;i<e.length;i++){var w,A=e[i],O=a.offers[A];O&&O.Purchase&&O.Purchase.isConditional&&(w=O.Purchase&&O.Purchase.price&&O.Purchase.price[0],(0===(w=parseFloat(w))||0<w)&&w<u.Purchase.price&&(u.Purchase.price=w))}var b,P,N={Purchase:vui.strings.getText("GET_BEST_OFFER_OWN"),Rental:vui.strings.getText("GET_BEST_OFFER_RENT")},R=u.Rental,D=u.Purchase;return R&&D?(R.offerStartTime>o&&(b=R.offerStartTime),D.offerStartTime>o&&(P=D.offerStartTime),b&&P?(r.result1?r.result2=L(b<=P&&R||D):r.result1=L(b<=P&&R||D),r.price=M(b<=P&&R||D)):b||P?(r.result1?r.result2=L(!b&&R||D):r.result1=L(!b&&R||D),r.price=M(!b&&R||D)):(r.result1?(r.result2=L(D),r.price=M(D)):(r.result1=L(R),r.price=M(R)),r.result2||(r.result2=L(D),r.price=M(D))),r):(r.result1?R&&(r.result2=L(R||D)):r.result1=L(R||D),r.price=M(R||D),r)}}function L(e){var t=e.offerStartTime;if(1!=t&&parseDate(t).getTime()>o){r.comingSoon=!0;var i=vui.getModel().availableInFuture(a);if(i&&vui.getModel().dateIsToday(i)){var s=window.getFutureDateString(i);return[vui.strings.getText("MOVIE_DETAILS_AVAILABLE_X",s)]}var n=new Date(t);return r.comingDate=monthsMap[n.getMonth()+""]+" "+n.getDate(),[vui.strings.getTransformedText("GET_BEST_OFFER_AVAILABLE_ON",r.comingDate)]}return 0==e.price?vui.strings.getText("WATCH_FREE"):vui.strings.getText("GET_BEST_OFFER_FROM",N[e.type],e.price)}function M(e){return e.price}},setAvail:function(e){var t=e&&e.data,i=t&&t.variants,s=vui.gConnectionInstance.getRemoveHD()?this.qualityArrayNoHD:this.qualityArray,n=t.ownerships,a=VUDU.vuduTime(),o={qty:[]};if(i)for(var r=0;r<s.length;r++){var l=s[r];if(o.qty[l],i[l]){var u=i[l].offers[0].offer,d=n&&n[i[l].videoQuality],c=!1,h=!1;if(u)for(var v=0;v<u.length;v++){var m={};u[v].startTime?m.offerStartTime=parseDate(u[v].startTime[0]).getTime():m.offerStartTime=1,u[v].preOrderStartTime&&parseDate(u[v].preOrderStartTime[0]).getTime()<a&&(c=h=!0),"ptr"==u[v].offerType?u.Rental=m:"pto"==u[v].offerType&&(u.Purchase=m)}(u&&u.Rental&&u.Rental.offerStartTime&&u.Rental.offerStartTime<a||u&&u.Purchase&&u.Purchase.offerStartTime&&u.Purchase.offerStartTime<a||d&&d.isOwnedOrRented)&&(c=!0)}vui.vvPlatform.isLightDevice&&i[l]&&("bundle"===vui._.aStr(t.type)||"season"===vui._.aStr(t.type)||"series"===vui._.aStr(t.type)||isDashStreamAvailable(t.contentVariants[0].contentVariant,l)||!u||h||(c=!1)),i[l]&&1==c?o.qty.push([l,"on"]):"uhd"===l&&!c||o.qty.push([l,"off"]),o.uv=!1,vui.gConnectionInstance.getIsUVSupportEnabled()&&t.UVStatus&&"bundle"!=e.type&&(o.uv=!0)}return o},getBestOffer:function(e,t){var i,s,n=this.getMovieInfo(e.contentId,function(){}),a=e.ownerships,o=e.contentId&&vui.getModel().ownedMovieCache[e.contentId[0]],r=[""];if(!a&&o){var l=vui.getModel().ownedMovieCache[e.contentId[0]];if(l.owned)return a=vui.getModel().ownedMovieCache[e.contentId[0]].ownedList,[vui.strings.getText("GET_BEST_OFFER_YOU_OWN_IT")+" "+l.owned];if(l.rented)return a=vui.getModel().ownedMovieCache[e.contentId[0]].rentedList,getTimeDiffString(l.firstExpiration)?[l.rented.toUpperCase()+": "+(getTimeDiffString(l.firstExpiration)&&vui.strings.getTransformedText("GET_BEST_OFFER_TIME_LEFT",getTimeDiffString(l.firstExpiration).toLowerCase()))]:r}if(a&&!n.hasBeenPreOrdered()){for(var u in a){var d,c=a[u];!c.isRented||(d=getTimeDiffString(c.ends)&&vui.strings.getTransformedText("GET_BEST_OFFER_TIME_LEFT",getTimeDiffString(c.ends).toLowerCase()))&&(i=i||u.toUpperCase()+": "+d),s=s||c.isOwned}if(i&&!n.rentalUpgraded())return[i];if(s)return[vui.strings.getText("GET_BEST_OFFER_YOU_OWN_IT")+" "+n.highestQualOwned().toUpperCase()]}else{if(n.contentPreOrdered()||n.containerPreOrdered()&&"episode"!==vui._.aStr(n.data.type))return[n.highestQualPreOrdered().toUpperCase()+": "+vui.strings.getText("GET_BEST_OFFER_YOU_PREORDERED_IT")];if(n.data&&"true"===vui._.aStr(n.data.isAdvertEnabled)&&"meta"===t)return[vui.strings.getText("GET_BEST_OFFER_AVOD_FREE"),"advertEnabled"]}var h=e.offers;if(!h)return[""];var v=VUDU.vuduTime(),m=this.qualityArray;vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll()||(m=this.qualityArrayNoUHD);for(var g,_,r=[],p=[],T=[],f=["Rental","Purchase","walmartOffer"],E=[],S=null,I=0;I<f.length;I++){var C=f[I];E[C]=null;for(var y=0;y<m.length;y++){var w,A,O,b,P=!0;(_=h[u=m[y]]&&h[u][C])&&_.startTime&&(v<(w=parseDate(_.startTime[0]).getTime())&&((!$defined(T[0])||T[0]>w)&&(T[0]=w,T[1]=C),P=!1)),P&&_&&!_.preOrderStartTime&&(N=parseFloat(_.price[0]),E[C]=window.getPriceStr(N),(!$defined(r[0])||r[0]>N)&&(r[0]=N,r[1]=C,r[2]=_.price[0],"bundle"!=e.type&&"season"!=e.type||!_.regularPrice||(r[3]=parseFloat(_.regularPrice[0]),0<(A=Math.ceil(100*(r[3]-r[0])/r[3]))&&(!S||S<A)&&(S=A)))),P&&_&&_.preOrderStartTime&&(N=window.getPriceStr(_.price[0]),r[0]=N,r[1]="PreOrder",r[2]=_.price[0],(E=[]).PreOrder=r[0]),_&&_.isConditional&&(N=parseFloat(_.price[0]),(!$defined(p[0])||N<p[0])&&(p[0]=N,p[1]=C,p[2]=_.price[0]),_.preOrderStartTime&&(p[1]="PreOrder"),(O=_.preOrderStartTime&&_.preOrderStopTime?_.preOrderStopTime:_.stopTime)&&(b=parseDate(O[0]).getTime(),(!g||g.stopEpoch>b)&&(g={stopTime:O[0],stopEpoch:b})));var N,R=vui.m.conditionalOfferCache.discountCheck(u,_);R&&(N=parseFloat(R),(!$defined(p[0])||N<p[0])&&(r[0]=N,r[2]=R,r[3]="discount",E[C]=[window.getPriceStr(R),"discount"]))}}if(0===parseFloat(r[2]))return[vui.strings.getText("WATCH_FREE"),"free",E];if(n.hasBeenPreOrdered())return[n.highestQualPreOrdered().toUpperCase()+": "+vui.strings.getText("GET_BEST_OFFER_YOU_PREORDERED_IT")];if("discount"===r[3])return[vui.strings.getText(this.offerVerb[r[1]]),null,E];if(g&&getTimeDiffString(g.stopTime))return E[p[1]]=window.getPriceStr(p[0]),[getTimeDiffString(g.stopTime),r[1],E];if($defined(r[0]))return[vui.strings.getText(this.offerVerb[r[1]],window.getPriceStr(r[2])),S,E];if(T[0]){var D=T[0];e.streamableStartTime&&new Date(e.streamableStartTime[0]).getTime()>VUDU.vuduTime()&&(D=e.streamableStartTime[0]);var L;return[864e5<=parseDate(D).getTime()-VUDU.vuduTime()?(L=new Date(D),vui.strings.getText("MOVIE_DETAILS_AVAILABLE_X","on "+monthsMap[L.getMonth()+""]+" "+L.getDate())):vui.strings.getText("MOVIE_DETAILS_AVAILABLE_X",getFutureDateString(D))]}return[""]},getPreviewOffer:function(e,t){if(!e.validOffers)return!1;for(var i=t?[t]:this.qualityArray,s=0,n=0;n<i.length;n++){var a=i[n],o=e.offers[a],r=e.validOffers[a],l=!1,u=e.variants[a];for(var d in r){var c=o[d];window.getPartialString(c)[1]&&(l=!0)}l&&u.freePreviewStopSeconds&&(s=vui.getFreePreviewMinutes(u))}return s},calculateValidOffers:function(e,t,i,s){var n,a=VUDU.vuduTime(),o=1==vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll(),r=vui.getModel().qualityArray,l=!1,u=!1,d=!1,c={};if(!t)return null;for(var h=0;h<r.length;h++){var v,m=r[h],g=e[m],_=t[m];(!vui.vvPlatform.isLightDevice||e[m]||isDashStreamAvailable(s.contentVariants[0].contentVariant)||!_||_.Purchase&&_.Purchase.preOrderStartTime||!_||_.Rental&&_.Rental.preOrderStartTime||"bundle"===vui._.aStr(s.type)||"season"===vui._.aStr(s.type))&&(v=!!(i&&i[m]&&i[m].isOwned)&&(l=!0),_&&(d=this.offerIsCurrent(_.Purchase),!_.walmartOffer||l||v||(c[m]||(c[m]={}),c[m].walmartOffer=!0),_.Purchase&&!l&&!v&&(!d||d&&"episode"!=g.type&&"program"!=g.type||d&&("episode"==g.type||"program"==g.type)&&g.editionId)&&("uhd"!=m||"uhd"==m&&1==o)&&(c[m]||(c[m]={}),c[m].Purchase=!0),n=!!(i&&i[m]&&i[m].isRented&&parseDate(i[m].ends).getTime()>a)&&(u=!0),d=this.offerIsCurrent(_.Rental),!_.Rental||n||v||!vui.account.isInMQC()&&(l||u)||!(!d||d&&"episode"!=g.type&&"program"!=g.type||d&&("episode"==g.type||"program"==g.type)&&g.editionId)||("uhd"!=m||"uhd"==m&&1==o)&&(c[m]||(c[m]={}),c[m].Rental=!0)))}return 0<new Hash(c).getLength()?c:null},dateIsToday:function(e){var t=parseDate(e),i=VUDU.vuduTime();return t.getTime()-i<864e5},availableInFuture:function(e){var t,i,s,n,a=VUDU.vuduTime(),o=e.offers;for(var r in o){var l=o[r];if(l){if(l.Rental){if(s=null,l.Rental.startTime&&(s=parseDate(l.Rental.startTime[0]).getTime()),!(s&&a<s))return null;(!i||s<i)&&(t=l.Rental.startTime[0],i=s)}if(l.Purchase){if(n=null,l.Purchase.startTime&&!l.Purchase.preOrderStartTime&&(n=parseDate(l.Purchase.startTime[0]).getTime()),!(n&&a<n))return null;(!i||n<i)&&(t=l.Purchase.startTime[0],i=n)}}}return t},_preComputeContentForQuality:function(e,t,i){if(e){for(var s=null,n=0;n<e.length;n++){var a=null,o=e[n];if("rent"==t?a=o.rentedList:"own"==t&&(a=o.ownedList),a&&a[i]){s=a[i];break}}return s}return null},getOwnershipInfo:function(g,_){var p=null;ownerships={};var e=function(){var e={};if(null!=p){for(var t=[],i=this.ownedMovieCache[g.contentId[0]],s=0;s<p.length;s++){var n=this.ownedMovieCache[p[s]];null!=n&&t.push(n)}e.ownedList={},e.rentedList={};for(var a=["sd","hd","hdx","uhd"],o=0;o<a.length;o++){var r=a[o],l=this._preComputeContentForQuality(t,"own",r);l?(e.owned=r,e.ownedList[r]=l):i&&i.ownedList&&i.ownedList[r]&&(e.owned=r,e.ownedList[r]=i.ownedList[r]);var u=this._preComputeContentForQuality(t,"rent",r);u&&"pto"!==vui._.aStr(g.offerTypeLock)?(e.rented=r,e.rentedList[r]=u):i&&i.rentedList&&i.rentedList[r]&&(e.rented=r,e.rentedList[r]=i.rentedList[r])}}else e=this.ownedMovieCache[g.contentId[0]];if(e){var d=VUDU.vuduTime(),c=!1;if(e.rentedList)for(var h in e.rentedList){!(m=e.rentedList[h]).expirationTime||parseDate(m.expirationTime[0]).getTime()<=d||((v={}).videoQuality=m.videoQuality[0],v.isOwnedOrRented=!0,v.isOwned=!1,v.isRented=!0,v.ends=m.expirationTime[0],v.type="Rental",v.variant=g.variants[v.videoQuality],ownerships[m.videoQuality[0]]=v,c=!0)}if(e.ownedList)for(var h in e.ownedList){var v,m=e.ownedList[h];(v={}).videoQuality=m.videoQuality[0],v.isOwnedOrRented=!0,v.isOwned=!0,v.isRented=!1,v.type="Purchase",v.variant=g.variants[v.videoQuality],ownerships[m.videoQuality[0]]=v,c=!0}return c?void _(ownerships):void _(null)}_(null)}.bind(this);if(null!=g.containerId){var t=null;"array"==$type(g.containerId)?t=g.containerId:(t=[]).push(g.containerId);for(var i=0;i<t.length;i++)null!=this.ownedMovieCache[t[i]]&&(null==p&&(p=[]),p.push(t[i]));e()}else e()},getAvailableOwnedVariant:function(e){if(!e||!e.ownerships)return null;var t,i=null,s=this.qualityArray;vui.gConnectionInstance.getIsUHDSupported()||(s=this.qualityArrayNoUHD);for(var n={sd:1,hd:2,hdx:3,uhd:4},a=0;a<s.length;a++)if(t=e.variants[s[a]]){var o,r=Object.keys(e.ownerships)[0];for(var l in e.ownerships)o=e.ownerships[l].videoQuality,n[r]<n[o]&&(r=o);if(r&&t.videoQuality&&n[r]>n[t.videoQuality]){i=t;break}}return i},getVariantsHash:function(e){if(!e.contentVariants[0].contentVariant)return{};for(var t=e.contentVariants[0].contentVariant,i={},s=0;s<t.length;s++){var n=t[s];i[n.videoQuality[0]]=n}return i},getMovieInfo:function(e,s){var t=function(t){var i;t?(i=t.get())&&"episode"==i.type&&!i.seasonInfo?this.getMovieInfo(i.seasonId[0],function(e){i.seasonInfo=e,s(t)}):s(t):s(null)}.bind(this),i=this.MovieInfoCache.check(e);return i?i.get()?t(i):i.setListener(s):(i=new vui.MovieInfo({movieId:e,callback:t,queryService:this,onError:function(){this.MovieInfoCache.drop(e)}.bind(this)}),this.MovieInfoCache.add(e,i)),i},getEntryInfo:function(e,t,i){var s=e.parameters&&e.parameters[0],n="contentParameters"==s._type&&s.contentId?this.MovieInfoCache.check(s.contentId[0]):this.EntryInfoCache.check(e.uiEntryId);return n?(alert("Cache hit FOR ENTRY INFO."),i||(n.release(),n.setListener(t)),n.get()&&t(n)):(alert("Cache Miss FOR ENTRY INFO."),"contentParameters"==s._type&&s.contentId?(n=new vui.MovieInfo({movieId:s.contentId[0],callback:t,queryService:this,onError:function(){this.MovieInfoCache.drop(contentId)}.bind(this)}),this.MovieInfoCache.add(s.contentId[0],n)):(n=new vui.EntryInfo({entry:e,callback:t,queryService:this,onError:function(){this.EntryInfoCache.drop(e.uiEntryId)}.bind(this)}),this.EntryInfoCache.add(e.uiEntryId,n))),n},getActors:function(e){var t=[" "," "," "],i=0,s=e.credits&&0<e.credits.length&&e.credits[0].credit;if(!s)return null;for(var n=0;n<s.length;n++){var a=!1,o=s[n],r=o.role;if(r)for(var l=0;l<r.length;l++)if("Actor"==r[l]){a=!0;break}if(a&&(t[i++]=getFullName(o)),3===i)return t}return t},getDirector:function(e){var t=e.credits&&0<e.credits.length&&e.credits[0].credit;if(!t)return null;for(var i=0;i<t.length;i++){var s=!1,n=t[i],a=n.role;if(a)for(var o=0;o<a.length;o++)if("Director"==a[o]){s=!0;break}if(s)return getFullName(n)}return" "},getGenresFromMovie:function(e){if(e&&e.data){var t=e.data;if(t.geneGenres&&t.geneGenres[0].geneGenre){var i=[],s=t.geneGenres&&t.geneGenres[0]&&t.geneGenres[0].geneGenre;if(s)for(var n=s.length,a=0;a<n;a++)i.push(s[a].name);return i}}},cleanUpMovieInfo:function(e){if(e.content)return e.content[0]},generateMediaUrls:function(){alert("MULTICDN generateMediaUrls: currentCDNIndex"+this.currentCDNIndex,"info"),this.placardBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.placardUrlPath,this.posterBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.posterUrlPath,this.portraitBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.portraitUrlPath,this.contentBackgroundBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.backgroundUrlPath,this.genreMoviesBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.genreMoviesUrlPath,this.subGenreMoviesBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.subGenreMoviesUrlPath,this.genreTVBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.genreTVUrlPath,this.subGenreTVBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.subGenreTVUrlPath,this.screenSaverBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.screenSaverUrlPath,this.uiEntryPlacardBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.uiEntryUrlPath,this.uiPageBgImageBaseUrl=this.baseUrlArray[this.currentCDNIndex]+this.mediaUrlsResult.uiPageUrlPath,this.promoTagDefUrlPath=this.baseUrlArray[this.currentCDNIndex];var e=vui._.aStr(this.mediaUrlsResult.assetsUrlPath);this.thirdPartyImageBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e+"subscriptionService/",this.kidsModeMediaUrl=this.baseUrlArray[this.currentCDNIndex]+e,this.uxWelcomeScreenBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e+"welcome/poster/",vui.gConnectionInstance.usePersonalizedApis()&&(this.posterBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e,this.portraitBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e,this.uiEntryPlacardBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e,this.adImageBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e,this.uxRowBackgroundBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e+"row/background/",this.uxPageBackgroundBaseUrl=this.baseUrlArray[this.currentCDNIndex]+e+"page/background/"),this.exploreBaseUrl={},this.exploreBaseUrl.moviesOnly={},this.exploreBaseUrl.tvOnly={},this.exploreBaseUrl.moviesOnly.genre=this.genreMoviesBaseUrl,this.exploreBaseUrl.moviesOnly.subGenre=this.subGenreMoviesBaseUrl,this.exploreBaseUrl.tvOnly.genre=this.genreTVBaseUrl,this.exploreBaseUrl.tvOnly.subGenre=this.subGenreTVBaseUrl,alert("MULTICDN posterBaseUrl: "+this.posterBaseUrl,"info")},updateUrl:function(e){this.currentCDNIndex=this.currentCDNIndex||0,alert("MULTICDN updateUrl currentCDNIndex:"+this.currentCDNIndex,"info"),this.baseUrlArray&&this.currentCDNIndex<this.baseUrlArray.length&&this.generateMediaUrls(),this.checkIsAlive()},checkIsAlive:function(){this.lastTime=VUDU.vuduTime();var e=document.createElement("img"),t=this.posterBaseUrl.replace("assets/","");e.src=t+"spacer.png",alert("MULTICDN checkIsAlive url:"+t+"spacer.png","info");var i=this;e.onload=function(){i.CDNRetryCount=0,i.isSuccess=!0,alert("MULTICDN checkIsAlive image onload success","info")},e.onerror=function(e){alert("MULTICDN checkIsAlive image onerror","info"),i.CDNRetryCount++,i.CDNRetryCount<3?(alert("MULTICDN checkIsAlive image onerror CDNRetryCount: "+i.CDNRetryCount+" to currentCDNIndex: "+i.currentCDNIndex,"info"),vui.getModel().checkIsAlive()):(i.baseUrlArray&&i.currentCDNIndex<i.baseUrlArray.length-1?(alert("MULTICDN incrementing CDN index","info"),i.currentCDNIndex++,i.updateUrl()):i.baseUrlArray&&1==i.isSuccess&&0!=i.currentCDNIndex&&(alert("MULTICDN resetting CDN index","info"),i.currentCDNIndex=0,i.updateUrl()),i.CDNRetryCount=0,i.isSuccess=!1)}},isAlivePosterBaseUrl:function(){VUDU.vuduTime()-this.lastTime<1e3&&1==this.isSuccess?alert("MULTICDN isAlivePosterBaseUrl request within 1 sec","info"):this.posterBaseUrl?this.checkIsAlive():alert("MULTICDN isAlivePosterBaseUrl no posterBaseUrl yet","info")},getFilterTypeFromUxRowId:function(e){var t=vui.m.personalizedCache&&vui.m.personalizedCache.uxRow&&vui.m.personalizedCache.uxRow[e],i=null;return t&&(t.rowFilterType&&(i=t.rowFilterType[0]),i&&t.rowContentType&&(i+=t.rowContentType[0])),i},getUiEntryFilmstripPosterUrl:function(e){return[this.posterBaseUrl+e]},getUiEntryImageUrl:function(e){return[this.uiEntryPlacardBaseUrl+e]},getUiPageBgImageUrl:function(e){return[this.uiPageBgImageBaseUrl+e]},getPromoTagImageUrl:function(e){return[this.promoTagDefUrlPath+e]},getThirdPartyImageUrl:function(e){return[this.thirdPartyImageBaseUrl+e]},getKidsModeImageUrl:function(e,t){return e&&e.contentId?this.kidsModeMediaUrl+"content/placard/"+e.contentId+"-"+t:""},getPosterUrl:function(e,t){if(e){if(e.elementType&&e.assetId&&e.posterType)return this.posterBaseUrl+e.elementType+"/"+e.posterType+"/"+e.assetId+"-"+t;if(e.posterUrl)return e.posterUrl+"-"+t+".jpg";if(e.contentId)return vui.gConnectionInstance.usePersonalizedApis()?this.posterBaseUrl+"content/poster/"+e.contentId+"-"+t:this.posterBaseUrl+e.contentId+"-"+t}return""},getAdUrlFromPageId:function(e){if(e)return this.adImageBaseUrl+"page/adPanel/"+e+"-220"},getAdUrlFromRowId:function(e){if(e)return this.adImageBaseUrl+"row/adPanel/"+e+"-220"},getAdUrlForSearch:function(){return this.adImageBaseUrl+"search/adPanel/search-220"},getAdUrlForMyLibrary:function(){return this.adImageBaseUrl+"myLibrary/adPanel/myLibrary-220"},getBackgroundUrlFromRowId:function(e){if(e)return this.uxRowBackgroundBaseUrl+e+"-1280"},getBackgroundUrlFromPageId:function(e){if(e)return this.uxPageBackgroundBaseUrl+e+"-1280"},getBackgroundUrlFromContentId:function(e){if(e)return this.contentBackgroundBaseUrl+e+"-1280.jpg"},initDeviceEmail:function(n){alert("in initDeviceEmail"),this.doQuery({_type:"emailSearch",deviceId:VUDU.registry.deviceId,count:100},function(e,t,i){var s;t===this.queryStatus.ST_SUCCESS&&i?(alert("initDeviceEmail response: "+JSON.encode(i)),i&&i.email&&0<i.email.length?(s=i.email.length-1,i.email[s].recipient?(this.email={emailId:i.email[s].emailId[0],recipient:i.email[s].recipient[0]},alert("GOT EMAIL")):(delete this.email,alert("NO EMAIL REC!")),alert("initDeviceEmail result:"+JSON.encode(i))):(delete this.email,alert("NO EMAIL!"))):alert("query for e-mails failed"),n()}.bind(this),{onTimeout:this.QueryOptions.RETRY})},activateByEmail:function(e,s){this.doQuery({_type:"activateByEmailRequest",deviceId:VUDU.registry.deviceId,recipient:e},function(e,t,i){t===this.queryStatus.ST_SUCCESS?(alert("activateByEmailRequest SUCCESS:"+JSON.encode(i)),this.initDeviceEmail(function(){s(i)})):(alert("activateByEmailRequest FAIL"),s(null))}.bind(this))},resendActivationEmail:function(s){if(!this.email)return s(null),!1;this.doQuery({_type:"emailSend",emailId:this.email.emailId},function(e,t,i){t===this.queryStatus.ST_SUCCESS?(alert("resendActivationEmail SUCCESS"),s(i)):(alert("resendActivationEmail FAIL"),s(null))}.bind(this))},getEmailOnFile:function(){return this.email&&this.email.recipient},deactivateFilename:"vudu/deactivate",_createDeactivationFile:function(){var e=new FileSystem,t=this.deactivateFilename,i=t.lastIndexOf("/"),s=t.substring(0,i);alert("CREATE COMMON DIR: "+s);e.createCommonDir(s);var n=e.openCommonFile(t,"w");return n?n.writeAll("")?(alert("VUDU: deactivaation writeFile SUCCESS"),e.closeCommonFile(n),void(e=null)):(alert("VUDU: WRITE DEACTIVATION FILE FAILED: "+t),!1):(alert("VUDU: OPEN FILE FOR WRITE DEACTIVATION FILE FAILED: "+t),!1)},isDeactivating:function(){return!1},clearActivatedData:function(){delete this.userId,delete this.sessionKey,delete this.email,delete this.lightDeviceId,window.setCookie("desiredQualityLevel",""),window.setCookie("userId",""),window.setCookie("sessionKey",""),window.setCookie("lightDeviceId",""),this.ownedMovieCache={},this.recommendedCache={},this.parentalControls=new vui.ParentalControlsModel,this.clearMovieCaches(),this.ratedMovieCache=new vui.RatedMovieCache(this),this.wishedMovieCache=new vui.WishedMovieCache(this),this.conditionalOfferCache=new vui.ConditionalOfferCache(this),this.preOrderedMovieCache=new vui.PreOrderedMovieCache(this),this.bookmarkCache=new vui.BookmarkCache(this),vui.promo.refresh(function(){}),vui.gConnectionInstance.getThirdPartyEnabled()&&vui.subscriptions.refresh(),vui.myOffers.reset(),vui.familyModel.reset(),this.myCollectionsModel&&this.myCollectionsModel.reset(),vui.clearPlaySettings&&vui.clearPlaySettings.reset(),vui._.deleteZapApiEvarsFromSessionStore()},deactivate:function(t){var e;(function(e){e?(alert("SUCCESSFULLY DEACTIVATED"),this.clearActivatedData()):alert("COULD not deactivate"),t(e)}).bind(this);this.directorCsClient?(e=this).directorCsClient.removeLightDevice(function(){e.logout(),t(!0)}):(this.logout(),t(!0))},deactivateIfNeeded:function(e){e()},rateTitle:function(e,t,s){alert("Rating title"),this.ratedMovieCache.add(e,t),this.doQuery({_type:"ratingStore",reviewedId:e,reviewedType:"content",userId:this.userId,starRating:t+""},function(e,t,i){t===this.queryStatus.ST_SUCCESS?s("ok"):(alert("Bad status. Status="+t),alert("RESULT:"+i),s("failed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},deleteRating:function(e,s){alert("deleting rating"),this.ratedMovieCache.remove(e),this.doQuery({_type:"ratingRemove",reviewedId:e,reviewedType:"content",userId:this.userId},function(e,t,i){t===this.queryStatus.ST_SUCCESS?s("ok"):(alert("Bad status. Status="+t),alert("RESULT:"+i),s("failed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},invalidateWishlist:function(){for(var e=this.MyListCache.getKeys(),t=0,i=e.length;t<i;t++){var s=e[t];0<=s.indexOf("MY WISH LIST")&&this.MyListCache.drop(s)}},invalidatePreOrderlist:function(){for(var e=this.MyListCache.getKeys(),t=0,i=e.length;t<i;t++){var s=e[t];0<=s.indexOf("MY PREORDER LIST")&&this.MyListCache.drop(s)}},addToWishlist:function(e,s){alert("adding to wishlist"),this.wishedMovieCache.add(e);var t={_type:"wishStore",contentId:e,userId:this.userId};this.doQuery(t,function(e,t,i){t===this.queryStatus.ST_SUCCESS?(this.invalidateWishlist(),s("ok")):(alert("Bad status. Status="+t),alert("RESULT:"+JSON.encode(i)),s("failed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},deleteFromWishlist:function(e,s){alert("adding to wishlist"),this.wishedMovieCache.remove(e);var t={_type:"wishRemove",contentId:e,userId:this.userId};this.doQuery(t,function(e,t,i){t===this.queryStatus.ST_SUCCESS?(this.invalidateWishlist(),s("ok")):(alert("Bad status. Status="+t),alert("RESULT:"+JSON.encode(i)),s("failed"))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},_onRentedDataChanged:function(){vui.Model.PopulateOwnedMovieCache(function(){alert("REFRESH MOVIE BECAUSE ONRENTED CHANGED")}),this.preOrderedMovieCache=new vui.PreOrderedMovieCache(this),this.MovieInfoCache=LRUObjectCache.create({maxCount:this.movieInfoCacheMaxCount,expirationPeriod:3600})},_onOwnedDataChanged:function(){vui.Model.PopulateOwnedMovieCache(function(){alert("REFRESH MOVIE BECAUSE ONOWNED CHANGED")}),this.preOrderedMovieCache=new vui.PreOrderedMovieCache(this),this.MovieInfoCache=LRUObjectCache.create({maxCount:this.movieInfoCacheMaxCount,expirationPeriod:3600})},_onWishlistChanged:function(){this.wishedMovieCache.onWishlistChanged(),this.invalidateWishlist()},_onRatingsChanged:function(){this.ratedMovieCache.onRatingsChanged()},_onFundsChanged:function(){vui.fund.refresh()},_onSubscriptionChanged:function(){vui.subscriptions.refresh()},_onAccountBenefitsChanged:function(){vui.myOffers.refresh(),this.conditionalOfferCache=new vui.ConditionalOfferCache(this),vui.fund.refresh()},_onEchoOperate:function(e){return alert("calling _onEchoOperate:"+e),{_type:"deviceOperateResult",result:e=e||""}},_onAlertOperate:function(e){alert("calling _onAlertOperate:"+e),controller.showPopup("OneButtonDialog",{title:"Alert",message:e,buttonLabel:"OK"});return{_type:"deviceOperateResult",result:"success"}},_onViewMovieDetailsOperate:function(e){alert("calling _onViewMovieDetailsOperate:"+e);return{_type:"deviceOperateResult",result:"success"}},_onPlayMovieOperate:function(e){alert("calling _onPlayMovieOperate:"+e);var t="Theater"==controller.currentParams.page;controller.goToPage("Theater",{playBestVariant:!0,data:{type:"movie",contentId:e}},t);return{_type:"deviceOperateResult",result:"success"}},_onPlayTrailer:function(e){var t=e&&e.contentId;this.getMovieInfo(t,function(e){var t,i;e&&e.data&&(t=e.data,i=vui._.aStr(t.dashTrailerEditionId),controller.goToPage("Theater",{data:{type:"trailer",editionId:i,data:t,hasAssignedQuality:!0}}))})},_onPlayMovie:function(e){var t=e&&e.contentId;this.getMovieInfo(t,function(e){var t,i,s;e&&e.data&&(t=new vui.ContentActions,i=e.data,s=t.getVariantByOwnership(i),i&&s&&t.onClickPlay({movie:i,variant:s}))})},_onPlayBonus:function(e){var t=e&&e.contentId;this.getMovieInfo(t,function(e){e&&e.data&&vui.playBonusContent(t,e.data)})},_onShowHomePage:function(){controller.goHome()},_onShowDebugPage:function(){},_onShowContentDetails:function(e){var t=e&&e.contentId;controller.goToPage("NewMovieDetails",{contentId:t})},_onShowOfferGridDialog:function(e){var t=e&&e.contentId;this.getMovieInfo(t,function(e){var t;e&&(t={mim:e,origin:"offerPurchase",successCallback:function(){controller.refreshCurrentPage()}},(new vui.ContentActions).doTransact(t))})},_onShowSearchResults:function(e){var t=e&&vui._.aStr(e.searchQuery);controller.goSearch(),vui.setSearchField4Automation(t.toUpperCase())},registerDataChangedHandlers:function(){this.dataChangedHandler.setHandler("purchasesToRent",function(){this._onRentedDataChanged()}.bind(this)),this.dataChangedHandler.setHandler("purchasesToOwn",function(){this._onOwnedDataChanged()}.bind(this)),this.dataChangedHandler.setHandler("wishLists",function(){this._onWishlistChanged()}.bind(this)),this.dataChangedHandler.setHandler("ratings",function(){this._onRatingsChanged()}.bind(this)),this.dataChangedHandler.setHandler("account",vui.account._onAccountDataChanged),this.dataChangedHandler.setHandler("funds",function(){this._onFundsChanged()}.bind(this)),this.dataChangedHandler.setHandler("accountBenefits",function(){this._onAccountBenefitsChanged()}.bind(this)),vui.gConnectionInstance.getThirdPartyEnabled()&&this.dataChangedHandler.setHandler("subscription",function(){this._onSubscriptionChanged()}.bind(this))},registerDeviceOperateHandlers:function(){this.deviceOperateHandler.setHandler("echo",function(e){return this._onEchoOperate(e)}.bind(this)),this.deviceOperateHandler.setHandler("alert",function(e){return this._onAlertOperate(e)}.bind(this)),this.deviceOperateHandler.setHandler("viewMovieDetails",function(e){return this._onViewMovieDetailsOperate(e)}.bind(this)),this.deviceOperateHandler.setHandler("playMovie",function(e){return this._onPlayMovieOperate(e)}.bind(this))},registerAutomationHandlers:function(){this.automationHandler.setHandler("playTrailer",function(e){return this._onPlayTrailer(e)}.bind(this)),this.automationHandler.setHandler("playMovie",function(e){return this._onPlayMovie(e)}.bind(this)),this.automationHandler.setHandler("playBonus",function(e){return this._onPlayBonus(e)}.bind(this)),this.automationHandler.setHandler("showHomePage",function(e){return this._onShowHomePage(e)}.bind(this)),this.automationHandler.setHandler("showDebugPage",function(e){return this._onShowDebugPage(e)}.bind(this)),this.automationHandler.setHandler("showContentDetails",function(e){return this._onShowContentDetails(e)}.bind(this)),this.automationHandler.setHandler("showOfferGridDialog",function(e){return this._onShowOfferGridDialog(e)}.bind(this)),this.automationHandler.setHandler("showSearchResults",function(e){return this._onShowSearchResults(e)}.bind(this))},resetAccountEmail:function(e,s){var t={_type:"userEmailResetAndActivationEmailSend",deviceId:VUDU.registry.deviceId,email:e};return this.doQuery(t,function(e,t,i){s(i)})},resetPassword:function(e,s){var t={_type:"userPasswordResetRequest",email:e};return this.doQuery(t,function(e,t,i){s(i)})},deviceActivate:function(e,t,i){var s={_type:"deviceActivate",deviceId:VUDU.registry.deviceId};e&&(s.email=e),t&&t.sessionKey&&(s.sessionKey=t.sessionKey[0]),t&&t.userId&&(s.userId=t.userId[0]),alert("DEVICE ACTIVATE:"+JSON.encode(s)),i()},linkedAccountDeviceActivate:function(e,t,a){var i={_type:"linkedAccountDeviceActivate",deviceId:VUDU.registry.deviceId,oauthClientId:vui.gConnectionInstance.getWmtOauthClientId(),userName:e,password:t},s=function(e,t,i){var s,n;alert("got linkedAccountDeviceActivate callback now!"),i&&"success"==i.status?(alert("linkedAccountDeviceActivate had success!"),s=function(){a(i)},n=function(){vui.analytics.trackEvar({accountId:vui.account.getAccountId()||"novalue",activated:"newlyactivatedviawalmart"}),this.initUserId(s)}.bind(this),vui.account.refresh(n)):(alert("linkedAccountDeviceActivate had NO success!"),a(i))}.bind(this);return alert("doing linkedAccountDeviceActivate query now!"),this.doQuery(i,s)},sessionKeyGet:function(e,t,s){var i={_type:"sessionKeyRequest",userName:e,password:t};return this.doQuery(i,function(e,t,i){alert("ABOUT TO DO GETDONE"),s(i)})},completeAccountSetupEmailSend:function(e){var t={_type:"completeAccountSetupEmailSend",deviceId:VUDU.registry.deviceId};return this.doQuery(t,e)},deviceLoadNote:function(e,t){this.values={};var i={_type:"appDeviceDataSearch",applicationId:"movie_ui",deviceId:VUDU.registry.deviceId,name:e};return this.getQuery=this.doQuery(i,t),this.getQuery},saveDeviceQuery:{},deviceSaveNote:function(e,t,i){this.saveDeviceQuery[e]&&(this.cancelQuery(this.saveDeviceQuery[e]),delete this.saveDeviceQuery[e]);var s={_type:"appDeviceDataStore",applicationId:"movie_ui",deviceId:VUDU.registry.deviceId,name:e,value:[t]};return this.saveDeviceQuery[e]=this.doQuery(s,i),this.saveDeviceQuery[e]},flushNetLogs:function(){var e={_type:"consoleOperation",deviceId:VUDU.registry.deviceId,operationCode:"OC_RESET_USER_PREFERENCES",parameters:"flushNetLogBuffer"};this.doQuery(e,function(e,t,i){t===this.queryStatus.ST_SUCCESS?alert("flushNetLogs: OK"):(alert("flushNetLogs: FAIL"),alert("Status="+t),alert("RESULT:"+i))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},updateDeviceInfoToDirector:function(e){var o=vui.vvPlatform.appDeviceLabel,r=vui.getWidgetVersion(),l=vui.getPlayer().deviceSupports3D().toString(),t=function(e,t,i){var s,n=!1;if(t===this.queryStatus.ST_SUCCESS&&i?(s=vui.Model.getTableFromDeviceData(i))?(s.firmwareVersion&&s.firmwareVersion[0]==window.FirmwareVersion&&s.widgetVersion&&s.widgetVersion[0]==r&&s.supports3D&&s.supports3D[0]==l||(n=!0),alert("GOT DEVICE INFO:"+JSON.encode(s))):(alert("DID NOT GET DEVICE INFO"),n=!0):(alert("ERROR GETTING DEVICE INFO FOR '"+o+"'"),n=!0),n){alert("DEVICE INFO NOT THERE OR HAS CHANGED");var a={supports3D:[l],firmwareVersion:[window.FirmwareVersion],widgetVersion:[r]};return vui.getModel().deviceSaveNote(o,a,function(e,t,i){alert("SAVED DEVICE INFO!:"+JSON.encode(i))})}alert("DEVICE INFO THERE, DONT UPDATE")}.bind(this);return this.deviceLoadNote(o,t)},saveAuthentication:function(e){window.setCookie("userId",this.userId),window.setCookie("sessionKey",this.sessionKey),window.setCookie("lightDeviceId",this.directorCsClient&&this.directorCsClient.getLightDeviceId()),"samsungTizen"===vui.vvPlatform.clientType&&e&&vui.vvPlatform.authenticationSaved()},linkAccountWithXboxAsync:function(e){var t=vui.getModel(),i={_type:"xboxAccountLinkCreate",userId:t.userId,xboxToken:e.token,xboxType:"xboxOne",sessionKey:t.sessionKey};return new Promise(function(s,n){vui.getModel().doQuery(i,function(e,t,i){"error"===i._type?n(i.code):s()}.bind(t))})},xboxLoginAsync:function(e){var t={_type:"sessionKeyRequest",xboxOneToken:e,weakSeconds:2592e3},o=this;return new Promise(function(n,a){o.doQuery(t,function(e,t,i){var s;t===o.queryStatus.ST_SUCCESS?i&&"success"==i.status&&i.sessionKey?(s=i.sessionKey[0])&&s.userId?(o.userId=s.userId[0],o.sessionKey=s.weakSessionKey[0],o.saveAuthentication(),vui.getModel().userId?vui.getModel().openCsConnection(function(){vui.getModel().onFoundUserId(vui.getModel().userId,function(){VUDU.xboxAuthUtils.userAddressSet(vui.getModel().userId),n({success:!0})})}):(alert("Missing User ID"),a("Missing User ID, are you logged in?"))):a():"loginFailed"==i.status?(alert("loginfailed"),a({success:!1,status:i.status[0]})):i.status=="passwordExpired"[0]?(alert("passwordExpired"),a({success:!1,status:i.status})):i.status=="accountIsLocked"[0]?(alert("accountIsLocked"),a({success:!1,status:i.status[0]})):(alert("failed"),a({success:!1,status:i.status})):(alert("ERROR: INFO GET urls get failed"),a({success:!1,status:""}))}.bind(o),{onTimeout:o.QueryOptions.RETRY})})},login:function(e,t,n){var i={_type:"sessionKeyRequest",userName:e,password:t,weakSeconds:31536e3},s=new vui.DirectorCsClient.Cypher(this.network).getLoginSignKey(e,t);i.loginSignature=s;var a=function(e,t,i){var s;t===vui.getModel().queryStatus.ST_SUCCESS?i&&"success"==i.status&&i.sessionKey?(s=i.sessionKey[0])&&s.userId?(this.userId=s.userId[0],this.sessionKey=s.weakSessionKey[0],this.saveAuthentication(),vui.getModel().openCsConnection(function(){vui.getModel().onFoundUserId(vui.getModel().userId,function(){n(!0)})}),vui.familyModel.reset(),vui.clearPlaySettings&&vui.clearPlaySettings.reset()):n(!1):"loginFailed"==i.status?(alert("loginfailed"),n(!1,i.status[0])):i.status=="passwordExpired"[0]?(alert("passwordExpired"),n(!1,i.status)):i.status=="accountIsLocked"[0]?(alert("accountIsLocked"),n(!1,i.status[0])):(alert("failed"),n(!1,"status")):alert("login failed")}.bind(this);vui._.doIframeQuery(this.secureBaseUrl,i,a,{})},logout:function(){vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings&&vui.clearPlaySettings.reset(!0);var e=vui.getModel().xofycollections;e&&e.clearAll(),this.closeCsConnection(),this.clearActivatedData(),vui.gConnectionInstance.reloadSOC(function(){vui.loadTabModels(function(){})}),"samsungTizen"===vui.vvPlatform.clientType&&vui.vvPlatform.authenticationSaved()},getWelcomeScreen:function(a){var e={_type:"uxWelcomeRequest",clientType:vui.vvPlatform.clientType,domain:vui.vvPlatform.appFeatureEnabled()?"walmart":"vudu"};this.doQuery(e,function(e,t,i){var s,n={};t===vui.getModel().queryStatus.ST_SUCCESS&&i&&i.uxWelcome&&(s=i.uxWelcome[0]||{},"true"===vui._.aStr(s.hasImage)?(n.url=this.getUxWelcomeUrl(s.uxWelcomeId),n.hasImage=!0,n.welcomeId=s.uxWelcomeId,n.accessibilityText=s.accessibilityText):n.hasImage=!1),a(n)}.bind(this),{onTimeout:this.QueryOptions.RETRY})},getUxWelcomeUrl:function(e){return this.uxWelcomeScreenBaseUrl+e+"-1280"},loginWithWalmart:function(e,t,o){var r={_type:"linkedAccountSessionKeyRequest",userName:e,password:t,oauthClientId:vui.gConnectionInstance.getWmtOauthClientId(),followup:"user",weakSeconds:31536e3},i=new vui.DirectorCsClient.Cypher(this.network).getLoginSignKey(e,t);r.loginSignature=i;vui._.doIframeQuery(this.secureBaseUrl,r,function(e,t,i){var s,n,a;t===vui.getModel().queryStatus.ST_SUCCESS&&("success"===(s="linkedAccountSessionKeyResponse"===i._type&&i.status&&i.status[0])?(vui.getModel().userId=i.sessionKey[0].userId[0],vui.getModel().sessionKey=i.sessionKey[0].weakSessionKey[0],vui.getModel().saveAuthentication(),vui.getModel().openCsConnection(function(){vui.getModel().onFoundUserId(vui.getModel().userId,function(){o(!0)})})):"vuduAccountNotFound"===s||"vuduAccountFound"===s?(n=i.authorizationCode[0],vui.getModel().linkedAccountShadowCreate(n,r.oauthClientId,o)):("error"===i._type&&(a=i.text&&i.text[0],alert("linkedAccountSessionKeyRequest failed: "+a),s="error"),o(!1,s)))},{})},activateByCode:function(e,t,n){var i={_type:"sessionKeyRequest",deviceActivationUuid:e,deviceActivationCode:t,weakSeconds:31536e3};this.doQuery(i,function(e,t,i){var s;t===this.queryStatus.ST_SUCCESS?i&&"success"==i.status&&i.sessionKey?(s=i.sessionKey[0])&&s.userId?(this.userId=s.userId[0],this.sessionKey=s.weakSessionKey[0],this.saveAuthentication(),vui.getModel().openCsConnection(function(){vui.getModel().onFoundUserId(vui.getModel().userId,function(){n(!0)})})):n(!1):"loginFailed"==i.status?(alert("loginfailed"),n(!1,i.status[0])):i.status=="passwordExpired"[0]?(alert("passwordExpired"),n(!1,i.status)):i.status=="accountIsLocked"[0]?(alert("accountIsLocked"),n(!1,i.status[0])):(alert("failed"),n(!1,"status")):(n(!1),alert("ERROR: Session key request failed."))}.bind(this),{onTimeout:this.QueryOptions.RETRY})},linkedAccountShadowCreate:function(e,t,s){var i={_type:"linkedAccountShadowAccountCreate",authorizationCode:e,oauthClientId:t};this.doQuery(i,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS&&("success"===i._type?s(!1,"relogin"):s(!1,"error"))})},openCsConnection:function(t,e){vui.getModel().createCsConnection(),vui.getModel().directorCsClient.open(function(e){switch(e){case vui.DirectorCsClient.ERRORS.OK:vui.gConnectionInstance.reloadSOC(function(){vui.loadTabModels(function(){var e;controller.baseLayer.currentPage&&"Home"===controller.baseLayer.currentPage.pageTitle&&(!controller.baseLayer.currentPage.activeTab||"infoSettings"!==(e=controller.baseLayer.currentPage.activeTab)&&"my"!==e&&"myLibrary"!==e&&controller.goHome())}),t()},vui.getModel().userId,vui.getModel().directorCsClient.getLightDeviceId());break;case vui.DirectorCsClient.ERRORS.LOGIN_ERROR:vui.getModel().logout(),t();break;case vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED:updateVuduSplashScreen("splash",vui.DirectorCsClient.getStatusText(e),vui.DirectorCsClient.getHelpText(e),"","",vui._.reloadApp);break;default:updateVuduSplashScreen("splash",vui.DirectorCsClient.getStatusText(e),vui.DirectorCsClient.getHelpText(e)),clearTimeout(window.vuduLoadingTimeoutId)}},e)},scheduleAsyncCall:function(e){window.setTimeout(e,0)},advertClickNotificationSend:function(e,t,i,s){var n={_type:"advertClickThroughNotificationSend",accountId:vui.account.getAccountId(),advertContentId:e,advertStreamingSessionId:t,clickThrough:i};alert("Shoppable ad advertClickNotificationSend clickThrough = "+i),this.doQuery(n,function(e,t,i){t===this.queryStatus.ST_SUCCESS?alert("advertClickThroughNotificationSend success"):alert("Error in advertClickThroughNotificationSend status="+t),s&&s(t)}.bind(this),{onTimeout:this.QueryOptions.FAIL,onError:this.QueryOptions.FAIL})},advertAddtoCartSend:function(e,s){var t={_type:"walmartCartItemAddRequest",walmartOfferId:e,accountId:vui.account.getAccountId()};alert("Shoppable ad advertAddtoCartSend walmartOfferId = "+e),this.doQuery(t,function(e,t,i){t===this.queryStatus.ST_SUCCESS?(alert("advertAddtoCartSend success"),s&&i.status&&s(i.status)):(alert("Error in advertAddtoCartSend status="+t),s&&s("failed"))}.bind(this),{onTimeout:this.QueryOptions.FAIL,onError:this.QueryOptions.FAIL})},adClickTrack:function(e){alert("advertClickTrackingStore for advertStreamingSessionId "+e);var t={_type:"advertClickTrackingStore",advertStreamingSessionId:e,accountId:vui.account.getAccountId()};this.doQuery(t,function(e,t,i){t!==this.queryStatus.ST_SUCCESS&&alert("Error in advertClickTrackingStore status="+t)}.bind(this),{onTimeout:this.QueryOptions.FAIL,onError:this.QueryOptions.FAIL})},getShoppableAdImageUrlFromId:function(e,t){return e?(alert("LOGURL: shoppable ad image = "+this.baseUrlArray[this.currentCDNIndex]+"advertOffer/"+e+"-"+t+".jpg"),this.baseUrlArray[this.currentCDNIndex]+"advertOffer/"+e+"-"+t+".jpg"):null},onClearplaySessionCreate:function(e,t){var i,s,n;(e=vui._.aStr(e))?(i={_type:"clearplaySessionCreate",accountId:vui.getModel().userId,category:vui.clearPlaySettings&&vui.clearPlaySettings.getEnabledCategories()||{}},t?i.advertContentId=e:i.streamingSessionId=e,s=function(e,t,i){t!==this.queryStatus.ST_SUCCESS?alert("Error in sending clearplaySessionCreate states = "+t):alert("Succeed in sending clearplaySessionCreate")}.bind(this),n={onTimeout:this.QueryOptions.FAIL,onError:this.QueryOptions.FAIL},this.doQuery(i,s,n),alert("ClearplaySessionCreate tracking sent: session ID: "+e)):alert("Send clearplaySessionCreate error: Wrong session ID: "+e)}}),vui.Model.getVariantInMovie=function(e,t){for(var i=e.contentVariants[0].contentVariant,s=0;s<i.length;s++)if(i[s].contentVariantId[0]==t)return i[s]},getFullName=function(e){return e.lastName?e.firstName?e.firstName[0]+" "+e.lastName[0]:e.lastName[0]:e.firstName?vui._.aStr(e.firstName):vui.strings.getText("GET_FULL_NAME_UNKNOWN")},vui.Model.cancelPreOrder=function(n,a){var o=vui.getModel(),e={_type:"preOrderDelete",preOrderId:n.preOrderId,accountId:vui.account.getAccountId()};vui.getModel().doQuery(e,function(e,t,i){var s;t===o.queryStatus.ST_SUCCESS?(o.invalidatePreOrderlist(),o.preOrderedMovieCache.remove(n.contentId[0]),(s=o.MovieInfoCache.check(n.contentId[0]))&&s.refresh(),vui.myOffers.refresh(),a("ok")):(alert("vui.settings not saved!"+t),a("error"))})},vui.Model.doPreOrder=function(n,a){function s(e,t){var i,s;"success"==e.status||"ok"==e.reason||"alreadyPurchased"==e.reason?(alert("A successful preorder"),"success"==e.status?e.purchaseStatus="ok":e.purchaseStatus=e.reason,(i=vui.getModel()).preOrderedMovieCache.refresh(),vui.Model.PopulateOwnedMovieCache(function(){}),(s=i.MovieInfoCache.check(n.contentId))&&s.refresh(),vui.fund.refresh(function(){a(e,t)}),vui.myOffers.refresh()):(e.purchaseStatus=e.reason,a(e),alert("An unsuccessful purchase: "+e.reason+", desc:"+e.text))}var e={_type:"preOrderRequest",offerId:n.offerId,accountId:vui.account.getAccountId(),lightDeviceId:vui.getModel().directorCsClient.getLightDeviceId()};vui.getModel().doQuery(e,function(e,t,i){this.dmaCheck(vui._.aStr(n.contentId),i,s,vui._.aStr(n.offerType))}.bind(this))},vui.Model.doPurchasePreflight=function(e,s,t){var i={_type:"purchasePreflight",offerId:e.offerId};i.lightDeviceId=vui.getModel().directorCsClient.getLightDeviceId(),i.userId=vui.getModel().userId,t&&(i.useToken="true"),vui.getModel().doQuery(i,function(e,t,i){s(i)})},vui.Model.doPurchase=function(s,i,n){function a(e,t){"ok"==e.purchaseStatus||"alreadyPurchased"==e.purchaseStatus?null!=n&&1==n.planOnly?i(e):(alert("A successful purchase"),vui.Model.PopulateOwnedMovieCache(function(){i(e,t,vui._.aStr(n.expectedPurchasePlan))},s.contentVariantId),vui.fund.refresh(),vui.Model.kidsModeCache&&vui.Model.kidsModeCache.load()):(i(e),alert("An unsuccessful purchase: "+e.purchaseStatus+", desc:"+e.description))}var e={_type:"purchaseRequest",userId:vui.m.userId,offerId:s.offerId,lightDeviceId:vui.getModel().directorCsClient.getLightDeviceId()};if(n)for(var t in n)e[t]=n[t];null!=vui.analytics.campaignId&&(e.campaignId=vui.analytics.campaignId,null!=vui.analytics.appLaunchSource?e.referrer=vui.analytics.appLaunchSource:e.referrer="unknown"),vui.getModel().doQuery(e,function(e,t,i){this.dmaCheck(vui._.aStr(s.contentId),i,a,vui._.aStr(s.offerType))}.bind(this))},vui.Model.dmaCheck=function(e,s,n,t){var i,a=vui.m.MovieInfoCache.check(e);vui.gConnectionInstance.getVPPAMessagingEnabled()&&a&&a.data&&"true"===vui._.aStr(a.data.ptoKeyChestMaEligible)&&"pto"==t?(i={_type:"keyChestVppaStatusGet",userId:vui.m.userId},vui.getModel().doQuery(i,function(e,t,i){n(s,i)})):n(s)},vui.Model.PopulateOwnedMovieCache=function(s,n,e){vui.m.MyListCache=LRUObjectCache.create({maxCount:6});var t,a=function(){var e={_type:"contentVariantSearch",dimensionality:"any",listType:"owned",count:1e3,responseSubset:"micro",followup:["seasonId","totalCount","videoQuality"]};e.userId=vui.getModel().userId,e.sessionKey=vui.getModel().sessionKey,n&&(e.contentVariantId=n),vui.getModel().doQueryAll(e,function(e){try{var t,i;e?(0<e.length&&((t=vui.getModel())._populateOwnedMovieCache(e,"owned"),n&&e[0].contentVariant&&((i=t.MovieInfoCache.check(e[0].contentVariant[0].contentId[0]))&&i.refresh()),vui.m.bookmarkCache&&vui.m.bookmarkCache.fetchResumeData()),vui.m.kidsModeCache.refreshOwned(),vui.myOffers.refresh(),vui.getModel().conditionalOfferCache=new vui.ConditionalOfferCache(t),vui.fund.refresh(),s(!0)):(alert("DIRECTOR ERROR in populateOwnedMovieCache code:"),s(!1))}catch(e){alert(spewCaughtError(e,"PopulateOwnedMovie, for real")),s(!1)}})}.bind(this),i=vui.getModel();i.userId&&i.sessionKey?((t={_type:"contentVariantSearch",dimensionality:"any",listType:"rented",count:1e3,responseSubset:"micro",followup:["seasonId","totalCount","videoQuality"]}).userId=i.userId,t.sessionKey=i.sessionKey,e||n&&(t.contentVariantId=n),i.doQueryAll(t,function(e){try{var i;e?(0<e.length&&((i=vui.getModel())._populateOwnedMovieCache(e,"rented"),n&&e[0].contentVariant&&e[0].contentVariant.every(function(e){var t=i.MovieInfoCache.check(vui._.aStr(e.contentId));return t&&t.refresh(),!0})),a()):(alert("DIRECTOR ERROR in populateOwnedMovieCache code:"),s(null))}catch(e){alert(spewCaughtError(e,"PopulateOwnedMovie, for real"))}})):s(!0)},vui.Model.makeListKey=function(e,t){if(t.filters){var i=e+"";for(var s in t.filters)i+=s+t.filters[s];return i}return e},vui.Model.getTableFromDeviceData=function(e){var t=e.appDeviceData;return t&&t[0]&&t[0].value&&t[0].value[0]?t[0].value[0]:null},vui.Model.getValidConditionalOffers=function(e){for(var t=[],i=VUDU.vuduTime(),s=0,n=e.length;s<n;s++){var a,o,r=e[s];r.preOrderStartTime&&r.preOrderStopTime?(a=parseDate(r.preOrderStartTime[0]),o=parseDate(r.preOrderStopTime[0])):(r.startTime&&(a=parseDate(r.startTime[0])),r.stopTime&&(o=parseDate(r.stopTime[0]))),(a&&a<i||!a)&&i<o&&t.push(r)}return t},vui.Model.getLowestConditionalOfferPrice=function(e){for(var t,i=0,s=vui.Model.getValidConditionalOffers(e).length;i<s;i++){var n=e[i],a=parseFloat(n.price[0]);(!$defined(t)||a<t)&&(t=a)}return t},vui.getModel=function(){return vui.m||(vui.m=new vui.Model),vui.m},vui.settings={save:function(e,t,i,s){var n=vui.getModel();if(!n.userId)return alert("ERROR: could not save settings because there's no userId"),s(),null;var a={applicationId:"movie_ui",value:i};if("parentalControls"!==t&&"familySettings"!==t||(a.applicationId="parental_settings"),"fpCalloutAnimationCount"===t&&(a.applicationId="familyplay_animation_count"),"userCollectionTipState"===t&&(a.applicationId="user_collection_tip_state"),"device"==e)a._type="appDeviceDataStore",a.name=t,a.deviceId=VUDU.registry.deviceId;else{if("user"!=e)return alert("ERROR: first argument to vui.settings.save can only be 'user' or 'device'"),s(),null;a._type="appUserDataStore",a.name=t+"|"+VUDU.registry.deviceId,a.userId=n.userId}return n.doQuery(a,function(e,t,i){t===n.queryStatus.ST_SUCCESS?(alert("vui.settings SAVED!"),s(1)):(alert("vui.settings not saved!"+t),s(-1))})},getLoadQueryParams:function(e,t){var i=vui.getModel(),s={applicationId:"movie_ui"};if("parentalControls"!==t&&"familySettings"!==t||(s.applicationId="parental_settings"),"fpCalloutAnimationCount"===t&&(s.applicationId="familyplay_animation_count"),"userCollectionTipState"===t&&(s.applicationId="user_collection_tip_state"),"device"==e)s._type="appDeviceDataSearch",s.name=t,s.deviceId=VUDU.registry.deviceId;else{if("user"!=e)return alert("ERROR: first argument to vui.settings.load can only be 'user' or 'device'"),null;if(!i.userId)return alert("ERROR: could not save settings because there's no userId"),null;s._type="appUserDataSearch",s.name=t+"|"+VUDU.registry.deviceId,s.userId=i.userId}return s},load:function(n,e,a){var o=vui.getModel(),t=this.getLoadQueryParams(n,e);if(!t)return alert("ERROR: vui.settings.load: no params are defined"),a(),null;var i=function(e,t,i){var s="device"==n?"appDeviceData":"appUserData";t===o.queryStatus.ST_SUCCESS?i[s]&&i[s][0]&&i[s][0].value?(alert("----------------- settings load result"+JSON.encode(i[s][0].value)),a(i[s][0].value)):(alert("vui.settings load failed: "+JSON.encode(i)),a()):(alert("vui.settings load failed "+t),a())}.bind(this);return o.doQuery(t,i)}},vui.FamilyPlayCalloutAnimation=new Class({queryType:"user",queryKey:"fpCalloutAnimationCount",initialize:function(){this.allowedCount=4,this.playedAnimationPerSession=!1},load:function(){vui.settings.load(this.queryType,this.queryKey,function(e){Array.isArray(e)&&0<e.length&&(this.allowedCount=Math.min(Number(vui._.aStr(e[0].count)),this.allowedCount)),this.save(this.allowedCount)}.bind(this))},save:function(t){var e=[{count:t}];vui.settings.save(this.queryType,this.queryKey,e,function(e){this.allowedCount=t,e&&1==e?alert("Saved fp callout animation count"):alert("FAILED TO SAVE FP CALLOUT ANIMATION")}.bind(this))},recordAnimationShown:function(){var e=this.allowedCount-1;this.playedAnimationPerSession=!0,this.save(e)},canPlayAnimation:function(){return!this.playedAnimationPerSession&&0<this.allowedCount}}),vui.preferences=new Class({browseFilters:{type:"moviesAndTv",sortBy:"-watchedScore"},key:"preferences",save:function(e){e&&(this.browseFilters=e);var t=[{browseFilters:[this.browseFilters]}];vui.settings.save("user",this.key,t,function(e){0<=e?alert("FILTERS SAVED!"):alert("FILTERS NOT SAVED!")})},generateFilters:function(e){var t={};for(var i in e)"_type"==i||(t[i]=e[i][0]);this.browseFilters=t},load:function(t){var e=function(e){e?0<e.length&&e[0].browseFilters?(this.generateFilters(e[0].browseFilters[0]),alert("preferences load success")):alert("preferences load failed, data not structured correctly"):alert("preferences load failed"),t()}.bind(this);vui.settings.load("user",this.key,e)}}),vui.LegacyBookmarks=new Class({initialize:function(e){this.values=null,this.model=e},getBookmark:function(t,i){var s=function(e){i(this.values[e]||0)}.bind(this);if(this.values)return s(t);var e=function(e){s(e?t:0)}.bind(this);this.get(e)},getCallback:function(e,t,i){if(this.getQuery=null,t===this.model.queryStatus.ST_SUCCESS&&i){var s,n=vui.Model.getTableFromDeviceData(i);if(n)for(var a in alert("GOT BOOKMARKS FROM DIRECTOR!!"),n){"_type"!=a&&(s=n[a],a=a.replace(/cid/,""),this.values[a]=parseInt(s),alert("ADDING TO BOOKMARKS TABLE: k="+a+" v="+s))}else alert("NO BOOKMARKS STORED IN DIRECTOR!");return this}return alert("FAILED TO GET BOOKMARKS FROM DIRECTOR!"),null},get:function(s){this.values={};var e=function(e,t,i){i=this.getCallback(e,t,i);s&&s(i)}.bind(this);return this.model.deviceLoadNote("bookmarks",e)}}),vui.RatedMovieCache=new Class({initialize:function(e){(this.model=e).userId?(this.userId=e.userId,this.refresh()):(delete this.rated,delete this.ratedAvailable)},refresh:function(){alert("CALLING RATED MOVIE CACHE REFRESH");var e,i;this.refreshing||(i=null,e=function(e,t){delete this.refreshing,t?alert("ERROR: Rated movie cache fetch failed."):(this.rated=i,this.ratedAvailable=!0)}.bind(this),this.refreshing=!0,i=new vui.StaticList({queryService:this.model,listElement:"rating",query:{_type:"ratingSearch",userId:this.userId,reviewedType:"content"},parseKey:function(e){return e.reviewedId},parseValue:function(e){return parseFloat(e.starRating)}},e))},add:function(e,t){this.ratedAvailable&&(this.rated.list[e]=t)},remove:function(e){this.ratedAvailable&&delete this.rated.list[e]},check:function(e){return this.ratedAvailable&&this.rated.list[e]?this.rated.list[e]:null},onRatingsChanged:function(){this.refresh()}}),vui.WishedMovieCache=new Class({initialize:function(e){(this.model=e).userId?(this.userId=e.userId,this.refresh()):delete this.wished},refresh:function(){alert("CALLING WISHED MOVIE CACHE REFRESH");var e,i;this.refreshing||(i=null,e=function(e,t){delete this.refreshing,t?alert("ERROR: Rated movie cache fetch failed."):this.wished=i}.bind(this),this.refreshing=!0,i=new vui.StaticList({queryService:this.model,listElement:"wish",query:{_type:"wishSearch",userId:this.userId},parseKey:function(e){return e.contentId[0]},parseValue:function(e){return!0}},e))},add:function(e){this.wished&&(this.wished.list[e]=!0)},remove:function(e){this.wished&&delete this.wished.list[e]},check:function(e){return this.wished&&this.wished.list[e]?this.wished.list[e]:null},onWishlistChanged:function(){this.refresh()}}),vui.PreOrderedMovieCache=new Class({initialize:function(e){this.model=e,this.accountId=vui.account.getAccountId()||e.userId,this.accountId?this.refresh():delete this.preOrdered},refresh:function(){alert("CALLING PREORDER MOVIE CACHE REFRESH");var e,i;this.refreshing||(i=null,e=function(e,t){delete this.refreshing,t?alert("ERROR: Preorde movie cache fetch failed."):(this.preOrdered=i,this.preOrderedAvailable=!0)}.bind(this),this.refreshing=!0,i=new vui.StaticList({queryService:this.model,listElement:"preOrder",query:{_type:"preOrderSearch",accountId:this.accountId,status:["waiting","error"],followup:"contentVariant"},parseKey:function(e){return e.contentId[0]},parseValue:function(e){return e}},e))},add:function(e,t){this.preOrderedAvailable&&(this.preOrdered.list[e]=t)},remove:function(e){this.preOrderedAvailable&&delete this.preOrdered.list[e]},check:function(e){return this.preOrderedAvailable&&this.preOrdered.list[e]?this.preOrdered.list[e]:null},onPreOrderChanged:function(){this.refresh()}}),vui.ConditionalOfferCache=new Class({initialize:function(e,t){this.model=e,this.accountId=vui.account.getAccountId()||vui.myOffers.accountId,this.discountPolicies=[],t&&(this.doneCallback=t),this.accountId?this.refresh():delete this.offers},refresh:function(){alert("CALLING ConditionalOffer CACHE REFRESH");var e,i,t;this.refreshing||(i=null,e=function(e,t){delete this.refreshing,t?alert("ERROR: Rated movie cache fetch failed."):this.offers=i,this.doneCallback&&this.doneCallback()}.bind(this),this.refreshing=!0,i=new vui.StaticList({queryService:this.model,listElement:"offer",query:{_type:"offerSearch",accountId:this.accountId,includeComingSoon:"false",includePreOrders:"true"},parseKey:function(e){return alert("CONDITIONAL OFFER:"+JSON.encode(e)),e.contentId[0]},parseValue:function(e){return e},hasMultipleValues:!0},e),t={_type:"discountSearch",followup:["fundPolicy"],accountId:this.accountId,includeActiveDiscountsOnly:"true"},vui.m.doQuery(t,function(e,t,i){i.discount&&i.discount.every(function(e){return this.discountPolicies.push(e),!0}.bind(this))}.bind(this)))},check:function(e){return this.offers&&this.offers.list[e]?this.offers.list[e]:null},discountCheck:function(i,s){if(i&&s){var e=vui._.aStr(s.price),n=!1;return this.discountPolicies.every(function(e){var t;return!e.fundPolicy||(!(t=e.fundPolicy&&e.fundPolicy[0]).offerType||t.offerType&&t.offerType[0]==s.offerType[0])&&(!t.maxVideoQuality||t.maxVideoQuality&&vui.m.qualMap[i]<=vui.m.qualMap[vui._.aStr(t.maxVideoQuality)])&&(n=vui._.aStr(e.discountFixedPrice)),!0}.bind(this)),n<e&&n}},onConditionalOfferChanged:function(){this.refresh(),vui.myOffers.refresh()}}),vui.BookmarkCache=new Class({resumes:[],isLast30DayDirty:!0,initialize:function(e,t){(this.model=e).userId?(this.userId=e.userId,this.refresh()):delete this.bookmarked,t&&this.userId==t.userId&&(this.bookmarked=t.bookmarked,this.resumes=t.resumes)},refresh:function(){var e,t,i;this.refreshing||(i=null,e=function(e,t){delete this.refreshing,t||(this.bookmarked=i)}.bind(this),this.refreshing=!0,t={queryService:this.model,listElement:"bookmark",query:{_type:"bookmarkSearch",userId:this.userId},batchSize:100,parseKey:function(e){return e.contentId},parseValue:function(e){var t=parseDate(e.modificationTime[0]),i=t?t.getTime():null;return{timeSeconds:parseInt(e.timeSeconds[0],10),modificationTime:i}}},i=new vui.StaticList(t,e))},fetchResumeData:function(i){if(!this.userId)return alert("no userid for bookmarkSearch"),void(i&&i([]));var s=null,e=function(e,t){if(t)return alert("ERROR: get last30DayBookmarked fetch failed."),void(i&&i([]));this.last30DayBookmarked=s,this.makeResumeData(),this.isLast30DayDirty=!1,i&&i(this.resumes)}.bind(this),t={queryService:this.model,listElement:"bookmark",query:{_type:"bookmarkSearch",followup:["content"],modificationTimeMin:vui.getManyDaysAgo(30),userId:this.userId},parseKey:function(e){return e.contentId},batchSize:100,parseValue:function(e){var t=parseDate(e.modificationTime[0]),i=t?t.getTime():null,s=e.content&&e.content[0]||null;return{timeSeconds:parseInt(e.timeSeconds[0],10),content:s,modificationTime:i}}},s=new vui.StaticList(t,e)},isContentOwned:function(e,t,i){var s=vui._.firstArray(t.content.type);if(e[i]){if(("episode"==s||"program"==s)&&!e[i])return!1}else if(t.content.containerId){for(var n=!1,a=0;a<t.content.containerId.length;a++){if(e[t.content.containerId[a]]){n=!0;break}}if(!n)return!1}else if(("episode"===s||"program"===s)&&!e[i])return!1;return!0},makeResumeData:function(){if(this.resumes=[],this.last30DayBookmarked&&this.last30DayBookmarked.list){var e=[];if(vui.getModel().ownedMovieCache){for(var t in this.last30DayBookmarked.list){var i=this.last30DayBookmarked.list[t];if(i.content&&0!==i.timeSeconds){var s=parseInt(i.timeSeconds)/parseInt(vui._.aStr(i.content.lengthSeconds));if(s<.001||.92<s||"bonus"==vui._.aStr(i.content.type))continue;for(var n,a=t,o=Math.min(this.last30DayBookmarked.totalCount,20),r=0;r<o;r++){if(!e[r]){e[r]=a;break}this.last30DayBookmarked.list[e[r]].modificationTime<this.last30DayBookmarked.list[a].modificationTime&&(n=e[r],e[r]=a,a=n)}}}for(var l=0;l<e.length;l++)this.resumes[l]=this.last30DayBookmarked.list[e[l]]}else alert("ownedMovieCache not available yet.")}},add:function(e,t,i,s){this.bookmarked&&(this.bookmarked.list[e]={timeSeconds:parseInt(t,10),modificationTime:VUDU.vuduTime()},s&&(this.bookmarked.list[e].resetBookmark=s),this.last30DayBookmarked.list[e]=this.last30DayBookmarked.list[e]||{},this.last30DayBookmarked.list[e].content=i||(this.last30DayBookmarked.list[e].content||null),this.last30DayBookmarked.list[e].timeSeconds=parseInt(t,10),this.last30DayBookmarked.list[e].modificationTime=VUDU.vuduTime(),this.last30DayBookmarked.totalCount++,this.updated=!0,this.makeResumeData())},remove:function(e){this.bookmarked&&this.last30DayBookmarked&&(delete this.bookmarked.list[e],delete this.last30DayBookmarked.list[e],this.last30DayBookmarked.totalCount--,this.updated=!0),this.makeResumeData(),this.model.doQuery({_type:"bookmarkRemove",contentId:e,userId:this.userId},function(e,t,i){})},check:function(e){return!(!this.bookmarked||!this.bookmarked.list)&&this.bookmarked.list[e]},getLastWatchedContentId:function(e){var t,i,s,n,a=e?(n=Number(vui.familyModel.getAgeLimit())||12,this.resumes.filter(function(e){return t=e.content.ageLimit,i=e.content.contentId,s=vui.m._checkRental(i),!(s&&!getTimeDiffString(s))&&t&&Number(t)<=n})[0]):this.resumes[0];return a&&a.content&&a.content.contentId[0]}}),vui.KidsModeCache=new Class({data:{},totalCount:0,queryList:[{name:vui.vvPlatform.appFeatureEnabled()?"Your Movies":"My Movies",rowNum:1,isAVOD:!1,query:{listType:"rentedOrOwned",type:"program",superType:"movies",sortBy:"-purchaseTime"}},{name:vui.vvPlatform.appFeatureEnabled()?"Your TV":"My TV",rowNum:2,isAVOD:!1,query:{listType:"rentedOrOwned",type:["episode","season"],superType:"tv",sortBy:"-purchaseTime",groupBy:"season",followup:["totalCount","seasonNumber","episodeNumberInSeason"]}},{name:"Free Movies",rowNum:3,isAVOD:!0,query:{type:"program",superType:"movies",isAdvertEnabled:"true",sortBy:"-watchedScore"}},{name:"Free TV",rowNum:4,isAVOD:!0,query:{type:"season",superType:"tv",isAdvertEnabled:"true",sortBy:"-watchedScore"}}],initialize:function(e){this.model=e,this.refreshBookmark=!1},setRefreshBookmark:function(){this.refreshBookmark=!0},getRefreshBookmark:function(){return!!this.refreshBookmark&&!(this.refreshBookmark=!1)},load:function(){this.model.userId?(this.fetchQueryList(),this.AVODloaded=null):this.AVODloaded||this.fetchQueryListWhenDeactivated()},fetchQueryListWhenDeactivated:function(){this.data={},this.AVODloaded=!0,this.queryList.slice(2).forEach(function(e){this.fetchData(e)}.bind(this))},refreshOwned:function(){this.queryList.slice(0,2).forEach(function(e){this.fetchData(e)}.bind(this))},fetchQueryList:function(){this.queryList.forEach(function(e){this.fetchData(e)}.bind(this))},fetchData:function(s){s&&(s.callback=function(t){delete this.data[s.name];var i={};Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(s).forEach(function(e){i[e]=s[e]}),this.data[s.name]=i}.bind(this),vui.m.getKidsModeSampleList(s))},loadKidsResumeData:function(){if(this.model.userId){var e=vui.getModel();this.data["Continue Watching"]={content:[],totalCount:0,isAVOD:!1,rowNum:0,title:"Continue Watching"};var t=e.bookmarkCache&&e.bookmarkCache.resumes;if(!t)return void alert("ERROR: NO RESUME DATA FOUND!");var n=Number(vui.familyModel.getAgeLimit()),i=t.filter(function(e){var t,i=e.content&&e.content.ageLimit,s=!0;return e.content&&e.content.contentId&&((t=vui.m._checkRental(e.content.contentId))&&!getTimeDiffString(t)&&(s=!1)),s&&i&&Number(i)<=n});this.data["Continue Watching"].content=i,this.data["Continue Watching"].totalCount=i.length}else alert("ERROR: LOAD KIDS RESUME DATA FAILED, USER NOT LOG IN")},isBookmarkUpdated:function(){var e=this.data["Continue Watching"]&&this.data["Continue Watching"].totalCount||0,t=(t=vui.m.bookmarkCache.resumes||[]).filter(function(e){var t=e.content||{},i=Number(vui.familyModel.getAgeLimit());if(t&&t.contentId){var s=t.ageLimit&&Number(t.ageLimit)<=i,n=!0,a=!0;vui.familyModel.getShowAVOD()||(n=vui.m.ownedMovieCache[t.contentId]||"false"===vui._.aStr(t.isAdvertEnabled));var o=vui.m._checkRental(t.contentId);return o&&!getTimeDiffString(o)&&(a=!1),a&&s&&n}});return watchlistLen=t.length||0,e===watchlistLen},getCache:function(){this.loadKidsResumeData();var e=[],t=vui.familyModel.getShowAVOD();vui.m.userId||(t=!0);var i,s=0;for(var n in this.data){!t&&this.data[n].isAVOD||(this.data[n].totalCount&&0<this.data[n].totalCount&&(0!==this.data[n].rowNum||vui.familyModel.getShowAVOD()?e.push(this.data[n]):((i={}).content=this.data[n].content.filter(function(e){return vui.m.ownedMovieCache[e.content.contentId]||"false"===vui._.aStr(e.content.isAdvertEnabled)}),i.totalCount=i.content.length,i.title=this.data[n].title,i.rowNum=this.data[n].rowNum,0<i.totalCount&&e.push(i))),s+=Number(this.data[n].totalCount))}for(var a=0,o=e.length;a<o;a++)for(var r,l=0;l<o-a-1;l++){e[l].rowNum>e[l+1].rowNum&&(r=e[l],e[l]=e[l+1],e[l+1]=r)}return this.totalCount=s,e},getTotalCount:function(){return this.totalCount||0},isEmpty:function(){var e=vui.vvPlatform.appFeatureEnabled()?"Your":"My",t=this.data[e+" Movies"]&&vui._.aStr(this.data[e+" Movies"].totalCount)||"0",i=this.data[e+" TV"]&&vui._.aStr(this.data[e+" TV"].totalCount)||"0";return 0===parseInt(t,10)&&0===parseInt(i,10)},reset:function(){delete this.data,this.data={}},refresh:function(){this.reset(),this.load(),this.loadKidsResumeData()}}),vui.RecommendedCache=new Class({data:[],limit:5,totalCount:0,tasteContentIds:[],initialize:function(e){this.model=e,this.tasteCache={}},preFetch:function(){var e;this.model.userId&&(e=function(e){this.gotRecommended(e)}.bind(this),this.model.getRecommended(e))},gotRecommended:function(e){if(e&&e.recommendationContentsInTaste&&e.recommendationContentsInTaste[0]){this.data=[];for(var t,i,s=e.recommendationContentsInTaste,n=0,a=[],o=0;o<s.length;o++){s[o].tasteId&&s[o].contentId&&((t=vui._.aStr(s[o].tasteId))?(i=s[o].contentId,this.tasteContentIds[t]=i,this.data[n]=s[o],this.data[n].first5Ids=i.slice(0,5),a=a.concat(this.data[n].first5Ids),this.data[n].title||(this.data[n].title=["JUST FOR YOU"]),n++):alert("Recommended: no tasteId found."))}var r=function(e){for(var t={},i=0;i<e.length;i++){(n=vui._.aStr(e[i].contentId))&&(t[n]=e[i])}for(i=0;i<this.data.length;i++){var s=this.data[i].first5Ids||[];this.data[i].content=[],this.data[i].contentId=[];for(var n,a=0;a<s.length;a++){t[n=s[a]]&&(this.data[i].content.push(t[n]),this.data[i].contentId.push(n))}}}.bind(this);this.model.contentSearchWithContentIds(a,r)}},getContentIdsByTasteId:function(e){return this.tasteContentIds[e]||[]}}),vui.PersonalizedCache=new Class({uxPage:{},uxRow:{},subTabs:{},uxRowSearchList:{},cacheStaleInterval:144e5,initialize:function(e){this.model=e},getUxRowSearch:function(i,s,n){var e;this.uxRowSearchList[i]&&0<this.uxRowSearchList[i].data.length&&!this.uxRowSearchList[i].loadingMore&&this.uxRowSearchList[i].staleTime>=VUDU.vuduTime()?n(this.uxRowSearchList[i].data):((!this.uxRowSearchList[i]||this.uxRowSearchList[i].staleTime<VUDU.vuduTime())&&(this.uxRowSearchList[i]={},this.uxRowSearchList[i].data=[],this.uxRowSearchList[i].staleTime=VUDU.vuduTime()+this.cacheStaleInterval,this.uxRowSearchList[i].adImageUrl=null,this.uxRowSearchList[i].backgroundImageUrl=null),e=function(e){if(e&&"uxRowList"===e._type){for(var t=0;t<e.uxRow.length;t++)this.uxRowSearchList[i].data.push(e.uxRow[t]);"true"===e.moreBelow[0]?(this.uxRowSearchList[i].loadingMore=!0,s+=10,this.getUxRowSearch(i,s,n)):(this.uxRowSearchList[i].loadingMore=!1,n(this.uxRowSearchList[i]))}else n(null)}.bind(this),this.model.getUxRowSearch(i,s,e))},getUxPage:function(i,s){var e;this.uxRowSearchList[i]&&0<this.uxRowSearchList[i].data.length&&!this.uxRowSearchList[i].loadingMore&&this.uxRowSearchList[i].staleTime>=VUDU.vuduTime()?s(this.uxRowSearchList[i]):((!this.uxRowSearchList[i]||this.uxRowSearchList[i].staleTime<VUDU.vuduTime())&&(this.uxRowSearchList[i]={},this.uxRowSearchList[i].data=[],this.uxRowSearchList[i].staleTime=VUDU.vuduTime()+this.cacheStaleInterval,this.uxRowSearchList[i].adImageUrl=null,this.uxRowSearchList[i].backgroundImageUrl=null),e=function(e){if(e&&"uxPage"===e._type){"true"===e.hasBackgroundImage[0]?this.uxRowSearchList[i].backgroundImageUrl=this.model.getBackgroundUrlFromPageId(i):this.uxRowSearchList[i].backgroundImageUrl=null;for(var t=0;t<e.rows[0].uxRow.length;t++)this.uxRowSearchList[i].data.push(e.rows[0].uxRow[t]);"true"===e.rows[0].moreBelow[0]?(this.uxRowSearchList[i].loadingMore=!0,this.getUxRowSearch(i,10,s)):(this.uxRowSearchList[i].loadingMore=!1,s(this.uxRowSearchList[i]))}else s(null)}.bind(this),this.model.getUxPage(i,e))},getUxRow:function(t,i){var e;this.uxRow[t]?i(this.uxRow[t]):(e=function(e){e&&"uxRow"===e._type?(this.uxRow[t]=e,i(e)):i(null)}.bind(this),this.model.getUxCollection(t,e))},getUxPageRow:function(e,t){}}),vui.FeaturedCache=new Class({data:[],limit:15,totalCount:0,uiPage:{},rowCache:{},UI_ENTRY_TAG_MAPPING:{featured:101,exploreMovie:103,exploreTV:104},subTabs:null,cacheStaleInterval:144e5,initialize:function(e){this.model=e},findStaleTime:function(s){return s?Object.keys(s).reduce(function(e,t){var i=new Date(vui._.aStr(s[t].stopTime)).getTime();return i<e?i:e},VUDU.vuduTime()+this.cacheStaleInterval):0},getFeaturedSubTabs:function(t){var s,e;this.subTabs&&0<this.subTabs.length&&(t(this.subTabs),s=!0,this.subTabs.staleTime>VUDU.vuduTime())||(e=function(e){var i;(e=e||[]).push({title:["Collections"]}),1<e.length&&(this.subTabs=e,this.subTabs.staleTime=this.findStaleTime(e),this.subTabsMap={},(i=this).subTabs.forEach(function(e,t){i.subTabsMap[vui._.aStr(e.title)]=t})),s||t(e)}.bind(this),this.model.getFeaturedSubTabs(e))},getSubTabIndex:function(e){return this.subTabsMap[e]},getFeatured:function(e,t){if(this.subTabs&&this.subTabs[e]){try{var i=this.subTabs[e].parameters[0],s=i[i.name[0]][0].pageId[0]}catch(e){}if(!s)return alert("no uiPageId"),void t(null);var n=!1;this.uiPage[s]&&(t(this.uiPage[s]),n=!0,this.uiPage[s].staleTime>VUDU.vuduTime())||this.model.getFeatured(s,function(e){if(!e)return alert("no uiPage"),void t(null);this.uiPage[s]=vui._.parseUIPage(e),this.uiPage[s].staleTime=VUDU.vuduTime()+this.cacheStaleInterval,n||t(this.uiPage[s])}.bind(this))}else alert("no subTab ind: "+e)},getFeaturedRow:function(e,t,n,a){var i,s,o=t+"_"+e,r=!1;this.rowCache[o]&&this.rowCache[o].title===n.title&&(a(this.rowCache[o]),r=!0,this.rowCache[o].staleTime>VUDU.vuduTime())||(i=function(e,t,i){var s={};s.content=e.data,s.searchParams=n.contentSearchParameters,s.layoutHint=n.layoutHint||"",s.totalCount=e.realTotalCount,s.title=n.title||"",s.staleTime=this.findStaleTime(e.data),this.rowCache[o]=s,r||a(s)}.bind(this),s={searchParams:n.contentSearchParameters,callback:i},n.maxResults&&(s.maxResults=n.maxResults),s.maxResults=5,vui.getModel().getMovieList(s))},clearCache:function(){for(var e in this.subTabs&&(this.subTabs.staleTime=0),this.rowCache)this.rowCache[e].staleTime=0;for(var t in this.uiPage)this.uiPage[t].staleTime=0}}),vui.UiEntryRibbonCache=new Class({data:{},initialize:function(e){this.model=e},uiEntrySearch:function(e,s){var t,n=this._makeBadKey(e);this.data[n]?s(this.data[n]):(t={searchParams:e,callback:function(e,t,i){if(e&&e.data)try{this.data[n]=e,s(e)}catch(e){alert("create UiEntryRibbonCache error key: "+n)}else s(null)}.bind(this),startAt:0,batchSize:2*vui._CONS.showcaseRibbonCap},this.model.getMovieList(t))},_makeBadKey:function(e){var t="";for(var i in e){"_type"!=i&&"followup"!=i&&(t+=i+e[i])}return t}}),vui.UiPageCache=new Class({uiPage:{},initialize:function(e){this.model=e},uiPageSearch:function(n,a){var e,t;this.uiPage[n]&&this.uiPage[n].parameters&&this.uiPage[n].parameters.listParameters?a(this.uiPage[n]):(e=function(e,t,i){if(t===vui.getModel().queryStatus.ST_SUCCESS)try{var s=vui._.parseUIPage(i.uiPage[0]);if(this.uiPage[n]=s,this.uiPage[n].rowCache=[],s&&s.parameters&&s.parameters.listParameters)return void a(s)}catch(e){}a(null)}.bind(this),t={_type:"uiPageSearch",uiPageId:n},this.model.doQuery(t,e))},getRow:function(a,o,e,r){if(!this.uiPage[a])return alert("no uiPage_pageId"),void r(null);var t;this.uiPage[a]&&this.uiPage[a].rowCache&&this.uiPage[a].rowCache[o]?r(this.uiPage[a].rowCache[o],!0):(t={searchParams:e,maxResults:5,callback:function(e,t,i){if(!e.data)return alert("no uiPage_pageId model"),void r(null);var s=this.uiPage[a],n={};n.content=e.data,n.searchParams=s.parameters.listParameters[o].contentSearchParameters,n.totalCount=e.realTotalCount,n.title=s.title||"",this.uiPage[a].rowCache[o]=n,r(n)}.bind(this)},this.model.getMovieList(t))}}),window.vui.QueryProxy||(window.vui.QueryProxy={}),window.vui.QueryProxy.proxy=function(e,t){var i=vui.NoteUrlPath.toStringGeneric(e),s=vui.QueryProxy.mockQueries;return!!s[i]&&(t(0,vui.getModel().queryStatus.ST_SUCCESS,s[i]),!0)},window.vui.QueryProxy||(window.vui.QueryProxy={}),window.vui.QueryProxy.mockQueries={},vui.RefreshNotifier=new Class({autoRefreshMilliSeconds:1e4,addAutoRefreshListener:function(e,t){if(e&&t){this.refreshListenersArray||(this.refreshListenersArray=[]);for(var i,s=null,n=this.refreshListenersArray.length,a=0;a<n;a++){var o=this.refreshListenersArray[a];o[0]==e&&(s=o)}s?s[1]=t:this.refreshListenersArray.push([e,t]),this.refreshTimer||(i=function(){this.notifyRefreshListeners()}.bind(this),this.refreshTimer=setInterval(i,this.autoRefreshMilliSeconds))}else alert("addAutoRefreshListener: returning because object or func is not defined")},notifyRefreshListeners:function(){if(this.refreshListenersArray)for(var e=this.refreshListenersArray.length,t=0;t<e;t++){if(!this.refreshListenersArray)return;var i=this.refreshListenersArray[t];i?i[1]():alert("WARNING: elem is null for notifyRefreshListeners at index:"+t)}},removeAutoRefreshListener:function(e){var t=null;if(this.refreshListenersArray){for(var i=this.refreshListenersArray.length,s=0;s<i;s++){this.refreshListenersArray[s][0]==e&&(alert("removeAutoRefreshListener, found the object to remove:"+e.toString()+", at:"+s),t=s)}$defined(t)?(alert("removeAutoRefreshListener, removeing:"+e.toString()),this.refreshListenersArray.splice(t,1)):alert("removeAutoRefreshListener, NOT removeing:"+e.toString()),this.refreshTimer&&0===this.refreshListenersArray.length?(alert("removeAutoRefreshListener, cancelling"),clearInterval(this.refreshTimer),delete this.refreshTimer):alert("removeAutoRefreshListener, not cancelling because there are other active listeners")}},removeAllAutoRefreshListeners:function(){this.refreshTimer&&(clearInterval(this.refreshTimer),delete this.refreshTimer),this.refreshListenersArray&&delete this.refreshListenersArray}}),vui.pages.DialogBase=new Class({Extends:vui.widgets.Container,init:function(e){var t;this.currentWidgetTopIndex=0,this.skipHistory=!0,(e=e||{}).elemClassName&&(this.elem.className=e.elemClassName),e.isOpaqueBg||(this.overlay=createDiv({className:e.opacity||"opacity80",width:window.vui.ResDef.SCREEN_WIDTH,height:window.vui.ResDef.SCREEN_HEIGHT},this.elem),t="containerBg",e.containerBgClassName&&(t=t+" "+e.containerBgClassName),this.containerBg=createDiv({className:t},this.elem))},show:function(){},onBack:function(){controller.hidePopup()},onHome:function(){controller.hidePopup(),controller.goHome()}}),vui.pages.ZeroButtonDialog=new Class({Extends:vui.pages.DialogBase,show:function(e){this.parent(e),vui._.setAriaLabel(e.message);var t=document.createElement("div");t.className="headerText",t.innerHTML=e.message,this.elem.appendChild(t),e.callback&&(this.callback=e.callback)},onBack:function(){this.callback?this.callback():controller.hidePopup()}}),vui.widgets.overlayDialogue=new Class({Extends:vui.widgets.Container,elemClassName:"overlay_dialogue",init:function(e){(e=e||{}).elemClassName&&(this.elem.className=e.elemClassName),this.overlay=createDiv({className:e.opacity||"opacity80",width:window.vui.ResDef.SCREEN_WIDTH,height:window.vui.ResDef.SCREEN_HEIGHT},this.elem),this.containerBg=createDiv({className:"containerBg"},this.elem)},onBack:function(){controller.hidePopup()},onHome:function(){controller.hidePopup(),controller.goHome()}}),vui.pages.ChoicesGenericDialog=new Class({Extends:vui.widgets.overlayDialogue,layout:{type:"vertical"},init:function(e){this.params=e||{},this.callback=e.callback,this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader choicesHeader",text:e.title},t),this.dialogHeading=createDiv({className:"dialogHeading choicesHeading",text:e.text},t),e.desc&&(this.dialogDesc=createDiv({className:"dialogDesc choicesDesc fontWhite20",text:e.desc},t));var i=e.data.headerUrl?"dialogPoster headerUrl":"dialogPoster";this.dialogPoster=createDiv({className:i},t);var s,n,a;this.dialogPoster.style.backgroundImage="url("+(s=e,n=vui.getModel().getPosterUrl(s.data,window.vui.ResDef.detailPage.POSTER_WIDTH),s.data.headerUrl?s.data.headerUrl:n.length?n:"")+")",e.data&&"episode"==e.data.type&&(createDiv({className:"posterBlockOverlaySmall fontMedium"},this.dialogPoster).innerHTML=vui.getEpisodeSeasonLabel(e.data)),this.params.quality&&((a=new Element("img",{class:this.params.quality+"Img qualityImg"})).src=vui.images[this.params.quality+"_offer"],t.appendChild(a));for(var o=createDiv({className:"choicesButtonContainer"},t),r=0;r<e.buttons.length;r++){var l=e.buttons[r],u={label:l.label,iconSrc:vui.images[l.icon],action:l.action};l.selectButtonClass&&(u.selectButtonClass=l.selectButtonClass),l.defaultButtonClass&&(u.defaultButtonClass=l.defaultButtonClass),l.disabledButtonClass&&(u.disabledButtonClass=l.disabledButtonClass),l.size&&(u.size=l.size),l.desc&&(u.desc=l.desc);var d=new vui.widgets.ChoicesGenericButton(u);d.elem.style.top=window.vui.ResDef.detailPage.ACTION_BUTTON_HEIGHT*(1.25*r)+"px",this.attachChild(d,o),e.focus===l.label&&vui.select(d)}},onBack:function(){controller.hidePopup(),"CANCEL"===this.params.focus&&vui.select(this.params.lol)},show:function(){this.parent(),this.params.data.title&&vui._.setAriaLabel(vui.getSelected().label.innerHTML+" "+this.params.data.title[0])},onButtonAction:function(e){this.callback&&this.callback(e)}}),vui.pages.XofYDialog=new Class({Extends:vui.widgets.overlayDialogue,init:function(e){this.params=e||{},this.callback=e.callback,this.layout=e.layout,this.parent(e),this.container=createDiv({className:"offer_container XofYContainer"},this.elem);var t=createDiv({className:"XofYCartHeader"},this.container);e.cartBanner&&(this.attachChild(e.cartBanner,t),e.cartBanner.selectable=!1),this.dialogHeader=createDiv({className:"fontWhite32 XofYDialogHeader",text:e.title},this.container),this.dialogHeading=createDiv({className:"XofYDialogHeading font28",text:e.text||""},this.container);var i=new vui.widgets.TransactionSpinner;this.spinner=i,this.spinner.elem.className="spinnerCenter",this.elem.appendChild(i.elem),this.spinner.elem.style.display="none"},show:function(){"offers"===this.params.view&&this.showOffers(),"confirm"===this.params.view&&this.showConfirm(),"success"===this.params.view&&this.showSuccess()},onButtonAction:function(e){this.callback&&this.callback(e)},showSuccess:function(){var e=createDiv({className:"XofYButtonContainer successDialog"},this.container),t=new vui.widgets.ActivationOptionsButton({elemClassName:window.vui.vvPlatform.appFeatureEnabled()?"mm_success__button":"",label:vui.strings.getTransformedText("MM_BUY_MORE_BUTTON"),onAction:function(){controller.hidePopup()}});t.elem.addClass("button_1"),this.attachChild(t,e);var i=new vui.widgets.ActivationOptionsButton({elemClassName:window.vui.vvPlatform.appFeatureEnabled()?"mm_success__button":"",label:vui.strings.getTransformedText("BOTTOM_BLUE_HELP_BUTTON_HOME"),onAction:function(){controller.goHome()}});i.elem.addClass("button_2"),this.attachChild(i,e)},showOffers:function(){for(var e=createDiv({className:"choicesButtonContainer XofYButtonContainer qualitySelection"},this.container),t=0;t<this.params.buttons.length;t++){var i=this.params.buttons[t],s={label:i.label,iconSrc:vui.images[i.icon],action:i.action};i.selectButtonClass&&(s.selectButtonClass=i.selectButtonClass),i.defaultButtonClass&&(s.defaultButtonClass=i.defaultButtonClass);var n=new Element("img",{class:i.action+"Img"});n.src=vui.images[i.action+"_offer"],e.appendChild(n);var a=new vui.widgets.ChoicesGenericButton(s);a.elem.style.top=n.style.top=window.vui.ResDef.detailPage.ACTION_BUTTON_HEIGHT*(1.5*t)+"px",this.attachChild(a,e)}this.cancelButton=new vui.widgets.TransactionCancelButton,this.attachChild(this.cancelButton,e)},showConfirm:function(){var e=this.params.purchasePlan[0];this.confirmOfferInfo=createDiv({className:"confirmOfferInfo"},this.container),this.buttonContainer=createDiv({className:"offer_confirm_button_container"}),this.container.appendChild(this.buttonContainer),this.offerText=createDiv({className:"fontMedium offerText",text:vui.strings.getTransformedText("CONFIRM_OFFER_OWN")},this.buttonContainer),this.confirmButton=new vui.widgets.TransactionConfirmButton,this.confirmButton.defaultClassName="btn_bg_confirm_default",this.confirmButton.selectClassName="btn_bg_confirm_select",this.attachChild(this.confirmButton,this.buttonContainer),this.cancelButton=new vui.widgets.TransactionCancelButton,this.attachChild(this.cancelButton,this.buttonContainer),this.taxOK=e&&e.tax&&null!=e.tax[0]&&"0"!=e.tax[0];var t=e&&(null!=e.serviceCreditAmount||null!=e.realMoneyAmount||null!=e.giftCardAmount||e.shippingCost||this.taxOK),i=e&&e.needRealMoneyAmount&&e.needRealMoneyAmount[0]||0,s=window.getPriceStr(i.toString());this.confirmButton.setLabel(vui.strings.getTransformedText("CONFIRM_OFFER_X_FOR_PRICE","",s)),this.ariaItemized="",t&&this.createItemized(e,this.params);var n=this.params.quality||"sd";this.confirmButton.setIcon(vui.images[n+"_overlay"]),"hdx"==n||"uhd"==n?this.confirmButton.icon.style.width=window.vui.ResDef.overlays.QUALITY_ICON_HDX_WIDTH+"px":(this.confirmButton.icon.style.width=window.vui.ResDef.overlays.QUALITY_ICON_HD_WIDTH+"px",this.confirmButton.elem.addClass("small"))},createLineItem:function(e,t,i,s){var n;createDiv({className:"offerItemizedText font18 "+s,top:this.pos,text:e+":"},this.frag),this.ariaItemized+=". "+e+": ",t?(n=vui.strings.getText("CONFIRM_OFFER_X_PRICE",window.getPriceStr(i)),parseFloat(i)||"Shipping"!=e||(n="FREE"),createDiv({className:"offerItemizedValue font18 "+s,top:this.pos,text:n},this.frag),this.ariaItemized+=vui.strings.getText("CONFIRM_OFFER_X_PRICE",window.getPriceStr(i))):(createDiv({className:"offerItemizedValue font18",top:this.pos,text:vui.strings.getText("CONFIRM_OFFER_NEG_X_PRICE",window.getPriceStr(i))},this.frag),this.ariaItemized+=vui.strings.getText("CONFIRM_OFFER_NEG_X_PRICE",window.getPriceStr(i))),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING},createItemized:function(e,t){this.frag=document.createDocumentFragment(),this.pos=0;var i=e.subTotal&&e.subTotal[0]||0,s=e.tax&&e.tax[0]||0,n=e.serviceCreditAmount&&e.serviceCreditAmount[0]||0,a=e.needRealMoneyAmount&&e.needRealMoneyAmount[0]||0,o=e.giftCardAmount&&e.giftCardAmount[0]||0,r=vui._.aStr(e.shippingCost)||0;e.realMoneyAmount&&(n=(+(n||0)+(e.realMoneyAmount&&+e.realMoneyAmount[0])).toString()),this.total=(parseFloat(i)+parseFloat(s)+parseFloat(r)-parseFloat(n)).toFixed(2),this.confirmButton.setLabel(vui.strings.getTransformedText("CONFIRM_OFFER_X_FOR_PRICE","",getPriceStr(this.total))),i&&(t.discount?this.createLineItem("Price",!0,i,"condOffer"):this.createLineItem("Price",!0,i)),this.taxOK&&this.createLineItem("Tax",!0,s),n&&this.createLineItem("Service Credit",!1,n),createDiv({className:"total_divider",top:this.pos,width:260,left:130},this.frag),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/3,this.createLineItem("Total",!0,this.total,"total"),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/2,(o||a)&&createDiv({className:"total_charged offerItemizedText font18",top:this.pos,text:"Charged to"},this.frag),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/1.5,o&&this.createLineItem("Gift Card Amount",!1,o),a&&this.createLineItem("Payment on File",!1,a),this.confirmOfferInfo.appendChild(this.frag),this.buttonContainer.addClass("itemized")},onConfirm:function(){this.spinner.spin(),this.spinner.elem.style.display="block",this.callback("confirm")},hide:function(){this.spinner.stop(),this.parent()}}),vui.pages.ConfirmExitDialog=new Class({Extends:vui.widgets.overlayDialogue,elemClassName:"exit_dialog",layout:{type:"horizontal"},init:function(e){this.params=e||{},this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:e.title},t),this.dialogHeading=createDiv({className:"fontWhite20 dialogHeading long_heading",text:e.text},t),this.dialogPoster=createDiv({className:"confirmPoster"},t),this.dialogPoster.style.background="url("+e.img+")";var i=createDiv({className:"offer_confirm_button_container exit"},t),s=e.buttons[0],n=s.label||vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_DONE");this.confirmButton=new vui.widgets.TransactionConfirmButton(s),s.label||this.confirmButton.setLabel(n),s.className&&this.confirmButton.elem.addClass(s.className),this.attachChild(this.confirmButton,i),e.buttons[1]&&(this.cancelButton=new vui.widgets.TransactionCancelButton,this.attachChild(this.cancelButton,i)),e.onBack&&(this.onBack=e.onBack)},show:function(){this.parent();var e=this.params.buttons[0].label||vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_DONE");vui.select(this.confirmButton),vui._.setAriaLabel(this.params.title+". "+this.params.text+". "+e)},onConfirm:function(){this.params.callback()}}),vui.pages.ConfirmExitCodeDialog=new Class({Extends:vui.widgets.overlayDialogue,elemClassName:"exit_dialog code",layout:{type:"horizontal"},init:function(e){this.params=e||{},this.parent(e);var t=createDiv({className:"offer_container code"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:e.title},t),this.text1=createDiv({className:"fontWhite20 dialogHeading long_heading code",text:e.text1},t);var i=createDiv({className:"offer_confirm_button_container exit"},t),s=e.buttons[0],n=s.label;this.confirmButton=new vui.widgets.TransactionConfirmButton(s),s.label||this.confirmButton.setLabel(n),s.className&&this.confirmButton.elem.addClass(s.className),this.attachChild(this.confirmButton,i),this.text2=createDiv({className:"fontWhite20 dialogHeading long_heading text2",text:e.text2},t)},show:function(){this.parent();var e=this.params.buttons[0].label;vui.select(this.confirmButton);var t=this.params.title+". "+this.params.text1+". "+e+". ";this.params.text2&&(t+=this.params.text2),vui._.setAriaLabel(t)},onConfirm:function(){this.params.callback()},onBack:function(){this.params.callback()}}),vui.widgets.buttonWidget=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).imgSrc||(e.defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select"),e.size&&(e.defaultClassName="btn_bg_default btn_bg_size"+e.size+"_default",e.selectClassName="btn_bg_select btn_bg_size"+e.size+"_select"),!e.name||"back"!==e.name&&"cancel"!==e.name||(e.defaultClassName+=" btn_bg_cancel_default",e.selectClassName+=" btn_bg_cancel_select"),this.parent(e),this.label.className=this.label.className+" font18",e.centered&&(this.label.style.textAlign="center",this.label.style.width="100%",this.label.style.margin="8px 0 0 0"),this.elem.style.left=e.leftPos+"px",this.buttonName=e.name},onAction:function(){vui.executeOnContainer(this.parentWidget,"onButtonEvent",{name:this.buttonName})},onSelect:function(){this.parent(),"done"===this.buttonName&&vui.executeOnContainer(this.parentWidget,"doneSelected")}}),vui.widgets.buttonWidgetContainer=new Class({Extends:vui.widgets.Container,init:function(e){this.elem.className=e.elemClassName,this.layout=e.layout},onDirectionLeft:function(){this.children[0]==vui.getSelected()?vui.executeOnContainer(this.parentWidget,"selectKeyboard"):vui.select(this.children[0])}}),vui.widgets.OverlayDialogBox=new Class({Extends:vui.widgets.Container,layout:{type:"vertical"},init:function(e){(e=e||{}).dialogBoxClassName&&(this.elem.className=e.dialogBoxClassName),this.titleText=createDiv({text:e.title,className:"dialogTitleText font30"},this.elem),e.layout&&(this.layout=e.layout)},setTitleText:function(e){this.titleText.innerHTML=e},setButtons:function(e,t){if(this.buttons=e,this.buttonContainer&&this.detachChild(this.buttonContainer),!this.buttons||0!==this.buttons.length){var i=t?t:{type:"horizontal"};this.buttonContainer=new vui.widgets.buttonWidgetContainer({elemClassName:"dialogBox_button_container",layout:i}),this.buttonContainer.elem.addClass("layout_"+this.buttons.length+"_buttons"),this.attachChild(this.buttonContainer);for(var s=0;s<this.buttons.length;s++){this.buttons[s].elemClassName=" imageActionButton button_"+s;var n=new vui.widgets.buttonWidget(this.buttons[s]);this.buttonContainer.attachChild(n)}}}}),vui.pages.OverlayDialogNew=new Class({Extends:vui.pages.DialogBase,elemClassName:"overlayDialogNew",init:function(e){this.parent(e),this.dialogBox=new vui.widgets.OverlayDialogBox(e),this.attachChild(this.dialogBox)},show:function(e){this.parent(e)}}),vui.pages.SimpleTextDialog=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){(e=e||{}).dialogBoxClassName?e.overrideBoxClassName||(e.dialogBoxClassName=e.dialogBoxClassName+" simpleTextDialog"):e.dialogBoxClassName="simpleTextDialog",e.containerBgClassName="containerBg_small",e.isOpaqueBg=!1,this.parent(e)},show:function(e){e=e||{},this.parent(e),e.top&&(this.containerBg.style.top=e.top,this.dialogBox.elem.style.top=e.top),e.left&&(this.containerBg.style.left=e.left,this.dialogBox.elem.style.left=e.left),e.backgroundImage&&(this.containerBg.style.backgroundImage="url("+e.backgroundImage+")"),this.text=createDiv({text:e.text,className:"dialogInnerText font20"},this.dialogBox.elem),e.textPos&&(this.text.style.position=e.textPos),e.titlePos&&(this.dialogBox.titleText.style.position=e.titlePos),e.text2&&(this.text2=createDiv({text:e.text2,className:"dialogInnerText dialogInnerTextSecondary font20"},this.dialogBox.elem)),e.text3&&(this.text3=createDiv({text:e.text3,className:"dialogInnerText dialogInnerTextThird font20"},this.dialogBox.elem));var t="";e.buttons&&(this.dialogBox.setButtons(e.buttons,e.buttonContainerLayout),t=e.buttons[0].label,e.selectDefault&&vui.select(this.dialogBox)),e.buttonPos&&(this.dialogBox.buttonContainer.elem.style.position=e.buttonPos),this.callback=e.callback;var i=e.title+". "+e.text+". ";e.text2&&(i+=e.text2+". "),e.text3&&(i+=e.text3+". "),i+=t,e.hint&&(i+=" "+e.hint),i=i.replace(/<br\/>/g,""),e.buttonArial||vui._.setAriaLabel(i)},onButtonEvent:function(e){var t=e.name;this.callback&&this.callback(t)},onBack:function(){this.callback&&this.callback("back")}}),vui.pages.PosterTextDialog=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){(e=e||{}).dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" posterTextDialog":"posterTextDialog",e.isOpaqueBg=!1,this.parent(e);var t=new vui.widgets.TransactionSpinner;this.spinner=t,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(t.elem)},show:function(e){e=e||{},this.parent(e),this.poster=createImg({src:e.poster,className:"dialogPoster"},this.dialogBox.elem),this.titleText=createDiv({text:e.title,className:"dialogTitleText font32"},this.dialogBox.elem),this.text=createDiv({text:e.text,className:"dialogInnerText font20"},this.dialogBox.elem);var t="";e.buttons&&(this.dialogBox.setButtons(e.buttons,e.buttonContainerLayout),t=e.buttons[0].label),this.callback=e.callback,vui._.setAriaLabel(e.title+". "+e.text+". "+t)},onButtonEvent:function(e){var t=e.name;"confirm"===t&&this.spinner.spin(),this.callback&&this.callback(t)},hide:function(){this.spinner.stop()},onBack:function(){this.callback&&this.callback("back")}}),vui.pages.ScrollableTextDialog=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){(e=e||{}).dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" simpleTextDialog":"simpleTextDialog",e.containerBgClassName="containerBg_small",e.isOpaqueBg=!1,this.parent(e)},show:function(e){e=e||{},this.parent(e),this.textContainer=createDiv({className:"dialogScrollableBox"},this.dialogBox.elem),this.text=createDiv({text:e.text,className:"dialogScrollableText font20"},this.textContainer),this.textTop=0,e.buttons&&this.dialogBox.setButtons(e.buttons,e.buttonContainerLayout),this.callback=e.callback,vui._.setAriaLabel(e.title+". "+e.text+". "+e.buttons[0].label)},onButtonEvent:function(e){var t=e.name;this.callback&&this.callback(t)},onBack:function(){this.callback&&this.callback("back")},onDirectionDown:function(){this.textTop<-200||(this.textTop-=window.vui.ResDef.overlays.SCROLL_LENGTH,this.text.style.top=this.textTop+"px")},onDirectionUp:function(){0!=this.textTop&&(this.textTop+=window.vui.ResDef.overlays.SCROLL_LENGTH,this.text.style.top=this.textTop+"px")}}),vui.pages.HelpInfoDialog=new Class({Extends:vui.pages.SimpleTextDialog,name:"vui.widgets.HelpInfoDialog",elemClassName:"helpInfoDialog",init:function(){this.parent({title:"Remote Control Help"}),this.topPos=window.vui.ResDef.infoSettingsView.PC_SCROLLER_H,this.counter=1,this.createRow("HELP_GOTO_HOME"),this.createRow(),this.createRow("HELP_PREV_PAGE_EXIT",vui.images.returnRemoteButton)},show:function(){this.parent({callback:function(){controller.hidePopup()},buttons:[{label:"OK"}]}),vui._.setAriaLabel("Remote Control Help. Blue Button: Go to Vudu Home page. Red Button: Show help menu. Back Button: previous page or exit Vudu. OK")},createRow:function(e,t){this.topPos+=window.vui.ResDef.infoSettingsView.CREDITS_H,params={elemClassName:"fontMedium help_section row_"+this.counter,textLabel:e?vui.strings.getText(e):"Show Help Menu",imgSrc:t||"",top:this.topPos};var i=new vui.widgets.ImageAndTextPanel(params);i.selectable=!1,this.attachChild(i),this.counter++}}),vui.widgets.TextField=new Class({Extends:vui.widgets.Container,name:"vui.widgets.textField",elemClassName:"activation_textField font20",layout:{type:"horizontal"},nbsp:" ",init:function(e){e=e||{};this.elem.style.background="url('"+vui.images.text_field+"') 0 0 no-repeat",this.selectable=!1,this.password=e.password,this.helpText=e.helpText,e.text?this.setText(e.text):this.setText("")},obscureText:function(){var e=this.textWidget.text;this.textWidget.text=e.replace(/./i,"*")},setText:function(e){var t;e&&""!=e||(this.elem.innerHTML=this.helpText),"…"==e?this.elem.addClass("longEmail"):this.elem.removeClass("longEmail"),this.password&&(t=e.charAt(e.length-1),e=(e=e.replace(/./gi,"*")).substr(0,e.length-1)+t),e=e.replace(/ /g,this.nbsp),this.elem.innerHTML=e}}),vui.widgets.TextInput=new Class({Extends:vui.widgets.Container,layout:{type:"vertical"},init:function(e){var t,i=(e=e||{}).text||"";this.fullText=i,this.textField=new vui.widgets.TextField({helpText:e.helpText,password:e.password}),this.attachChild(this.textField),this.textField.setText(i),e.prefilled&&this.setText(i),this.keyboard=new vui.widgets.KeyPadLayout,this.keypadMode=e.mode||"EMAIL",this.keyboard.bind({mode:this.keypadMode}),this.attachChild(this.keyboard),e.footnote&&(t="font14 textInputFootnote",vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(t="font14 fandangoTextInputFootnote"),createDiv({className:t,text:e.footnote},this.elem))},setText:function(e){e=e||"";var t=this.fullText.length||0,i=(this.fullText=e).length;42<i?this.textField.setText("…"):this.textField.setText(e),(1<=t&&0==i||0==t&&i<=1)&&0==i&&this.changeSelection(this.keyboard)},onKeyEvent:function(e){var t=this.fullText+e;this.setText(t)},onNumeric:function(e){var t=this.fullText+e;this.setText(t)},onDelete:function(){var e=(e=this.fullText).substring(0,e.length-1);this.setText(e)},onClear:function(){this.setText("")},onShift:function(){this.keyboard.bind({mode:"TOGGLE"})},onKey:function(e){var t=e.match(/^[A-Z]$/)&&"EMAIL"!==this.keypadMode?"Capital ":"";switch(vui._.setAriaLabel(t+vui._.getSymbolLabel(e)+"- selected"),e){case"DELETE":this.onDelete();break;case"CLEAR":this.onClear();break;case"SHIFT":this.onShift();break;case"SPACE":this.onKeyEvent(" ");break;case"&amp;":this.onKeyEvent("&");break;case"&lt;":this.onKeyEvent("<");break;case"&gt;":this.onKeyEvent(">");break;default:this.onKeyEvent(e)}},obscureText:function(){this.textField.obscureText()},getFullText:function(){return this.fullText||""}}),vui.pages.TextInputDialog=new Class({Extends:vui.pages.OverlayDialogNew,layout:{type:"vertical"},defaultButtons:[{style:"grey",width:103,height:32,name:"cancel",label:vui.strings.getText("TEXT_INPUT_DIALOG_CANCEL_BUTTON")},{style:"blue",width:103,height:32,name:"done",label:vui.strings.getText("TEXT_INPUT_DIALOG_DONE_BUTTON")}],init:function(e){(e=e||{}).containerBgClassName="containerBg_small",e.isOpaqueBg=!1,e.dialogBoxClassName="activationKeyPad_container "+e.dialogBoxClassName,this.parent(e)},show:function(e){e=e||{};var t=(this.params=e).buttons;this.parent(e);var i=new vui.widgets.TextInput(e);this.textInput=i,this.dialogBox.attachChild(i),t?this.dialogBox.setButtons(t,e.buttonContainerLayout):this.dialogBox.setButtons(this.defaultButtons,e.buttonContainerLayout),this.textInput.onDirectionDown=function(){var e=this.dialogBox.children[1];0<this.textInput.fullText.length&&e.children[1]?vui.select(e.children[1]):vui.select(e.children[0])}.bind(this),this.callback=e.callback,vui._.setAriaLabel(e.title+": "+vui._.getSymbolLabel(this.textInput.keyboard.keyPadArray[0].keyString[0].keyStr)+"-")},_sendResult:function(e){this.callback({result:e,text:this.getFullText()})},onBack:function(){this._sendResult("back")},onButtonEvent:function(e){this._sendResult(e.name)},getFullText:function(){return this.textInput.getFullText()},obscureText:function(){this.textInput.obscureText()},selectKeyboard:function(){vui.executeOnContainer(this.textInput.keyboard,"selectLastButton")},doneSelected:function(){this.params.footnote&&vui._.setAriaLabel("Done. "+this.params.footnote)}}),vui.pages.AnimationWaitDialog=new Class({Extends:vui.widgets.overlayDialogue,init:function(e){this.parent();var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 centeredDialogHeader",text:e||vui.strings.getText("CONFIRM_OFFER_PROCESSING")},t);var i=new vui.widgets.TransactionSpinner;this.spinner=i,this.spinner.elem.className="spinnerCenter",this.elem.appendChild(i.elem)},show:function(){this.spinner.spin()},hide:function(){this.spinner.stop()}}),vui.pages.FullScreenDialog=new Class({Extends:vui.pages.DialogBase,elemClassName:"full-screen-dialog",show:function(){this.containerBg.style.background="none"},onBack:function(){}}),vui.widgets.NextEpisodeButton=new Class({Extends:vui.widgets.IconButton,name:"vui.widgets.NextEpisodeButton",elemClassName:"NextEpisodeButton",activeHeight:0,init:function(){this.icon=document.createElement("div"),this.icon.className="NextEpisodeButton_icon",this.label=document.createElement("div"),this.label.className="NextEpisodeButton_label",this.elem.appendChild(this.icon),this.elem.appendChild(this.label),this.enableTTS=!1},bind:function(e,t,i){this.type=i,this.icon.style.backgroundImage="url("+e+")",this.label.innerHTML=t,this.elem.style.position="static",this.setIconDefault(),"back"===i&&this.elem.addClass("nextEpBack")},setIconActive:function(){this.elem&&this.elem.addClass("select"),this.enableTTS&&vui._.setAriaLabel(this.label.innerHTML)},setIconDefault:function(){this.elem&&this.elem.removeClass("select")},onAction:function(){vui.executeOnContainer(this.parentWidget,"buttonOnAction",this.type)},toggleEnableTTS:function(){this.enableTTS=!this.enableTTS}}),vui.pages.NextEpisodeDialogue=new Class({Extends:vui.widgets.Container,elemClassName:"NextEpisodeDialogue",init:function(e){var t,i,s;this.data=e.data,this.callback=e.callback,this.data?(this.el.bg=document.createElement("div"),this.el.bg.className="NextEpisodeDialogue_bg",this.el.bg.style.background="url("+vui.images.nextEpisodeBG+") 0 0 no-repeat",this.elem.appendChild(this.el.bg),this.el.content=document.createElement("div"),this.el.content.className="NextEpisodeDialogue_content",this.elem.appendChild(this.el.content),this.el.upnext=document.createElement("div"),this.el.upnext.className="NextEpisodeDialogue_upnext",this.el.content.appendChild(this.el.upnext),this.el.countDown=document.createElement("div"),this.el.countDown.className="NextEpisodeDialogue_countDown",this.el.content.appendChild(this.el.countDown),this.el.countDown_timer=document.createElement("div"),this.el.countDown_timer.className="NextEpisodeDialogue_countDown_timer",this.el.countDown.appendChild(this.el.countDown_timer),this.el.countDown_sec=document.createElement("div"),this.el.countDown_sec.className="NextEpisodeDialogue_countDown_sec",this.el.countDown_sec.innerHTML="SEC",this.el.countDown.appendChild(this.el.countDown_sec),this.el.title=document.createElement("div"),this.el.title.className="NextEpisodeDialogue_title",this.el.title.innerHTML=vui._.aStr(this.data.title).split(":")[0],this.el.content.appendChild(this.el.title),this.el.episode_title=document.createElement("div"),this.el.episode_title.className="NextEpisodeDialogue_title",this.el.content.appendChild(this.el.episode_title),this.el.episode_title.innerHTML="Season "+window.zeroPad(vui._.aStr(this.data.seasonNumber),2)+", Episode "+window.zeroPad(vui._.aStr(this.data.episodeNumberInSeason),2),this.el.description=document.createElement("div"),this.el.description.className="NextEpisodeDialogue_description",this.el.description.innerHTML=vui._.aStr(this.data.description),this.el.content.appendChild(this.el.description),this.nextBtn=new vui.widgets.NextEpisodeButton,this.nextBtn.bind(vui.images.watch_icon,vui.strings.getTransformedText("MOVIE_DETAILS_WATCH_NOW"),"watch"),this.attachChild(this.nextBtn,this.el.content),this.backBtn=new vui.widgets.NextEpisodeButton,this.backBtn.bind(vui.images.back_icon,vui.strings.getTransformedText("BACK_BUTTON"),"back"),this.attachChild(this.backBtn,this.el.content),vui.autoNextEpisodeCounter=vui.autoNextEpisodeCounter||0,this.isUserActive=e&&e.isUserActive,2<=vui.autoNextEpisodeCounter&&!e.isUserActive?(vui.autoNextEpisodeCounter=0,i=(i=vui.strings.getText("THEATER_WATCH_NEXT_COUNTDOWN_AUTODISABLE_APPX",vui.strings.transformCase("Watch Now"))).replace("\n","<br>"),this.el.upnext.innerHTML=i,this.el.countDown_timer.innerHTML="60",this.count=59,this.defaultButtonOnAction="back",t="Back",vui._.setAriaLabel(this.el.upnext.innerHTML+". "+this.el.title.innerHTML+". "+this.el.episode_title.innerHTML+". "+this.el.description.innerHTML+". "+t)):(this.el.upnext.innerHTML="Up Next:",this.el.countDown_timer.innerHTML="10",this.count=9,this.defaultButtonOnAction="watch",t="Watch Now",vui._.setAriaLabel(this.el.upnext.innerHTML+". "+this.el.title.innerHTML+". "+this.el.episode_title.innerHTML+". "+t)),setTimeout(function(){this.backBtn.toggleEnableTTS(),this.nextBtn.toggleEnableTTS()}.bind(this),0),s=function(){this.count<0?(window.clearInterval(vui.nextEpisodeTimer),this.buttonOnAction(this.defaultButtonOnAction,!0)):(this.el.countDown_timer.innerHTML=window.zeroPad(this.count,2),("watch"===this.defaultButtonOnAction&&this.count<5||"back"===this.defaultButtonOnAction&&this.count<45)&&vui._.setAriaLabel(this.count.toString()),this.count--)}.bind(this),vui.nextEpisodeTimer=window.setInterval(s,1e3)):alert("no next episode data")},show:function(){},_setNextEpisodeBookmark:function(){var e,t=this.data.contentId[0];vui.m.bookmarkCache.add(t,1,this.data),VUDU.registry.deviceId&&vui.account.getAccountId()&&(e={_type:"bookmarkStore",contentId:t,timeSeconds:1,userId:vui.account.getAccountId()},alert("bookmarkStore:"),alert(JSON.encode(e)),vui.getModel().doQuery(e,function(){alert("_setNextEpisodeBookmark flushed.")}))},onBack:function(){controller.hidePopup(),window.clearInterval(vui.nextEpisodeTimer),vui.autoNextEpisodeCounter=0,this._setNextEpisodeBookmark(),"Theater"===controller.baseLayer.currentPage.pageTitle&&controller.goBack()},buttonOnAction:function(e,t){window.clearInterval(vui.nextEpisodeTimer),"watch"==e?this.callback&&(!0!==t||this.isUserActive?vui.autoNextEpisodeCounter=0:vui.autoNextEpisodeCounter++,controller.hidePopup(),this.callback()):"back"==e&&this.onBack()}}),vui.MovieInfo=new Class({name:"vui.MovieInfo",initialize:function(e){if(this.queryService=e.queryService,this.movieId=e.movieId,this.callbacks=[],e.callback&&this.setListener(e.callback),this.onError=e.onError,!e.queryService)return this.initialized=!1,null;this.initialized=!0;var t={_type:"contentSearch",contentId:this.movieId,followup:["editions","geneGenres","usefulStreamableOffers","preOrderOffers","longCredits","ratingsSummaries","tomatoReviews","usefulTvPreviousAndNext","subtitleTrack","tag","uxPromoTags","hasClearplay"],type:["bonus","program","episode","season","series","bundle"],dimensionality:"any",includeTarget:[vui.vvPlatform.includeTarget,"none"]};vui.gConnectionInstance.getCommonSenseMediaEnabled()&&(t.followup=t.followup.concat(["ageLimit","parentalGuide"])),vui.gConnectionInstance.getThirdPartyEnabled()&&t.followup.push("subscriptionServiceContents"),vui.getModel().avodManager.addAvodEnabledFollowup(t),vui.getModel().avodManager.addAvodContentFollowup(t),vui.gConnectionInstance.getPhysicalDiscEnabled()&&t.followup.push("walmartOffers"),this.queryId=this.queryService.doQuery(t,function(i,e,s){var n=vui.getModel(),i=this.queryId;if(this.queryId=null,e===n.queryStatus.ST_SUCCESS){var t,a,o=function(){for(var e=0;e<this.callbacks.length;e++)this.callbacks[e]?this.callbacks[e](this):alert("ERROR: In movieInfo successful query return, somehow this callback index is null:"+e);this.release()}.bind(this);s?(t=function(e){alert("Result for query:"+i);var t=n.cleanUpMovieInfo(s);e&&Object.keys(e).length&&(t.walmartCatalogItems=e),this.data=t,this.refresh(o)}.bind(this),(a=s.content&&vui._.getWalmartItemIdsMap(s.content[0]))&&vui.gConnectionInstance.getIsRealTimePhysicalDisk()?this.getWalmartCatalogItems(a,t):t()):o()}else if(e===n.queryStatus.ST_CANCELLED)alert("Cancelled query:"+i),this.release();else{if(alert("Error status= "+e+" for query id "+i),this.onError&&this.onError(this),0<this.callbacks.length)for(var r=0;r<this.callbacks.length;r++)this.callbacks[r](null);this.release()}}.bind(this),{onTimeout:vui.getModel().QueryOptions.RETRY}),alert("Issuing movie info query:"+this.queryId)},_getBundledContent:function(r,e){var t,i={_type:"contentSearch",containerId:this.movieId,responseSubset:"micro",followup:["episodeNumberInSeason","seasonNumber","uxPromoTags"],listType:"useful",depthMax:1,count:100},s={_type:"contentSearch",containerId:this.movieId,responseSubset:"micro",followup:["totalCount"],type:["season"],listType:"useful",depthMax:1,sortBy:"-seasonNumber",count:12};"bundle"===vui._.aStr(e)&&(t=i),"series"===vui._.aStr(e)&&(t=s),vui.getModel().avodManager.addAvodEnabledFollowup(t),this.queryId=this.queryService.doQuery(t,function(e,t,i){var s=vui.getModel();if(this.queryId=null,t===s.queryStatus.ST_SUCCESS){var n=[];if(i&&i.content)for(var a=0;a<i.content.length;a++){var o=i.content[a];o.id=o.contentId,n.push(o)}r&&r(n)}else t===s.queryStatus.ST_CANCELLED?alert("Cancelled query:"+e):(alert("Error status= "+t+" for query id "+e),r&&r(null))}.bind(this),{onTimeout:vui.getModel().QueryOptions.RETRY})},refresh:function(i){var e;this.data?(this.data.variants=vui.getModel().getVariantsHash(this.data),e=function(e){var t;this.data.ownerships=e,this.refreshOffers(),"bundle"!==vui._.aStr(this.data.type)&&"series"!==vui._.aStr(this.data.type)||this.data.bundledContent?this.getRealTimePricing(i):(t=function(e){e&&(this.data.bundledContent=e),this.getRealTimePricing(i)}.bind(this),this._getBundledContent(t,this.data.type))}.bind(this),vui.getModel().getOwnershipInfo(this.data,e)):i&&i()},getRealTimePricing:function(t){var i;this.data&&this.data.walmartCatalogItems&&vui.gConnectionInstance.getIsRealTimePhysicalDisk()?(i={},Object.keys(this.data.walmartCatalogItems).forEach(function(e){i[e]=this.data.walmartCatalogItems[e]&&this.data.walmartCatalogItems[e][0].itemId[0]}.bind(this)),this.getWalmartCatalogItems(i,function(e){this.data.walmartCatalogItems=e,t&&t()}.bind(this))):t&&t()},refreshOffers:function(){var e=vui.getModel().getOffers(this.data);this.data.offers=e.offers,this.data.validOffers=vui.getModel().calculateValidOffers(this.data.variants,this.data.offers,this.data.ownerships,this.data),this.data.conditionalOfferPrice=e.conditionalOfferPrice},get:function(){return this.data},setListener:function(e){this.callbacks.push(e)},release:function(){alert("RELEASING MOVIE INFO"),delete this.callbacks,this.callbacks=[]},destroy:function(){this.release(),this.queryId&&(vui.getModel().MovieInfoCache.drop(this.movieId),this.queryService.cancelQuery(this.queryId),this.queryId=null)},hasLockedExtras:function(){return!(!this.data||"program"!==vui._.aStr(this.data.type)&&"episode"!==vui._.aStr(this.data.type)||"true"!==vui._.aStr(this.data.isContainer))},hasExtras:function(){return!(!this.data||!this.data.hasBonusWithTagExtras||"true"!=this.data.hasBonusWithTagExtras)},hasBgImage:function(){return!(!this.data||!this.data.hasBackgroundImage||"true"!=this.data.hasBackgroundImage)},getContentId:function(){return this.data.contentId&&this.data.contentId[0]},getUserRating:function(){return vui.getModel().ratedMovieCache.check(this.getContentId())||0},setUserRating:function(e){var t=this.getContentId(),i={rating:e};vui.m.userSessionStore.getFromStore("zap-api-element-id")&&((i=vui._.getZapApiEvarsFromSessionStore()).rating=e),vui.analytics.trackEvent("event9",{product:t,evars:i});function s(e){alert("setUserRating query returned with status = "+e)}0==e?vui.getModel().deleteRating(t,s):vui.getModel().rateTitle(t,e,s)},isWished:function(){return vui.getModel().wishedMovieCache.check(this.getContentId())||!1},setWished:function(e,t){var i=this.getContentId(),s={},n=t?t:function(e){alert("setWished query returned with status = "+e)};e?(vui.m.userSessionStore.getFromStore("zap-api-element-id")&&(s=vui._.getZapApiEvarsFromSessionStore()),vui.analytics.trackEvent("event8",{product:i,evars:s}),vui.getModel().addToWishlist(i,n)):(vui.analytics.trackEvent("event43",{product:i}),vui.getModel().deleteFromWishlist(i,n))},qualityLevels:["uhd","hdx","hd","sd"],qualMap:{uhd:4,hdx:3,hd:2,sd:1},allTypes:["Rental","Purchase"],isPTOOfferAvailable:function(e){if(e)for(var t=0,i=this.qualityLevels.length;t<i;t++){var s=this.qualityLevels[t];if(e[s]&&e[s].Purchase)return!0}return!1},preOrdersAvailable:function(){if(this.getAvailableOfferTypes().preorder){var e=[];for(qual in this.qualMap)this.data.offers[qual]&&this.data.offers[qual].Purchase&&this.data.offers[qual].Purchase.preOrderStartTime&&e.push(qual);return e}},getContentTag:function(){return this.data&&this.data.tag},doesTagExist:function(e){var t=this.getContentTag();if(t){if("string"==typeof t)return t===e;for(var i in t)if(t[i]===e)return!0;return!1}return!1},isAvailableHereAndNow:function(){var e=this.data,t=e&&e.variants;if(vui.getModel().setAvail(this),t)for(var i=new Date,s=0;s<this.qualityLevels.length;s++){var n=this.qualityLevels[s],a=t[n]&&t[n].offers&&t[n].offers[0]&&t[n].offers[0].offer;if(a)for(var o=0;o<this.allTypes.length;o++){var r=this.allTypes[o];if(a[r]&&a[r].offerStartTime<=i)return!0}}return!1},highestQualOwned:function(){if(vui.getModel().movieIsPurchased(this.data)){var e="sd";for(qual in this.data.ownerships)this.data.ownerships[qual].isOwned&&this.qualMap[qual]>this.qualMap[e]&&(e=qual);return e}},highestQualPreOrdered:function(){if(this.hasBeenPreOrdered){var e=this.contentPreOrdered(),t=this.containerPreOrdered();return e&&t?this.qualMap[e]>this.qualMap[t]?e:t:e||t}},availableQualPreOrder:function(){var e=[];for(qual in offers=this.data.offers,offers)offers[qual].Purchase&&offers[qual].Purchase.preOrderStartTime&&e.push(qual);return e},canUpgradePreOrder:function(){if(this.isAvailableToPreorder()){var e=this.highestQualOwned(),t=this.containerPreOrdered();if(!e&&!t)return!0;var i=this.availableQualPreOrder();if(t)for(var s=0;s<i.length;s++)if(this.qualMap[i[s]]>this.qualMap[t])return!0;if(e)for(s=0;s<i.length;s++)if(this.qualMap[i[s]]>this.qualMap[e])return!0}},isAvailableToPreorder:function(){return!this.hasBeenPreOrdered()&&!!this.getAvailableOfferTypes().preorder},hasBeenPreOrdered:function(){return this.containerPreOrdered()||this.contentPreOrdered()},containerPreOrdered:function(){if(this.data&&null!=this.data.containerId){var e=null;"array"==$type(this.data.containerId)?e=this.data.containerId:(e=[]).push(this.data.containerId);for(var t,i=0,s=0;s<e.length;s++){preOrdered=vui.getModel().preOrderedMovieCache.check(e[s]),preOrdered&&(t=preOrdered.contentVariant[0].videoQuality[0],(preOrdered&&i&&this.qualMap[preOrdered.contentVariant[0].videoQuality[0]]||preOrdered&&!i)&&(i=t))}return i||null}},contentPreOrdered:function(){var e=vui.getModel().preOrderedMovieCache.check(this.data&&this.data.contentId[0]);return e?e.contentVariant[0].videoQuality[0]:null},getAvailableOfferTypes:function(){var e=this.data,t=VUDU.vuduTime(),i={};for(var s in e.validOffers){var n=e.validOffers[s],a=e&&e.offers&&e.offers[s];n.Rental&&(!a.Rental.startTime||parseDate(a.Rental.startTime).getTime()<=t)&&(i.rent=!0),n.Purchase&&!a.Purchase.preOrderStartTime&&(!a.Purchase.startTime||parseDate(a.Purchase.startTime).getTime()<=t)&&(i.own=!0),n.Purchase&&a.Purchase.preOrderStartTime&&parseDate(a.Purchase.preOrderStartTime).getTime()<=t&&parseDate(a.Purchase.preOrderStopTime).getTime()>=t&&(i.preorder=!0)}return i},getRentalInfo:function(){var e,t=this.data;if(t){if(t.ownerships)for(var i=t.ownerships,s=0,n=this.qualityLevels.length;s<n;s++){var a=this.qualityLevels[s],o=i[a];if(o&&o.isRented){var r=getTimeDiffString(o.ends,null,!0,!0);if(r){(e=r)[r.length]=a;break}}}return e}},rentalUpgraded:function(){var e=this.getRentalInfo();if(e){var t=e.length<=3?e[2]:e[4];if(this.qualMap[this.highestQualOwned()]>=this.qualMap[t.toLowerCase()])return!0}return!1},getWalmartCatalogItems:function(s,a){var o=[],r=Object.keys(s).length,l=new Array(r),u=this;Object.keys(s).map(function(e,t){return o.push(e),i=s[e],n=t,function(){var e={_type:"walmartCatalogItemSearch",itemId:i};u.queryService.doQuery(e,function(e,t,i){if(!i)throw"error in catalog search";var s;r--,l[n]=i.walmartCatalogItem,r<=0&&(s={},o.forEach(function(e,t){l[t]&&(s[e]=l[t])}),a(s))}.bind(this))};var i,n}).forEach(function(e){e()})}}),vui.EntryInfo=new Class({name:"vui.EntryInfo",initialize:function(e){if(this.queryService=e.queryService,this.callbacks=[],e.callback&&this.setListener(e.callback),this.onError=e.onError,this.movieId=e.movieId,e.callback&&this.setListener(e.callback),!e.queryService)return this.initialized=!1,null;this.initialized=!0;var t,i,n=e&&e.entry,s=n&&n.parameters&&n.parameters[0];"contentSearchParameters"==s._type||"tokenOffer"===vui._.aStr(s.name)?(this.data=this.parseEntryInfo(n),this.data._type=n._type,this.notifyListeners()):s.name&&"seasonal"==s.name?(t={_type:"uiPageSearch",uiPageId:s.seasonal&&s.seasonal[0]&&s.seasonal[0].pageId},this.queryId=this.queryService.doQuery(t,function(e,t,i){var s=vui.getModel();this.queryId=null,t==s.queryStatus.ST_SUCCESS?(i&&i.uiPage?(this.data=this.parseUIPage(i.uiPage[0]),this.data._type=n._type,this.data.uiEntryId=n.uiEntryId):this.onError&&this.onError(this),this.notifyListeners()):t==s.queryStatus.ST_CANCELLED?alert("Cancelled query:"+e):(alert("_parseResult error occured"),this.onError&&this.onError(this),this.notifyListeners())}.bind(this),{onTimeout:vui.getModel().QueryOptions.RETRY})):(i={_type:"uiEntrySearch",uiEntryId:n.uiEntryId},this.queryService.doQuery(i,function(e,t,i){i&&i.uiEntry&&(this.data=this.parseEntryInfo(i.uiEntry[0]),this.notifyListeners())}.bind(this)))},setListener:function(e){this.callbacks.push(e)},notifyListeners:function(){var e=this.callbacks.length;if(0<e)for(var t=0;t<e;t++)this.callbacks[t]?this.callbacks[t](this):alert("ERROR: In entryInfo successful query return, somehow this callback index is null:"+t)},parseUIPage:function(e){if("uiPage"!=e._type)return null;if("multiContentList"!=e.uiPageType)return null;var t={};t.type=e._type,t.title=e.title||"",t.description=e.description||"",e.backgroundUrlPath&&(e.backgroundUrl=vui.getModel().getUiPageBgImageUrl(e.backgroundUrlPath[0])),t.backgroundUrl=e.backgroundUrl&&e.backgroundUrl[0]||"";var i,s={};e.parameters&&e.parameters[0]&&"uiPageMultiContentListParameters"==e.parameters[0]._type&&(s=(i=e.parameters[0].multiParameters)&&i[0]&&i[0].list),t.parameters={},t.parameters.listParameters={};for(var n=0;n<s.length;n++){var a,o=s[n],r=o.listParameters&&o.listParameters[0],l=o.contentParameters&&o.contentParameters[0];r&&l&&((a={contentSearchParameters:{}}).title=r.title,a.contentSearchParameters=l,a.contentSearchParameters._type=r.type,t.parameters.listParameters[n]=a)}return t},parseEntryInfo:function(e){var t={};return t.type=e._type,t.uiEntryId=e.uiEntryId,t.uiEntryType=e.uiEntryType,t.title=e.title,t.description=e.description,e.posterUrlPath&&("contentParameters"==e._type&&e.contentId&&e.uiEntryType&&"filmstrip"==e.uiEntryType[0]?e.posterUrl=vui.getModel().getUiEntryFilmstripPosterUrl(e.posterUrlPath[0]):e.posterUrl=vui.getModel().getUiEntryImageUrl(e.posterUrlPath[0])),t.posterUrl=e.posterUrl,e.placardUrlPath&&(e.placardUrl=vui.getModel().getUiEntryImageUrl(e.placardUrlPath[0])),t.placardUrl=e.placardUrl,e.ribbonUrlPath&&(e.ribbonUrl=vui.getModel().getUiEntryImageUrl(e.ribbonUrlPath[0])),e.backgroundUrl&&(t.backgroundUrl=e.backgroundUrl),t.parameters=e.parameters,t.launch=e.launch,t},getType:function(){return this.data._type},get:function(){return this},release:function(){alert("RELEASING ENTRY INFO"),delete this.callbacks,this.callbacks=[]},destroy:function(){this.release(),this.queryId&&(this.queryService.cancelQuery(this.queryId),this.queryId=null)},getTitle:function(){var e,t,i=this.data;return"uiEntry"==i.type?t=(e=this.data&&this.data.parameters&&this.data.parameters[0])&&e.title&&e.title[0]:"uiPage"==i.type&&(t=this.data&&this.data.title&&this.data.title[0]),t}}),vui.widgets.Player=new Class({Extends:vui.widgets.Base,acpMap:{none:0,level1:1,level2:2,level3:3},modeMap3D:{none:0,topBottom:1,leftRight:2},modeMap3DNew:{none:-1,topBottom:2,leftRight:1},init:function(){var e=document.createElement("div");e.id="player",e.style.position="absolute",e.style.width=window.vui.ResDef.SCREEN_WIDTH+"px",e.style.height=window.vui.ResDef.SCREEN_HEIGHT+"px",this.elem=e,this.displayStats=!1,this.plugin=null,this.screenPlugin=null,this.frontpanelPlugin=null,this.state=-1,this.stopCallback=null,this.originalSource=null,this.idleTimer=null,this.hasReportedCPSessionCreate=!1,this.dimensionality="none",this.STOPPED=0,this.PLAYING=1,this.PAUSED=2,this.PREPARING=3,this.BUFFERING=4,this.PLAYING_REQUESTED=5,this.GETTING_TICKET=6,this.POWER_OFF_STOP=7,this.RESUMED=8,this.FRONT_DISPLAY_PLAY=100,this.FRONT_DISPLAY_STOP=101,this.FRONT_DISPLAY_PAUSE=102,this.FRONT_DISPLAY_ONLINE=200,this.maxDownloadSpeed=15e3;var t;return this.state=this.STOPPED,this.startTimeInMs=(new Date).getTime(),this.lastTime=0,this.editionLocationGetResponse=null,this.playerCdnIndex=0,this.type="",this.ownershipsRefreshed=!1,this.activeTrackIds=null,this.tracks=null,this.currentSubtitleLanguage=null,this.plugin={SetDisplayArea:function(){},Pause:function(){},Stop:function(){},Play:function(){},Resume:function(){},GetDuration:function(){return 2500}},this.idleTimer={setOnIdleEvent:function(){},setOffIdleEvent:function(){}},pluginAPI.setOffScreenSaver||(pluginAPI.setOffScreenSaver=function(){}),pluginAPI.setOnScreenSaver||(pluginAPI.setOnScreenSaver=function(){}),pluginAPI.ShowTools=function(){},"hygiea"===vui.vvPlatform.id&&"chromecast"===vui.vvPlatform.clientType?this.html5Player=new vui.AncinusPlayer(this):this.html5Player=new vui.DashPlayer(this),this.html5Player.attachCppPlayerHooks(this),this.plugin.SetDisplayArea(0,0,960,540),this.memoryBufferSize=25165824,this.listenerHandle||(t=function(e,t,i){alert("VUDU PLAYER CALLBACK: Connection::systemEvent source="+e+" type="+t),"bitrateChanged"==t?(this.bitrates=i.rates,this.currentBitrate=i.bitrate,alert("VUDU: player stateChanged bitrate="+i.bitrate)):"stateChanged"==t?(alert("VVUDU: player stateChanged state =  "+i.state),"playing"==i.state||"preparing_to_play"==i.state&&(alert("VUDU: Max Download speed "+this.maxDownloadSpeed),VUDU.video.setPipelineRateKbps(this.maxDownloadSpeed),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STARTING))):"error"==t&&(alert("VUDU: player Error!:"+i.error),"connect_time_out"==i.error||"connect_failed"==i.error?this.changeCDN("DIRECTOR ERROR"):"invalid_ticket"==i.error?this.sendNotification(vui.Facade.PLAYER_ERROR,vui.widgets.Player.INVALID_TICKET):"out_of_ticket_limits"==i.error?this.sendNotification(vui.Facade.PLAYER_ERROR,vui.widgets.Player.OUT_OF_TICKET_LIMITS):this.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR"))}.bind(this),this.listenerHandle=VUDU.registerSystemListener("player",null,t)),window.startDrawLoading=function(){alert("window.startDrawLoading...:"+this.state),this.state==this.PLAYING_REQUESTED&&(alert("window.send buffering"),this.state=this.BUFFERING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.BUFFERING)),this.state==this.PLAYING&&(this.sessionUnderruns++,alert("VUDU: Underrun detected"),this.state=this.BUFFERING,alert("VUDU Player: turn screen saver back on"),pluginAPI.setOnScreenSaver(600),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.UNDERRUN),this.lastBufferInfo=null,this.dataCounter=0),this.bufferTimeInMs=(new Date).getTime();var t=null,e=function(){var e=(new Date).getTime()-this.bufferTimeInMs;alert("VUDU-BUFFER: startup timeoutcheck, time = "+e+" state = "+this.state),this.state==this.BUFFERING||this.state==this.PLAYING_REQUESTED?45e3<e&&(clearInterval(t),alert("VUDU-BUFFER: timeout: bring up error dialog, time = "+e),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.TIMEOUT)):clearInterval(t)}.bind(this),t=setInterval(e,1e3)}.bind(this),window.endDrawLoading=function(){var e,t,i;this.set3DMode(),alert("GOT END DRAW LOADING , state = "+this.state),window.VUDU_APP_ARGS.doCAF&&this.state==this.PREPARING&&(this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING),this.state=this.PLAYING,alert("VUDU Player: turn screen saver off"),pluginAPI.setOffScreenSaver()),this.state==this.BUFFERING&&(window.DEVICE_IS_BCM&&(alert("VUDU Player: was buffering, clear and bars"),controller.baseLayer.currentPage.updateOsd(0),controller.baseLayer.currentPage.showTopAndTrackbar(!0),controller.baseLayer.currentPage.updateOsd(controller.baseLayer.currentPage.OSD_TOP_BAR|controller.baseLayer.currentPage.OSD_TRACKBAR)),this.state=this.PLAYING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING),alert("VUDU Player: turn screen saver off"),pluginAPI.setOffScreenSaver()),this.state==this.PLAYING_REQUESTED&&(e=(new Date).getTime()-this.startTimeInMs,this.state=this.PLAYING,window.DEVICE_IS_BARCA?(alert("VUDU: SET PLAYBACK STARTED (delayed), elapsed time = "+e),i=null,t=function(){this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING),clearInterval(i)}.bind(this),i=setInterval(t,800)):(alert("VUDU: SET PLAYBACK STARTED, elapsed time = "+e),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING)),this.isInRequest=!0,window.setTimeout(function(){this.isInRequest=!1}.bind(this),500),alert("VUDU Player: turn screen saver off"),pluginAPI.setOffScreenSaver()),this.is2dTo3dMode&&this.screenPlugin.Set3DEffectMode(7)}.bind(this),window.onServerError=function(){this.sendNotification(vui.Facade.PLAYER_ERROR,"SERVER ERROR"),alert("Server Error!")}.bind(this),window.popupNetworkErr=function(){this.sendNotification(vui.Facade.PLAYER_ERROR,"NETWORK ERROR"),alert("VUDU Network Error")}.bind(this),window.getBandwidth=function(e){alert("getBandwidth "+e)},window.onDecoderReady=function(){alert("onDecoderReady in state "+this.state),this.state==this.PLAYING_REQUESTED&&(alert("SET PLAYBACK STARTED"),this.state=this.PLAYING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING),alert("VUDU Player: turn screen saver off"),pluginAPI.setOffScreenSaver())}.bind(this),window.onRenderError=function(e){this.sendNotification(vui.Facade.PLAYER_ERROR,"RENDER ERROR"),alert("onRenderError"+e)}.bind(this),window.OnNetworkDisconnected=function(e){this.sendNotification(vui.Facade.PLAYER_ERROR,"NETWORK DISCONNECT"),alert("OnNetworkDisconnected")}.bind(this),window.setCurTime=function(e,t){this.totalTime||(this.totalTime=t,alert("setCurTime : duration was undefined now: "+this.totalTime)),this.timestamps||(this.timestamps=VUDU.video.getTimestamps()),this.currentTime=parseInt(e,10),0!=this.currentTime&&this.lastTime||(this.currentTime=this.startTime+1),this.sendNotification(vui.Facade.PLAYER_TIME,this.currentTime),this.lastTime=this.currentTime}.bind(this),window.setTotalTime=function(e){this.totalTime=e}.bind(this),window.setTotalStreamSize=function(e){this.streamSize=e}.bind(this),window.stopPlayer=function(){alert("STOPPPED!!!!"),this.stop("renderCompleted")}.bind(this),window.setTotalBuffer=function(e){alert("setTotalBuffer "+e)},window.setCurBuffer=function(e){},window.OnStreamInfoReady=function(e){var t;alert("OnStreamInfoReady"),this.doSOC||null==this.acpLevel||null==this.acpMap[this.acpLevel]||(t=this.acpMap[this.acpLevel],alert("SETTING ACP TO:"+this.acpLevel+", pass "+t+" to the apis")),this.totalTime=this.plugin.GetDuration(),alert("OnStreamInfoReady : duration = "+this.totalTime),hardwareId=vudu.registryGet("hardwareId"),hwid=hardwareId.substr(0,4),alert("OnStreamInfoReady: ID prefix = "+hwid),0<this.totalTime&&this.totalTime-this.currentTime<3e4&&(alert("OnStreamInfoReady: close to eof (< 30 sec): clear screen "+this.totalTime+" current "+this.currentTime),controller.baseLayer.currentPage.updateOsd(0),window.DEVICE_IS_BCM&&this.set3DMode()),"widescreen"!=this.aspectRatio||window.DEVICE_IS_GENOA||(alert("OnStreamInfoReady : cropping required, half SD res: (0, 34, 360, 172)"),this.plugin.SetCropArea(0,60,720,360))}.bind(this),window.onNotSupport=function(e){alert("onNotSupport")},window.OnRenderingComplete=function(){alert("VUDU: received OnRenderingComplete message, stop"),controller.baseLayer.currentPage.updateBookmark(this.totalTime),this.stop("renderCompleted")}.bind(this),alert("VUDU: using new player interface: install callbacks"),this.plugin.OnRenderingComplete="window.OnRenderingComplete",this.plugin.OnStreamInfoReady="window.OnStreamInfoReady",this.plugin.OnBufferingStart="window.startDrawLoading",this.plugin.OnDecoderReady="window.onDecoderReady",this.plugin.OnBufferingComplete="window.endDrawLoading",this.plugin.OnCurrentPlayTime="window.setCurTime",this.plugin.OnRenderError="window.onRenderError",this.plugin.OnNetworkDisconnected="window.OnNetworkDisconnected",this.plugin.GetCurrentBitrates=function(){return alert("this.plugin.GetCurrentBitrates: "+this.currentBitrate),this.currentBitrate}.bind(this),!0},set3DMode:function(){var e,t;window.SUPPORTS_NEW_STYLE_PLAYBACK||(this.unset3DLoop&&(alert("unset3DMode, clearInterval"),clearInterval(this.unset3DLoop)),"none"==this.dimensionality&&"none"!=this.previousDimensionality&&(e=0,t=function(){this.unset3DMode(!0),10<e&&this.unset3DLoop&&(alert("CLEAR INTERVAL for unset3DLoop"),clearInterval(this.unset3DLoop)),e++}.bind(this),this.unset3DLoop=setInterval(t,300),alert("CALL do3DOffNow directly"),t()),alert("CALLING set3DMode"),this.set3DLoop&&clearInterval(this.set3DLoop))},unset3DMode:function(e){window.SUPPORTS_NEW_STYLE_PLAYBACK||(alert("CALLING unset3DMode"),this.set3DLoop&&clearInterval(this.set3DLoop))},addListener:function(){},isPaused:function(){return this.state==this.PAUSED},playDebug:function(e,t){this.data=null;var i={location:[{}]};loc=i.location[0],loc.baseUri=e+"/dash",loc.uriSuffix="",loc.bitrate="",loc.lengthSeconds="",loc.thumbnailsBaseUri=e+"/thumbs",loc.thumbnailsUriSuffix="",this.startTime=t||0,this.play(),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STARTING),this.bind(i)},getCurrentChunk:function(){alert("GET CURRENT CHUNK: currentTime is:"+this.currentTime);var e=this.getChunkForTime(this.currentTime);return alert("GET CURRENT CHUNK: chunk is:"+e),e},getChunkForTime:function(e){var t=closestBinarySearch(this.timestamps,e);return alert("GET CHUNK FOR TIME:"+t),t},seekToChunk:function(e){alert("_--------------------------------"),alert("SEEK TO CHUNK:"+e),this.startTime=this.timestamps[e],alert("SEEK TO CHUNK: startTime: "+this.startTime),this.state=this.BUFFERING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.BUFFERING),this.html5Player.seek(this.startTime/1e3)},seekToClearplaySkip:function(e){this.startTime=e,alert("SEEK TO TIME AFTER CLEAR PLAY SKIP: startTime: "+this.startTime),this.state=this.BUFFERING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.BUFFERING),this.html5Player.seek(this.startTime,"after")},destroy:function(){alert("VUDU: player destoy called, stop"),this.state!=this.STOPPED&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.updateBookmark&&(controller.baseLayer.currentPage.updateBookmark(this.currentTime),this.stop()),alert("VUDU: player destoy called, stop DONE")},setURL:function(e){this.url=e,alert("URL = "+this.url)},pause:function(){this.state==this.PLAYING?(this.state=this.PAUSED,this.plugin.Pause(),VUDU.video.setPaused(!0),alert("VUDU Player: turn screen saver back on"),pluginAPI.setOnScreenSaver(600),alert("Paused..."),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PAUSED)):alert("cant pause while playing")},stop:function(e){var t;this.state!=this.STOPPED&&(alert("VUDU: STOPPING!! Reason: "+e),this.state=this.STOPPED,this.plugin.Stop(),this.reportStats(),this.renewTimer&&clearTimeout(this.renewTimer),"advert"===this.contentType?vui.getModel().avodManager.onAdPlaybackDone(e):"adcontent"===this.contentType?vui.getModel().avodManager.onAdContentPlaybackDone(e):"movie"===this.contentType&&this.registerPlaybackSession(),VUDU.video.stop(),alert("Stopped"),"advert"===this.contentType&&"renderCompleted"===e||"adcontent"===this.contentType&&"insertAd"===e||(alert("VUDU Player: turn screen saver back on"),pluginAPI.setOnScreenSaver(600),alert("VUDU Player: turn screen saver back on completed and reset aspect ratio toggle"),this.unset3DMode(),this.sendNotification(vui.Facade.PLAYER_STATE,"powerOff"===e?vui.widgets.Player.POWER_OFF_STOP:vui.widgets.Player.STOPPED),"hygiea"!==vui.vvPlatform.id||!vui.account.hasLevel2DebugLabel()||(t=document.body.getElementById("uhd-edition"))&&t.remove(),this.hasReportedCPSessionCreate=!1))},stopPartial:function(){this.state!=this.STOPPED&&(alert("VUDU: STOPPING PARTIAL!!"),this.state=this.STOPPED,this.reportStats(),VUDU.video.stop(),alert("Stopped"),alert("VUDU Player: turn screen saver back on"),pluginAPI.setOnScreenSaver(600),alert("VUDU Player: turn screen saver back on completed"),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STOPPED))},resume:function(){this.state==this.PAUSED?(this.state=this.PLAYING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PLAYING),this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.RESUMED),this.plugin.Resume(),VUDU.video.setPaused(!1),alert("VUDU Player: turn screen saver off"),pluginAPI.setOffScreenSaver(),alert("Playing...")):alert("cannot resume unless paused")},seek:function(e){0<e?this.plugin.JumpForward(e):this.plugin.JumpBackward(e)},setDownloadPaused:function(e){e?VUDU.video.setPipelinePaused(e):(retVal=VUDU.video.setPipelineRateKbps(this.maxDownloadSpeed),retVal||(alert("setDownloadPaused: could net restrict pipeline"),VUDU.video.setPipelinePaused(e)))},getTrailerPlaybackInfo:function(e,t){var i=function(e){if(this.state!=this.STOPPED){if(!e)return this.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR"),void alert("model.getPlaybackInfo return null data, return");this.editionLocationGetResponse=e,this.playerCdnIndex=0,this.bind(e,t)}else alert("THIS WAS STOPPED already, return")}.bind(this);vui.getModel().getTrailerPlaybackInfo({editionId:e},i)},changeCDN:function(e){var t;this.editionLocationGetResponse&&null!=this.editionLocationGetResponse?(this.playerCdnIndex++,alert("*** Trying to switch CDN, contentType: "+this.type),this.type&&"trailer"==this.type?this.editionLocationGetResponse.location&&this.playerCdnIndex<this.editionLocationGetResponse.location.length?(this.startTimeInMs=(new Date).getTime(),this.bind(this.editionLocationGetResponse)):this.sendNotification(vui.Facade.PLAYER_ERROR,e):(t=this.processMoviePlayBackInfo(this.editionLocationGetResponse),this.startTimeInMs=(new Date).getTime(),this.bind(t))):this.sendNotification(vui.Facade.PLAYER_ERROR,e)},processMoviePlayBackInfo:function(e){var t={},i=e.payload&&e.payload.location&&e.payload.location.length;return alert("**** numOfCdn: "+i+" playerCdnIndex:"+this.playerCdnIndex),this.playerCdnIndex>=i?(this.playerCdnIndex=0,void this.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR")):(t.uri=e.payload.location[this.playerCdnIndex].baseUri,t.uriSuffix=e.payload.location[this.playerCdnIndex].uriSuffix,t.duration=e.duration,t.bitrate=e.payload.location[this.playerCdnIndex].bitrate,t.thumbnailsBaseUri=e.payload.location[this.playerCdnIndex].thumbnailsBaseUri,t.thumbnailsUriSuffix=e.payload.location[this.playerCdnIndex].thumbnailsUriSuffix,t.contentVariantId=e.contentVariantId,t.editionId=e.payload.editionId,e.payload.location[this.playerCdnIndex].encodingFormat3D&&(t.encodingFormat3D=e.payload.location[this.playerCdnIndex].encodingFormat3D[0]),e.payload.location[this.playerCdnIndex].subtitleBaseUri&&(t.subtitleBaseUri=e.payload.location[this.playerCdnIndex].subtitleBaseUri),e.payload.location[this.playerCdnIndex].subtitleUriSuffix&&(t.subtitleUriSuffix=e.payload.location[this.playerCdnIndex].subtitleUriSuffix[0]),e.payload.location[this.playerCdnIndex].suggestedMaxBitrate?t.suggestedMaxBitrate=vui._.aStr(e.payload.location[this.playerCdnIndex].suggestedMaxBitrate[0]):vui.gConnectionInstance.getAbsoluteMaximumBitRate()&&(t.suggestedMaxBitrate=vui.gConnectionInstance.getAbsoluteMaximumBitRate()),e.payload.location[this.playerCdnIndex].videoProfile&&(t.videoProfile=vui._.aStr(e.payload.location[this.playerCdnIndex].videoProfile[0])),t)},getMoviePlaybackInfo:function(t,i,s){var e=function(e){if(this.state!=this.STOPPED){if(alert("GOT CALLBACK FOR GET PLAYBACK FOR MOVIE:"+t),!e)return this.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR"),void alert("VUDU.getPlaybackInfo return null data, return");"advert"===this.contentType&&e.payload&&e.payload.location&&e.payload.location.length&&e.payload.location.each(function(e){e.thumbnailsBaseUri=null}),this.editionLocationGetResponse=e,this.playerCdnIndex=0,e=this.processMoviePlayBackInfo(e),this.bind(e,i),vui.m.userId!==window.getCookie("userId")||vui.vvPlatform.baseApp||(vui.Model.PopulateOwnedMovieCache(function(e,t,i){alert("REFRESHED OWNED MOVIE CACHE")},t,s),!this.hasReportedCPSessionCreate&&vui.gConnectionInstance.isClearplayEnabled()&&this.contentData.data&&"true"===vui._.aStr(this.contentData.data.hasClearplay)&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()&&(vui.m.onClearplaySessionCreate(this.contentData.advertContentId,!0),this.hasReportedCPSessionCreate=!0))}else alert("THIS WAS STOPPED already, return")}.bind(this);alert("DOING GET PLAYBACK FOR MOVIE:"+t),this.forFreePreview&&alert("PLAYING FREE PREVIEW");var n,a={};"advert"===this.contentType?a.editionId=t:a.contentVariantId=t,a.contentVariantId&&s&&s.contentVariants&&s.contentVariants[0]&&(n=s.contentVariants[0].contentVariant,Array.isArray(n)&&n.forEach(function(e){vui._.aStr(e.contentVariantId)!==vui._.aStr(t)||"hdx"!==vui._.aStr(e.videoQuality)&&"sd"!==vui._.aStr(e.videoQuality)||(a.useMain10=!0)})),vui._.isUHDContent(s)&&(a.isUHDContent=!0,a.variants=s.contentVariants[0].contentVariant),a.advertContentId=this.contentData.advertContentId,vui.getModel().getMoviePlaybackInfo(a,e,this.forFreePreview)},currentStreamingSession:null,registerPlaybackSession:function(e,n){var t={};t.deviceId=VUDU.registry.deviceId,t.lightDeviceId=vui.getModel().directorCsClient.getLightDeviceId(),t.accountId=vui.m.userId;var i=vui.getModel();if(!e)return t._type="streamingSessionStop",alert("CURRENT SESSION:"+JSON.encode(this.currentStreamingSession)),$defined(this.currentStreamingSession)&&(t.streamingSessionId=this.currentStreamingSession.streamingSessionId[0],delete t.deviceId,delete t.lightDeviceId,delete this.currentStreamingSession),t.streamingSessionId&&vui.m.userId&&i.doQuery(t,function(e,t,i){alert("streamingSessionStop status: "+t+", response: "+JSON.encode(i))}),void(n&&n({status:"success"}));$defined(this.currentStreamingSession)&&this.currentStreamingSession.contentVariantId==e?(t._type="streamingSessionRenew",t.streamingSessionId=this.currentStreamingSession.streamingSessionId[0],delete t.deviceId,delete t.lightDeviceId):(t._type="streamingSessionStart",t.contentVariantId=e);i.doQuery(t,function(e,t,i){var s={status:"error",reason:"director"};t==vui.getModel().queryStatus.ST_SUCCESS&&"streamingSessionResult"==i._type&&(alert("streamingSessionResult:"+JSON.encode(i)),"success"!=i.streamingSessionStatus?s.reason=i.streamingSessionStatus[0]:(this.currentStreamingSession=i.streamingSession[0],s.stopTime=this.currentStreamingSession.stopTime[0],s.status="success")),alert("CALLING BACK FOR SESSIONSTART:"+JSON.encode(s)),n(s)}.bind(this))},renewSessionObject:function(){alert("RENEWING SESSION OBJECT!");var e=function(e){var t;e.stopTime&&(t=parseDate(e.stopTime).getTime()-VUDU.vuduTime()-3e5,alert("RENEW AT:"+e.stopTime),alert("Next Renew IN MS:"+t)),"success"==e.status&&t&&0<t?this.renewTimer=setTimeout(function(){this.renewSessionObject()}.bind(this),t):this.onIssueWithSessionCreate(e.reason)}.bind(this);this.registerPlaybackSession(this.bestVariantId,e)},getStreamingSessionId:function(){return this.currentStreamingSession&&this.currentStreamingSession.streamingSessionId&&this.currentStreamingSession.streamingSessionId[0]},onIssueWithSessionCreate:function(e){alert("onIssueWithSessionCreate, returned an error:"+JSON.encode(e)),$defined(e)?"ultraVioletLinkRequired"==e?this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Playback Error",message:vui.strings.getText("ERROR_UV_UVLINKREQUIRED",vui.getModel().myVuduUrl)}):"noRightsForContentVariant"==e?this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Playback Error",message:vui.strings.getText("ERROR_UV_NORIGHTSFORCONTENTVARIANT")}):"ultraVioletRejected"==e?this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Playback Error",message:vui.strings.getText("ERROR_UV_UVLINKREJECTED")}):"downloadConflict"==e&&this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Streaming Not Available ",message:vui.strings.getText("ERROR_DOWNLOAD_CONFLICT")}):this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Playback Error",message:vui.strings.getText("ERROR_UV_GENERIC")})},play:function(e,i,t,s){var n,a,o,r,l;this.ownershipsRefreshed=!1,i&&(this.contentData=i),(this.type=e)&&(n="trailer"===e||"advert"===e?i.editionId:i.variantId),i&&(o=i.forFreePreview,i.variant?(o||!i.bestVariantId?this.bestVariantId=i.variantId:this.bestVariantId=i.bestVariantId,a=i.variant.aspectRatio[0],i.variant.videoQuality[0],this.acpLevel=i.variant.acpLevel[0]):this.acpLevel="none"),this.state=this.GETTING_TICKET,this.startTimeInMs=(new Date).getTime(),o?this.forFreePreview=o:delete this.forFreePreview,e?this.contentType=e:this.contentType||(this.contentType="movie"),o&&(this.contentType="preview"),alert("VUDU: PLAYING!!, time = "+this.startTimeInMs+" ms"),this.aspectRatio=a||"enhancedWidescreen",void 0!==n?(alert("GET PLAYBACK INFO"),this.startTime=t||0,r=vui.account.getAccountId(),"bonus"==e||"movie"==e&&(this.forFreePreview||!r)?this.getMoviePlaybackInfo(n,s):"movie"==e?(l=function(e){var t;e.stopTime&&(t=parseDate(e.stopTime).getTime()-VUDU.vuduTime()-3e5,alert("RENEW AT:"+e.stopTime),alert("Next Renew IN MS:"+t)),"success"==e.status&&t&&0<t?(alert("sessionID="+vui.getPlayer().getStreamingSessionId()+" contentType="+this.contentType,"warn"),!this.hasReportedCPSessionCreate&&vui.gConnectionInstance.isClearplayEnabled()&&this.contentData.data&&"true"===vui._.aStr(this.contentData.data.hasClearplay)&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()&&(vui.m.onClearplaySessionCreate(vui.getPlayer().getStreamingSessionId(),!1),this.hasReportedCPSessionCreate=!0),this.getMoviePlaybackInfo(n,s,i.data),this.renewTimer=setTimeout(function(){this.renewSessionObject()}.bind(this),t)):this.onIssueWithSessionCreate(e.reason)}.bind(this),this.registerPlaybackSession(this.bestVariantId,l)):"advert"===e||"adcontent"===e?this.getMoviePlaybackInfo(n,s,i.data):this.getTrailerPlaybackInfo(n,s)):this.data?(this.bind(this.data),alert("ALREADY HAVE PLAYBACK DATA... just bind it again, but mark first")):alert("ERROR: NO EDITION ID AND NO DATA..."),this.currentTime=this.startTime,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STARTING)},deviceSupports3D:function(){return 1==vui.vvPlatform.is3dSupported},check3DSupport:function(){return vui.vvPlatform.inBrowser()?{status:-1,message:"We are sorry. Your device does not support 3D video"}:vui.override3DPurchase?(alert("vui.override3DPurchase is set, act as if this device is 3D capable no matter what"),{status:1}):1!=vui.vvPlatform.is3dSupported?{status:-1,message:"We are sorry. Your device does not support 3D video"}:{status:1}},bind:function(e,t){if(e&&"error"!==e._type){var i;if(this.data=e,alert("VUDU: Bind player and get ready to prepareToPlay()"),this.previousDimensionality=this.dimensionality,e.encodingFormat3D&&this.modeMap3D[e.encodingFormat3D]?this.dimensionality=e.encodingFormat3D:this.dimensionality="none","none"!=this.dimensionality){var s=this.check3DSupport();if(1!=s.status)return void this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Player Error",message:s.message});if(vui.is2013X12AndOldFirmware())return void this.sendNotification(vui.Facade.PLAYER_ERROR,{title:"Player Error",message:vui.getUpgradeFirmwareMessage()})}if(e.location)alert("TRAILER IS PLAYING, SETTING aspectRatio to:"+e.aspectRatio),this.aspectRatio=e.aspectRatio,i=e.location[this.playerCdnIndex],alert("baseUri"+i.baseUri),alert("uriSuffix"+i.uriSuffix),alert("bitrate"+i.bitrate),alert("lengthSeconds"+i.lengthSeconds),alert("thumbnailsBaseUri"+i.thumbnailsBaseUri),vui.castData&&(vui.castData.lengthSeconds=i.lengthSeconds);else for(var n in i=e,alert("THiS MUST BE A MOVIE... "),i)alert("MOVIE VAR:"+n+", value:"+i[n]);this.playbackInfo=i,t?t(function(){this.startPlayback()}.bind(this),this.playerCdnIndex):this.startPlayback()}else this.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR")},createSubtitleObject:function(){if(!this.contentData.data||!this.contentData.variant)return[];for(var e=vui._.aStr(this.contentData.variant.subtitleTrack)?this.contentData.variant.subtitleTrack:this.contentData.data.subtitleTrack,t=[],i=0;i<(e&&e.length);i++){var s={};s.languageCode=vui._.aStr(e[i].languageCode),s.version=vui._.aStr(e[i].version),s.name=vui._.aStr(e[i].name),t.push(s)}return t},startPlayback:function(){var e,t,i;this.state!=this.STOPPED?(e=this.playbackInfo,this.initialBitrate=null,this.currentBitrate=null,this.timestamps=null,this.minBuffer=null,this.minMinBuffer=1e6,this.totalTime=null,alert("VUDU PLAYER: prepareToPlay: memoryBufferSize: "+this.memoryBufferSize),t=e.uri?e.uri:e.baseUri,this.realUri=t,i={contentId:this.contentData.data.contentId&&this.contentData.data.contentId[0],playbackType:this.contentData.type,memoryBufferSize:this.memoryBufferSize,hasClearplay:this.contentData.data.hasClearplay&&this.contentData.data.hasClearplay[0],mimeType:"vudu/chunk",url:t,urlSuffix:e.uriSuffix,startTime:this.startTime,editionId:this.playbackInfo.editionId&&this.playbackInfo.editionId[0],encodingFormat3D:this.playbackInfo.encodingFormat3D,thumbnailsBaseUri:e.thumbnailsBaseUri&&e.thumbnailsBaseUri[0]||"",thumbnailsUriSuffix:e.thumbnailsUriSuffix&&e.thumbnailsUriSuffix[0]||"",selectedQuality:this.contentData.variant&&this.contentData.variant.videoQuality&&this.contentData.variant.videoQuality[0]||"",subtitleArr:this.createSubtitleObject(),subtitleBaseUri:vui._.aStr(e.subtitleBaseUri),videoProfile:this.playbackInfo.videoProfile},this.playbackInfo.suggestedMaxBitrate&&(i.suggestedMaxBitrate=vui._.aStr(this.playbackInfo.suggestedMaxBitrate)),alert("VUDU PLAYER, playArguments: "+JSON.stringify(i),"notice"),"trailer"==this.contentData.type&&(i.selectedQuality="sd"),i.aspectRatio=this.aspectRatio,this.state=this.PLAYING_REQUESTED,this.sessionId=parseInt(VUDU.video.prepareToPlay(i),10),this.sessionUnderruns=0,this.state=this.PREPARING,this.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.PREPARING),this.lastTime=0):alert("canceling playback start because player is stopped")},getCurrentBitrate:function(){return null!=this.currentBitrate&&this.bitrates&&this.bitrates[this.currentBitrate]?this.bitrates[this.currentBitrate]:null},getBitrates:function(){return this.bitrates},reportStats:function(){this.sessionId&&VUDU.log("sessionId=0x"+this.sessionId.toString(16)+", numUnderruns="+this.sessionUnderruns+", contentType="+this.contentType)},getCurrentTime:function(){return this.currentTime},refreshOwnershipInfo:function(){if(this.playbackInfo&&this.playbackInfo.contentVariantId&&!this.ownershipsRefreshed){this.ownershipsRefreshed=!0;var e=this.playbackInfo.contentVariantId,t=this.contentData&&this.contentData.data&&this.contentData.data.containerId;if(vui.m.userId!==window.getCookie("userId"))return;vui.getModel().conditionalOfferCache=new vui.ConditionalOfferCache(vui.getModel(),function(){vui.Model.PopulateOwnedMovieCache(function(e,t,i){alert("REFRESHED OWNED MOVIE CACHE")},e,t)})}},onPlaybackDebugInfo:function(e){this.sendNotification(vui.Facade.PLAYER_DEBUG_INFO,e)}}),vui.widgets.Player.PREPARING="PREPARING",vui.widgets.Player.STOPPED="STOPPED",vui.widgets.Player.STARTING="STARTING",vui.widgets.Player.BUFFERING="BUFFERING",vui.widgets.Player.PLAYING="PLAYING",vui.widgets.Player.PAUSED="PAUSED",vui.widgets.Player.COMPLETED="COMPLETED",vui.widgets.Player.UNDERRUN="UNDERRUN",vui.widgets.Player.TIMEOUT="TIMEOUT",vui.widgets.Player.ERROR="ERROR",vui.widgets.Player.INVALID_TICKET="INVALID_TICKET",vui.widgets.Player.OUT_OF_TICKET_LIMITS="OUT_OF_TICKET_LIMITS",vui.widgets.Player.POWER_OFF_STOP="POWER_OFF_STOP",vui.widgets.Player.RESUMED="RESUMED",window._playerInstance=null,vui.getPlayer=function(){return window._playerInstance||(window._playerInstance=new vui.widgets.Player),window._playerInstance},vui.OmnitureTracker=new Class({trackingServer:"https://vudu.d1.sc.omtrdc.net/b/ss/",prevPage:"",clientUrl:encodeURIComponent("luaclient.vudu.com"),OMNITURE_TIMEOUT:15e5,appLaunchSource:null,campaignId:null,zapApiIsPersonalText:"-P",zapApiViewAllText:"-ViewAll",httpErrorFn:function(e,t,i){0!=t&&alert("error with omniture reporting "+t)},systemProps:null,updateSystemProps:function(e){this.systemProps="&c10="+this.devId+"&c11="+(e||"novalue")},DISABLED:!1,initialize:function(){"europa"!==vui.vvPlatform.id?(vui.getModel()&&"production"===vui.getModel().network?this.accountSuite=vui.vvPlatform.getOmnitureAccountSuite():this.accountSuite=vui.vvPlatform.getOmnitureTestAccountSuite(),this.devId=VUDU.registry.deviceId+"",this.updateSystemProps(vui.account.getAccountId()),this.bUrl=this.trackingServer+this.accountSuite,0<vui.debugLevel&&(this.DISABLED=!0)):this.DISABLED=!0},propsDef:{subTab:1,category:2,listConsumptionCount:12,theaterLaunchSource:13,collectionProp:30,enterKidsMode:23,kidsModeEntry:24},evarDef:{channel:{id:1,val:"novalue"},menuSubMenu:{id:2,val:"novalue"},category:{id:3,val:"novalue"},browseType:{id:4,val:"novalue",pgDepth:0},relatedSearchText:{id:5,val:"novalue",pgDepth:0},filters:{id:6,val:"novalue",pgDepth:0},activated:{id:8,val:"novalue"},uiVersion:{id:11,val:"novalue"},accountId:{id:14,val:"novalue"},deviceId:{id:15,val:"novalue"},abGroup:{id:17,val:"novalue"},searchText:{id:18,val:"novalue",pgDepth:0},listPosition:{id:19,val:"novalue",pgDepth:0},listViewType:{id:20,val:"novalue",pgDepth:0},genreRibbonSelection:{id:21,val:"novalue",pgDepth:0},subGenreRibbonSelection:{id:22,val:"novalue",pgDepth:0},discoverPath:{id:23,val:"novalue",pgDepth:0},purchaseId:{id:26,val:"novalue",pgDepth:0},promoType:{id:28,val:"novalue",pgDepth:0},contentType:{id:30,val:"novalue",pgDepth:0},modelYear:{id:31,val:"novalue",pgDepth:0},platform:{id:35,val:"novalue"},offerId:{id:49,val:"novalue",pgDepth:0},resolution:{id:51,val:"novalue"},campaign:{id:0,val:"novalue",pgDepth:0},reportSuiteId:{id:38,val:"novalue"},rating:{id:43,val:"novalue"},activationSource:{id:54,val:"novalue",pgDepth:0},advertId:{id:54,val:"novalue"},sortFilter:{id:56,val:"novalue"},sortFilterCombo:{id:60,val:"novalue"},mmUIEntryId:{id:61,val:"novalue"},appLaunchSource:{id:62,val:"novalue"},mmPurchaseId:{id:63,val:"novalue"},avodClickAdId:{id:88,val:"novalue"},avodMovieAdId:{id:89,val:"novalue"},kidsModeEntryStatus:{id:90,val:"novalue"},familyFilter:{id:91,val:"novalue"},contentEligibility:{id:92,val:"novalue"},CPSettings:{id:93,val:"novalue"},pageId:{id:113,val:"novalue"},rowId:{id:114,val:"novalue"},elementId:{id:115,val:"novalue"},rowIndex:{id:117,val:"novalue"},columnIndex:{id:118,val:"novalue"},promotagGroup:{id:87,val:"novalue"},advertContentID:{id:108,val:"novalue"}},nameToParam:{events:"events",zip:"zip",state:"state",channel:"ch",linkType:"pe",linkUrl:"pev1",linkName:"pev2",eVar54:"v54"},simpleConv:function(e,t){return"&"+e+"="+encodeURIComponent(t)},keyValtoHtml:{product:function(e){return"&pl=;"+e},channel:function(e){return"&ch="+e},props:function(e){var t=[];for(var i in e){var s=e[i];window.assert(this.propsDef[i],"Not a valid prop id"),t.push("&c"+this.propsDef[i]+"="+encodeURIComponent(s))}return t.join("")}},setBaseUrl:function(){vui.gConnectionInstance.getHTTPSSetting()<1&&(this.bUrl="http://vudu.d1.sc.omtrdc.net/b/ss/"+this.accountSuite)},_processEvars:function(e,t){var i,s,n,a=[];for(var o in this.evarDef){!{}.hasOwnProperty.call(this.evarDef,o)||(i=e&&e[o],$defined((s=this.evarDef[o]).pgDepth)?0<=s.pgDepth?(n=i||"novalue")!==s.val&&(a.push("&v"+s.id+"="+encodeURIComponent(n)),s.val=n,s.pgDepth=0):"novalue"===s.val&&i&&(a.push("&v"+s.id+"="+encodeURIComponent(i)),s.val=i,s.pgDepth=0):i&&(a.push("&v"+s.id+"="+encodeURIComponent(i)),s.val=i))}return a.join("")},_pTime:0,lastReportedTime:0,getActivated:function(){return vui.account.getAccountId()?"activated":"notactivated"},dateAsString:function(e){var t=new Date(e),i=t.getUTCFullYear(),s=t.getUTCMonth()+1,n=t.getUTCDate(),a=t.getUTCHours(),o=t.getUTCMinutes(),r=t.getUTCSeconds();return i+"-"+window.zeroPad(s,2)+"-"+window.zeroPad(n,2)+"T"+window.zeroPad(a,2)+"%3A"+window.zeroPad(o,2)+"%3A"+window.zeroPad(r,2)+"-00"},getUrlPrefixTable:function(e,t){var i=VUDU.vuduTime();i<=this._pTime&&(i=this._pTime+1);var s=this.dateAsString(i);this._pTime=i;var n="&v"+this.evarDef.deviceId.id+"="+VUDU.registry.deviceId;return[this.bUrl,"/1/DIAPI/",Math.floor(VUDU.vuduTime()/1e3),"?vid=",this.devId,n,"&ts=",s,e,t]},_refreshEvars:function(e,t){if(VUDU.vuduTime()-this.lastReportedTime>this.OMNITURE_TIMEOUT)for(var i in alert("omniture doing refresh"+JSON.encode(this.evarDef)+" - "+JSON.encode(t)),this.evarDef){var s=this.evarDef[i];t&&t[i]||"novalue"===s.val||e.push("&v"+s.id+"="+encodeURIComponent(s.val))}},printHumanReadable:function(e){alert("START READABLE OMNITURE:-------------------------------------------------");var t=e.split("?");alert("url: "+t[0]);for(var i=t[1].split("&"),s=[],n={},a=0;a<i.length;a++){var o=i[a].split("=");s.push(o[0]),n[o[0]]=o[1]}for(var r=s.sort(),a=0;a<r.length;a++)alert(r[a]+"="+n[r[a]]);alert("END READABLE OMNITURE:-------------------------------------------------")},_doReport:function(e){this.lastReportedTime=VUDU.vuduTime(),this.DISABLED?alert("OMNITURE IS DISABLED"):(alert("SENDING OMNITURE:"+e),this.printHumanReadable(e),new Request({method:"get",url:e,onFailure:function(){alert("FAILED: OMNITURE Request failed!")}}).send())},_processMore:function(e,t){if(alert("PROCESS MORE:"+JSON.encode(t)),t)for(var i in t){var s,n,a=t[i],o=this.nameToParam[i];o?e.push(this.simpleConv(o,a)):(s=this.keyValtoHtml[i])&&(n=s.bind(this),e.push(n(a,i)))}},cachedPage:null,currPageName:null,escapedPageName:null,showingDialog:!1,dialogTimer:null,reportCachedPage:function(){var e;this.cachedPage&&((e=this.getUrlPrefixTable("&gn=",this.cachedPage.toLowerCase())).push("&g="+this.clientUrl),this._doReport(e.join(""))),delete this.cachedPage},trackPage:function(e,t,i){this.showingDialog&&(this.showingDialog=!1),this.dialogTimer&&clearTimeout(this.dialogTimer),this.currPageName=e;var s=window.encodeURIComponent(e),n=this.getUrlPrefixTable("&gn=",s);this.escapedPageName=s,n.push("&g="+this.clientUrl),this._processMore(n,t),n.push(this._processEvars(t&&t.evars,i)),this._refreshEvars(n,t&&t.evars),this.updateSystemProps(vui.account.getAccountId()),n.push(this.systemProps),this._doReport(n.join(""))},showDialog:function(e){var t,i;this.showingDialog=!0,window.clearTimeout(this.dialogTimer),e&&(t=window.encodeURIComponent(e.toLowerCase()),(i=this.getUrlPrefixTable("&gn=",t)).push("&g="+this.clientUrl),this._refreshEvars(i),this._doReport(i.join("")),this.cachedPage||(this.cachedPage=this.escapedPageName))},hideDialog:function(){window.clearTimeout(this.dialogTimer),this.dialogTimer=setTimeout(function(){this.reportCachedPage()}.bind(this),1e3),this.showingDialog=!1},trackProp:function(e,t){var i,s=this.getUrlPrefixTable(),n=e,a=this.keyValtoHtml.props;a&&(i=a.bind(this),s.push(i(n,"props"))),this._processMore(s,t),this._doReport(s.join(""))},trackEvent:function(e,t){var i=[],i=e?this.getUrlPrefixTable("&ev=",encodeURIComponent(e)):this.getUrlPrefixTable();this._refreshEvars(i),this._processMore(i,t),i.push(this._processEvars(t&&t.evars)),this._doReport(i.join(""))},trackEvar:function(e,t){var i=this.getUrlPrefixTable();for(var s in e){var n=e[s],a=this.evarDef[s];i.push("&v"+a.id+"="+window.encodeURIComponent(n)),a.val=n}this._refreshEvars(i,e),this._processMore(i,t),this._doReport(i.join(""))},dumpEvar:function(){alert("omniture evardump "+JSON.encode(this.evarDef))},reportIds:function(){this.trackEvar({deviceId:this.devId,accountId:vui.account.getAccountId()||"novalue",activated:this.getActivated()}),vui.account.addListener(function(e,t){this.trackEvar({accountId:vui.account.getAccountId()||"novalue",activated:this.getActivated()}),this.updateSystemProps(t)}.bind(this))},widgetActivated:function(e){var t,i=this.clientUrl,s=vui.vvPlatform.getWidgetVersion(),n={uiVersion:s=vui._.toLower(s),platform:vui.vvPlatform.omnitureName,resolution:window.WIDGETRESOLUTION,reportSuiteId:this.accountSuite,appLaunchSource:vui.vvPlatform.getAppLaunchedSource()};if(this.appLaunchSource=vui.vvPlatform.getAppLaunchedSource(),window.isDeepLinking&&"cast"!==this.appLaunchSource){var a,o,r=(a=vui.deepLink.getDeepLinkParams()).campaignId||"";switch(a.type){case"uxPage":o="-UXPageID-"+a.uxPageId;break;case"uxRow":o="-UXRowID-"+a.uxRowId;break;case"uiEntry":o="-UIEntryID-"+a.uiEntryId;break;case"uiPage":o="-UIPageID-"+a.uiPageId;break;case"myVuduTab":o="-ListName-"+a.myVuduTab;break;case"content":o="-ContentID-"+a.contentId}""===r?n.appLaunchSource="deeplinking"+o:(this.campaignId=r,n.appLaunchSource=r+"-"+o,n.campaign=r)}if("samsungTizen"===vui.vvPlatform.clientType){if(window.isDeepLinking)switch((r=(a=vui.deepLink.getDeepLinkParams()||{}).campaignId||"")&&(this.appLaunchSource="ad"),this.appLaunchSource){case"search":t="SearchLink-";break;case"deeplink":t="Screen0Feed-";break;case"ad":t="ADLink-",n.campaign=r,this.campaignId=r}else t="voiceSearch"===this.appLaunchSource?"VoiceSearch-":"Regular-";n.appLaunchSource=t+VUDU.registry.deviceId}window.isDeepLinking&&(n.channel="Deeplink",n.menuSubMenu="Deeplink");var l={linkType:"lnk_o",linkUrl:i,linkName:i,events:"event54"};this.trackEvar(n,l)},clearCachedPageName:function(){this.cachedPage=null}}),vui.OmnitureReportGlue={omReport_:function(e){this.report(e.selections,null,e.evars,e.props,e.channel,e.events)},report:function(e,t,i,s,n,a){this.reportText=e.toLowerCase(),this.reportAnalytics={},this.currentReportText=this.reportText,(i=i||{}).browseType=t?"novalue":this.reportText,this.reportAnalytics.evars=i,this.reportAnalytics.props=s,this.reportAnalytics.channel=n&&n.toLowerCase(),a&&(this.reportAnalytics.events=a);this.reportText&&(vui.analytics.trackPage(vui._.toLower(this.reportText),this.reportAnalytics,0),delete this.reportText)}},vui.History=new Class({initialize:function(e){this.pages=[],this.params=e},push:function(e){!this.params.maxHistoryLength||this.params.maxHistoryLength<this.pages.length?this.pages.push(e):alert("HIT MAX HISTORY LENGTH, not pushing history")},top:function(){return 0<this.pages.length?this.pages[this.pages.length-1]:null},pop:function(){return this.pages.pop()},dump:function(){for(var e=this.pages.length-1;0<=e;e--)alert(e+":"+this.pages[e].page)}}),vui.Controller=new Class({initialize:function(){this.initKeyMapping(),this.keyListeners={},this.addKeyListeners(),window.onkeydown=function(e){this.batchSelectorDraw=!0,this.notifyKeyListeners(e),this.batchSelectorDraw=!1;var t=vui.getSelected()&&vui.getSelected().data;if(!t)return vui.onRedraw(),vui.previousWidgetId=null,void(vui.previousWidgetName=null);function i(){s!==vui.previousWidgetId||n!==vui.previousWidgetName||vui.getSelected().skipSameWidgetTTS||vui._.setAriaLabel("End of list")}var s=t._type&&"credit"===t._type?vui._.aStr(t.personId):vui._.aStr(t.assetId)||vui._.aStr(t.contentId)||vui._.aStr(t.uiEntryId)||null,n=vui.getSelected().elem&&vui.getSelected().elem.className||null;!s||s!==vui.previousWidgetId?vui.onRedraw():(vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&vui.onRedraw(),i()),vui.previousWidgetId=s||null,vui.previousWidgetName=n}.bind(this),document.body.addClass("screen_resolution"),this.baseLayer=new vui.widgets.MainBook,this.baseLayer.start&&this.baseLayer.start(),this.baseLayer.elem.id="baseLayer",this.baseLayer.elem.inject(document.getElementById("main"),"top")},initKeyMapping:function(){vui.specialNumericKeyId=666666,vui.numericMap={},vui.numericMap[tvKey.KEY_0+""]="0",vui.numericMap[tvKey.KEY_1+""]="1",vui.numericMap[tvKey.KEY_2+""]="2",vui.numericMap[tvKey.KEY_3+""]="3",vui.numericMap[tvKey.KEY_4+""]="4",vui.numericMap[tvKey.KEY_5+""]="5",vui.numericMap[tvKey.KEY_6+""]="6",vui.numericMap[tvKey.KEY_7+""]="7",vui.numericMap[tvKey.KEY_8+""]="8",vui.numericMap[tvKey.KEY_9+""]="9",vui.keyMapping={},"hygiea"===vui.vvPlatform.id&&(vui.numericMap[tvKey.KEY_EMPTY+""]="-",vui.numericMap[32]=" ",vui.keyMapping[tvKey.KEY_PANEL_CH_UP]=tvKey.KEY_UP,vui.keyMapping[tvKey.KEY_PANEL_CH_DOWN]=tvKey.KEY_DOWN,vui.keyMapping[27]=999,vui.keyMapping[500]=997,vui.keyMapping[8]=tvKey.KEY_RETURN,vui.keyMapping[417]=998,vui.keyMapping[412]=996,vui.keyMapping[413]=995,vui.keyMapping[415]=80,vui.keyMapping[19]=65),vui.keyMapping[tvKey.KEY_PANEL_VOL_UP]=tvKey.KEY_RIGHT,vui.keyMapping[tvKey.KEY_PANEL_VOL_DOWN]=tvKey.KEY_LEFT,vui.keyMapping[tvKey.KEY_PANEL_MENU]=tvKey.KEY_RETURN,vui.keyMapping[tvKey.KEY_PANEL_ENTER]=tvKey.KEY_ENTER,vui.keyMapping[tvKey.KEY_PANEL_SOURCE]=tvKey.KEY_ENTER,vui.keyMapping[tvKey.KEY_SUBTITLE]=tvKey.KEY_SUBTITLE,vui.vvPlatform.inBrowser()&&(vui.keyMapping[66]=tvKey.KEY_RETURN,vui.keyMapping[27]=tvKey.KEY_RETURN)},addKeyListeners:function(){this.addKeyListener(tvKey.KEY_LEFT,vui.onScalarDirectionLeft),this.addKeyListener(tvKey.KEY_RIGHT,vui.onScalarDirectionRight),this.addKeyListener(tvKey.KEY_UP,vui.onScalarDirectionUp),this.addKeyListener(tvKey.KEY_DOWN,vui.onScalarDirectionDown),this.addKeyListener(tvKey.KEY_ENTER,vui.onClickAction),this.addKeyListener(tvKey.KEY_RETURN,vui.onClickBack),this.addKeyListener(vui.specialKeyId,vui.onClickKey),this.addKeyListener(127,vui.onClickBackspace),this.addKeyListener(vui.specialNumericKeyId,vui.onClickNumeric),this.addKeyListener(tvKey.KEY_BLUE,vui.onClickBlue),this.addKeyListener(tvKey.KEY_RED,vui.onClickRed),this.addKeyListener(tvKey.KEY_TOOLS,vui.onClickTools),this.addKeyListener(tvKey.KEY_PAUSE,vui.onClickPause),this.addKeyListener(tvKey.KEY_PLAY,vui.onClickPlay),this.addKeyListener(tvKey.KEY_SKIP_RW,vui.onClickSkipRW),this.addKeyListener(tvKey.KEY_SKIP_FF,vui.onClickSkipFF),this.addKeyListener(tvKey.KEY_INFO,vui.onClickInfo),this.addKeyListener(tvKey.KEY_VOL_UP,vui.onVolumeUp),this.addKeyListener(tvKey.KEY_VOL_DOWN,vui.onVolumeDown),this.addKeyListener(tvKey.KEY_MUTE,vui.onMute),this.addKeyListener(tvKey.KEY_INFOLINK,vui.onExit),this.addKeyListener(tvKey.KEY_CONTENT,vui.onExit),this.addKeyListener(tvKey.KEY_WLINK,vui.onExit),this.addKeyListener(vui.specialNumericKeyId,vui.cueAutomationListener),this.addKeyListener(tvKey.KEY_SUBTITLE,vui.toggleCC),this.addKeyListener(tvKey.KEY_PLAY_PAUSE,vui.onClickPlayPause),"hygiea"!==vui.vvPlatform.id?(this.addKeyListener(tvKey.KEY_EXIT,vui.onExit),this.addKeyListener(78,vui.onClickRepeat),this.addKeyListener(tvKey.KEY_STOP,vui.onClickStop),this.addKeyListener(tvKey.KEY_FF,vui.onClickFF),this.addKeyListener(tvKey.KEY_RW,vui.onClickRW)):(this.addKeyListener(999,vui.onExit),this.addKeyListener(998,vui.onClickFF),this.addKeyListener(997,vui.onClickRepeat),this.addKeyListener(996,vui.onClickRW),this.addKeyListener(995,vui.onClickStop))},goToPage:function(e,t,i){this.baseLayer.goToPage(e,t,i)},getPageHash:function(e,t){var i='["'+e+'",';return i+=JSON.encode(t)+"]"},hashToPage:function(e){var t,i,s=e.substr(1),n=JSON.decode(s);n&&2===n.length?(t=n[0],i=n[1],this.baseLayer.goToPage(t,i)):controller.goHome()},goBack:function(e,t){if("Theater"===this.baseLayer.currentPage.pageTitle&&vui.m.userId!==window.getCookie("userId")&&(vui.getModel().userId=""===window.getCookie("userId")?null:window.getCookie("userId"),vui.getModel().sessionKey=""===window.getCookie("sessionKey")?null:window.getCookie("sessionKey"),vui.m.userId&&vui.m.sessionKey))return vui.getModel().openCsConnection(function(){vui.account.init(function(){this.baseLayer.goBack()}.bind(this))}.bind(this));this.baseLayer.goBack()},exitConfirm:function(e,t){var i=e,s=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",n={dialogBoxHeight:300,title:vui.strings.getText("EXITING_VUDU_DIALOG_TITLE_APPX",s),text:t||vui.strings.getText("EXITING_VUDU_DIALOG_TEXT_APPX",s),img:vui.images.genericOverlay,buttons:[{name:"yes",style:"blue",label:vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_DONE")},{name:"no",style:"blue",label:vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_CANCEL")}],callback:i};this.showPopup("ConfirmExitDialog",n)},exitApp:function(e){function t(){try{this.baseLayer&&this.baseLayer.currentPage&&this.baseLayer.currentPage.hide({})}catch(e){alert(spewCaughtError(e,"ERROR CONNECTING:"))}vui.gConnectionInstance.isBixbyEnabled()&&vui.getVoiceControl()&&vui.getVoiceControl().destroy(),alert("EXIT APP!"),vui.vvPlatform.exitApplication()}if(window.vuduSplashScreenIsShowing)t();else{if(vui.vvPlatform.isXbox)return;this.exitConfirm(t)}},addHomeToHistory:function(){vui.vvPlatform.baseApp?this.baseLayer._history.push(["OpeningPitch_Remote",{}]):this.baseLayer._history.push([vui.vvPlatform.startPage[0],vui.vvPlatform.startPage[1]])},goHome:function(){if(this.baseLayer.currentPage&&"Theater"===this.baseLayer.currentPage.pageTitle&&vui.m.userId!==window.getCookie("userId")&&(vui.getModel().userId=""===window.getCookie("userId")?null:window.getCookie("userId"),vui.getModel().sessionKey=""===window.getCookie("sessionKey")?null:window.getCookie("sessionKey"),vui.m.userId&&vui.m.sessionKey))return vui.getModel().openCsConnection(function(){vui.account.init(function(){this.hidePopup(),this.goToPage("Home",{},!0),this.baseLayer.resetHistory()}.bind(this))}.bind(this));this.hidePopup(),this.goToPage("Home",{},!0),this.baseLayer.resetHistory()},goSearch:function(e){alert("GO SEARCH!"),this.hidePopup();var t=!0;e&&void 0!==e.skipHistory&&(t=e.skipHistory),this.goToPage("Home",{activeTab:"search"},t),vui.select(controller.baseLayer.currentPage),!0===t&&this.baseLayer.resetHistory()},refreshCurrentPage:function(){this.hidePopup(),this.baseLayer.goToPage(this.baseLayer.currentTemplate,this.baseLayer.currentParams,!0)},setAudioMode:function(e){setCookie("soundType",e)},getAudioMode:function(){return audioMode=getCookie("soundType"),audioMode||"Dolby Digital"},setBusy:function(e){this.isBusy=e},keyIsRegistered:function(e){var t=vui.keyMapping[e];return t&&(e=t,alert("MAP THE KEYCODE TO:"+e)),this.keyListeners[e]?(alert("RETURN TRUE FOR LISTEENR:"+e),!0):(alert("RETURN FALSE FOR LISTEENR:"+e),!1)},notifyKeyListeners:function(e){if(this.isBusy)e.preventDefault();else{var t=e.keyCode;alert("NOTIFY KEYCODE:"+t);var i,s=vui.keyMapping[t];s&&(t=s,alert("MAP THE KEYCODE TO:"+t)),vui.numericMap[t]&&(i=vui.numericMap[t],t=vui.specialNumericKeyId),"hygiea"===vui.vvPlatform.id&&80!==t&&65!==t&&(45<=t&&t<=90||160<=t&&t<=222)&&(i=e.key,t=vui.specialNumericKeyId);var n=this.activityListeners.concat(this.keyListeners[t]);if(n){e.preventDefault();for(var a=n.length,o=0;o<a;o++)try{n[o]&&n[o](i)}catch(e){alert(spewCaughtError(e,"NOTIFY KEY LISTENERS:"))}}}},addKeyListener:function(e,t,i){this.keyListeners[e]||(this.keyListeners[e]=[]),i?(alert("REPLACING:"+e),this.keyListeners[e]=[t]):this.keyListeners[e].unshift(t)},activityListeners:[],addActivityListener:function(e){for(var t=0,i=this.activityListeners.length;t<i;t++)if(this.activityListeners[t]===e)return void alert("ERROR: this func has already  been registered as an activity listener");this.activityListeners.push(e)},removeActivityListener:function(e){for(var t=-1,i=0,s=this.activityListeners.length;i<s;i++)this.activityListeners[i]===e&&(t=i,alert("Deleting activity listener at: "+i));-1!==t&&this.activityListeners.splice(t,1),alert("activityListener len is now: "+this.activityListeners.length)},removeAllKeyListeners:function(){alert("REMOVEING ALL KEY LISTENERS"),this.keyListeners={}},preloadAssets:function(e){this.imageCache=[];for(var t=[vui.images.newVuduLogo],i=0;i<t.length;i++){var s=document.createElement("img");t[i]?(s.src=t[i],this.imageCache.push(s)):s.src=t[i]}},requiredPreloads:function(e){vui.SettingsModel.init(),vui.CCModel.init(),vui.getModel().preload(e)},parseDeepLinkParams:function(i,n){switch(window.isDeepLinking=!0,window.doOpeningPitch=!1,vui.deepLink.switchingToDeepLinkPage=!0,alert("DEEP LINK PARAMS TYPE: "+i.type),i.type){case"content":return this.baseLayer.initiateHistoryForDeepLink(),vui.vvPlatform.startPage=["NewMovieDetails",{contentId:i.contentId,contentType:i.contentType||"content",launchFromDeeplink:!0}],void n();case"uiPage":return this.baseLayer.initiateHistoryForDeepLink(),vui.vvPlatform.startPage=["Showcase",{pageId:i.uiPageId}],void n();case"uiEntry":var e={_type:"uiEntrySearch",uiEntryId:i.uiEntryId};vui.m.doQuery(e,function(e,t,i){if(i&&i.uiEntry&&i.uiEntry.length){var s=vui.parseEntry(i.uiEntry[0],null);return s.launchParams&&!s.launchParams.expired?(controller.baseLayer.initiateHistoryForDeepLink(),vui.vvPlatform.startPage=[s.template,s.launchParams]):vui.vvPlatform.startPage=["Home",{}],void n()}return vui.vvPlatform.startPage=["Home",{}],void n()});break;case"spotlightTab":return this.baseLayer.initiateHistoryForDeepLink(),vui.vvPlatform.startPage=["Home",{spotlightTab:i.spotlightTab}],void n();case"myVuduTab":if(!window.getCookie("userId"))return window.doOpeningPitch=!0,vui.deepLink.switchingToDeepLinkPage=!1,void n();var t;this.baseLayer.initiateHistoryForDeepLink();var s=0;switch(vui.gConnectionInstance.usePersonalizedApis()&&(s=1),i.myVuduTab){case"MYWISHLIST":t=3+s;break;case"MYPREORDERS":t=4+s;break;case"MYMOVIES":t=1+s;break;case"MYTVSHOWS":t=2+s;break;case"MYOFFERS":t=5+s;break;default:t=0+s}return vui.vvPlatform.startPage=["Home",{activeTab:vui.gConnectionInstance.usePersonalizedApis()?"myLibrary":"my",bookState:["myVuduView",{selectedInd:t}]}],void n();case"uxPage":return this.baseLayer.initiateHistoryForDeepLink(),vui.vvPlatform.startPage=["PersonalizedShowcase",{elementType:"page",uxElementId:i.uxPageId}],void n();case"uxRow":return this.baseLayer.initiateHistoryForDeepLink(),void vui.m.getUxCollection(i.uxRowId,function(e){var t={elementType:"row",uxRowId:i.uxRowId,uxElementId:i.uxRowId,uxRowTrackingId:vui._.aStr(e.trackingId),uxRowIsPersonal:"true"===vui._.aStr(e.isPersonal)};e&&"uxRow"===e._type&&e.hasBackgroundImage&&"true"===e.hasBackgroundImage[0]&&(t.backgroundUrlPath=vui.getModel().getBackgroundUrlFromRowId(i.uxRowId)),vui.vvPlatform.startPage=["PersonalizedShowcase",t],n()}.bind(this));default:return window.getCookie("userId")||(window.doOpeningPitch=!0,vui.deepLink.switchingToDeepLinkPage=!1),void n()}},getStartPage:function(e){var t;vui.vvPlatform.startPage?e(vui.vvPlatform.startPage):(vui.vvPlatform.startPage=["Home",{}],(t=vui.deepLink.getDeepLinkParams())&&(t.type||t.campaignId)?(alert("PARSING DEEP LINK PARAMS"),controller.parseDeepLinkParams(t,e)):e())},setAppLaunchedSource:function(){var e=vui.deepLink.getDeepLinkParams(),t="regular";e&&e.launchSource&&(t=e.launchSource),window.launchFromBixby&&(t="voiceSearch"),vui.vvPlatform.setAppLaunchedSource(t)},launch:function(){var t=vui.vvPlatform.startPage;updateVuduSplashScreen("none"),clearTimeout(window.vuduLoadingTimeoutId);var i,e,s,n=vui.getModel().userId,a=vui.puser.hasPassword(),o=vui.puser.getCreatorOauthClientId();vui.promo.getPromoType();if("samsungTizen"===vui.vvPlatform.clientType&&controller.setAppLaunchedSource(),vui.vvPlatform.savedActionAfterLaunch?(vui.vvPlatform.savedActionAfterLaunch(),vui.vvPlatform.savedActionAfterLaunch=null):window.doOpeningPitch?n?n&&"false"===a&&!o?(i=function(e){"back"===e?vui.ActivationController.showNoPassword(i):controller.goToPage(t[0],t[1])},vui.ActivationController.showNoPassword(i)):window.launchFromBixby?(window.launchFromBixby=null,controller.baseLayer.initiateHistoryForVoiceControl(),controller.continueWatchingFromDeeplink()):vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?controller.goToPage("kidsModeWhosWatching"):controller.goToPage(t[0],t[1]):(vui.promo.getPromoType(),vui.vvPlatform.isXbox?vui.ActivationController.getXboxTokenAsync().then(vui.ActivationController.loginWithXboxAsync).then(vui.ActivationController.onLoginSuccess,failedLogin.bind(this)):vui.vvPlatform.baseApp?controller.goToPage("OpeningPitch_Remote"):(e=vui.gConnectionInstance.getUxWelcomeScreenId(),s="OpeningPitchOld",2===e?vui.m.getWelcomeScreen(function(e){(e=e||{}).hasImage&&e.welcomeId?(controller.goToPage("uxOpeningPitch",e),s="OpeningPitchNew"+e.welcomeId):controller.goToPage("OpeningPitch_AccountActivationPromo"),vui.analytics.trackEvar({promotagGroup:s})}):(1===e?(controller.goToPage("uxOpeningPitch",{url:vui.images.uxWelcomeScreen_default}),s="OpeningPitchNew"+e):controller.goToPage("OpeningPitch_AccountActivationPromo"),vui.analytics.trackEvar({promotagGroup:s})))):location.hash?controller.hashToPage(location.hash):controller.goToPage(t[0],t[1]),window.netLogStarted=!0,1<vui.debugLevel){alert("------- widget starting ------ total lines: "+window.logsBeforeConnected.length);for(var r=0;r<window.logsBeforeConnected.length;r++)window.alert2NetLog(r+".) "+window.logsBeforeConnected[r]);alert("------- widget connected ------")}window.logsBeforeConnected=[],VUDU.log("LOGSTRING appLaunch appName=movieUi widgetVersion="+vui.getWidgetVersion(),"info"),window.Asteroid&&Asteroid.getBuildInfo&&VUDU.log("Widget Player Info: "+JSON.stringify(Asteroid.getBuildInfo()),"info"),vui._.preFetchDataAfterActivated(),vui.analytics.widgetActivated(),controller.enteredUI=!0,"samsungTizen"!==vui.vvPlatform.clientType||vui.getModel().userId&&vui.getModel().sessionKey||vui.vvPlatform.launchTizenBackground()},goToLoadingPage:function(){this.preloadAssets(),vui.Connection=new Class({SOC:{},getSocValue:function(e,t){if(!e)throw Error("SOC key is not specified");var i=this.SOC[e];return void 0!==i?i:t},initialize:function(e){this.callback=e,this.currentState="CONNECTED"},reloadSOC:function(n,e,t){var i={_type:"serverOwnedConfigGet"};e?(i.accountId=e,i.lightDeviceId=t):(i.clientType=vui.vvPlatform.clientType,i.clientUniqueId=VUDU.registry.deviceId,i.domain=vui.vvPlatform.getDomain());var a=this;vui.getModel().doQuery(i,function(e,t,i){if(t===vui.getModel().queryStatus.ST_SUCCESS&&"serverOwnedConfig"===i._type&&i.entry&&i.entry.length){a.SOC={};for(var s=0;s<i.entry.length;++s)a.SOC[vui._.aStr(i.entry[s].keyAsText)]=vui._.aStr(i.entry[s].value)}n()})},connect:function(){var e=this;this.reloadSOC(function(){e.currentState="CONNECTED";e.callback(e.currentState,{type:"",reason:"",note:"",extra:""})})},getWmtOauthClientId:function(){return this.getSocValue(vui.Connection.SOC_KEYS.CLIENT_WMT_OAUTH_CLIENT_ID,"wmt")},showVudutestContent:function(){return this.getSocValue(vui.Connection.SOC_KEYS.LUA_FORCE_SHOW_VUDUTEST_CONTENT,0)},getSubtitleGroup:function(){return this.getSocValue(vui.Connection.SOC_KEYS.LUA_SHOW_SUBTITLES,1)},getDisplayUIEntriesForTopPicks:function(){return this.getSocValue(vui.Connection.SOC_KEYS.DISPLAY_UIENTRIES_FOR_TOPPICKS,0)},getIsUHDSupported:function(){var e=this.getSocValue(vui.Connection.SOC_KEYS.UHD_SUPPORTED,"default");return"default"===e?vui.vvPlatform.uhdSupported:parseInt(e)},getIsActivationCodeEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ACTIVATION_CODE,"false")},getIsMVPEnabled:function(){return"dvheDtr,highP"!==this.getSocValue(vui.Connection.SOC_KEYS.MULTI_VIDEO_PROFILE,"dvheDtr,highP")},getMVPForced:function(){var e=this.getSocValue(vui.Connection.SOC_KEYS.MULTI_VIDEO_PROFILE,"dvheDtr,highP");return!(-1<e.indexOf(","))&&e},getIsHideUHD:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.HIDE_UHD_PROFILE,"false")},getAVODEnabled:function(){var e=this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_AVOD,"false");return"true"===e||"ENABLED"===e},getConcurrentStreamEnforced:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.CONCURRENT_STREAM,"true")},getRemoveHD:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.REMOVE_HD,"false")},getPhysicalDiscEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_PHYSICAL_DISC,"false")},getTTSEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ASSISTIVE_UI,"false")},getVPPAMessagingEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.VPPA_MESSAGING,"false")},getActivationPromo:function(){var e=this.getSocValue(vui.Connection.SOC_KEYS.ACTIVATION_PROMO,"0");return parseInt(e)},getTokenEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_PROMO_TOKEN,"false")},getAsteroidPlayer:function(){return this.getSocValue(vui.Connection.SOC_KEYS.ASTEROID_PLAYER,void 0)},getAsteroidStreamingAlgorithm:function(){return this.getSocValue(vui.Connection.SOC_KEYS.ASTEROID_STREAMING_ALGORITHM,void 0)},getIsHTTP:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.FORCE_HTTP,"false")},getIsShoppableAdsEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.SHOPPABLE_ADS,"false")},getIsUVSupportEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_UV_SUPPORT,"false")},getHTTPSSetting:function(){return parseInt(this.getSocValue(vui.Connection.SOC_KEYS.USE_HTTPS,"3"),10)},getIsRealTimePhysicalDisk:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_REAL_TIME_PHYSICAL_DISC,"true")},getCommonSenseMediaEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_COMMON_SENSE_MEDIA,"false")},getThirdPartyEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_THIRD_PARTY,"false")},get4KForAll:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_4K_FOR_ALL,"false")},usePersonalizedApis:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_PERSONALIZATION_API,"true")},getKidsModeEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_KIDS_MODE,"false")},getIsDissableAggStatsForAds:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.DISABLE_AGG_STATS_FOR_ADS,"true")},getDisableFamilyPlayVizioMediatek:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.DISABLE_FAMILY_PLAY_VIZIO_MEDIATEK,"false")},getAbsoluteMaximumBitRate:function(){return this.getSocValue(vui.Connection.SOC_KEYS.ABSOLUTE_MAXIMUM_BITRATE,void 0)},isClearplayEnabled:function(){return"chromecast"!==vui.vvPlatform.clientType&&(("vizioCast"!==vui.vvPlatform.clientType||!this.getDisableFamilyPlayVizioMediatek()||!vui.vvPlatform.isMediatekChipset())&&"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_CLEARPLAY,"false"))},getTizenEdenBarCacheTime:function(){var e=this.getSocValue(vui.Connection.SOC_KEYS.TIZEN_EDEN_BAR_CACHE_TIME,void 0);return null!=e?parseInt(e,10):void 0},isBixbyEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_BIXBY,"false")},getPrivacyInfoEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_PRIVACY_INFO,"false")},getFamilyPlayCalloutAnimationEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_FP_CALLOUT_ANIMATION,"false")},getUxWelcomeScreenId:function(){return parseInt(this.getSocValue(vui.Connection.SOC_KEYS.WELCOME_SCREEN_ID,"0"),10)},getMain10HDXEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_MAIN10_HDX,"false")},getUserCollectionEnabled:function(){return 2===parseInt(this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_USER_COLLECTION,"0"),10)},getUserCollectionOnboardingTipEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_USER_COLLECTION_ONBOARDING_TIP,"false")},getRentToOwnEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_RENT_TO_OWN,"false")},getFandangoPrivacyEnabled:function(){return"true"===this.getSocValue(vui.Connection.SOC_KEYS.ENABLE_FANDANGO_PRIVACY,"false")}}),vui.Connection.SOC_KEYS={LUA_FORCE_SHOW_VUDUTEST_CONTENT:"testContent",CLIENT_WMT_OAUTH_CLIENT_ID:"wmtOauthId",LUA_SHOW_SUBTITLES:"showSubtitles",DISPLAY_UIENTRIES_FOR_TOPPICKS:"uiEntries_For_TopPicks",ENABLE_AVOD:"enableAVOD",UHD_SUPPORTED:"forceUHD",CONCURRENT_STREAM:"concurrentStream",REMOVE_HD:"removeHD",ENABLE_PHYSICAL_DISC:"enablePhysicalDisc",ASSISTIVE_UI:"assistiveUI",VPPA_MESSAGING:"enableMARenew",ACTIVATION_PROMO:"enableActivationPromo",MULTI_VIDEO_PROFILE:"multiVideoProfiles",ENABLE_PROMO_TOKEN:"enablePromoToken",HIDE_UHD_PROFILE:"hideUHDProfile",ACTIVATION_CODE:"codeActivation",ASTEROID_PLAYER:"asteroidPlayer",FORCE_HTTP:"forceHTTP",SHOPPABLE_ADS:"enableShoppableAds",ENABLE_UV_SUPPORT:"enableUVSupport",USE_HTTPS:"useHTTPS",ENABLE_REAL_TIME_PHYSICAL_DISC:"enableRealTimePhysicalDisc",ENABLE_COMMON_SENSE_MEDIA:"enableCommonSenseMedia",ENABLE_THIRD_PARTY:"enableThirdPartySubscriptions",ENABLE_4K_FOR_ALL:"enable4KForAll",ENABLE_PERSONALIZATION_API:"usePersonalizationAPI",ENABLE_KIDS_MODE:"enableKidsMode",DISABLE_AGG_STATS_FOR_ADS:"disableAggStatsForAds",ASTEROID_STREAMING_ALGORITHM:"asteroidStreamingAlgorithm",ENABLE_CLEARPLAY:"enableClearplay",TIZEN_EDEN_BAR_CACHE_TIME:"tizenEdenBarCacheTime",DISABLE_FAMILY_PLAY_VIZIO_MEDIATEK:"disableFamilyPlayVizioMediatek",ENABLE_PRIVACY_INFO:"enablePrivacyInfo",ENABLE_BIXBY:"enableBixby",ENABLE_FP_CALLOUT_ANIMATION:"enableFamilyPlayCalloutAnimation",WELCOME_SCREEN_ID:"welcomeScreenId",ENABLE_MAIN10_HDX:"enableHEVCForAllQualities",ABSOLUTE_MAXIMUM_BITRATE:"absoluteMaximumBitrate",ENABLE_USER_COLLECTION:"userCollectionVersion",ENABLE_USER_COLLECTION_ONBOARDING_TIP:"enableUserCollectionOnboarding",ENABLE_RENT_TO_OWN:"enableRentToOwn",ENABLE_FANDANGO_PRIVACY:"enableFandangoPrivacy"},this.enteredUI=!1,this.addKeyListener(tvKey.KEY_PLAY,function(){vui.gConnectionInstance&&"DISCONNECTED"==vui.gConnectionInstance.currentState&&this.enteredUI&&(updateVuduSplashScreen("splash",vui.strings.getText("SPLASH_MESSAGE_RECONNECTING")),alert("DOING CONNECT"),vui.gConnectionInstance.connect())}),failedLogin=function(e){var t,i,s,n;"loginFailed"===e.status?(t=vui.gConnectionInstance.getUxWelcomeScreenId(),i="OpeningPitchOld",2===t?vui.m.getWelcomeScreen(function(e){(e=e||{}).hasImage&&e.welcomeId?(controller.goToPage("uxOpeningPitch",e),i="OpeningPitchNew"+e.welcomeId):controller.goToPage("OpeningPitch_AccountActivationPromo"),vui.analytics.trackEvar({promotagGroup:i})}):(1===t?(controller.goToPage("uxOpeningPitch",{url:vui.images.uxWelcomeScreen_default}),i="OpeningPitchNew"+t):controller.goToPage("OpeningPitch_AccountActivationPromo"),vui.analytics.trackEvar({promotagGroup:i}))):(alert("Login erorr: "+JSON.stringify(e),"error"),this.hidePopup(),vui.vvPlatform.startPage?this.goToPage(vui.vvPlatform.startPage[0],vui.vvPlatform.startPage[1]):this.goToPage("Home",{}),s=vui.getModel()&&vui.getModel().supportPhone||"",n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",n,s)))};var e=function(e,t){try{if(alert("VUDU: CONNECTION CALLBACK, STATE:"+e+", type:"+t.type+"reason:"+t.reason),t.note&&alert("VUDU: CONNECTION CALLBACK note:"+t.note),this.enteredUI)return void alert("VUDU: CONNECTION CALLBACK: IGNORING");"CONNECTED"===e?(alert("CONNECTED!"),vui.loadTabModels(function(){controller.requiredPreloads(function(){controller.getStartPage(controller.launch)})})):"CONNECTING"===e||"DISCONNECTED"===e&&("ERROR"===t.type&&("NETWORK"===t.reason?this.enteredUI?updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_CHECK_YOUR_NETWORK_PRESS_PLAY"),t.extra,getSystemInfoMoreInfo()):updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_PLEASE_PRESS_RETURN_AND_CHECK"),vui.strings.getText("SPLASH_CURL_CODE_COLON")+" 0",getSystemInfoMoreInfo()):"VUDU"===t.reason?(extraText=t.extra,window.vuduServiceErrorHasOccurred=!0,updateVuduSplashScreen("error",vui.strings.getText("SPLASH_THERES_A_PROBLEM_WITH_THE_VUDU"),vui.strings.getText("SPLASH_PLEASE_CONTACT_VUDU_CUSTOMER_URL"),extraText,getSystemInfoMoreInfo())):"DEVICE"===t.reason?updateVuduSplashScreen("error",vui.strings.getText("SPLASH_THERE_IS_A_PROBLEM_WITH_THIS_DEVICE"),vui.strings.getText("SPLASH_PLEASE_CONTACT_YOUR_DEVICE_MANU"),t.extra,getSystemInfoMoreInfo()):"GEO"===t.reason&&updateVuduSplashScreen("error",vui.strings.getText("SPLASH_COUNTRY_CHANGED"),vui.strings.getText("SPLASH_THE_COUNTRY_DETECTED_FOR_THIS_DEVICE",t.extra),"",getSystemInfoMoreInfo())),alert("GOT STATE: "+e))}catch(e){alert(spewCaughtError(e,"ERROR CONNECTING:"))}}.bind(this);vui.gConnectionInstance=new vui.Connection(e);var t=function(e,t,i){alert("VUDU: networkHandlerCallback, STATE:"+e+" MSG="+t),document.getElementById("networkHandler_text")&&(document.getElementById("networkHandler_text").innerHTML=t),"HIDDEN"==e?updateVuduSplashScreen("none"):"GOOD"!=i.currentLinkState?updateVuduSplashScreen("error",vui.strings.getTransformedText("SPLASH_NETWORK_CABLE_UNPLUGGED"),vui.strings.getTransformedText("SPLASH_PLEASE_CHECK_YOUR_NETWORK_CABLE"),vui.strings.getText("SPLASH_PLEASE_CONSULT_YOUR_MANU_USER_MAN"),getSystemInfoMoreInfo()):updateVuduSplashScreen("error",vui.strings.getTransformedText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getTransformedText("SPLASH_CHECK_YOUR_NETWORK_CONNECTIONS"),t,getSystemInfoMoreInfo())}.bind(this);vui.gNetworkHandlerInstance=new vui.NetworkHandler(t),vui.gConnectionInstance.connect(),vui.analytics=new vui.OmnitureTracker;vui.account.notifyOnInit(function(){vui.analytics.reportIds()})},registerPageObserver:function(e,t){this.currentPage.registerPageObserver(e,t)},rememberAndDisablePageState:function(){null!=this.currentPage&&(this.currentPage.selectable=!1)},restorePageState:function(){null!=this.currentPage&&(this.currentPage.selectable=!0)},showPopup:function(){this.baseLayer.showDialog.apply(this.baseLayer,arguments)},hidePopup:function(){this.baseLayer.hideDialog.apply(this.baseLayer,arguments)},setOnNetworkRestore:function(e){this._onNetworkRestore=e},getOnNetworkRestore:function(){return this._onNetworkRestore||!1},continueWatchingFromDeeplink:function(){var e=vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode(),o=e?controller.goToPage.bind(this,"kidsModeWhosWatching"):controller.goHome.bind(this),t=vui.getModel().bookmarkCache.getLastWatchedContentId(e);t?vui.m.getMovieInfo(t,function(e){var t,i,s,n,a;e?(t=e.data).ownerships||vui.m.avodManager.canDisplayWatchWithAdsButton(t)?(s=(i=new vui.ContentActions).getVariantByOwnership(t),n={movie:t,variant:s},controller.baseLayer.pushToHistory(["NewMovieDetails",{contentId:t.contentId}]),s||"true"!==vui._.aStr(t.isAdvertEnabled)?i.onClickPlay(n,t.skipHistory,t.resetBookmark):i.onClickWatchWithAds(n,t.resetBookmark)):(a={title:"Sorry",poster:vui.getModel().getPosterUrl(t,window.vui.ResDef.detailPage.POSTER_WIDTH),text:"This content is no longer free. Please purchase this content to play.",dialogBoxClassName:"ResumeError",buttons:[{name:"seeDetails",style:"blue",label:vui.strings.getText("MOVIE_DETAILS_RENT_OWN_BUTTON")},{name:"cancel",style:"blue",label:vui.strings.getText("FREE_RENTAL_CANCEL_BUTTON")}],callback:function(e){switch(e){case"seeDetails":vui._.posterOnAction(t);break;case"cancel":controller.hidePopup(),o()}}},controller.showPopup("PosterTextDialog",a),vui.select(controller.baseLayer)):o()}):o()}}),vui.browseIntoAllMoviesAutomation=function(){for(var e=[],t=0;t<1e4;t++){e.push("enter"),e.push("back");var i=Math.floor(t/5);4===Math.floor(t%5)?e.push("down"):i%2==0?e.push("right"):e.push("left")}vui.doRemoteCommands(e)},vui.browseAllMoviesAutomation=function(){for(var e=[],t=0;t<1e4;t++){var i=Math.floor(t/5);4===Math.floor(t%5)?e.push("down"):i%2==0?e.push("right"):e.push("left")}vui.doRemoteCommands(e)},vui.browseMoviesAutomation=function(){for(var e=[],t=0;t<1e4;t++)e.push("down");vui.doRemoteCommands(e)},vui.inAndBackAutomation=function(){for(var e=[],t=0;t<1e4;t++)e.push("enter"),e.push("back");vui.doRemoteCommands(e)},vui.cueCodeHistory=[],vui.cueAutomationListener=function(e){var t,i;vui.account.hasLevel2DebugLabel()&&(t={12345:function(){vui.browseIntoAllMoviesAutomation()},99999:function(){vui.stopRemoteCommands()}},alert("NUMBER:"+e),vui.cueCodeHistory.push(e),5<vui.cueCodeHistory.length&&vui.cueCodeHistory.shift(),i=vui.cueCodeHistory.join(""),alert("CUR:"+i),t[i]&&t[i]())},vui.doRemoteCommands=function(e){window.pluginAPI.setOffScreenSaver(),e&&e.length||alert("SOMETHINGS WRONG WITH YOUR COMMANDS!");var t={left:function(){vui.onScalarDirectionLeft()},right:function(){vui.onScalarDirectionRight()},up:function(){vui.onScalarDirectionUp()},down:function(){vui.onScalarDirectionDown()},enter:function(){vui.onClickAction()},back:function(){vui.onClickBack()}},i=0;alert("Start automation!");vui.automationIntervalId=setInterval(function(){t[e[i]](),++i>=e.length&&(alert("We are done with automation!"),vui.stopRemoteCommands())},1700)},vui.stopRemoteCommands=function(){window.pluginAPI.setOnScreenSaver(600),vui.automationIntervalId&&(alert("Stop Remote Commands"),clearInterval(vui.automationIntervalId))},vui.ContentActions=new Class({onClickWatchWithAds:function(t,i){var s;"season"===vui._.aStr(t.movie.type)?t.currentWidget&&vui.executeOnContainer(t.currentWidget,"onDirectionRight"):((s=vui.getModel()).bookmarkCache.check(vui._.aStr(t.movie.contentId))||vui.analytics.trackEvent("event187",{product:vui._.aStr(t.movie.contentId)}),this.doActivationOrCommand(function(){var e;s.parentalControls.isRestricted("play",window.getFriendlyRating(t.movie.contentRating[0]))?(vui.analytics.showDialog(window.APPNAME+":Transaction ParentalControls Dialog"),e={authType:"family_setting",promptText:vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED"),callback:function(e){"correct"==e&&s.avodManager.play({content:t.movie,resetBookmark:i}),alert("HIDING BECAUSE RESTRICTED"),controller.hidePopup()}},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?e.authType="kids_mode_pc":e.promptText2=vui.strings.getText("SETTINGS_PIN_GRACE_PERIOD"),vui.passcodePrompt(e)):s.avodManager.play({content:t.movie,resetBookmark:i})}))},onTransactWithToken:function(n){this.doActivationOrCommand(function(){var e,i=function(i){var e=function(e){if("back"==e||"cancel"==e)return controller.hidePopup(),void vui.analytics.trackEvent("event123",{product:n.offer.contentId[0]});var t;"confirm"==e&&(t={movie:n.movie,offer:n.offer,variant:n.variant,purchasePlan:i},this.onTokenDone(t))}.bind(this),t=vui._.aStr(n.variant.videoQuality).toUpperCase(),s={title:vui.strings.getText("FREE_RENTAL_REDEEM"),poster:vui.getModel().getPosterUrl(n.movie,window.vui.ResDef.detailPage.POSTER_WIDTH),text:vui.strings.getText("FREE_RENTAL_REDEEM_CONFIRM",vui._.aStr(n.movie.title)+" in "+t,getTimeString(vui._.aStr(n.offer.viewingSeconds))),dialogBoxClassName:"tokenConfirm",buttons:[{name:"confirm",style:"blue",label:vui.strings.getText("FREE_RENTAL_WATCHNOW_BUTTON"),iconSrc:vui.images.confirm_icon},{name:"cancel",style:"blue",label:vui.strings.getText("FREE_RENTAL_CANCEL_BUTTON"),iconSrc:vui.images.cancel_icon}],callback:e};0<parseFloat(this.getValueOr(i,"subTotal",0,"0"))&&vui.vvPlatform.isXbox?vui.xboxModel.getXboxPayment(newparams):controller.showPopup("PosterTextDialog",s)}.bind(this),t=function(e){var t=e.purchaseStatus;"ok"==t?i(e.purchasePlan&&e.purchasePlan[0]):(vui.analytics.showDialog(window.APPNAME+":Token Transaction preflight Failure Dialog"),this.handlePurchaseStatus(t,function(){n.callback&&n.callback("cancel")},n))}.bind(this);vui.getModel().parentalControls.isRestricted("play",window.getFriendlyRating(n.movie.contentRating[0]))?(vui.analytics.showDialog(window.APPNAME+":Token Transaction ParentalControls Dialog"),e={authType:"family_setting",promptText:vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED"),callback:function(e){"correct"==e&&vui.Model.doPurchasePreflight(n.offer,t,!0),controller.hidePopup()}},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?e.authType="kids_mode_pc":e.promptText2=vui.strings.getText("SETTINGS_PIN_GRACE_PERIOD"),vui.passcodePrompt(e)):vui.Model.doPurchasePreflight(n.offer,t,!0)}.bind(this))},onTokenDone:function(s){var n=s.offer,e=function(e){controller.hidePopup();var t,i=e.purchaseStatus;"ok"==i?(vui.analytics.trackEvent("event121",{product:n.contentId[0]}),t={movie:s.movie,variant:s.variant,offer:s.offer},this.onClickPlay(t)):(vui.analytics.showDialog(window.APPNAME+":Token Transaction Failure Dialog"),this.handlePurchaseStatus(i,function(){s.callback&&s.callback("cancel")},s))}.bind(this);vui.Model.doPurchase(n,e,{expectedPurchasePlan:[s.purchasePlan],useToken:"true"})},doActivation:function(e){vui.ActivationController.beginActivation(e,"purchase")},doActivationOrCommand:function(t,i){vui.account.getAccountId()?t():this.doActivation(function(e){"success"==e?t():i&&i(e)})},playFreePreview:function(e){e.forFreePreview="true",this.onClickPlay(e)},watchTrailer:function(){var e,t,i,s,n,a,o,r={};data=this.data,data&&data.dashTrailerEditionId&&(e=vui.getModel().parentalControls,(t=vui._.aStr(data.contentRating))&&(i=e.isRestricted("play",window.getFriendlyRating(t))),n=vui._.aStr(data.dashTrailerEditionId),vui.m.userSessionStore.getFromStore("zap-api-element-id")&&(r=vui._.getZapApiEvarsFromSessionStore()),vui.analytics.trackEvent("event7",{product:data.contentId[0],evars:r}),s=function(){controller.goToPage("Theater",{data:{type:"trailer",editionId:n,data:data,hasAssignedQuality:!0}})}.bind(this),i?(a=function(e){"correct"==e&&s(),controller.hidePopup()}.bind(this),o={authType:"family_setting",promptText:vui.strings.getText("MOVIE_DETAILS_TRAILER_PIN_REQUIRED"),callback:a},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?o.authType="kids_mode_pc":o.promptText2=vui.strings.getText("SETTINGS_PIN_GRACE_PERIOD"),vui.passcodePrompt(o)):s())},doRate:function(e){var t={};t.mim=this.movieInfoModel,e&&(t.cb=e.rateCallback.bind(e));this.doActivationOrCommand(function(){controller.showPopup("RatingDialog",t)})},doManagePreOrder:function(e,t){var i,s=this.movieInfoModel;if("function"==typeof e)i=e;else{if(!e.successCallback)return void alert("no successCallback error!");i=e.successCallback,s=e.mim||this.movieInfoModel}var n=function(e){"ok"==e?controller.showPopup("PreorderCancelSuccessDialog",{movie:this.movieInfoModel.data,cancelCallback:i}):this.showSimpleDialog(vui.strings.getText("PURCHASE_DIALOG_PROBLEM_COMPLETING_PREORDER"),i)}.bind(this),a=function(e){var t;"confirm"==e?(t=vui.getModel().preOrderedMovieCache.check(this.movieInfoModel.getContentId()),vui.Model.cancelPreOrder(t,n)):controller.hidePopup()}.bind(this);controller.showPopup("ManagePreOrderDialog",{mim:s,callback:a,upgrade:t})},doTransact:function(t){var i,s,n=this.movieInfoModel;if("function"==typeof t)i=t;else{if(!t.successCallback)return void alert("no successCallback error!");i=t.successCallback,n=t.mim||this.movieInfoModel,s=t.isPreorder}var e=function(){var e=function(e){e.successCallback=i,this.onClickOffer(e)}.bind(this);controller.showPopup(t.dialog?t.dialog:"OfferDialog",{mim:n,callback:e,origin:"offerPurchase",isPreorder:s})}.bind(this);this.doActivationOrCommand(e),vui.analytics.trackEvent("event90")},doPurchaseFromPreview:function(e){var t=e.callback,i=function(e){e&&"cancel"!=e?(e.callback=t,this.onClickOffer(e)):t("cancel")}.bind(this);e.callback=i,controller.showPopup("PreviewPurchaseDialog",e)},doFreePreview:function(){params={mim:this.movieInfoModel,callback:function(e){this.onClickFreePreview(e)}.bind(this)},controller.showPopup("PreviewDialog",params)},onClickFreePreview:function(e){if(e.variant.dimension&&"threeD"==e.variant.dimension[0]){var t=vui.getPlayer().check3DSupport();if(1!=t.status)return vui.analytics.showDialog(window.APPNAME+":Transaction 3d Not Supported Dialog"),void this.showSimpleDialog(t.message);if(vui.is2013X12AndOldFirmware())return vui.analytics.showDialog(window.APPNAME+":Transaction 3d Not Supported Dialog, Old Firmware"),void this.showSimpleDialog(vui.getUpgradeFirmwareMessage())}e.variant.videoQuality[0].toUpperCase();var i={movie:e.movie,variant:e.variant,validOffers:e.validOffers,offers:e.offers};this.playFreePreview(i)},showDialogWithTitle:function(e,t,i){var s={title:e,text:t,buttons:[{name:"done",style:"blue",label:vui.strings.getText("PURCHASE_DIALOG_OK_BUTTON"),width:150}],callback:function(){controller.hidePopup(),i&&i()}};controller.showPopup("SimpleTextDialog",s)},showSimpleDialog:function(e,t){var i={title:"",text:e,buttons:[{name:"done",style:"blue",label:vui.strings.getText("PURCHASE_DIALOG_OK_BUTTON"),width:150}],callback:function(){controller.hidePopup(),t&&t()}};controller.showPopup("SimpleTextDialog",i)},showPosterDialog:function(e,t,i){var s={title:"Error",poster:t,text:e,dialogBoxClassName:"error",buttons:[{name:"done",style:"blue",label:vui.strings.getText("PURCHASE_DIALOG_OK_BUTTON"),width:150}],callback:function(){controller.hidePopup(),i&&i()}};controller.showPopup("PosterTextDialog",s)},purchaseResponseCodes:{alreadyPurchased:function(e,t,i){function s(){i.callback&&i.callback("success"),i.successCallback&&i.successCallback()}vui.vvPlatform.appFeatureEnabled()?t("",vui.strings.getText("PURCHASE_DIALOG_ALREADY_PURCHASED"),s):t(vui.strings.getText("PURCHASE_DIALOG_ALREADY_PURCHASED"),s)},accountTrouble:vui.strings.getText("PURCHASE_DIALOG_ACCOUNT_PROBLEM",vui.vvPlatform.appFeatureEnabled()?"844-4-WMT-VID or support@video.walmart.com":"1-888-554-VUDU or support@vudu.com."),badOffer:vui.strings.getText("PURCHASE_DIALOG_OFFER_EXPIRED"),planChanged:vui.strings.getText("PURCHASE_DIALOG_AMOUNT_CHANGED"),notActivated:function(e){vui.ActivationController.beginActivation(e)},insufficientFunds:function(i,s){function e(e){var t;0==e?i():(t=vui.getModel().myVuduUrl,vui.vvPlatform.appFeatureEnabled()?s(vui.strings.getText("PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR_TITLE"),vui.strings.getText("PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR"),i):s(vui.strings.getText("PURCHASE_DIALOG_INSUFFICIENT_FUNDS",t),i))}vui.account.getPaymentMethodId()?e():vui.ActivationController.showNoPaymentMethod(e)},noBillingAddress:function(i,s){function e(e){var t;0==e?i():(t=vui.getModel().myVuduUrl,vui.vvPlatform.appFeatureEnabled()?s(vui.strings.getText("PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR_TITLE"),vui.strings.getText("PURCHASE_DIALOG_GENERIC_PAYMENT_ERROR"),i):s(vui.strings.getText("PURCHASE_DIALOG_PROBLEM_WITH_PAYMENT_DATA",t),i))}vui.account.getPaymentMethodId()?e():vui.ActivationController.showNoPaymentMethod(e)},noPaymentMethod:function(e){vui.ActivationController.showNoPaymentMethod(e)},outOfStock:vui.strings.getText("OWNDISC_OUTOFSTOCK_ERROR"),invalidShippingAddress:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("OWNDISC_INVALID_ADDRESS_TEXT_APPX","video.walmart.com"):vui.strings.getText("OWNDISC_INVALID_ADDRESS_TEXT_APPX","Vudu.com"),invalidPhoneNumber:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("OWNDISC_INVALID_PHONE_NUMBER_TEXT_APPX","video.walmart.com"):vui.strings.getText("OWNDISC_INVALID_PHONE_NUMBER_TEXT_APPX","Vudu.com")},handlePurchaseStatus:function(e,t,i){var s=this.purchaseResponseCodes[e];s?"string"==typeof s?vui._.aStr(i.movie.posterUrl)?this.showPosterDialog(s,vui.getModel().getPosterUrl(i.movie,window.vui.ResDef.detailPage.POSTER_WIDTH),t):this.showSimpleDialog(s,t):vui.vvPlatform.appFeatureEnabled()?s(t,this.showDialogWithTitle,i):s(t,this.showSimpleDialog,i):this.showSimpleDialog(vui.strings.getText("PURCHASE_DIALOG_PROBLEM_COMPLETING_PURCHASE"),t)},getValueOr:function(e,t,i,s){return e&&e[t]&&e[t][i]?e[t][i]:s},onClickOffer:function(s){if(s.variant.dimension&&"threeD"==s.variant.dimension[0]){var e=vui.getPlayer().check3DSupport();if(1!=e.status)return vui.analytics.showDialog(window.APPNAME+":Transaction 3d Not Supported Dialog"),void this.showSimpleDialog(e.message);if(vui.is2013X12AndOldFirmware())return vui.analytics.showDialog(window.APPNAME+":Transaction 3d Not Supported Dialog, Old Firmware"),void this.showSimpleDialog(vui.getUpgradeFirmwareMessage())}function t(){var e;r?(alert(" IS RESTRICTED"),e={authType:"family_setting",promptText:vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED_PURCHASE"),callback:function(e){alert("PASSCODE DONE:"+e),controller.hidePopup(),"correct"==e?h():s.callback&&s.callback("error")}},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(e.authType="kids_mode_pc"),vui.passcodePrompt(e)):(alert(" IS NOT RESTRICTED"),h())}var i,n,a,o,r=vui.getModel().parentalControls.isRestricted("purchase",window.getFriendlyRating(s.movie.contentRating[0])),l=s.variant.videoQuality[0],u=function(i){alert("pp is "+JSON.encode(i));var e={callback:function(e){if("back"==e||"cancel"==e)return controller.hidePopup(),void(s.callback&&s.callback(e));var t;"confirm"==e&&(t={movie:s.movie,offer:s.offer,variant:s.variant,callback:s.callback,successCallback:s.successCallback,purchasePlan:i,fromPromo:s.fromPromo,rtoParams:s.rtoParams},this.onClickOfferDone(t))}.bind(this),movie:s.movie,offer:s.offer,variant:s.variant,purchasePlan:i,discount:s.discount};0<parseFloat(this.getValueOr(i,"subTotal",0,"0"))&&vui.vvPlatform.isXbox?vui.xboxModel.getXboxPayment(e):controller.showPopup("ConfirmOfferDialog",e)}.bind(this),d=function(){var e,t=function(e){var t=e.purchaseStatus;"ok"==t?u(e.purchasePlan&&e.purchasePlan[0]):(vui.analytics.showDialog(window.APPNAME+":Transaction pre Purchase Failure Dialog"),this.handlePurchaseStatus(t,function(){s.callback&&s.callback("cancel")},s))}.bind(this);s.offer&&s.offer.preOrderStartTime&&s.offer.preOrderStartTime[0]?vui.getModel().preOrderedMovieCache.check(s.movie.contentId[0])?(e=function(){controller.refreshCurrentPage()}.bind(this),this.doManagePreOrder(e,!0)):u({}):vui.Model.doPurchasePreflight(s.offer,t)}.bind(this),c=function(){var e={callback:function(e){e?d():controller.hidePopup()}.bind(this),movie:s.movie,videoQuality:l};controller.showPopup("AddressConfirmDialog",e)}.bind(this),h=function(){vui._.aStr(s.offer.includePhysicalCopy)?vui.account.refresh(function(){vui.user.refresh(c)}):d()}.bind(this);vui.analytics.trackEvent("scCheckout",{product:s.movie.contentId[0]}),vui.gConnectionInstance.getIsUHDSupported()||"uhd"!==vui._.aStr(s.variant.videoQuality)?this.doActivationOrCommand(t,function(){s.callback&&s.callback("cancel")}):(i=function(e){switch(e){case"continue":this.doActivationOrCommand(t,function(){s.callback&&s.callback("cancel")});break;case"cancel":break;case"back":controller.hidePopup()}}.bind(this),n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",a=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com":"Vudu.com",o={title:vui.strings.getText("HDCP22_NOT_SUPPORTED_TITLE_PURCHASE"),poster:vui.getModel().getPosterUrl(s.movie,window.vui.ResDef.detailPage.POSTER_WIDTH),text:vui.strings.getText("HDCP22_NOT_SUPPORTED_TEXT_PURCHASE_APPX",n,a),dialogBoxClassName:"ResumeError",buttons:[{name:"continue",style:"blue",label:vui.strings.getTransformedText("CONTINUE")}],callback:i},controller.showPopup("PosterTextDialog",o))},activateOrPlay:function(e){vui.doActivationOr(this.onClickPlay,this.onClickPlay,e)},onClickPlay:function(t,i,s,n,a){if("bundle"===vui._.aStr(t.movie.type)||"season"===vui._.aStr(t.movie.type))t.currentWidget&&vui.executeOnContainer(t.currentWidget,"onDirectionRight");else{var e=t.variant,o=t.movie,r={};$extend(r,e);var l={product:vui._.aStr(o.contentId)};t.name&&"watch"===t.name&&vui.m.userSessionStore.getFromStore("zap-api-element-id")&&(l.evars=vui._.getZapApiEvarsFromSessionStore()),"true"===vui._.aStr(o.hasClearplay)&&vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings.injectTrackingParams(l);var u="event37";if(vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(u+=",event165",l.product=vui._.aStr(o.contentId)+";;;",l.evars=l.evars||{},l.evars.contentType=vui._.aStr(o.type),l.evars.contentEligibility="TVOD"),vui.analytics.trackEvent(u,l),t.forFreePreview&&vui.analytics.trackEvent("event6",{product:o.contentId[0]}),t.variant.dimension&&"threeD"==t.variant.dimension[0]){var d=vui.getPlayer().check3DSupport();if(1!=d.status)return void this.showSimpleDialog(d.message);if(vui.is2013X12AndOldFirmware())return vui.analytics.showDialog(window.APPNAME+":Transaction 3d Not Supported Dialog, Old Firmware"),void this.showSimpleDialog(vui.getUpgradeFirmwareMessage())}function c(){var e=r.contentVariantId[0];controller.goToPage("Theater",{data:{type:"movie",variantId:e,data:o,variant:r,forFreePreview:t.forFreePreview,offers:t.offers,validOffers:t.validOffers},resetBookmark:s,isUserActive:n,isBingeWatch:a},i)}vui.getModel().parentalControls.isRestricted("play",window.getFriendlyRating(o.contentRating[0]))?(vui.analytics.showDialog(window.APPNAME+":Transaction ParentalControls Dialog"),h={authType:"family_setting",promptText:vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED"),callback:function(e){"correct"==e?c():void 0===controller.baseLayer.currentTemplate&&(controller.baseLayer.popHistory(),controller.goToPage("NewMovieDetails",{contentId:o.contentId})),alert("HIDING BECAUSE RESTRICTED"),controller.hidePopup()}},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?h.authType="kids_mode_pc":h.promptText2=vui.strings.getText("SETTINGS_PIN_GRACE_PERIOD"),vui.passcodePrompt(h)):c()}var h},onClickOfferDone:function(v){var m=v.offer,e=function(e,t,i){var s=e.purchaseStatus,n={};if("ok"==s){var a,o="purchase,event15",r=m.contentId+";1;"+m.price;i&&(0<(a=(parseFloat(i.serviceCreditAmount&&i.serviceCreditAmount[0])||0)+(parseFloat(i.realMoneyAmount&&i.realMoneyAmount[0])||0)+(parseFloat(i.giftCardAmount&&i.giftCardAmount[0])||0))?(o+=",event14",r=r+";event15="+(a=Math.floor(100*a)/100)):r+=";event15=0");var l="",u="";if(t&&(t.state&&(l=vui._.aStr(t.state)),t.expirationTime&&(u=getMMDDYYYYDateString(vui._.aStr(t.expirationTime)))),vui.m.userSessionStore.getFromStore("zap-api-element-id")&&(n=vui._.getZapApiEvarsFromSessionStore()),e.purchaseId&&(n.purchaseId=vui._.aStr(e.purchaseId)),vui.analytics.trackEvent(o,{product:r,evars:n}),alert("Successful purchase. Getting movie info again"),v.callback&&!v.fromPromo&&!v.rtoParams)return void v.callback("success");alert("WE DONT HAVE A purchase CALLBACK");var d={movie:v.movie,variant:v.variant,offer:v.offer},c=function(){alert("PLAY CALLBACK!"),controller.hidePopup(),this.onClickPlay(d,v.fromPromo)}.bind(this),h={};v.rtoParams?(h={title:v.rtoParams.title,text:v.rtoParams.text,data:v.rtoParams.data,buttons:v.rtoParams.buttons,callback:v.rtoParams.callback,quality:v.rtoParams.quality},controller.showPopup("ChoicesGenericDialog",h)):(h={movie:v.movie,variant:v.variant,purchasePlan:i,dmaStatus:l,dmaExpirationDate:u,offer:v.offer,playCallback:c,cancelCallback:function(){alert("CANCEL CALLBACK!"),controller.hidePopup(),v.successCallback&&v.successCallback()}},controller.showPopup("TransactionSuccessDialog",h))}else vui.analytics.showDialog(window.APPNAME+":Transaction Purchase Failure Dialog"),this.handlePurchaseStatus(s,function(){v.callback&&v.callback("cancel")},v)}.bind(this);m&&m.preOrderStartTime&&m.preOrderStartTime[0]&&m.preOrderStopTime&&parseDate(m.preOrderStopTime[0]).getTime()>=VUDU.vuduTime()?vui.Model.doPreOrder(m,e):vui.Model.doPurchase(m,e,{expectedPurchasePlan:[v.purchasePlan]})},getVariantByOwnership:function(e){var t=e.ownerships,i=0,s=null,n=VUDU.vuduTime(),a={};for(var o in t){var r=t[o],l=r.variant;if(r.isRented)if(parseDate(r.ends).getTime()<n)continue;l&&(s=s||l,a[r.videoQuality]||(a[r.videoQuality]=l,i+=1))}return 1<i&&(s=a.uhd||a.hdx||a.hd||a.sd),0===i&&t&&(s=vui.getModel().getAvailableOwnedVariant(e)),s&&"uhd"==s.videoQuality&&!vui.gConnectionInstance.getIsUHDSupported()&&(s=vui.getModel().getAvailableOwnedVariant(e)),s},posterOnAction:function(e){e&&e.contentId&&("bonus"==e.type?vui.playBonusContent(e.contentId,e):(vui._.setAriaLabel(""),controller.goToPage("NewMovieDetails",{contentId:e.contentId})))}}),vui.getOpenPitchLayout=function(){var e=vui.getModel().vuduDifferenceUrl,t="http://www.";return-1!==e.indexOf(t)?e=e.substring(t.length):-1!==e.indexOf("http://")&&(e=e.substring("http://".length)),'<img src = "'+vui.images.opTop+'" style="width : 960px;height : 120px;"><div style = "position : absolute;top : 420px;"> <img src = "'+vui.images.opBot+'" style="width : 960px;height : 120px;" > </div><div style = "top : 36px;position : absolute;width : inherit;">    <img class = "centeredImage" src = "'+VUDU_CDN_SERVER+'images/vudu_hd_movies_logo.png" style="width : 292px;height : 64px;"></div><div style = "top : 118px;position : absolute;width : inherit;">    <div class = "fontHeading" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_NEW_RELEASES_TITLE")+'</div>    <div class = "fontHeading" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_GREAT_VALUE_TITLE")+'</div>    <div class = "fontHeading" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_MOST_HD_TITLE")+' </div></div><div style = "top : 156px;position : absolute;width : inherit;">     <img style="position : absolute;left:46px;width : 108px;height : 154px;" src="'+vui.images.nrPoster+'">     <img id="OPnr" style="position : absolute;left:166px;width : 108px;height : 153px;">     <img style="position : absolute;left:366px;width : 108px;height : 154px;" src="'+vui.images.gvPoster+'" >     <img id="OPgv" style="position : absolute;left:486px;width : 108px;height : 153px;">     <img style="position : absolute;left:686px;width : 108px;height : 154px;" src="'+vui.images.hdPoster+'" >     <img id="OPtq" style="position : absolute;left:806px;width : 108px;height : 153px;"></div><div style = "position : absolute; top : 318px; width : inherit;">    <div class = "fontSmall" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_NEW_RELEASES_SUBTITLE_1")+"<br/>"+vui.strings.getText("OPENING_PITCH_NEW_RELEASES_SUBTITLE_2")+' </div>    <div class = "fontSmall" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_GREAT_VALUE_SUBTITLE_1")+"<br/>"+vui.strings.getText("OPENING_PITCH_GREAT_VALUE_SUBTITLE_2")+'</div>    <div class = "fontSmall" style = "text-align : center;width : 33%;float : left;"> '+vui.strings.getText("OPENING_PITCH_MOST_HD_SUBTITLE_1")+"<br/>"+vui.strings.getText("OPENING_PITCH_MOST_HD_SUBTITLE_2")+' </div></div><div id="opBottomText" class = "fontHeading" style= "position:absolute;top:380px;color:#f0a024;text-align:center;width : inherit; height : 30;"> '+vui.strings.getText("OPENING_PITCH_YOUR_FIRST_RENTAL_IS_FREE")+' </div><div class="font16" style = "width:500px;height:24px;top:508px;left:20px;position:absolute;"> '+vui.strings.getText("OPENING_PITCH_WELCOME_DISCLAIMER",e)+"</div>"},vui.pages.uxOpeningPitch=new Class({Extends:vui.NewPage,name:"vui.pages.uxOpeningPitch",elemClassName:"uxOpeningPitch",init:function(e){e=e||{};var t=new vui.widgets.LogoBar;this.elem.appendChild(t.elem),e.url?(createImg({src:vui._.aStr(e.url),className:"uxOpeningPitchBgImg"},this.elem),this.lowerContainer=new vui.widgets.uxLowerContainer,this.attachChild(this.lowerContainer),e.accessibilityText&&setTimeout(function(){vui._.setAriaLabel(e.accessibilityText+", get started")},0)):controller.goToPage("OpeningPitch_AccountActivationPromo")},onBack:function(){controller.exitApp()}}),vui.widgets.uxLowerContainer=new Class({Extends:vui.widgets.Container,name:"vui.widges.uxLowerContainer",elemClassName:"uxLowerContainer",layout:{type:"horizontal"},init:function(){var e=this._omTrackButtonClick.bind(this);this.signUpButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_GET_STARTED_BUTTON"),size:4,elemClassName:"uxOpButton_signup imageActionButton",onAction:function(){e("OPENING_PITCH_GET_STARTED_BUTTON");vui.ActivationController.beginActivation(function(e){"success"===e&&controller.goHome()},"welcome")}}),this.attachChild(this.signUpButton),this.logInButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_LOGIN_BUTTON"),size:4,elemClassName:"uxOpButton_login imageActionButton",onAction:function(){e("OPENING_PITCH_LOGIN_BUTTON");vui.ActivationController.beginActivation(function(e){"quit"!==e&&controller.goHome()},"welcome",!0)}}),this.attachChild(this.logInButton),this.browseButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_BROWSE_BUTTON"),size:4,elemClassName:"uxOpButton_browse imageActionButton",onAction:function(){controller.goHome(),e("OPENING_PITCH_BROWSE_BUTTON")}}),this.attachChild(this.browseButton)},_omTrackButtonClick:function(e){var t={linkType:"lnk_o"};t.linkName=vui.strings.getText(e).toLowerCase()+" button||opening pitch",vui.analytics.trackEvent("",t)}}),vui.pages.OpeningPitch=new Class({Extends:vui.NewPage,name:"vui.pages.OpeningPitch",layout:{type:"horizontal"},init:function(e){this.elem.style.backgroundImage="url("+vui.images.background+")",this.elem.style.backgroundColor="black",this.elem.innerHTML=vui.getOpenPitchLayout();var n=vui.getModel(),t=[{_type:"contentSearch",responseSubset:"micro",listType:"newTitles",hasFeaturedStudio:"true",type:["program","episode"],sortBy:"-watchedScore"},{_type:"contentSearch",responseSubset:"micro",tag:"2for2",sortBy:"-watchedScore"},{_type:"contentSearch",responseSubset:"micro",videoQuality:"hdx",hasFeaturedStudio:"true",type:["program","episode"],sortBy:"-watchedScore"}],i=["nr","gv","tq"],a={},o=0;mycb=function(e){if(e.data){var t=e.name;a[t]||(a[t]=[]);for(var i,s=0;s<2;s++)e.data[s+""]&&e.data[s+""].contentId&&(a[t][s]=e.data[s+""],o++);6===o&&(document.getElementById("OPnr").src=n.getPosterUrl(a.nr[0],window.vui.ResDef_hd.PosterGrid.POSTER_WIDTH),document.getElementById("OPgv").src=n.getPosterUrl(a.gv[0],window.vui.ResDef_hd.PosterGrid.POSTER_WIDTH),i=0,a.tq[0].contentId[0]==a.nr[0].contentId[0]&&(i=1),document.getElementById("OPtq").src=n.getPosterUrl(a.tq[i],window.vui.ResDef_hd.PosterGrid.POSTER_WIDTH))}};for(var s=[],r=0;r<t.length;r++){var l={searchParams:t[r],name:i[r],callback:mycb},u=n.getMovieList(l);s.push(u)}this.queries=s;function d(e){return"<table height='40' width='100%'><tr><td valign='middle' align='center' style='position: relative' class='headerText'>"+e+"</td></tr></table>"}var c=vui.promo.getAmount(),h=vui.strings.getText("OPENING_PITCH_SIGN_UP_BUTTON_BREAK");$defined(c)&&"0"!=c&&(c=window.getPriceStr(c),h="<span class='fontSmallBold'>"+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_1")+"</span> "+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_2",c)+"<br /><span class='fontSmallBold'>"+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_3")+"</span>");var v={label:d(h),centered:!0,width:130,height:71,onAction:function(){vui.ActivationController.beginActivation(function(e){"quit"!=e&&controller.goHome()})}},m=new vui.widgets.BlueGrayButton("button0",v),g=m.getElem();g.style.left="336px",g.style.top="456px",this.attachChild(m);var _={label:d(vui.strings.getText("OPENING_PITCH_EXPLORE_VUDU")),centered:!0,width:130,height:71,onAction:function(){controller.goHome()}},p=new vui.widgets.BlueGrayButton("button0",_),T=p.getElem();T.style.left="496px",T.style.top="456px",this.attachChild(p)},show:function(){var e=vui.promo.getAmount(),t=document.getElementById("opBottomText"),i="0"==e?vui.strings.getText("OPENING_PITCH_WELCOME_TITLE_NO_OFFER")+"<br/>"+vui.strings.getText("OPENING_PITCH_WELCOME_SUBTITLE"):vui.strings.getText("OPENING_PITCH_WELCOME_TITLE_OFFER",window.getPriceStr(e))+"<br/>"+vui.strings.getText("OPENING_PITCH_WELCOME_SUBTITLE");t.innerHTML=i},hide:function(){for(var e=0;e<this.queries.length;e++)this.queries[e].destroy()}}),vui.widgets.AVSettingsDialog=new Class({Extends:vui.widgets.Container,name:"vui.widgets.AVSettingsDialog",init:function(){var e=this.elem;e.style.position="absolute",e.id="avSettingsDialog",e.style.left="0",e.style.top="0",e.style.width="960px",e.style.height="540px",e.style.display="none";var t=document.createElement("div");t.className="opacity80",t.style.position="absolute",t.style.left="190px",t.style.top="90px",t.style.width="580px",t.style.height="360px",this.elem.appendChild(t);var i=document.createElement("div");i.className="opacity80",i.style.position="absolute",i.style.left="200px",i.style.top="100px",i.style.width="560px",i.style.height="340px",this.elem.appendChild(i);var s=document.createElement("div");s.style.position="absolute",s.className="headerText",s.style.left="360px",s.style.top="150px",s.style.width="560px",s.style.height="30px",s.appendChild(document.createTextNode(vui.strings.getText("AV_SETTINGS_DIALOG_TITLE"))),this.elem.appendChild(s);this.buttons=[];var n=function(){alert("VUDU: Show Video Setup"),vui.executeOnContainer(this,"hideAVSettings"),vui.executeOnContainer(this,"avSettingCalled")}.bind(this),a={label:vui.strings.getText("AV_SETTINGS_DIALOG_VIDEO_BUTTON"),width:200,onAction:n},o=new vui.widgets.Button("videoButton",a);o.elem.style.left="380px",o.elem.style.top="200px",this.buttons.push(o),this.attachChild(o);n=function(){alert("VUDU: Show Audio Setup"),vui.executeOnContainer(this,"hideAVSettings"),vui.executeOnContainer(this,"audioSettingCalled"),vui.executeOnContainer(this,"avSettingCalled")}.bind(this),a={label:vui.strings.getText("AV_SETTINGS_DIALOG_AUDIO_BUTTON"),width:200,onAction:n};(o=new vui.widgets.Button("audioButton",a)).elem.style.left="380px",o.elem.style.top="250px",this.buttons.push(o),this.attachChild(o)},show:function(){this.parent(),this.selectable=!0;for(var e=0;e<this.buttons.length;e++)this.buttons[e].enable()},hide:function(){this.parent(),this.selectable=!1;for(var e=0;e<this.buttons.length;e++)this.buttons[e].disable()}}),vui.widgets.CCClearPlayNotice=new Class({Extends:vui.widgets.Container,name:"vui.widgets.CCClearPlayNotice",elemClassName:"CCClearPlayNotice",selectable:!1,init:function(){this.elem.innerHTML=vui.strings.getText("FP_THEATER_WITH_CLOSED_CAPTION")},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},getIsShown:function(){return"none"!==this.elem.style.display}}),vui.widgets.ClearPlayEnableNotice=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ClearPlayEnableNotice",elemClassName:"clearPlayEnableNotice",layout:{type:"horizontal"},init:function(e){e=e||{},this.tts=[],this.params=e,this.header=createDiv({className:"cp_header"},this.elem);var t=document.createElement("img");e.titleIcon?(t.src=e.titleIcon,t.className="clearPlayEnableNoticeTitleIcon"):t.src=vui.images.clearplay_icon,e.border&&(this.elem.style.border=e.border),this.header.appendChild(t);var i=createDiv({text:e.title,position:"relative",style:{display:"inline-block",marginLeft:"10px",top:"-7px"}},this.elem);this.header.appendChild(i),this.tts.push(e.title),this.body1=createDiv({position:"relative",className:"cp_text1",text:e.text1},this.elem),e.text1ClassName&&(this.body1.className+=" "+e.text1ClassName),this.tts.push(e.text1),e.text2&&(this.body2=createDiv({position:"relative",className:"cp_text2",text:e.text2},this.elem),e.text2ClassName&&(this.body2.className+=" "+e.text2ClassName),this.elem.style.height="300px",this.tts.push(e.text2));for(var s=createDiv({className:"cp_button_container"},this.elem),n=0;n<e.buttons.length;n++){var a=e.buttons[n],o={label:a.label,iconSrc:vui.images[a.icon],action:a.action};a.selectButtonClass&&(o.selectButtonClass=a.selectButtonClass),a.defaultButtonClass&&(o.defaultButtonClass=a.defaultButtonClass),a.size&&(o.size=a.size);var r=new vui.widgets.ChoicesGenericButton(o);1<e.buttons.length?r.elem.style.marginLeft="10px":r.elem.style.margin="0 auto",this.attachChild(r,s),e.focus&&e.focus.toLowerCase()===a.label.toLowerCase()&&(vui.select(r),this.tts.push(r.label.innerHTML))}e.onBack&&(this.onBack=e.onBack),this.tts=this.tts.join(",").replace(/<br\/>/g," ")},show:function(){this.elem.style.display="block",vui._.setAriaLabel(this.tts)},onButtonAction:function(e){this.params.callback&&this.params.callback(e),this.hide(!0),this.selectable=!1},onDirectionUp:function(){},onDirectionDown:function(){},hide:function(e){this.parent(),e||vui.select(this.parentWidget)}}),vui.Bookmark=new Class({bookmarkState:{SYNCED:1,DIRTY:2,FLUSHING:3},initialize:function(e){this._contentId=assert(e.contentId,"missing contentId in initialize"),this._timeSeconds=assert(parseInt(e.timeSeconds,10),"missing timeSeconds in initialize"),this._state=this.bookmarkState.SYNCED,this.setAutoFlushInterval(vui.bookmarkFlushInterval||10)},setAutoFlushInterval:function(e){this.AUTO_FLUSH_INTERVAL=e&&0<e?1e3*e:1e4,alert("bookmark auto flush interval is now "+this.AUTO_FLUSH_INTERVAL+"ms")},_startFlushTimer:function(){alert("bookmark:_startFlushTimer()"),this._stopFlushTimer(),this._flushTimer=setTimeout(function(){alert("bookmark flush timer fired"),this.flush()}.bind(this),this.AUTO_FLUSH_INTERVAL)},_stopFlushTimer:function(){alert("bookmark:_stopFlushTimer()"),this._flushTimer&&clearTimeout(this._flushTimer)},_setState:function(e){this._state!==e&&(e===this.bookmarkState.DIRTY?this._startFlushTimer():this._stopFlushTimer(),this._state=e)},getTimeSeconds:function(){return this._timeSeconds},update:function(e,t){assert(e,"missing timeSeconds in update"),e=Math.floor(e),this._timeSeconds!==e&&(this._state!==this.bookmarkState.FLUSHING&&this._setState(this.bookmarkState.DIRTY),this._timeSeconds=e,t&&(this._resetBookmark=t))},flush:function(e,t){alert("bookmark:flush()");function n(){e&&e()}if(this._state!==this.bookmarkState.DIRTY)return setTimeout(n,1),!1;var i=vui.getModel().userId;if(!i)return alert("user is not activated; cannot save bookmark"),!1;vui.getModel().bookmarkCache&&vui.getModel().bookmarkCache.add(this._contentId,parseInt(this._timeSeconds,10),null,this._resetBookmark);var s={_type:"bookmarkStore",contentId:this._contentId,timeSeconds:this._timeSeconds,userId:i};t&&(s.doneWatching="true");var a=function(e,t,i){var s;this._flushQueryId===e&&delete this._flushQueryId,i&&"bookmark"===i._type?(s=parseInt(i.timeSeconds,10)===this._timeSeconds?this.bookmarkState.SYNCED:this.bookmarkState.DIRTY,alert("flushed bookmark, setting state to: "+s),this._setState(s)):alert("failed to flush bookmark; result = "+JSON.encode(i),"warning"),n()}.bind(this);this._setState(this.bookmarkState.FLUSHING),alert("execute store query "+JSON.encode(s));var o=vui.getModel().doQuery(s,a);return this._flushQueryId=o},remove:function(s){alert("bookmark:remove()");var e=vui.getModel().userId;if(!e)return alert("user is not activated; cannot save bookmark"),!1;var t={_type:"bookmarkRemove",contentId:this._contentId,userId:e},i=function(e,t,i){this._flushQueryId===e&&delete this._flushQueryId,i&&"success"==i._type?(alert("removed bookmark, setting state to 1"),this._setState(this.bookmarkState.SYNCED)):alert("failed to remove bookmark; result = "+JSON.encode(i),"warning"),s&&s()}.bind(this);this._setState(this.bookmarkState.FLUSHING),alert("execute remove query: "+JSON.encode(t));var n=vui.getModel().doQuery(t,i);return this._flushQueryId=n}}),vui.Bookmark._getOldBookmark=function(i,s){vui.getModel().bookmarks.getBookmark(i,function(e){var t=Math.floor(e/1e3);s(new vui.Bookmark({contentId:i,timeSeconds:t}))})},vui.Bookmark.get=function(n,a){assert(n,"missing contentId in get"),assert(a,"missing callback in get"),alert("bookmark.get("+n+")");function o(){alert("creating bookmark at time 0"),a(new vui.Bookmark({contentId:n,timeSeconds:0}))}var e=vui.getModel().userId;if(!e)return alert("user is not activated; does not have any bookmarks"),void setTimeout(o,1);var t={_type:"bookmarkSearch",contentId:n,userId:e};return alert("executing search query "+JSON.encode(t)),vui.getModel().doQuery(t,function(e,t,i){var s;alert("bookmark.get:GOT BOOKMARK:"+JSON.encode(i)),i&&"bookmarkList"==i._type&&i.bookmark?(s=i.bookmark[0],alert("got bookmark: "+JSON.encode(s)),s&&"bookmark"==s._type?a(new vui.Bookmark(s)):vui.Bookmark._getOldBookmark(n,a)):(alert("failed to fetch bookmark! result = "+JSON.encode(i),"warning"),o())})},vui.widgets.BaseTheaterLayer=new Class({Extends:vui.widgets.Container,name:"vui.widgets.BaseTheaterLayer",elemClassName:"baseTheaterLayer",init:function(){this.elem.style.width=window.vui.ResDef.SCREEN_WIDTH+"px",this.elem.style.height=window.vui.ResDef.SCREEN_HEIGHT+"px",this.elem.style.backgroundColor="transparent"},onAction:function(){vui.executeOnContainer(this.parentWidget,"onAction")},onMouseWheel:function(e){vui.executeOnContainer(this.parentWidget,"onMouseWheel"),0<e.wheel?vui.executeOnContainer(this.parentWidget,"trickplayLeft"):vui.executeOnContainer(this.parentWidget,"trickplayRight")}}),vui.pages.Theater=new Class({Extends:vui.NewPage,name:"vui.pages.Theater",Implements:vui.ContentActions,initialize:function(){this.parent(),this.subtitlesEnabled=!1,this.trickplayIncrement=1,this.MAX_UNDERRUNS_BEFORE_FALLBACK=3,this.OSD_NONE=0,this.OSD_CONTROLS=1,this.OSD_SELECTOR_THUMB=2,this.OSD_THUMB0=4,this.OSD_THUMB2=8,this.OSD_BUFFERING=16,this.OSD_FS_BUFFERING=32,this.OSD_HEADER=64,this.OSD_CHAPTERS=128,this.OSD_QUALITY_DIALOG=256,this.OSD_SETTINGS=512,this.CHUNK_INTERVAL=3,this.TRICKPAY_RATE=200,this.lastDirLeftRight=0,this.SEEK_RATE=250,this.underrunCount=0,window.showChapters=!0,this.pauseToggleOn=!1,this.previousSubtitle="off",this.AudioPlugin=document.getElementById("pluginAudio"),this.showClearplay=!1,this.cpNoticeParams={title:vui.strings.getText("FP_THEATER_NOTICE_TITLE"),text1:vui.strings.getText("FP_THEATER_NOTICE_DESC"),focus:"OK",buttons:[{label:vui.strings.getText("FP_THEATER_NOTICE_OK"),action:"continue",size:"2"}],parent:this.elem},"chromecast"===vui.vvPlatform.clientType&&arguments&&arguments[0].data&&!arguments[0].data.dontFakeCastLoad&&ancinus.mediautil.load(arguments[0].data),controller.addActivityListener(function(e){this.onActivity(e)}.bind(this))},init:function(e){void 0!==e&&alert("Error: params should be undefined."),this.parent(),this.subtitle=new vui.widgets.SubTitle,this.attachChild(this.subtitle),this.baseLayer=new vui.widgets.BaseTheaterLayer,this.attachChild(this.baseLayer),this.elem.style.backgroundColor="transparent",this.elem.id="theaterPage";var t=createDiv({width:window.vui.ResDef.SCREEN_WIDTH,height:window.vui.ResDef.SCREEN_HEIGHT,className:"opacity80"});t.id="allBg",t.style.backgroundColor="black",t.style.display="none",this.allBg=t,this.baseLayer.elem.appendChild(t),this.msgDurationMilliSec=3e3;var i=new vui.widgets.NewTheaterHeader;i.elem.style.left="0",i.elem.style.top="0",this.baseLayer.attachChild(i),this.th=i,vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&this.th.updateKidsModeHeader();var s=new vui.widgets.Chapters;this.chapters=s,this.baseLayer.attachChild(this.chapters),this.chapters.elem.style.left=window.vui.ResDef.Theater.CHAPTER_L+"px",this.chapters.elem.style.top=window.vui.ResDef.Theater.CHAPTER_T+"px";var n=createDiv({top:window.vui.ResDef.Theater.STRIPBG_T,left:0,width:window.vui.ResDef.Theater.STRIPBG_W,height:window.vui.ResDef.Theater.STRIPBG_H,className:"opacity60"});n.id="stripBg",n.style.backgroundColor="black",n.style.display="none",this.stripBg=n,this.baseLayer.elem.appendChild(n);var a=document.createElement("img");a.style.position="absolute",a.id="thumb0",a.style.top=window.vui.ResDef.Theater.THUMB_T+"px",a.style.left=window.vui.ResDef.Theater.THUMB0_L+"px",a.style.width=window.vui.ResDef.Theater.THUMB_W+"px",a.style.height=window.vui.ResDef.Theater.THUMB_H+"px",a.style.backgroundColor="black",a.width=window.vui.ResDef.Theater.THUMB_W,a.height=window.vui.ResDef.Theater.THUMB_H,a.border=0,this.thumb0=a,this.baseLayer.elem.appendChild(a);var o=document.createElement("img");o.style.position="absolute",o.id="thumb2",o.style.top=window.vui.ResDef.Theater.THUMB_T+"px",o.style.left=window.vui.ResDef.Theater.THUMB2_L+"px",o.style.width=window.vui.ResDef.Theater.THUMB_W+"px",o.style.height=window.vui.ResDef.Theater.THUMB_H+"px",o.style.backgroundColor="black",o.width=window.vui.ResDef.Theater.THUMB_W,o.height=window.vui.ResDef.Theater.THUMB_H,o.border=0,this.thumb2=o,this.baseLayer.elem.appendChild(o),this.thumb3=document.createElement("img"),this.thumb4=document.createElement("img");var r,l=new vui.widgets.ThumbnailFocus;this.focus=l,this.focusImg=l.img,this.baseLayer.attachChild(l),l.onAction=function(){this.osdState&this.OSD_SELECTOR_THUMB&&(this.updateFfRwMode(0),this.seekToCurChunk())}.bind(this),"chromecast"!=vui.vvPlatform.clientType&&(this.adInfo=new vui.widgets.AdInfo,this.adInfo.elem.style.visibility="visible",this.baseLayer.attachChild(this.adInfo)),r=vui.vvPlatform.baseApp?new vui.widgets.RemoteTheaterControls(this.baseLayer):vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?new vui.widgets.KidsModeTheaterControls(this.baseLayer):new vui.widgets.TheaterControls(this.baseLayer),this.tc=r,this.tc.elem.style.display="block",this.tc.elem.style.left=window.vui.ResDef.Theater.TC_L+"px",this.tc.elem.style.top=window.vui.ResDef.Theater.TC_T+"px",this.baseLayer.attachChild(r);var u,d,c=new vui.widgets.Buffering(this.posterUrl);this.buffering=c,this.attachChild(c),this.debugInfoLabel=createDiv({className:"playerDebugInfo"}),this.debugInfoLabel.style.display="none",this.baseLayer.elem.appendChild(this.debugInfoLabel),"chromecast"===vui.vvPlatform.clientType&&vui.account.hasLevel2DebugLabel()&&!window.VUDU_APP_ARGS.doCAF&&(u=createDiv({className:"chromecastReceiverDebugInfo"}),this.baseLayer.elem.appendChild(u),d=cast.receiver.CastReceiverManager.getInstance().getApplicationData(),u.innerHTML="Chromecast App ID: "+d.id+", Name: "+d.name)},onActivity:function(){var e=vui.getPlayer();this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):1!=this.showingTopBar()&&1!=this.showingAVDialog()||this.osdState&this.OSD_CHAPTERS||this.osdState&this.OSD_THUMB0||this.osdState&this.OSD_THUMB2||this.setHideItLater()},audioSettingCalled:function(){this.audioSettingsActive=!0},avSettingCalled:function(){this.avSettingsActive=!0;setTimeout(function(){var e=vui.getPlayer();e.ignore3D=!0,e.unset3DMode()},500)},purchaseFromPreview:function(e){var t,s=this.params.data.data,n=this.params.data.variant,i=this.params.data.offers,a=this.params.data.validOffers,o=null,r=null;for(var l in a){"Rental"==l?(t=i[l],getPartialString(t)[1]&&(alert("Rental offer found"),$extend(o={},i[l]))):(t=i[l],getPartialString(t)[1]&&(alert("Purchase offer found"),$extend(r={},i[l])))}if(null==o&&null==r)return alert("no valid offer found"),void controller.goBack();alert("theater.purchaseFromPreview()");var u=function(t){var e=function(e){alert("GOT A PURCHASE CALLBACK: "+e),"back"==e||"cancel"==e?(alert("Hide purchase from preview dialog"),controller.hidePopup(),alert("Exit theater since user didn't want to buy the movie after previewing it"),controller.goBack()):"activate"==e?vui.ActivationController.beginActivation(function(){u(t)}):"error"==e?u(t):"success"==e&&(alert("SUCCES!!"+t),delete this.params.data.forFreePreview,this.updateBookmark(t),alert("Hide purchase from preview dialog"),controller.hidePopup(),alert("Play movie now that we purchased it."),this.checkQuality(this.callPlay.bind(this)))}.bind(this),i={movie:s,movieInfo:this.movieInfoModel,offerRental:o,offerPurchase:r,variant:n,startTime:t,callback:e};this.doPurchaseFromPreview(i)}.bind(this);(e=vui.getPlayer().currentTime)<=0?(alert("Player returned time 0, seek to end of preview on purchase playback"),e=1e3*this.data.variant.freePreviewStopSeconds[0]):alert("Will resume playback at "+e+"ms after purchase from preview"),u(e)},seekToCurChunk:function(e,t){var i=vui.getPlayer();if(e?(this.replay=!0,this.buffering.resetSpinnerPosition()):t?this.buffering.moveSpinner():this.buffering.resetSpinnerPosition(),vui._.setAriaLabel(this.buffering.ms.innerHTML||"loading"),this.params.data.forFreePreview&&(currTime=i.timestamps[this.currentChunk],currTime>1e3*this.params.data.variant.freePreviewStopSeconds)){alert("seekToCurChunk: 2min preview end reached");var s=i.currentTime;return this.doStop(),this.purchaseFromPreview(s),!0}if(this.pauseToggleOn=!1,vui.gConnectionInstance.isClearplayEnabled()&&"true"===vui._.aStr(this.params.data.data.hasClearplay)&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()){currTime=i.timestamps[this.currentChunk]/1e3;var n=i.html5Player.clearPlayControl.getCurrentSkipStop(currTime);if(0<n)return i.seekToClearplaySkip(n),!1}return i.seekToChunk(this.currentChunk),!1},getThumb:function(e){var t=vui.getPlayer(),i="",s=t.data.location?t.data.location[0]:t.data;return s.thumbnailsUriSuffix&&(i=s.thumbnailsUriSuffix),s.thumbnailsBaseUri+"/"+e+".jpg"+i},clampTime:function(e,t){return t?(e<0&&(e=0),t<=100*e/94&&(e=0)):alert("WARNING: someone passed totalTime 0 to bookmarks.clamp()! returning non-clamped time."),e},updateBookmark:function(e,t){var i,s;this.bookmark&&this.bookmarkKey&&(this.params.data.forFreePreview?alert("do not save bookmarks on free previews"):(i=vui.getPlayer(),s=e,t||(s=this.clampTime(e,i.totalTime)),null!=s?(this.bookmark.update(s/1e3,this.resetBookmark),this.bookmarkCache&&(this.bookmarkCache.isLast30DayDirty=!0)):alert("Dropping bookmark request at timestamp 0")))},flushBookmark:function(e){this.bookmark&&this.bookmark.flush(null,e)},removeBookmark:function(e){this.bookmark&&(this.bookmark.remove(e),delete this.bookmark)},hideAVSettings:function(){var e=this.osdState;e&=~this.OSD_SETTINGS,this.updateOsd(e)},updateOsd:function(e,t){if(this.osdState!=e){this.osdState=e;var i,s=vui.getPlayer();if(alert("UPDATING OSD STATE TO:"+e),e==this.OSD_NONE?this.baseLayer.elem.style.visibility="hidden":this.baseLayer.elem.style.visibility="visible",e&this.OSD_HEADER?this.th.show():this.th.hide(),e&this.OSD_CONTROLS?(window.VUDU_APP_ARGS.doCAF||this.tc.show(),this.tc.selectable=!0,this.tc.buttons.selectable=!0,this.cancelHideItLater()):(this.tc.hide(),this.tc.selectable=!1,this.tc.buttons.selectable=!1,this.inTCHideButtingTime=!0,setTimeout(function(){this.inTCHideButtingTime=!1}.bind(this),1e3)),this.qd&&(e&this.OSD_QUALITY_DIALOG?(this.qd.show(),t||this.baseLayer.changeSelection(this.qd)):this.qd.hide()),this.allBg.style.display="none",e&this.OSD_SELECTOR_THUMB?(this.allBg.style.display="block",this.focus.elem.style.display="block",this.focus.selectable=!0,0==this.ffrwMode&&(t||(vui._.setAriaLabel("thumbnail scrolling"),this.baseLayer.changeSelection(this.focus))),window.SUPPORTS_NEW_STYLE_PLAYBACK&&!window.DEVICE_IS_BDP||(alert("player.setDownloadPaused(true)"),s.setDownloadPaused(!0))):(this.focus.elem.style.display="none",this.focus.selectable=!1,window.SUPPORTS_NEW_STYLE_PLAYBACK&&!window.DEVICE_IS_BDP||(alert("player.setDownloadPaused(false)"),s.setDownloadPaused(!1))),this.thumb0.style.display=e&this.OSD_THUMB0?"block":"none",this.thumb2.style.display=e&this.OSD_THUMB2?"block":"none",this.stripBg.style.display=e&this.OSD_THUMB0||e&this.OSD_THUMB2?"block":"none",(e&this.OSD_THUMB0||e&this.OSD_THUMB2)&&(this.allBg.style.display="block"),e&this.OSD_FS_BUFFERING?(((i=this.currentChunk&&this.getThumb(this.currentChunk))||this.loadChapter)&&this.buffering.setDefaultSpinner(),vui.gConnectionInstance.isClearplayEnabled()&&"true"===vui._.aStr(this.params.data.data.hasClearplay)&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()&&(i=null),this.buffering.show(!0,this.loadChapter,i)):e&this.OSD_BUFFERING?(this.contentType&&"advert"!==this.contentType&&this.buffering.setDefaultSpinner(),window.VUDU_APP_ARGS.doCAF||this.buffering.show(!0)):(this.buffering.hide(),this.buffering.setText("")),e&this.OSD_CHAPTERS){this.allBg.style.display="block",alert("SHOW CHAPTERS"),this.ignorePauseNotificationUIChange=!0,s.pause(),this.pauseToggleOn=!0,this.tc.setMode(),this.currentChunk=s.getCurrentChunk(),this.chapters.show(),t||this.baseLayer.changeSelection(this.chapters);for(var n=this.chapters.timestamps.length/this.chapters.numToDisplay,a=0;a<this.chapters.numToDisplay;a++){var o=Math.floor(a*n);if(this.chapters.timestamps[o]>s.timestamps[this.currentChunk])break;currentChapter=a}this.chapters.selectable=!0,alert("SHOW: current chapter = "+currentChapter)}else this.chapters.hide(),this.chapters.selectable=!1}},updateFfRwMode:function(e){var t=!1;return 1==e?this.ffrwMode<3&&(this.ffrwMode++,t=!0):-1==e?-3<this.ffrwMode&&(this.ffrwMode--,t=!0):0!=this.ffrwMode&&(t=!0,this.ffrwMode=0),t&&(alert("NEW FFRW MODE:"+this.ffrwMode),0<this.ffrwMode?(this.tc.setMode("FAST_FORWARD_"+this.ffrwMode),this.setFfRwTimer()):this.ffrwMode<0?(this.tc.setMode("REWIND_"+-this.ffrwMode),this.setFfRwTimer()):(this.tc.setMode(),this.cancelFfRwTimer())),t},updateThumbs:function(e){var t,i=this.OSD_HEADER|this.OSD_CONTROLS|this.OSD_SELECTOR_THUMB;this.focusImg.src=null,this.focusImg.src=this.getThumb(this.currentChunk),0==this.ffrwMode&&(this.thumb0.src=null,0<=this.currentChunk-this.trickplayIncrement?(i|=this.OSD_THUMB0,this.thumb0.src=this.getThumb(this.currentChunk-this.trickplayIncrement)):0<=this.currentChunk-1&&(i|=this.OSD_THUMB0,this.thumb0.src=this.getThumb(this.currentChunk-1)),this.thumb2.src=null,t=vui.getPlayer(),this.currentChunk+this.trickplayIncrement<t.timestamps.length?(i|=this.OSD_THUMB2,this.thumb2.src=this.getThumb(this.currentChunk+this.trickplayIncrement)):this.currentChunk+1<t.timestamps.length&&(i|=this.OSD_THUMB2,this.thumb2.src=this.getThumb(this.currentChunk+1)),this.thumb3.src=null,this.currentChunk+2*this.trickplayIncrement<t.timestamps.length&&(this.thumb3.src=this.getThumb(this.currentChunk+2*this.trickplayIncrement)),this.thumb4.src=null,0<=this.currentChunk-2*this.trickplayIncrement&&(this.thumb4.src=this.getThumb(this.currentChunk-2*this.trickplayIncrement))),this.updateOsd(i,e),window.callCGEvery20Times()},updateThumbsNoUpdate:function(e){this.OSD_CONTROLS,this.OSD_SELECTOR_THUMB;var t=vui.getPlayer();this.focusImg.src=null,this.focusImg.src=e?this.getThumb(this.currentChunk):this.thumb2.src,this.thumb2.src=null,this.ffrwMode<0?0<this.currentChunk-(1<<-this.ffrwMode)*this.CHUNK_INTERVAL?this.thumb2.src=this.getThumb(this.currentChunk-(1<<-this.ffrwMode)*this.CHUNK_INTERVAL):this.thumb2.src=this.getThumb(0):this.currentChunk+(1<<this.ffrwMode)*this.CHUNK_INTERVAL<t.timestamps.length?this.thumb2.src=this.getThumb(this.currentChunk+(1<<this.ffrwMode)*this.CHUNK_INTERVAL):this.thumb2.src=this.getThumb(t.timestamps.length-1),window.callCGEvery20Times()},setFfRwTimer:function(){this.timerId?alert("THEATER TRYING TO SET TIMER WHEN ALREADY SET!"):(alert("THEATER SETTING TIMER"),this.loadFwRwChunk=this.CHUNK_INTERVAL,this.timerNewlySet=!0,this.timerId=setInterval(this.ffRwTimer.bind(this),this.TRICKPAY_RATE))},cancelFfRwTimer:function(){this.timerId?(this.updateCurrentChunk(0,2),alert("THEATER CANCELLING TIMER"),clearInterval(this.timerId),delete this.timerId):alert("THEATER TIMER HAS ALREADY BEEN CANCELED!")},setSubtitles:function(e){var t,i=[];this.loadedSubtitles={};for(var s=0,n=(t=vui._.aStr(e.data.variant.subtitleTrack)?e.data.variant.subtitleTrack:e.data.data.subtitleTrack)&&t.length;s<n;s++){alert("ANG:"+JSON.encode(t[s]));var a=t[s].languageCode[0],o=a.indexOf("-"),r=a;0<o&&(r=r.substring(0,o));var l=t[s].version[0];i.push({language:t[s].name[0],languageShort:r.toUpperCase(),languageCode:a,version:l})}alert("GOT LANGS:"+JSON.encode(i)),this.tc.setAvailableSubtitles(i),this.subtitleLanguages=i,this.moreThanOneLanguage=1<i.length,this.loadedSubtitles.off=!0;for(s=0;s<i.length;s++)this.loadedSubtitles[i[s].languageCode]=!1;this.subtitleCallback=null,"chromecast"!=vui.vvPlatform.clientType&&this.subtitleLanguages&&0<this.subtitleLanguages.length&&("off"!=vui.CCModel.ccSelected?(Array.each(this.subtitleLanguages,function(i,e){i.languageCode===vui.CCModel.ccSelected&&(this.subtitleCallback=function(e,t){this.setCurrentSubtitle(i,e,!0,t)}.bind(this))}.bind(this)),this.subtitleCallback||(this.subtitleCallback=function(e,t){this.setCurrentSubtitle(this.subtitleLanguages[0],e,!0,t)}.bind(this))):this.subtitleCallback=function(e,t){this.setCurrentSubtitle(this.subtitleLanguages[0],e,!0,t)}.bind(this))},callPlayAdvert:function(){var e=this.tc.timelineText;this.tc.elem.removeChild(e.elem),this.elem.appendChild(e.elem);var t=vui.getPlayer();delete t.ignore3D,this.loadChapter=0,this.th.hide(),this.variantQuality="sd",this.contentType="advert",this.tc.setQualityLevels(this.variantQuality,[]),this.tc.setContentType(this.contentType),this.tc.setAdvertsInfo(this.params.data.adNumber,this.params.data.totalAds),vui._.setAriaLabel("loading"),t.play("advert",this.params.data,0,this.subtitleCallback)},checkQuality:function(e){var t=this.params,i=t.data.data.variants,s=t.data.variant&&t.data.variant.editions&&0<t.data.variant.editions.length&&t.data.variant.editions[0].edition;!i||!i.uhd||t.data.variantId!=i.uhd.contentVariantId[0]||0!=vui.gConnectionInstance.getIsUHDSupported()&&s?e():(this.variantQuality="",this.reduceQualityFromUHD(i))},reduceQualityFromUHD:function(e){alert("******** callPlay switcing quality:");for(var t=vui.getModel().qualityArrayNoUHD,i=0;i<t.length;i++)if(e[t[i]])return void this.switchToQuality(t[i])},callPlay:function(e){var s=this.params;if(this.fallbackVariants=[],this.alternateVariants=[],this.showClearplay=vui.gConnectionInstance.isClearplayEnabled()&&"true"===vui._.aStr(s.data.data.hasClearplay)&&("movie"===s.data.type||"adcontent"===s.data.type),this.showClearplay?(this.tc.showClearplay(),vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()?this.cpNoticeTimer=function(){var i=vui.getPlayer().state;return vui.getPlayer().pause(),this.pauseWhenCPNoticeIsOn=!0,setTimeout(function(){this.cpNoticeTimer=null;var e=vui.getPlayer();this.cpNoticeParams.callback=function(){controller.hidePopup(),this.pauseWhenCPNoticeIsOn=!1,i===e.PLAYING&&e.state==e.PAUSED&&vui.getPlayer().resume(),vui.select(this.tc)}.bind(this),this.cpNoticeParams.onBack=this.cpNoticeParams.callback,controller.showPopup("FamilyPlayNotice",this.cpNoticeParams);var t="";this.tc.ccclearplaynotice.getIsShown()&&(t=vui.strings.getText("FP_THEATER_WITH_CLOSED_CAPTION")+", "),t+=this.cpNoticeParams.title+", "+this.cpNoticeParams.text1+", "+this.cpNoticeParams.focus,vui._.setAriaLabel(t)}.bind(this),0)}:vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&this.tc.hideFamilyplayButton&&this.tc.hideFamilyplayButton()):(this.tc&&this.tc.ccclearplaynotice&&(this.tc.ccclearplaynotice.elem.style.visibility="hidden"),vui.select(this.tc)),"advert"!==s.data.type){var t=s.data.data.variants,n=vui.getPlayer();delete n.ignore3D,this.loadChapter=0,1==vui.gConnectionInstance.getSubtitleGroup()&&("trailer"!=s.data.type&&s.data.data.subtitleTrack?this.setSubtitles(s):this.tc&&this.tc.ccclearplaynotice&&(this.tc.ccclearplaynotice.elem.style.visibility="hidden"));var i="",a="";this.posterUrl="",this.smallPosterUrl=this.posterUrl;var o="sd";this.th.removeDolby();var r="unknown";if(s.data.data){var l,u,d,i=s.data.data.title[0];!s.data.data.seasonInfo||(a=(l=s.data.data.seasonInfo).data&&l.data.title&&l.data.title[0]||"")&&s.data.data.episodeNumberInSeason&&(u=s.data.data.episodeNumberInSeason[0]||"",(d=i.split(":"))&&0<d.length&&(i=d.splice(1).join(":")+" : Episode "+u)),this.posterUrl=s.data.data.posterUrl[0]+"-232.jpg",this.smallPosterUrl=s.data.data.posterUrl[0]+"-49.jpg";var c={};if(s.data.data.ownerships&&(c=s.data.data.ownerships),"trailer"!=s.data.type){var h,v=!1,m=!1,g=!1;if("movie"!==s.data.type||(h=vui.m.getBestOffer(s.data.data))&&h[1]&&"free"==h[1]&&(g=!0),t)for(var _=vui.gConnectionInstance.getRemoveHD()?vui.m.qualityArrayNoHD:vui.m.qualityArray,p=0;p<_.length;p++){var T=_[p];if(c[T]&&(v=!0),t[T]&&s.data.variantId)if(s.data.variantId==t[T].contentVariantId[0]){var f,o=T;"uhd"==T&&(f=getBestEdition(getUHDVariant(s.data.data.contentVariants[0].contentVariant)[0].editions[0].edition),!vui.gConnectionInstance.getIsMVPEnabled()||vui.vvPlatform.dolbyVision&&("dvheDtr"===f.videoProfile||"dvheStn"===f.videoProfile)?"ceres"!==vui.vvPlatform.id&&this.th.setDolbyVision():vui.gConnectionInstance.getIsMVPEnabled()&&vui.vvPlatform.hdr10&&"hdr10"===f.videoProfile&&this.th.setHDR10()),t[T].audioCodec&&(r=t[T].audioCodec[0]),m=!0}else if(m&&t[T].dashEditionId&&this.fallbackVariants.push(T),v||"bonus"==this.params.data.type||1==g){if("uhd"==T&&!vui.gConnectionInstance.getIsUHDSupported())continue;this.alternateVariants.push(T)}}alert("FOUND AUDIO CODEC: "+r)}}2<this.alternateVariants.length&&this.alternateVariants.splice(this.alternateVariants.indexOf("hd"),1),2<this.fallbackVariants.length&&this.fallbackVariants.splice(this.fallbackVariants.indexOf("hd"),1),this.th.setTitle(i,a),this.th.setQualityLevel(o),this.th.setAudioCodec(r),this.th.hide(),this.variantQuality=o,this.contentType=s.data.type,this.tc.setQualityLevels(this.variantQuality,this.alternateVariants),this.tc.setContentType(this.contentType),vui._.isFreeContent(s.data)&&this.tc.hideChapters(),vui.gConnectionInstance.isClearplayEnabled()&&"true"===vui._.aStr(s.data.data.hasClearplay)&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()&&(this.thumb0.style.visibility="hidden",this.thumb2.style.visibility="hidden",this.stripBg.style.visibility="hidden",this.focus.elem.style.visibility="hidden");var E,S=s.data.data.contentId[0];this.qd&&(this.baseLayer.detachChild(this.qd),delete this.qd),0<this.fallbackVariants.length&&(this.qd=new vui.widgets.QualityDialog(vui.getModel().getPosterUrl(s.data.data,144)||"",o,this.fallbackVariants),this.qd.selectable=!1,this.baseLayer.attachChild(this.qd)),s.path?(alert("going to play debug"),n.setURL("http://editionId="+s.path+"|COMPONENT=VUDU"),n.playDebug(s.path)):"movie"==s.data.type||"adcontent"==s.data.type?(this.bookmarkKey=s.data.data.contentId[0],E=function(e){var t;this.bookmark=e,this.bookmarkCache=vui.getModel().bookmarkCache,s.data.startTime&&"adcontent"==s.data.type&&(this.updateBookmark(s.data.startTime,!0),this.flushBookmark()),s.resetBookmark?(this.resetBookmark=s.resetBookmark,t=0,delete s.resetBookmark):s.isBingeWatch?(t=0,delete s.isBingeWatch):t=1e3*e.getTimeSeconds(),alert("going to play a movie normally: variantId: "+s.data.variantId+" forFreePreview = "+s.data.forFreePreview),window.showChapters=!0,n.setURL("http://contentVariantId="+s.data.variantId+"|COMPONENT=VUDU"),s.data.forFreePreview&&(t=0),s.data.startTime&&(alert("use startTime from parameter "+s.data.startTime),t=s.data.startTime,s.data.startTime=0);var i="adcontent"==s.data.type?"adcontent":"movie";n.play(i,s.data,t,this.subtitleCallback)}.bind(this),this.bookmark?E(this.bookmark):vui.Bookmark.get(this.bookmarkKey,E)):e&&"bonus"==s.data.type?(window.showChapters=!1,n.play("bonus",s.data,this.qualityBookmark,this.subtitleCallback),this.qualityBoomark=0):"bonus"==s.data.type?(window.showChapters=!1,n.play("bonus",s.data,0,this.subtitleCallback)):(alert("going to play a trailer normally: editionId:"+s.data.editionId),window.showChapters=!1,n.setURL("http://editionId="+s.data.editionId+"|COMPONENT=VUDU"),n.play("trailer",s.data,null,this.subtitleCallback)),e&&("hd"==window.WIDGETRESOLUTION?this.posterUrl=vui.getModel().getPosterUrl({contentId:[S]},338):this.posterUrl=vui.getModel().getPosterUrl({contentId:[S]},"l"),this.buffering.setPosterUrl(this.posterUrl,s.data.data),this.buffering.setDefaultSpinner(),this.buffering.resetSpinnerPosition())}else this.callPlayAdvert()},showErrorPopup:function(e,t){var i=function(){controller.hidePopup(),this.popupHidden=!0,controller.goBack()}.bind(this);vui.vvPlatform.baseApp?controller.showPopup("SimpleTextDialog",{title:e,text:t,callback:i}):controller.showPopup("SimpleTextDialog",{title:e,text:t,buttons:[{label:vui.strings.getText("THEATER_ERROR_POPUP_OK_BUTTON")}],selectDefault:!0,callback:i})},showMessagePopup:function(e,t,i){var s=function(e){controller.hidePopup(),this.popupHidden=!0,e&&e()}.bind(this,i);vui.vvPlatform.baseApp?controller.showPopup("SimpleTextDialog",{title:e,text:t,callback:s}):controller.showPopup("SimpleTextDialog",{title:e,text:t,buttons:[{label:vui.strings.getText("THEATER_ERROR_POPUP_OK_BUTTON")}],callback:s})},shouldPlayNextEpisode:function(){if(vui.vvPlatform.baseApp||vui.m.userId!==window.getCookie("userId"))return!1;if(this.nextEpisode){var e=vui.getPlayer();if(0<e.currentTime&&0<e.totalTime&&.9<e.currentTime/e.totalTime)return alert("Current percentage:"),alert(e.currentTime/e.totalTime),!0}return!1},_popShowNextEpisode:function(){var i,e;!0!==this.isShowingNextEpisodePop&&(this.th.hide(),this.tc.hide(),i=this.nextEpisode,e=function(){try{this.doStop();var e=this.getVariantByOwnership(i),t={movie:i,variant:e};alert("Play next episode ID: "+i.contentId[0]),vui.getModel().avodManager.canDisplayWatchWithAdsButton(i)&&t.movie?vui.getModel().avodManager.play({content:t.movie,addTheaterToHistory:!1}):t.movie&&t.variant?this.onClickPlay(t,!0,!1,this.isUserActive,!0):controller.goBack()}catch(e){alert("click on play next episode error")}}.bind(this),this.isShowingNextEpisodePop=!0,controller.showPopup("NextEpisodeDialogue",{data:i,callback:e,isUserActive:this.isUserActive}))},_getNextEpisodeObject:function(e){this.nextEpisode=null;try{var t=function(e){try{var t,i,s=e.data.ownerships,n=vui.getModel().avodManager.canDisplayWatchWithAdsButton(e.data);(s||n)&&(t=vui.m.isOwnedOrRented(s)||n,i="off"!==vui.SettingsModel.autoPlaySetting,t&&i&&!vui.vvPlatform.baseApp&&(alert("will play next episode"),this.nextEpisode=e.data))}catch(e){alert("Error: _getNextEpisodeObject",e)}}.bind(this),i=vui._.aStr(e.data.data.nextUsefulEpisodeId);vui.m.getMovieInfo(i,t)}catch(e){alert("no next epiid",e)}},show:function(i){vui.getPlayer();this.params=i;var s=null,e=i.data.contentData?i.data.contentData:i.data.data;if(e&&e.contentId?s=e.contentId[0]:i.data.contentId?s=vui._.aStr(i.data.contentId):alert("THERES A PROBLEM... NO CONTENT ID IS SPECIFIED"),"chromecast"!==vui.vvPlatform.clientType||vui.castData&&vui._.aStr(vui.castData.contentId)===s||(vui.castData=vui.CastUtil.createCastData(e)),"advert"===i.data.type)return vui.castData&&(vui.castData.lengthSeconds=i.data.data.lengthSeconds),void this.playAdvert();"adcontent"==i.data.type&&vui.castData&&(vui.castData.lengthSeconds=i.data.variant.lengthSeconds),i.data&&i.data.playlist&&(this.playlist=i.data.playlist,this.params.data.data=this.playlist.getNext()),this.reportingId=s,vui.autoNextEpisodeCounter&&0!==vui.autoNextEpisodeCounter?this.isUserActive=i.isUserActive:this.isUserActive=!1;try{i.data.data&&"episode"==i.data.data.type[0]&&"trailer"!==i.data.type&&this._getNextEpisodeObject(i)}catch(e){}var t=function(e){if(alert("GET MOVIE CALLBACK"),e){if(this.movieInfoModel=e,this.params.data.data={},"adcontent"===i.data.type)$extend(this.params.data.data,e.data),this.params.data.data.ownerships={},i.data.maxQuality&&(this.params.data.data.ownerships[i.data.maxQuality]="true");else if(this.params.data.hasAssignedQuality)this.params.data.data=e.data;else if(this.params.state&&this.params.state.videoQuality){this.params.data.data=e.data;var t=e.data.variants[this.params.state.videoQuality];this.params.data.variant=t,this.params.data.variantId=t.contentVariantId,delete this.params.state}else{if(this.params.data.data=e.data,"trailer"!=this.params.data.type)if(!this.selectVariant(this))return}this.displayTheater(),i.data.firstRenderPlayback?(this.buffering.setAdvertAnimation(),i.data.firstRenderPlayback=null):("hd"==window.WIDGETRESOLUTION?this.posterUrl=vui.getModel().getPosterUrl({contentId:[s]},338):this.posterUrl=vui.getModel().getPosterUrl({contentId:[s]},"l"),this.buffering.setPosterUrl(this.posterUrl,i.data.data),this.buffering.setDefaultSpinner()),this.buffering.show(!0),this.osdState=this.OSD_FS_BUFFERING}else this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_MOVIE_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK"))}.bind(this);this.loadChapter=0,vui.getModel().getMovieInfo(s,t)},playAdvert:function(e){if("advert"!==this.params.data.data._type)throw"theater call playAdvert with invalid adevert object";this.buffering.setAdvertAnimation(),this.buffering.show(!0),this.osdState=this.OSD_FS_BUFFERING,this.displayTheater()},selectVariant:function(e){var t=!1;e.params.playBestVariant&&(t=!0);function i(e){if(e.editions&&e.editions[0].edition){var t=vui.gConnectionInstance.getIsHideUHD()&&isSamsungJazz()?["highP","dvheDtr"]:vui.vvPlatform.videoProfiles;return 0<e.editions[0].edition.filter(function(e){return"dash"===e.editionFormat[0]&&t.contains(e.videoProfile[0])}).length}}for(var s,n=e.params.data.data.variants,a=vui.getModel().qualityArray,o=!1,r=vui.SettingsModel.playbackQualitySetting,l=vui.gConnectionInstance.getIsHideUHD()&&isSamsungJazz(),u=0;u<a.length;u++){var d=n[m=a[u]];if(e.params.data.data.ownerships&&e.params.data.data.ownerships[m]){if("uhd"==m&&!vui.gConnectionInstance.getIsUHDSupported()||"uhd"==m&&l&&!i(d)){o=!0;continue}if(o=!0,!d||!i(d))continue;if(g=g||d,r&&vui.m.qualMap[r]>vui.m.qualMap[m]){s=d;break}if(r==m){s=d;break}}else if(o){if(!d||!i(d))continue;if(r&&!s&&(s=d),g=g||d,r==m){s=d;break}}}if(s?(e.params.data.variant=s,e.params.data.variantId=s.contentVariantId[0]):g?(e.params.data.variant=g,e.params.data.variantId=g.contentVariantId[0]):e.params.data.bestVariantId=g&&g.contentVariantId[0],t)alert("PLAYING BEST VARIANT"),s||(e.params.data.variant=g,e.params.data.variantId=g.contentVariantId[0]);else if("bonus"==e.params.data.type){alert("IN PLAYLIST");var c="",h=vui.SettingsModel.playbackQualitySetting,v=h&&""!=h?h:getCookie("desiredQualityLevel");v&&(alert("GOT DESIRED QUALITY:"+v),c=v);n=e.params.data.data.variants;a=vui.gConnectionInstance.getIsUHDSupported()?vui.getModel().qualityArray:vui.getModel().qualityArrayNoUHD,s=g=null;for(u=0;u<a.length;u++){var m,d=n[m=a[u]],g=g||d;c&&m==c&&(s=d)}s?(e.params.data.variant=s,e.params.data.variantId=s.contentVariantId[0]):g?(e.params.data.variant=g,e.params.data.variantId=g.contentVariantId[0]):(alert("HOW'D THIS HAPPEN? THERE SHOULD BE AT LEAST ONE VARIANT"),e.params.data.variant={})}return!(!e.params.data.variant||!i(e.params.data.variant))||(alert("Unable to find playable edition!"),this.showErrorPopup("PLAYBACK ERROR","Sorry, playback for this title is currently not available on this device."),!1)},onVolumeUp:function(){},onVolumeDown:function(){},onMute:function(){},displayTheater:function(){this.underrunCount=0,this.pauseToggleOn=!1,alert("IN THEATER LOAD"),this.checkQuality(this.callPlay.bind(this)),this.updateOsd(this.OSD_FS_BUFFERING),this.registerPageObserver(vui.Facade.PLAYER_STATE),this.registerPageObserver(vui.Facade.PLAYER_ERROR),this.registerPageObserver(vui.Facade.PLAYER_TIME),this.registerPageObserver(vui.Facade.PLAYER_DEBUG_INFO),pluginAPI.SetBannerState&&pluginAPI.SetBannerState(0),this.ffrwMode=0},onAction:function(){this.onTheaterAction()},removePageObservers:function(){for(var e in alert("REMOVE PAGE LISTENERS"),this._observerMap)for(;observer=this._observerMap[e].pop();)this.removeObserverNotification(e,observer),vui.getFacade().removeObserverNotification(e,observer)},registerPageObserver:function(e){alert("registerPageObserver for notification:"+e),this.registerObserver(e,this),vui.getFacade().registerObserver(e,this)},hide:function(){this.updateOsd(this.OSD_NONE),controller.getOnNetworkRestore()&&this.doStop("theaterHide"),this.doStop(),this.removePageObservers(),clearInterval(this.timerId),clearInterval(this.intervalId),alert("DESTROYING THEATER"),this.cancelHideItLater(),this.cancelFfRwTimer(),this.flushBookmark(!0),this.buffering.hide(),controller.removeActivityListener(this.onActivity)},hasRating:function(){var e=this.params.data.data.contentId[0];return 0!=(vui.getModel().ratedMovieCache.check(e)||0)},inLastHalfOfMovie:function(){if("movie"!==this.params.data.type&&"adcontent"!==this.params.data.type||this.params.data.forFreePreview||this.playlist)return alert("RETURNING FALSSE:type:"+this.params.data.type),alert("RETURNING FALSSE:forfree:"+this.params.data.forFreePreview),!1;var e=vui.getPlayer();return!!(e.currentTime&&e.totalTime&&e.currentTime>e.totalTime/2)},_reportingCount:0,notifyObserver:function(e){var t=vui.getPlayer();if(e.getName()==vui.Facade.PLAYER_STATE)if(alert("PLAYER STATE CHANGE:"+e.getBody()),e.getBody()==vui.widgets.Player.COMPLETED||e.getBody()==vui.widgets.Player.STOPPED||e.getBody()==vui.widgets.Player.POWER_OFF_STOP){if(this.ignoreStopNotification)delete this.ignoreStopNotification;else{this.subtitlesEnabled&&this.subtitle.unsetPlayer(),alert("HIDING STUFF!"),this.updateOsd(this.OSD_NONE);var i=!(this.baseLayer.elem.style.visibility="visible");if(this.playlist&&(i=this.playNextInPlaylist()),e.getBody()==vui.widgets.Player.POWER_OFF_STOP)return void controller.goBack();i||this.showFinishedDialogsIfNeeded()}e.getBody()==vui.widgets.Player.COMPLETED&&this.removeBookmark()}else if(e.getBody()==vui.widgets.Player.PAUSED)this.subtitlesEnabled&&this.subtitle.onPlayPaused(),alert("GOT PAUSED NOTIFICATION!"),this.ignorePauseNotificationUIChange?delete this.ignorePauseNotificationUIChange:this.showTopAndTrackbar();else if(e.getBody()==vui.widgets.Player.BUFFERING)this.isAdvertPlayback()||(this.loadChapter||this.replay||vui._.setAriaLabel((this.buffering.ms.innerHTML||"loading")+" "+vui._.aStr(this.movieInfoModel.data.title)),this.replay=!1),this.updateOsd(this.OSD_FS_BUFFERING);else if(e.getBody()==vui.widgets.Player.UNDERRUN)this.loadChapter=0,this.underrunCount++,alert("VUDU: underrun count = "+this.underrunCount),!this.params.data.forFreePreview&&this.underrunCount>this.MAX_UNDERRUNS_BEFORE_FALLBACK&&0<this.fallbackVariants.length?vui.vvPlatform.baseApp?this.switchToQuality(this.fallbackVariants[0]):this.bringUpQualityDialog():this.updateOsd(this.OSD_BUFFERING);else if(e.getBody()==vui.widgets.Player.TIMEOUT){if(!(!this.params.data.forFreePreview&&0<this.fallbackVariants.length&&window.navigator.onLine))return this.doStop(),void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_NETWORK_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK"));vui.vvPlatform.baseApp?this.switchToQuality(this.fallbackVariants[0]):this.bringUpQualityDialog()}else e.getBody()==vui.widgets.Player.STARTING?(delete this.hasStartedPlayback,this.updateOsd(this.OSD_BUFFERING)):e.getBody()==vui.widgets.Player.PLAYING?("advert"!==this.params.data.type&&vui.clearPlaySettings&&!0===vui.clearPlaySettings.dontShowCPNotice&&(this.cpNoticeTimer=null,delete vui.clearPlaySettings.dontShowCPNotice),this.hideCpNoticeFromQualitySwitch&&(this.cpNoticeTimer=null,this.hideCpNoticeFromQualitySwitch=!1),this.cpNoticeTimer&&this.cpNoticeTimer(),this.subtitlesEnabled&&this.subtitle.onPlaying(),alert("GOT PLAYING NOTIFICATION!!"),this.hasStartedPlayback=!0,this.hasEverStartedPlayback=!0,this.loadChapter=0,this.ignorePlayNotificationUIChange?delete this.ignorePlayNotificationUIChange:this.showTopAndTrackbar()):e.getBody()==vui.widgets.Player.PREPARING&&(alert("GOT PREPARING"),t.dimensionality&&"none"==t.dimensionality||2014<=window.yearVersion?(alert("REGULAR MOVIE, let the TV handle volume/mute controls"),pluginAPI.SetBannerState&&pluginAPI.SetBannerState(1)):(alert("3D MOVIE, we have to handle volume/mute controls"),pluginAPI.SetBannerState&&pluginAPI.SetBannerState(0),this.mute.setMute()));else{if(e.getName()==vui.Facade.PLAYER_ERROR){var s=e.getBody();if(alert("PLAYER ERROR:"+JSON.encode(s)),"object"==typeof s)return void this.showErrorPopup(s.title,s.message);if("DIRECTOR ERROR"==s)return void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_PLAYER_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK"));if(s==vui.widgets.Player.INVALID_TICKET)return this.doStop(),void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_RENTAL_EXPIRED"),vui.strings.getText("THEATER_ERROR_POPUP_THIS_MOVIES_RENTAL_PERIOD_EXPIRED"));if(s!=vui.widgets.Player.OUT_OF_TICKET_LIMITS)return"NETWORK ERROR"==s?(this.doStop(),void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_NETWORK_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK"))):"PLAYER ERROR"==s?(this.doStop(),void this.showErrorPopup("Playback error","Sorry, the video player has stopped working. Please try again.")):(hardwareId=vudu.registryGet("hardwareId"),hwid=hardwareId.substr(0,6),"SAMBBC"==hwid?(alert("Broadcom detected, do not stop in error handler"),t=vui.getPlayer(),this.ignoreStopNotification=!0,t.stopPartial()):this.doStop(),void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_PLAYBACK_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK")));var n=(t=vui.getPlayer()).currentTime;return this.doStop(),void this.purchaseFromPreview(n)}if(e.getName()==vui.Facade.PLAYER_TIME){this.subtitlesEnabled&&this.subtitle.heartbeat(),this._reportingCount=this._reportingCount+1,2400===this._reportingCount&&(this._reportingCount=0,vui.analytics.trackEvent("event13",{product:this.reportingId}));var a=e.getBody();if((t=vui.getPlayer()).state==t.STOPPED)return;if(this.osdState&this.OSD_CONTROLS&&!(this.osdState&this.OSD_SELECTOR_THUMB)&&this.tc.setPosition({currentTime:a,totalTime:t.totalTime}),this.osdState&this.OSD_HEADER&&this.updateHealthBars(),"advert"===this.params.data.type?("chromecast"!=vui.vvPlatform.clientType&&(this.shouldShowShoppableAd()?this.showClickAd():this.hideClickAd()),this.tc.setPosition({currentTime:a,totalTime:t.totalTime})):this.hideClickAd(),this.params.data.forFreePreview&&a>1e3*this.params.data.variant.freePreviewStopSeconds){alert("2min preview end reached with playertime");n=t.currentTime;return this.doStop(),void this.purchaseFromPreview(n)}"advert"!=this.contentType&&this.updateBookmark(a),this.avSettingsActive&&a+3e4>t.totalTime&&t.pause(),this.nextEpisode&&a+12e3>t.totalTime&&this._popShowNextEpisode(),this.pauseWhenCPNoticeIsOn&&t.html5Player.pause()}else e.getName()==vui.Facade.PLAYER_DEBUG_INFO&&this.displayDebugInfo(e.getBody()+" "+getEditionVideoProfile(this.params.data.data,this.params.data.variantId))}},displayDebugInfo:function(e){vui.getPlayer().displayStats&&(this.debugInfoLabel.style.display="block",this.debugInfoLabel.innerHTML=e.replace("\n","<br/>"))},onTools:function(){if("none"==vui.getPlayer().dimensionality&&"SAMT"==VUDU.registryGet("hardwareId").substr(0,4)){if(alert("VUDU: TV: Show video setup"),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING)return void alert("no settings during buffering");this.osdState&this.OSD_SETTINGS?(this.hideAVSettings(),this.showTopAndTrackbar()):this.showAVSettingsDialog()}},onStop:function(){vui.autoNextEpisodeCounter&&(vui.autoNextEpisodeCounter=0),this.cancelFfRwTimer(),this.doStop("cancelled"),this.showFinishedDialogsIfNeeded(),vui._.setAriaLabel("Stop")},onRw15:function(){alert("Back 15 seconds."),this.updateFfRwMode(0);var e,t,i=vui.getPlayer();i.state!==i.PAUSED&&i.state!==i.PLAYING||(this.currentChunk=i.getCurrentChunk(),alert("current chunk: "+this.currentChunk),e=i.timestamps[this.currentChunk],alert("current time: "+e),(t=e-15e3)<0&&(t=0),this.currentChunk=i.getChunkForTime(t),alert("current chunk: "+this.currentChunk),e=i.timestamps[this.currentChunk],alert("current time: "+e),this.tc.setPosition({currentTime:e,totalTime:i.totalTime}),this.seekToCurChunk(!0))},onVoiceControlSkip:function(e){var t=(e=e||{}).offset||0,i=vui.getPlayer(),s=i.getCurrentTime()+t;return s<0||s>i.totalTime?"exception":(this.currentChunk=i.getChunkForTime(s),this.seekToCurChunk(!0),"success")},onVoiceControlSetPosition:function(e){e=e||{};var t=vui.getPlayer(),i=e.position||0;return i<0||i>t.totalTime?"exception":(this.currentChunk=t.getChunkForTime(i),this.seekToCurChunk(!0),"success")},onVoiceControlSetSubtitle:function(e){e=e||{};var t=this.tc.ccMenu&&this.tc.ccMenu.subtitles,i=e.toggle,s=vui.getPlayer();if(!Array.isArray(t)||t.length<1)return"unsupported";var n=s.currentSubtitleLanguage&&s.currentSubtitleLanguage.languageCode;return n&&"off"!==n&&i?"onAlreadySet":n&&"off"!==n||i?(this.toggleCC(),"success"):"offAlreadySet"},bringUpTrickplay:function(e){this.pauseToggleOn=!0;var t,i=vui.getPlayer(),s=-1!==e&&1!==e?!1:!0;i.isInRequest||(this.cancelHideItLater(),i.state==i.PLAYING?(alert("PAUSING!!!"),this.ignorePauseNotificationUIChange=!0,this.currentChunk=i.getCurrentChunk(),null!=this.currentChunk?(t=i.timestamps[this.currentChunk],0==e&&this.tc.setMode("SCROLLING"),this.tc.setPosition({currentTime:t,totalTime:i.totalTime}),this.updateThumbs(s),this.updateThumbs(),this.updateFfRwMode(e)):alert("VUDU ERROR: COULD'NT get current chunk!")):this.paused?(this.currentChunk=i.getCurrentChunk(),null!=this.currentChunk?(t=i.timestamps[this.currentChunk],this.tc.setPosition({currentTime:t,totalTime:i.totalTime}),this.updateThumbs(s),this.updateFfRwMode(e)):alert("VUDU ERROR: COULD'NT get current chunk!"),this.paused=!1):this.osdState&this.OSD_SELECTOR_THUMB&&this.updateFfRwMode(e),i.pause())},updateHealthBars:function(){var e=vui.getPlayer(),t=e.getCurrentBitrate(),i=e.getBitrates();if(i)for(var s=0;s<i.length;s++)if(i[s]==t){Math.round(4*(s+1)/i.length);break}},updateCurrentChunk:function(e,t){alert("UPDATING CURRENT CHUNK WITH DIFF:"+e);var i,s,n=this.currentChunk+e,a=vui.getPlayer();return alert("UPDATING CURRENT CHUNK target= "+n+" cur = "+this.currentChunk),n<0?(n=this.currentChunk=0,void this.onPause()):n>a.timestamps.length-1?(n=a.timestamps.length-1,this.currentChunk=a.timestamps.length-1,void this.onPause()):void(n==this.currentChunk&&2!=t||(this.currentChunk=n,i=a.timestamps[this.currentChunk],this.tc.setPosition({currentTime:i,totalTime:a.totalTime}),t?3==t?this.updateThumbs():2!=t&&(this.updateThumbsNoUpdate(this.timerNewlySet),this.timerNewlySet=!1):(s=this.OSD_HEADER|this.OSD_CONTROLS|this.OSD_SELECTOR_THUMB,this.updateOsd(s))))},ffRwTimer:function(){alert("FFRWTIMER CALLED!"),0==this.ffrwMode?alert("THIS IS VERY BAD. DID WE FORGET TO CANCEL TIMER?"):(0<this.ffrwMode?this.updateCurrentChunk(1<<this.ffrwMode,this.loadFwRwChunk==this.CHUNK_INTERVAL):this.updateCurrentChunk(-(1<<-this.ffrwMode),this.loadFwRwChunk==this.CHUNK_INTERVAL),this.loadFwRwChunk==this.CHUNK_INTERVAL?this.loadFwRwChunk=0:this.loadFwRwChunk++)},showingTopBar:function(){return!!(this.osdState&this.OSD_CHAPTERS||this.osdState&this.OSD_HEADER||this.osdState&this.OSD_QUALITY_DIALOG)},showingAVDialog:function(){return!!(this.osdState&this.OSD_SETTINGS)},trickplayLeft:function(){this.setUserActive(),alert("TRICKPLAY LEFT");var e=vui.getPlayer();e.state!==e.PAUSED&&e.state!==e.PLAYING||(this.isAdvertPlayback()?alert("trickplay is not permitted"):0==this.ffrwMode&&(new Date).getTime()-this.lastDirLeftRight>this.SEEK_RATE&&(this.updateCurrentChunk(-this.trickplayIncrement,3),this.lastDirLeftRight=(new Date).getTime()))},onDirectionLeft:function(){var e;this.setUserActive(),this.isAdvertPlayback()?alert("trickplay is not permitted"):(e=vui.getPlayer(),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):1!=this.showingTopBar()&&1!=this.showingAVDialog()&&this.bringUpTrickplay(0))},onDirectionDown:function(){this.setUserActive(),this.onInfo()},onDirectionUp:function(){this.setUserActive(),this.onInfo()},trickplayRight:function(){this.setUserActive();var e=vui.getPlayer();e.state!==e.PAUSED&&e.state!==e.PLAYING||(this.isAdvertPlayback()?alert("trickplay is not permitted"):(alert("TRICKPLAY RIGHT"),0==this.ffrwMode&&(new Date).getTime()-this.lastDirLeftRight>this.SEEK_RATE&&(this.updateCurrentChunk(this.trickplayIncrement,3),this.lastDirLeftRight=(new Date).getTime())))},onDirectionRight:function(){var e;this.setUserActive(),this.isAdvertPlayback()?alert("trickplay is not permitted"):(e=vui.getPlayer(),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):1!=this.showingTopBar()&&1!=this.showingAVDialog()&&this.bringUpTrickplay(0))},onMouseWheel:function(e){var t;this.setUserActive(),this.isAdvertPlayback()?alert("trickplay is not permitted"):(t=vui.getPlayer(),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||t.state==t.PLAYING_REQUESTED?alert("no trickplay during buffering"):1!=this.showingTopBar()&&1!=this.showingAVDialog()&&this.bringUpTrickplay(0))},setHideItLater:function(){var e;this.cancelHideItLater(),this.hideTimerId||(e=function(){this.osdState&this.OSD_BUFFERING||this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_QUALITY_DIALOG||this.osdState&this.OSD_SETTINGS?alert("skipping setHideItLater because we are in underrun mode or in quality dialog"):this.updateOsd(this.OSD_NONE)}.bind(this),vui.getPlayer().displayStats||(this.hideTimerId=setTimeout(e,7e3)))},cancelHideItLater:function(){this.hideTimerId&&(clearTimeout(this.hideTimerId),delete this.hideTimerId)},showTopAndTrackbar:function(){var e=vui.getPlayer();alert("SHOW TOP AND TRACKBAR, current time = "+e.currentTime),this.isShowingNextEpisodePop&&vui.select(controller.baseLayer.currentDialog),this.tc.setMode(),this.tc.setPosition({currentTime:e.currentTime,totalTime:e.totalTime}),this.updateHealthBars(),this.updateOsd(this.OSD_CONTROLS|this.OSD_HEADER),this.setHideItLater()},showAVSettingsDialog:function(){alert("SHOW AV SETTINGS DIALOG"),this.updateOsd(this.OSD_SETTINGS),this.cancelHideItLater()},onTheaterAction:function(){var e=vui.getPlayer();this.osdState&this.OSD_SELECTOR_THUMB?(this.updateFfRwMode(0),this.seekToCurChunk()):e.state!=e.PLAYING&&e.state!=e.PAUSED||this.osdState&this.OSD_HEADER||this.showTopAndTrackbar()},doStop:function(e){this.subtitlesEnabled&&this.subtitle.unsetPlayer();var t=vui.getPlayer();this.ignoreStopNotification=!0,this.loadChapter=0,t.state!=t.STOPPED&&this.updateBookmark(t.currentTime),t.stop(e)},onHome:function(){this.doStop()},showFinishedDialogsIfNeeded:function(){var e,t,i=vui.familyModel&&vui.familyModel.getIsInKidsMode();!this.hasStartedPlayback||!this.inLastHalfOfMovie()||vui.vvPlatform.baseApp||i&&!this.isShowingNextEpisodePop?controller.goBack():(e=function(){var t=function(e){(this.movieInfoModel=e)?(this.updateOsd(this.OSD_NONE),controller.showPopup("RatingDialog",{mim:this.movieInfoModel,cb:function(){vui.getPlayer().isDoingRatingDialog=!1,controller.goBack()}})):(alert("VUDU: bind movie info: no data yet, retry..."),this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,t))}.bind(this);this.movieInfoModel=vui.getModel().getMovieInfo(this.params.data.data.contentId[0],t)}.bind(this),t=function(){var i=function(e){var t;(this.movieInfoModel=e)?(t=this.getBestOffers(this.movieInfoModel),controller.showPopup("RentToOwnDialog",{mim:this.movieInfoModel,offers:t,cb:function(){controller.goBack()}})):(alert("VUDU: bind movie info: no data yet, retry..."),this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,i))}.bind(this);this.movieInfoModel=vui.getModel().getMovieInfo(this.params.data.data.contentId[0],i)}.bind(this),this.isShowingNextEpisodePop||(vui.gConnectionInstance.getRentToOwnEnabled()&&!this.movieIsPurchased()&&this.hasConditionalOffer()?t():(e(),vui.getPlayer().isDoingRatingDialog=!0)))},getBestOffers:function(e){var t=e.data.offers,i=[];for(var s in alert("GET BEST OFFER:"+JSON.encode(t)),this.params.data.data.variants)({}).hasOwnProperty.call(this.params.data.data.variants,s)&&t[s].Purchase&&t[s].Purchase.isConditional&&i.push({qualityLevel:s,offer:t[s].Purchase});return i},movieIsPurchased:function(){return!!(this.params&&this.params.data&&this.params.data.data)&&vui.getModel().movieIsPurchased(this.params.data.data)},hasConditionalOffer:function(){return!!this.params.data.data.conditionalOfferPrice},onBack:function(){var e;this.inTCHideButtingTime?alert("click back too fast."):(vui.vvPlatform.isXbox&&(Windows.Media.SystemMediaTransportControls.getForCurrentView().playbackStatus=Windows.Media.MediaPlaybackStatus.stopped),alert("ON RETURN< STATE"+this.osdState),e=vui.getPlayer(),this.osdState&this.OSD_SELECTOR_THUMB?(this.updateFfRwMode(0),this.updateOsd(this.OSD_NONE),this.ignorePlayNotificationUIChange=!0,e.resume()):this.osdState&this.OSD_CHAPTERS?(this.updateOsd(this.OSD_NONE),this.ignorePlayNotificationUIChange=!0,e.resume()):this.osdState&this.OSD_CONTROLS?this.updateOsd(this.OSD_NONE):this.osdState&this.OSD_QUALITY_DIALOG?this.switchToQuality("same"):this.osdState&this.OSD_SETTINGS?(this.hideAVSettings(),this.showTopAndTrackbar()):this.shouldPlayNextEpisode()?(this.onPause(),this._popShowNextEpisode()):(vui.autoNextEpisodeCounter&&(vui.autoNextEpisodeCounter=0),this.doStop("cancelled"),this.showFinishedDialogsIfNeeded()))},onVolUp:function(){vui.getPlayer().changeVol(1)},onVolDown:function(){vui.getPlayer().changeVol(-1)},onPause:function(){this.setUserActive(),alert("VUDU: onPause");var e=vui.getPlayer();this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):(e.pause(),0!=this.ffrwMode?(this.updateFfRwMode(0),this.updateThumbs(!0),this.cancelHideItLater()):(this.paused=!0,this.osdState&this.OSD_CHAPTERS||this.osdState&this.OSD_SELECTOR_THUMB||this.showTopAndTrackbar()),this.pauseToggleOn=!0,vui._.setAriaLabel("Pause. "+(this.getCurrentTimeAsString()||"")))},onPlay:function(){this.setUserActive(),this.paused=!1,this.loadChapter=0,this.osdState&this.OSD_SELECTOR_THUMB?this.onAction():vui.getPlayer().resume(),this.pauseToggleOn=!1,vui._.setAriaLabel("Play. "+(this.getCurrentTimeAsString()||""))},onPlayPause:function(){alert("PLAY/PAUSE, toggle pause is: "+this.pauseToggleOn),this.pauseToggleOn?this.onPlay():this.onPause()},onSkipFF:function(){if(alert("SKIP CHAPTER FW button pressed"),this.isAdvertPlayback())alert("seek is not permitted");else{var e=vui.getPlayer();if(this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED||0!==this.ffrwMode||!window.showChapters)alert("not allowed");else{for(var t,i=e.timestamps.length<15?e.timestamps.length:15,s=e.timestamps.length/i,n=0,a=e.getCurrentChunk(),o=0;o<i;o++){if(a<(t=Math.floor(o*s)))break;n=o}n<i-1&&(n++,this.loadChapter=n+1,alert("skip to chapter number "+this.loadChapter),t=Math.floor(n*s),this.currentChunk=t,this.seekToCurChunk(null,!0))}}},onSkipRW:function(){if(alert("SKIP CHAPTER RW button pressed"),this.isAdvertPlayback())alert("seek is not permitted");else{var e=vui.getPlayer();if(this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED||0!==this.ffrwMode||!window.showChapters)alert("not allowed");else{for(var t=e.timestamps.length<15?e.timestamps.length:15,i=e.timestamps.length/t,s=0,n=e.getCurrentChunk(),a=0;a<t;a++){if(n<(o=Math.floor(a*i)))break;s=a}0<s&&s--,this.loadChapter=s+1,alert("skip to chapter number "+this.loadChapter);var o=Math.floor(s*i);this.currentChunk=o,this.seekToCurChunk(null,!0)}}},onFF:function(){var e;alert("FF button pressed"),this.isAdvertPlayback()?alert("seek is not permitted"):(e=vui.getPlayer(),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):this.bringUpTrickplay(1))},onRW:function(){var e;alert("RW button pressed"),this.isAdvertPlayback()?alert("seek is not permitted"):(e=vui.getPlayer(),this.osdState&this.OSD_FS_BUFFERING||this.osdState&this.OSD_BUFFERING||e.state==e.PLAYING_REQUESTED?alert("no trickplay during buffering"):this.bringUpTrickplay(-1))},onCPButton:function(){this.osdState===this.OSD_NONE&&this.showTopAndTrackbar()},onInfo:function(){var e=vui.getPlayer();e.state!=e.PLAYING&&e.state!=e.PAUSED||this.osdState&this.OSD_HEADER||this.osdState&this.OSD_SELECTOR_THUMB||this.showTopAndTrackbar()},toggleCC:function(){var e;this.subtitleLanguages&&0<this.subtitleLanguages.length&&(this.osdState&this.OSD_HEADER||this.showTopAndTrackbar(),"block"===this.subtitle.elem.style.display?("off"!==vui.CCModel.ccSelected&&(this.previousSubtitle=vui.CCModel.ccSelected),this.hideSubtitles()):(e="off"!==this.previousSubtitle?this.previousSubtitle:"en",this.showSubtitles({languageCode:e})),vui.CCModel.ccSelected=e||"off",vui.CCModel.save())},goToChapters:function(){alert("GO TO CHAPTERS"),this.isAdvertPlayback()?alert("chapters not permitted"):(this.cancelFfRwTimer(),this.cancelHideItLater(),this.osdState&this.OSD_CHAPTERS?this.updateOsd(this.OSD_CONTROLS|this.OSD_HEADER):this.updateOsd(this.OSD_CONTROLS|this.OSD_HEADER|this.OSD_CHAPTERS),this.paused=!0)},onChapterClick:function(e){alert("CLICKED CHAPTER:"+e.chunk);vui.getPlayer();this.updateFfRwMode(0),this.currentChunk=e.chunk,this.loadChapter=e.chapterNum,this.seekToCurChunk(null,!0)},switchToQuality:function(e){var t,i;this.variantQuality!=e&&("same"!=e&&(alert("SETTING DESIRED QUALITY LEVEL:"+e),setCookie("desiredQualityLevel",e)),t=vui.getPlayer(),this.updateOsd(this.OSD_NONE),this.updateOsd(this.OSD_BUFFERING),this.params.data.data&&this.params.data.data.variants&&this.params.data.data.variants[e]&&(this.params.data.variantId=this.params.data.data.variants[e].contentVariantId[0],this.params.data.variant=this.params.data.data.variants[e]),t.state!=t.STOPPED&&(0!=this.ffrwMode?(this.updateBookmark(t.timestamps[this.currentChunk],!0),this.qualityBookmark=this.clampTime(t.timestamps[this.currentChunk],t.totalTime),this.updateFfRwMode(0)):(this.updateBookmark(t.currentTime,!0),this.qualityBookmark=this.clampTime(t.currentTime,t.totalTime)),this.ignoreStopNotification=!0,alert("VUDU: switchToQuality, call stop"),t.stop("switchQuality")),this.chapters.clear(),this.currentChunk=null,"same"!=e&&(alert("VUDU: switchToQuality, reset underrun counter"),this.underrunCount=0),this.pauseToggleOn=!1,(i=this).hideCpNoticeFromQualitySwitch=!0,window.VUDU_APP_ARGS.doCAF&&ancinus.mediautil.load(this.params.data),window.setTimeout(function(){var e=i.callPlay.bind(i,!0);i.checkQuality(e)},500))},changeClearplay:function(t){var i=vui.strings.getText,s=vui.strings.getTransformedText.bind(vui.strings);if(!(!vui.clearPlaySettings||vui.clearPlaySettings.getEnabled()&&"ON"===t.setting||!vui.clearPlaySettings.getEnabled()&&"OFF"===t.setting)){var n,a,o,r=vui.getPlayer(),l=r.state;if(l!=r.PAUSED&&r.pause(),this.cancelHideItLater(),this.tc.selectable=!1,"adcontent"==this.contentType?(a=this.params.data&&this.params.data.advertContentId,o=!0):"movie"==this.contentType&&(a=r.getStreamingSessionId(),o=!1),"ON"!==t.setting||vui.clearPlaySettings.getRestricted())if("ON"===t.setting&&vui.clearPlaySettings.getRestricted())n={title:i("FP_THEATER_DIALOG_TURN_ON_TITLE"),text1:i("FP_THEATER_DIALOG_TURN_ON_DESC1"),text2:i("FP_THEATER_DIALOG_TURN_ON_LOCKED_DESC"),text1ClassName:"cpWideText",text2ClassName:"cpMediumText",focus:"Turn On",buttons:[{label:s("FP_THEATER_DIALOG_TURN_ON_BUTTON_ON"),action:"continue",size:"2"},{label:s("FP_THEATER_DIALOG_TURN_ON_BUTTON_CANCEL"),action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"2"}],callback:function(e){"continue"===e?(r.hasReportedCPSessionCreate||"adcontent"!=this.contentType&&"movie"!=this.contentType||(r.hasReportedCPSessionCreate=!0,vui.m.onClearplaySessionCreate(a,o)),this.tc.setClearplaySetting(t.setting),d.call(this),t.cb(),this.setHideItLater(),this.cpNoticeParams.callback=function(){controller.hidePopup(),l===r.PLAYING&&r.state==r.PAUSED&&vui.getPlayer().resume(),vui.select(this.tc)}.bind(this),this.cpNoticeParams.onBack=this.cpNoticeParams.callback,controller.showPopup("FamilyPlayNotice",this.cpNoticeParams),vui.clearPlaySettings.trackingDuringPlayback()):(this.tc.selectable=!0,vui.select(this.tc),this.setHideItLater(),l===r.PLAYING&&r.resume())}.bind(this)};else{if("OFF"===t.setting&&vui.clearPlaySettings.getRestricted()){function e(e){"correct"===e||!0===e?(n={title:i("FP_THEATER_DIALOG_TURN_OFF_TITLE"),text1:i("FP_THEATER_DIALOG_TURN_OFF_DESC"),text1ClassName:"cpNarrowText",focus:"Turn Off",buttons:[{label:s("FP_THEATER_DIALOG_TURN_OFF_BUTTON_OFF"),action:"continue",size:"2"},{label:s("FP_THEATER_DIALOG_TURN_OFF_BUTTON_CANCEL"),action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"2"}],callback:function(e){"continue"===e&&(this.tc.setClearplaySetting(t.setting),t.cb(),vui.clearPlaySettings.trackingDuringPlayback()),c.call(this),this.tc.selectable=!0,vui.select(this.tc),this.setHideItLater(),l===r.PLAYING&&r.resume()}.bind(this),onBack:function(){controller.hidePopup(),l===r.PLAYING&&r.resume(),vui.select(this.tc)}.bind(this)},controller.showPopup("FamilyPlayNotice",n)):(controller.hidePopup(),this.tc.selectable=!0,vui.select(this.tc),this.setHideItLater(),l===r.PLAYING&&r.resume())}var u=new vui.familyPINActions;return void(vui.familyModel.getPasscode()&&vui.m.userId?u.passcodePrompt({heading:i("FP_SETTING_TITLE"),promptText:i("FP_SETTINGS_REQUIRE_PIN_DESC"),promptText2:i("SETTINGS_PIN_GRACE_PERIOD"),callback:e.bind(this),authType:"family_setting"}):u.setOrChangePasscode("init_pin",e.bind(this)))}"OFF"!==t.setting||vui.clearPlaySettings.getRestricted()||(n={title:i("FP_THEATER_DIALOG_TURN_OFF_TITLE"),text1:i("FP_THEATER_DIALOG_TURN_OFF_DESC"),text1ClassName:"cpNarrowText",focus:"Turn Off",buttons:[{label:s("FP_THEATER_DIALOG_TURN_OFF_BUTTON_OFF"),action:"continue",size:"2"},{label:s("FP_THEATER_DIALOG_TURN_OFF_BUTTON_CANCEL"),action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"2"}],callback:function(e){"continue"===e&&(this.tc.setClearplaySetting(t.setting),t.cb(),vui.clearPlaySettings.trackingDuringPlayback()),c.call(this),this.tc.selectable=!0,vui.select(this.tc),this.setHideItLater(),l===r.PLAYING&&r.resume()}.bind(this)})}else n={title:i("FP_THEATER_DIALOG_TURN_ON_TITLE"),text1:i("FP_THEATER_DIALOG_TURN_ON_DESC1"),text2:i("FP_THEATER_DIALOG_TURN_ON_DESC2"),text1ClassName:"cpWideText",text2ClassName:"cpMediumText",focus:"Turn On",buttons:[{label:s("FP_THEATER_DIALOG_TURN_ON_BUTTON_ON"),action:"continue",size:"2"},{label:s("FP_THEATER_DIALOG_TURN_ON_BUTTON_CANCEL"),action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"2"}],callback:function(e){"continue"===e?(r.hasReportedCPSessionCreate||"adcontent"!=this.contentType&&"movie"!=this.contentType||(r.hasReportedCPSessionCreate=!0,vui.m.onClearplaySessionCreate(a,o)),this.tc.setClearplaySetting(t.setting),d.call(this),t.cb(),this.setHideItLater(),this.cpNoticeParams.callback=function(){controller.hidePopup(),l===r.PLAYING&&r.state==r.PAUSED&&vui.getPlayer().resume(),vui.select(this.tc)}.bind(this),this.cpNoticeParams.onBack=this.cpNoticeParams.callback,controller.showPopup("FamilyPlayNotice",this.cpNoticeParams),vui.clearPlaySettings.trackingDuringPlayback()):(this.tc.selectable=!0,vui.select(this.tc),l===r.PLAYING&&r.resume())}.bind(this)};n.onBack=function(){controller.hidePopup(),l===r.PLAYING&&r.resume(),vui.select(this.tc)}.bind(this),controller.showPopup("FamilyPlayNotice",n)}function d(){this.thumb0.style.visibility="hidden",this.thumb2.style.visibility="hidden",this.stripBg.style.visibility="hidden",this.focus.elem.style.visibility="hidden"}function c(){this.thumb0.style.visibility="visible",this.thumb2.style.visibility="visible",this.stripBg.style.visibility="visible",this.focus.elem.style.visibility="visible"}},setUserActive:function(){this.isUserActive=!0},getCurrentTimeAsString:function(){var e=vui.getPlayer(),t=parseInt(e.currentTime,10);return timeAsString(t)},playNextInPlaylist:function(){if(this.playlist){this.params.data={},this.params.data.type="bonus";var e=this.playlist.getNext();if(!e)return!1;this.params.data.data=e}this.posterUrl=vui.getModel().getPosterUrl(this.params.data.data,"large"),this.buffering.setPosterSrc(this.posterUrl),alert("PLAY NEXT IN PLAYLIST "),this.updateOsd(this.OSD_NONE),this.updateOsd(this.OSD_FS_BUFFERING);var t=vui.getPlayer();t.state!=t.STOPPED&&(this.updateBookmark(t.currentTime,!0),this.ignoreStopNotification=!0,alert("VUDU: switchToQuality, call stop"),t.stop()),this.chapters.clear(),this.underrunCount=0,this.pauseToggleOn=!1;var i=function(e){if(alert("GET MOVIE CALLBACK"),!e)return alert("GET MOVIE CALLBACK: FAILED"),void this.showErrorPopup(vui.strings.getText("THEATER_ERROR_POPUP_MOVIE_ERROR"),vui.strings.getText("THEATER_ERROR_POPUP_UNABLE_TO_STREAM_NETWORK"));if(this.params.data.data=e.data,this.playlist){alert("IN PLAYLIST");var t="sd",i=vui.SettingsModel.playbackQualitySetting,s=i&&""!=i?i:getCookie("desiredQualityLevel");s&&(alert("GOT DESIRED QUALITY:"+s),t=s);for(var n=this.params.data.data.contentVariants[0].contentVariant,a=0;a<n.length;a++){var o=n[a];if(o.videoQuality[0]==t){this.params.data.variant=o,this.params.data.variantId=o.contentVariantId[0];break}}}this.checkQuality(this.callPlay.bind(this))}.bind(this);return vui.getModel().getMovieInfo(this.params.data.data.contentId[0],i),!0},bringUpQualityDialog:function(){var e;vui.vvPlatform.isXbox?(alert("SHOWING QUALITY DIALOG"),e=vui.getPlayer(),this.updateBookmark(e.currentTime,!0),this.ignoreStopNotification=!0,alert("VUDU: bringUpQualityDialog, show paused"),this.updateOsd(this.OSD_QUALITY_DIALOG),setTimeout(function(){alert("VUDU: bringUpQualityDialog, call stop"),e.stop("switchQuality")},100)):(alert("SHOWING QUALITY DIALOG"),e=vui.getPlayer(),this.updateBookmark(e.currentTime,!0),this.ignoreStopNotification=!0,alert("VUDU: bringUpQualityDialog, call stop"),e.stop("switchQuality"),alert("VUDU: bringUpQualityDialog, show paused"),this.updateOsd(this.OSD_QUALITY_DIALOG))},save:function(){return this.params.state={videoQuality:this.variantQuality},this.params},setCurrentSubtitle:function(e,t,i,s){var n,a,o=vui.getPlayer();o.data&&o.data.location?n=o.data.location[s]:o.data&&(n=o.data),n&&n.subtitleBaseUri&&(a=[],"string"==typeof n.subtitleBaseUri?a[0]=n.subtitleBaseUri:a=n.subtitleBaseUri,!this.loadedSubtitles[e.languageCode]||this.moreThanOneLanguage?(this.subtitle.setSubtitleInfo(a,e.version,e.languageCode,n.subtitleUriSuffix),this.params.data&&this.params.data.overrideSubtitleURL?this.subtitle.setOverrideURL(this.params.data.overrideSubtitleURL):this.subtitle.setURI(0),this.subtitle.setPlayer(vui.getPlayer(),t),this.loadedSubtitles[e.languageCode]=!0,"mex"!=vui.USER_COUNTRY&&!i&&this.moreThanOneLanguage&&(vui.CCModel.ccSelected=e.languageCode||"off",vui.CCModel.save()),"chromecast"===vui.vvPlatform.clientType||vui.CCModel.ccSelected&&"off"!=vui.CCModel.ccSelected?this.showSubtitles(e):this.hideSubtitles()):"off"==e.languageCode?this.hideSubtitles():this.showSubtitles(e),"mex"==vui.USER_COUNTRY||i||(e.languageCode.match(/es/)&&(e.languageCode="es"),vui.CCModel.ccSelected=e.languageCode||"off",vui.CCModel.save()))},showSubtitles:function(e){this.subtitlesEnabled=!0,vui.getPlayer().currentSubtitleLanguage=e,this.tc.setCurrentSubtitle({languageCode:e.languageCode},!0),this.subtitle.show()},hideSubtitles:function(){this.subtitlesEnabled=!1,vui.getPlayer().currentSubtitleLanguage=null,this.tc.setCurrentSubtitle({languageCode:""},!0),this.subtitle.hide()},isAdvertPlayback:function(){return"advert"===this.contentType},onPlaybackStartedOtherDeviceNotification:function(e){if(vui.gConnectionInstance.getConcurrentStreamEnforced()){var t=vui.getModel().directorCsClient.getLightDeviceId();if(t&&e.playingLightDeviceId&&e.playingLightDeviceId[0]===t)alert("CONCURRENT STREAM IS FROM THE SAME DEVICE, dont do anything");else{var i=e.contentVariantId&&e.contentVariantId[0];if(i&&this.params&&this.params.data&&this.params.data.data&&this.params.data.data.variants)for(var s in this.params.data.data.variants){var n=this.params.data.data.variants[s];if(n.contentVariantId&&n.contentVariantId[0]===i)return this.doStop("Concurrent Streaming Error"),void this.showErrorPopup(vui.strings.transformCase("Error"),vui.strings.getText("THEATER_ERROR_POPUP_THIS_MOVIES_ANOTHER_DEVICE"))}}}else alert("CONCURRENT STREAM IS NOT ENFORCED")},onClickAdMore:function(){this.osdState===this.OSD_NONE&&this.showTopAndTrackbar(),vui.select(this.tc)},stopUpdatingBookmark:function(){this.bookmark=null},shouldShowShoppableAd:function(){if(!vui.gConnectionInstance.getIsShoppableAdsEnabled()||vui.familyModel.getIsInKidsMode())return!1;var e=vui.getModel().avodManager.isShoppableAd&&vui.getModel().avodManager.isShoppableAd(),t=vui.getModel().avodManager.isAdClicked&&vui.getModel().avodManager.isAdClicked(),i=1e3*vui.getModel().avodManager.getShoppableAdDelaySecs(),s=vui.getPlayer().totalTime;if(s){var n=s-3e3,a=vui.getPlayer().currentTime;if(e)return t?"none"!==this.adInfo.elem.style.display:i<=a&&a<=n}return!1},displayProductInfo:function(){var e=vui.getModel().avodManager.getShoppableAdProductInfo();e&&(this.adInfo.display(e),vui.select(this.adInfo))},showClickAd:function(){this.adInfo&&"none"===this.adInfo.elem.style.display&&this.displayProductInfo()},hideClickAd:function(){this.adInfo&&"none"!==this.adInfo.elem.style.display&&(this.adInfo.hide(),this.showTopAndTrackbar())},onAddToCart:function(){vui.getModel().avodManager.notifyAddToCartClick(function(e){this.adInfo&&("success"===vui._.aStr(e)?this.adInfo.displayAddToCartSuccess():this.adInfo.displayAddToCartError(),this.showTopAndTrackbar()),this.hideAdinfoTimer&&clearTimeout(this.hideAdinfoTimer),this.hideAdinfoTimer=setTimeout(function(){this.hideAdinfoTimer=null,this.adInfo&&this.adInfo.hide()}.bind(this),this.msgDurationMilliSec)}.bind(this))},onLearnMore:function(){vui.getModel().avodManager.notifyAdClick(function(e){this.adInfo&&("success"===vui._.aStr(e)?this.adInfo.displayInfoSent():this.adInfo.displayError(),this.showTopAndTrackbar()),this.hideAdinfoTimer&&clearTimeout(this.hideAdinfoTimer),this.hideAdinfoTimer=setTimeout(function(){this.hideAdinfoTimer=null,this.adInfo&&this.adInfo.hide()}.bind(this),this.msgDurationMilliSec)}.bind(this))},onBuyContent:function(e){e.contentId&&vui.getModel().getMovieInfo(e.contentId,function(e){e&&e.get()&&this.onPromoBuyAction(e)}.bind(this)),vui.getModel().avodManager.notifyContentAdClick(),this.adInfo&&this.adInfo.hide()},promoBuyDoneCB:function(){controller.hidePopup(),vui.getPlayer().resume()},onPromoBuyAction:function(e){this.ignorePauseNotificationUIChange||vui.getPlayer().pause();controller.showPopup("OfferDialog",{mim:e,callback:function(e){var t;"string"==typeof e?"cancel"!==e&&"back"!==e||this.promoBuyDoneCB():((t={movie:e.movie,variant:e.variant,offer:e.offer,offers:e.offers,validOffers:e.validOffers,discount:e.discount}).successCallback=function(){vui.getPlayer().resume()},t.callback=function(e){"string"==typeof e&&("cancel"!==e&&"back"!==e||this.promoBuyDoneCB())}.bind(this),t.fromPromo=!0,this.onClickOffer(t))}.bind(this),fromPromo:!0,isPreorder:vui.getModel().avodManager._adType===CLICK_AD_TYPE.PREORDER_CONTENT_AD})}}),vui.widgets.HealthBars=new Class({Extends:vui.widgets.Base,name:"vui.widgets.HealthBars",init:function(){this.width=window.vui.ResDef.Theater.TH_HB_W,this.height=window.vui.ResDef.Theater.TH_HB_H;var e=this.elem.style;this.elem.id="healthBars",e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px",e.display="none",this.setLevel(0)},setLevel:function(e){this.level!=e&&(this.level=e,this.elem.style.background="url("+vui.images["healthBar"+e]+")")}}),vui.widgets.NewTheaterHeader=new Class({Extends:vui.widgets.Base,name:"vui.widgets.NewTheaterHeader",elemClassName:"newTheaterHeader",init:function(){var e=this.elem;this.width=window.vui.ResDef.SCREEN_WIDTH,this.height=window.vui.ResDef.Theater.TH_HEIGHT,this.title=new Element("div",{class:"newTheaterHeaderTitle"}),this.title.style.top=window.vui.ResDef.Theater.TH_TOP+"px",this.title.style.left=window.vui.ResDef.Theater.TH_LEFT+"px",this.elem.appendChild(this.title),this.seasonTitle=new Element("div",{class:"newTheaterHeaderTitle"}),this.seasonTitle.style.top=window.vui.ResDef.Theater.TH_SEAON_TOP+"px",this.seasonTitle.style.left=window.vui.ResDef.Theater.TH_LEFT+"px",this.seasonTitle.style.display="none",this.elem.appendChild(this.seasonTitle);var t=document.createElement("img");t.id="dolbyIcon",t.className="theater_th_dolbyIcon",t.style.top=window.vui.ResDef.Theater.TH_DOLBY_T+"px",t.style.left=window.vui.ResDef.Theater.TH_DOLBY_L+"px",e.appendChild(t),this.dolbyIcon=t,this.dolbyVision=document.createElement("img"),this.dolbyVision.className="theater_th_dolbyVision",this.dolbyVision.src=vui.images.dolbyVisionLogo,this.dolbyVision.style.display="none",e.appendChild(this.dolbyVision),this.qualityIcon=document.createElement("img"),this.qualityIcon.className="theater_th_qtyIcon",e.appendChild(this.qualityIcon);var i=new vui.widgets.HealthBars;this.hb=i,this.attachChild(i),this.hb.elem.style.top=window.vui.ResDef.Theater.TH_HB_T+"px",this.hb.elem.style.left=window.vui.ResDef.Theater.TH_HB_L+"px"},show:function(){this.parent()},hide:function(){this.parent()},setQualityLevel:function(e){this.qualityIcon.src=vui.images["qty_"+e+"_white"],this.qualityIcon.style.display="block",this.dolbyIcon&&(this.dolbyIcon.style.left=window.vui.ResDef.Theater.TH_DOLBY_L-window.vui.ResDef.TheaterControls.ICON_QTY_W+"px")},setHealthLevel:function(e){this.hb.setLevel(e),this.hb.elem.style.display="block"},setTitle:function(e,t){this.title.innerHTML=e,t?(this.seasonTitle.innerHTML=t,this.seasonTitle.style.display="block"):this.seasonTitle.style.display="none"},setAudioCodec:function(e){var t=window.Asteroid&&Asteroid.Features.getAudioSupport();"dolbyDigital"!==e||t&&!t.contains("dd")?"dolbyDigitalPlus"!==e||t&&!t.contains("ddp")?"dolbyAtmos"!==e||t&&!t.contains("ddp")?this.dolbyIcon.style.display="none":(alert("SHOW DDAtmos ICON"),this.dolbyIcon.src=vui.images.dolbyAtmosIcon,this.dolbyIcon.style.display="block"):(alert("SHOW DDPLUS ICON"),this.dolbyIcon.src=vui.images.dolbyDigitalPlus,this.dolbyIcon.style.display="block"):(alert("SHOW DD ICON"),this.dolbyIcon.src=vui.images.dolbyDigital,this.dolbyIcon.style.display="block")},setDolbyVision:function(){this.dolbyVision.style.display="block"},setHDR10:function(){this.dolbyVision.src=vui.images.hdr10_details_enabled,this.dolbyVision.style.display="block"},removeDolby:function(){this.dolbyVision.style.display="none"},updateKidsModeHeader:function(){this.dolbyIcon.style.visibility="hidden",this.qualityIcon.style.visibility="hidden",this.dolbyVision.style.visibility="hidden"}}),vui.widgets.TheaterMenuButton=new Class({Extends:vui.widgets.IconButton,name:"vui.widgets.TheaterMenuButton",activeHeight:0,setIconActive:function(){this.desc&&vui._.setAriaLabel(this.desc),this.elem&&this.elem.style&&(this.elem.style.backgroundPosition="center 100%")},setIconDefault:function(){this.elem&&this.elem.style&&(this.elem.style.backgroundPosition="center 0%")}}),vui.widgets.QualityMenuButton=new Class({Extends:vui.widgets.TheaterMenuButton,name:"vui.widgets.QualityMenuButton",initialize:function(e){this.parent(e),this.elem.style.position="static",this.width=window.vui.ResDef.TheaterControls.MENU_QTY_BTN_W,this.height=vui.vvPlatform.appFeatureEnabled()?window.vui.ResDef.TheaterControls.ICON_QTY_H_P34:window.vui.ResDef.TheaterControls.ICON_QTY_H,this.activeHeight=vui.vvPlatform.appFeatureEnabled()?window.vui.ResDef.TheaterControls.ICON_QTY_H_P34:window.vui.ResDef.TheaterControls.ICON_QTY_H,this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.elem.style.marginBottom=window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM+"px",this.elem.style.display="block"},init:function(e){this.elem.setAttribute("role","option"),this.desc=e.toUpperCase(),this.quality=e,this.imgSrc=vui.images["qty_"+this.quality],this.elem.style.background="url('"+this.imgSrc+"') 0 0 no-repeat",this.setIconDefault()},onAction:function(){vui.executeOnContainer(this,"switchToQuality",this.quality)}}),vui.widgets.CPMenuButton=new Class({Extends:vui.widgets.TheaterMenuButton,name:"vui.widgets.CPMenuButton",initialize:function(e){this.parent(e),this.elem.style.position="static",this.width=window.vui.ResDef.TheaterControls.MENU_CP_BTN_W,this.height=window.vui.ResDef.TheaterControls.MENU_CP_BTN_H,this.activeHeight=window.vui.ResDef.TheaterControls.ICON_QTY_H,this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.elem.style.marginTop=window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM+"px",this.elem.style.marginBottom=window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM+"px",this.elem.style.display="block"},init:function(e){this.elem.setAttribute("role","option"),this.setting=e,this.imgSrc=vui.images["family_mode_"+this.setting.toLowerCase()],this.elem.style.background="url('"+this.imgSrc+"') 0 0 no-repeat",this.desc="family play "+this.setting,this.setIconDefault()},onAction:function(){vui.executeOnContainer(this,"changeClearplaySetting",this.setting)}}),vui.widgets.CCMenuButton=new Class({Extends:vui.widgets.TheaterMenuButton,name:"vui.widgets.CCMenuButton",elemClassName:"theater_CCMenuButton",init:function(e){this.elem.style.position="static",this.elem.setAttribute("role","option"),this.languageObj=e,this.lang=e.languageCode||"off","en"!==this.lang&&"es"!==this.lang&&(this.lang="off");var t=vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode();this.imgSrc=vui.images[(t?"km_":"")+"cc_menu_"+this.lang]||vui.images.blank,this.desc={en:"English",es:"Spanish",off:"Off"}[this.lang],this.elem.style.background="url('"+this.imgSrc+"') 0 0 no-repeat",this.elem.style.height=window.vui.ResDef.TheaterControls.MENU_CC_ICON_H+"px",this.elem.style.marginTop=window.vui.ResDef.TheaterControls.MENU_CC_BTN_H-window.vui.ResDef.TheaterControls.MENU_CC_ICON_H+"px",this.activeHeight=window.vui.ResDef.TheaterControls.MENU_CC_ICON_H,this.setIconDefault()},onAction:function(){vui.executeOnContainer(this,"setCurrentSubtitle",this.languageObj)}}),vui.widgets.TheaterMenu=new Class({Extends:vui.widgets.Container,Implements:vui.widgets.BorderLayout,name:"vui.widgets.TheaterMenu",selectable:!1,thickness:8,fill:!0,imageTable:vui.images.TheaterMenuBorder,onBack:function(){vui.executeOnContainer(this.parentWidget,"closeMenu")},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"closeMenu")},onDirectionRight:function(){vui.executeOnContainer(this.parentWidget,"closeMenu")}}),vui.widgets.QualityMenu=new Class({Extends:vui.widgets.TheaterMenu,name:"vui.widgets.QualityMenu",elemClassName:"theater_QualityMenu",menuButtonClass:vui.widgets.QualityMenuButton,initialize:function(){this.parent(),this.elem.setAttribute("role","listbox"),this.elem.style.width=window.vui.ResDef.TheaterControls.MENU_QTY_W+"px",this.elem.style.background="#000",this.elem.style.paddingTop=window.vui.ResDef.TheaterControls.MENU_QTY_PAD_T+"px"},bind:function(e){this.detachAllChildren(),vui._.removeAllElements(this.elem);for(var t=0,i=0,s=e.length;i<s;i++){var n,a=new vui.widgets.QualityMenuButton(e[i]);t+=a.height+window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM||0,this.attachChild(a),i<s-1&&((n=document.createElement("div")).className="theater_QualityMenu_line",n.style.height=window.vui.ResDef.TheaterControls.MENU_QTY_BAR_H+"px",n.style.background="url('"+vui.images.menu_qty_line+"') center no-repeat",this.elem.appendChild(n),t+=window.vui.ResDef.TheaterControls.MENU_QTY_BAR_H+2*window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM+0)}t+=window.vui.ResDef.TheaterControls.MENU_QTY_PAD_T,this.elem.style.height=t+"px",2<e.length&&this.elem.addClass("withUhd"),this.pullUpIcon=document.createElement("div"),this.pullUpIcon.style.background="url('"+vui.images.pullup+"') 0 0 no-repeat",this.pullUpIcon.className="qualityPullUp",this.pullUpIcon.style.height=window.vui.ResDef.TheaterControls.ICON_PULLUP_H+"px",this.elem.appendChild(this.pullUpIcon)},show:function(){this.changeSelection(this.children[this.children.length-1]),this.parent()},setQualityLevels:function(e,t){var i=[];i.unshift(e);for(var s=0,n=t.length;s<n;s++)i.unshift(t[s]);this.bind(i)}}),vui.widgets.CCMenu=new Class({Extends:vui.widgets.TheaterMenu,name:"vui.widgets.CCMenu",elemClassName:"theater_CCMenu",menuButtonClass:vui.widgets.CCMenuButton,init:function(){this.elem.style.background="url('"+vui.images.cc_bg+"') bottom no-repeat",this.elem.setAttribute("role","listbox")},show:function(){this.parent(),this.currentSubtitle||this.changeSelection(this.children[this.children.length-1])},setSelectedSubtitle:function(e){""===e.languageCode&&(e={languageCode:"off"}),this.currentSubtitle=e,this.setSubtitles()},setSubtitles:function(e){if(e&&(this.subtitles=e),this.subtitles){for(var t,i,s=[{language:vui.strings.getText("THEATER_SUBTITLE_NONE"),languageCode:"off"}],n=this.subtitles.length,a=0;a<n;a++)this.currentSubtitle&&this.currentSubtitle.languageCode==this.subtitles[a].languageCode&&0,s.push(this.subtitles[a]),0;1<s.length&&(n=s.length,t=window.vui.ResDef.TheaterControls.MENU_CC_BTN_H,this.elem.style.height=t*n+"px",i=window.vui.ResDef.Theater.TC_T+window.vui.ResDef.TheaterControls.BTN_CC_T-t*n,this.elem.style.top=i+"px"),this.bind(s),this.changeSelection(s.length-1)}},bind:function(e){this.detachAllChildren();for(var t=0,i=e.length;t<i;t++){var s=new this.menuButtonClass(e[t]);this.attachChild(s)}}}),vui.widgets.CPMenu=new Class({Extends:vui.widgets.TheaterMenu,name:"vui.widgets.CPMenu",elemClassName:"theater_CPMenu",menuButtonClass:vui.widgets.CPMenuButton,init:function(){this.elem.style.width=window.vui.ResDef.TheaterControls.MENU_CP_BTN_W+"px",this.elem.style.background="black",this.elem.setAttribute("role","listbox")},show:function(){this.changeSelection(this.children[this.children.length-1]),this.parent()},setSelection:function(e){var t="ON"===e;vui.clearPlaySettings.setAvailable(t);var i="ON"===e.toUpperCase()?"OFF":"ON";this.bind([i,e])},bind:function(e){this.detachAllChildren(),vui._.removeAllElements(this.elem);for(var t=0,i=0,s=e.length;i<s;i++){var n=new vui.widgets.CPMenuButton(e[i]);t+=n.height+window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM||0,this.attachChild(n),t+=window.vui.ResDef.TheaterControls.MENU_CP_BTN_H+2*window.vui.ResDef.TheaterControls.MENU_QTY_MARGINBOTTOM+0}t+=window.vui.ResDef.TheaterControls.MENU_QTY_PAD_T,this.elem.style.height=t+"px";this.elem.style.top="610pxpx"}}),vui.widgets.TControlButton=new Class({Extends:vui.widgets.IconButton,elemClassName:"actionButton42Css",hasPullUp:!1,init:function(){this.height=window.vui.ResDef.TheaterControls.BTN_H,this.image=new Element("div",{styles:{position:"absolute"}}),this.setIconImage(),this.elem.appendChild(this.image),this.hasPullUp&&(this.pullUpIcon=document.createElement("div"),this.pullUpIcon.style.background="url('"+vui.images.pullup+"') 0 0 no-repeat",this.pullUpIcon.className="pullUp",this.pullUpIcon.style.top=this.pullUpTop+"px",this.pullUpIcon.style.left=this.pullUpLeft+"px",this.pullUpIcon.style.height=window.vui.ResDef.TheaterControls.ICON_PULLUP_H+"px",this.elem.appendChild(this.pullUpIcon)),this.activeHeight=this.imgHeight+0},setIconImage:function(){var e=this.imgSrc;this.image.style.width=this.imgWidth+"px",this.image.style.height=this.imgHeight+"px",this.image.style.top="0",this.image.style.left="0",vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&this.kmImgSrc&&(e=this.kmImgSrc),this.image.style.background="url('"+e+"') no-repeat",vui.getSelected()==this?this.setIconActive():this.setIconDefault()},setIconActive:function(){this.desc&&vui._.setAriaLabel(this.desc),this.image.style.backgroundPosition="0 -"+this.activeHeight+"px",this.hasPullUp&&this.pullUpIcon&&(this.pullUpIcon.style.backgroundPosition="0 -"+window.vui.ResDef.TheaterControls.ICON_PULLUP_H+"px")},setIconDefault:function(){this.image.style.backgroundPosition="0 0",this.hasPullUp&&this.pullUpIcon&&(this.pullUpIcon.style.backgroundPosition="0 0")},onAction:function(){vui.executeOnContainer(this.parentWidget,this.actionName),vui.executeOnContainer(this.parentWidget,"setUserActive")}}),vui.widgets.theaterBackButton=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_theaterBack_W,height:window.vui.ResDef.TheaterControls.ICON_theaterBack_H,name:"vui.widgets.theaterBackButton",actionName:"onBackButton",imgWidth:window.vui.ResDef.TheaterControls.ICON_theaterBack_W,imgHeight:window.vui.ResDef.TheaterControls.ICON_theaterBack_H,imgSrc:vui.images.backIcon,kmImgSrc:vui.images.km_backIcon,desc:"Back"}),vui.widgets.Rw15Button=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_RW15_W,height:window.vui.ResDef.TheaterControls.ICON_RW15_H,name:"vui.widgets.Rw15Button",actionName:"onRw15Button",imgWidth:window.vui.ResDef.TheaterControls.ICON_RW15_W,imgHeight:window.vui.ResDef.TheaterControls.ICON_RW15_H,imgSrc:vui.images.rw15Icon,desc:"Replay"}),vui.widgets.QualityButton=new Class({Extends:vui.widgets.TControlButton,name:"vui.widgets.QualityButton",width:window.vui.ResDef.TheaterControls.BTN_QTY_W,height:window.vui.ResDef.TheaterControls.BTN_QTY_H,hasPullUp:!0,pullUpLeft:window.vui.ResDef.TheaterControls.BTN_QTY_PU_L,pullUpTop:window.vui.ResDef.TheaterControls.BTN_QTY_PU_T,actionName:"onQualityButton",imgWidth:window.vui.ResDef.TheaterControls.ICON_QTY_W,imgHeight:vui.vvPlatform.appFeatureEnabled()?window.vui.ResDef.TheaterControls.ICON_QTY_H_P34:window.vui.ResDef.TheaterControls.ICON_QTY_H,imgSrc:vui.images.qty_hdx,setQuality:function(e){this.imgSrc=vui.images["qty_"+e],this.desc="Format. Currently: "+e.toUpperCase(),this.setIconImage()}}),vui.widgets.ChaptersButton=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_CHAPTER_WIDTH,height:window.vui.ResDef.TheaterControls.ICON_CHAPTER_HEIGHT,name:"vui.widgets.ChaptersButton",actionName:"goToChapters",imgWidth:window.vui.ResDef.TheaterControls.ICON_CHAPTER_WIDTH,imgHeight:window.vui.ResDef.TheaterControls.ICON_CHAPTER_HEIGHT,imgSrc:vui.images.chaptersIcon,kmImgSrc:vui.images.km_chaptersIcon,desc:"Chapters"}),vui.widgets.RewindButton=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_RW_WIDTH,height:window.vui.ResDef.TheaterControls.ICON_RW_HEIGHT,name:"vui.widgets.RewindButton",actionName:"onRewindButton",imgWidth:window.vui.ResDef.TheaterControls.ICON_RW_WIDTH,imgHeight:window.vui.ResDef.TheaterControls.ICON_RW_HEIGHT,imgSrc:vui.images.rewindIcon,kmImgSrc:vui.images.km_rwIcon,desc:"Rewind"}),vui.widgets.PlayButton=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_PLAY_WIDTH,height:window.vui.ResDef.TheaterControls.ICON_PLAY_HEIGHT,name:"vui.widgets.PlayButton",actionName:"onPlayButton",imgWidth:window.vui.ResDef.TheaterControls.ICON_PLAY_WIDTH,imgHeight:window.vui.ResDef.TheaterControls.ICON_PLAY_HEIGHT,imgSrc:vui.images.playIcon,kmImgSrc:vui.images.km_play,setPlay:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?this.imgSrc=vui.images.km_play:this.imgSrc=vui.images.playIcon,this.state="play",this._setBG()},setPause:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?this.imgSrc=vui.images.km_pause:this.imgSrc=vui.images.pauseIcon,this.state="pause",this._setBG()},_setBG:function(){this.image.style.background="url('"+this.imgSrc+"') 0 0 no-repeat",vui.getSelected()==this?this.image.style.backgroundPosition="0 -"+this.imgHeight+"px":this.image.style.backgroundPosition="0 0"},onSelect:function(){this.parent();var e="";"pause"===this.state?e="Currently playing. Click to pause":"play"===this.state&&(e="Currently paused. Click to play"),vui._.setAriaLabel(e)}}),vui.widgets.ForwardButton=new Class({Extends:vui.widgets.TControlButton,width:window.vui.ResDef.TheaterControls.ICON_FF_WIDTH,height:window.vui.ResDef.TheaterControls.ICON_FF_HEIGHT,name:"vui.widgets.ForwardButton",actionName:"onForwardButton",imgWidth:window.vui.ResDef.TheaterControls.ICON_FF_WIDTH,imgHeight:window.vui.ResDef.TheaterControls.ICON_FF_HEIGHT,imgSrc:vui.images.forwardIcon,kmImgSrc:vui.images.km_ff,desc:"Fast Forward"}),vui.widgets.TCCButton=new Class({Extends:vui.widgets.TControlButton,name:"vui.widgets.TCCButton",width:window.vui.ResDef.TheaterControls.ICON_CC_W,height:window.vui.ResDef.TheaterControls.ICON_CC_H,actionName:"onCCButton",selectable:!1,imgWidth:window.vui.ResDef.TheaterControls.ICON_CC_W,imgHeight:window.vui.ResDef.TheaterControls.ICON_CC_IMG_H,imgSrc:vui.images.ccIcon,init:function(){this.parent(),this.hide(),this.desc="Closed Captions"},setSubtitle:function(e){var t=e.languageCode||"cc",i=vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode();"en"===t||"es"===t?(this.imgSrc=vui.images[(i?"km_":"")+t+"Icon"],this.desc="Closed Captions. Currently: "+{en:"English",es:"Spanish"}[t]):(this.imgSrc=vui.images[(i?"km_":"")+"ccIcon"],this.desc="Closed Captions. Currently: off"),this.setIconImage()}}),vui.widgets.CPButton=new Class({Extends:vui.widgets.TControlButton,name:"vui.widgets.CPButton",width:window.vui.ResDef.TheaterControls.ICON_CC_W,height:window.vui.ResDef.TheaterControls.ICON_CC_H,actionName:"onCPButton",selectable:!1,imgWidth:window.vui.ResDef.TheaterControls.MENU_CP_BTN_W,imgHeight:window.vui.ResDef.TheaterControls.MENU_CP_BTN_H,imgSrc:vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()?vui.images.family_mode_on:vui.images.family_mode_icon,hasPullUp:!0,pullUpLeft:window.vui.ResDef.TheaterControls.BTN_FP_PU_L,pullUpTop:window.vui.ResDef.TheaterControls.BTN_FP_PU_T,init:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(this.hasPullUp=!1);var e=vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()?"on":"icon";this.pullUpLeft=88,this.parent(),this.hide(),this.desc="Family Play Control",this.elem.children[0].style.background="url('"+vui.images["family_mode_"+e]+"') 0 0 no-repeat",this.elem.children[0].style.left="on"==e?"0":"10px"},setClearplay:function(e){var t=vui.clearPlaySettings.getEnabled()?"on":"icon";this.elem.children[0].style.background="url('"+vui.images["family_mode_"+t]+"') 0 0 no-repeat",this.elem.children[0].style.left="on"==t?"0":"10px",this.desc="Family Play "+e.toLowerCase()},setIconActive:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()||this.parent()},onAction:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()||this.parent()}}),vui.widgets.Timeline=new Class({Extends:vui.widgets.Base,mode:"PLAY",init:function(){var e=this.elem;this.timelineWidth=window.vui.ResDef.TheaterControls.WIDTH,this.elem.style.width=window.vui.ResDef.TheaterControls.WIDTH,this.elem.style.height=window.vui.ResDef.TheaterControls.TL_HEIGHT;var t=new Element("div",{styles:{position:"absolute",background:"url('"+vui.images.timelineBG+"') no-repeat",border:"0 solid #484848",width:this.timelineWidth+"px",height:"8px",top:"0",left:"0"}});e.appendChild(t),this.timelineProgress=document.createElement("div"),this.timelineProgress.className="timelineProgress",this.timelineProgress.style.background=vui.familyModel.getIsInKidsMode()?vui.Theme.kidsMode.scrubber+" left repeat-x":vui.Theme.scrubber+" left repeat-x",e.appendChild(this.timelineProgress),this.curTime=new Element("div",{class:"font16",styles:{position:"absolute",width:"48px",height:"16px",top:"12px",left:"8px"}}),e.appendChild(this.curTime),this.totalTimeText=new Element("div",{class:"font16",styles:{position:"absolute",width:"48px",height:"16px",top:"12px",right:"8px",textAlign:"right"}}),e.appendChild(this.totalTimeText)},setTotalTime:function(e){this.totalTime=e},setCurrentTime:function(e){var t=Math.round(e/this.totalTime*this.timelineWidth)||1;this.timelineProgress.style.width=t+"px"}}),vui.widgets.TheaterControlsButtons=new Class({Extends:vui.widgets.HorizontalContainer,isFirstSelect:!1,width:792,height:66,selectorType:"none",init:function(){this.elem.style.width=window.vui.ResDef.TheaterControls.WIDTH+"px",this.elem.style.height=window.vui.ResDef.TheaterControls.HEIGHT-window.vui.ResDef.TheaterControls.BTN_TOP+"px",this.elem.style.top=window.vui.ResDef.TheaterControls.BTN_TOP+"px",this.elem.style.backgroundColor="black",this.backButton=new vui.widgets.theaterBackButton,this.backButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_BACK_T+"px",this.backButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_BACK_L+"px",this.attachChild(this.backButton),this.rw15Button=new vui.widgets.Rw15Button,this.rw15Button.elem.style.top=window.vui.ResDef.TheaterControls.BTN_RW15_T+"px",this.rw15Button.elem.style.left=window.vui.ResDef.TheaterControls.BTN_RW15_L+"px",this.attachChild(this.rw15Button),this.qualityButton=new vui.widgets.QualityButton,this.qualityButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_QTY_L+"px",this.qualityButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_QTY_T+"px",this.attachChild(this.qualityButton),this.chaptersButton=new vui.widgets.ChaptersButton,this.chaptersButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_CHAPTER_TOP+"px",this.chaptersButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_CHAPTER_LEFT+"px",this.attachChild(this.chaptersButton),this.rewindButton=new vui.widgets.RewindButton,this.rewindButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_RW_TOP+"px",this.rewindButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_RW_LEFT+"px",this.attachChild(this.rewindButton),this.playButton=new vui.widgets.PlayButton,this.playButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_PLAY_TOP+"px",this.playButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_PLAY_LEFT+"px",this.attachChild(this.playButton),this.forwardButton=new vui.widgets.ForwardButton,this.forwardButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_FF_TOP+"px",this.forwardButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_FF_LEFT+"px",this.attachChild(this.forwardButton),this.ccButton=new vui.widgets.TCCButton,this.ccButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_CC_L+"px",this.ccButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_CC_T+"px",this.ccButton.elem.style.height=window.vui.ResDef.TheaterControls.ICON_CC_H+"px",this.ccButton.elem.style.width=window.vui.ResDef.TheaterControls.ICON_CC_W+"px",this.ccButton.elem.style.overflow="hidden",this.attachChild(this.ccButton),vui.gConnectionInstance.isClearplayEnabled()&&(this.cpButton=new vui.widgets.CPButton,this.cpButton.elem.style.left=window.vui.ResDef.TheaterControls.BTN_CC_L+76+"px",this.cpButton.elem.style.top=window.vui.ResDef.TheaterControls.BTN_CC_T+"px",this.cpButton.elem.style.height=window.vui.ResDef.TheaterControls.MENU_CP_BTN_H+"px",this.cpButton.elem.style.width=window.vui.ResDef.TheaterControls.MENU_CP_BTN_W+"px",this.cpButton.elem.style.overflow="hidden",this.attachChild(this.cpButton))},setPlayButtonPlay:function(){this.playButton.setPlay()},setPlayButtonPause:function(){this.playButton.setPause()},setQualityButton:function(e){this.qualityButton.setQuality(e)},showQualityButton:function(){this.qualityButton.selectable=!0,this.qualityButton.show()},hideQualityButton:function(){this.qualityButton.selectable=!1,this.qualityButton.hide()},hideChaptersButton:function(){this.chaptersButton.selectable=!1,this.chaptersButton.hide()},setSubtitleButton:function(e){this.ccButton.setSubtitle(e)},setCPButton:function(e){this.cpButton.setClearplay(e)},showCPButton:function(){this.cpButton.selectable=!0,vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(this.cpButton.selectable=!1),this.cpButton.show()},hideCPButton:function(){this.cpButton.selectable=!1,this.cpButton.hide()},showSubtitleButton:function(){this.ccButton.selectable=!0,this.ccButton.show()},hideSubtitleButton:function(){this.ccButton.selectable=!1,this.ccButton.hide()},hideSeekButtons:function(){this.forwardButton.selectable=!1,this.forwardButton.hide(),this.rewindButton.selectable=!1,this.rewindButton.hide(),this.rw15Button.selectable=!1,this.rw15Button.hide()},onSelect:function(){this.isFirstSelect||(this.isFirstSelect=!0,vui.select(this.playButton)),vui.executeOnContainer(this.parentWidget,"onSelect")}}),vui.widgets.TimelineText=new Class({Extends:vui.widgets.Container,elemClassName:"theater_timelineText",init:function(){this.elem.style.top=window.vui.ResDef.TheaterControls.TIMELINE_TEXT_T+"px",this.elem.style.left=window.vui.ResDef.TheaterControls.TIMELINE_TEXT_L+"px",this.currentTimeText=document.createElement("div"),this.currentTimeText.className="theater_currentTimeText",this.currentTimeText.style.top="0",this.currentTimeText.style.left=window.vui.ResDef.TheaterControls.CURRENT_TIME_L+"px",this.elem.appendChild(this.currentTimeText),this.timeText_slash=document.createElement("div"),this.timeText_slash.className="theater_timeText_slash",this.timeText_slash.style.top="0",this.timeText_slash.style.left=window.vui.ResDef.TheaterControls.TIMELINE_TEXT_SLASH_L+"px",this.elem.appendChild(this.timeText_slash),this.totalTimeText=document.createElement("div"),this.totalTimeText.className="theater_totalTimeText",this.totalTimeText.style.top="0",this.totalTimeText.style.left=window.vui.ResDef.TheaterControls.TOTAL_TIME_L+"px",this.elem.appendChild(this.totalTimeText),this.adTimeText=document.createElement("div"),this.adTimeText.className="theater_adTimeText",this.adTimeText.style.top="0",this.adTimeText.style.left=window.vui.ResDef.TheaterControls.TOTAL_TIME_L+"px",this.adTimeText.style.display="none",this.adTimeText.style.textShadow="0 2px 2px #A0A0A0",this.elem.appendChild(this.adTimeText),this.totalAdsCount=null,this.adNumber=null},setTotalTime:function(e){e&&(this.totalTime=e,this.totalAdsCount||(vui._.innerHTML(this.totalTimeText,timeAsString(e)),vui._.innerHTML(this.timeText_slash,"/")))},setCurrentTime:function(e){var t,i;this.totalTime&&(this.totalAdsCount?((t=this.totalTime-e)<0&&(t=0),i="Ad "+this.adNumber+" of "+this.totalAdsCount+"&nbsp;&nbsp;&nbsp;&nbsp;"+timeAsString(t,"mm:ss"),vui._.innerHTML(this.adTimeText,i)):vui._.innerHTML(this.currentTimeText,timeAsString(e)))},setAdvertsInfo:function(e,t){this.totalAdsCount=t,this.adNumber=e,this.adTimeText.style.display="block",this.totalTimeText.style.display="none",this.timeText_slash.style.display="none",this.timeText_slash.style.display="none"}}),vui.widgets.TheaterControls=new Class({Extends:vui.widgets.Container,selectable:!1,initialize:function(e){this.baseLayer=e,this.parent()},init:function(){this.elem.style.width=window.vui.ResDef.TheaterControls.WIDTH+"px",this.elem.style.height=window.vui.ResDef.TheaterControls.HEIGHT+"px",this.buttons=new vui.widgets.TheaterControlsButtons,this.attachChild(this.buttons),this.timelineText=new vui.widgets.TimelineText,this.elem.appendChild(this.timelineText.elem),this.modeIcon=document.createElement("div"),this.modeIcon.className="theater_mode_icon",this.modeIcon.style.top=window.vui.ResDef.TheaterControls.MODE_T+"px",this.modeIcon.style.left=window.vui.ResDef.TheaterControls.MODE_L+"px",this.elem.appendChild(this.modeIcon),this.timeline=new vui.widgets.Timeline,this.timeline.elem.style.left="0",this.timeline.elem.style.top="0",this.attachChild(this.timeline),this.qualityMenu=new vui.widgets.QualityMenu,this.qualityMenu.hide(),this.attachChild(this.qualityMenu,this.baseLayer.elem),this.ccMenu=new vui.widgets.CCMenu,this.ccMenu.hide(),this.attachChild(this.ccMenu,this.baseLayer.elem),vui.gConnectionInstance.isClearplayEnabled()&&(this.cpMenu=new vui.widgets.CPMenu,vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()?this.cpMenu.bind(["OFF","ON"]):this.cpMenu.bind(["ON","OFF"]),this.cpMenu.hide(),this.ccclearplaynotice=new vui.widgets.CCClearPlayNotice,"off"===vui.CCModel.ccSelected&&this.ccclearplaynotice.hide(),this.attachChild(this.cpMenu,this.baseLayer.elem),this.attachChild(this.ccclearplaynotice,this.baseLayer.elem))},onQualityButton:function(){this.qualityMenu.show(),this.buttons.selectable=!1,this.qualityMenu.selectable=!0,this.changeSelection(this.qualityMenu)},onCCButton:function(){this.ccMenu.show(),this.buttons.selectable=!1,this.ccMenu.selectable=!0,this.changeSelection(this.ccMenu)},onCPButton:function(){this.cpMenu.show(),this.buttons.selectable=!1,this.cpMenu.selectable=!0,this.changeSelection(this.cpMenu),vui.executeOnContainer(this.parentWidget,"onCPButton")},closeMenu:function(){this.qualityMenu.hide(),this.qualityMenu.selectable=!1,this.ccMenu.hide(),this.ccMenu.selectable=!1,vui.gConnectionInstance.isClearplayEnabled()&&(this.cpMenu.hide(),this.cpMenu.selectable=!1),this.buttons.selectable=!0,this.changeSelection(this.buttons)},setMode:function(e){var t;this.modeIcon.style.background="",e&&(-1!==e.indexOf("FAST_FORWARD")||-1!==e.indexOf("REWIND")||-1!==e.indexOf("SCROLLING"))||vui.getPlayer().isPaused()?this.buttons.setPlayButtonPlay():this.buttons.setPlayButtonPause(),e&&(this.modeIcon.style.background="url('"+vui.images["mode_"+e]+"') no-repeat",vui._.setAriaLabel(e.replace(/_/g," "))),this.readoutEvery5Second&&(clearInterval(this.readoutEvery5Second),this.readoutEvery5Second=null),!e||-1===e.indexOf("FAST_FORWARD")&&-1===e.indexOf("REWIND")||(t=e.replace(/_/g," "),this.readoutEvery5Second=setInterval(function(){if(vui.getPlayer().state===vui.getPlayer().STOPPED)return clearInterval(this.readoutEvery5Second),void(this.readoutEvery5Second=null);20<(t+=" ").length&&(t=t.trim()),vui._.setAriaLabel(t)}.bind(this),5e3))},setPosition:function(e){var t=parseInt(e.currentTime,10),i=parseInt(e.totalTime,10);this.timelineText.setTotalTime(i),this.timeline.setTotalTime(i),i<t&&(t=i),this.timelineText.setCurrentTime(t),this.timeline.setCurrentTime(t)},setQualityLevels:function(e,t){!t||t.length<1?this.buttons.hideQualityButton():(this.buttons.setQualityButton(e),this.qualityMenu.setQualityLevels(e,t),this.buttons.showQualityButton())},setContentType:function(e){"advert"===e&&(this.buttons.hideChaptersButton(),this.buttons.hideSeekButtons(),this.timeline.hide(),this.timelineText.elem.style.top=window.vui.ResDef.TheaterControls.TIMELINE_TEXT_T_AD+"px")},setAdvertsInfo:function(e,t){this.timelineText.setAdvertsInfo(e,t)},hideChapters:function(){this.buttons.hideChaptersButton()},setAvailableSubtitles:function(e){!e||e.length<1?this.buttons.hideSubtitleButton():(this.ccMenu.setSubtitles(e),this.buttons.showSubtitleButton())},onBackButton:function(){vui.executeOnContainer(this.parentWidget,"onStop")},onRw15Button:function(){vui.executeOnContainer(this.parentWidget,"onRw15")},onRewindButton:function(){vui.executeOnContainer(this.parentWidget,"onRW")},onPlayButton:function(){vui.executeOnContainer(this.parentWidget,"onPlayPause")},onForwardButton:function(){vui.executeOnContainer(this.parentWidget,"onFF")},switchToQuality:function(e){this.closeMenu(),vui.executeOnContainer(this.parentWidget,"switchToQuality",e)},setCurrentSubtitle:function(e,t){this.ccMenu.setSelectedSubtitle(e),this.closeMenu(),alert("setCurrentSubtitle:"+JSON.encode(e)),this.buttons.setSubtitleButton(e),t||vui.executeOnContainer(this.parentWidget,"setCurrentSubtitle",e),this.resetCCCnotice()},hide:function(){this.parent(),this.closeMenu(),controller.baseLayer.currentPage.buffering&&"block"!==controller.baseLayer.currentPage.buffering.elem.style.display&&vui._.setAriaLabel("")},showClearplay:function(){this.buttons.showCPButton(),this.resetCCCnotice()},changeClearplaySetting:function(e){this.closeMenu(),alert("changing clearplay setting: "+e),vui.executeOnContainer(this.parentWidget,"changeClearplay",{setting:e,cb:function(){this.buttons.setCPButton(e)}.bind(this)})},setClearplaySetting:function(e){this.cpMenu.setSelection(e),this.resetCCCnotice()},resetCCCnotice:function(){vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings.getEnabled()&&"off"!==vui.CCModel.ccSelected?this.ccclearplaynotice.show():this.ccclearplaynotice&&this.ccclearplaynotice.hide()}}),vui.widgets.KidsModeTheaterControls=new Class({Extends:vui.widgets.TheaterControls,name:"vui.widgets.KidsModeTheaterControls",init:function(){this.parent(),this.buttons.detachChild(this.buttons.rw15Button),this.buttons.detachChild(this.buttons.qualityButton)},hideSeekButtons:function(){this.forwardButton.selectable=!1,this.forwardButton.hide(),this.rewindButton.selectable=!1,this.rewindButton.hide()},onRw15Button:function(){},onQualityButton:function(){},setQualityLevels:function(){},hideFamilyplayButton:function(){this.buttons.hideCPButton()}}),vui.widgets.Buffering=new Class({Extends:vui.widgets.Base,name:"vui.widgets.Buffering",init:function(){var e=this.elem;this.loadingBackgroundTop=window.vui.ResDef.Theater.BUFFERING.BG_T,this.loadingTextTop=window.vui.ResDef.Theater.BUFFERING.TEXT_T,this.loadingSpinnerTop=parseInt(window.vui.ResDef.Theater.BUFFERING.SPINNER_T,10),this.loadingSpinnerLeft=parseInt(window.vui.ResDef.Theater.BUFFERING.MS_L-window.vui.ResDef.Theater.BUFFERING.SPINNER_W,10),this.movedSpinnerLeft=parseInt(window.vui.ResDef.Theater.BUFFERING.IMG_L-window.vui.ResDef.Theater.BUFFERING.SPINNER_W,10),this.avodSpinnerTop=parseInt((window.vui.ResDef.SCREEN_HEIGHT-window.vui.ResDef.Theater.BUFFERING.AVOD_SPINNER_H)/2,10),this.avodSpinnerLeft=parseInt((window.vui.ResDef.SCREEN_WIDTH-window.vui.ResDef.Theater.BUFFERING.AVOD_SPINNER_W)/2,10),e.id="buffering",e.style.left="0",e.style.top="0",e.style.width=window.vui.ResDef.Theater.BUFFERING.ROOT_W+"px",e.style.height=window.vui.ResDef.Theater.BUFFERING.ROOT_H+"px",e.style.backgroundColor="transparent",e.style.display="none",this.scene=document.createElement("img"),this.scene.className="buffering_scene",e.appendChild(this.scene);var t=document.createElement("div");t.id="bufferingPoster",t.style.position="absolute",t.style.top=window.vui.ResDef.Theater.BUFFERING.IMG_T+"px",t.style.left=window.vui.ResDef.Theater.BUFFERING.IMG_L+"px",t.style.width=window.vui.ResDef.Theater.BUFFERING.IMG_W+"px",t.style.height=window.vui.ResDef.Theater.BUFFERING.IMG_H+"px",t.style.visibility="visible",e.appendChild(t),this.poster=t,this.posterImg=document.createElement("img"),this.posterImg.width=window.vui.ResDef.Theater.BUFFERING.IMG_W,this.posterImg.height=window.vui.ResDef.Theater.BUFFERING.IMG_H,this.poster.appendChild(this.posterImg);var i=document.createElement("div");(this.ms=i).id="video_status",i.style.position="absolute",i.style.left=window.vui.ResDef.Theater.BUFFERING.IMG_L+"px",i.style.top=this.loadingTextTop+"px",i.style.width=window.vui.ResDef.Theater.BUFFERING.IMG_W+"px",i.style.height=window.vui.ResDef.Theater.BUFFERING.MS_H+"px",i.style.textAlign="center",i.className="headerText",i.appendChild(document.createTextNode("")),e.appendChild(i);var s=new vui.widgets.Spinner;(this.spinner=s).elem.style.top=this.loadingSpinnerTop+"px",s.elem.style.left=this.loadingSpinnerLeft+125+"px";var n=new vui.widgets.AvodSpinner;(this.avodSpinner=n).elem.style.left=this.avodSpinnerLeft+"px",n.elem.style.top=this.avodSpinnerTop+"px",this.attachChild(s)},setPosterUrl:function(e,t){var i;this.posterImg.src=e,"episode"===t.type&&((i=new Element("div",{class:"posterBlockOverlayBuffering fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(t),this.poster.appendChild(i))},show:function(e,t,i){this.poster.style.display="none",this.scene.style.display="none",e?(this.spinner.elem.style.top=this.loadingSpinnerTop+"px",this.ms.style.top=this.loadingTextTop+"px",this.elem.style.backgroundColor="#000000",i?(this.scene.src="",this.scene.src=i,this.poster.style.display="none",this.scene.style.display="block"):(this.poster.style.display="block",this.scene.style.display="none"),""===this.posterImg.src&&(this.poster.style.display="none")):(this.spinner.elem.style.top=this.loadingSpinnerTop-window.vui.ResDef.Theater.BUFFERING.PADDING+"px",this.ms.style.top=this.loadingTextTop-window.vui.ResDef.Theater.BUFFERING.PADDING+"px",this.poster.style.display="none",this.elem.style.backgroundColor="transparent"),this.elem.style.display="block";var s=vui.getPlayer();this._checkStartupTimerHandle&&clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=window.setTimeout(function(){this._checkStartupTimerHandle=null,s.state!==s.PREPARING&&s.state!==s.BUFFERING||(alert("Error still not playing after max_startup_time ","error"),s.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.TIMEOUT))}.bind(this),s.html5Player.MAX_STARTUP_TIME),vui._.setAriaLabel("Loading")},setText:function(e){this.ms.innerHTML=e},moveSpinner:function(){this.spinner.elem.style.left=this.movedSpinnerLeft+175+"px"},resetSpinnerPosition:function(){this.spinner.elem.style.left=this.loadingSpinnerLeft+125+"px"},hide:function(){this.elem.style.display="none",this.spinner.stop(),this.avodSpinner.stop(),delete this.poster.onload,this._checkStartupTimerHandle&&clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=null},setDefaultSpinner:function(){this.detachChild(this.avodSpinner),this.attachChild(this.spinner),this.spinner.spin()},setAdvertAnimation:function(){this.detachChild(this.spinner),this.attachChild(this.avodSpinner),this.avodSpinner.spin()}}),vui.widgets.ChapterThumbnail=new Class({Extends:vui.widgets.IconButton,name:"vui.widgets.ChapterThumbnail",chapterBG:vui.images.chapterBG,selectorType:"none",chapterNum:null,init:function(){var e=this.elem;e.id="chapterThumbnail",e.style.width=window.vui.ResDef.TheaterChapters.IMG_W+"px",e.style.height=window.vui.ResDef.TheaterChapters.IMG_H+window.vui.ResDef.TheaterChapters.TXT_H+"px",e.style.display="none",vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(this.isInKidsMode=!0);var t=document.createElement("img");t.className="chapterThumbnailImage",t.style.width=window.vui.ResDef.TheaterChapters.IMG_W+"px",t.style.height=window.vui.ResDef.TheaterChapters.IMG_H+"px",t.style.backgroundColor="black",t.width=window.vui.ResDef.TheaterChapters.IMG_W,t.height=window.vui.ResDef.TheaterChapters.IMG_H,this.thumbnailImage=t,e.appendChild(t),this.txt=document.createElement("div"),this.txt.className="chapterThumbnailText",this.txt.style.position="absolute",this.txt.style.top=window.vui.ResDef.TheaterChapters.IMG_H+"px",this.txt.style.left="0",this.txt.style.width=window.vui.ResDef.TheaterChapters.TXT_W+"px",this.txt.style.height=window.vui.ResDef.TheaterChapters.TXT_H+"px",this.txt.style.backgroundColor=this.isInKidsMode?vui.Theme.kidsMode.chapterButtonColor:vui.Theme.primaryDefaultButtonColor,e.appendChild(this.txt);var i=document.createElement("div");i.className="chaptersChText",this.chapterNo=i,this.txt.appendChild(i);var s=document.createElement("div");s.className="chaptersTimeText",this.thumbnailTime=s,this.txt.appendChild(s),this.setSelectable(!1)},onAction:function(){params={chunk:this.chunk,chapterNum:this.chapterNum},vui.executeOnContainer(this.parentWidget,"onChapterClick",params)},bind:function(e,t,i,s){this.chunk=e,this.thumbnailImage.src=i,this.thumbnailTime.innerHTML=timeAsString(t),this.chapterNo.innerHTML=vui.strings.getText("PLAYBACK_CHAPTER_NUMBER",s),this.chapterNum=s,this.elem.style.display="block"},onSelect:function(){this.parentWidget.active&&vui._.setAriaLabel("Chapter "+this.chapterNum+". "+this.thumbnailTime.innerHTML),this.parent()},setIconActive:function(){this.elem.style.borderStyle="solid",this.elem.style.borderWidth="2px",this.elem.style.borderColor=this.isInKidsMode?vui.Theme.kidsMode.activeBorderColor:vui.Theme.primarySelectedButtonColor,this.txt.style.backgroundColor=this.isInKidsMode?vui.Theme.kidsMode.activeBorderColor:"#FFFFFF",this.chapterNo.style.color="#000000",this.thumbnailTime.style.color="#000000"},setIconDefault:function(){this.elem.style.borderStyle="solid",this.elem.style.borderWidth="0",this.elem.style.borderColor=vui.Theme.primarySelectedButtonColor,this.txt.style.backgroundColor=this.isInKidsMode?vui.Theme.kidsMode.chapterButtonColor:vui.Theme.primaryDefaultButtonColor,this.chapterNo.style.color="#FFFFFF",this.thumbnailTime.style.color="#FFFFFF"}}),vui.widgets.Chapters=new Class({Extends:vui.widgets.Container,name:"vui.widgets.Chapters",selectable:!1,init:function(){this.active=!1,this.layout={type:"vertical",cols:5},this.elem.id="chaptersMenu",this.elem.style.display="none",this.thumbs=[],this.maxNumToDisplay=15;for(var e=0;e<3;e++)for(var t=0;t<5;t++){var i=new vui.widgets.ChapterThumbnail,s=window.vui.ResDef.TheaterChapters.IMG_W,n=window.vui.ResDef.TheaterChapters.IMG_H+window.vui.ResDef.TheaterChapters.TXT_H;i.elem.style.top=e*(n+window.vui.ResDef.TheaterChapters.THUMB_PAD)+"px",i.elem.style.left=t*(s+window.vui.ResDef.TheaterChapters.THUMB_PAD)+"px",this.thumbs.push(i),this.attachChild(i)}this.addEvent("beforeOnDirectionDown",function(){10<=this.selected&&vui.executeOnContainer(this.parentWidget,"onBack")}.bind(this))},show:function(){this.active=!0,this.parent();var e,t,i=vui.getPlayer(),s=i.getCurrentChunk();if(this.selectedChunk=null,this.timestamps)for(var n=0;n<this.numToDisplay;n++)this.thumbs[n].setSelectable(!0),(!this.selectedChunk&&!this.thumbs[n+1]||!this.selectedChunk&&s<this.thumbs[n+1].chunk)&&(this.selectedChunk=!0,vui.select(this.thumbs[n]));else{this.timestamps=i.timestamps,e=i.data.location?i.data.location[0]:i.data,this.thumbnailsBaseUri=e.thumbnailsBaseUri,this.thumbnailsUriSuffix=e.thumbnailsUriSuffix||"",t=this.timestamps.length<this.maxNumToDisplay?this.timestamps.length:this.maxNumToDisplay,this.numToDisplay=t;for(var a=this.timestamps.length/t,n=0;n<t;n++){var o=Math.floor(n*a),r=Math.floor((n+1)*a),l=this.thumbnailsBaseUri+"/"+o+".jpg"+this.thumbnailsUriSuffix,u=this.timestamps[o],d=this.thumbs[n];d.bind(o,u,l,n+1),d.setSelectable(!0),!this.selectedChunk&&s<r&&(this.selectedChunk=!0,vui.select(d))}}},setAllBGUnselected:function(){for(var e=0;e<this.numToDisplay;e++)this.thumbs[e].setBGUnselected()},hide:function(){this.active=!1,this.parent(),this.selectedChunk=null;for(var e=0;e<this.numToDisplay;e++)this.thumbs[e].setSelectable(!1)},clear:function(){delete this.timestamps}}),vui.widgets.QualityDialog=new Class({Extends:vui.widgets.Container,name:"vui.widgets.QualityDialog",init:function(e,t,s){var n=this.elem;n.id="qualityDialog",n.className="quality_downgrade_dialog",n.style.display="none";var a=document.createElement("img");a.id="qualityDialogPlacard",a.className="quality_dialog_placard",a.src=e,n.appendChild(a);var o={dialogBoxClassName:"downgrade_quality_dialog_box"};o.title=vui.strings.getText("QUALITY_DIALOG_IT_APPEARS_YOU",t.toUpperCase()),this.ariaLabel=vui.strings.getText("QUALITY_DIALOG_IT_APPEARS_YOU",t.toUpperCase()),this.dialogBox=new vui.widgets.OverlayDialogBox(o),this.attachChild(this.dialogBox),this.buttons=[];var r=vui.strings.getTransformedText("QUALITY_DIALOG_CONTINUE_X",t.toUpperCase());for(this.buttons.push({name:"same",label:r,desc:this.ariaLabel+". "+r}),i=0;i<s.length;i++){var l=s[i];this.buttons.push({name:l,label:vui.strings.getTransformedText("QUALITY_DIALOG_SWITCH_TO_X",l.toUpperCase())})}},onButtonEvent:function(e){vui.executeOnContainer(this,"switchToQuality",e.name)},show:function(){this.parent(),this.selectable=!0,this.dialogBox.setButtons(this.buttons,{type:"vertical"}),vui._.setAriaLabel(this.ariaLabel+". "+this.buttons[0].label)},hide:function(){this.parent(),this.selectable=!1}}),vui.promo={},vui.promo._initState={callbacks:[],initialized:!1},vui.promo._promoData={},vui.promo._promotedContent=[],vui.promo._promoReasonsPriority=["activation","accountCreation","uvAccount","firstTimePaymentMethodCreate"],vui.promo.notifyOnInit=function(e){vui.promo._initState.callbacks.push(e)},vui.promo.isInitialized=function(){return vui.promo._initState.initialized},vui.promo._notifyInitialized=function(){if(vui.promo._initState.initialized=!0,vui.promo._initState.callbacks)for(var e=0;e<vui.promo._initState.callbacks.length;e++)callback();delete vui.promo._initState.callbacks},vui.promo.buildPromo=function(e){if(e&&"promoDefinitionList"==e._type){var t=e.promoDefinition;if(t)for(var i=t.length,s=0;s<vui.promo._promoReasonsPriority.length;s++)for(var n=vui.promo._promoReasonsPriority[s],a=0;a<i;a++)if(t[a].promoReason==n)return vui.promo._promoData=t[a],void vui.promo.setPromotedContent()}},vui.promo.refresh=function(s){var e={_type:"accountSetupPromoDefinitionGet",accountId:vui.account.getAccountId()};return vui.getModel().doQuery(e,function(e,t,i){i&&"promoDefinitionList"==i._type?vui.promo.buildPromo(i):alert("Failed to get promo data: "+JSON.encode(i)),s(t)})},vui.promo.setPromotedContent=function(){if(vui.promo._promoData&&vui.promo._promoData.promoDefinitionPurchaseDetails){var e=vui.promo._promoData.promoDefinitionPurchaseDetails[0];if(e&&e.promoDefinitionPurchaseDetail[0]){var t=e.promoDefinitionPurchaseDetail[0].contentFilters;if(t)for(var i=t[0].contentId,s=0;s<i.length;s++)vui.promo._promotedContent[s]={},vui.promo._promotedContent[s].contentId=[i[s]]}}},vui.promo.getPromotedContent=function(){return vui.promo._promotedContent},vui.promo.getPromoType=function(){return vui.promo._promoData&&vui.promo._promoData.promoType},vui.promo.getPromoDescription=function(){return vui.promo._promoData&&vui.promo._promoData.description},vui.promo.getPromoDescription2=function(){return vui.promo._promoData&&vui.promo._promoData.description2},vui.promo.getPromoTitle=function(){return vui.promo._promoData&&vui.promo._promoData.title},vui.promo.init=function(t){return vui.promo.refresh(function(e){vui.promo._notifyInitialized(),t(e)})},vui.promo.getAmount=function(){return vui.promo._promoData&&vui.promo._promoData.amount&&vui.promo._promoData.amount[0]||"0"},vui.puser={},vui.puser._userData={},vui.puser._initState={callbacks:[],initialized:!1},vui.puser.notifyOnInit=function(e){vui.puser._initState.callbacks.push(e)},vui.puser.isInitialized=function(){return vui.puser._initState.initialized},vui.puser._notifyInitialized=function(){if(vui.puser._initState.initialized=!0,vui.puser._initState.callbacks)for(var e=0;e<vui.puser._initState.callbacks.length;e++)callback();delete vui.puser._initState.callbacks},vui.puser.refresh=function(e){e(!0)},vui.puser.userId=function(){return vui.puser._userData?vui.puser._userData.userId:null},vui.puser.getCreatorOauthClientId=function(){return!(!vui.puser._userData||!vui.puser._userData.creatorOauthClientId)},vui.puser.hasPassword=function(){return!!vui.puser._userData&&vui.puser._userData.hasPassword},vui.puser.email=function(){return vui.puser._userData?vui.puser._userData.userName[0]:null},vui.puser.init=function(t){return vui.puser.refresh(function(e){alert("vui.user.init done"),vui.puser._notifyInitialized(),t(e)})},vui.widgets.ActivationOptionsButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){this.params=e||{};e.defaultClassName="btn_bg_default btn_bg_size1_default",e.selectClassName="btn_bg_select btn_bg_size1_select",this.ttsLabel=this.params.desc||this.params.label,this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" font22"},onSelect:function(){this.parent(),vui._.setAriaLabel(this.ttsLabel)}}),vui.widgets.ActivationOptionsRightColumn=new Class({Extends:vui.widgets.Container,elemPosition:"relative",elemClassName:"activation_options_right_container",init:function(e){this.selectable=!1;var t,i=new Element("table"),s=new Element("tr");i.appendChild(s),e.logoImgSrc&&(n=new Element("td",{class:"activation_options_logo"}),s.appendChild(n),t=new Element("img",{src:e.logoImgSrc}),n.appendChild(t));s=new Element("tr");i.appendChild(s);var n=new Element("td",{colspan:"2",html:e.text,class:"activation_options_right_text font20"});s.appendChild(n),this.elem.appendChild(i)}}),vui.pages.ActivationOptionsDialog=new Class({Extends:vui.pages.OverlayDialogNew,title:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_TITLE"),trackingName:"Activation Options Dialog",init:function(e){(e=e||{}).dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" simpleTextDialog":"simpleTextDialog",e.containerBgClassName="containerBg_small",e.isOpaqueBg=!1,this.parent(e)},show:function(e){this.callback=e.callback,e.layout={type:"vertical"},this.parent(e);var t=new Element("table",{class:"activation_options_container"}),i=new Element("tr");t.appendChild(i);var s=new Element("td",{colspan:"2",class:"activation_options_subtitle"});i.appendChild(s);var n=new Element("div",{html:"New User",class:"font28"});s.appendChild(n);i=new Element("tr",{class:"options_row_container"});t.appendChild(i);s=new Element("td");i.appendChild(s);var a=new Element("div",{class:"activation_options_button_container"});s.appendChild(a);var o=new vui.widgets.ActivationOptionsButton({label:vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_NEW_USER"),desc:vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_NEW_USER")+". "+vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_TEXT_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"),onAction:function(){vui.executeOnContainer(this.parentWidget,"onButtonClicked","newAccount")}});this.dialogBox.attachChild(o,a);s=new Element("td");i.appendChild(s);var r=new vui.widgets.ActivationOptionsRightColumn({text:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_VUDU_NEW_ACCOUNT_TEXT_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu")});this.dialogBox.attachChild(r,s);i=new Element("tr");t.appendChild(i);s=new Element("td",{colspan:"2",class:"activation_options_subtitle existing_user"});i.appendChild(s);n=new Element("div",{html:"Existing User",class:"font28"});s.appendChild(n);i=new Element("tr",{class:"options_row_container"});t.appendChild(i);s=new Element("td",{class:"activation_options_button_container"});i.appendChild(s);a=new Element("div",{class:"activation_options_button_container"});s.appendChild(a);var l=new vui.widgets.ActivationOptionsButton({label:vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_BUTTON"),desc:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_EXISTING_USER")+". "+vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_BUTTON")+". "+vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_TEXT"),onAction:function(){vui.executeOnContainer(this.parentWidget,"onButtonClicked","vuduAccount")}});this.dialogBox.attachChild(l,a);s=new Element("td");i.appendChild(s);var u,r=new vui.widgets.ActivationOptionsRightColumn({logoImgSrc:vui.images.logo,text:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_VUDU_EXISING_ACCOUNT_TEXT")});this.dialogBox.attachChild(r,s),vui.features.WALMART_LOGIN&&(i=new Element("tr",{class:"options_row_container"}),t.appendChild(i),s=new Element("td",{class:"activation_options_button_container"}),i.appendChild(s),a=new Element("div",{class:"activation_options_button_container"}),s.appendChild(a),u=new vui.widgets.ActivationOptionsButton({label:vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_BUTTON"),desc:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_EXISTING_USER")+". "+vui.strings.getTransformedText("ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_BUTTON")+". "+vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_TEXT"),onAction:function(){vui.executeOnContainer(this.parentWidget,"onButtonClicked","wmtAccount")}}),this.dialogBox.attachChild(u,a),s=new Element("td"),i.appendChild(s),r=new vui.widgets.ActivationOptionsRightColumn({logoImgSrc:vui.images.walmartLogo,text:vui.strings.getText("ACTIVATION_OPTIONS_DIALOG_WALMART_EXISING_ACCOUNT_TEXT")}),this.dialogBox.attachChild(r,s)),e.logIn&&vui.select(l),this.dialogBox.elem.appendChild(t),vui._.setAriaLabel(vui.getSelected().ttsLabel)},onButtonClicked:function(e){this.callback(e)},onBack:function(){this.callback("back")}}),vui.pages.ActivationCode=new Class({Extends:vui.widgets.overlayDialogue,layout:{type:"horizontal"},elemClassName:"activationCode",init:function(e){var t=e.code;this.params=e||{};var i=createDiv({className:"activationCode-container"});this.elem.appendChild(i),i.style.backgroundImage="url('"+vui.images.BG_Temp+"')";var s=new vui.widgets.LogoBar;i.appendChild(s.elem);var n=e.isPurchase||"purchase"===e.calledFrom||"setting"===e.calledFrom?vui.strings.getText("ACTIVATION_VUDU_TO_CONTINUE",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"):"browse"===e.calledFrom?vui.strings.getText("ACTIVATION_VUDU_ON_DEVICE",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"):"logIn"===e.method?vui.strings.getText("ACTIVATION_CODE_SIGN_IN","Walmart Video"):vui.strings.getText("ACTIVATION_CODE_SIGN_UP","Walmart Video"),a=createDiv({className:"steps",position:"static"},i),o=createDiv({className:"step1",position:"static"},a),r=vui.strings.getText("ACTIVATION_CODE_STEP_ONE"),l=vui.strings.getText("ACTIVATION_CODE_URL","video.walmart.com");createDiv({className:"bottom_space fontWhite28",position:"static",text:r},o),createDiv({className:"padded-left bold code-activation__url",position:"static",text:l},o);var u,d=vui.strings.getText("ACTIVATION_CODE_STEP_TWO"),c=createDiv({className:"step2",position:"static"},a);createDiv({className:"bottom_space fontWhite28",position:"static",text:vui.strings.getText("ACTIVATION_CODE_STEP_TWO")},c);var h,v;e.expired?(h=createDiv({className:"step2-expired",position:"static"},c),createDiv({className:"padded-left bold bottom_space code-activation_expired-text",text:vui.strings.getText("ACTIVATION_CODE_EXPIRED")},h),u=vui.strings.getText("ACTIVATION_CODE_EXPIRED")+" "+vui.strings.getText("ACTIVATION_GET_NEW_CODE"),(v=new vui.widgets.ImageActionButton({label:vui.strings.getText("ACTIVATION_GET_NEW_CODE"),labelClassName:"font22",defaultClassName:"btn_bg_default btn_bg_size4_default",selectClassName:"btn_bg_select btn_bg_size4_select",onAction:function(){vui.ActivationController.activationCodePollTimer&&(clearTimeout(vui.ActivationController.activationCodePollTimer),vui.ActivationController.activationCodePollTimer=null),vui.ActivationController.getCodeAndPoll("logIn"===e.method,e.isPurchase,e.calledFrom)}})).className="get-activation-code",v.setDescription(u),this.attachChild(v,h)):(u=t,createDiv({className:"padded-left bottom_space letterSpacing10 code-activation__code",position:"static",text:t},c));var m=vui.strings.getText("ACTIVATION_CODE_FOOTNOTE"),g=createDiv({className:"bottomSection",position:"static"},i);if(createDiv({className:"fontWhite22",position:"static",text:m},g),n+=r+" "+l+" "+d+" ",u===vui.strings.getText("ACTIVATION_CODE_EXPIRED")+" "+vui.strings.getText("ACTIVATION_GET_NEW_CODE"))n+=u;else for(var _=0;_<u.length;_++)n+=u.charAt(_)+" ";n+=" "+m,e.tts&&vui._.setAriaLabel(n)},onBack:function(){vui.ActivationController.activationCodePollTimer&&(clearTimeout(vui.ActivationController.activationCodePollTimer),vui.ActivationController.activationCodePollTimer=null),controller.hidePopup()}});var _activation_data={callback:null,email:"",busyLock:!1,beginBusy:function(){this.busyLock||(vui.setBusy(!0),vui.setSelectorVisible(!1),this.busyLock=!0)},endBusy:function(){this.busyLock&&(vui.setBusy(!1),vui.setSelectorVisible(!0),this.busyLock=!1)},passwordSetToken:null,activationMethod:null};vui.ActivationController={pageNameOmniture:window.APPNAME},vui.ActivationController.getCallback=function(){return _activation_data.callback},vui.ActivationController.setCallback=function(e){_activation_data.callback=e},vui.ActivationController.getEmail=function(){return _activation_data.email},vui.ActivationController.setEmail=function(e){_activation_data.email!==e&&(_activation_data.passwordSetToken=null),_activation_data.email=e},vui.ActivationController.getActivationMethod=function(){return _activation_data._activationMethod},vui.ActivationController.setActivationMethod=function(e){_activation_data._activationMethod=e},vui.ActivationController.exitActivation=function(e){var t=vui.ActivationController.getCallback();"success"===e&&(vui._.preFetchDataAfterActivated(),vui.analytics.trackEvar({activated:"logged-in"})),t&&(t(e),_activation_data.callback=null,vui.ActivationController.setActivationMethod(null))},vui.ActivationController.editEmail=function(){var e=vui.ActivationController.getEmail();var t={title:vui.strings.getText("ACTIVATION_EDIT_EMAIL_TITLE"),callback:function(e){var t;"done"===e.result&&(t=e.text,vui.ActivationController.setEmail(t)),controller.hidePopup(),vui.ActivationController.showForgotPassword()},text:e,helpText:vui.strings.getText("ACTIVATION_EDIT_EMAIL_TITLE"),promptText:""};vui.analytics.showDialog(this.pageNameOmniture+": Edit Email Dialog"),controller.showPopup("TextInputDialog",t)},vui.ActivationController.showError=function(t,i){var e={title:"Error",text:t,buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_ERROR_DISMISS_BUTTON")}],callback:function(e){alert("error in activation : "+t),controller.hidePopup(),vui.ActivationController.exitActivation("error"),i&&i(e)}};vui.analytics.showDialog(window.APPNAME+": Error Dialog"),controller.showPopup("SimpleTextDialog",e)},vui.ActivationController.showPasswordWasReset=function(){var e=vui.ActivationController.getEmail(),t={title:vui.strings.getText("ACTIVATION_PW_RESET_SUCCESS_TITLE"),text:vui.strings.getText("ACTIVATION_PW_RESET_SUCCESS_TEXT",e),buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_PW_RESET_SUCCESS_CONTINUE_BUTTON")}],callback:function(){vui.ActivationController.collectPassword()}};vui.analytics.showDialog(this.pageNameOmniture+": Password Reset Done Dialog"),controller.showPopup("SimpleTextDialog",t)},vui.ActivationController.resetPassword=function(){var e=vui.ActivationController.getEmail();_activation_data.beginBusy(),vui.getModel().resetPassword(e,function(e){var t;_activation_data.endBusy(),e&&"success"===e._type?vui.ActivationController.showPasswordWasReset():(t=vui.getModel()&&vui.getModel().supportPhone||"",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_PW_RESET_ERROR_TEXT",t)))})},vui.ActivationController.showForgotPassword=function(){var e=vui.ActivationController.getEmail(),t=vui.getModel()&&vui.getModel().supportPhone||"",i={dialogBoxHeight:300,title:vui.strings.getTransformedText("ACTIVATION_FORGOT_PW_TITLE"),text:vui.strings.getText("ACTIVATION_FORGOT_PW_TEXT",e,t),buttons:[{name:"sendEmail",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_FORGOT_PW_SEND_EMAIL_BUTTON")},{name:"changeEmail",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_FORGOT_PW_EDIT_EMAIL_BUTTON")}],callback:function(e){"back"===e?vui.ActivationController.collectPassword():"sendEmail"===e?vui.ActivationController.resetPassword():"changeEmail"===e&&vui.ActivationController.collectEmailAddress()}};vui.analytics.showDialog(this.pageNameOmniture+": Forgot Password Dialog"),controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.showPasswordExpired=function(){var e=vui.ActivationController.getEmail(),t=vui.getModel()&&vui.getModel().supportPhone||"",i={dialogBoxHeight:300,title:vui.strings.getText("ACTIVATION_RESET_PW_TITLE"),text:vui.strings.getText("ACTIVATION_RESET_PW_TEXT",e,t),buttons:[{name:"sendEmail",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_RESET_PW_SEND_EMAIL_BUTTON")},{name:"changeEmail",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_RESET_PW_EDIT_EMAIL_BUTTON")}],callback:function(e){"back"===e?vui.ActivationController.collectPassword():"sendEmail"===e?vui.ActivationController.resetPassword():"changeEmail"===e&&vui.ActivationController.collectEmailAddress()}};vui.analytics.showDialog(this.pageNameOmniture+": Password Expired Dialog"),controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.showCodeActivationSuccess=function(e){var t=window.vui.vvPlatform.appFeatureEnabled()?"Browse Walmart Video":"BROWSE VUDU",i=window.vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU",s=window.vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/paymentinfo":"Vudu.com",n={dialogBoxHeight:255,title:vui.strings.getText("ACTIVATION_SUCCESS"),text1:vui.strings.getText("ACTIVATION_WELCOME_APPX",i),img:vui.images.welcomeOverlay,buttons:[{name:"done",style:"blue",label:"purchase"===e.calledFrom||"setting"===e.calledFrom?vui.strings.getTransformedText("ACTIVATION_CONTINUE"):t,className:"browse_movies_button"}],callback:function(){controller.hidePopup(),vui.ActivationController.exitActivation("success")}};vui.account.hasPaymentMethod()||(n.text2=vui.strings.getText("ACTIVATION_ADD_PAYMENT_APPX",s)),vui.analytics.showDialog(this.pageNameOmniture+": Success Dialog"),controller.showPopup("ConfirmExitCodeDialog",n)},vui.ActivationController.showAppliedCredit=function(){var e,t=vui.promo&&vui.promo.getAmount(),i=vui.promo&&vui.promo.getPromoType(),s=vui.ActivationController.getActivationMethod();e="0"!==t?vui.strings.getText("ACTIVATION_COMPLETE_PROMO_PREFIX",window.getPriceStr(t))+vui.strings.getText("ACTIVATION_COMPLETE_TEXT"):"purchase"===i?vui.getModel().signUpSuccessMessage:"You can now access thousands of the best and latest movies and TV shows.","newAccount"===s&&(e+="<br><br>If you are a new user, please first check your email to complete account setup.");var n={dialogBoxHeight:255,title:vui.strings.getText("ACTIVATION_COMPLETE_TITLE_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"),text:e,img:vui.images.welcomeOverlay,buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_COMPLETE_DISMISS_BUTTON"),className:"browse_movies_button"}],onBack:function(){},callback:function(){controller.hidePopup(),vui.ActivationController.exitActivation("success")}};vui.analytics.showDialog(this.pageNameOmniture+": Success Dialog"),controller.showPopup("ConfirmExitDialog",n)},vui.ActivationController.showTooManyDevices=function(){var e={name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_TOO_MANY_DEVICES_RESTART_BUTTON")};"es"===vui.USER_LANGUAGE&&(e.width=200);var t={dialogBoxHeight:330,title:vui.strings.getText("ACTIVATION_TOO_MANY_DEVICES_TITLE"),text:vui.strings.getText("ACTIVATION_TOO_MANY_DEVICES_TEXT",vui.getModel().vuduUrl),buttons:[e],callback:vui.ActivationController.collectEmailAddress};vui.analytics.showDialog(this.pageNameOmniture+": Too Many Devices Dialog"),controller.showPopup("SimpleTextDialog",t)},vui.ActivationController.activateOnExistingAccount=function(e){_activation_data.beginBusy(),vui.getModel().deviceActivate(null,e,function(e){var t,i,s=e.status;_activation_data.endBusy(),"success"===s?vui.ActivationController.showAppliedCredit(e.promo):"tooManyDevices"===s?vui.ActivationController.showTooManyDevices():(t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_ACTIVATE_ERROR_TEXT_APPX",i,t)))})},vui.ActivationController.showSignInHelp=function(){var e={name:"browse",style:"blue",label:vui.strings.getTransformedText("OPENING_PITCH_BROWSE_BUTTON")};"es"===vui.USER_LANGUAGE&&(e.width=200);var t={title:"Login Failed",text:"Something went wrong, please contact support@vudu.com for sign in help.",buttons:[e],callback:function(){controller.hidePopup(),controller.goHome()}};controller.showPopup("SimpleTextDialog",t)},vui.ActivationController.showWrongPassword=function(e,t){var i={name:"retry",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_LOGIN_FAILED_RETRY_BUTTON")};"es"===vui.USER_LANGUAGE&&(i.width=200);var s={title:vui.strings.getText("ACTIVATION_LOGIN_FAILED_TITLE"),text:vui.strings.getText("ACTIVATION_LOGIN_FAILED_TEXT"),buttons:[i],callback:function(){controller.hidePopup(),e()}};t&&(s.text2=vui.strings.getText("ACTIVATION_LOGIN_FAILED_TEXT_FORGOT_WALMART_PASSWORD")),vui.analytics.showDialog(this.pageNameOmniture+": Wrong Password Dialog"),controller.showPopup("SimpleTextDialog",s)},vui.ActivationController.showUserExists=function(e){var t={name:"retry",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_USER_EXISTS_RESTART_BUTTON")};"es"===vui.USER_LANGUAGE&&(t.width=200);var i={title:vui.strings.getText("ACTIVATION_USER_EXISTS_TITLE"),text:vui.strings.getText("ACTIVATION_USER_EXISTS_TEXT"),buttons:[t],callback:function(){controller.hidePopup(),e()}};vui.analytics.showDialog(this.pageNameOmniture+": User Exists Dialog"),controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.loginUser=function(e,t,n){_activation_data.beginBusy(),vui.getModel().login(e,t,function(e,t){if(_activation_data.endBusy(),e)vui.vvPlatform.isXbox?vui.ActivationController.getXboxTokenAsync().then(vui.getModel().linkAccountWithXboxAsync).then(function(){vui.ActivationController.onLoginSuccess({type:"login"})},function(e){var t,i;alert(e,"error"),vui.getModel().logout(),e.includes("Response Status 5")?vui.ActivationController.showError("Looks like we are having trouble gathering the needed certificates to launch Vudu. We are working to address this problem, and will be back online as quickly as we can."):(t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",i,t)))}):vui.ActivationController.onLoginSuccess({type:"login"});else switch(t){case"passwordExpired":vui.ActivationController.showPasswordExpired();break;case"loginFailed":n?vui.ActivationController.showSignInHelp():vui.ActivationController.showWrongPassword(function(){vui.ActivationController.collectPassword()});break;case"accountIsLocked":vui.ActivationController.showError(vui.strings.getText("ACTIVATION_ACCOUNTLOCKED_ERROR_TEXT"));break;default:var i=vui.getModel()&&vui.getModel().supportPhone||"",s=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",s,i))}})},vui.ActivationController.collectPassword=function(){var s=vui.ActivationController.getEmail(),n=vui.ActivationController.getActivationMethod();var e=3;"es"===vui.USER_LANGUAGE&&(e=4);var t={title:vui.strings.getText("ACTIVATION_PASSWORD_PROMPT_TITLE"),doneButtonText:vui.strings.getTransformedText("ACTIVATION_PASSWORD_PROMPT_DONE_BUTTON"),callback:function(e){var t=e.result;if("forgotPassword"===t)vui.ActivationController.showForgotPassword();else if("back"===t)vui.ActivationController.collectEmailAddress();else if("done"===t){var i=e.text;if(vui.ActivationController._debugPassword&&(i=vui.ActivationController._debugPassword),""===i)return;switch(n){case"newAccount":vui.ActivationController.setNewAccountPassword(i);break;case"vuduAccount":vui.ActivationController.loginUser(s,i);break;default:throw"Unknown activation method in collectPassword: "+n}}},text:"",helpText:vui.strings.getText("ACTIVATION_PASSWORD_PROMPT_HELP"),promptText:vui.strings.getText("ACTIVATION_PASSWORD_PROMPT_TEXT",s),promptLines:e,password:!0,mode:"PASSWORD_LOWERCASE",dialogBoxClassName:"password_dialogue",footnote:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Walmart Video","Walmart Video","video.walmart.com"):vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Vudu","Vudu","Vudu.com")};vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(t.footnote=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_FANDANGO","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies"));var i=[];"newAccount"===n?(t.title="Create a password*",t.footnote="*Passwords must contain at least 8 characters, 1 uppercase letter, 1 lowercase letter, and 1 number or symbol",i.push({name:"back",label:vui.strings.getTransformedText("ACTIVATION_PASSWORD_PROMPT_BACK_BUTTON")})):i.push({name:"forgotPassword",style:"blue",width:180,label:vui.strings.getTransformedText("ACTIVATION_PASSWORD_PROMPT_FORGOT_PASSWORD_BUTTON")}),i.push({name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_PASSWORD_PROMPT_DONE_BUTTON")}),t.buttons=i,vui.analytics.showDialog(this.pageNameOmniture+": Enter Password Dialog"),controller.showPopup("TextInputDialog",t)},vui.ActivationController.showInvalidEmail=function(t,e){var i=vui.ActivationController.getEmail();e=e||vui.strings.getText("ACTIVATION_EMAIL_INVALID_TEXT",i);var s={name:"retry",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_INVALID_RETRY_BUTTON")};"es"===vui.USER_LANGUAGE&&(s.width=200);var n={title:vui.strings.getText("ACTIVATION_EMAIL_INVALID_TITLE"),text:e,buttons:[s],callback:function(e){t()}};vui.analytics.showDialog(this.pageNameOmniture+": Invalid Email Dialog"),controller.showPopup("SimpleTextDialog",n)},vui.ActivationController.showTOS=function(t){var e={dialogBoxHeight:300,title:"Terms & Conditions",text:"Agree to Vudu Terms & Conditions and Privacy Policy",buttons:[{name:"openTOS",style:"blue",label:"View Terms of Service"},{name:"accept",style:"blue",label:"Accept"}],callback:function(e){"back"===e?vui.ActivationController.collectEmailAddress():"openTOS"===e?vui.ActivationController.showLongTOS(t):"accept"===e&&t()}};vui.analytics.showDialog(window.APPNAME+":Activation Accept TOS"),controller.showPopup("SimpleTextDialog",e)};var text="Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,";vui.ActivationController.showLongTOS=function(e){var t={dialogBoxHeight:300,text:text,buttons:[{name:"back",style:"blue",label:"back"}],callback:function(){vui.ActivationController.showTOS(e)}};vui.analytics.showDialog(window.APPNAME+":Activation Show TOS"),controller.showPopup("ScrollableTextDialog",t)},vui.ActivationController.accountCreate=function(e){var t;_activation_data.passwordSetToken?vui.ActivationController.collectPassword():(t={_type:"accountCreate",email:e,eulaAccepted:"true",clientType:vui.vvPlatform.clientType},null!=vui.analytics.campaignId&&(t.campaignId=vui.analytics.campaignId,null!=vui.analytics.appLaunchSource?t.referrer=vui.analytics.appLaunchSource:t.referrer="unknown"),_activation_data.beginBusy(),vui.vvPlatform.isXbox?(failedLogin=function(e){alert("Login erorr: "+JSON.stringify(e),"error");var t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",i,t))},vui.ActivationController.getXboxTokenAsync().then(function(a){t.xboxToken=a.token,vui.getModel().doQuery(t,function(e,t,i){var s,n;t===vui.getModel().queryStatus.ST_SUCCESS&&(_activation_data.endBusy(),"success"===(t=i.status&&i.status[0])?vui.ActivationController.loginWithXboxAsync(a).then(vui.ActivationController.onLoginSuccess,failedLogin):"emailAlreadyExists"===t||"userAlreadyExists"===t?vui.ActivationController.showUserExists(vui.ActivationController.showActivationOptions):"invalidEmail"===t?vui.ActivationController.showInvalidEmail(function(){vui.ActivationController.collectEmailAddress()}):(s=vui.getModel()&&vui.getModel().supportPhone||"",n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_ACTIVATE_ERROR_TEXT_APPX",n,s))))})},function(e){alert(e,"error"),vui.getModel().logout();var t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",i,t))})):vui.getModel().doQuery(t,function(e,t,i){var s,n;t===vui.getModel().queryStatus.ST_SUCCESS&&(_activation_data.endBusy(),"success"===(t=i.status&&i.status[0])?(_activation_data.passwordSetToken=i.signedToken[0],vui.analytics.trackEvar({accountId:i.account&&i.account[0]&&i.account[0].accountId&&i.account[0].accountId[0]}),vui.ActivationController.collectPassword()):"emailAlreadyExists"===t||"userAlreadyExists"===t?vui.ActivationController.showUserExists(vui.ActivationController.showActivationOptions):"invalidEmail"===t?vui.ActivationController.showInvalidEmail(function(){vui.ActivationController.collectEmailAddress()}):(s=vui.getModel()&&vui.getModel().supportPhone||"",n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_ACTIVATE_ERROR_TEXT_APPX",n,s))))}))},vui.ActivationController.showPasswordNotGood=function(t){var e={title:"Please set a stronger password",text:"Passwords must contain at least 8 characters, 1 uppercase letter, 1 lowercase letter, and 1 number or symbol.",buttons:[{name:"retry",style:"blue",label:"Retry"}],callback:function(e){controller.hidePopup(),"retry"===e?t():vui.ActivationController.exitActivation("quit")}};vui.analytics.showDialog(window.APPNAME+":PasswordNotGood"),controller.showPopup("SimpleTextDialog",e)},vui.ActivationController.collectEmailAddress=function(){var e=vui.promo.getAmount(),s=vui.ActivationController.getActivationMethod();var t=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_NO_PROMO_TEXT");"0"!==e&&(t=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_PROMO_TEXT",window.getPriceStr(e)));var i=1;"es"!==vui.USER_LANGUAGE&&"0"===e||(i=2);var n={title:vui.strings.getText("ACTIVATION_EMAIL_PROMPT_TITLE"),callback:function(e){var t,i=e.result;"back"===i||"cancel"===i?vui.gConnectionInstance.getWmtOauthClientId()?vui.ActivationController.showActivationOptions():(controller.hidePopup(),vui.ActivationController.exitActivation("quit")):"done"===i&&(t=e.text,vui.ActivationController._debugEmail&&(t=vui.ActivationController._debugEmail),vui.ActivationController.setEmail(t),vui.emailValidate(t)?"newAccount"===s||"legacy"===s?vui.ActivationController.accountCreate(t):"vuduAccount"===s&&vui.ActivationController.collectPassword():""===t?vui.ActivationController.showInvalidEmail(function(){vui.ActivationController.collectEmailAddress()},vui.strings.getText("ACTIVATION_EMAIL_EMPTY_TEXT")):vui.ActivationController.showInvalidEmail(function(){vui.ActivationController.collectEmailAddress()}))},text:vui.ActivationController.getEmail(),helpText:vui.strings.getText("ACTIVATION_EMAIL_PROMPT_HELP"),promptText:t,promptLines:i,footnote:vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE"),mode:"EMAIL",dialogBoxClassName:"email_dialogue",buttons:[{name:"back",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_PROMPT_BACK_BUTTON")},{name:"done",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_PROMPT_DONE_BUTTON")}]};"newAccount"===s&&(n.footnote=vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Walmart Video","Walmart Video","video.walmart.com"):vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Vudu","Vudu","Vudu.com")),vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(n.footnote=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_FANDANGO","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies")),vui.analytics.showDialog(this.pageNameOmniture+": Collect Email Dialog"),n.isOpaqueBg=!1,controller.showPopup("TextInputDialog",n)},vui.ActivationController.showEmailChanged=function(e,t){var i={title:vui.strings.getText("ACTIVATION_EMAIL_CHANGED_DIALOG_TITLE"),text:vui.strings.getText("ACTIVATION_EMAIL_CHANGED_DIALOG_TEXT",e),buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_CHANGED_DIALOG_DONE_BUTTON")}],callback:function(e){controller.hidePopup(),vui.ActivationController.exitActivation(),t&&t(e)}};controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.showChangeEmailError=function(e,t){var i={title:vui.strings.getText("ACTIVATION_CHANGE_EMAIL_ERROR_TITLE"),text:e,buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_CHANGE_EMAIL_ERROR_DONE_BUTTON")}],callback:t||function(){controller.hidePopup(),vui.ActivationController.exitActivation()}};controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.changeEmailAddress=function(i,a){var e={title:vui.strings.getText("ACTIVATION_CHANGE_EMAIL_DIALOG_TITLE"),callback:function(e){var t=e.result;if("back"===t){if(controller.hidePopup(),vui.ActivationController.exitActivation(),a)return void a(t)}else if("done"===t){var s=e.text;function n(){vui.ActivationController.changeEmailAddress(i,a)}if(s===i)return void vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_SELECT_DIFFERENT_EMAIL"),n);if(!vui.emailValidate(s))return""===s?void vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_EMAIL_EMPTY_TEXT"),n):void vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_EMAIL_INVALID_TEXT",s),n);_activation_data.beginBusy(),vui.getModel().resetAccountEmail(s,function(e){alert("CHANGE EMAIL ADDRESS RESULT:"+JSON.encode(e)),_activation_data.endBusy();var t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu";e&&"success"===e._type?vui.ActivationController.showEmailChanged(s,a):e&&"error"===e._type&&"invalidArgument"===e.code&&"userExists"===e.subCode?vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_ACCOUNT_ALREADY_EXISTS_APPX",s,i,t),n):e&&"error"===e._type&&"invalidArgument"===e.code&&"passwordIsSet"===e.subCode?vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_APPX",i,t),a):vui.ActivationController.showChangeEmailError(vui.strings.getText("ACTIVATION_CHANGE_EMAIL_ERROR_TEXT_PROBLEM_CHANGING_TRY_AGAIN_APPX",i,t),a)})}},text:i,helpText:vui.strings.getText("ACTIVATION_CHANGE_EMAIL_DIALOG_HELP"),promptText:vui.strings.getText("ACTIVATION_CHANGE_EMAIL_DIALOG_TEXT"),promptLines:3,mode:"EMAIL",dialogBoxClassName:"email_dialogue",buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_CHANGE_EMAIL_DIALOG_DONE_BUTTON")}]};controller.showPopup("TextInputDialog",e)},vui.ActivationController.showEmailWasResent=function(e,t){var i={title:vui.strings.getText("ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TITLE"),text:vui.strings.getText("ACTIVATION_EMAIL_WAS_RESENT_DIALOG_TEXT",e),buttons:[{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_WAS_RESENT_DIALOG_DONE_BUTTON")}],callback:function(e){controller.hidePopup(),vui.ActivationController.exitActivation(),t&&t(e)}};controller.showPopup("SimpleTextDialog",i)},vui.ActivationController.resendActivationEmail=function(a,o){_activation_data.beginBusy(),vui.getModel().completeAccountSetupEmailSend(function(e,t,i){var s,n;_activation_data.endBusy(),alert("resendActivationEmail:"+JSON.encode(i)),i&&"success"===i._type?vui.ActivationController.showEmailWasResent(a,o):i&&"error"===i._type&&"invalidArgument"===i.code&&"passwordIsSet"===i.subCode?vui.ActivationController.showError(vui.strings.getText("ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_PLEASE_LOG_IN_TO_WWW",vui.getModel().vuduUrl,a),o):(alert("Resend email failed","error"),s=vui.getModel()&&vui.getModel().supportPhone||"",n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_RESEND_EMAIL_ERROR_DIALOG_WE_ARE_HAVING_TROUBLE_APPX",n,s)))})},vui.ActivationController.showNoPaymentMethod=function(l){function t(e,t,i){var s,n,a;alert("GOT USER:"+JSON.encode(i)),_activation_data.endBusy();var o,r=i.user&&i.user[0]&&i.user[0].userName[0];r?(vui.ActivationController.setCallback(function(){l(!1)}),vui.vvPlatform.isXbox?(s=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TITLE_XBOX"),n=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TEXT_XBOX","www.vudu.com"),a=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_SEND_BUTTON")):vui.vvPlatform.appFeatureEnabled()?(s=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TITLE"),n=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TEXT_P34")):(s=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TITLE"),n=vui.strings.getText("ACTIVATION_NO_PAYMENT_DIALOG_TEXT",r),a=vui.strings.getTransformedText("ACTIVATION_NO_PAYMENT_DIALOG_RESEND_BUTTON")),o={dialogBoxHeight:255,title:s,text:n,buttons:[{name:"resendEmail",label:a},{name:"cancel",label:vui.strings.getTransformedText("ACTIVATION_NO_PAYMENT_DIALOG_DONE_BUTTON")}],callback:function(e){"changeEmail"===e?vui.ActivationController.changeEmailAddress(r):"resendEmail"===e?vui.ActivationController.resendActivationEmail(r):(controller.hidePopup(),vui.ActivationController.exitActivation(e))}},vui.vvPlatform.appFeatureEnabled()&&(o.buttons=[{name:"ok",label:vui.strings.getTransformedText("ACTIVATION_NO_PAYMENT_DIALOG_OK_BUTTON")}]),controller.showPopup("SimpleTextDialog",o)):l(!1)}_activation_data.beginBusy(),vui.account.refresh(function(){var e;_activation_data.endBusy(),vui.account.getPaymentMethodId()?l(!0):(e={_type:"userSearch",deviceId:VUDU.registry.deviceId},_activation_data.beginBusy(),vui.getModel().doQuery(e,t))})},vui.ActivationController.showNoPassword=function(t){alert("showNoPassword");var i=vui.puser.email();vui.setSelectorVisible(!0);var e={dialogBoxHeight:255,dialogBoxClassName:"threeButtonDialogue",title:vui.strings.getText("REMINDER_NOPASSWORD_TITLE"),text:vui.strings.getText("REMINDER_NOPASSWORD_TEXT"),buttons:[{name:"resendEmail",label:vui.strings.getTransformedText("REMINDER_NOPASSWORD_RESEND_BUTTON")},{name:"changeEmail",label:vui.strings.getTransformedText("REMINDER_NOPASSWORD_CHANGE_BUTTON")},{name:"done",label:vui.strings.getTransformedText("REMINDER_NOPASSWORD_LATER_BUTTON")}],buttonContainerLayout:{type:"vertical"},callback:function(e){"changeEmail"===e?vui.ActivationController.changeEmailAddress(i,t):"resendEmail"===e?vui.ActivationController.resendActivationEmail(i,t):(controller.hidePopup(),vui.ActivationController.exitActivation(e),t(e))}};controller.showPopup("SimpleTextDialog",e)},vui.ActivationController.showNoUVLink=function(i){alert("showNoUVLink");var s="goToHomePage";vui.setSelectorVisible(!0);var e={dialogBoxHeight:255,title:vui.strings.getText("REMINDER_UVLINK_TITLE"),text:vui.strings.getText("REMINDER_UVLINK_TEXT"),buttons:[{name:"doItLater",label:vui.strings.getTransformedText("REMINDER_UVLINK_LATER_BUTTON")},{name:"done",label:vui.strings.getTransformedText("REMINDER_UVLINK_DONE_BUTTON")}],callback:function(t){"done"===t?vui.account.isUVLinkActive(function(e){!0===e?(controller.hidePopup(),vui.ActivationController.exitActivation(t),i(s)):vui.ActivationController.showNoUVLink(i)}):(controller.hidePopup(),vui.ActivationController.exitActivation(t),i(s))}};controller.showPopup("SimpleTextDialog",e)},vui.ActivationController.activationDone=function(e){"quit"!==e&&"success"===e&&controller.goHome()},vui.ActivationController.loginWithXboxAsync=function(e){return _activation_data.beginBusy(),vui.getModel().xboxLoginAsync(e.token).then(function(e){return _activation_data.endBusy(),e.success?void vui.ActivationController.beginActivation(vui.ActivationController.activationDone,"welcome"):e.status})},vui.ActivationController.getXboxAuthManagerAsync=function(){var e=vui.vvPlatform.currentUser.user;return Windows.Security.Authentication.Web.Core.WebAuthenticationCoreManager.findAccountProviderAsync("https://xsts.auth.xboxlive.com","",e)},vui.ActivationController.getXboxWebTokenRequestAsync=function(e,t){var i=t||"https://api.vudu.com",s=new Windows.Security.Authentication.Web.Core.WebTokenRequest(e),n=Windows.Security.Authentication.Web.Core.WebAuthenticationCoreManager;return s.properties.insert("Url",i),s.properties.insert("Target","xboxlive.signin"),s.properties.insert("Policy","DELEGATION"),n.getTokenSilentlyAsync(s).then(function(e){return alert("Token Broker request result: "+e.responseStatus),0===e.responseStatus?Promise.resolve(e.responseData[0]):3===e.responseStatus?vui.ActivationController.interactiveTokenRequestAsync(n,s):5===e.responseStatus?Promise.reject("Response Status 5: Microsoft tried to initiate an interactive login but failed. ErrorCode: "+tokenResult2.responseError.errorCode):Promise.reject("An error occured getting the token")})},vui.ActivationController.interactiveTokenRequestAsync=function(e,t){return e.requestTokenAsync(t).then(function(e){return 0===e.responseStatus?Promise.resolve(e.responseData[0]):1===e.responseStatus?Promise.reject("User Cancelled the request to get a token"):Promise.reject("An error occured getting the token, responseStatus: "+e.responseStatus+", errorCode: "+e.responseError.errorCode)})},vui.ActivationController.getXboxTokenAsync=function(t){return vui.ActivationController.getXboxAuthManagerAsync().then(function(e){return vui.ActivationController.getXboxWebTokenRequestAsync(e,t)})},vui.ActivationController.loginWithWalmart=function(i,s){_activation_data.beginBusy(),vui.getModel().loginWithWalmart(i,s,function(e,t){if(_activation_data.endBusy(),e)vui.vvPlatform.isXbox?vui.ActivationController.getXboxTokenAsync().then(vui.getModel().linkAccountWithXboxAsync).then(function(){vui.ActivationController.onLoginSuccess({type:"login"})},function(e){alert(e,"error"),vui.getModel().logout();var t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",i,t))}):vui.ActivationController.onLoginSuccess({type:"login"});else switch(t){case"relogin":vui.ActivationController.loginWithWalmart(i,s);break;case"loginFailed":vui.ActivationController.showWrongPassword(vui.ActivationController.collectPasswordForWmt,!0);break;case"vuduAccountIsLocked":vui.ActivationController.showError("Your account has been locked. Please contact Vudu for assistance.");break;default:vui.ActivationController.showError("Ooops, something didn’t work correctly. Please try again!")}})},vui.ActivationController.collectPasswordForWmt=function(){alert("doing vui.ActivationController.collectPasswordForWmt");var s=vui.ActivationController.getEmail(),e={title:vui.strings.getText("ACTIVATION_WMT_PASSWORD_PROMPT_TITLE"),doneButtonText:vui.strings.getTransformedText("ACTIVATION_WMT_PASSWORD_PROMPT_DONE_BUTTON"),callback:function(e){alert("doing vui.ActivationController.collectPasswordForWmt callback");var t,i=e.result;"back"===i?vui.ActivationController.collectEmailAddressForWmt():"done"!==i||""!==(t=e.text)&&vui.ActivationController.loginWithWalmart(s,t)},text:"",helpText:vui.strings.getText("ACTIVATION_WMT_PASSWORD_PROMPT_HELP"),promptText:vui.strings.getText("ACTIVATION_WMT_PASSWORD_PROMPT_TEXT"),promptLines:2,password:!0,mode:"PASSWORD_LOWERCASE",dialogBoxClassName:"password_dialogue",footnote:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Walmart Video","Walmart Video","video.walmart.com"):vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Vudu","Vudu","Vudu.com"),buttons:[{name:"back",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_WMT_PASSWORD_PROMPT_BACK_BUTTON")},{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_WMT_PASSWORD_PROMPT_DONE_BUTTON")}]};vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(e.footnote=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_FANDANGO","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies")),vui.analytics.showDialog(this.pageNameOmniture+": Collect WmtPassword Dialog"),controller.showPopup("TextInputDialog",e)},vui.ActivationController.collectEmailAddressForWmt=function(){alert("doing vui.ActivationController.collectEmailAddressForWmt ");var e=vui.strings.getText("ACTIVATION_WMT_EMAIL_PROMPT_TEXT"),t={title:vui.strings.getText("ACTIVATION_WMT_EMAIL_PROMPT_TITLE"),callback:function(e){alert("doing vui.ActivationController.collectEmailAddressForWmt callback");var t,i=e.result;"back"===i?vui.ActivationController.showActivationOptions():"done"===i&&(t=e.text,vui.emailValidate(t)?(vui.ActivationController.setEmail(t),vui.ActivationController.collectPasswordForWmt()):""===t?vui.ActivationController.showInvalidEmail(function(){vui.ActivationController.collectEmailAddress()},vui.strings.getText("ACTIVATION_EMAIL_EMPTY_TEXT")):vui.ActivationController.showInvalidEmail(vui.ActivationController.collectEmailAddressForWmt))},text:vui.ActivationController.getEmail(),helpText:vui.strings.getText("ACTIVATION_WMT_EMAIL_PROMPT_HELP"),promptText:e,promptLines:2,footnote:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Walmart Video","Walmart Video","video.walmart.com"):vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_APPX","Vudu","Vudu","Vudu.com"),mode:"EMAIL",dialogBoxClassName:"email_dialogue",buttons:[{name:"back",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_WMT_EMAIL_PROMPT_BACK_BUTTON")},{name:"done",style:"blue",label:vui.strings.getTransformedText("ACTIVATION_WMT_EMAIL_PROMPT_DONE_BUTTON")}]};vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(t.footnote=vui.strings.getText("ACTIVATION_EMAIL_PROMPT_ALT_FOOTNOTE_FANDANGO","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies")),vui.analytics.showDialog(this.pageNameOmniture+": Collect WmtEmail Dialog"),controller.showPopup("TextInputDialog",t)},vui.ActivationController.showActivationOptions=function(e){var t={logIn:e,callback:function(e){var t;alert("GOT CALLBACK:"+e),"newAccount"===e?(vui.ActivationController.pageNameOmniture=window.APPNAME+":signup",vui.ActivationController.setActivationMethod(e),vui.ActivationController.collectEmailAddress()):"vuduAccount"===e?(vui.ActivationController.pageNameOmniture=window.APPNAME+":signin",vui.ActivationController.setActivationMethod(e),vui.ActivationController.collectEmailAddress()):"wmtAccount"===e?(vui.ActivationController.pageNameOmniture=window.APPNAME+":signin",vui.ActivationController.setActivationMethod(e),vui.ActivationController.collectEmailAddressForWmt()):"back"===e&&(controller.hidePopup(),vui.ActivationController.exitActivation("quit"),(t=vui.getSelected())&&"FamilyModeEntry"===t.pageTitle&&vui.select(t.children[0]))}};controller.showPopup("ActivationOptionsDialog",t)},vui.ActivationController.deviceActivateCodeGenerate=function(s){var t={_type:"deviceActivationCodeGenerate",lightDeviceType:vui.vvPlatform.clientType,lightDeviceClientId:VUDU.registry.deviceId};vui.vvPlatform.isXbox?vui.ActivationController.getXboxTokenAsync().then(function(e){t.xboxToken=e.token,delete t.lightDeviceClientId,vui.getModel().doQuery(t,function(e,t,i){i&&s(i.code[0],i.uuid[0],i.expirationTime[0])})}):vui.getModel().doQuery(t,function(e,t,i){i&&s(i.code[0],i.uuid[0],i.expirationTime[0])})},vui.ActivationController.beginActivationCodePolling=function(e){var s=!0,a=function(n){var e,t,i=parseDate(n.expirationTime);new Date<i?(e={_type:"deviceActivationCodeStatusGet",uuid:n.uuid,code:n.code},vui.getModel().doQuery(e,function(e,t,i){i&&i.status&&"claimed"===i.status[0]?vui.getModel().activateByCode(n.uuid,n.code,function(e,t){if(e)vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel.reset(),vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings&&vui.clearPlaySettings.reset(),vui.ActivationController.activationCodePollTimer&&clearTimeout(vui.ActivationController.activationCodePollTimer),vui.ActivationController.activationCodePollTimer=null,controller.hidePopup(),vui.ActivationController.onLoginSuccess({logIn:n.logIn,calledFrom:n.calledFrom});else switch(t){case"passwordExpired":vui.ActivationController.showPasswordExpired();break;case"loginFailed":vui.ActivationController.showWrongPassword(function(){vui.ActivationController.collectPassword()});break;case"accountIsLocked":vui.ActivationController.showError(vui.strings.getText("ACTIVATION_ACCOUNTLOCKED_ERROR_TEXT"));break;default:var i=vui.getModel()&&vui.getModel().supportPhone||"",s=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",s,i))}}):(alert("polling for deviceActivationCodeStatusGet","debug"),vui.ActivationController.activationCodePollTimer&&clearTimeout(vui.ActivationController.activationCodePollTimer),vui.ActivationController.activationCodePollTimer=setTimeout(a,1e4,n),n.tts=s,controller.showPopup("ActivationCode",n),s=!1)})):(t={code:null,method:n.logIn?"logIn":"signUp",expired:!0,calledFrom:n.calledFrom,tts:!0},controller.showPopup("ActivationCode",t))};vui.ActivationController.activationCodePollTimer&&clearTimeout(vui.ActivationController.activationCodePollTimer),vui.ActivationController.activationCodePollTimer=setTimeout(a,0,e)},vui.ActivationController.getCodeAndPoll=function(n,a,o){vui.ActivationController.deviceActivateCodeGenerate(function(e,t,i){var s={code:e,method:n?"logIn":"signUp",isPurchase:a,calledFrom:o,uuid:t,expirationTime:i,logIn:n};vui.ActivationController.beginActivationCodePolling(s)})},vui.ActivationController.beginActivation=function(e,t,i){var s;vui.ActivationController.calledFrom="welcome"===t?"welcome":"browse",vui.analytics.trackEvar({activationSource:vui.ActivationController.calledFrom}),vui.ActivationController.setCallback(e),vui.gConnectionInstance.getWmtOauthClientId()?(alert("DOING WALMART ACTIVATION!!"),vui.gConnectionInstance.getIsActivationCodeEnabled()?(s="product details"===controller.baseLayer.currentPage.pageTitle,vui.ActivationController.getCodeAndPoll(i,s,t)):vui.ActivationController.showActivationOptions(i)):(vui.ActivationController.setActivationMethod("legacy"),vui.ActivationController.collectEmailAddress())},vui.ActivationController.setNewAccountPassword=function(n){if(!_activation_data.email)throw"_activation_data email is not set";if("newAccount"!==vui.ActivationController.getActivationMethod())throw"invalid activation method";if(!_activation_data.passwordSetToken)throw"_activation_data passwordSetToken is not set";var e={_type:"userPasswordSet",newPassword:n,signedToken:_activation_data.passwordSetToken};vui.getModel().doQuery(e,function(e,t,i){var s;if(_activation_data.endBusy(),t===vui.getModel().queryStatus.ST_SUCCESS)if("success"===i._type)vui.analytics.trackEvent("event11"),vui.ActivationController.loginUser(_activation_data.email,n,!0);else switch("error"===i._type&&i.subCode&&i.subCode[0]&&(s=i.subCode[0]),s){case"notStrongPassword":case"notDecentPassword":vui.ActivationController.showPasswordNotGood(function(){vui.ActivationController.collectPassword()});break;case"passwordExists":vui.ActivationController.onNewAccountAlreadySetup(n);break;default:vui.ActivationController.showError("Ooops, something didn’t work correctly. Please try again!")}})},vui.ActivationController.onNewAccountAlreadySetup=function(e){if(!_activation_data.email)throw"_activation_data email is not set";if("newAccount"!==vui.ActivationController.getActivationMethod())throw"invalid activation method";_activation_data.beginBusy(),vui.getModel().login(_activation_data.email,e,function(e,t){var i,s;_activation_data.endBusy(),e?vui.ActivationController.onLoginSuccess():"loginFailed"===t?vui.ActivationController.showAccountAlreadySetupLoginDialog(function(){vui.ActivationController.setActivationMethod("vuduAccount"),vui.ActivationController.collectPassword()}):(alert("onNewAccountAlreadySetup, unable to login user, error: "+t,"error"),i=vui.getModel()&&vui.getModel().supportPhone||"",s=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU",vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",s,i)))})},vui.ActivationController.showAccountAlreadySetupLoginDialog=function(e){var t={title:"Account already set up",text:"You completed account set up already! Press OK to sign in.",buttons:[{name:"back",label:"OK"}],callback:e};vui.analytics.showDialog(window.APPNAME+":PasswordNotGood"),controller.showPopup("SimpleTextDialog",t)},vui.ActivationController.onLoginSuccess=function(e){vui.account.refresh(function(){"welcome"===vui.ActivationController.calledFrom&&vui.analytics.clearCachedPageName(),vui.vvPlatform.isXbox?vui.ActivationController.exitActivation("success"):vui.gConnectionInstance.getIsActivationCodeEnabled()?vui.ActivationController.showCodeActivationSuccess(e):vui.ActivationController.showAppliedCredit(),controller.baseLayer.currentPage&&controller.baseLayer.currentPage.onLogin&&controller.baseLayer.currentPage.onLogin()})},vui.ActivationController.tests={newAccountCollectEmail:function(){vui.ActivationController.setActivationMethod("newAccount"),_activation_data.email="vmtest"+Math.random()+"@djvudu.com",vui.ActivationController.collectEmailAddress()},newAccountCollectPassword:function(){vui.ActivationController.setActivationMethod("newAccount"),vui.ActivationController.collectPassword()},_doNewAccountSetViaWebTest:function(n,a){var e;vui.ActivationController.setActivationMethod("newAccount"),_activation_data.email="vmtest"+Math.random()+"@djvudu.com",e={_type:"accountCreate",email:_activation_data.email,eulaAccepted:"true",clientType:vui.vvPlatform.clientType},vui.getModel().doQuery(e,function(e,t,i){_activation_data.passwordSetToken=i.signedToken[0];var s={_type:"userPasswordSet",newPassword:n,signedToken:_activation_data.passwordSetToken};vui.getModel().doQuery(s,function(){vui.ActivationController.setNewAccountPassword(a)})})},newAccountSetViaWebPasswordOK:function(){this._doNewAccountSetViaWebTest("Vm123456","Vm123456")},newAccountSetViaWebPasswordNotOK:function(){this._doNewAccountSetViaWebTest("Vm123456","Vm123457")},newAccountAccountExists:function(){vui.ActivationController.setActivationMethod("newAccount"),_activation_data.email="vasily.mulukov@vudu.com",vui.ActivationController.collectEmailAddress()}},vui.widgets.SlidingPanel=new Class({Extends:vui.widgets.Container,width:318,init:function(){var e=this.elem;e.style.backgroundColor="#000000",e.style.backgroundImage="url("+vui.images.panelBg+")",e.style.width=this.width+"px",e.style.height="540px"}}),vui.widgets.MenuPanel=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MenuPanel",init:function(e,t){var i=this.elem;i.id="scrollingList",(e=e||{})&&e.elemClassName&&(i.className=e.elemClassName),e.onAction&&(this.onAction=e.onAction),e.onSelect&&(this.onAction=e.onSelect),e.onDirectionRight&&(this.onDirectionRight=e.onDirectionRight),e.onDirectionLeft&&(this.onDirectionLeft=e.onDirectionLeft),e.onDirectionUp&&(this.onDirectionUp=e.onDirectionUp),e.onDirectionDown&&(this.onDirectionDown=e.onDirectionDown),$defined(e.menuButtonPadding)?this.menuButtonPadding=e.menuButtonPadding:this.menuButtonPadding=5,i.style.width=(e&&e.width?e.width:window.vui.ResDef.widget.MENU_PANEL_DEFAULT_W)+"px",i.style.height=(e&&e.height?e.height:window.vui.ResDef.widget.MENU_PANEL_DEFAULT_H)+"px",this.height=0,t&&this.bind(t)},bind:function(e,t){this.buttonsDef=e;for(var i=0;i<this.buttonsDef.length;i++){var s=new this.buttonsDef[i].buttonClass("button"+i,this.buttonsDef[i]),n=s.getElem();n.setAttribute("role","option"),n.style.top=i*(parseInt(n.style.height,10)-this.menuButtonPadding)+"px",this.attachChild(s),this.height=this.height+parseInt(n.style.height,10)}t&&"ccSettings"===t&&(this.children[this.children.length-1].onDirectionDown=function(){vui._.setAriaLabel("End of list")}),this.elem.style.height=this.height+"px"},selectMenuButtonAtIndex:function(e){this.children[e]&&vui.select(this.children[e])},getSelectedIndex:function(){for(var e=0;e<this.children.length;e++)if(vui.getSelected()==this.children[e])return e;return-1},highlightSelectedIndex:function(e){for(var t=void 0===e?this.getSelectedIndex():e,i=0;i<this.children.length;i++)i!==t?this.children[i].unMarkSelected():this.children[i].markSelected()},selectSelectedIndex:function(e){for(var t=void 0===e?this.getSelectedIndex():e,i=0;i<this.children.length;i++)i!==t?this.children[i].unMarkSelected():this.children[i].setSelected()},removeHighlight:function(){for(var e=0;e<this.children.length;e++)this.children[e].unMarkSelected()},onSelect:function(){this.highlightSelectedIndex()}}),vui.widgets.PreviewItemsBase=new Class({Extends:vui.widgets.Base,padding:7,init:function(e){this.widgets=[],this.addWidgets()},addWidgets:function(){for(var e=0;e<this.numVisible;e++){var t=this.createWidget(e);t.unbind(),this.attachChild(t),this.widgets.push(t)}},bind:function(e,t,i){if(!e.data||0==e.totalCount)return alert("PreviewItemsBase didn't get data."+this.dataElement),this.elem.style.display="none",void this.sendNotification(vui.Facade.EMPTY_LIST,!0);for(var s=0;s<this.numVisible;s++){var n=e.get(s);n?this.widgets[s].bind(n):this.widgets[s].unbind()}this.elem.style.display="block",this.sendNotification(vui.Facade.HIDE_EMPTY_LIST)},bindRaw:function(e){for(var t=0;t<this.numVisible;t++){var i=e[t];i?this.widgets[t].bind(i):this.widgets[t].unbind()}this.elem.style.display="block"},createWidget:function(e){var t=this.constructWidget(e),i=t.getElem(),s=parseInt(i.style.height,10);return i.style.left="0",i.style.top=e*(s+this.padding)+"px",t}}),vui.widgets.NavBackDelegate=new Class({onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionUp")}}),vui.widgets.NavUpDownDelegate=new Class({onDirectionUp:function(){vui.executeOnContainer(this.parentWidget,"onDirectionUp")},onDirectionDown:function(){vui.executeOnContainer(this.parentWidget,"onDirectionDown")}}),vui.widgets.RoundedBorder=new Class({Extends:vui.widgets.LeafContainer,Implements:vui.widgets.BorderLayout,thickness:5,init:function(e){var t=e||this.definition;t&&t.fill&&(this.fill=t.fill),this.initializeBorder();var i=t&&t.width||260,s=t&&t.height||40,n=this.getElem();n.id=name,n.style.position="absolute",n.style.width=i+"px",n.style.height=s+"px",n.style.display="block",n.style.top="0",this.resize(i,s)}}),vui.widgets.RoundedBorderLayout=new Class({Implements:vui.widgets.BorderLayout,thickness:5,initialize:function(e){var t=e||this.definition;t&&(t.fill&&(this.fill=t.fill),t.size&&10==t.size&&(this.thickness=10)),this.elem=document.createElement("div"),this.initializeBorder();var i=t&&t.width||260,s=t&&t.height||40,n=this.elem;n.id=name,n.style.position="absolute",n.style.width=i+"px",n.style.height=s+"px",n.style.display="block",n.style.top="0",this.resize(i,s)}}),vui.widgets.LargeRoundedBorder=new Class({Extends:vui.widgets.RoundedBorder,thickness:10}),vui.widgets.ThreePieceBg=new Class({Extends:vui.widgets.Base,pieces:{},init:function(){var e=this.elem;this.pieces.bgL=new Element("img",{styles:{position:"absolute",left:"0"},src:vui.images[this.imgSrcPrefix+"W"]}),this.pieces.bgL.width=this.pieceWidth,this.pieces.bgL.height=this.pieceHeight,e.appendChild(this.pieces.bgL),this.pieces.bgC=new Element("img",{styles:{position:"absolute",left:this.pieceWidth+"px"},src:vui.images[this.imgSrcPrefix+"C"]}),this.pieces.bgC.height=this.pieceHeight,e.appendChild(this.pieces.bgC),this.pieces.bgR=new Element("img",{styles:{position:"absolute"},src:vui.images[this.imgSrcPrefix+"E"]}),this.pieces.bgR.width=this.pieceWidth,this.pieces.bgR.height=this.pieceHeight,e.appendChild(this.pieces.bgR)},setWidth:function(e){var t=this.pieces;0<=e-2*this.pieceWidth?(t.bgC.width=e-2*this.pieceWidth,t.bgR.style.left=e-this.pieceWidth+"px"):(t.bgC.width=0,t.bgR.style.left=this.pieceWidth+"px")}}),vui.PromoTableUI=new Class({updatePromoTable:function(e,t){}}),vui.widgets.NewRatingBlock=new Class({Extends:vui.widgets.Base,elemClassName:"new-rating-block",elemPosition:"static",animate:!0,init:function(e,t,i,s){this.doInfoStyle=t;var n=this.elem;n.style.display="none",n.style.position="relative",i&&(n.style.width=i+"px"),s&&(n.style.height=s="px"),this.title=createDiv({className:"ratingBlockText",position:"static"},n),this.rating=new vui.widgets.StarRating,this.attachChild(this.rating)},setAnimate:function(e){this.animate=e},bindStar:function(e,t){this.rating.bind(t,e)},showUser:function(e){this.doInfoStyle||(this.title.innerHTML=vui.strings.getText("RATING_WIDGET_MY_RATING")),this.currentRating="user",this.bindStar(e,"green")},showCommunity:function(e){this.doInfoStyle||(this.title.innerHTML=vui.strings.getText("RATING_WIDGET_COMMUNITY_RATING")),this.currentRating="community",this.bindStar(e,"white")},switchRatings:function(){"community"==this.currentRating?this.showUser(this.user):"user"==this.currentRating&&this.showCommunity(this.community),this.switchTimer&&(this.switchTimer=setTimeout(function(){this.switchRatings()}.bind(this),3e3))},pause:function(e){this.switchTimer&&(clearTimeout(this.switchTimer),delete this.switchTimer),e&&e.movieId&&(this.pauseId=e.movieId)},getUserRating:function(e){if(!vui.vvPlatform.baseApp){var t=e.getUserRating();return this.userRatingForTTS=t||0,t&&0<t?.2*t:0}},getCommunityRating:function(e){var t,i=e.ratingsSummaries&&e.ratingsSummaries[0].ratingsSummary;return i&&(t=i[0].starRatingsAvg[0]),this.communityRatingForTTS=t||0,t&&0<t?.2*t:0},bind:function(e){var t=e.data,i=this.getUserRating(e),s=this.getCommunityRating(t),n=t.contentId[0];if(i!=this.user||s!=this.community||n==this.pauseId)return this.user=i,this.community=s,this.switchTimer&&clearTimeout(this.switchTimer),0<s||0<i?(this.elem.style.display="inline-block",0<i?this.showUser(i):this.showCommunity(s),0<s&&0<i&&this.animate,!0):(this.elem.style.display="none",this.bindStar(0),!1)},getAriaLabel:function(){var e=this.title.innerHTML;return 0<this.userRatingForTTS?e+=": "+this.userRatingForTTS:0<this.communityRatingForTTS?e+=": "+this.communityRatingForTTS:e="",e}}),vui.widgets.NewTomatoRatingBlock=new Class({Extends:vui.widgets.Base,elemPosition:"static",elemClassName:"new-tomato-block",init:function(e,t,i){var s,n=this.elem;t&&(n.style.width=t+"px"),i&&(n.style.height=i+"px"),n.style.display="none",n.style.position="relative",s=vui.vvPlatform.appFeatureEnabled()?(this.title=createDiv({className:"ratingBlockText",position:"static"},n),this.percent=createDiv({className:"rottenTomatoesPercentText font28",position:"static"}),createImg({src:vui.images.mp.tomato,position:"static"},this.elem)):(this.title=createDiv({className:"font16 ratingBlockText"},n),this.percent=new Element("div",{class:"font28 rottenTomatoesPercentText"}),createImg({src:vui.images.mp.tomato},this.elem)),this.title.innerHTML=vui.strings.getText("FILTER_TOMATOMETER"),createDiv({className:"tomatometerTitleCopyright",text:" &reg;"},n),n.appendChild(this.percent),s.className="tomatometerLogo",this.logo=s},bind:function(e){var t=e.data,i=0;if(t.tomatoMeter&&(i=parseFloat(t.tomatoMeter[0],10)/100),0<i){var s=vui._.aStr(t.tomatoIcon),n="true"===vui._.aStr(t.tomatoCertifiedFresh),a=s&&vui.images.mp[s+"Tomato"]?"fresh"===s&&n?vui.images.mp.certifiedTomato:vui.images.mp[s+"Tomato"]:vui.images.mp.tomato;return this.logo.src=a,this.percent.innerHTML=Math.round(100*i)+"%",this.elem.style.display="inline-block",!0}return!(this.elem.style.display="none")},getAriaLabel:function(){return this.percent.innerHTML?this.title.innerHTML+": "+this.percent.innerHTML+". ":""}}),vui.widgets.AvailableQualities=new Class({Extends:vui.widgets.Container,elemClassName:"available_qualities",init:function(e){(e=e||{}).elemClassName&&(this.elem.className=this.elem.className+" "+e.elemClassName),this.availQty=createDiv({className:"infoPanelAvailQty"},this.elem),this.availQtyIcon={},this.availQtyIcon.sd=createImg({className:"infoPanelAvailIcon sd_icon"},this.availQty),this.availQtyIcon.hd=createImg({className:"infoPanelAvailIcon hd_icon"},this.availQty),this.availQtyIcon.hdx=createImg({className:"infoPanelAvailIcon hdx_icon"},this.availQty),this.availQtyIcon.uhd=createImg({className:"infoPanelAvailIcon uhd_icon"},this.availQty),this.availQtyIconShouldShow={sd:!0,hd:!0,hdx:!0,uhd:!0}},bind:function(e){var t=vui.getModel().setAvail(e);for(var i in this.availQtyIcon)this.availQtyIcon[i].style.display="none";var s=0;if(t&&t.qty)for(var n=t.qty.length-1;0<=n;n--)try{var i=t.qty[n][0],a=t.qty[n][1];if(!vui._.isUHDContent(e.data)&&"uhd"==i)continue;if(vui._.isUHDContent(e.data)&&"hd"===i)continue;this.availQtyIconShouldShow[i]&&(this.availQtyIcon[i].style.display="block",this.availQtyIcon[i].src=vui.images.mp[i+"_"+a],this.availQtyIcon[i].style.left=s+"px",s+=window.vui.ResDef.overlays["QUALITY_ICON_"+i.toUpperCase()+"_WIDTH"],s+=window.vui.ResDef.overlays.QUALITY_ICON_SPACING)}catch(e){}},hideQuality:function(e){this.availQtyIconShouldShow[e]=!1}}),vui.widgets.OfferInfoPanel=new Class({Extends:vui.widgets.Container,elemClassName:"OfferInfoPanel",init:function(e){(e=e||{}).elemClassName&&(this.elem.className=this.elem.className+" "+e.elemClassName),this.offerLabel=this._createDiv("infoPanelOfferLabel",this.elem),vui._.innerHTML(this.offerLabel,"")},bind:function(e){var t,i,s=e&&e.data;e&&e.data&&e.data.variants&&(i=[],i=vui.getModel().getBestOffer(s),"bonus"===s.type[0]?vui._.innerHTML(this.offerLabel,vui.strings.getText("WATCH_FREE")):i[2]||("free"==i[1]&&(this.offerLabel.style.color="red"),vui._.innerHTML(this.offerLabel,i[0])),s&&s.ownerships&&(t=s.ownerships,Object.keys(t).forEach(function(e){vui.executeOnContainer(this.parentWidget,"hideOwnedQualities",e)}.bind(this))))},_createDiv:function(e,t){var i=document.createElement("div");return i.className=e,t&&t.appendChild(i),i}}),vui.widgets.PricingArea=new Class({Extends:vui.widgets.Container,elemPosition:"static",elemClassName:"movieDetailPricingArea",init:function(){this.offerPanel=new vui.widgets.PricingPanel,this.attachChild(this.offerPanel,this.elem),this.thirdPartyArea=new vui.widgets.ThirdPartyDetails,this.attachChild(this.thirdPartyArea,this.elem)},bind:function(e){this.offerPanel.bind(e),this.thirdPartyArea.bind(e.data)},getAriaLabel:function(){return this.offerPanel.getAriaLabel()}}),vui.widgets.PricingPanel=new Class({Extends:vui.widgets.Container,elemPosition:"static",init:function(){this.offerArea=this.elem,this.offerArea.className="infoPanelOfferArea",this.rentFrom=this._createDiv("pdpInfoPanelRentFrom",this.offerArea),this.rentFromText=this._createDiv("infoPanelRentFromText",this.rentFrom),this.rentFromText.innerHTML=vui.vvPlatform.appFeatureEnabled()?vui.strings.getTransformedText("MOVIE_DETAILS_RENT_FROM"):"RENT",this.rentFromPrice=this._createDiv("fontLarge pdpInfoPanelRentFromPrice",this.rentFrom),this.ownFrom=this._createDiv("pdpInfoPanelOwnFrom",this.offerArea),this.ownFromText=this._createDiv("infoPanelOwnFromText",this.ownFrom),this.ownFromText.innerHTML=vui.vvPlatform.appFeatureEnabled()?vui.strings.getTransformedText("MOVIE_DETAILS_OWN_FROM"):"BUY",this.ownFromPrice=this._createDiv("fontLarge pdpInfoPanelOwnFromPrice",this.ownFrom),this.preOrderFrom=this._createDiv("pdpInfoPanelPreOrderFrom",this.offerArea),this.preOrderFrom.style.marginTop="0",this.preOrderFromText=this._createDiv("detailInfoPanelPreOrderFromText",this.preOrderFrom),this.preOrderFromText.innerHTML=vui.strings.transformCase("Pre-Order"),this.preOrderFromPrice=this._createDiv("fontLarge pdpInfoPanelPreOrderFromPrice",this.preOrderFrom),this.offerInfo=this._createDiv("condOfferInfoPanel",this.offerArea),this.offerInfo.style.display="none",this.offerLabel=this._createDiv("infoPanelOfferLabel",this.offerArea),this.offerArea.style.display="none"},getAriaLabel:function(){var e="";return this.rentFromPrice.innerHTML&&(e+=this.rentFromText.innerHTML+": "+this.rentFromPrice.innerHTML+". "),this.ownFromPrice.innerHTML&&(e+=this.ownFromText.innerHTML+": "+this.ownFromPrice.innerHTML+". "),this.preOrderFromPrice.innerHTML&&(e+=this.preOrderFromText.innerHTML+": "+this.preOrderFromPrice.innerHTML+". "),e},bind:function(e){var t,i,s,n=e&&e.data;e&&e.data&&e.data.variants&&(s=[],s=vui.getModel().getBestOffer(n),"bonus"===n.type[0]?(this.offerArea.style.display="none",this.offerLabel.style.display="block",vui._.innerHTML(this.offerLabel,vui.strings.getText("WATCH_FREE"))):s[2]?(this.offerLabel.style.display="none",this.offerArea.style.display="inline-block",s[2].Purchase?(this.ownFrom.style.display="block","discount"==s[2].Purchase[1]?(t=s[2].Purchase[0],this.ownFromPrice.style.color="#ff8f02"):(t=s[2].Purchase,n.conditionalOfferPrice==s[2].Purchase&&(this.ownFromPrice.style.color="#ff8f02"),s[2].walmartOffer&&parseFloat(s[2].walmartOffer)<parseFloat(t)&&(t=s[2].walmartOffer)),vui._.innerHTML(this.ownFromPrice,"$"+t)):this.ownFrom.style.display="none",s[2].Rental?("discount"==s[2].Rental[1]?(i=s[2].Rental[0],this.rentFromPrice.style.color="#ff8f02"):(i=s[2].Rental,n.conditionalOfferPrice==s[2].Rental&&(this.rentFromPrice.style.color="#ff8f02")),this.rentFrom.style.display="block",vui._.innerHTML(this.rentFromPrice,"$"+i)):this.rentFrom.style.display="none",s[2].PreOrder?(n.conditionalOfferPrice==s[2].PreOrder&&(this.preOrderFromPrice.style.color="#ff8f02"),this.preOrderFrom.style.display="block",this.offerArea.style.display="inline-block",vui._.innerHTML(this.preOrderFromPrice,"$"+s[2].PreOrder)):this.preOrderFrom.style.display="none"):(this.offerArea.style.display="none",this.offerLabel.style.display="block",vui._.innerHTML(this.offerLabel,s[0])))},_createDiv:function(e,t){var i=document.createElement("div");return i.className=e,t&&t.appendChild(i),i}}),vui.widgets.AgeRating=new Class({Extends:vui.widgets.Base,elemPosition:"static",elemClassName:"ageRating",init:function(){var e=this.elem;e.style.display="none",this.title=createDiv({className:"ratingBlockText",position:"static"},e),this.title.innerHTML=vui.strings.getText("FAMILY_AGE_RATING"),this.logo=createImg({src:"",position:"static"},this.elem),this.logo.className="ageRatingLogo",this.ageLimit=-1},bind:function(e){var t="age"+e+"_detail";this.ageLimit=e,this.logo.src=vui.images.commonSense[t],this.elem.style.display="inline-block"},getAriaLabel:function(){return 0<this.ageLimit?this.title.innerHTML+": "+this.ageLimit:""}}),vui.widgets.IconInfoBlock=new Class({Extends:vui.widgets.Base,elemClassName:"movieDetailsIconInfo",elemPosition:"static",init:function(){this.crb=new vui.widgets.NewRatingBlock("community"),this.crb.elem.className="newCommunityRating",this.elem.appendChild(this.crb.elem),vui.features.TOMATOMETER&&(this.rb=new vui.widgets.NewTomatoRatingBlock,this.rb.elem.className="newTomatoRating",this.rb.elem.style.display="none",this.elem.appendChild(this.rb.elem)),this.ageRating=new vui.widgets.AgeRating,this.ageRating.elem.style.display="none",this.elem.appendChild(this.ageRating.elem)},bind:function(e){this.crb.bind(e),vui.features.TOMATOMETER&&(this.rb.elem.style.display="none",this.rb.bind(e)),e.data.ageLimit&&(this.ageRating.elem.style.display="none",this.ageRating.bind(e.data.ageLimit[0]))},refreshBind:function(e){this.crb.bind(e)},hide:function(){this.crb&&this.crb.pause()},getAriaLabel:function(){return this.crb.getAriaLabel()+", "+this.rb.getAriaLabel()+", "+this.ageRating.getAriaLabel()+". "}}),vui.widgets.ThirdPartyDetails=new Class({Extends:vui.widgets.Base,elemClassName:"movieDetailsThirdParty",init:function(){this.elem.style.display="none",this.elem.style.position="relative",this.title=createDiv({className:"title",position:"relative"},this.elem),this.iconContainer=createDiv({position:"relative"},this.elem),this.iconContainer.style.display="block",this.icons=createDiv({className:"icons",position:"relative"},this.iconContainer),this.icon_0=createImg({position:"static"},this.icons),this.icon_1=createImg({position:"static"},this.icons),this.icon_2=createImg({position:"static"},this.icons),this.more=createDiv({className:"more fontWhite16",text:vui.strings.transformCase("& more"),position:"relative"},this.iconContainer),this.more.style.display="none"},bind:function(e){var t;vui._.aStr(e.subscriptionServiceContents)&&e.subscriptionServiceContents[0].subscriptionServiceContent?(t=getThirdPartyInfo(e,"detail"),this.title.innerHTML=t.title,t.hasOffers&&this.elem.addClass("hasOffers"),t.icons.forEach(function(e,t){this["icon_"+t].src=e}.bind(this)),t.more&&(this.more.style.display="inline-block"),this.elem.style.display="inline-block",t.icons&&1<t.icons.length&&(this.elem.addClass("multiIcons"),this.elem.style.display="block")):this.hide()}}),vui.CCModel={CC_SETTINGS_SCHEMA_VERSION:1,_busy:!1,defaultStyle:{size:window.vui.ResDef.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM+"",color:"D0D0D0",font:"Bariol",edge:"Default",background:"transparent",window:"transparent",color_transparent:"Default",background_transparent:"Default",window_transparent:"Default"},options:{size:{optionNames:["Default","Small","Medium","Large"],optionVals:["",window.vui.ResDef.Theater.CLOSEDCAPTION_FONTSIZE_SMALL+"",window.vui.ResDef.Theater.CLOSEDCAPTION_FONTSIZE_MEDIUM+"",window.vui.ResDef.Theater.CLOSEDCAPTION_FONTSIZE_LARGE+""],currentIndex:0},color:{optionNames:["Default","Black","White","Red","Green","Blue","Magenta","Yellow","Cyan"],optionVals:["","000000","D0D0D0","D00000","00D000","0000D0","D000D0","D0D000","00D0D0"],currentIndex:0},background:{optionNames:["Default","Black","White","Red","Green","Blue","Magenta","Yellow","Cyan"],optionVals:["","000000","B0B0B0","B00000","00B000","0000B0","B000B0","B0B000","00B0B0"],currentIndex:0},font:{optionNames:["Default",vui.strings.getText("FONT_CURSIVE"),vui.strings.getText("FONT_CURSIVE_BOLD"),vui.strings.getText("FONT_CASUAL"),vui.strings.getText("FONT_MONOSPACE"),vui.strings.getText("FONT_SERIF"),vui.strings.getText("FONT_SANS_SERIF"),vui.strings.getText("FONT_MONO_SANS_SERIF"),vui.strings.getText("FONT_CAPS")],optionVals:["","LobsterTwo","LobsterTwoBold","Comictalk","Anonymous","Aleo","ProximaNova","VeraMono","EngraversGothic"],currentIndex:0},decoration:{optionNames:["Default","Bold","Italic","Bold Italic","Bold Underline","Italic Underline","Bold Italic Underline"],optionVals:["","Bold","Oblique","Bold Oblique","Bold Underline","Oblique Underline","Bold Oblique Underline"],currentIndex:0},window:{optionNames:["Default","Black","White","Red","Green","Blue","Magenta","Yellow","Cyan"],optionVals:["","000000","D0D0D0","D00000","00D000","0000D0","D000D0","D0D000","00D0D0"],currentIndex:0},color_transparent:{optionNames:["Default","25%","50%","75%","100%"],optionVals:["","40","80","be","ff"],currentIndex:0},background_transparent:{optionNames:["Default","0%","25%","50%","75%","100%"],optionVals:["","00","40","80","be","ff"],currentIndex:0},window_transparent:{optionNames:["Default","0%","25%","50%","75%","100%"],optionVals:["","00","40","80","be","ff"],currentIndex:0},edge:{optionNames:["Default","Raised","Depressed","Uniform","Drop Shadowed"],optionVals:["","raised","depressed","uniform","drop shadowed"],currentIndex:0}},ccSelected:"off",loadSaveKey:"ccModel",init:function(){this.queryType="user",window.SUPPORTS_NEW_FCC_CEA708=!0,window.VIZIO&&window.VIZIO.isSmartCastDevice&&window.VIZIO.setClosedCaptionHandler(function(e){if(controller.baseLayer.currentPage&&"Theater"===controller.baseLayer.currentPage.pageTitle&&controller.baseLayer.currentPage.showTopAndTrackbar(!0),e){if(console.log("Vizio isCCEnabled = true"),controller.baseLayer.currentPage)for(var t=controller.baseLayer.currentPage.subtitleLanguages||[],i=0;i<t.length;i++)"English"===t[i].language&&vui.executeOnContainer(window.vui.getSelected(),"setCurrentSubtitle",t[i]);this.ccSelected="en"}else console.log("Vizio isCCEnabled = false"),vui.executeOnContainer(window.vui.getSelected(),"hideSubtitles",{down:!1,count:1}),this.ccSelected="off"}.bind(this)),this.load(function(){})},save:function(){if(this.loadSaveKey){var e={version:this.CC_SETTINGS_SCHEMA_VERSION};e.ccSelected=[this.ccSelected];var t=["font","size","color","window"];t.push("edge","background","color_transparent","background_transparent","window_transparent");for(var i=0;i<t.length;i++){var s=t[i];e[s]=[],e[s].push(this.getOptionValueByName(s))}e=[e];vui.settings.save(this.queryType,this.loadSaveKey,e,function(){alert("SAVED CC!!")})}},acceptSavedVal:function(i,s){s&&Array.each(this.options[i].optionVals,function(e,t){e===vui._.aStr(s)&&(this.options[i].currentIndex=t)}.bind(this))},load:function(i){var e=function(e){var t;e?0<e.length?(t=e[0]).CC_SETTINGS_SCHEMA_VERSION&&this.CC_SETTINGS_VERSION!==t.CC_SETTINGS_VERSION?alert("ERROR: CC_SETTINGS_SCHEMA_VERSION DOESNT MATCH, ours:"+this.CC_SETTINGS_VERSION+", from the server:"+t.CC_SETTINGS_VERSION):(this.acceptSavedVal("font",t.font),this.acceptSavedVal("color",t.color),this.acceptSavedVal("size",t.size),this.acceptSavedVal("window",t.window),this.acceptSavedVal("edge",t.edge),this.acceptSavedVal("background",t.background),this.acceptSavedVal("color_transparent",t.color_transparent),this.acceptSavedVal("background_transparent",t.background_transparent),this.acceptSavedVal("window_transparent",t.window_transparent),null!==t.ccSelected&&t.ccSelected.length?this.ccSelected=t.ccSelected[0]:this.ccSelected="off",alert("CC load success:"+JSON.encode(this.options))):alert("CC load failed, data not structured correctly"):alert("CC load failed"),i()}.bind(this);vui.settings.load(this.queryType,this.loadSaveKey,e)},getOptionValueByName:function(e){return this.options[e]&&this.options[e].optionVals?this.options[e].optionVals[this.options[e].currentIndex]||"":null},getStyleOverride:function(e){if(!this.options[e])return null;if("window_transparent"==e||"background_transparent"==e)return null;var t=this.options[e].currentIndex;if(0===t&&"font"!==e)return null;var i,s,n=this.options[e].optionVals[t];return"background"!==e&&"window"!==e||(n="Default"===(i=this.getOptionValueByName(e))?"":i.match(/^#?[0-9a-f]{6}$/i)?(s=(s=this.getOptionValueByName(e+"_transparent"))||"ff",vui.hex2rgba("#"+i+s)):(alert("Error: bg color must be 6-digit color code. "+e+": "+i),"")),n},getOnlyMyStyles:function(){var e={};for(var t in this.defaultStyle){var i=this.getStyleOverride(t);i&&(e[t]=i)}return e},ResetSettings:function(){var e=vui.CCModel.options;for(var t in e)e[t].currentIndex=0;vui.CCModel.save()}},vui.widgets.ResetCCButton=new Class({Extends:vui.widgets.ImageActionButton,width:155,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size5_default",e.selectClassName="btn_bg_select btn_bg_size5_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.buttonIndex=0,this.itemKey=0,this.setLabel(vui.strings.getTransformedText("SETTINGS_CLOSED_CAPTION_DEFAULT"))},onAction:function(){vui.CCModel.ResetSettings(),vui.executeOnContainer(this.parentWidget,"redrawSettings")},onSelect:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent()}}),vui.widgets.CCButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="ccButton_bg_default",e.selectClassName="ccButton_bg_select",this.parent(e),this.buttonIndex=e.buttonIndex,this.itemKey=e.itemKey,this.ariaLabel=e.name.replace(/BG/,"Background"),this.arrow=createImg({className:"ccMenuArrow",src:vui.images.menu_arrow,position:"relative"},this.elem)},bind:function(){var e=vui.CCModel.options[this.itemKey].currentIndex,t=vui.CCModel.options[this.itemKey].optionNames[e];this.setLabel(t),this.updateAriaLabel(t)},updateAriaLabel:function(e){this.optionLabel=e},onAction:function(){vui.executeOnContainer(this.parentWidget,"ccButtonClicked",this.buttonIndex)},onSelect:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent(),vui._.setAriaLabel(this.ariaLabel+". Currently: "+this.optionLabel),vui.vvPlatform.appFeatureEnabled()||(this.arrow.src=vui.images.menu_arrow_black)},onDeselect:function(){this.parent(),vui.vvPlatform.appFeatureEnabled()||(this.arrow.src=vui.images.menu_arrow)}}),vui.widgets.ccSettingsMenu=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ccSettingsMenu",elemClassName:"CCSettingsMenu",init:function(i){var s=vui.widgets.MenuPanelButton,n=[],a=window.vui.ResDef.infoSettingsView.CC_MENU_BUTTON_W,o=window.vui.ResDef.infoSettingsView.CC_MENU_BUTTON_H;this.elem.setAttribute("role","listbox"),this.params=i,this.itemKey=i.itemKey;var e=vui.CCModel.options[this.itemKey];Array.each(e.optionNames,function(e,t){n.push({buttonClass:s,selectorClassName:"highlightGreen",defaultClassName:"btn_bg_default btn_bg_size22_default",selectClassName:"btn_bg_select btn_bg_size22_select",elemClassName:"ccSettingsMenuButton noDefaultBg",labelClassName:"font18",width:a,height:o,label:e,onAction:function(){vui.select(this),vui.executeOnContainer(this.parentWidget,"ccOptionClicked",{optionIndex:t,itemIndex:i.itemIndex})},onSelect:function(){vui._.setAriaLabel(e),vui.executeOnContainer(this.parentWidget,"ccOptionSelected",{optionIndex:t,itemIndex:i.itemIndex})}.bind(this)})}.bind(this)),n[0].onDirectionUp=function(){};var t=new vui.widgets.MenuPanel({elemClassName:"ccSettingsMenuPanel",width:window.vui.ResDef.infoSettingsView.CC_MENU_BUTTON_W,menuButtonPadding:0});this.mymenu=t,this.attachChild(t),this.mymenu.bind(n,"ccSettings"),this.mymenu.elem.style.height=Math.max(156,Number(this.mymenu.elem.style.height.slice(0,-2)))+"px"},selectMenuButtonAtIndex:function(e){this.menu.selectMenuButtonAtIndex(e)},onBack:function(){vui.executeOnContainer(this.parentWidget,"closeDropdown",this.params.itemIndex)}}),vui.widgets.CCPanel=new Class({Extends:vui.widgets.Container,elemClassName:"ccPanel",title:vui.strings.getText("SETTINGS_CLOSED_CAPTION_HEADING"),layout:{type:"vertical"},menuArray:[],columns:[{heading:vui.strings.getText("FONT_TITLE"),key:"font",selectedIndex:0},{heading:vui.strings.getText("COLOR_TITLE"),key:"color",selectedIndex:0},{heading:vui.strings.getText("SIZE_TITLE"),key:"size",selectedIndex:0},{heading:vui.strings.getText("BACKGROUND_TITLE"),key:"background",selectedIndex:0},{heading:vui.strings.getText("WINDOW_TITLE"),key:"window",selectedIndex:0},{heading:vui.strings.getText("TEXT_EDGE"),key:"edge",selectedIndex:0},{heading:vui.strings.getText("TEXT_OPACITY"),key:"color_transparent",selectedIndex:0},{heading:vui.strings.getText("BACKGROUND_OPACITY"),key:"background_transparent",selectedIndex:0},{heading:vui.strings.getText("WINDOW_OPACITY"),key:"window_transparent",selectedIndex:0}],buttons:[],columnCount:4,initialize:function(){window.SUPPORTS_NEW_FCC_CEA708=!0,this.parent()},init:function(){vui._.setAriaLabel("Closed Captioning: Customize your captioning"),this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.container3=new vui.widgets.HorizontalContainer({elemClassName:"ccSettings-action-buttons-container"}),this.attachChild(this.container3),this.resetButton=new vui.widgets.ResetCCButton({elemClassName:"ccSettings_reset_button imageActionButton"}),this.container3.attachChild(this.resetButton),this.subtitles=new vui.widgets.SubTitleWidgets;var e=new vui.widgets.Table({elemClassName:"ccSettings_sampleText_table"});this.elem.appendChild(e.elem);var t=e.addRow();this.sampleCell=e.addCell(t),this.sample_bg=document.createElement("div"),this.sample_bg.className="ccSettings_sampleText_bg",this.sample=document.createElement("span"),this.sample.className="ccSettings_sampleText",this.sampleCell.appendChild(this.sample_bg),this.sample_bg.appendChild(this.sample),this.sample.innerHTML="Sample Text",this.container=new vui.widgets.HorizontalContainer,this.container.onDirectionDown=function(e){var t=this.container2.children[this.container.selected]||this.container2.children[this.container2.children.length-1];t?vui.select(t):vui.executeOnContainer(this,"onDirectionDown")}.bind(this),this.attachChild(this.container),this.container2=new vui.widgets.HorizontalContainer,this.container2.onDirectionUp=function(e){var t=this.container.children[this.container2.selected]||this.container.children[this.container.children.length-1];t?vui.select(t):vui.executeOnContainer(this,"onDirectionUp")}.bind(this),this.attachChild(this.container2);var i=new vui.widgets.Table({elemClassName:"ccSettings_table"});i.elem.style.left=window.vui.ResDef.infoSettingsView.CC_MENU_TABLE_L+"px",i.elem.style.top=window.vui.ResDef.infoSettingsView.CC_MENU_TABLE1_T+"px",this.elem.appendChild(i.elem);var s=new vui.widgets.Table({elemClassName:"ccSettings_table2"});s.elem.style.left=window.vui.ResDef.infoSettingsView.CC_MENU_TABLE_L+"px",s.elem.style.top=window.vui.ResDef.infoSettingsView.CC_MENU_TABLE2_T+"px",this.elem.appendChild(s.elem);for(var n,a=i.addRow(),o=s.addRow(),r=0;r<this.columns.length;r++)(n=r<=this.columnCount?i.addCell(a):s.addCell(o)).className="ccHeader_text",n.innerHTML=this.columns[r].heading;for(a=i.addRow(),o=s.addRow(),r=0;r<this.columns.length;r++){var l=this.columns[r],u=r<=this.columnCount?(n=i.addCell(a),this.container):(n=s.addCell(o),this.container2),d=new Element("div");d.className="ccButton-container",n.appendChild(d);var c=new vui.widgets.CCButton({label:"Default",buttonIndex:r,itemKey:l.key,name:this.columns[r].heading});c.bind(),u.attachChild(c,d),this.buttons.push(c);var h=new vui.widgets.ccSettingsMenu({itemIndex:r,itemKey:l.key});this.attachChild(h),h.selectable=!1,h.hide(),this.menuArray.push(h)}this.styleMyElement(this.sample)},styleMyElement:function(e){e.style.fontWeight="normal",e.style.fontStyle="normal",e.style.textDecoration="none";var t={};for(var i in $extend(t,vui.CCModel.defaultStyle),t){var s=vui.CCModel.getStyleOverride(i);s&&(t[i]=s)}this.subtitles.applyStyle({container:this.sampleCell,content:this.sample},t)},ccButtonClicked:function(e){for(var t=0;t<this.buttons.length;t++)e!==t&&this.closeDropdown(t);this.currentIndex=e,this.container.selectable=!1,this.container2.selectable=!1,this.container3.selectable=!1,this.resetButton.selectable=!1;var i=this.buttons[e].elem.getPosition(this.elem);this.menuArray[e].elem.style.left=i.x+"px",this.menuArray[e].elem.style.top=i.y+"px",this.menuArray[e].show(),this.menuArray[e].selectable=!0},ccOptionClicked:function(e){var t=vui.CCModel.options[this.columns[e.itemIndex].key];this.buttons[e.itemIndex].setLabel(t.optionNames[e.optionIndex]),this.closeDropdown(this.currentIndex),t.currentIndex=[e.optionIndex],this.styleMyElement(this.sample),vui.CCModel.save()},ccOptionSelected:function(e){var t=vui.CCModel.options[this.columns[e.itemIndex].key];this.buttons[e.itemIndex].setLabel(t.optionNames[e.optionIndex]),t.currentIndex=[e.optionIndex],this.styleMyElement(this.sample),vui.CCModel.save()},closeDropdown:function(e){var t=vui.CCModel.options[this.columns[e].key];this.buttons[e].updateAriaLabel(t.optionNames[t.currentIndex]),this.menuArray[e].hide(),this.menuArray[e].selectable=!1,this.container.selectable=!0,this.container2.selectable=!0,this.container3.selectable=!0,e<=this.columnCount?vui.select(this.container):vui.select(this.container2),this.resetButton.selectable=!0},redrawSettings:function(){for(var e=0;e<this.buttons.length;e++)this.buttons[e].bind();this.styleMyElement(this.sample)}}),vui.widgets.kidsModeSelectButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){this.itemIndex=e.itemIndex,this.arrow=createImg({className:"kidsModeArrow",src:vui.images.menu_arrow,position:"relative"},this.elem),e.defaultClassName="kidsModeSelectButton kidsModeSelectButton_default",e.selectClassName="kidsModeSelectButton kidsModeSelectButton_select btn_bg_select",this.parent(e),this.ariaLabel=e.labelText},bind:function(e){var t,i=vui.familyModel.options[e.settingGroup][e.itemIndex].optionNames;i&&(t=i[e.optionIndex],this.setLabel(t),this.updateAriaLabel(t)),this.group=e.settingGroup},updateAriaLabel:function(e){this.optionLabel=e},setAriaLabel:function(){vui._.setAriaLabel(this.ariaLabel+". Currently: "+this.optionLabel)},onAction:function(){var e;vui.account.getAccountId()?(vui.executeOnContainer(this.parentWidget,"updateMenuSelection",{itemIndex:this.itemIndex,group:this.group}),vui.executeOnContainer(this.parentWidget,"kidsModeButtonClicked",{index:this.itemIndex})):(e=function(e){"quit"!==e&&"success"===e&&(vui.executeOnContainer(this.parentWidget,"updateMenuSelection",{itemIndex:this.itemIndex,group:this.group}),vui.executeOnContainer(this.parentWidget,"kidsModeButtonClicked",{index:this.itemIndex}))}.bind(this),vui.ActivationController.beginActivation(e,"setting"))},onSelect:function(){vui.vvPlatform.appFeatureEnabled()||(this.arrow.src=vui.images.menu_arrow_black),vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent();var e=this.ariaLabel+". Currently: "+this.optionLabel;controller.baseLayer.currentPage&&"infoSettings"===controller.baseLayer.currentPage.activeTab&&(this.ariaLabel===vui.strings.getText("KIDS_AGE_LIMIT")?e=vui.strings.getText("FAMILY_SETTINGS_KM")+". "+vui.strings.getText("FAMILY_SETTINGS_DESC_KM")+" "+vui.strings.getText("KIDS_VIEW_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/kids privacy":"vudu.com/kids privacy")+". "+e:this.ariaLabel===vui.strings.getText("KIDS_REQ_PIN_PURCHASE")&&(e=vui.strings.getText("SETTINGS_PARENTAL_CONTROLS_HEADING")+". "+vui.strings.getText("FAMILY_SETTINGS_DESC_PC")+". "+e)),vui._.setAriaLabel(e)},onDeselect:function(){this.parent(),vui.vvPlatform.appFeatureEnabled()||(this.arrow.src=vui.images.menu_arrow)}}),vui.widgets.KidsModeSelectMenu=new Class({Extends:vui.widgets.Container,name:"vui.widgets.kidsModeSelectMenu",elemClassName:"kidsModeSelectMenu",init:function(n){var e=vui.widgets.MenuPanelButton,t=[];this.elem.setAttribute("role","listbox"),this.params=n,this.itemKey=n.itemKey;var i=n.data;this.currentStart=0,this.lengthLimit=n.lengthLimit,this.currentEnd=n.lengthLimit-1,Array.each(i,function(i,s){t.push({buttonClass:e,selectorClassName:"highlightGreen",defaultClassName:"km_list_button km_list_button_default",selectClassName:"km_list_button km_list_button_select btn_bg_select",elemClassName:"km_list_button km_list_button_default",labelClassName:"fontWhite18",elemPosition:"relative",label:i,onAction:function(){vui.select(this),vui.executeOnContainer(this.parentWidget,"kidsModeOptionClicked",{optionIndex:s,itemIndex:n.itemIndex})},onSelect:function(){var e=vui.getSelected(),t=i;e.index&&e.index===this.params.data.length-1&&(t+=". End of list."),vui._.setAriaLabel(t),vui.executeOnContainer(this.parentWidget,"kidsModeOptionSelected",{optionIndex:s,itemIndex:n.itemIndex}),this.currentEnd=s,this.moveWindow(),vui.vvPlatform.appFeatureEnabled()||(0===s?this.menuArrowUp&&(this.menuArrowUp.src=vui.images.menu_arrow_black):this.menuArrowUp&&(this.menuArrowUp.src=vui.images.menu_arrow))}.bind(this)})}.bind(this));var s=new vui.widgets.MenuPanel({elemClassName:"kidsModeSelectMenuPanel",width:"auto",height:"auto"});s.elem.style.position="relative",this.mymenu=s,t.length>this.lengthLimit?this.scrollArrowUp=createImg({className:"kidsModeArrow indicatorUp",src:vui.images.kidsMode.scroll_arrow_up,position:"relative"},this.mymenu.elem):this.menuArrowUp=createImg({className:"kidsModeArrow menuIndicatorUp",src:vui.images.menu_arrow,position:"relative"},this.mymenu.elem),this.attachChild(s),this.mymenu.bind(t),t.length>this.lengthLimit&&(this.scrollArrowDown=createImg({className:"kidsModeArrow indicatorDown",src:vui.images.kidsMode.scroll_arrow_down,position:"relative"},this.mymenu.elem)),this.hideButtonsAfterIndex(this.currentEnd)},updateMenuSelection:function(e){this.currentEnd=e,this.initWindow(),vui.vvPlatform.appFeatureEnabled()||(0===e?(this.menuArrowUp&&(this.menuArrowUp.src=vui.images.menu_arrow_black),this.scrollArrowUp&&(this.scrollArrowUp.src=vui.images.kidsMode.scroll_arrow_up_black)):(0===this.currentStart&&e>=this.lengthLimit-1||0!==this.currentStart&&e>this.lengthLimit-1)&&this.scrollArrowDown&&(this.scrollArrowDown.src=vui.images.kidsMode.scroll_arrow_down_black)),this.mymenu.selectMenuButtonAtIndex(e)},hideButtonsAfterIndex:function(e){var t=this.mymenu.children;if(e<t.length)for(var i=0;i<t.length;i++)e<i&&(t[i].elem.style.display="none")},showOneButtonAfterIndex:function(e){this.mymenu.children[e+1].elem.style.display="block"},hideButtonsBeforeIndex:function(e){var t=this.mymenu.children;if(e<t.length)for(var i=0;i<t.length;i++)i<e&&(t[i].elem.style.display="none")},showOneButtonBeforeIndex:function(e){this.mymenu.children[e-1].elem.style.display="block"},showButtonsBeforeIncludeIndex:function(e){var t=this.mymenu.children;if(e<t.length)for(var i=0;i<t.length;i++)i<=e&&(t[i].elem.style.display="block")},initWindow:function(){this.currentEnd>=this.lengthLimit&&(this.currentStart=this.currentEnd-this.lengthLimit+1,this.showButtonsBeforeIncludeIndex(this.currentEnd),this.hideButtonsBeforeIndex(this.currentStart),this.hideButtonsAfterIndex(this.currentEnd))},moveWindow:function(){var e=this.mymenu.children;e[this.currentEnd].onDirectionDown=function(){this.currentEnd!==this.mymenu.children.length-1?(this.currentEnd-this.currentStart>this.lengthLimit-2&&(this.hideButtonsBeforeIndex(this.currentStart+1),this.showOneButtonAfterIndex(this.currentEnd),this.currentStart+=1),this.currentEnd+=1,vui.vvPlatform.appFeatureEnabled()||(this.scrollArrowUp&&(this.scrollArrowUp.src=vui.images.kidsMode.scroll_arrow_up),this.currentEnd-this.currentStart==this.lengthLimit-1&&this.currentEnd>=this.lengthLimit-1&&this.scrollArrowDown&&(this.scrollArrowDown.src=vui.images.kidsMode.scroll_arrow_down_black)),vui.select(this.mymenu.children[this.currentEnd])):vui._.setAriaLabel("End of list.")}.bind(this),e[this.currentEnd].onDirectionUp=function(){0!==this.currentEnd&&(this.currentEnd<=this.currentStart&&(this.hideButtonsAfterIndex(this.currentEnd+this.lengthLimit-2),this.showOneButtonBeforeIndex(this.currentStart),--this.currentStart),--this.currentEnd,vui.vvPlatform.appFeatureEnabled()||(this.scrollArrowDown&&(this.scrollArrowDown.src=vui.images.kidsMode.scroll_arrow_down),this.currentEnd===this.currentStart&&this.currentEnd<=this.lengthLimit&&this.scrollArrowUp&&(this.scrollArrowUp.src=vui.images.kidsMode.scroll_arrow_up_black)),vui.select(this.mymenu.children[this.currentEnd]))}.bind(this),e[this.currentEnd].onDirectionLeft=function(){},e[this.currentEnd].onDirectionRight=function(){}},onBack:function(){vui.executeOnContainer(this.parentWidget,"closeDropdown",this.params.itemIndex)}}),vui.widgets.KidsModeSelectContainer=new Class({Extends:vui.widgets.HorizontalContainer,init:function(e){this.elem.className=e.elemClassName,this.selectable=!0,createDiv({className:"kidsModeSelectLabel",text:e.labelText,position:"relative"},this.elem),this.kidsModeSelect=new vui.widgets.kidsModeSelectButton({itemIndex:e.index,labelText:e.labelText}),this.kidsModeSelect.selectable=!0,this.kidsModeSelect.bind({settingGroup:e.settingGroup,itemIndex:e.index,optionIndex:vui.familyModel.options[e.settingGroup][e.index].currentOption}),this.attachChild(this.kidsModeSelect),0===e.index&&"kidsModeSettings"===e.settingGroup&&createImg({src:vui.images.commonSense.mediaLogo,className:"kidsModeCommonSenseLogo",position:"relative"},this.elem),this.kidsModeSelectMenu=new vui.widgets.KidsModeSelectMenu({itemIndex:e.index,itemKey:e.settingGroup+"_"+e.index,data:vui.familyModel.options[e.settingGroup][e.index].optionNames,lengthLimit:e.lengthLimit}),this.kidsModeSelectMenu.elem.style.position="relative",this.attachChild(this.kidsModeSelectMenu),this.kidsModeSelectMenu.selectable=!1,this.kidsModeSelectMenu.hide()},bind:function(e){e.push(this.kidsModeSelectMenu)},updateLabel:function(e){this.kidsModeSelect.bind(e)},setAriaLabel:function(){this.kidsModeSelect.setAriaLabel()},updateMenuSelection:function(e){var t=this.getCurrentSelection(e);this.kidsModeSelectMenu.updateMenuSelection(t)},getCurrentSelection:function(e){var t=vui.familyModel;if("kidsModeSettings"===e.group)switch(e.itemIndex){case 0:return Number(t.getIndexFromAgeLimit(t.getAgeLimit()));case 1:return Number(t.getNeedExitPin());case 2:return Number(!t.getShowAVOD())}else if("parentalSettings"===e.group)switch(e.itemIndex){case 0:return Number(t.getPurchase());case 1:return Number(t.getPlayback())}}}),vui.widgets.ParentalControlsPanel=new Class({Extends:vui.widgets.Container,elemClassName:"parentalControlsPanel",layout:{type:"vertical"},initialize:function(e){this.parent(e),this.elem.style.position="absolute";var t=new Element("img",{class:"familySettingLogo",border:"0"});t.src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.elem.appendChild(t),this.header=new vui.widgets.TextPanel({elemClassName:"pcPanelHeader",textLabel:vui.strings.getText("FAM_BUY_WATCH_CONTROLS_HEADING")}),this.header.elem.style.position="relative",this.attachChild(this.header),this.header.selectable=!1,this.description=new vui.widgets.TextPanel({elemClassName:"pcPanelDescription",textLabel:vui.strings.getText("FAMILY_SETTINGS_DESC_PC")}),this.description.elem.style.position="relative",this.attachChild(this.description),this.description.selectable=!1,this.attachChild(new vui.widgets.ParentalControlsDropDowns)}}),vui.widgets.ParentalControlsDropDowns=new Class({Extends:vui.widgets.Container,elemClassName:"parentalControlsDropDowns",layout:{type:"horizontal"},menuArray:[],map:{0:[vui.strings.getText("KIDS_REQ_PIN_PURCHASE"),"purchasePinSelectContainer"],1:[vui.strings.getText("KIDS_REQ_PIN_PLAYBACK"),"playbackPinSelectContainer"]},initialize:function(e){this.parent(e),this.elem.style.position="relative";var t=vui.familyModel.options.parentalSettings;if(t)for(var i=0;i<t.length;i++){e={settingName:t[i].settingName,labelText:this.map[i][0],index:i};this[this.map[i][1]]=this.attachSelectContainer(e)}},attachSelectContainer:function(e){var t=new vui.widgets.KidsModeSelectContainer({elemClassName:"parentalSettings_"+e.settingName,labelText:e.labelText,index:e.index,settingGroup:"parentalSettings"});return t.elem.style.display="inline-block",t.bind(this.menuArray),this.attachChild(t),t},kidsModeButtonClicked:function(i){var t=function(){for(var e=i.index,t=0;t<this.menuArray.length;t++)e!==t&&this.closeDropdown(t);this.currentIndex=e,this.menuArray[e].show(),vui.select(this.menuArray[e]),this.menuArray[e].selectable=!0}.bind(this),e=new vui.familyPINActions;vui.familyModel.getPasscode()?t():e.setOrChangePasscode("init_pin",function(e){1==e?t():alert("FAILED TO SET PARENTAL CONTROLS PIN!")})},kidsModeOptionClicked:function(n){var e,t;this.closeDropdown(this.currentIndex),Number(vui.familyModel.options.parentalSettings[n.itemIndex].currentOption)!==n.optionIndex&&(e=function(e){var t,i,s;"correct"===e?(i=null,t={settingGroup:"parentalSettings",itemIndex:n.itemIndex,optionIndex:n.optionIndex},(i=this[this.map[n.itemIndex][1]]).updateLabel(t),i.setAriaLabel(),vui.familyModel.selected=[n.itemIndex,n.optionIndex],vui.familyModel.saveParentalControls(n.itemIndex,n.optionIndex),controller.hidePopup(),s=vui.familyModel.options.parentalSettings,messageText="Rating changed to "+s[n.itemIndex].optionNames[n.optionIndex],controller.showPopup("ZeroButtonDialog",{message:messageText,elemClassName:"zeroButtonDialog messagePopup"}),setTimeout(function(){controller.hidePopup()},2e3)):"back"===e&&controller.hidePopup()}.bind(this),t={heading:vui.strings.getText("SETTINGS_PARENTAL_CONTROLS_HEADING"),promptText:vui.strings.getText("FAM_PARENTAL_CONTROLS_PIN_REQUIRED"),promptText2:vui.strings.getText("SETTINGS_PIN_GRACE_PERIOD"),authType:"family_setting",callback:e},(new vui.familyPINActions).passcodePrompt(t))},kidsModeOptionSelected:function(){},closeDropdown:function(e){this.menuArray[e].hide(),this.menuArray[e].selectable=!1}}),vui.familyModel={KM_SETTINGS_SCHEMA_VERSION:"1",options:{parentalSettings:[{settingName:"purchase",optionNames:[vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_OFF"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_ALL"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_NOT_RATED"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_R"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG_13"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_FAMILY"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_G")],currentOption:0},{settingName:"playback",optionNames:[vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_OFF"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_ALL"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_NOT_RATED"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_R"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG_13"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_PG"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_FAMILY"),vui.strings.getText("KIDS_REQ_PIN_TO_PURCHASE_PLAYBACK_G")],currentOption:0}],kidsModeSettings:[{settingName:"ageLimit",optionNames:[vui.strings.getText("KIDS_AGE_LIMIT_NOT_SET"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_12"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_11"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_10"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_9"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_8"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_7"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_6"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_5"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_4"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_3"),vui.strings.getText("KIDS_AGE_LIMIT_SETTING_2")],currentOption:1},{settingName:"needExitPin",optionNames:[vui.strings.getText("KIDS_REQ_PIN_TO_EXIT_NO"),vui.strings.getText("KIDS_REQ_PIN_TO_EXIT_YES")],currentOption:0},{settingName:"showAvod",optionNames:[vui.strings.getText("KIDS_SHOW_AVOD_SHOW"),vui.strings.getText("KIDS_SHOW_AVOD_HIDE")],currentOption:0}]},loadSaveKey:"familySettings",queryType:"user",selected:[],currentSettings:{},lastAuthTimes:{},maxAuthTimes:{init_pin:0,kids_mode_exit:0,kids_mode_pc:0,family_setting:300,_default:300},isInKidsMode:"",purchaseMaximum:null,playMaximum:null,settingMap:{kidsModeSettings:{ageLimit:0,needExitPin:1,showAvod:2},parentalSettings:{purchase:0,playback:1}},init:function(e){"mex"==vui.RATING_SYSTEM?this.levelRating=this.levelRatingMEX:this.levelRating=this.levelRatingUSA,this.load(e.callback)},reset:function(){this.selected=null,this.save("reset")},saveParentalControls:function(e,t){0===e?this.purchaseMaximum=t+"":this.playMaximum=t+"";var i=vui.getModel().parentalControls;this.purchaseMaximum&&("0"===this.purchaseMaximum?i.purchaseMaximum="Off":i.purchaseMaximum=this.levelRating[this.purchaseMaximum]||i.purchaseMaximum),this.playMaximum&&("0"===this.playMaximum?i.playMaximum="Off":i.playMaximum=this.levelRating[this.playMaximum]||i.playMaximum),"0"!==this.purchaseMaximum||"0"!==this.playMaximum?i.newEnabled=!0:i.newEnabled=!1;var s=function(){this.options&&this.options.parentalSettings&&(this.options.parentalSettings[0].currentOption=this.purchaseMaximum||0,this.options.parentalSettings[1].currentOption=this.playMaximum||0,this.save())}.bind(this);i.save(s)},save:function(e){if(this.loadSaveKey){var t={version:this.KM_SETTINGS_SCHEMA_VERSION,passcode:this.currentSettings.passcode,isInKidsMode:this.isInKidsMode},i=e?this.options.kidsModeSettings:this.options.parentalSettings;null!==this.selected&&0!==this.selected.length&&(0<=this.selected[1]&&this.selected[1]<i[this.selected[0]].optionNames.length&&(i[this.selected[0]].currentOption=this.selected[1]),e&&0===this.selected[0]&&(this.currentSettings.ageLimit=this.getAgeLimitFromIndex(this.selected[1]),0!==this.selected[1]&&(vui.m.kidsModeCache.load(),vui.m.kidsModeCache.loadKidsResumeData())));for(var s=0;s<this.options.kidsModeSettings.length;s++)"reset"===e&&(this.options.kidsModeSettings[s].currentOption=0===s?1:0),t[this.options.kidsModeSettings[s].settingName]=this.options.kidsModeSettings[s].currentOption;for(s=0;s<this.options.parentalSettings.length;s++)"reset"===e&&(this.options.parentalSettings[s].currentOption=0),t[this.options.parentalSettings[s].settingName]=this.options.parentalSettings[s].currentOption;var n=vui.getModel().parentalControls,a=function(){t=[t];var e=function(e){e&&1===e?(alert("SAVED KIDS MODE SETTINGS!!"),this.updateSettings(t[0]),this.isEnablingShowAVOD&&delete this.isEnablingShowAVOD):alert("FAILED TO SAVE KIDS MODE SETTINGS!!")}.bind(this);vui.settings.save(this.queryType,this.loadSaveKey,t,e)}.bind(this);"reset"===e?(t.isInKidsMode="",t.passcode="",n.playMaximum="Off",n.purchaseMaximum="Off",n.newEnabled=!1,n.save(a)):a()}},enterKidsMode:function(e,t,i){this.isInKidsMode="true",this.save(!0);var s,n,a,o=vui.m.kidsModeCache.getCache();t||(s="Age="+vui.familyModel.getAgeLimit()+"||"+("Pin="+(vui.familyModel.getNeedExitPin()?"Y":"N")+"||")+("AVOD="+(vui.familyModel.getShowAVOD()?"Y":"N")+"||")+vui.m.kidsModeCache.getTotalCount(),(a={evars:{}}).evars.kidsModeEntryStatus=s,a.props={},a.props.kidsModeEntry="km entry",vui.analytics.trackEvent("event164",a),n="",a={props:{}},"setting"===e?(n="event168",a.props.kidsModeEntry="kmep_settings"):"library"===e?(n="event169",a.props.kidsModeEntry="kmep_mylib"):"welcome"===e&&(n="event171",a.props.kidsModeEntry="kmep_profile"),vui.analytics.trackEvent(n,a));var r={entry:!0,data:o};"deeplink"===e&&(r.from=e,r.deepLinkParams=i),controller.goToPage("KidsMode",r,!0)},exitKidsMode:function(){this.isInKidsMode="false",this.save(!0)},acceptableValMap:function(e,t,i){return 0<=i&&i<this.options[e][this.settingMap[e][t]].optionNames.length},acceptSavedVal:function(e,t,i){if(i)for(var s=0;s<this.options[e].length;s++)this.options[e][s].settingName===vui._.aStr(t)&&(this.acceptableValMap(e,t,i)?this.options[e][s].currentOption=i:this.options[e][s].currentOption=0)},load:function(i){var e=function(e){var t;e?0<e.length?(t=e[0]).version&&this.KM_SETTINGS_SCHEMA_VERSION!==t.version[0]?alert("ERROR: KM_SETTINGS_SCHEMA_VERSION DOESNT MATCH, ours:"+this.KM_SETTINGS_SCHEMA_VERSION+", from the server:"+t.version):(this.acceptSavedVal("kidsModeSettings","ageLimit",t.ageLimit),this.acceptSavedVal("kidsModeSettings","showAvod",t.showAvod),this.acceptSavedVal("kidsModeSettings","needExitPin",t.needExitPin),this.acceptSavedVal("parentalSettings","purchase",t.purchase),this.acceptSavedVal("parentalSettings","playback",t.playback),t.isInKidsMode&&(this.isInKidsMode=t.isInKidsMode[0]),t.playback&&(this.playMaximum=t.playback[0]),t.purchase&&(this.purchaseMaximum=t.purchase[0]),this.updateSettings(t)):alert("Family settings load failed, data not structured correctly"):alert("Family settings load failed"),i()}.bind(this);vui.settings.load(this.queryType,this.loadSaveKey,e)},updateSettings:function(e){for(var t={},i=Object.keys(e),s=0;s<i.length;s++)"string"!=typeof e[i[s]]&&e[i[s]]&&e[i[s]][0]?t[i[s]]=e[i[s]][0]:void 0!==e[i[s]]&&(t[i[s]]=e[i[s]].toString());t.ageLimit=this.getAgeLimitFromIndex(t.ageLimit),this.currentSettings=t},getAgeLimitFromIndex:function(e){var t=12-e+1;return t<=12?t+"":null},getIndexFromAgeLimit:function(e){return e?13-Number(e):0},isAuthorized:function(e){e=e||"_default";var t=this.lastAuthTimes[e],i=this.maxAuthTimes[e],s=VUDU.vuduTime();return!!(t&&(s-t)/1e3<=i)},authorize:function(e){e=e||"_default",this.lastAuthTimes[e]=VUDU.vuduTime()},deauthorize:function(e){e=e||"_default",delete this.lastAuthTimes[e]},getIsInKidsMode:function(){return this.currentSettings.isInKidsMode?"true"===this.currentSettings.isInKidsMode:"true"===this.isInKidsMode},getNeedExitPin:function(){return"1"===(this.currentSettings.needExitPin||"0")},getShowAVOD:function(){return!!this.isEnablingShowAVOD||"0"===this.currentSettings.showAvod},getAgeLimit:function(){return vui.account.getAccountId()?this.currentSettings.ageLimit||"13":"12"},getPlayback:function(){return this.currentSettings.playback||"0"},getPurchase:function(){return this.currentSettings.purchase||"0"},savePasscode:function(e){this.currentSettings.passcode=e,this.save()},getPasscode:function(){return this.currentSettings.passcode||null},setShowAVOD:function(){this.selected[0]=2,this.selected[1]=0,this.save(!0),this.isEnablingShowAVOD=!0},levelRatingUSA:{1:"ALL",2:"NR",3:"R",4:"PG-13",5:"PG",6:"FAM",7:"G"},levelRatingMEX:{1:"ALL",2:"NR",3:"D",4:"C",5:"B-15",6:"B",7:"A"}},vui.passcodePrompt=function(t){var i=t.authType||"_default",s=t.callback,n=vui.familyModel;s||alert("ERROR: Attempting to show passcode dialog with no callback"),!t.forcePrompt&&n.isAuthorized(i)?s("correct"):(t.callback=function(e){"correct"!=e||t.forcePrompt||n.authorize(i),s(e)},t.heading=vui.strings.getText("SETTINGS_PARENTAL_CONTROLS_HEADING"),t.isOpaqueBg=!1,t.elemClassName="overlay passcode_panel",controller.showPopup("PasscodeDialog",t))},vui.widgets.FamilySettings=new Class({Extends:vui.widgets.Container,elemClassName:"familySettings",init:function(){this.header=new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:vui.strings.getText("FAMILY_SETTINGS_TITLE")}),this.attachChild(this.header),this.header.selectable=!1,this.messagePanel=new vui.widgets.TextPanel({elemClassName:"familyInfoText",textLabel:vui.strings.getText("FAMILY_SETTINGS_DESC")}),this.attachChild(this.messagePanel),this.messagePanel.selectable=!1,this.setPINButton=new vui.widgets.SetPINButton({elemClassName:"setPINButton kidsModeButton imageActionButton",labelClassName:"kidsModeButtonText font22"}),this.attachChild(this.setPINButton),this.settingBlocks=new vui.widgets.FamilySettingBlocks,this.attachChild(this.settingBlocks),vui._.setAriaLabel(vui.strings.getText("FAMILY_SETTINGS_TITLE")+". "+vui.strings.getText("FAMILY_SETTINGS_DESC")+" "+this.settingBlocks.ariaLabel)},clickSetPINButton:function(){this.setPINButton.onAction()}}),vui.widgets.FamilySettingBlocks=new Class({Extends:vui.widgets.Container,elemClassName:"familySettingBlocks",layout:{type:"horizontal"},init:function(){this.elem.style.position="relative",this.ariaLabel="",this.controlSetting=new vui.widgets.FamilySettingBlock({headerText:vui.strings.getText("FAM_BUY_WATCH_CONTROLS_HEADING"),message:vui.strings.getText("FAMILY_SETTINGS_DESC_PC"),label:vui.strings.getTransformedText("FAMILY_SETTINGS_BUTTON_PC"),className:"parentalControlsBlock",pageName:"ParentalControlsPanel",desc:"Set Parental Controls. "+vui.strings.getText("FAMILY_SETTINGS_DESC_PC")}),this.ariaLabel+=vui.strings.getText("FAM_BUY_WATCH_CONTROLS_HEADING")+". "+vui.strings.getText("FAMILY_SETTINGS_DESC_PC"),this.kidsModeSetting=new vui.widgets.FamilySettingBlock({headerText:vui.strings.getText("FAMILY_SETTINGS_KM"),message:vui.strings.getText("KIDS_SETTINGS_DESC"),label:vui.strings.getTransformedText("FAMILY_SETTINGS_BUTTON_KM"),className:"kidsModeEntryBlock",pageName:"KidsModeEntry",desc:"Customize Kids Mode. "+vui.strings.getText("KIDS_SETTINGS_DESC")}),this.attachChild(this.controlSetting),vui.gConnectionInstance.getKidsModeEnabled()?(this.attachChild(this.kidsModeSetting),this.ariaLabel+=" "+vui.strings.getText("FAMILY_SETTINGS_KM")+". "+vui.strings.getText("KIDS_SETTINGS_DESC")):alert("Kids mode is disabled."),vui.gConnectionInstance.isClearplayEnabled()&&(this.familyModeSetting=new vui.widgets.FamilySettingBlock({headerText:vui.strings.getText("FP_SETTING_CATEGORIES_FPENABLED"),message:vui.strings.getText("FP_SETTING_HEADER"),label:vui.strings.transformCase("Set Options"),className:"familyModeEntryBlock",pageName:"FamilyModeEntry",desc:"Set family play options,"+vui.strings.getText("FP_SETTING_HEADER")}),this.ariaLabel+=" "+vui.strings.getText("FP_SETTING_CATEGORIES_FPENABLED")+". "+vui.strings.getText("FP_SETTING_HEADER"),this.attachChild(this.familyModeSetting))}}),vui.widgets.FamilySettingBlock=new Class({Extends:vui.widgets.Container,init:function(e){this.elem.style.position="relative",this.elem.className="familySettingBlock "+e.className,this.header=new vui.widgets.TextPanel({elemClassName:"familySettingBlockHeader",textLabel:e.headerText}),this.header.elem.style.position="relative",this.header.selectable=!1,this.attachChild(this.header),this.messagePanel=new vui.widgets.TextPanel({elemClassName:"familySettingBlockMsg",textLabel:e.message}),this.messagePanel.elem.style.position="relative",this.messagePanel.selectable=!1,this.attachChild(this.messagePanel);var t=new vui.widgets.ImageActionButton({label:e.label,elemClassName:"imageActionButton",labelClassName:"font22",defaultClassName:"btn_bg_default btn_bg_size4_default",selectClassName:"btn_bg_select btn_bg_size4_select",onAction:function(){this.enterPage(e.pageName)}.bind(this)});t.elem.style.position="relative",t.selectable=!0,t.setDescription(e.desc),this.attachChild(t)},enterPage:function(e){"KidsModeEntry"===e?controller.goToPage(e,"setting"):controller.goToPage(e)}}),vui.familyPINActions=new Class({checkCurrentPasscode:function(t){var e=function(e){e===vui.familyModel.getPasscode()?t():"back"===e?controller.hidePopup():(controller.showPopup("ZeroButtonDialog",{message:vui.strings.getText("FAM_PIN_DONT_MATCH"),elemClassName:"zeroButtonDialog"}),setTimeout(function(){controller.hidePopup(),successCallback&&successCallback(!1)},2e3))}.bind(this),i={heading:vui.strings.getText("KIDS_SETTINGS_SET_CHANGE_PIN"),promptText:vui.strings.getText("SETTINGS_PC_CURRENT_PIN"),returnPasscode:!0,callback:e,elemClassName:"overlay passcode_panel",isOpaqueBg:!1};controller.showPopup("PasscodeDialog",i)},displayPasscodeDialogs:function(e){var t={heading:vui.strings.getText("KIDS_SETTINGS_SET_CHANGE_PIN"),promptText:vui.strings.getText("FAM_PLEASE_INPUT_NEW"),returnPasscode:!0,callback:e.done,authType:e.authType,elemClassName:"overlay passcode_panel",isOpaqueBg:!1};vui.familyModel&&vui.familyModel.getPasscode()?(t.promptText=vui.strings.getText("SETTINGS_NEW_PIN"),this.checkCurrentPasscode(function(){controller.showPopup("PasscodeDialog",t)})):controller.showPopup("PasscodeDialog",t)},passcodePrompt:function(t){var i=t.authType||"_default",s=t.callback,n=vui.familyModel;t=t||{},s||alert("ERROR: Attempting to show passcode dialog with no callback"),!t.forcePrompt&&n.isAuthorized(i)?s("correct",!1,t.curObj):(t.heading||(t.heading=vui.strings.getText("FP_SETTING_DIALOG_PIN_REQUIRED")),t.promptText||(promptText=vui.strings.getText("FAM_PLEASE_INPUT_NEW")),t.callback=function(e){"correct"!=e||t.forcePrompt||n.authorize(i),s(e,!0)},t.isOpaqueBg=!1,t.elemClassName="overlay passcode_panel",controller.showPopup("PasscodeDialog",t))},setOrChangePasscode:function(s,n){var e,t=function(t){var e=function(e){"back"==e&&n?n(!1):t==e?(vui.familyModel.isAuthorized(s)||vui.familyModel.authorize(s),controller.showPopup("ZeroButtonDialog",{message:vui.strings.getText("FAM_NEW_PIN_SELECTED"),elemClassName:"zeroButtonDialog"}),setTimeout(function(){controller.hidePopup(),n&&(alert("second done successcallback"),n(!0))},2e3),vui.familyModel.savePasscode(e)):(controller.showPopup("ZeroButtonDialog",{message:vui.strings.getText("FAM_PIN_DONT_MATCH"),elemClassName:"zeroButtonDialog"}),setTimeout(function(){controller.hidePopup(),n&&n(!1)},2e3))}.bind(this);if("back"==t&&n)return n(!1),void controller.hidePopup();var i={heading:vui.strings.getText("KIDS_SETTINGS_SET_CHANGE_PIN"),promptText:vui.strings.getText("FAM_PLEASE_INPUT_SAME"),returnPasscode:!0,callback:e,authType:s||null,elemClassName:"overlay passcode_panel",isOpaqueBg:!1};controller.showPopup("PasscodeDialog",i)}.bind(this);vui.account.getAccountId()?this.displayPasscodeDialogs({done:t,authType:s}):(e=function(e){"quit"!==e&&"success"===e&&this.displayPasscodeDialogs({done:t,authType:s})}.bind(this),vui.ActivationController.beginActivation(e,"setting"))}}),vui.widgets.SetPINButton=new Class({Extends:vui.widgets.ImageActionButton,Implements:vui.familyPINActions,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size5_default",e.selectClassName="btn_bg_select btn_bg_size5_select",e.disabledClassName="btn_bg_disabled btn_bg_size5_disabled",e.iconDisabledClassName="imageActionButton_icon_disabled",this.parent(e),this.setLabel(vui.strings.getTransformedText("KIDS_SETTINGS_SET_CHANGE_PIN"))},onAction:function(){this.setOrChangePasscode(null,function(e){})},onSelect:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent(),vui._.setAriaLabel("Set or change PIN")},onDeselect:function(){this.parent()}}),vui.widgets.EnterKidsModeButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size5_default",e.selectClassName="btn_bg_select btn_bg_size5_select",e.disabledClassName="btn_bg_disabled btn_bg_size5_disabled",e.iconDisabledClassName="imageActionButton_icon_disabled",this.parent(e),this.setLabel(vui.strings.getTransformedText("ENTER_KIDS_MODE")),this.calledFrom=e.from},onAction:function(){var e=function(e){if(controller.hidePopup(),"enter"===e){if(!vui.m.userId)return void vui.familyModel.enterKidsMode(this.calledFrom);vui.m.kidsModeCache.isEmpty()&&!vui.familyModel.getShowAVOD()?controller.showPopup("KidsModeDialog",{title:vui.strings.getText("KIDS_MODE_EMPTY"),text:vui.strings.getText("KIDS_NO_CONTENT"),hint:vui.strings.getText("KIDS_VIEW_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/kidsprivacy":"vudu.com/kidsprivacy"),elemClassName:"kidsModeEmptyDialog",centered:"true",buttons:[{label:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("KIDS_ENABLE_AVOD"):"SHOW FREE CONTENT",name:"showAVOD",size:26},{label:vui.strings.getTransformedText("KIDS_DIALOG_CANCEL"),name:"cancel",size:25,leftPos:vui.vvPlatform.appFeatureEnabled()?"435":"320"}],callback:function(e){controller.hidePopup(),"showAVOD"===e&&vui.familyModel.setShowAVOD(),vui.familyModel.enterKidsMode(this.calledFrom)}}):vui.familyModel.enterKidsMode(this.calledFrom)}}.bind(this);vui.familyModel.getNeedExitPin()?controller.showPopup("KidsModeDialog",{title:vui.strings.getText("KIDS_ENTERING"),text:vui.strings.getText("KIDS_NEED_PIN_EXIT"),hint:vui.strings.getText("KIDS_CHANGE_SETTING"),elemClassName:"enterKidsModeDialog",buttons:[{label:vui.strings.getTransformedText("KIDS_DIALOG_ENTER"),name:"enter",size:25},{label:vui.strings.getTransformedText("KIDS_DIALOG_CANCEL"),name:"cancel",size:25,leftPos:"191"}],callback:e}):e("enter")},onSelect:function(){this.disabled||(vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent())},onDeselect:function(){this.disabled||this.parent()}}),vui.widgets.KidsModeEntry=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.ContentActions],name:"vui.widgets.KidsModeEntry",elemClassName:"KidsModeEntry",menuArray:[],map:{0:[vui.strings.getText("KIDS_AGE_LIMIT"),"ageLimitContainer"],1:[vui.strings.getText("KIDS_REQ_PIN"),"exitKidsModeContainer"],2:[vui.strings.getText("KIDS_SHOW_AVOD"),"showAVODContainer"]},ageLimit:"",enteredFrom:"",init:function(e){var t;"library"!==(this.enteredFrom=e)&&((t=new Element("img",{class:"familySettingLogo",border:"0"})).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.elem.appendChild(t)),this.kidsModeLogo=createImg({src:vui.images.kidsMode.logo_one_size,className:"kidsModeEntryLogo",position:"relative"},this.elem),this.ageContainer=createDiv({className:"kidsModeEntryAge"},this.elem),this.years=createDiv({className:"kidsModeEntryYears",position:"relative"},this.ageContainer),this.below=createDiv({className:"kidsModeEntryBelow",text:"& below",position:"relative"},this.ageContainer),this.desc=createDiv({className:"kidsModeEntryDesc",text:vui.strings.getText("KIDS_SETTINGS_DESC"),position:"relative"},this.elem),"library"===e&&(this.enterKidsModeButton=new vui.widgets.EnterKidsModeButton({elemClassName:"entryEnterButton kidsModeButton imageActionButton",labelClassName:"kidsModeButtonText font22",from:e}),this.enterKidsModeButton.elem.style.position="relative",this.enterKidsModeButton.elem.style.display="inline-block",this.attachChild(this.enterKidsModeButton)),this.settingsContainer=new vui.widgets.HorizontalContainer({elemClassName:"kidsModeEntrySettingsCon"}),this.settingsContainer.elem.style.position="relative",this.attachChild(this.settingsContainer);var i=vui.familyModel.options.kidsModeSettings;if(i)for(var s=0;s<i.length&&("library"!==e||2!==s);s++){var n={settingName:i[s].settingName,labelText:this.map[s][0],index:s,lengthLimit:6};1===s&&"library"===e&&(n.labelText=vui.strings.getText("KIDS_REQ_PIN_OPTIONAL")),this[this.map[s][1]]=this.attachSelectContainer(n)}"library"!==e&&(this.enterKidsModeButton=new vui.widgets.EnterKidsModeButton({elemClassName:"entryEnterButton kidsModeButton imageActionButton",labelClassName:"kidsModeButtonText font22",from:e}),this.enterKidsModeButton.elem.style.display="inline-block",this.attachChild(this.enterKidsModeButton)),"library"===e&&(this.hint=createDiv({className:"kidsModeEntryHint",text:vui.strings.getText("KIDS_ENTRY_HINT")},this.elem)),this.privacy=createDiv({className:"kidsModePrivacy",text:vui.strings.getText("KIDS_VIEW_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/kidsprivacy":"vudu.com/kidsprivacy")},this.elem),"library"===e&&this.privacy.addClass("libraryPrivacy"),this.toggleUI()},onBack:function(){this.enteredFrom&&"library"===this.enteredFrom?vui.executeOnContainer(this.parentWidget,"selectKidsModeButton"):controller.goBack()},setAgeLimit:function(){this.years.innerHTML=this.ageLimit+" years"},toggleUI:function(){this.ageLimit=vui.familyModel.getAgeLimit(),this.ageLimit&&12<this.ageLimit?(this.ageContainer.style.display="none",this.enterKidsModeButton.disable()):(this.setAgeLimit(),this.ageContainer.style.display="block",this.enterKidsModeButton.enable())},attachSelectContainer:function(e){var t=new vui.widgets.KidsModeSelectContainer({elemClassName:"entryKidsModeSelect kidsModeSettings_"+e.settingName,labelText:e.labelText,index:e.index,settingGroup:"kidsModeSettings",lengthLimit:e.lengthLimit});return t.elem.style.position="relative",t.elem.style.display="inline-block",t.bind(this.menuArray),this.settingsContainer.attachChild(t),t},show:function(){this.elem.style.display="block",this.setSelectable(!0),vui.executeOnContainer(this.parentWidget,"hidePanel")},hide:function(){this.setSelectable(!1),this.elem.style.display="none"},kidsModeButtonClicked:function(e){for(var t=e.index,i=0;i<this.menuArray.length;i++)t!==i&&this.closeDropdown(i);this.currentIndex=t,this.menuArray[t].show(),vui.select(this.menuArray[t]),this.menuArray[t].selectable=!0},kidsModeOptionSelected:function(){},kidsModeOptionClicked:function(i){var t,e;this.closeDropdown(this.currentIndex),Number(vui.familyModel.options.kidsModeSettings[i.itemIndex].currentOption)!==i.optionIndex&&(t=function(){var e=null,t={settingGroup:"kidsModeSettings",itemIndex:i.itemIndex,optionIndex:i.optionIndex};(e=this[this.map[i.itemIndex][1]]).updateLabel(t),e.setAriaLabel(),vui.familyModel.selected=[i.itemIndex,i.optionIndex],vui.familyModel.save(!0),this.toggleUI()}.bind(this),1===i.itemIndex?(e=new vui.familyPINActions,vui.familyModel.getPasscode()?t():e.setOrChangePasscode("init_pin",function(e){1==e&&t()})):t())},promptPIN:function(t){var e=function(e){"correct"===e?(t(),controller.hidePopup()):"back"===e&&controller.hidePopup()}.bind(this),i={heading:vui.strings.getText("FAMILY_SETTINGS_KM"),promptText:vui.strings.getTransformedText("FAM_KIDS_MODE_PIN_REQUIRED"),authType:"kids_mode_setting",callback:e};(new vui.familyPINActions).passcodePrompt(i)},closeDropdown:function(e){this.menuArray[e].hide(),this.menuArray[e].selectable=!1}}),vui.widgets.FamilyModeEntry=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.ContentActions],name:"vui.widgets.FamilyModeEntry",elemClassName:"familyModeEntry",layout:{type:"vertical"},init:function(e){(e=e||{}).backFromPlayback&&(this.backFromPlayback=!0,this.contentId=e.contentId),vui.clearPlaySettings||(vui.clearPlaySettings=new vui.ClearPlaySettings),this.selectorPosition={row:0,col:0},this.maxRows=6,this.rowMap={},vui.clearPlaySettings.load(this.bindUI.bind(this))},getRenderData:function(){var e=vui.strings.getText,t=vui.clearPlaySettings.getCategories();return[{label:e("FP_SETTING_CATEGORIES_FPENABLED"),name:"family play",value1:e("FP_SETTING_VALUE_OFF"),value2:e("FP_SETTING_VALUE_ON"),checked:vui.clearPlaySettings.getEnabled()?"ON":"OFF",disableControl:!0,desc:"Family Play",barBelow:!0},{label:e("FP_SETTING_CATEGORIES_NUDITY"),name:"nudity",value1:e("FP_SETTING_SEE"),value2:e("FP_SETTING_SKIP"),checked:t.nudity?"Skip":"See",desc:"sex, nudity"},{label:e("FP_SETTING_CATEGORIES_VIOLENCE"),name:"violence",value1:e("FP_SETTING_SEE"),value2:e("FP_SETTING_SKIP"),checked:t.violence?"Skip":"See",desc:"violence"},{label:e("FP_SETTING_CATEGORIES_LANGUAGE"),name:"language",value1:e("FP_SETTING_HEAR"),value2:e("FP_SETTING_MUTE"),checked:t.language?"Mute":"Hear",desc:"language"},{label:e("FP_SETTING_CATEGORIES_SUBSTANCE"),name:"substanceAbuse",value1:e("FP_SETTING_SEE"),value2:e("FP_SETTING_SKIP"),checked:t.substanceAbuse?"Skip":"See",desc:"Substance Abuse",barBelow:!0},{label:e("FP_SETTING_CATEGORIES_RESTRICT"),name:"pin",value1:e("FP_SETTING_NO"),value2:e("FP_SETTING_YES"),checked:vui.clearPlaySettings.getRestricted()?"Yes":"No",desc:"Restrict Turning off Family Play during playback"}]},bindUI:function(){var e=vui.strings.getText;this.familySettingLogo=createImg({className:"familySettingLogo",src:vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo},this.elem),this.familySettingHeader=createDiv({className:"family_entry_header",text:e("FP_SETTING_TITLE"),position:"relative"},this.elem),this.familySettingCaption=createDiv({className:"family_entry_text",position:"relative",text:e("FP_SETTING_HEADER")},this.elem),this.bindRows(),this.footer=createDiv({className:"family_entry_footer_text",text:e("FP_SETTING_WITH_CLOSED_CAPTION"),position:"relative"},this.elem),this.footer2=createDiv({className:"family_entry_footer_text",text:e("FP_SETTING_VIEWER_DISCRETION_NOTICE_2"),position:"relative"},this.elem),this.clearplayPowered=createDiv({className:"clearplay_powered",text:e("DETAILS_FAMILY_PLAY_BY")},this.elem),this.clearplayLogo=createImg({className:"clearplay_image",src:vui.images.clearplay_w_text,position:"relative"},this.clearplayPowered),vui._.setAriaLabel(e("FP_SETTING_TITLE")+" "+e("FP_SETTING_HEADER")+" "+e("FP_SETTING_WITH_CLOSED_CAPTION")+" "+e("FP_SETTING_VIEWER_DISCRETION_NOTICE_2"))},bindRows:function(){var a=vui.strings.getText;this.selectorPosition.col=vui.clearPlaySettings.getEnabled()?1:0;var t=function(e){0<this.selectorPosition.row&&vui.clearPlaySettings.getEnabled()&&(this.selectorPosition.row--,this.selectorPosition.column=e,vui.select(this.rowMap[this.selectorPosition.row]["button"+e]))}.bind(this),s=function(e){this.selectorPosition.row<this.maxRows-1&&vui.clearPlaySettings.getEnabled()&&(this.selectorPosition.row++,this.selectorPosition.column=e,vui.select(this.rowMap[this.selectorPosition.row]["button"+e]))}.bind(this),n=function(t,i,s){function e(e){"correct"===e||!0===e?(s(),t()):vui.select(i),controller.hidePopup()}var n=new vui.familyPINActions;vui.familyModel.getPasscode()&&vui.m.userId?n.passcodePrompt({heading:a("FP_SETTING_TITLE"),promptText:a("FP_SETTINGS_REQUIRE_PIN_DESC"),promptText2:a("SETTINGS_PIN_GRACE_PERIOD"),callback:e,authType:"family_setting"}):n.setOrChangePasscode("init_pin",e)},o=function(e){if(e&&e.category){var t,i=e.category;if("family play"===i){vui.clearPlaySettings.setAvailable(e.value),e.value&&(t={title:"Watch with Family Play",text1:vui.strings.getText("FP_SETTINGS_INFO_DESC"),buttons:[{label:"OK",size:12}],focus:"OK",titleIcon:vui.images.familyplay_jumping_guys,text1ClassName:"cp_on_notice_text1",border:"1px solid #005A8F",callback:function(){controller.hidePopup(),vui.select(this.rowMap[this.selectorPosition.row]["button"+this.selectorPosition.col])}.bind(this),onBack:function(){controller.hidePopup(),vui.select(this.rowMap[this.selectorPosition.row]["button"+this.selectorPosition.col])}.bind(this)},setTimeout(function(){controller.showPopup("FamilyPlayNotice",t)},0))}else{if("pin"===i)return void vui.clearPlaySettings.setRestricted(e.value);vui.clearPlaySettings.setCategory(e)}vui.clearPlaySettings.trackSettingChange({category:i,toOn:e.value})}}.bind(this);this.getRenderData().map(function(e){return(i=(i=e)||{}).callback1=function(e,t){n.call(this,e,t,function(){this.setCheckedButton(!0),"family play"===i.name&&this.elem.classList.add("disableControl"),o({category:i.name,value:!1})}.bind(this))},i.callback2=function(e,t){n.call(this,e,t,function(){this.setCheckedButton(!1),"family play"===i.name&&this.elem.classList.remove("disableControl"),o({category:i.name,value:!0})}.bind(this))},i.disableable=!0,i.onDirectionUp=t,i.onDirectionDown=s,new vui.widgets.FamilyModeSettingRow(i);var i}).forEach(function(e,t){this.attachChild(e),this.rowMap[t]=e}.bind(this)),vui.select(this.rowMap[this.selectorPosition.row]["button"+this.selectorPosition.col])},show:function(){this.elem.style.display="block",this.setSelectable(!0)},hide:function(){this.setSelectable(!1),this.elem.style.display="none"},onBack:function(){this.backFromPlayback?controller.goToPage("NewMovieDetails",{contentId:this.contentId},!0):controller.goBack()}}),vui.widgets.FamilyModeSettingRow=new Class({Extends:vui.widgets.HorizontalContainer,name:"vui.widgets.FamilyModeSettingRow",elemClassName:"family_entry_setting_row",selectable:!1,init:function(t){var e;this.elem.style.position="relative",this.rowLabel=createDiv({className:"family_entry_row_label",text:t.label},this.elem),t.disableControl&&!vui.clearPlaySettings.getEnabled()&&this.elem.classList.add("disableControl"),t.disableable&&this.elem.classList.add("disableable"),this.button0=new vui.widgets.RadioButton({name:t.name,value:t.value1,checked:t.checked.toLowerCase()===t.value1.toLowerCase(),label:t.desc,style:{left:"625px",position:"absolute"},callback:function(e){t.callback1.call(this,e,this.button1)}.bind(this),onDirectionRight:function(){vui.select(this.button1)}.bind(this),onDirectionUp:function(){t.onDirectionUp(0)},onDirectionDown:function(){t.onDirectionDown(0)}}),this.attachChild(this.button0),this.button1=new vui.widgets.RadioButton({name:t.name,value:t.value2,checked:t.checked.toLowerCase()===t.value2.toLowerCase(),label:t.desc,style:{left:"740px",position:"absolute"},callback:function(e){t.callback2.call(this,e,this.button0)}.bind(this),onDirectionLeft:function(){vui.select(this.button0)}.bind(this),onDirectionUp:function(){t.onDirectionUp(1)},onDirectionDown:function(){t.onDirectionDown(1)}}),this.attachChild(this.button1),t.barBelow&&((e=document.createElement("hr")).className="bar_below",this.elem.appendChild(e))},setCheckedButton:function(e){e?this.button1.button.checked=!1:this.button0.button.checked=!1}}),vui.pages.DeactivatePopup=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){(e=e||{}).elemClassName="deactivate_popup",e.dialogBoxClassName="deactivate_dialogBox",e.appName=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",e.title=vui.strings.getText("OLD_SETTINGS_DEACTIVATE_ARE_YOU_SURE_APPX",e.appName),this.appName=e.appName,this.parent(e),buttons=[{name:"ok",style:"blue",label:vui.strings.getText("OLD_SETTINGS_DEACTIVATE_OK_BUTTON")},{name:"cancel",style:"blue",label:vui.strings.getText("OLD_SETTINGS_DEACTIVATE_CANCEL_BUTTON")}],this.dialogBox.setButtons(buttons);var t=createDiv({className:"deactivate_container"},this.elem);this.dialogPoster=createDiv({className:"dialogPoster"},this.dialogBox.elem),this.dialogPoster.style.background="url("+vui.images.genericOverlay+")",this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:vui.strings.getText("OLD_SETTINGS_DEACTIVATE_TITLE")},t)},onButtonEvent:function(e){e&&"ok"==e.name?this.doDeactivation():e&&"done"===e.name?controller.goHome():controller.hidePopup()},show:function(e){this.parent(e),this.spinner=new vui.widgets.TransactionSpinner,this.spinner.elem.className="deactivate_spinner",this.dialogBox.attachChild(this.spinner),this.spinner.hide(),vui.select(this.dialogBox),vui._.setAriaLabel(vui.strings.getText("OLD_SETTINGS_DEACTIVATE_TITLE")+". "+vui.strings.getText("OLD_SETTINGS_DEACTIVATE_ARE_YOU_SURE_APPX",this.appName)+". OKAY")},doDeactivation:function(){var e;this.doingDeactivation?alert("DOING DEACTIVATE, DONT DO IT AGAIN!"):(this.doingDeactivation=!0,this.dialogBox.buttonContainer.hide(),this.dialogBox.setTitleText(vui.strings.getText("OLD_SETTINGS_DEACTIVATE_PLEASE_WAIT")),this.spinner.show(),this.spinner.spin(),e=function(e){var t;this.unloaded?alert("UNLOADED!"):(e?this.dialogBox.setTitleText(vui.strings.getText("OLD_SETTINGS_DEACTIVATE_THIS_DEVICE_HAS_BEEN_APPX",this.appName)):this.dialogBox.setTitleText(vui.strings.getText("OLD_SETTINGS_DEACTIVATE_SORRY_THERE_WAS_PROBLEM")),vui.account.refresh(function(){alert("Done Deactivating")}),t=[{name:"done",style:"blue",label:vui.strings.getText("OLD_SETTINGS_DEACTIVATE_OK_BUTTON")}],this.dialogBox.setButtons(t,{type:"vertical"}),this.dialogBox.buttonContainer.show(),vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogBox.titleText.innerHTML+". "+vui.getSelected().label.innerText),this.spinner.stop(),this.spinner.hide(),this.timeout=setTimeout(controller.goHome,5e3))}.bind(this),vui.getModel().deactivate(e))},hide:function(){this.unloaded=!0,this.timeout&&clearTimeout(this.timeout),this.spinner.stop()}}),vui.widgets.AdvancedSettings=new Class({Extends:vui.widgets.Container,name:"vui.widgets.AdvancedSettings",title:vui.strings.getText("SETTINGS_ADVANCED_HEADER"),elemClassName:"advanced-settings",init:function(){vui._.setAriaLabel("Advanced Settings"),this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T}));var e,s,t,i=vui.widgets.MenuButton,n="highlightGreen",a=[];vui.account.hasLevel2DebugLabel()&&(e=function(e,t){a.push({buttonClass:i,selectorClassName:n,label:e,onAction:function(){controller.exitConfirm(function(){window.setCookie("network",t),vui._.reloadApp()},"Relaunch app to enable changes")}})},"dev"!==vui.m.network&&e("Dev Network","dev"),"qa"!==vui.m.network&&e("QA Network","qa"),"pre-production"!==vui.m.network&&e("Pre-Production Network","pre-production"),"production"!==vui.m.network&&e("Production Network","production"),alert("=== iframe for precert ==="),(t=function(e,t){a.push({buttonClass:i,selectorClassName:n,label:e,onAction:function(){(s=document.createElement("iframe")).id="precertIframe",s.style.zIndex="999",s.style.border="0",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.right="0",s.style.width="100%",s.style.height="100%",alert("opt: "+t),s.src="hdata"==t?"http://hdata.vudu.com/precert/precert-webos-app/main.html":"./javascript/precert/main.html",document.body.appendChild(s),s.focus();var i=setInterval(function(){s&&s.contentWindow&&(alert("posting message"),s.contentWindow.postMessage("hello precert","*"))},2e3);window.addEventListener("message",function(e){"precert response"==e.data&&(alert("stopping interval"),i&&(clearInterval(i),alert("stopped interval")))},!1),window.addEventListener("message",function(e){var t;"close precert"==e.data?(alert("closing precert..."),(t=document.getElementById("precertIframe"))?t.src="":alert("No iframe here"),t?t.parentNode.removeChild(t):alert("No parentNode from iframe"),t=null,i&&(alert("clear interval"),clearInterval(i)),alert("closing precert Done!!!")):alert("WARNING: we got unexpected message!!!: "+e.data)},!1)}})})("Precert App (app)","app"),t("Precert App (hdata)","hdata")),(vui.account.hasInternetAppsFlag()||vui.account.hasLevel2DebugLabel())&&a.push({buttonClass:i,selectorClassName:n,label:vui.getPlayer().displayStats?"Disable Player Stats":"Enable Player Stats",onAction:function(){vui.getPlayer().displayStats=!vui.getPlayer().displayStats,vui.getSelected().label.innerHTML=vui.getPlayer().displayStats?"Disable Player Stats":"Enable Player Stats"}});var o=new vui.widgets.MenuPanel;this.menu=o,this.attachChild(o),this.menu.bind(a)}}),vui.widgets.MyAccount=new Class({Extends:vui.widgets.Container,elemClassName:"MyAccount",name:"vui.widgets.MyAccount",spacing:0,selectable:!0,init:function(e){vui.vvPlatform.appFeatureEnabled()?(this.title=vui.strings.getText("SETTINGS_YOUR_ACCOUNT_HEADING"),this.ariaLabel="Your Account"):(this.title=vui.strings.getText("SETTINGS_MY_ACCOUNT_HEADING"),this.ariaLabel="My Account"),this.paymentMethod="None",vui.account._accountData&&vui.account._accountData.paymentConfigStatus&&"none"!=vui.account._accountData.paymentConfigStatus&&vui.account.hasPaymentMethod()&&(this.paymentMethod=vui.account.getPaymentMethodType());var t,i,s,n,a,o,r,l,u=new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T});u.elem.style.position="relative",this.attachChild(u),vui.getModel().userId?((t=vui.user.getEmail())&&this.createRow("Signed in as: ",t),i=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/paymentinfo":"vudu.com/paymentinfo",s="","None"===this.paymentMethod&&(s=vui.strings.getText("SETTINGS_ACCOUNT_INFO_PAYMENT_METHOD",i)),this.createRow("Payment Method: ",this.paymentMethod,s),n=vui.fund.getEarlyExpirationDate(),a=vui.fund.getEarlyExpirationBalance(),o="",n&&a&&(o=vui.strings.getText("SETTINGS_ACCOUNT_INFO_CREDIT_EXPIRATION",a,vui.displayDate(n))+"<br>"+vui.strings.getText("SETTINGS_ACCOUNT_INFO_CREDIT_APPLIED_FIRST")),a&&this.createRow("My credits: ","$"+vui.fund.getServiceBalance(),o),vui.fund.getValidTokenBalance()&&(n=vui.fund.getTokenExpirationDate(),a=vui.fund.getTokenExpirationBalance(),n&&a&&(o=vui.strings.getText("SETTINGS_ACCOUNT_PROMO_EXPIRATION",a,vui.displayDate(n))),this.createRow("Promotions: ",vui.fund.getValidTokenBalance()+" complimentary rentals available",o)),this.signOutButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("SETTINGS_ADVANCED_DEACTIVATE_DEVICE_BUTTON"),elemClassName:"signout imageActionButton",onAction:function(){controller.showPopup("DeactivatePopup")}}),this.attachChild(this.signOutButton),vui.gConnectionInstance.getPrivacyInfoEnabled()&&(l=vui.strings.getText("SETTINGS_ACCOUNT_INFO_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"walmart.com/privacy":"vudu.com/privacy"),vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(l=vui.strings.getText("SETTINGS_ACCOUNT_INFO_FANDANGO_PRIVACY","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies","https://vudu.com/privacy")),createDiv({className:"ccpaFooterSignedIn font14",text:l},this.elem),this.ariaLabel+=". "+l)):(r=vui.strings.getText("SETTINGS_ACCOUNT_INFO_NO_ACCOUNT_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"),createDiv({className:"signInText font24",text:r},this.elem),this.ariaLabel+=". "+r,this.signUpButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_SIGNIN_BUTTON"),elemClassName:"opButton_signup imageActionButton",onAction:function(){vui.ActivationController.beginActivation(function(e){"quit"!==e&&"success"===e&&controller.goHome()},"welcome",!0)}}),this.attachChild(this.signUpButton),vui.gConnectionInstance.getPrivacyInfoEnabled()&&(l=vui.strings.getText("SETTINGS_ACCOUNT_INFO_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"walmart.com":"vudu.com"),vui.gConnectionInstance.getFandangoPrivacyEnabled()&&(l=vui.strings.getText("SETTINGS_ACCOUNT_INFO_FANDANGO_PRIVACY","https://www.fandango.com/policies/privacy-policy","https://www.fandango.com/policies/terms-and-policies","https://vudu.com/privacy")),createDiv({className:"ccpaFooter font14",text:l},this.elem),this.ariaLabel+=". "+l),createImg({src:vui.images.BG_Temp})),e.initial||vui._.setAriaLabel(this.ariaLabel)},createRow:function(e,t,i){var s=createDiv({className:"myAccountCon",position:"relative"},this.elem);createDiv({className:"myAccountRowName font24",text:e,position:"relative"},s),this.ariaLabel+=". "+e,createDiv({className:"myAccountRowText fontWhite24",text:t,position:"relative"},s),this.ariaLabel+=". "+t,i&&(createDiv({className:"myAccountSmallInfo font16",text:i,position:"relative"},s),this.ariaLabel+=". "+i)}}),vui.widgets.About=new Class({Extends:vui.widgets.Container,elemClassName:"About",name:"vui.widgets.About",title:vui.strings.getText("SETTINGS_ABOUT_HEADING"),spacing:0,init:function(){this.ariaLabel=[],this.ariaLabel.push("about");var e="",t=VUDU.registry.deviceId;vui.getModel().directorCsClient&&(e=vui.getModel().directorCsClient.getLightDeviceId()),""===e&&(e="none");var i=vui.getWidgetVersion();this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),"none"!=e&&""!=e&&(e="0x"+parseInt(e).toString(16));var s=new Element("div",{class:"descriptionContainer"});this.elem.appendChild(s);var n=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu",a=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com":"www.vudu.com";s.innerHTML=vui.strings.getText("SETTINGS_ABOUT_SERVICE",n,a),this.ariaLabel.push(s.innerHTML);var o,r,l=new Element("div",{class:"deviceInfoContainer"});this.elem.appendChild(l),this.createText(vui.strings.getText("OLD_SETTINGS_DEVICE_ID")+": "+e,l),this.createText(vui.strings.getText("OLD_SETTINGS_HARDWARE_ID")+": "+t,l),this.createText("Widget Version: "+i,l),window.Asteroid&&Asteroid.getBuildNumber&&(o=Asteroid.getBuildNumber(),(r=vui.gConnectionInstance.getAsteroidPlayer())&&(o+="/"+r.split(",")[0].slice(-3)),this.createText("Player Version: "+o,l));var u=new Element("div",{class:"about_partners_text"});this.elem.appendChild(u),u.innerHTML=vui.strings.getText("SETTINGS_ABOUT_PARTNERS"),this.ariaLabel.push(u.innerHTML),this.selectable=!1,vui._.setAriaLabel(this.ariaLabel.join(","))},createText:function(e,t){var i=new vui.widgets.TextPanel({elemClassName:"textPanel",textLabel:e});i.elem.style.position="relative",t.appendChild(i.elem),this.ariaLabel.push(e)}}),vui.widgets.AudioSettingsButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size5_default",e.selectClassName="btn_bg_select btn_bg_size5_select",this.parent(e),this.name=e.name,this.label.className=this.label.className+" fontMedium"},onAction:function(){controller.setAudioMode(this.name),vui.executeOnContainer(this.parentWidget,"updateMessage"),controller.showPopup("ZeroButtonDialog",{message:"Audio Mode set to "+controller.getAudioMode(),elemClassName:"zeroButtonDialog"}),setTimeout(function(){controller.hidePopup()},2e3)},onSelect:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.parent()}}),vui.widgets.AudioSettings=new Class({Extends:vui.widgets.Container,title:vui.strings.getText("SETTINGS_AUDIO_SETTINGS_HEADER"),init:function(){spacing=40,this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.messagePanel=new vui.widgets.TextPanel({elemClassName:"audio-panel-infoText fontMedium",textLabel:vui.strings.getText("OLD_SETTINGS_AUDIO_OUTPUT_SELECTED_MODE",controller.getAudioMode())}),this.attachChild(this.messagePanel),this.messagePanel.selectable=!1;var e=new vui.widgets.AudioSettingsButton({label:vui.strings.getText("OLD_SETTINGS_AUDIO_OUTPUT_DOLBY_DIGITAL"),name:"Dolby Digital",elemClassName:"audioSettings_button1"});this.attachChild(e);var t=new vui.widgets.AudioSettingsButton({label:vui.strings.getText("OLD_SETTINGS_AUDIO_OUTPUT_PCM_STEREO"),name:"PCM Stereo",elemClassName:"audioSettings_button2"});this.attachChild(t)},updateMessage:function(){this.messagePanel.setText(vui.strings.getText("OLD_SETTINGS_AUDIO_OUTPUT_SELECTED_MODE",controller.getAudioMode()))}}),vui.widgets.SettingsButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="settings_button btn_bg_default btn_bg_size5_default",e.selectClassName="settings_button btn_bg_select btn_bg_size5_select",this.parent(e),this.name=e.name,this.label.className=this.label.className+" fontMedium";var t=this.elem;this.selectCheckMark=createDiv({className:"selectCheckMark"},t),this.selectCheckMark.style.backgroundImage="url('"+vui.images.whiteCheck+"')",this.selectCheckMark.style.display="none",e.top&&(this.elem.style.top=e.top+"px")},onAction:function(){vui._.setAriaLabel(this.name.toUpperCase()+" selected"),vui.executeOnContainer(this.parentWidget,"save",this.name)},update:function(e){e==this.name?this.selectCheckMark.style.display="block":this.selectCheckMark.style.display="none"},updateSave:function(e,t){t==this.name?1==e&&(this.selectCheckMark.style.display="block"):1==e&&(this.selectCheckMark.style.display="none")},onSelect:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),this.selectCheckMark.addClass("selected"),this.parent()},onDeselect:function(){this.selectCheckMark.removeClass("selected"),this.parent()}}),vui.SettingsModel={autoPlaySetting:"",playbackQualitySetting:"",init:function(){this.queryType="user",this.load("autoPlaySetting"),this.load("playbackQualitySetting")},save:function(t,i,s){var e,n;t&&((e={})[t]=[i],e=[e],n=function(e){1==e&&(this[t]=i),s&&s(e)}.bind(this),vui.settings.save(this.queryType,t,e,n))},load:function(i,s){var e=function(e){var t;e&&0<e.length&&(t=e[0],this[i]=t[i][0],s&&s(this[i]))}.bind(this);vui.settings.load(this.queryType,i,e)}},vui.widgets.QualitySettings=new Class({Extends:vui.widgets.Container,title:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_HEADING"),init:function(){this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.messagePanel=new vui.widgets.TextPanel({elemClassName:"quality-panel-infoText",textLabel:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_DESCRIPTION")}),this.attachChild(this.messagePanel),this.messagePanel.selectable=!1,this.buttonArray=[];var e,t=window.vui.ResDef.infoSettingsView.QUALITY_BUTTON_T;vui.gConnectionInstance.getIsUHDSupported()&&(e=new vui.widgets.SettingsButton({label:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_UHD"),name:"uhd",elemClassName:"qualitySettings_button1",top:t}),this.attachChild(e),t+=window.vui.ResDef.infoSettingsView.QUALITY_BUTTON_SPACING,this.buttonArray.push(e));var i,s=new vui.widgets.SettingsButton({label:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_HDX"),name:"hdx",top:t,elemClassName:"qualitySettings_button2"});this.attachChild(s),t+=window.vui.ResDef.infoSettingsView.QUALITY_BUTTON_SPACING,this.buttonArray.push(s),vui.gConnectionInstance.getRemoveHD()||(i=new vui.widgets.SettingsButton({label:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_HD"),name:"hd",top:t,elemClassName:"qualitySettings_button3"}),this.attachChild(i),t+=window.vui.ResDef.infoSettingsView.QUALITY_BUTTON_SPACING,this.buttonArray.push(i));var n=new vui.widgets.SettingsButton({label:vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_SD"),name:"sd",top:t,elemClassName:"qualitySettings_button4"});this.attachChild(n),this.buttonArray.push(n),this.load();var a=this.title+": "+vui.strings.getText("SETTINGS_PLAYBACK_QUALITY_DESCRIPTION");vui.SettingsModel.playbackQualitySetting&&(a+=". Currently: "+vui.SettingsModel.playbackQualitySetting.toUpperCase()),vui._.setAriaLabel(a)},save:function(i){var s=this;vui.SettingsModel.save("playbackQualitySetting",i,function(e){for(var t=0;t<s.buttonArray.length;t++)s.buttonArray[t].updateSave(e,i,"Playback quality")})},load:function(){var e=function(e){for(var t=0;t<this.buttonArray.length;t++)this.buttonArray[t].update(e)}.bind(this);vui.SettingsModel.load("playbackQualitySetting",e)},updateMessage:function(){}}),vui.widgets.AutoPlaySettings=new Class({Extends:vui.widgets.Container,title:vui.strings.getText("SETTINGS_AUTOPLAY_HEADING"),layout:{type:"horizontal"},init:function(){this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.messagePanel=new vui.widgets.TextPanel({elemClassName:"quality-panel-infoText",textLabel:vui.strings.getText("SETTINGS_AUTOPLAY_DESCRIPTION")}),this.attachChild(this.messagePanel),this.messagePanel.selectable=!1,this.helperMessage=new vui.widgets.TextPanel({elemClassName:"quality-panel-helper",textLabel:vui.strings.getText("SETTINGS_AUTOPLAY_ENABLE_TEXT",vui.strings.transformCase("On"),vui.strings.transformCase("Off"))}),this.attachChild(this.helperMessage),this.helperMessage.selectable=!1,this.buttonArray=[];var e=new vui.widgets.SettingsButton({label:vui.strings.transformCase("On"),name:"on",elemClassName:"autoPlaySettingsOn"});this.attachChild(e),this.buttonArray.push(e);var t=new vui.widgets.SettingsButton({label:vui.strings.transformCase("Off"),name:"off",elemClassName:"autoPlaySettingsOff"});this.attachChild(t),this.buttonArray.push(t),this.load();var i="Autoplay Settings: "+vui.strings.getText("SETTINGS_AUTOPLAY_DESCRIPTION")+" "+vui.strings.getText("SETTINGS_AUTOPLAY_ENABLE_TEXT")+". Currently: ";i+=vui.SettingsModel.autoPlaySetting?vui.SettingsModel.autoPlaySetting:"on",vui._.setAriaLabel(i)},save:function(i){var s=this;vui.SettingsModel.save("autoPlaySetting",i,function(e){for(var t=0;t<s.buttonArray.length;t++)s.buttonArray[t].updateSave(e,i,"Autoplay")})},load:function(){var e=function(e){e=e||"on";for(var t=0;t<this.buttonArray.length;t++)this.buttonArray[t].update(e)}.bind(this);vui.SettingsModel.load("autoPlaySetting",e)},updateMessage:function(){}}),vui.widgets.HelpInfo=new Class({Extends:vui.widgets.Container,elemClassName:"help_info",title:vui.vvPlatform.isXbox?"Controller Help":vui.strings.getText("HELP_TITLE"),init:function(){vui.vvPlatform.isXbox?(vui._.setAriaLabel("Help Info: Controller Help. Menu Button: Go to Vudu Home page. A Button: Enter. B Button: previous page"),this.selectable=!1,this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.topPos=window.vui.ResDef.infoSettingsView.CREDITS_SPACING,this.counter=1,this.createRowForXbox("Enter","/images/uwp/a_green_enter.png"),this.createRowForXbox("Back","/images/uwp/b_red_back.png"),this.createRowForXbox("Vudu Search","/images/uwp/y_yellow_vudu_search.png"),this.createRowForXbox("Vudu Home","/images/uwp/3_bars_white_vudu_home.png")):(vui._.setAriaLabel("Help Info: Remote Control Help. Blue Button: Go to Vudu Home page. Back Button: previous page or exit Vudu"),this.selectable=!1,this.attachChild(new vui.widgets.TextPanel({elemClassName:"rightPanelHeader",textLabel:this.title,top:window.vui.ResDef.infoSettingsView.RIGHT_PANEL_HEADER_T})),this.topPos=window.vui.ResDef.infoSettingsView.CREDITS_SPACING,this.counter=1,this.createRow("HELP_GOTO_HOME"),this.createRow("HELP_PREV_PAGE_EXIT",vui.images.returnRemoteButton))},createRow:function(e,t){this.topPos+=window.vui.ResDef.infoSettingsView.CREDITS_H,params={elemClassName:"fontMedium help_section row_"+this.counter,textLabel:e?vui.strings.getText(e):"Show Help Menu",imgSrc:t||"",top:this.topPos};var i=new vui.widgets.ImageAndTextPanel(params);i.selectable=!1,this.attachChild(i),this.counter++},createRowForXbox:function(e,t){this.topPos+=window.vui.ResDef.infoSettingsView.CREDITS_H,params={elemClassName:"fontMedium xbox_help_section row_"+this.counter,textLabel:e,imgSrc:t||"",top:this.topPos};var i=new vui.widgets.ImageAndTextPanel(params);i.selectable=!1,this.attachChild(i),this.counter++}}),vui.widgets.InfoSettingsBook=new Class({Extends:vui.widgets.Book,name:"vui.widgets.InfoSettingsBook",elemClassName:"InfoSettingsRightPanel",selectionInheritance:!0,fullScreenMode:!1,pages:{MyAccount:{widgetClass:vui.widgets.MyAccount,skipHistory:!0,index:0},FamilySettings:{widgetClass:vui.widgets.FamilySettings,skipHistory:!0,index:1},CCPanel:{widgetClass:vui.widgets.CCPanel,skipHistory:!0,index:2},QualitySettings:{widgetClass:vui.widgets.QualitySettings,skipHistory:!0,index:3},About:{widgetClass:vui.widgets.About,skipHistory:!0,index:4},AdvancedSettings:{widgetClass:vui.widgets.AdvancedSettings,skipHistory:!0,index:5},AudioSettings:{widgetClass:vui.widgets.AudioSettings,skipHistory:!0,index:6},AutoPlaySettings:{widgetClass:vui.widgets.AutoPlaySettings,skipHistory:!0,index:7}},init:function(){this.elem.style.left=window.vui.ResDef.infoSettingsView.RIGHT_MENU_L+"px"},onBack:function(){vui.executeOnContainer(this,"onDirectionLeft")}}),vui.widgets.InfoSettingsMenuButton=new Class({Extends:vui.widgets.MenuPanelButton,name:"vui.pages.InfoSettingsMenu",init:function(e,t){(t=t||{}).defaultClassName="btn_bg_size19_default",t.selectClassName="new_btn_bg_select btn_bg_size19_select",this.parent(e,t),this.elem.className=this.elem.className+" infoSettingsMenuButton",this.elem.style.height=window.vui.ResDef.infoSettingsView.MENU_BUTTON_EN_H+"px",this.label.className=vui.vvPlatform.appFeatureEnabled()?"font24":"fontMedium",this.label.setAttribute("aria-hidden","true"),this.divider=new Element("div",{class:"InfoSettingsMenuButton_divider"}),this.elem.appendChild(this.divider)}}),vui.widgets.InfoSettingsMenu=new Class({Extends:vui.widgets.Container,name:"vui.pages.InfoSettingsMenu",elemClassName:"InfoSettingsMenu",init:function(){this.buttons=[],this.buttonClass=vui.widgets.InfoSettingsMenuButton,this.createButton(vui.vvPlatform.appFeatureEnabled()?"SETTINGS_YOUR_ACCOUNT_OPTION":"SETTINGS_MY_ACCOUNT_OPTION","MyAccount"),this.createButton("SETTINGS_FAMILY_OPTION","FamilySettings"),"mex"!==vui.USER_COUNTRY&&1==vui.gConnectionInstance.getSubtitleGroup()&&this.createButton("SETTINGS_CLOSED_CAPTION_OPTION","CCPanel"),this.createButton("SETTINGS_PLAYBACK_QUALITY","QualitySettings"),this.createButton("SETTINGS_AUTOPLAY_OPTION","AutoPlaySettings"),this.createButton("SETTINGS_ABOUT_OPTION","About"),hardwareId=VUDU.registryGet("hardwareId"),hwid=hardwareId.substr(0,4),"SAMT"==hwid&&this.createButton("SETTINGS_AUDIO_SETTING_OPTION","AudioSettings"),(vui.account.hasInternetAppsFlag()||vui.account.hasLevel2DebugLabel())&&this.createButton("SETTINGS_ADVANCED_OPTION","AdvancedSettings");var e=new vui.widgets.MenuPanel({elemClassName:"infoSettingsMenuPanel",menuButtonPadding:-1});this.menu=e,this.attachChild(e),this.menu.bind(this.buttons)},createButton:function(e,t,i){this.buttons.push({buttonClass:this.buttonClass,label:vui.strings.getTransformedText(e),desc:i,onAction:function(){vui.getSelected()!=this?(vui.executeOnContainer(this.parentWidget,"highlightSelectedIndex",this.index),vui.select(this)):vui.executeOnContainer(this.parentWidget,"onDirectionRight",{})},onSelect:function(){vui.executeOnContainer(this.parentWidget,"selectSelectedIndex",this.index),vui.executeOnContainer(this.parentWidget,"setRightPanel",{panelName:t,selectedIndex:this.index})}})},selectMenuButtonAtIndex:function(e){this.menu.selectMenuButtonAtIndex(e)},onDirectionRight:function(){vui.executeOnContainer(this.parentWidget,"highLightMenu",{}),vui.executeOnContainer(this.parentWidget,"onDirectionRight",{})}}),vui.widgets.InfoAndSettingsView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.InfoSettingsView",elemClassName:"InfoSettingsView",layout:{type:"horizontal"},currentPanel:"",init:function(){this.infoSettingsMenu=new vui.widgets.InfoSettingsMenu,this.attachChild(this.infoSettingsMenu),this.infoSettingsBook=new vui.widgets.InfoSettingsBook,this.attachChild(this.infoSettingsBook),vui.addHomeHelp(this.elem),this.infoSettingsBook.goToPage("MyAccount",{initial:!0})},show:function(e){var t;e&&e.state&&e.state.currentPanel&&(t=e.state.currentPanel,this.infoSettingsMenu.selectMenuButtonAtIndex(this.infoSettingsBook.pages[t].index))},setRightPanel:function(e){e&&e.panelName?(this.selectedIndex=e.selectedIndex,this.currentPanel=e.panelName,this.infoSettingsBook.goToPage(e.panelName,{},!0)):alert("ERROR in setRightPanel: panelName wasn't defined")},onBack:function(){vui.executeOnContainer(this,"onDirectionUp")},highLightMenu:function(){1==this.infoSettingsBook.currentPage.selectable&&this.infoSettingsMenu.menu.highlightSelectedIndex(this.selectedIndex)},saveState:function(){var e={};return e.currentPanel=this.currentPanel,e}}),vui.widgets.PasscodeDigit=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).elemClassName=e.elemClassName||"passcode_digit",e.defaultClassName=this.defaultClassName="btn_bg_default btn_bg_size2_default",e.selectClassName=this.selectClassName="btn_bg_select_outline btn_bg_size2_select",e.labelClassName="main-num",this.parent(e),this.appendNums(),this.appendArrows(),this.setLabel("0"),this.value=0,this.numsShowing=!1,this.setDescription(this.value),this.label.setAttribute("aria-live","assertive"),this.label.setAttribute("role","option")},appendArrows:function(){this.upArrow=document.createElement("img"),this.upArrow.className="scroller_actionButton_upArrow",this.upArrow.src=vui.images.upArrow,this.upArrow.style.display="none",this.elem.appendChild(this.upArrow),this.downArrow=document.createElement("img"),this.downArrow.className="scroller_actionButton_downArrow",this.downArrow.src=vui.images.downArrow,this.downArrow.style.display="none",this.elem.appendChild(this.downArrow)},appendNums:function(){this.numbersContainer=document.createElement("div"),this.numbersContainer.className="numbers-container",this.topNum=document.createElement("p"),this.topNum.className="top-num",this.lowNum=document.createElement("p"),this.lowNum.className="low-num",this.lowNum.setAttribute("aria-hidden","true"),this.topNum.setAttribute("aria-hidden","true"),this.label.setAttribute("aria-hidden","true"),this.numbersContainer.appendChild(this.topNum),this.numbersContainer.appendChild(this.lowNum),this.elem.appendChild(this.numbersContainer)},typeNumber:function(e){this.setLabel("*"),this.clearNums(),this.value=e,vui._.setAriaLabel(this.value+" selected")},clear:function(){this.setLabel("0"),this.value=0},onDirectionDown:function(){this.numsShowing&&(this.value<9?(this.value=parseInt(this.value,10)+1,this.setLabel(this.value)):9===this.value&&(this.value=0,this.setLabel(this.value)),this.updateNums())},onDirectionUp:function(){this.numsShowing&&(0<this.value?(this.value=parseInt(this.value,10)-1,this.setLabel(this.value)):0===this.value&&(this.value=9,this.setLabel(this.value)),this.updateNums())},onDeselect:function(){this.numsShowing&&(this.setLabel("*"),this.clearNums()),this.parent()},onDirectionRight:function(){this.setLabel("*"),this.clearNums(),vui.executeOnContainer(this.parentWidget,"onDirectionRight")},onDirectionLeft:function(){this.setLabel("*"),this.clearNums(),vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},showNums:function(){this.elem.removeClass(this.selectClassName),this.elem.addClass("btn_bg_select"),this.label.addClass("select"),this.numsShowing=!0,this.downArrow.style.display=this.upArrow.style.display="block",this.setLabel(this.value),this.updateNums()},onAction:function(){this.numsShowing?(vui._.setAriaLabel(this.value+" selected"),this.onDirectionRight()):(vui._.setAriaLabel(this.value.toString()),this.showNums())},updateNums:function(){vui._.setAriaLabel(this.value.toString()),this.lowNum.textContent=9===this.value?0:parseInt(this.value,10)+1,this.topNum.textContent=0===this.value?9:parseInt(this.value,10)-1},clearNums:function(){this.elem.removeClass("btn_bg_select"),this.elem.addClass(this.selectClassName),this.label.removeClass("select"),this.numsShowing=!1,this.topNum.textContent=this.lowNum.textContent="",this.downArrow.style.display=this.upArrow.style.display="none"}}),vui.widgets.ConfirmButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.setLabel(vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_DONE"))},onAction:function(e){vui.executeOnContainer(this.parentWidget,"onInputComplete")}}),vui.widgets.OKButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.setLabel(vui.strings.getTransformedText("GENERIC_DIALOG_OK_BUTTON"))},onAction:function(e){vui.executeOnContainer(this.parentWidget,"onInputComplete")}}),vui.widgets.CancelButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e.defaultClassName="btn_bg_cancel_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.setLabel(vui.strings.getTransformedText("SETTINGS_PC_PASSCODE_CANCEL"))},onAction:function(e){vui.executeOnContainer(this.parentWidget,"onReturn")}}),vui.pages.PasscodeDialog=new Class({Extends:vui.pages.DialogBase,layout:{type:"vertical"},init:function(e){$defined((e=e||{}).isOpaqueBg)||(e.isOpaqueBg=!0),this.parent(e),this.titles={input:vui.strings.getText("SETTINGS_PC_CURRENT_PIN"),new:vui.strings.getText("FAM_PLEASE_INPUT_NEW"),confirm:vui.strings.getText("FAM_PLEASE_INPUT_SAME")},this.state="input",this.callback=e.callback;var t=vui.familyModel.getPasscode();this.correctPasscode=e.correctPasscode||t,this.returnPasscode=e.returnPasscode,this.retries=e.retries||3,e.elemClassName&&(this.elem.className=e.elemClassName),e.mode&&(this.mode=e.mode),"new"==this.mode&&(this.state="new"),e.promptText?this.promptText=e.promptText:this.promptText=this.titles[this.state],e.promptText2&&(this.promptText2=e.promptText2),this.authType=e.authType,this.top=new vui.widgets.HorizontalContainer({elemClassName:"passcode_panel_subcontainer"}),this.attachChild(this.top),e.heading&&(this.heading=new Element("div",{class:"pc_headerText font30 pc_heading"}),this.heading.innerHTML=e.heading,this.top.elem.appendChild(this.heading)),this.title=new Element("div",{class:"pc_descText fontMedium"}),this.title.appendChild(document.createTextNode(this.promptText)),this.top.elem.appendChild(this.title),this.promptText2&&(this.desc=createDiv({className:"pc_descText fontMedium",text:this.promptText2},this.elem),this.top.elem.appendChild(this.desc)),this.digits=[],this.pc0=new vui.widgets.PasscodeDigit({elemClassName:"passcode_digit passcode_digit_0"}),this.top.attachChild(this.pc0),this.digits.push(this.pc0);var i=new vui.widgets.PasscodeDigit({elemClassName:"passcode_digit passcode_digit_1"});this.top.attachChild(i),this.digits.push(i);i=new vui.widgets.PasscodeDigit({elemClassName:"passcode_digit passcode_digit_2"});this.top.attachChild(i),this.digits.push(i);var s,i=new vui.widgets.PasscodeDigit({elemClassName:"passcode_digit passcode_digit_3"});this.top.attachChild(i),this.digits.push(i),this.bottom=new vui.widgets.HorizontalContainer({elemClassName:"passcode_panel_button_container"}),this.attachChild(this.bottom),s=e.confirmType&&"ok"===e.confirmType?new vui.widgets.OKButton({elemClassName:"pc_confirm_button imageActionButton"}):new vui.widgets.ConfirmButton({elemClassName:"pc_confirm_button imageActionButton"}),this.bottom.attachChild(s);var n=new vui.widgets.CancelButton({elemClassName:"pc_cancel_button imageActionButton"});this.bottom.attachChild(n),this.top.onMouseWheel=function(e){void 0!==this.selected&&(e.wheel<0?this.children[this.selected].onDirectionUp():this.children[this.selected].onDirectionDown())}.bind(this.top),this.top.onDirectionRight=function(e){this.top.selected<3?vui.select(this.top.children[this.top.selected+1]):this.bottom.children[0]?vui.select(this.bottom.children[0]):vui.executeOnContainer(this,"onDirectionRight")}.bind(this),this.bottom.onDirectionLeft=function(e){0!==this.bottom.selected?vui.select(this.bottom.children[0]):this.top.children[3]?vui.select(this.top.children[3]):vui.executeOnContainer(this,"onDirectionLeft")}.bind(this);var a=document.createElement("div");a.className="passcode-message",a.appendChild(document.createTextNode("")),this.elem.appendChild(a),this.message=a,this.message.selectable=!1,this.currentTry=1},show:function(){this.parent(),vui.select(this.pc0);var e="";this.heading&&this.heading.innerHTML&&(e+=this.heading.innerHTML+". "),e+=this.promptText,this.promptText2&&(e+=". "+this.promptText2),vui._.setAriaLabel(e)},setLeftPanel:function(e){vui.executeOnContainer(this.parentWidget,"setLeftPanel",e)},clearMessage:function(){this.hideTimer&&(insertText(this.message,""),clearTimeout(this.hideTimer),delete this.hideTimer,this.hidingTop=!1)},retry:function(){this.currentTry+=1;for(var e=0;e<this.digits.length;e++)this.digits[e].clear();vui.select(this.top.children[0]),insertText(this.title,this.titles[this.state])},getPasscodeAsString:function(){str="";for(var e=0;e<this.digits.length;e++)str+=this.digits[e].value;return str},onInputComplete:function(){var e=this.getPasscodeAsString();this.returnPasscode?this.callback(e):e==this.correctPasscode?this.callback("correct"):this.currentTry<this.retries?(this.retry(),this.message.innerHTML=vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("SETTINGS_PIN_INCORRECT_TRY_AGAIN"):vui.strings.getText("SETTINGS_PC_INCORRECT_TRY_AGAIN"),vui._.setAriaLabel(this.message.innerHTML),this.hideTimer=setTimeout(function(){this.message.innerHTML=""}.bind(this),3e3)):(controller.showPopup("ZeroButtonDialog",{message:vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("SETTINGS_PIN_INCORRECT"):vui.strings.getText("SETTINGS_PC_INCORRECT"),elemClassName:"zeroButtonDialog"}),setTimeout(function(){controller.hidePopup(),this.callback("incorrect")}.bind(this),3e3))},onNumeric:function(e){this.clearMessage();var t=this.top.getSelectedChild();if(t&&t.typeNumber&&(alert("GOT NUMBER:"+e),t.typeNumber(e)),t!=this.digits[3]){for(var i=0;i<3;i++)if(t==this.digits[i]){this.top.changeSelection(i+1),vui._.setAriaLabel(e);break}}else vui.select(this.bottom.children[0])},onReturn:function(){this.callback("back")},onBack:function(){this.parent(),this.callback&&this.callback("back")}}),vui.loadTabModels=function(n){var e;vui.gConnectionInstance.usePersonalizedApis()?(vui.TabsModel&&vui.TabsModel.lastFetched+1e4>VUDU.vuduTime()&&n(),e={_type:"uxNavRequest"},vui.m.userId?(e.accountId=vui.m.userId,e.lightDeviceId=vui.getModel().directorCsClient.getLightDeviceId()):(e.clientType=vui.vvPlatform.clientType,e.domain=vui.vvPlatform.getDomain()),vui.m.doQuery(e,function(e,t,i){if(vui.m.setZToken(vui._.aStr(i.zToken)),!i.uxNav){var s=vui.vvPlatform.appFeatureEnabled()?"Your Library":"MY VUDU";return vui.TabsModel={tabs:[{name:"myOffers",title:"",iconPath:vui.images.home.myoffers_notification_read,type:"My Offers"},{name:"my",title:s},{name:"search",title:"Search",type:"search"},{name:"infoSettings",title:"Settings",type:"settings"}]},void n()}vui.TabsModel={lastFetched:VUDU.vuduTime(),tabs:i.uxNav.map(function(e){if(e.anchor){var t=vui._.aStr(e.anchor),i={name:t,type:t};switch(t){case"myOffers":i.iconPath=vui.images.home.myoffers_notification_read;break;case"myLibrary":i.title=vui._.aStr(e.label);break;case"settings":i.title=vui._.aStr(e.label),i.name="infoSettings";break;case"search":i.title=vui._.aStr(e.label);break;default:i.iconPath=vui.images.home[t]}return i}return{name:vui._.aStr(e.label),title:vui._.aStr(e.label),subtabs:e.subNav,element:vui._.aStr(e.element)}}),defaultTab:vui._.aStr(vui._.aStr(i.uxNav.filter(function(e){return"true"===vui._.aStr(e.isDefault)})).label)||"Home"},n()})):(vui.TabsModel={tabs:[{name:"myOffers",title:"",iconPath:vui.images.home.myoffers_notification_read,type:"My Offers"},{name:"my",title:vui.strings.getText("TAB_MY_VUDU")},{name:"spotlight",title:vui.strings.getText("TAB_SPOTLIGHT")},{name:"moviesBrowse",title:vui.strings.getText("TAB_MOVIES")},{name:"tvBrowse",title:vui.strings.getText("TAB_TV")},{name:"recommended",title:vui.strings.getText("TAB_RECOMMENDED")},{name:"search",title:"Search",type:"search"},{name:"infoSettings",title:"Settings",type:"settings"}]},n())},vui.widgets.genreInfoPanel=new Class({Extends:vui.widgets.Base,name:"vui.widgets.genreInfoPanel",elemClassName:"genreInfoPanel",init:function(){this.width=window.vui.ResDef.movieInfoPanel.W,this.height=window.vui.ResDef.movieInfoPanel.H,this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.title=document.createElement("div"),this.title.className="genreInfoPanel_title";var e=document.createElement("div");e.className="genrePanelLine",e.style.background="url('"+vui.images.mp.line+"') center repeat-x",this.description=document.createElement("div"),this.description.className="genreInfoPanel_description",this.elem.appendChild(this.title),this.elem.appendChild(e),this.elem.appendChild(this.description)},bind:function(e){var t=e.name||"",i=e.description||"";vui._.innerHTML(this.title,t),vui._.innerHTML(this.description,i)}}),vui.widgets.movieInfoPanel=new Class({Extends:vui.widgets.Base,name:"vui.widgets.movieInfoPanel",elemClassName:"movieInfoPanel",init:function(){this.width=window.vui.ResDef.movieInfoPanel.W,this.height=window.vui.ResDef.movieInfoPanel.H,this.elem.id="movieInfoPanel",this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.contentPanel=new Element("div",{class:"contentPanel"}),this.elem.appendChild(this.contentPanel),this.contentPanel.style.display="none",this.createContentPanel(this.contentPanel),this.entryPanel=new Element("div",{class:"EntryPanel"}),this.elem.appendChild(this.entryPanel),this.entryPanel.style.display="none",this.createEntryPanel(this.entryPanel),this.elem.appendChild(this.contentPanel),this.elem.appendChild(this.entryPanel),this.dimmer=document.createElement("div"),this.dimmer.className="movieInfoPanel_dimmer",this.elem.appendChild(this.dimmer),this.sample_ad=document.createElement("div"),this.sample_ad.className="sample_ad",this.sample_ad.style.display="none",this.elem.appendChild(this.sample_ad),this.genreInfoPanel=new vui.widgets.genreInfoPanel,this.genreInfoPanel.setSelectable(!1),this.genreInfoPanel.hide(),this.elem.appendChild(this.genreInfoPanel.elem),this.annImg=document.createElement("img"),this.sample_ad.appendChild(this.annImg),this.selectable=!1},createContentPanel:function(e){this.promoImg=document.createElement("img"),this.promoImg.className="infoPanelPromoImg3",this.promoImg.id="infoPanelPromoImg3",e.appendChild(this.promoImg);var t=this.getInfoPanelContent();e.appendChild(t)},createEntryPanel:function(e){this.infoPanelContent=this.getEntryPanelContent(),e.appendChild(this.infoPanelContent)},_createDiv:function(e,t){var i=document.createElement("div");return i.className=e,t&&t.appendChild(i),i},getInfoPanelContent:function(){this.infoPanelContent=new Element("div"),this.infoPanelContent.className="infoPanelContent3";var e=this.infoPanelContent,t=document.createElement("table");t.className="infoPanelTitleTable3",e.appendChild(t);var i=document.createElement("tr");this.titleTd=document.createElement("td"),this.titleTd.vAlign="top",t.cellspacing="0",t.border="0",t.appendChild(i),i.appendChild(this.titleTd),this.title=this._createDiv("infoPanelTitle3",this.titleTd),this.ratingLengthCC=this._createDiv("infoPanelRatingLengthCC3",e),this.genre=this._createDiv("infoPanelGenre3",e),this.studio=this._createDiv("infoPanelStudio",e),this._createDiv("infoPanelLine",e).style.background="url('"+vui.images.mp.line+"') center repeat-x",this.bundleIncludes=this._createDiv("infoPanelIncludesImage",e),this.bundleIncludes.innerHTML=vui.strings.transformCase("Bundle Includes:",!0),this.bundleInfo=this._createDiv("infoPanelIncludes",e),this.daContainer=this._createDiv("infoPaneldaContainer",e),this.castContainer=this._createDiv("",this.daContainer),this.cast=this._createDiv("infoPanelDirName",this.castContainer),this.synopsis=this._createDiv("infoPanelSynopsis",this.daContainer);this._createDiv("clear",e);this.ratingContainer=this._createDiv("infoPanelRatingContainer",e),this.infoRating=this._createDiv("infoPanelInfoRating",this.ratingContainer),this.ratingStar=this._createDiv("infoPanelRatingStar3",this.infoRating),this.ratingGray=this._createDiv("infoPanelRatingGray3",this.ratingStar),this.ratingGray.style.backgroundImage="url('"+vui.images.mp.grayStar+"')",this.ratingGreen=this._createDiv("infoPanelRatingGreen3",this.ratingStar),this.ratingGreen.style.backgroundImage="url('"+vui.images.mp.greenStar+"')",this.infoPanelTomatoMeter=this._createDiv("infoPanelTomatoMeter",this.ratingContainer),this.tomatoMeter=this._createDiv("infoPanelTomatoMeterText",this.infoPanelTomatoMeter),this.tomatoMeterIcon=this._createDiv("infoPanelTomatoMeterIcon",this.infoPanelTomatoMeter),this.ageIcon=this._createDiv("infoPanelAgeIcon",this.ratingContainer);this._createDiv("clear",this.ratingContainer);return this.offerArea=this._createDiv("infoPanelOfferArea",e),this.rentFrom=this._createDiv("infoPanelRentFrom",this.offerArea),this.rentFromText=this._createDiv("infoPanelPriceText",this.rentFrom),this.rentFromPrice=this._createDiv("infoPanelRentFromPrice",this.rentFrom),this.ownFrom=this._createDiv("infoPanelOwnFrom",this.offerArea),this.ownFromText=this._createDiv("infoPanelPriceText",this.ownFrom),this.ownFromPrice=this._createDiv("infoPanelOwnFromPrice",this.ownFrom),this.preOrderFrom=this._createDiv("infoPanelPreOrderFrom",this.offerArea),this.preOrderFromText=this._createDiv("infoPanelPriceText",this.preOrderFrom),this.preOrderFromPrice=this._createDiv("font36 infoPanelPreOrderFromPrice",this.preOrderFrom),this._createDiv("clear",e),this.offerLabel=this._createDiv("infoPanelOfferLabel",e),this.thirdPartyArea=this._createDiv("infoPanelThirdPartyBlock",e),this.thirdPartyText=this._createDiv("fontSmall infoPanelThirdPartyText",this.thirdPartyArea),this.thirdPartyIcons=this._createDiv("infoPanelThirdPartyIcons font16",this.thirdPartyArea),this.infoPanelContent},getEntryPanelContent:function(){var e=new Element("div");e.className="infoPanelEntryContent",this.entryTitle=this._createDiv("infoPanelEntryTitle",e);var t=document.createElement("div");return t.className="genrePanelLine",t.style.background="url('"+vui.images.mp.line+"') center repeat-x",e.appendChild(t),this.entryPanelDesc=this._createDiv("infoPanelEntryDesc",e),e},hideAll:function(){this.sample_ad.style.display="none",this.contentPanel.style.display="none",this.entryPanel.style.display="none",this.genreInfoPanel.hide()},show_sample_ad:function(e){this.hideAll();var t=e||vui.m.announcementSrc;t&&(this.annImg.src=t,this.annImg.onerror=function(){this.annImg.style.display="none"}.bind(this),this.annImg.style.width="100%"),this.sample_ad.style.display="block",this.makeVisible()},showGenreInfoPanel:function(e){this.hideAll(),this.genreInfoPanel.bind(e),this.genreInfoPanel.show(),this.makeVisible()},show:function(t){var e=function(){this.hideAll(),this.removeListener();var e=null;if("uiEntry"==(this.dataEntry=t)._type&&(t=this.dataEntry.parameters[0]),t.contentId&&(e=t.contentId[0]),null!=this.timer&&(this.currentCid=this.pendingCid,clearTimeout(this.timer),this.timer=null),this.currentCid==e&&"uiEntry"!=this.dataEntry._type)return this.delayedFetch(),void this.addListener();this.pendingCid=e,this.movieInfoModel&&(vui.m.destroy(this.movieInfoModel),this.movieInfoModel=null),this.delayedFetch(),this.currentCid!=e&&(this.dimmer.style.display="block"),this.addListener()}.bind(this);setTimeout(e,500)},fetch:function(){var t=function(e){if(this.delay_currentPage&&controller.baseLayer.currentTemplate!=this.delay_currentPage)return alert("Async load mim NOT in currentTemplate: "+controller.baseLayer.currentTemplate+" is not "+this.delay_currentPage),void delete this.delay_currentPage;delete this.delay_currentPage,e?(e.refreshOffers&&e.refreshOffers(),this.bind(e)):"uiEntry"==this.dataEntry._type?this.movieInfoModel=vui.getModel().getEntryInfo(this.dataEntry,t):this.movieInfoModel=vui.getModel().getMovieInfo(this.pendingCid,t)}.bind(this);"uiEntry"==this.dataEntry._type?this.movieInfoModel=vui.getModel().getEntryInfo(this.dataEntry,t,!0):this.dataEntry.elementType&&"content"!==this.dataEntry.elementType?"mixMatch"===this.dataEntry.elementType?this.movieInfoModel=vui.getModel().getEntryInfo({parameters:[{}],uiEntryId:this.dataEntry.uxElementId},t,!0):t(this.dataEntry):this.movieInfoModel=vui.getModel().getMovieInfo(this.pendingCid,t)},delayedFetch:function(){this.delay_currentPage=window.controller.baseLayer.currentTemplate,null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.fetchDelegate||(this.fetchDelegate=this.fetch.bind(this)),this.timer=setTimeout(this.fetchDelegate,window.selectDelay)},addListener:function(){},removeListener:function(){},hide:function(){this.movieInfoModel&&vui.m.destroy(this.movieInfoModel),delete this.movieInfoModel,clearTimeout(this.timer),clearTimeout(this.staleTimer),this.contentPanel.style.display="none",this.entryPanel.style.display="none",this.currentCid=null,this.pendingCid=null,this.removeListener()},invisible:function(){this.hide(),this.elem.style.display="none"},makeVisible:function(){this.elem.style.display="block"},bind:function(e){this.hideAll();var t=vui._.getPromoUrl(e.data,"meta");t?(this.promoImg.src=t,this.promoImg.style.visibility="visible",this.promoImg.onerror=function(){this.promoImg.style.display="none"}.bind(this)):this.promoImg.style.visibility="hidden";var i=e.data&&"uiEntry"==e.data._type||e.elementType&&"content"!==e.elementType||e.data&&"uiEntry"===e.data.type;e.movieId!=this.pendingCid&&0==i||(this.contentPanel.style.display="none",this.entryPanel.style.display="none",this.ratingContainer.style.visibility="visible",this.thirdPartyArea.style.display="none",0==i?this.showContentInfo(e):this.showEntryInfo(e),this.dimmer.style.display="none",this.sample_ad.style.display="none")},hideBundleInfo:function(){this.bundleInfo.style.display="none",this.bundleIncludes.style.display="none"},populateBundleInfo:function(e){if(this.daContainer.addClass("infoPaneldaContainerBundle"),this.castContainer.style.display="none",this.bundleInfo.style.display="none",this.bundleIncludes.style.display="none",e.bundledContent){this.bundleIncludes.style.display="block",this.bundleInfo.style.display="block";for(var t,i=this.bundleInfo.innerHTML="",s=vui.vvPlatform.appFeatureEnabled()?4:5,n="",a="",o=0;o<e.bundledContent.length;o++){if(a=e.bundledContent[o].title&&e.bundledContent[o].title[0]||"",0===o?n=a:n&&(t=new RegExp(vui._.regExpEscape(n+":"),"i"),a=a.replace(t,"")),i+='<div class="bundledMovieInfoTitle">'+a+"</div><div></div>",o==s-1)break;this.bundleInfo.innerHTML=this.bundleInfo.innerHTML+"<br/><br/>"}var r=e.bundledContent.length-s;0<r&&(i+='<div class="bundledMovieInfoTitle">'+vui.strings.getText("SIDE_PANEL_PLUS_X_MORE",r)+"</div>"),this.bundleInfo.innerHTML=i,e.description&&e.description[0]&&(this.synopsis.innerHTML=vui._.multiLineEllipsis(e.description[0],90))}},populateSecondaryInfo:function(e){var t,i=e&&e.type&&e.type[0],s=[];e.releaseTime&&(t=vui.strings.transformCase(vui.displayReleaseTime(e.releaseTime[0])+"",!0))&&s.push(t),e.contentRating&&s.push(window.getFriendlyRating(e.contentRating[0])),e.lengthSeconds&&e.lengthSeconds[0]&&s.push(Math.ceil(e.lengthSeconds[0]/60)+vui.strings.transformCase(" min",!0)),"bundle"===i&&e.language&&e.language[0]&&s.push(vui.strings.transformCase(e.language[0],!0)),this.ratingLengthCC.innerHTML=s.join(" / "),this.genre.innerHTML="";var n=[],a=e.geneGenres&&e.geneGenres[0]&&e.geneGenres[0].geneGenre;if(a)for(var o=0;o<a.length&&(n.push(a[o].name),3!==n.length);o++);n.length&&(this.genre.innerHTML=vui._.multiLineEllipsis(n.join(" / "),32)),"bundle"===i&&e.studio&&e.studio[0]?this.studio.innerHTML=e.studio[0].name:this.studio.innerHTML=""},populateTitle:function(e){var t,i=e.title&&e.title[0];"episode"!=e.type||(t=vui.getEpisodeSeasonLabel(e))&&(i=i.split(":")[0],i+="<br>"+t),i&&(this.title.innerHTML=vui._.multiLineEllipsis(i,36))},populateRatingsArea:function(e){var t,i,s,n=e.data;this.infoPanelTomatoMeter.style.display="none",vui.features.TOMATOMETER&&n.tomatoMeter&&n.tomatoMeter[0]&&(t=vui._.aStr(n.tomatoIcon),i="true"===vui._.aStr(n.tomatoCertifiedFresh),s=t&&vui.images.mp[t+"Tomato"]?"fresh"===t&&i?vui.images.mp.certifiedTomato:vui.images.mp[t+"Tomato"]:vui.images.mp.tomato,this.tomatoMeterIcon.style.backgroundImage="url('"+s+"')",this.tomatoMeter.innerHTML=n.tomatoMeter[0]+"%",this.infoPanelTomatoMeter.style.display="block"),this.infoRating.style.display="none";var a,o=0,r=e.getUserRating();0<r?(o=.2*r,this.ratingGreen.style.backgroundImage="url('"+vui.images.mp.greenStar+"')"):(o=this._getCommunityRating(n),this.ratingGreen.style.backgroundImage="url('"+vui.images.mp.whiteStar+"')"),o&&(a=(5*o).toFixed(1)/5*window.vui.ResDef.movieInfoPanel.RATING_W,this.ratingGreen.style.width=a+"px",this.infoRating.style.display="block"),n.ageLimit?(this.ageIcon.style.backgroundImage="url('"+vui.images.commonSense["age"+vui._.aStr(n.ageLimit)+"_meta"]+"')",this.ageIcon.style.display="block"):this.ageIcon.style.display="none",this.ratingContainer.style.display="block"===this.infoPanelTomatoMeter.style.display||"block"===this.infoRating.style.display||"block"===this.ageIcon.style.display?"block":"none"},hideRatingsArea:function(){this.ratingContainer.style.visibility="hidden",this.ratingContainer.style.display="none"},populateThirdPartyArea:function(e){var t;this.thirdPartyArea.style.visibility="hidden",this.thirdPartyIcons.innerHTML="",vui._.aStr(e.subscriptionServiceContents)&&e.subscriptionServiceContents[0].subscriptionServiceContent?(t=getThirdPartyInfo(e,"meta"),this.thirdPartyText.innerHTML=t.title,t.icons.forEach(function(e){createImg({src:e,position:"static"},this.thirdPartyIcons)}.bind(this)),t.more&&createDiv({text:vui.strings.transformCase("& more"),position:"static",className:"more"},this.thirdPartyIcons),this.thirdPartyArea.style.display="block",this.thirdPartyArea.style.visibility="visible"):this.thirdPartyArea.style.display="none"},showContentInfo:function(e){var t=e.data;this.currentCid=this.pendingCid,this.offerBind(e),"bundle"==t.type?this.populateBundleInfo(t):(this.daContainer.style.display="block",this.daContainer.removeClass("infoPaneldaContainerBundle"),this.castContainer.style.display="block",this.hideBundleInfo(),this.addCast(t),this.addActors(t)),this.populateTitle(t),this.populateSecondaryInfo(t),"bundle"!=t.type?(this.populateRatingsArea(e),this.populateThirdPartyArea(t)):this.hideRatingsArea(),this.contentPanel.style.display="block",this.entryPanel.style.display="none"},showEntryInfo:function(e){var t;this.contentPanel.style.display="none",this.entryPanel.style.display="block",e.getTitle?t=e.getTitle():(e.elementLabel||e.firstName)&&(t=e.elementLabel||e.firstName),t=t||"",vui._.innerHTML(this.entryTitle,t);var i=e.data&&e.data.description||e.elementDescription||"";this.entryPanelDesc.innerHTML=i},_getCommunityRating:function(e){var t,i=e.ratingsSummaries&&e.ratingsSummaries[0].ratingsSummary;return i&&(t=i[0].starRatingsAvg[0]),t&&0<t?.2*t:0},addActors:function(e){var t=vui._.aStr(e.description);this.synopsis.innerHTML=vui._.multiLineEllipsis(t,90)},_getFullName:function(e){return e.lastName?e.firstName?e.firstName[0]+" "+e.lastName[0]:e.lastName[0]:e.firstName?e.firstName[0]:""},addCast:function(e){var t=e.credits&&0<e.credits.length&&e.credits[0].credit;if(!t)return this.cast.innerHTML="",void(this.castContainer.style.display="none");for(var i="",s=0;s<t.length;s++){var n=t[s];if("Actor"==n.role){if(!(i.length<70))break;i&&(i+=", "),i+=this._getFullName(n)}}this.cast.innerHTML=vui._.multiLineEllipsis(i,60),this.castContainer.style.display="block"},getMetaString:function(e){var t,i,s,n,a="";return"season"!=e.type&&"episode"!=e.type||(t="",e.episodeNumberInSeason&&(t=vui.strings.getText("SIDE_PANEL_EPISODE")+"&nbsp;"+e.episodeNumberInSeason[0]),a+=vui.strings.getText("SIDE_PANEL_SEASON")+"&nbsp;"+e.seasonNumber+"&nbsp;"+t+" / "),e.releaseTime&&(a+=vui.displayReleaseTime(e.releaseTime[0])+" / "),e.contentRating&&(a+=window.getFriendlyRating(e.contentRating[0])+" / "),e.bestStreamableVideoQuality&&e.variants[e.bestStreamableVideoQuality[0]]?i=e.variants[e.bestStreamableVideoQuality[0]]:(s=vui.getModel().ownedMovieCache[e.contentId[0]])&&s.owned?i=s.ownedList[s.owned]:s&&s.rented&&(i=s.rentedList[s.rented]),i&&i.lengthSeconds&&(n=i.lengthSeconds[0],a+=vui.strings.getText("MOVIE_DETAILS_LENGTH_MINUTES",Math.ceil(n/60))+" / "),e.geneGenres&&e.geneGenres[0]&&e.geneGenres[0].geneGenre&&(a+=e.geneGenres[0].geneGenre[0].name[0]),a},offerBind:function(e){var t,i,s,n;this.ownFromPrice.style.color="#fff",this.rentFromPrice.style.color="#fff","uiEntry"!=e._type&&(t=e&&e.data,e&&e.data&&e.data.variants&&(n=[],n=vui.getModel().getBestOffer(t,"meta"),"bonus"===t.type[0]?(this.offerArea.style.display="none",this.offerLabel.style.display="block",vui._.innerHTML(this.offerLabel,vui.strings.getTransformedText("WATCH_FREE"))):n[2]?(this.offerLabel.style.display="none",this.ownFrom.style.display="block",this.offerArea.style.display="block",0!=n[2].Purchase||n[2].Rental?n[2].Purchase?(this.ownFromText.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_OWN_FROM"),"discount"==n[2].Purchase[1]?(i=n[2].Purchase[0],this.ownFromPrice.style.color="#ff8f02"):(i=n[2].Purchase,t.conditionalOfferPrice==n[2].Purchase&&(this.ownFromText.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_MY_OFFER"),this.ownFromPrice.style.color="#ff8f02"),n[2].walmartOffer&&parseFloat(n[2].walmartOffer)<parseFloat(i)&&(i=n[2].walmartOffer)),vui._.innerHTML(this.ownFromPrice,"$"+i)):this.ownFrom.style.display="none":vui._.innerHTML(this.ownFromPrice,vui.strings.getTransformedText("OWNDISC_FREE")),n[2].Rental?(this.rentFromText.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_RENT_FROM"),"discount"==n[2].Rental[1]?(s=n[2].Rental[0],this.rentFromPrice.style.color="#ff8f02"):(s=n[2].Rental,t.conditionalOfferPrice==n[2].Rental&&(this.rentFromText=vui.strings.getTransformedText("MOVIE_DETAILS_MY_OFFER"),this.rentFromPrice.style.color="#ff8f02")),this.rentFrom.style.display="block",this.offerArea.style.display="block",vui._.innerHTML(this.rentFromPrice,"$"+s)):this.rentFrom.style.display="none",n[2].PreOrder?(this.preOrderFromText.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_PREORDER_BUTTON"),t.conditionalOfferPrice==n[2].PreOrder&&(this.preOrderFromPrice.style.color="#ff8f02",this.preOrderFromText.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_MY_OFFER")),this.preOrderFrom.style.display="block",this.offerArea.style.display="block",vui._.innerHTML(this.preOrderFromPrice,"$"+n[2].PreOrder)):this.preOrderFrom.style.display="none"):n[0]?(this.offerArea.style.display="none",this.offerLabel.style.display="block",vui._.innerHTML(this.offerLabel,vui.strings.transformCase(n[0],!0))):(this.offerArea.style.display="none",this.offerLabel.style.display="none")))}}),vui.gridPanelGlue={onSelectedPoster:function(e){var t,i,s,n;this.movieInfoPanel?e&&e.data&&(e.data.elementType||"uiEntry"==e.data._type||e.data.contentId)?(t=e.data,i=vui.getSelected(),n=s=null,n="uiEntry"==t._type?(s=i&&i.data&&i.data.uiEntryId&&i.data.uiEntryId[0]||null,t&&t.uiEntryId&&t.uiEntryId[0]||null):t.elementType&&"content"!==t.elementType?(s=i&&i.data&&(vui._.aStr(i.data.uxElementId)||vui._.aStr(i.data.personId))||null,t&&vui._.aStr(t.uxElementId)||vui._.aStr(t.personId)||null):(s=i&&i.data&&i.data.contentId&&i.data.contentId[0]||null,t&&t.contentId&&t.contentId[0]||null),s&&n&&s===n&&this.movieInfoPanel.show(t)):this.movieInfoPanel.hide():alert("Error: no this.movieInfoPanel")}},vui.WidgetFactory=new Class({initialize:function(e,t){this.widgetTemplate=e,this.count=t,this.recycleBin=this.createManyWidgets(t)},createManyWidgets:function(e){for(var t=[],i=0;i<e;i++){var s=new this.widgetTemplate;t.push(s)}return t},getWidget:function(){var e=this.recycleBin,t=null;return e?(alert("Recycling widget"),t=e.pop(),0===e.length&&delete this.recycleBin):(alert("Making new widget "+this.widgetTemplate.name),t=new this.widgetTemplate),t},makeWidget:function(e){var t=this.getWidget();return t.bind(e),t},onDeleteWidget:function(e){e.unbind&&e.unbind(),this.recycleBin||(this.recycleBin=[]),this.recycleBin.push(e)}}),vui.widgets.Scroller=new Class({Extends:vui.widgets.Base,scwd:12,scht:28,arrowHt:10,pos:[10,17,24,31,38],posDown:[38,31,24,17,10],init:function(e){this.elem.className="scroller",this.upArrow=new Element("div",{class:"upArrow"}),this.elem.appendChild(this.upArrow),this.downArrow=new Element("div",{class:"downArrow"}),this.elem.appendChild(this.downArrow),this.arrowHeight=this.scht+this.arrowHt,this.upArrow.style.visibility="hidden",this.downArrow.style.visibility="hidden"},setRatio:function(e){if(alert("SET RATIO: "+e),null==e)return this.upArrow.style.visibility="hidden",void(this.downArrow.style.visibility="hidden");var t=(this.currentRatio=e)||0;t<0&&(t=0),1<t&&(t=1),this.upArrow.style.backgroundImage="url("+vui.images.scrollup+")",this.downArrow.style.backgroundImage="url("+vui.images.scrolldown+")",e<=0?this.upArrow.style.backgroundImage="url("+vui.images.upDull+")":1<=e&&(this.downArrow.style.backgroundImage="url("+vui.images.downDull+")");var i=Math.floor(t*(this.pos.length-1));this.height=this.elem.getSize().y,this.upArrow.style.height=this.pos[i]+"px";var s=this.posDown[i]||this.posDown[0];this.downArrow.style.top=this.height-s+"px",this.downArrow.style.height=s+"px";var n="0 -"+(this.arrowHeight-s)+"px";this.downArrow.style.backgroundPosition=n,this.upArrow.style.visibility="visible",this.downArrow.style.visibility="visible"}}),vui.widgets.Slider=new Class({Extends:vui.widgets.Base,scwd:12,scht:28,arrowHt:10,pos:[10,17,24,31,38],posDown:[38,31,24,17,10],init:function(e){this.elem.className="slider",this.leftArrow=new Element("div",{class:"leftArrow3"}),this.elem.appendChild(this.leftArrow),this.rightArrow=new Element("div",{class:"rightArrow3"}),this.elem.appendChild(this.rightArrow),this.leftArrow.style.visibility="hidden",this.rightArrow.style.visibility="hidden"},setRatio:function(e){alert("SET RATIO: "+e),this.leftArrow.style.visibility="visible",this.rightArrow.style.visibility="visible";var t=(this.currentRatio=e)||0;if(t<0&&(t=0),1<t&&(t=1),this.leftArrow.style.backgroundImage="url("+vui.images.interstitial_prev_arrow+")",this.rightArrow.style.backgroundImage="url("+vui.images.interstitial_next_arrow+")",e<=0?this.leftArrow.style.visibility="hidden":1<=e&&(this.rightArrow.style.visibility="hidden"),null==e)return this.leftArrow.style.visibility="hidden",void(this.rightArrow.style.visibility="hidden")}}),vui.widgets.Scroller3=new Class({Extends:vui.widgets.LeafContainer,scwd:12,scht:28,arrowHt:10,pos:[10,17,24,31,38],posDown:[38,31,24,17,10],elemClassName:"scroller3",list:null,init:function(e){this.el.nob=document.createElement("div"),this.el.nob.className="scroller3_nob","sd"==window.WIDGETRESOLUTION?this.elem.style.background="url('"+vui.images.home.scroller_dotted+"') 1px repeat-y":this.elem.style.background="url('"+vui.images.home.scroller_dotted+"') center repeat-y",this.elem.appendChild(this.el.nob),this.selectable=!1},setRatio:function(e){var t,i=e||0;i<0&&(i=0),1<i&&(i=1),this.ratio=i,this.elem.offsetHeight&&this.el.nob.offsetHeight&&(t=this.elem.offsetHeight-this.el.nob.offsetHeight,this.el.nob.style.marginTop=parseInt(t*i,10)+"px")},getRatio:function(){return this.ratio||0},setList:function(e){this.list=e},onAction:function(e){var t,i,s,n;this.list&&this.list.scrollUp&&this.list.scrollDown&&"click"===e.type&&(t=this.el.nob,e.target===this.elem&&(i=e.event.offsetY,s=t.offsetHeight,i<(n=""===t.style.marginTop?0:parseInt(t.style.marginTop,10))?this.list.scrollUp():n+s<i&&this.list.scrollDown()))}}),vui.widgets.SelectableScroller=new Class({Extends:vui.widgets.Scroller3,init:function(){this.parent(),this.selectable=!0},onSelect:function(){this.el.nob.addClass("selected")},onDeselect:function(){this.el.nob.removeClass("selected")}}),vui.widgets.BlowupGridPoster=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.BlowupGridPoster",selectorType:"none",elemClassName:"blowupGridPoster",init:function(e){e=e||{},this.elem.id=e.id,this.imgWidth=e.blowupWidth||window.vui.ResDef.PosterGrid.POSTER_BLOW_W,this.imgHeight=e.blowupHeight||window.vui.ResDef.PosterGrid.POSTER_BLOW_H,this.fullimg=document.createElement("img"),this.fullimg.style.position="absolute",this.elem.appendChild(this.fullimg),this.elem.style.display="none",this.episodeOverlay=document.createElement("div"),this.episodeOverlay.className="blowupEpisodeOverlay",this.episodeOverlay.style.background=vui.Theme.poster.overlayBackgroundColor,this.episodeOverlay.style.left=window.vui.ResDef.PosterGrid.POSTER_BLOW_L+"px",this.episodeOverlay.style.height=window.vui.ResDef.PosterGrid.POSTER_EPISODE_OVERLAY_H+"px",this.episodeOverlay.style.display="none",this.elem.appendChild(this.episodeOverlay),this.creditOverlay=createDiv({}),this.creditOverlay.style.backgroundColor=vui.Theme.poster.transparentOverlayBackgroundColor,this.creditOverlay.style.position="absolute",this.creditOverlay.style.color=vui.Theme.poster.overlayTextColor,this.creditOverlay.style.left=window.vui.ResDef.PosterGrid.POSTER_OUTLINE_L+"px",this.creditOverlay.style.bottom=window.vui.ResDef.PosterGrid.PAD_GLOW_H/2+"px",this.creditOverlay.style.fontSize="22px",this.creditOverlay.style.padding="4px 8px 0 8px",this.creditOverlay.style.width=this.imgWidth-12+"px",this.creditOverlay.style.display="none",this.elem.appendChild(this.creditOverlay),this.shadedOverlay=createDiv({}),this.shadedOverlay.style.backgroundColor="rgba(0, 0, 0, 0.4)",this.shadedOverlay.style.position="absolute",this.shadedOverlay.style.left="32px",this.shadedOverlay.style.top="24px",this.shadedOverlay.style.padding="0",this.shadedOverlay.style.width=this.imgWidth+"px",this.shadedOverlay.style.height=this.imgHeight+"px",this.shadedOverlay.style.display="none",this.elem.appendChild(this.shadedOverlay),this.minusOverlay=createImg({src:vui.images.mixMatch.minusIcon,className:"minusIcon"},this.elem),this.minusOverlay.style.display="none",this.rentalInfo=document.createElement("div"),this.rentalInfo.className="rentalInfoBlowUp",this.rentalInfo.style.left=window.vui.ResDef.PosterGrid.POSTER_BLOW_L+"px",this.rentalInfo.style.height=window.vui.ResDef.PosterGrid.POSTER_EPISODE_OVERLAY_H+"px",this.rentalInfo.style.display="none",this.elem.appendChild(this.rentalInfo),this.DivOutline=createDiv({className:"blowupOutline"}),this.DivOutline.id="blowupOutline",this.DivOutline.style.display="none",this.elem.appendChild(this.DivOutline),this.elem.setAttribute("aria-hidden","true"),this.setSize(this.imgWidth,this.imgHeight)},setSize:function(e,t){this.imgWidth=e,this.imgHeight=t,this.width=this.imgWidth+window.vui.ResDef.PosterGrid.PAD_GLOW_W,this.height=this.imgHeight+window.vui.ResDef.PosterGrid.PAD_GLOW_H,this.fullimg.width=this.imgWidth,this.fullimg.height=this.imgHeight,this.fullimg.style.width=this.imgWidth+"px",this.fullimg.style.height=this.imgHeight+"px",this.outlineWidth=this.imgWidth,this.outlineHeight=this.imgHeight,this.DivOutline.width=this.outlineWidth,this.DivOutline.height=this.outlineHeight,this.DivOutline.style.width=this.outlineWidth+"px",this.DivOutline.style.height=this.outlineHeight+"px",this.DivOutline.style.top=window.vui.ResDef.PosterGrid.POSTER_OUTLINE_T+"px",this.DivOutline.style.left=window.vui.ResDef.PosterGrid.POSTER_OUTLINE_L+"px",this.DivOutline.style.display="block",this.fullimg.style.top=window.vui.ResDef.PosterGrid.POSTER_BLOW_T+"px",this.fullimg.style.left=window.vui.ResDef.PosterGrid.POSTER_BLOW_L+"px",this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px"},bind:function(e){this.elem.removeEvents("mouseenter"),this.episodeOverlay.style.display="none",this.creditOverlay.style.display="none",this.data=e,this._handleDisplayRemoveIcon(),this._bindFromModel()},_handleDisplayRemoveIcon:function(){"XofYShowcase"===controller.baseLayer.currentPage.pageTitle&&(this.xofycollection=vui.getModel().xofycollections,this.xofycollection.isInCollection(controller.baseLayer.currentPage.collectionId,vui._.aStr(this.data.contentId))?(this.shadedOverlay.style.display="block",this.minusOverlay.style.display="block"):(this.shadedOverlay.style.display="none",this.minusOverlay.style.display="none"))},displayRedBottomBanner:function(e){e=(this.rentalInfo.innerHTML=e).replace("MINS","minutes"),this.ariaLabel=e.replace("HRS","hours"),this.rentalInfo.style.width=this.imgWidth+"px",this.rentalInfo.style.top=window.vui.ResDef.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_T+"px",this.rentalInfo.style.display="block"},_bindFromModel:function(){this.ariaLabel="",this.fullimg.src=vui.images.empty1x1;var e=this.data.resizedBlowupPosterUrl;this.fullimg.src=e,this._bindBanner()&&this.addListener(),this.elem.style.display="block";var t,i=this.data;!i.type||"episode"!==vui._.aStr(i.type)||(t=vui.getEpisodeSeasonLabel(i))&&(t=(this.episodeOverlay.innerHTML=t).replace("S","Season "),this.ariaLabel=t.replace("Ep","Episode "),this.episodeOverlay.style.width=this.imgWidth+"px",this.episodeOverlay.style.top=window.vui.ResDef.PosterGrid.POSTER_BLOW_EPISODE_OVERLAY_T+"px",this.episodeOverlay.style.display="block",this.creditOverlay.style.display="none"),(i._type&&"credit"===i._type&&!0===i.showCastnCrewLable||"person"===i.elementType&&!0===i.showCastnCrewLable)&&i.firstName&&(this.creditOverlay.innerHTML=i.firstName,this.ariaLabel=i.firstName,this.creditOverlay.style.display="block",this.episodeOverlay.style.display="none"),i&&i.elementDescription&&"Browse All Free Titles"===vui._.aStr(i.title)?this.ariaLabel=vui._.aStr(i.title)+". "+vui._.aStr(i.elementDescription):this.ariaLabel=vui._.aStr(i.title)+". "+this.ariaLabel;var s,n=vui.getSelected();n&&(s=vui.executeOnContainer(n.parentWidget,"getRowTitle"),this.ariaLabel=(s?s+". ":"")+vui._.aStr(i.title)),this.skipTTS||vui._.setAriaLabel(this.ariaLabel),i.contentId&&vui.m.getMovieInfo(vui._.aStr(i.contentId),function(e){e&&e.data&&n&&n.data?(n.data.dashTrailerEditionId=this.data.dashTrailerEditionId=e.data.dashTrailerEditionId,n.data.contentRating=this.data.contentRating=e.data.contentRating):e&&e.data&&(this.data.dashTrailerEditionId=e.data.dashTrailerEditionId,this.data.contentRating=e.data.contentRating)}.bind(this))},_bindBanner:function(){var e,t=vui.getModel(),i=this.data.contentId&&this.data.contentId[0],s=!1,n=i&&t.ownedMovieCache[i];if(n)if(this.data.streamableStartTime&&t.ownedMovieCache[i]&&(e=window.getFutureDateString(this.data.streamableStartTime[0])),$defined(e))this.displayRedBottomBanner(vui.strings.getText("POSTER_RED_BANNER_WATCH_X"," "+e)),s=!0;else{var a=t._checkRental(i);if(a&&getTimeDiffString(a)){if(vui.m.qualMap[n.owned]>=vui.m.qualMap[n.rented])return;expirationText=vui.strings.getTransformedText("GET_BEST_OFFER_TIME_LEFT",getTimeDiffString(a).toLowerCase()),this.displayRedBottomBanner(expirationText),s=!0}}return!s&&this.rentalInfo&&(this.rentalInfo.style.display="none"),s},unbind:function(){this.elem.style.display="none",this.fullimg.src=vui.images.empty1x1,this.removeListener()},addListener:function(){var e;this.hasListener||(e=function(){if(this.data){if(!this._bindBanner())return void this.removeListener()}else alert("OOPS, movieInfo is null... cancel this listener"),vui.executeOnContainer(this.parentWidget,"removeAutoRefreshListener",this)}.bind(this),this.parentWidget?(vui.executeOnContainer(this.parentWidget,"addAutoRefreshListener",[this,e]),this.hasListener=!0):alert("NO LISTENER FOR BLOWUP!!"))},removeListener:function(){this.hasListener&&this.parentWidget&&(vui.executeOnContainer(this.parentWidget,"removeAutoRefreshListener",this),delete this.hasListener)},onAction:function(){this._handleDisplayRemoveIcon(),this.data&&("uiEntry"===this.data._type&&vui.analytics.trackEvar({promoType:this.data.reportText||"Ad"}),this.data.launch?this.data.launch():vui.executeOnContainer(this.parentWidget,"posterOnAction",this.data))},onClick:function(e){this._handleDisplayRemoveIcon(),this.parent(e)}}),vui.widgets.GridPoster=new Class({Extends:vui.widgets.LeafContainer,Implements:vui.ContentActions,name:"vui.widgets.GridPoster",selectorType:"solidrect",elemClassName:"gridPoster3",init:function(e,t){t=t||{},this.width=t.width?t.width:window.vui.ResDef.PosterGrid.POSTER_WIDTH,this.height=t.height?t.height:window.vui.ResDef.PosterGrid.POSTER_HEIGHT,this.onAction=this.onAction.bind(this);var i=this.elem;i.id=e,this.poster_id=e,i.style.width=this.width+"px",i.style.height=this.height+"px";var s=createDiv({width:this.width,height:this.height});this.promoImg=document.createElement("img"),this.promoImg.style.top="-"+window.vui.ResDef.POSTER.PROMO_T+"px",this.promoImg.height=window.vui.ResDef.POSTER.PROMO_H,this.promoImg.style.height=window.vui.ResDef.POSTER.PROMO_H+"px",this.promoImg.style.position="absolute",this.promoImg.style.visibility="hidden",s.appendChild(this.promoImg);var n=document.createElement("img");(this.img=n).style.position="absolute",n.width=this.width,n.height=this.height,s.appendChild(n),i.appendChild(s),this.itemContainer=s,this.episodeOverlay=createDiv({className:"posterGridEpisodeOverlay font16",width:this.width,height:window.vui.ResDef.PosterGrid.POSTER_EPISODE_OVERLAY_H}),this.episodeOverlay.style.background="#000",this.itemContainer.appendChild(this.episodeOverlay),this.elem.setAttribute("aria-hidden","true"),this.rentalOverlay=createDiv({width:this.width,className:"gridPosterRentalInfo"}),this.rentalOverlay.style.backgroundColor="",this.rentalOverlay.style.top=this.height-window.vui.ResDef.POSTER.BOTTOM_H+"px",this.rentalOverlay.style.display="none",this.itemContainer.appendChild(this.rentalOverlay)},bind:function(e,t){if(this.episodeOverlay.style.display="none",this.rentalInfo&&(this.rentalInfo.style.display="none"),this.creditOverlay&&(this.creditOverlay.style.display="none"),e._type&&"uiEntry"==e._type)this.parseUiEntryPoster(e,t);else if(e._type&&"credit"==e._type)this.parseCreditPoster(e);else if(e._type&&"uxElement"===e._type){var i=vui._.aStr(e.elementType);switch(i){case"content":this.parseContentPoster({assetId:vui._.aStr(e.assetId),contentId:e.uxElementId,elementType:i,elementSubType:vui._.aStr(e.elementSubType),posterType:e.posterType,uxPromoTag:e.promoTag,title:vui._.aStr(e.label)});break;case"person":this.parseCreditPoster({posterUrl:vui.m.portraitBaseUrl+"person/poster/"+e.uxElementId,firstName:vui._.aStr(e.label),personId:e.uxElementId,showCastnCrewLable:e.showCastnCrewLable,elementType:i,elementSubType:vui._.aStr(e.elementSubType),posterType:e.posterType});break;default:this.parseUxElementPoster({assetId:vui._.aStr(e.assetId),uxElementId:e.uxElementId,elementLabel:vui._.aStr(e.label),elementType:i,elementSubType:vui._.aStr(e.elementSubType),elementDescription:vui._.aStr(e.description),posterType:e.posterType,uxPromoTags:e.promoTags,parentTitle:e.parentTitle,title:vui._.aStr(e.label)})}}else this.parseContentPoster(e)},parseContentPoster:function(e){var t,i,s=(this.data=e).elementType,n=e.posterType,a=e.assetId;this.data.resizedPosterUrl=vui.getModel().getPosterUrl(this.data,window.vui.ResDef.PosterGrid.POSTER_IMAGE_UPSCALEWIDTH),this.data.resizedBlowupPosterUrl=vui.getModel().getPosterUrl(this.data,window.vui.ResDef.PosterGrid.POSTER_IMAGE_UPSCALEWIDTH),e.type&&"episode"==vui._.aStr(e.type)?(t=vui.getEpisodeSeasonLabel(e))&&(this.episodeOverlay.style.display="block",this.creditOverlay&&(this.creditOverlay.style.display="none"),this.episodeOverlay.innerHTML=t):"placard"===e.posterType?(i="-252",this.data.resizedBlowupPosterUrl=this.data.resizedPosterUrl=vui.m.getUiEntryImageUrl(s+"/"+n+"/"+a+i)):"banner"===e.posterType&&(i="-784",this.data.resizedBlowupPosterUrl=this.data.resizedPosterUrl=vui.m.getUiEntryImageUrl(s+"/"+n+"/"+a+i)),this._bindFromModel()},parseCreditPoster:function(e){this.data=e;var t=this.data.posterUrl;this.data.resizedPosterUrl=vui.addDashSuffixToFileName(t,142),this.data.resizedBlowupPosterUrl=vui.addDashSuffixToFileName(t,142),e.showCastnCrewLable&&e.firstName&&(this.creditOverlay||(this.creditOverlay=createDiv({width:this.width}),this.creditOverlay.style.backgroundColor=vui.Theme.poster.transparentOverlayBackgroundColor,this.creditOverlay.style.position="absolute",this.creditOverlay.style.color="#999",this.creditOverlay.style.left="0",this.creditOverlay.style.bottom="0",this.creditOverlay.style.padding="4px 0 0 4px",this.creditOverlay.style.fontSize="20px",this.creditOverlay.style.padding="4px 4px 0 4px",this.creditOverlay.style.width=this.width-8+"px",this.itemContainer.appendChild(this.creditOverlay)),this.creditOverlay.style.display="block",this.creditOverlay.innerHTML=e.firstName,this.episodeOverlay.style.display="none"),this._bindFromModel()},parseUxElementPoster:function(e){var t,i=(this.data=e).elementType,s=e.posterType,n=e.assetId;"row"===e.elementType&&e.uxElementId&&(this.data.uxRowId=e.uxElementId[0]),"poster"===e.posterType?t=this.data.resizedBlowupPosterUrl=this.data.resizedPosterUrl=vui.m.getUiEntryImageUrl(i+"/"+s+"/"+n+"-144"):(t="placard"===s?"-252":"-784",this.data.resizedBlowupPosterUrl=this.data.resizedPosterUrl=vui.m.getUiEntryImageUrl(i+"/"+s+"/"+n+t)),this._bindFromModel()},parseUiEntryPoster:function(e,t){var i=vui.executeOnContainer(this,"getRibbonSearchParam");i&&(e.ribbonSearchParam=i);var s,n,e=vui.parseEntry(e,t);this.data=e,this.data?!0===this.usePlacard&&this.data.placardUrl?(s=vui.addDashSuffixToFileName(vui._.aStr(this.data.placardUrl),this.placardWidth)||vui.images.empty1x1,this.data.resizedPosterUrl=s,this.data.resizedBlowupPosterUrl=s):(n=vui._.aStr(this.data.posterUrl),this.data.resizedPosterUrl=this.data.resizedBlowupPosterUrl=n?vui.addDashSuffixToFileName(n,232):vui.images.empty1x1):alert("parseEntry Error"),this._bindFromModel()},displayRedBottomBanner:function(e){this.rentalInfo?this.rentalInfo&&this.rentalInfo.style&&(this.rentalInfo.innerHTML=e,this.rentalInfo.style.display="block",this.rentalInfo.style.backgroundColor=""):(this.rentalOverlay.innerHTML=e,this.rentalOverlay.style.display="block",this.rentalInfo=this.rentalOverlay)},_bindFromModel:function(){var e;this.img.src=vui.images.empty1x1,this.img.src=this.data.resizedPosterUrl,this.img.width=this.width,this.img.height=this.height,e="uiEntry"==this.data._type?this.data.parameters[0]:this.data;var t=vui._.getPromoUrl(e,"poster");t&&"XofYShowcase"!==controller.baseLayer.currentPage.pageTitle?e&&e.posterType&&"banner"!==vui._.aStr(e.posterType)&&(this.promoImg.src=t,this.promoImg.onerror=function(){this.promoImg.style.display="none"}.bind(this),this.promoImg.style.visibility="visible"):this.promoImg.style.visibility="hidden",this._bindBanner()&&this.addListener(),this.elem.style.visibility="visible"},_bindBanner:function(){var e,t=vui.getModel(),i=this.data.contentId&&this.data.contentId[0],s=!1,n=i&&t.ownedMovieCache[i];if(n)if(this.data.streamableStartTime&&t.ownedMovieCache[i]&&(e=window.getFutureDateString(this.data.streamableStartTime[0])),$defined(e))this.displayRedBottomBanner(vui.strings.getText("POSTER_RED_BANNER_WATCH_X"," "+e)),s=!0;else{var a=t._checkRental(i);if(a&&getTimeDiffString(a)){if(vui.m.qualMap[n.owned]>=vui.m.qualMap[n.rented])return;expirationText=vui.strings.getTransformedText("GET_BEST_OFFER_TIME_LEFT",getTimeDiffString(a).toLowerCase()),this.displayRedBottomBanner(expirationText),s=!0}}return!s&&this.rentalInfo&&(this.rentalInfo.style.display="none"),s},onAction:function(){this.data&&("uiEntry"==this.data._type&&vui.analytics.trackEvar({promoType:this.data.reportText||"Ad"}),this.data.launch?this.data.launch():vui.executeOnContainer(this.parentWidget,"posterOnAction",this.data))},onPlay:function(){this.data.dashTrailerEditionId&&this.watchTrailer()},onSelect:function(){this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",{data:this.data}),vui.executeOnContainer(this.parentWidget,"hideSort_")},drawSelector:function(){this.data&&vui.executeOnContainer(this.parentWidget,"drawBlowup",this)},unbind:function(){1==this.selectable&&(this.selectable=!1),delete this.data,this.img.src=vui.images.empty1x1,this.elem.style.visibility="hidden",this.promoImg.style.visibility="hidden",this.episodeOverlay.style.display="none",this.creditOverlay&&(this.creditOverlay.style.display="none"),this.removeListener()},clear:function(){alert("CALLING CLEAR"),delete this.data,this.img.src=vui.images.empty1x1,this.removeListener()},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)},addListener:function(){var e;this.hasListener||(e=function(){this.data?this._bindBanner()||this.removeListener():(alert("OOPS, movieInfo is null... cancel this listener"),vui.executeOnContainer(this.parentWidget,"removeAutoRefreshListener",this))}.bind(this),vui.executeOnContainer(this.parentWidget,"addAutoRefreshListener",[this,e]),this.hasListener=!0)},removeListener:function(){this.hasListener&&(vui.executeOnContainer(this.parentWidget,"removeAutoRefreshListener",this),delete this.hasListener)}}),vui.widgets.MovieGridList=new Class({Extends:vui.widgets.ScrollingBase,name:"vui.widgets.MovieGridList",elemClassName:"movieGridList",selectionInheritance:!0,params:{},rowIndex:0,posterClass:vui.widgets.GridPoster,settings:{wide:{columns:7},normal:{columns:5,rows:2}},columns:5,rows:2,partialRow:!1,preventRightSiblingSelection:!0,addWidgetsAfterLoaded:!1,init:function(e,t){e=e||{},this._setWidth("normal"),this.parent(e,t),this.paddingRight=e.paddingRight?e.paddingRight:window.vui.ResDef.movieGridList.PADDING_RIGHT,this.paddingBottom=e.paddingBottom?e.paddingBottom:window.vui.ResDef.movieGridList.PADDING_BOTTOM,this.el.bar=document.createElement("div"),this.elem.appendChild(this.el.bar),this.el.bar.className="movieGridList_container",this.addWidgetsAfterLoaded||(this.addWidgets(this.el.bar),this._layoutPosters()),this.lastKeyDown=(new Date).getTime()},_layoutPosters:function(){if(this.widgets&&0<this.widgets.length)for(var e=0,t=0,i=this.widgets[0].width+this.paddingRight,s=this.widgets[0].height+this.paddingBottom,n=0,a=this.numVisible;n<a;n++){var o=this.widgets[n].elem.style;n%this.columns==0?(t=0)<n&&(e+=s):t+=i,o.left=t+"px",o.top=e+"px"}},setWidth:function(e){this._setWidth(e),this._layoutPosters()},setParams:function(e){this.params=e},getMovieListModel:function(e){this.currentStart=0,this.params.state&&0<=this.params.state.scrollOffset&&(this.currentStart=this.params.state.scrollOffset);var t={name:this.listName,callback:e,currentStart:this.currentStart,numVisible:this.numVisible,phrase:this.params.phrase,filters:this.params.filters};return vui.m.getMoviesByListName(t)},updateRange:function(e){vui.executeOnContainer(this.parentWidget,"updateRange",e)},bind:function(e,t,i){var s;this.parent(e,t,i),this.dontRunFirstSelect||(window.search=this).firstQuery&&(this.selected&&this.children[this.selected]!=vui.getSelected()?vui.executeOnContainer(this.parentWidget,"onSelectedPoster",{data:this.children[0].data,dontSelect:!0}):(s=vui.getSelected())&&s.drawSelector&&vui.getSelected().drawSelector(_vuidata.selectorVisible))},createWidget:function(e){return new this.posterClass("poster"+e)},getKeyFunc:function(){return function(e){if(e)return e._type&&"uiEntry"==e._type?vui.addDashSuffixToFileName(e.posterUrl[0],108):vui.getModel().getPosterUrl(e,108)}.bind(this)},destroy:function(){this.parent(),this.loading&&this.loading.hide()},resetSelector:function(){this.children&&0<this.children.length&&(this.selected=0)},getRowIndex:function(){return this.rowIndex},scrollUp:function(){var e=function(){return this.lastScrolledTime=(new Date).getTime(),0<this.currentStart&&(this.currentStart-=this.scrollIncrement,this.update(-1),!0)}.bind(this);return!(!vui.SlowScrollTimeout||!this.lastScrolledTime||(new Date).getTime()-this.lastScrolledTime>vui.SlowScrollTimeout)||e()},scrollDown:function(){var e=this.partialRow?this.columns*(this.rows-1):this.columns*this.rows,t=function(){if(this.lastScrolledTime=(new Date).getTime(),this.currentStart<this.movieListModel.totalCount-e)return this.currentStart+=this.scrollIncrement,this.update(1),!0}.bind(this);return!(!vui.SlowScrollTimeout||!this.lastScrolledTime||(new Date).getTime()-this.lastScrolledTime>vui.SlowScrollTimeout)||t()}}),vui.widgets.PosterGrid=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.widgets.NavUpDownDelegate],listClass:vui.widgets.MovieGridList,name:"vui.widgets.PosterGrid",elemClassName:"posterGrid3",wideElemClassName:"widePosterGrid",selectionInheritance:!0,init:function(e){e=e||{};var t=new Element("div",{class:"posterGridContainer3"});this.elem.appendChild(t),this.emptyMessage=new Element("div",{class:"emptyMessage fontItalicDull",html:vui.strings.getText("NO_RESULTS"),styles:{display:"none"}}),t.appendChild(this.emptyMessage),this.range=new Element("div",{class:"posterGridResultCount"}),this.elem.appendChild(this.range),this.list=new this.listClass,this.attachChild(this.list,t),this.bposter=new vui.widgets.BlowupGridPoster(e),this.elem.appendChild(this.bposter.elem),(this.bposter.parentWidget=this).scroller=new vui.widgets.Scroller3,this.scroller.setList(this.list),this.attachChild(this.scroller,this.elem),this.scroller.hide(),this.list.setBeginArrow(this.scroller),this.delayTimer=0,this.refreshDelegate=function(){this.list.refresh()}.bind(this),this.hideDimmer=!1},updateRange:function(e){e[2]?(this.range.innerHTML=vui.strings.getText("POSTER_LIST_RANGE_X_TO_Y_OF_Z",e[0],e[1],e[2]),this.range.style.display="block"):this.range.style.display="none"},createDimmer:function(){var e,t;this.dimmerDelegate||((e=document.createElement("div")).className="opacity60 "+this.elemClassName+"Dimmer",(t=e.style).display="none",t.position="absolute",this.dimmer=e,this.elem.appendChild(e),this.dimmerDelegate=function(){this.dimmer.style.display="block",this.staleTimer=null}.bind(this))},startStaleTimer:function(){this.staleTimer||(this.hideDimmer||this.createDimmer(),this.staleTimer=setTimeout(this.dimmerDelegate,window.dimmerDelay))},setWidth:function(e){this.list.setWidth(e),"wide"==e?(this.elem.className=this.wideElemClassName,this.dimmer&&(this.dimmer.className="opacity60 "+this.wideElemClassName+"Dimmer")):(this.elem.className=this.elemClassName,this.dimmer&&(this.dimmer.className="opacity60 "+this.elemClassName+"Dimmer"))},setList:function(e,t){this.params=e,this.range.style.display="none",e&&(this.list.listName=e.name,e.state&&e.state.scrollOffset?e.scrollOffset=e.state.scrollOffset:e.scrollOffset=0,this.list.setParams(e)),this.hideDimmer=e&&"similar"===e.name,clearTimeout(this.delayTimer),this.list.destroy(),this.startStaleTimer(),t?this.delayTimer=setTimeout(this.refreshDelegate,window.selectDelay):this.list.refresh()},unload:function(e){e.scrollOffset=0,e.rowIndex=0,e.selectedIndex=0},clear:function(){delete this.list.selected,clearTimeout(this.delayTimer),clearTimeout(this.staleTimer)},getScrollOffset:function(){return this.list.getScrollOffset()},listDataReceived:function(e){this.hideDimmer||(this.dimmer.style.display="none");var t=0;if(clearTimeout(this.staleTimer),this.staleTimer=null,e&&e.data&&e.totalCount&&0!=e.totalCount?(t=e.totalCount,this.emptyMessage.style.display="none",e.totalCount<=this.list.numVisible?(this.range.style.display="none",this.scroller.hide()):(this.range.style.display="block",this.scroller.show())):(this.emptyMessage.style.display="block",vui._.setAriaLabel(this.emptyMessage.innerHTML),this.range.style.display="none",this.scroller.hide()),vui.executeOnContainer(this.parentWidget,"onGotListLength",t),vui.executeOnContainer(this.parentWidget,"listDataReceived",e),this.params&&this.params.state&&this.params.state.listSelected&&this.list.children&&this.list.children[this.params.state.listSelected])if(this.list.children[this.params.state.listSelected].selectable)vui.select(this.list.children[this.params.state.listSelected]);else if(0<this.params.state.listSelected)for(var i=this.params.state.listSelected-1;0<=i;i--)if(this.list.children[i].selectable){vui.select(this.list.children[i]);break}},toggleWarpLeft:function(e){this.list.layout.wrapLeft=e},toggleWrapRight:function(e){this.list.layout||(this.list.layout={}),this.list.layout.wrapRight=e},drawBlowup:function(e){this.pos=this.elem.getPosition();var t=e.elem.getPosition(),i=this.bposter;i.bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+10+"px",i.show()},onDeselectedPoster:function(e){this.bposter.unbind()},setDontRunFirstSelect:function(e){this.list.dontRunFirstSelect=e},resetSelector:function(){this.list.resetSelector()}}),vui.widgets.GenericGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.GenericGridList",columns:5,rows:2,partialRow:!1,getMovieListModel:function(){return function(e){this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("RETURN DELEGATE FOR COLLECTION GRID LIST:"+JSON.encode(this.params));var t=this.params.listParams;return t.callback=e,t.currentStart=this.currentStart,t.numVisible=this.numVisible,vui.getModel()[this.params.listFetcher](t)}.bind(this)},init:function(e,t){this.scrollIncrement=this.scrollDelta=this.columns,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.layout={type:"vertical",cols:this.scrollDelta},t=t||this.getMovieListModel(),this.parent(e,t)}}),vui.widgets.GenericPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.GenericGridList,onBack:function(){this.bposter.unbind(),vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.MovieScrollingList=new Class({Extends:vui.widgets.ScrollingBase,name:"vui.widgets.MovieScrollingList",elemClassName:"movieGridList",selectionInheritance:!0,rowIndex:0,posterClass:vui.widgets.GridPoster,settings:{wide:{columns:7},normal:{columns:5}},columns:5,rows:1,numVisible:7,scrollDelta:1,paddingRight:16,paddingBottom:16,getListModelFactory:function(e){return function(e){this.currentStart=0,this.params.state&&this.params.state.scrollOffset&&(this.currentStart=this.params.state.scrollOffset);var t={name:this.listName,callback:e,currentStart:this.currentStart,numVisible:this.numVisible,filters:this.params.filters};return vui.getModel().getMoviesByListName(t)}.bind(this)},updateRange:function(e){vui.executeOnContainer(this.parentWidget,"updateRange",e)},init:function(){this.layout={type:"vertical",cols:this.columns},this.parent({},this.getListModelFactory()),this.listName="MOST WATCHED";this.elem;this.addWidgets(this.elem),this.layoutPosters(),this.lastKeyDown=(new Date).getTime()},bind:function(e,t,i){this.parent(e,t,i),this.firstQuery&&(this.children[this.selected]!=vui.getSelected()?vui.executeOnContainer(this.parentWidget,"onSelectedPoster",{data:this.children[0].data,dontSelect:!0}):vui.getSelected().drawSelector(_vuidata.selectorVisible))},layoutPosters:function(){for(var e=0,t=0,i=this.children[0].width+this.paddingRight,s=this.children[0].height+this.paddingBottom,n=0,a=this.visibleCount;n<a;n++){var o=this.children[n].elem.style;n%this.columns==0?(t=0)<n&&(e+=s):t+=i,o.left=t+"px",o.top=e+"px"}},createWidget:function(e){return new this.posterClass("poster"+e)},getKeyFunc:function(e){return function(e){if(e)return vui.getModel().getPosterUrl(e,108)}},destroy:function(){this.parent(),this.loading&&this.loading.hide()},getRowIndex:function(){return this.rowIndex},scrollUp:function(){if(vui.SlowScrollTimeout){var e=(new Date).getTime();if(e-this.lastKeyDown<vui.SlowScrollTimeout)return!0;this.lastKeyDown=e}return 0<this.currentStart&&(this.currentStart-=this.scrollIncrement,this.update(-1),!0)},scrollDown:function(){if(vui.SlowScrollTimeout){var e=(new Date).getTime();if(e-this.lastKeyDown<vui.SlowScrollTimeout)return!0;this.lastKeyDown=e}return this.currentStart<this.movieListModel.totalCount-this.numVisible&&(this.currentStart+=this.scrollIncrement,this.update(1),!0)},onDirectionUp:function(){return vui.executeOnContainer(this.parentWidget,"onDirectionUp")},onDirectionDown:function(){return vui.executeOnContainer(this.parentWidget,"onDirectionDown")}}),vui.widgets.GenericScrollingList=new Class({Extends:vui.widgets.MovieScrollingList,name:"vui.widgets.GenericScrollingList",columns:5,rows:1,scrollDelta:1,getListModelFactory:function(e){return function(e){this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("RETURN DELEGATE FOR COLLECTION GRID LIST:"+JSON.encode(this.params));var t=this.params.listParams;return t.callback=e,t.currentStart=this.currentStart,t.numVisible=this.numVisible,vui.getModel()[this.params.listFetcher](t)}.bind(this)},init:function(){this.scrollIncrement=this.scrollDelta,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.layout={type:"vertical",cols:this.columns},this.parent()}}),vui.widgets.PosterList=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.widgets.NavUpDownDelegate],listClass:vui.widgets.MovieScrollingList,name:"vui.widgets.PosterList",elemClassName:"posterGrid",wideElemClassName:"widePosterGrid",selectionInheritance:!0,init:function(e){var t=new Element("div",{class:"posterGridContainer"});this.elem.appendChild(t),this.emptyMessage=new Element("div",{class:"emptyMessage fontItalicDull",html:vui.strings.getText("NO_RESULTS"),styles:{display:"none"}}),t.appendChild(this.emptyMessage),this.range=createDiv({text:"1 - 10 of 8847",className:"posterList_range font20"},t),this.list=new this.listClass,this.attachChild(this.list,t),this.bposter=new vui.widgets.BlowupGridPoster,this.elem.appendChild(this.bposter.elem),this.bposter.parentWidget=this,!e||e&&!e.disableScroller?(this.scroller=new vui.widgets.Scroller,this.attachChild(this.scroller,t),this.list.setBeginArrow(this.scroller)):e&&!e.disableSlider&&(this.slider=new vui.widgets.Slider,this.attachChild(this.slider,t),this.list.setBeginArrow(this.slider)),this.list.layout.wrapLeft=!0,this.delayTimer=0,this.refreshDelegate=function(){this.list.refresh()}.bind(this)},updateRange:function(e){e[2]&&(this.range.innerHTML=vui.strings.getText("POSTER_LIST_RANGE_X_TO_Y_OF_Z",e[0],e[1],e[2]),this.range.style.display="block")},createDimmer:function(){var e,t;this.dimmerDelegate||((e=document.createElement("div")).className="opacity60 "+this.elemClassName+"Dimmer",(t=e.style).display="none",t.position="absolute",this.dimmer=e,this.elem.appendChild(e),this.dimmerDelegate=function(){this.dimmer.style.display="block",this.staleTimer=null}.bind(this))},startStaleTimer:function(){this.staleTimer||(this.createDimmer(),this.staleTimer=setTimeout(this.dimmerDelegate,window.dimmerDelay))},setList:function(e,t){this.list.listName=e.name,e&&(e.state&&e.state.scrollOffset&&(e.scrollOffset=e.state.scrollOffset),this.list.params=e),clearTimeout(this.delayTimer),this.list.destroy(),this.startStaleTimer(),t?this.delayTimer=setTimeout(this.refreshDelegate,window.selectDelay):this.list.refresh()},unload:function(e){e.scrollOffset=0,e.rowIndex=0,e.selectedIndex=0},clear:function(){delete this.list.selected,clearTimeout(this.delayTimer),clearTimeout(this.staleTimer)},getScrollOffset:function(){return this.list.getScrollOffset()},listDataReceived:function(e){this.dimmer&&(this.dimmer.style.display="none");var t=0;clearTimeout(this.staleTimer),this.staleTimer=null,e&&e.data&&e.totalCount&&0!=e.totalCount?(t=e.totalCount,this.emptyMessage.style.display="none",e.totalCount<=this.list.numVisible?this.range.style.display="none":this.range.style.display="block"):(this.emptyMessage.style.display="block",vui._.setAriaLabel(this.emptyMessage.innerHTML),this.range.style.display="none"),vui.executeOnContainer(this.parentWidget,"onGotListLength",t)},drawBlowup:function(e){this.pos=this.elem.getPosition();var t=e.elem.getPosition(),i=this.bposter;i.bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+"px",i.show()},onDeselectedPoster:function(e){this.bposter.unbind()}}),function(){window.vuiFilters={},vuiFilters.contentRatingValueMax={},"mex"==vui.RATING_SYSTEM?vuiFilters.contentRatingValueMax=["","d","c","b15","b","a"]:vuiFilters.contentRatingValueMax=["","r","nrFamilyFriendly","tv14","pg","g"],vuiFilters.Sort={label:vui.strings.getText("FILTER_SORT"),name:"sortBy",optionWidth:{en:137,es:155},labelWidth:{en:27,es:51},options:[]};var s={};for(var e in s.purchaseTime={label:vui.strings.getText("FILTER_SORT_OPTION_PURCHASETIME"),name:"-purchaseTime",model:{sortBy:"-purchaseTime"}},s.releaseTime={label:vui.strings.getText("FILTER_SORT_OPTION_RELEASETIME"),name:"-releaseTime",model:{sortBy:"-releaseTime"}},s.title={label:vui.strings.getText("FILTER_SORT_OPTION_TITLE"),ariaLabel:"A- through Z",name:"title",model:{sortBy:"title"}},s.watchedScore={label:vui.strings.getText("FILTER_SORT_OPTION_WATCHEDSCORE"),name:"-watchedScore",model:{sortBy:"-watchedScore"}},s.tomatoMeter={label:vui.strings.getText("FILTER_SORT_OPTION_TOMATOMETER"),ariaLabel:"Tomato Meter",name:"-tomatoMeter",model:{sortBy:"-tomatoMeter"}},s.featuredScore={label:vui.strings.getText("FILTER_SORT_OPTION_FEATUREDSCORE"),name:"-featuredScore",model:{sortBy:"-featuredScore"}},s.streamScore={label:"Most Watched",name:"streamScore",model:{sortBy:"streamScore"}},s.releaseTimeUxElement={label:vui.strings.getText("FILTER_SORT_OPTION_RELEASETIME"),name:"releaseTime",model:{sortBy:"releaseTime"}},s.ucAddedTime={label:vui.strings.getText("USERLIB_SORTBY_CUSTOM_ORDER"),name:"-ucAddedTime",model:{sortBy:"-ucAddedTime"}},s.ucReleaseTime={label:vui.strings.getText("USERLIB_SORTBY_RELEASE_DATE"),name:"-ucReleaseTime",model:{sortBy:"-ucReleaseTime"}},s.ucTitle={label:vui.strings.getText("USERLIB_SORTBY_A_TO_Z"),ariaLabel:"A- through Z",name:"ucTitle",model:{sortBy:"ucTitle"}},s)vuiFilters.Sort.options.push(s[e]);function t(e){for(var t={label:vui.strings.getText("FILTER_SORT"),name:"sortBy",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:155},options:[]},i=0;i<e.length;i++)s[e[i]]&&t.options.push(s[e[i]]);return t}function i(e){if(!e)return alert("Error: no Genres List."),[];for(var t=[],i=e.length,s=0;s<i;s++){var n,a=e[s];a&&((n={model:{}}).model.geneGenreId=a.geneGenreId[0],n.name=a.geneGenreId[0]||"",n.label=a.name[0],t.push(n))}return t.length&&t.unshift({name:"",label:vui.strings.getText("FILTER_GENRE_OPTION_ANY"),model:{geneGenreId:""}}),t}vuiFilters.SortMyMovie=t(["purchaseTime","title","releaseTime"]),vuiFilters.SortMyTV=t(["purchaseTime","title","releaseTime"]),vuiFilters.SortExploreMovie=t(["watchedScore","featuredScore","tomatoMeter","releaseTime","title"]),vuiFilters.SortExploreTV=t(["watchedScore","featuredScore","releaseTime","title"]),vuiFilters.SortCollection=t(["watchedScore","releaseTime","tomatoMeter","title"]),vuiFilters.SortUxElement=t(["streamScore","releaseTimeUxElement"]),vuiFilters.SortUserCollections=t(["ucAddedTime","ucReleaseTime","ucTitle"]),vuiFilters.SortUserCollectionsBulkAdd=t(["purchaseTime","title","releaseTime"]),vuiFilters.MovieGenre={label:vui.strings.getText("FILTER_GENRE"),name:"geneGenreId",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[],initFromNote:function(t){vui.getModel().geneGenreSearch("moviesOnly",function(e){vuiFilters.MovieGenre.options=i(e),t&&t()})}},vuiFilters.TVGenre={label:vui.strings.getText("FILTER_GENRE"),name:"geneGenreId",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[],initFromNote:function(t){vui.getModel().geneGenreSearch("tvOnly",function(e){vuiFilters.TVGenre.options=i(e),t&&t()})}},vuiFilters.Studio={label:vui.strings.getText("FILTER_STUDIO"),name:"studio",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},options:[],initFromNote:function(r){vui.getModel().getStudios(function(e){for(var t=[],i=e.length(),s=0;s<i;s++){var n,a,o=e.data[s];o&&(a={label:n=o.name[0],name:n,model:{studioId:o.studioId[0],hasFeaturedStudio:""}},t.push(a))}t.length&&(t.push({name:"others",label:vui.strings.getText("FILTER_STUDIO_OPTION_OTHER"),model:{studioId:"",hasFeaturedStudio:"false"}}),t.unshift({name:"any",label:vui.strings.getText("FILTER_STUDIO_OPTION_ANY"),model:{studioId:"",hasFeaturedStudio:""}}),vuiFilters.Studio.options=t),r&&r()})}},vuiFilters.Year={label:vui.strings.getText("FILTER_RELEASETIME"),name:"releaseTime",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_ANY"),name:"any",model:{releaseTimeMin:"",releaseTimeMax:""}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_NEWRELEASES"),name:"newReleases",model:{releaseTimeMin:"",releaseTimeMax:""}},{label:"2010's",name:"10s",model:{releaseTimeMin:"2010-01-01",releaseTimeMax:""}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_2000"),name:"y2k",model:{releaseTimeMin:"2000-01-01",releaseTimeMax:"2009-12-31"}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_1990"),name:"90s",model:{releaseTimeMin:"1990-01-01",releaseTimeMax:"1999-12-31"}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_1980"),name:"80s",model:{releaseTimeMin:"1980-01-01",releaseTimeMax:"1989-12-31"}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_1970"),name:"70s",model:{releaseTimeMin:"1970-01-01",releaseTimeMax:"1979-12-31"}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_1960"),name:"60s",model:{releaseTimeMin:"1960-01-01",releaseTimeMax:"1969-12-31"}},{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_OLD"),name:"old",model:{releaseTimeMin:"",releaseTimeMax:"1959-12-31"}}]},vuiFilters.FreshTomato={label:vui.strings.getText("FILTER_TOMATOMETER"),ariaLabel:"Tomato Meter",name:"isFreshTomato",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[{label:"All",name:"any",model:{isFreshTomato:""}},{label:"Fresh only",name:"fresh",model:{isFreshTomato:"true"}}]},vuiFilters.Tmeter={label:vui.strings.getText("FILTER_TOMATOMETER"),ariaLabel:"Tomato Meter",name:"tomatoMeter",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},options:[{label:vui.strings.getText("FILTER_TOMATOMETER_OPTION_ANY"),name:"any",model:{tomatoMeterMin:""}},{label:vui.strings.getText("FILTER_TOMATOMETER_OPTION_80"),ariaLabel:"80% fresh",name:"80%",model:{tomatoMeterMin:"80"}},{label:vui.strings.getText("FILTER_TOMATOMETER_OPTION_60"),ariaLabel:"60% fresh",name:"60%",model:{tomatoMeterMin:"60"}},{label:vui.strings.getText("FILTER_TOMATOMETER_OPTION_40"),ariaLabel:"40% fresh",name:"40%",model:{tomatoMeterMin:"40"}},{label:vui.strings.getText("FILTER_TOMATOMETER_OPTION_20"),ariaLabel:"20% fresh",name:"20%",model:{tomatoMeterMin:"20"}}]},vuiFilters.communityRating={label:vui.strings.getText("FILTER_COMMUNITY_RATING"),name:"communityRating",optionWidth:{en:119,es:173},options:[{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_ANY"),name:"any",model:{communityRatingMin:""}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_4_5"),name:"4.5",model:{communityRatingMin:"4.5"}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_4"),name:"4",model:{communityRatingMin:"4"}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_3_5"),name:"3.5",model:{communityRatingMin:"3.5"}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_3"),name:"3",model:{communityRatingMin:"3"}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_2"),name:"2",model:{communityRatingMin:"2"}},{label:vui.strings.getText("FILTER_COMMUNITY_RATING_OPTION_1"),name:"1",model:{communityRatingMin:"1"}}]},vuiFilters.Type={label:vui.strings.getText("FILTER_CONTENTTYPE"),name:"type",optionWidth:{en:120,es:120},options:[{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES_AND_TV"),name:"moviesAndTv",model:{type:["program","season","bundle"],superType:null}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES"),name:"movies",model:{type:["program","bundle"],superType:"movies"}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_TV"),name:"tv",model:{type:["season","bundle"],superType:"tv"}}]},vuiFilters.UserCollectionType={label:vui.strings.getText("FILTER_CONTENTTYPE"),name:"userCollectionType",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:120},options:[{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES_AND_TV"),name:"moviesAndTv",model:{type:["program","bundle","season","series"],superType:null,groupBy:"series"}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MY_MOVIES"),name:"movies",model:{type:["program","bundle"],superType:"movies",groupBy:null}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MY_TV"),name:"tv",model:{type:["season","series","bundle"],superType:"tv",groupBy:"series"}}]},vuiFilters.UxElementType={label:vui.strings.getText("FILTER_CONTENTTYPE"),name:"uxElementContentType",optionWidth:{en:160,es:160},options:[{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES_AND_TV"),name:"moviesAndTv",model:{contentType:""}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES"),name:"movies",model:{contentType:"movie"}},{label:vui.strings.getText("FILTER_CONTENTTYPE_OPTION_TV"),name:"tv",model:{contentType:"tv"}}]},vuiFilters.videoQuality={label:vui.strings.getText("FILTER_QUALITY"),name:"videoQuality",optionWidth:{en:52,es:67},options:[{label:vui.strings.getText("FILTER_QUALITY_OPTION_ANY"),name:"any",model:{videoQuality:""}},{label:vui.strings.getText("FILTER_QUALITY_OPTION_HDX"),name:"hdx",model:{videoQuality:"hdx"}},{label:vui.strings.getText("FILTER_QUALITY_OPTION_HD"),name:"hd",model:{videoQuality:"hd"}},{label:vui.strings.getText("FILTER_QUALITY_OPTION_SD"),name:"sd",model:{videoQuality:"sd"}}]},vuiFilters.offerType={label:vui.strings.getText("FILTER_OFFERTYPE"),name:"offerType",optionWidth:{en:55,es:82},options:[{label:vui.strings.getText("FILTER_OFFERTYPE_OPTION_ANY"),name:"any",model:{offerType:""}},{label:vui.strings.getText("FILTER_OFFERTYPE_OPTION_PTR"),name:"ptr",model:{offerType:"ptr"}},{label:vui.strings.getText("FILTER_OFFERTYPE_OPTION_PTO"),name:"pto",model:{offerType:"pto"}}]},vuiFilters.starRating={label:vui.strings.getText("FILTER_STARRATING"),name:"starRating",options:[{label:vui.strings.getText("FILTER_STARRATING_OPTION_ANY"),name:"any",model:{starRatingMin:""}},{label:vui.strings.getText("FILTER_STARRATING_OPTION_4"),name:"4+",model:{starRatingMin:"4"}},{label:vui.strings.getText("FILTER_STARRATING_OPTION_3"),name:"3+",model:{starRatingMin:"3"}},{label:vui.strings.getText("FILTER_STARRATING_OPTION_2"),name:"2+",model:{starRatingMin:"2"}},{label:vui.strings.getText("FILTER_STARRATING_OPTION_1"),name:"1+",model:{starRatingMin:"1"}}]},vuiFilters.mpaaRating={label:vui.strings.getText("FILTER_MPAARATING"),name:"mpaaRating",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},width:136,options:[{label:vui.strings.getText("FILTER_MPAARATING_OPTION_1"),name:"any",model:{mpaaRatingMax:""}},{label:vui.strings.getText("FILTER_MPAARATING_OPTION_2"),name:"r",model:{mpaaRatingMax:vuiFilters.contentRatingValueMax[1]}},{label:vui.strings.getText("FILTER_MPAARATING_OPTION_3"),name:"nrFamilyFriendly",model:{mpaaRatingMax:vuiFilters.contentRatingValueMax[2]}},{label:vui.strings.getText("FILTER_MPAARATING_OPTION_4"),name:"tv14",model:{mpaaRatingMax:vuiFilters.contentRatingValueMax[3]}},{label:vui.strings.getText("FILTER_MPAARATING_OPTION_5"),name:"pg",model:{mpaaRatingMax:vuiFilters.contentRatingValueMax[4]}},{label:vui.strings.getText("FILTER_MPAARATING_OPTION_6"),ariaLabel:"g",name:"g",model:{mpaaRatingMax:vuiFilters.contentRatingValueMax[5]}}]},vuiFilters.ageRating={label:"Age Rating",name:"ageRating",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},width:136,options:[{label:"All",name:"any",model:{ageGroup:""}},{label:"Preschoolers (<5)",name:"5",model:{ageGroup:"4"}},{label:"Little Kids (<8)",name:"8",model:{ageGroup:"7"}},{label:"Big Kids (<10)",name:"10",model:{ageGroup:"9"}},{label:"Tweens (<13)",name:"13",model:{ageGroup:"12"}},{label:"Teens (<18)",name:"18",model:{ageGroup:"17"}}]},vuiFilters.hasClearplay={label:"Family Play",name:"hasClearplay",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},width:136,options:[{label:"All",name:"any",model:{hasClearplay:""}},{label:"Available",name:"available",model:{hasClearplay:"true"}}]},vuiFilters.tvRating={label:"TV Rating",name:"tvRating",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:130},width:136,options:[{label:vui.strings.getText("FILTER_TVRATING_OPTION_1"),name:"any",model:{mpaaRatingMax:""}},{label:vui.strings.getText("FILTER_TVRATING_OPTION_2"),name:"tvma",model:{mpaaRatingMax:"tvma"}},{label:vui.strings.getText("FILTER_TVRATING_OPTION_3"),name:"tv14",model:{mpaaRatingMax:"tv14"}},{label:vui.strings.getText("FILTER_TVRATING_OPTION_4"),name:"tvpg",model:{mpaaRatingMax:"tvpg"}},{label:"TV-G and below",name:"tvg",model:{mpaaRatingMax:"tvg"}},{label:"TV-Y7 and below",name:"tvy7",model:{mpaaRatingMax:"tvy7"}},{label:"TV-Y",name:"tvy",model:{mpaaRatingMax:"tvy"}}]},vuiFilters.UxElementGenre={label:"Genre",name:"contentGenre",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_ANY"),name:"any",model:{contentGenre:""}},{label:"Action",name:"Action",model:{contentGenre:"Action"}},{label:"Animation",name:"Animation",model:{contentGenre:"Animation"}},{label:"Comedy",name:"Comedy",model:{contentGenre:"Comedy"}},{label:"Crime & Thrillers",name:"Crime & Thrillers",model:{contentGenre:"Crime & Thrillers"}},{label:"Kids & Family",name:"Kids & Family",model:{contentGenre:"Kids & Family"}},{label:"Romance",name:"Romance",model:{contentGenre:"Romance"}},{label:"Sci-Fi",name:"Sci-Fi",model:{contentGenre:"Sci-Fi"}},{label:"Suspense",name:"Suspense",model:{contentGenre:"Suspense"}}]},vuiFilters.UxElementVodType={label:"Ways to Watch",name:"vodType",optionWidth:{en:window.vui.ResDef.myVuduView.SORT_OPTION_BTN_W,es:238},options:[{label:vui.strings.getText("FILTER_RELEASETIME_OPTION_ANY"),name:"any",model:{vodType:""}},{label:"Free with ads",name:"avod",model:{vodType:"avod"}}]},vuiFilters.setNewRelMinDate=function(){var e;vuiFilters.hasSetDate||(e=new Date(VUDU.vuduTime()),vuiFilters.Year.options[1].model.releaseTimeMin=e.getFullYear()-2+"-"+(e.getMonth()+1)+"-"+e.getDate(),vuiFilters.hasSetDate=!0)},vuiFilters.filtersByName={type:vuiFilters.Type,userCollectionType:vuiFilters.UserCollectionType,releaseTime:vuiFilters.Year,sortBy:vuiFilters.Sort,tomatoMeter:vuiFilters.Tmeter,videoQuality:vuiFilters.videoQuality,mpaaRating:vuiFilters.mpaaRating,ageRating:vuiFilters.ageRating,hasClearplay:vuiFilters.hasClearplay,tvRating:vuiFilters.tvRating,offerType:vuiFilters.offerType,studio:vuiFilters.Studio,communityRating:vuiFilters.communityRating,isFreshTomato:vuiFilters.FreshTomato,contentGenre:vuiFilters.UxElementGenre,uxElementContentType:vuiFilters.UxElementType,vodType:vuiFilters.UxElementVodType},vuiFilters.currentFilters={},vuiFilters.currentFilters_my={},vuiFilters.currentFilters_explore={},function(){var s="explore",n={myMovie:{},myTV:{},exploreMovie:{},exploreTV:{},collection:{},collectionTV:{},levelOneFilter:{},levelTwoFilter:{},levelOneFiltermovies:{},levelOneFiltertv:{},levelTwoFiltermovies:{},levelTwoFiltertv:{},userCollections:{},userCollectionsBulkAdd:{}},a={};function t(e){for(var t=[],i=0;i<e.length;i++)t[i]=vuiFilters[e[i]];return t}a.myMovie={},a.myTV={},a.exploreMovie={},a.exploreTV={},a.collection={},a.collectionTV={},a.levelOneFilter={},a.levelTwoFilter={},a.levelOneFiltermovies={},a.levelOneFiltertv={},a.levelTwoFiltermovies={},a.levelTwoFiltertv={},a.userCollections={},a.userCollectionsBulkAdd={},vuiFilters.setCurrentFilterType=function(e){e&&"myMovie"==e&&r&&(vui.gConnectionInstance.isClearplayEnabled()?r[e]=t(["SortMyMovie","MovieGenre","Year","hasClearplay","ageRating"]):r[e]=t(["SortMyMovie","MovieGenre","Year","Studio","ageRating"])),s=e},vuiFilters.getCurrentFilterType=function(){return s},vuiFilters.getCurrentFilters=function(e){return e?n[s][e]:n[s]},vuiFilters.setCurrentFilters=function(e,t){if("object"==typeof e)for(var i in e)n[s][i]=e[i];else t?n[s][e]=t:delete n[s][e]},vuiFilters.getCurrentFilterNames=function(e){return e?a[s][e]:a[s]},vuiFilters.setCurrentFilterNames=function(e,t){if("object"==typeof e)for(var i in e)a[s][i]=e[i];else t?a[s][e]=t:delete a[s][e]},vuiFilters.resetCurrentFilters=function(e,t){console.log(e,t),n[s]=n[s]||{},a[s]=a[s]||{}},vuiFilters.clearCurrentFilters=function(e,t){console.log(e,t),n[s]={},a[s]={}},vuiFilters.hasFilter=function(e){var t=vuiFilters.getCurrentFilters();if(!t)return!1;for(var i in t)if("Sort"!==i&&"sortBy"!==i&&"any"!==t[i]&&"na"!==t[i]&&(!e||"geneSubGenreId"!=i&&"geneGenreId"!=i))return!0;return!1},vuiFilters.hasSortAndOrFilter=function(e){var t=vuiFilters.getCurrentFilters();if(!t)return!1;for(var i in t)if("any"!==t[i]&&"na"!==t[i]&&(!e||"geneSubGenreId"!=i&&"geneGenreId"!=i))return!0;return!1};var o={exploreMovie:{},exploreTV:{}};vuiFilters.getExploreSavedState=function(){return s&&o[s]||{}},vuiFilters.setExploreSavedState=function(e,t){if("object"==typeof e)for(var i in e)o[s][i]=e[i];else o[s][e]=t},vuiFilters.resetExploreSavedState=function(){o[s]={}};var i={1:{},2:{}};vuiFilters.saveVuduState=function(e,t){i[e]=t.filters},vuiFilters.getVuduState=function(e){return i[e]||{}};var r={};r.myMovie=t(["SortMyMovie","MovieGenre","Year","Studio","ageRating"]),r.myTV=t(["SortMyTV","TVGenre","Year","ageRating"]),r.exploreMovie=t(["SortExploreMovie","Year","Tmeter","mpaaRating","Studio"]),r.exploreTV=t(["SortExploreTV","Year","tvRating"]),r.collection=t(["SortCollection","Year","mpaaRating","Studio"]),r.collectionTV=t(["SortCollection","Year","tvRating"]),r.collectionNoStudio=t(["SortCollection","Year","mpaaRating"]),r.userCollections=t(["SortUserCollections"]),r.userCollectionsBulkAdd=t(["UserCollectionType","SortUserCollectionsBulkAdd","MovieGenre","Year","ageRating"]);var l={SortUxElement:1,UxElementVodType:1,FreshTomato:1,UxElementGenre:1,UxElementType:1},u={SortUxElement:1,UxElementVodType:1,Year:1,mpaaRating:1,tvRating:1,ageRating:1,FreshTomato:1,MovieGenre:1,UxElementType:1},d={UxElementType:1,tvRating:1,ageRating:1},c={MovieGenre:1,UxElementType:1,FreshTomato:1,mpaaRating:1},h={SortUxElement:1,UxElementType:1,tvRating:1},v={SortUxElement:1,MovieGenre:1,UxElementType:1,mpaaRating:1,FreshTomato:1},m={SortUxElement:1,tvRating:1,mpaaRating:1},g=[],_=[],p=[],T=[],f=[],E=[];["SortUxElement","UxElementVodType","Year","mpaaRating","tvRating","ageRating","FreshTomato","MovieGenre","UxElementGenre","UxElementType"].forEach(function(e){l[e]&&(h[e]||_.push(e),v[e]||p.push(e),m[e]||g.push(e)),u[e]&&(d[e]||f.push(e),c[e]||E.push(e),m[e]||T.push(e))}),g=g.splice(0,5),_=_.splice(0,5),p=p.splice(0,5),T=T.splice(0,5),f=f.splice(0,5),E=E.splice(0,5),r.levelOneFilter=t(g),r.levelOneFiltermovies=t(_),r.levelOneFiltertv=t(p),r.levelTwoFilter=t(T),r.levelTwoFiltermovies=t(f),r.levelTwoFiltertv=t(E),vuiFilters.getFilterList=function(){return r[s]}}(),vuiFilters.getQueryFilters=function(e,t){if("geneGenreId"==e||"geneSubGenreId"==e){var i={};return i[e]=t,i}var s;vuiFilters.filtersByName[e]&&(s=vuiFilters.filtersByName[e].options);for(var n=0;s&&n<s.length;n++)if(t==s[n].name)return s[n].model},vuiFilters.init=function(e){vuiFilters.currentFilters={};function t(){3===++i&&e()}var i=0;vuiFilters.MovieGenre.initFromNote(t),vuiFilters.TVGenre.initFromNote(t),vuiFilters.Studio.initFromNote(t),vuiFilters.setNewRelMinDate()}}(),vui.widgets.SortBar=new Class({Extends:vui.widgets.Container,name:"vui.widgets.SortBar",elemClassName:"sortBar",sortData:{az:[["0-9","0-9"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"],["a","A"],["b","B"],["c","C"],["d","D"],["e","E"],["f","F"],["g","G"],["h","H"],["i","I"],["j","J"],["k","K"],["l","L"],["m","M"],["n","N"],["o","O"],["p","P"],["q","Q"],["r","R"],["s","S"],["t","T"],["u","U"],["v","V"],["w","W"],["x","X"],["y","Y"],["z","Z"]],year:[["new","NEW"],["2013","2013"]],popularity:[]},init:function(e){}}),vui.widgets.VuduFilterDialogText=new Class({Extends:vui.widgets.LeafContainer,name:"VuduFilterDialogText",elemClassName:"VuduFilterDialogText",selectorType:"none",init:function(e,t,i){this.elem.style.top=window.vui.ResDef.myVuduView.SORT_OPTION_BTN_H*e+"px",this.elem.innerHTML=t,this.elem.setAttribute("aria-hidden","true"),this.ariaLabel=i||t,this.elem.setAttribute("id",t+"_"+(e+1))},onAction:function(){vui.select(this),vui.executeOnContainer(this.parentWidget,"optionOnAction")},onSelect:function(){this._setIconActive(),vui._.setAriaLabel(this.ariaLabel)},onDeselect:function(){this._setIconDefault()},onDirectionDown:function(){vui.executeOnContainer(this.parentWidget,"onDirectionDown");var e=this.parentWidget.children&&this.parentWidget.children.length;this.index===e-1&&vui._.setAriaLabel("End of list")},_setIconActive:function(){this.elem.style.color=vui.Theme.primarySelectedTextColor,this.elem.style.backgroundColor=vui.Theme.primarySelectedButtonColor,this.elem.style.backgroundPosition="0 0"},_setIconDefault:function(){this.elem.style.color=vui.Theme.primaryDefaultTextColor,this.elem.style.backgroundColor=vui.Theme.darkDefaultButtonColor,this.elem.style.backgroundPosition="0 100px"}}),vui.widgets.VuduFilterDialogMenu=new Class({Extends:vui.widgets.RoundedBorderLayout,name:"VuduFilterDialogMenu",elemClassName:"VuduFilterDialogMenu",thickness:0}),vui.pages.VuduFilterDialog=new Class({Extends:vui.widgets.Container,init:function(){},show:function(e){var t=vuiFilters.getCurrentFilters(e.data.name);self.selectable=!1,this.overlay=createDiv({className:"opacity60",width:window.vui.ResDef.SCREEN_WIDTH,height:window.vui.ResDef.SCREEN_HEIGHT},this.elem);var i=new vui.widgets.VuduFilterDialogMenu({fill:!0}),s=i.elem.style,n=e.data.options;this.data=e.data;for(var a=n.length,o=0,r=0;r<a;r++)n[r].hidden||(o+=1);var l=o*window.vui.ResDef.myVuduView.SORT_OPTION_BTN_H,u=e.data.optionWidth[vui.USER_LANGUAGE]||e.data.optionWidth.en;i.resize(u,l),this.elem.appendChild(i.elem);for(var d,c=0,r=0;r<a;r++){n[r].hidden||(n[r].name==t&&(c=r),d=new vui.widgets.VuduFilterDialogText(r,n[r].label,n[r].ariaLabel),this.attachChild(d,i.elem))}this.cb=e.cb,this.setSelectedIndex({modelIndex:c}),self.selectable=!0,s.top=e.y+"px",s.left=e.x+"px";var h=i.elem.clientHeight||0;h&&e.y+h>window.vui.ResDef.SCREEN_HEIGHT-window.vui.ResDef.FIVE&&(s.top=window.vui.ResDef.SCREEN_HEIGHT-h-window.vui.ResDef.FIVE+"px")},optionOnAction:function(){var e=this.getSelectedIndex();controller.hidePopup(),this.cb(e.modelIndex)},onBack:function(){controller.hidePopup()},onHome:function(){controller.hidePopup(),controller.goHome()}}),vui.widgets.VuduSortButton=new Class({Extends:vui.widgets.LeafContainer,name:"VuduSortButton",elemClassName:"VuduSortButton",selectorType:"none",init:function(e){this.data=e,this.options=e.options,this.label=document.createElement("div"),this.label.className="VuduSortButton_label",this.elem.appendChild(this.label),this.arrow=createDiv({className:"downArrow",text:"&#9660;"},this.elem),this.updateLabel(e),this._setIconDefault()},updateLabel:function(e){var t=vuiFilters.getCurrentFilters(e.name),i=null;if(t)for(var s=0;s<e.options.length;s++)if(e.options[s].name==t){i=this.data.options[s].label;break}i=i||this.data.options[0].label,this.label.innerHTML=i},bind:function(){},onAction:function(){var e=this.elem.getPosition(),t={x:e.x,y:e.y,data:this.data,label:this.label};t.cb=function(e){vui._.setAriaLabel((this.data.options[e].ariaLabel||this.data.options[e].label)+" selected. "+this.buttonLabel+". Currently "+(this.data.options[e].ariaLabel||this.data.options[e].label));var t=this.data.options[e].label;this.label.innerHTML=t;var i=this.data.options[e];vuiFilters.setCurrentFilters(this.data.name,i.name),vuiFilters.setCurrentFilterNames(this.data.name,"any"===i.name?"na":i.name),vui.executeOnContainer(this.parentWidget,"changeFilters"),"userCollections"!==vuiFilters.getCurrentFilterType()&&("Sort"===this.data.label?this.omTrackSortFilter(e,"changeSort"):"All"===t?this.omTrackSortFilter(e,"removeFilter"):this.omTrackSortFilter(e,"addFilter"))}.bind(this),controller.showPopup("VuduFilterDialog",t)},omTrackSortFilter:function(e,t){var i=this.data.name,s=this.data.options[e].name,n={};"changeSort"===t?n.events="event24":"addFilter"===t?n.events="event25":"removeFilter"===t&&(n.events="event26");for(var a=vuiFilters.getCurrentFilterNames(),o=vuiFilters.getFilterList(),r=0;r<o.length;r++)a[o[r].name]&&""!==a[o[r].name]||("Sort"===o[r].label?vuiFilters.setCurrentFilterNames(o[r].name,o[r].options[0].name):vuiFilters.setCurrentFilterNames(o[r].name,"na"));var l="";Object.keys(a).forEach(function(e){l+=e+"="+a[e].toString()+"|"}),l=l.slice(0,-1),vui.analytics.trackEvar({sortFilter:i+"="+s,sortFilterCombo:l},n)},onDirectionRight:function(){vui.executeOnContainer(this.parentWidget,"onDirectionRight")},onSelect:function(){this._setIconActive(),"Sort"===this.parentWidget.label.innerHTML?this.buttonLabel="Sort Options":this.buttonLabel="Filter By "+this.parentWidget.ariaLabel,vui._.setAriaLabel(this.buttonLabel+". Currently "+(this.label.ariaLabel||this.label.innerHTML))},onDeselect:function(){this._setIconDefault(),vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)},_setIconActive:function(){this.label.style.color=vui.Theme.primarySelectedTextColor,this.elem.removeClass("default"),this.elem.addClass("select")},_setIconDefault:function(){this.label.style.color="#FFF",this.elem.removeClass("select"),this.elem.addClass("default")}}),vui.widgets.VuduSortClearAll=new Class({Extends:vui.widgets.LeafContainer,name:"VuduSortClearAll",elemClassName:"VuduSortClearAll",selectorType:"none",init:function(){this.label=document.createElement("div"),this.label.className="VuduSortClearAll_label",this.elem.appendChild(this.label),this.updateLabel(vui.strings.getText("FILTER_CLEAR_ALL")),this._setIconDefault()},updateLabel:function(e){this.label.innerHTML=e},bind:function(){},onAction:function(){vui.executeOnContainer(this.parentWidget,"clearAll_"),vui._.setAriaLabel("Clear all selected")},onSelect:function(){vui._.setAriaLabel("Clear All"),this._setIconActive()},onDeselect:function(){this._setIconDefault()},_setIconActive:function(){this.elem.addClass("select")},_setIconDefault:function(){this.elem.removeClass("select")}}),vui.widgets.VuduSortButtonContainer=new Class({Extends:vui.widgets.Container,name:"VuduSortButtonContainer",elemClassName:"VuduSortButtonContainer",init:function(e){this.elem.style.position="static",this.label=document.createElement("div"),this.label.className="VuduSortButtonContainer_label",this.label.innerHTML=e.label,this.ariaLabel=e.ariaLabel||e.label,this.button=new vui.widgets.VuduSortButton(e),this.elem.appendChild(this.label),this.attachChild(this.button),this.elem.setAttribute("aria-hidden",!0)},bind:function(){},updateLabel:function(e){this.button.updateLabel(e)}}),vui.widgets.VuduSort=new Class({Extends:vui.widgets.Container,name:"vui.widgets.VuduSort",elemClassName:"vuduSort",sort:[],init:function(){this.refresh()},refresh:function(){var e=vuiFilters.getFilterList();if(e!==this.filter){if(this.detachAllChildren(),this.filter=e,this.filter)for(var t=0;t<this.filter.length;t++)this.sort[t]=new vui.widgets.VuduSortButtonContainer(this.filter[t]),this.attachChild(this.sort[t]);this.clearAll=new vui.widgets.VuduSortClearAll,this.attachChild(this.clearAll)}},displayButtonOptions:function(e){e&&e.onAction()},bind:function(){},changeFilters:function(){this.filtersChanged=!0,vui.executeOnContainer(this.parentWidget,"changeFilters")},refreshLabel:function(){this.filter=vuiFilters.getFilterList();for(var e=0;e<this.filter.length;e++)this.sort[e].updateLabel(this.filter[e])},clearAll_:function(){this.filter=vuiFilters.getFilterList();for(var e=0;e<this.filter.length;e++)vuiFilters.setCurrentFilters(this.filter[e].name,null),vuiFilters.setCurrentFilterNames(this.filter[e].name,"Sort"===this.filter[e].label?this.filter[e].options[0].name:"na"),this.sort[e].updateLabel(this.filter[e]);vui.executeOnContainer(this.parentWidget,"changeFilters"),"userCollections"!==vuiFilters.getCurrentFilterType()&&vui.executeOnContainer(this.parentWidget,"omClearAll")}}),vui.widgets.VuduSortGrid=new Class({Extends:vui.widgets.HorizontalContainer,elemClassName:"VuduSortGrid",Implements:vui.widgets.NavBackDelegate,sortClass:null,gridClass:null,sortListL:window.vui.ResDef.myVuduView.CONTAINER_SORT_LIST_L,sortL:window.vui.ResDef.myVuduView.CONTAINER_SORT_L,init:function(){this.sort=new this.sortClass,this.sort.setSelectable(!1),this.sort.elem.style.display="none",this.attachChild(this.sort),this.grid=new this.gridClass,this.attachChild(this.grid)},show:function(e){this.grid.setList(e.vpm,!1),this.vpm=e.vpm,this.firstTimeAnimate=!1},saveState:function(){return{scrollOffset:this.grid.getScrollOffset(),listSelected:this.grid.list.selected,filters:vuiFilters.getCurrentFilters()}},showSort:function(){this.sort.setSelectable(!0),this.firstTimeAnimate?this.doAnimate("show",this.sortListL):(this.sort.show(),this.grid.elem.style.left=this.sortListL+"px"),this.firstTimeAnimate=!0,this.sort.setSelectable(!0),vui.select(this.sort)},hideSort:function(){if(this.firstTimeAnimate){if(!this.isShowingSort())return;this.doAnimate("hide",this.sortL)}else vui.executeOnContainer(this.parentWidget,"showSortCue"),this.grid.elem.style.left=this.sortL+"px",!0===window.useWebkit&&(this.grid.elem.style.transitionDuration="0s",this.grid.elem.style.transform="translateX(0)");this.sort.setSelectable(!1),this.sort.hide(),this.firstTimeAnimate=!0},changeFilters:function(e){var t=vui.deepCopy(this.vpm);t.filters=vuiFilters.getCurrentFilters(),t.name.match(/MY/)&&vui.executeOnContainer(this.parentWidget,"saveVuduState",t),t.state={},this.grid.setList(t,!1),this.grid.resetSelector()},onDirectionRight:function(){this.grid.selectable?vui.executeOnContainer(this.parentWidget,"hideSort_"):alert("no content on this grid")},onDirectionLeft:function(){!0!==this.sort.hideFilter&&(vui.executeOnContainer(this.parentWidget,"showSort_"),vui.select(this.sort))},focusSortControl:function(){vui.select(this.sort)},resetGridSelect:function(){try{this.grid.list.selected=0}catch(e){alert("resetgridselect error.")}},doAnimate:function(e,t){var i;!0===window.useWebkit?(t-=this.sortL,i=function(){"show"==e?this.sort.show():"hide"==e&&(vui.executeOnContainer(this.parentWidget,"showPanel"),vui.executeOnContainer(this.parentWidget,"showSortCue")),vui.setBusy(!1),this.animating=!1}.bind(this),vui.setBusy(!0),this.animating=!0,vui.setSelectorVisible(!1),vui._.animX(this.grid.elem,t,500,i)):(this.animateParams={elem:this.grid.elem,property:"left",duration:300,end:t,onComplete:function(){"show"==e?this.sort.show():"hide"==e&&(vui.executeOnContainer(this.parentWidget,"showPanel"),vui.executeOnContainer(this.parentWidget,"showSortCue")),vui.setBusy(!1),this.animating=!1}.bind(this)},parseInt(this.elem.style.left,10)!=this.animateParams.end&&(vui.setBusy(!0),this.animating=!0,vui.setSelectorVisible(!1),this.animation=vui.createAnimation(this.animateParams)))},isShowingSort:function(){return"none"!==this.sort.elem.style.display}}),vui.widgets.sortCue=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.sortCue",elemClassName:"ListOfListViewAll",useCss:!0,init:function(e){var t,i;this.useCss?((t=document.createElement("div")).className="ListOfListViewAllBg",this.elem.appendChild(t),(i=document.createElement("span")).className="ListOfListViewAllText",i.innerHTML=e&&vui.strings.transformCase(e.text)||vui.strings.transformCase("Filter"),this.textDiv=i,t.appendChild(i),this.borderDiv=t):this.elem.style.background="url('"+vui.images.home.sort+"') 0 0 no-repeat",this.selectable=!1},onAction:function(){vui.executeOnContainer(this.parentWidget,"showSort_"),vui.executeOnContainer(this.parentWidget.sortGrid,"focusSortControl")},onSelect:function(){this.useCss?(this.borderDiv.addClass("selected"),this.textDiv.addClass("selected")):this.elem.style.backgroundPosition="0% 100%"},onDeselect:function(){vuiFilters.hasFilter()||this.setDefault()},setActive:function(){this.onSelect()},setDefault:function(){this.useCss?(this.borderDiv.removeClass("selected"),this.textDiv.removeClass("selected")):this.elem.style.backgroundPosition="0% 0%"}}),vui.widgets.ScrollingListPoster=new Class({Extends:vui.widgets.GridPoster,name:"vui.widgets.BundleListPoster",init:function(e){this.parent.apply(this,arguments),this.ind=e},onSelect:function(){this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this)},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)}}),vui.widgets.ScrollingListBase=new Class({Extends:vui.widgets.HorizontalContainer,posterClass:vui.widgets.ScrollingListPoster,elemClassName:"ScrollingListBase",barStartAt:0,barEndAt:window.vui.ResDef.explore.BAR_START_END,posterPositionStart:4,posterPositionWidth:window.vui.ResDef.lol.POSTER_POS_W,visibleNum:4,animDuration:180,init:function(e){this.params=e||{},this.el.bar=document.createElement("div"),this.el.bar.className="ListBar",this.elem.appendChild(this.el.bar),this.barWidth=this.visibleNum*this.posterPositionWidth+this.posterPositionStart,this.el.bar.style.width=this.barWidth+"px",this.elem.style.width=this.barWidth+"px",e.listState&&null!=e.listState&&this.resetBarLeft(e.listState.barLeft),this.bposter=new vui.widgets.BlowupGridPoster,this.elem.appendChild(this.bposter.elem),this.bposter.parentWidget=this},bind:function(e){if(e&&0<e.length){this.data=e,this.totalCount=e.length,this.posters=[];for(var t=0;t<this.data.length;t++)this.posters[t]=new this.posterClass(t),this.attachChild(this.posters[t],this.el.bar),this.posters[t].bind(this.data[t]),this.posters[t].elem.style.left=this.posterPositionStart+this.posterPositionWidth*t+"px";this.updLabel()}else alert("no buildedContent")},onSelectedPoster:function(e){vui.isOnSelectionPath(this)&&vui.executeOnContainer(this.parentWidget,"updateDescriptionContainer");var t=this.getBarLeft(),i=e.elem.offsetLeft||this.posterPositionStart,s=1;0===t&&(s=this.selected-parseInt(this.barWidth/this.posterPositionWidth)+1),t+i>this.barWidth?this._doAnimate(s*parseInt(t-this.posterPositionWidth,10),e):t+i<0&&this._doAnimate(parseInt(t+this.posterPositionWidth,10),e)},updLabel:function(){var e=this.getBarLeft(),t=Math.round((0-e)/this.posterPositionWidth),i=Math.round(t+this.visibleNum);i>this.totalCount&&(i=this.totalCount);var s={};s.start=t,s.end=i,s.total=this.totalCount,s.num=this.visibleNum,vui.executeOnContainer(this.parentWidget,"updLabel",s)},getBarLeft:function(){return!0===window.useWebkit?vui._.getTransformX(this.el.bar.style.webkitTransform):this.el.bar.offsetLeft},resetBarLeft:function(e){!0===window.useWebkit?(this.el.bar.style.webkitTransitionDuration="0s",this.el.bar.style.webkitTransform="translateX("+e+"px)"):this.el.bar.style.left=e+"px"},_doAnimate:function(e,t){this.hideBlowUp();var i=function(){this.animating=!1,this.drawBlowup(t),this.setSelectable(!0),this.bposter.show(),vui.setBusy(!1)}.bind(this);this.animating=!0,vui.setBusy(!0),vui._.animX(this.el.bar,e,this.animDuration,i)},onDeselectedPoster:function(){this.hideBlowUp()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},drawBlowup:function(e){var t,i;this.animating||(this.updLabel(e.ind),this.pos=this.elem.getPosition(),t=e.elem.getPosition(),(i=this.bposter).bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+10+"px",i.show())},hideBlowUp:function(){this.bposter.hide()}}),vui.widgets.LoLPosterBase=new Class({Extends:vui.widgets.GridPoster,name:"vui.widgets.LoLPosterBase",vop:"poster",posterWidth:window.vui.ResDef.lol.POSTER_W,posterHeight:window.vui.ResDef.lol.POSTER_H,blowWidth:window.vui.ResDef.lol.POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.POSTER_BLOW_H,init:function(){this.width=this.posterWidth,this.height=this.posterHeight,this.parent.apply(this,arguments)},bind:function(){this.width=this.posterWidth,this.height=this.posterHeight,this.parent.apply(this,arguments),this.elem.style.width=this.width+"px",this.img.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.img.style.height=this.height+"px"},onSelect:function(){this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this)},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)},onAction:function(){var e,t,i,s;this.data&&(e=vui.executeOnContainer(this.parentWidget,"getActiveTab"),t=vui.executeOnContainer(this.parentWidget,"getActiveSubTab"),e&&t?(e=e.toLowerCase(),t=t.toLowerCase(),i=(i=vui.executeOnContainer(this.parentWidget,"getTitle")||"").toLowerCase(),(s={}).selections=e+":"+t+":"+i,s.props={subTab:t,category:i},vui.executeOnContainer(this.parentWidget,"omReport_",s)):e&&(e=e.toLowerCase(),i=(i=vui.executeOnContainer(this.parentWidget,"getTitle")||"").toLowerCase(),(s={}).selections=e+":"+i,s.props={category:i},vui.executeOnContainer(this.parentWidget,"omReport_",s)),"uiEntry"==this.data._type&&vui.analytics.trackEvar({promoType:vui._.toLower(this.data.reportText)||"ad"},{events:"event19"}),this.data.launch?this.data.launch():vui.executeOnContainer(this.parentWidget,"posterOnAction",this.data))}}),vui.widgets.LoLTriplePosterBase=new Class({Extends:vui.widgets.LoLPosterBase,name:"vui.widgets.LoLTriplePosterBase",hideGlow:!0,posterWidth:window.vui.ResDef.lol.TRIPLE_POSTER_W,posterHeight:window.vui.ResDef.lol.TRIPLE_POSTER_H,blowWidth:window.vui.ResDef.lol.TRIPLE_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.TRIPLE_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.TRIPLE_POSTER_BLOW_PADDING_T,placardWidth:window.vui.ResDef.lol.TRIPLE_POSTER_IMAGE_W,usePlacard:!0}),vui.widgets.LoLDoublePosterBase=new Class({Extends:vui.widgets.LoLPosterBase,name:"vui.widgets.LoLDoublePosterBase",hideGlow:!0,posterWidth:window.vui.ResDef.lol.DOUBLE_POSTER_W,posterHeight:window.vui.ResDef.lol.DOUBLE_POSTER_H,blowWidth:window.vui.ResDef.lol.DOUBLE_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.DOUBLE_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.DOUBLE_POSTER_BLOW_PADDING_T,placardWidth:window.vui.ResDef.lol.DOUBLE_POSTER_IMAGE_W,usePlacard:!0}),vui.widgets.LoLSmallPosterBase=new Class({Extends:vui.widgets.LoLPosterBase,name:"vui.widgets.LoLSmallPosterBase",vop:"poster",hideGlow:!1,posterWidth:window.vui.ResDef.lol.SMALL_POSTER_W,posterHeight:window.vui.ResDef.lol.SMALL_POSTER_H,blowWidth:window.vui.ResDef.lol.SMALL_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.SMALL_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.SMALL_POSTER_BLOW_PADDING_T,placardWidth:window.vui.ResDef.lol.DOUBLE_POSTER_IMAGE_W,usePlacard:!0}),vui.widgets.ListOfListViewAll=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.ListOfListViewAll",elemClassName:"ListOfListViewAll",selectorType:"none",vop:"viewAll",useCss:!0,init:function(){var e,t;this.useCss?((e=document.createElement("div")).className="ListOfListViewAllBg",this.elem.appendChild(e),(t=document.createElement("span")).className="ListOfListViewAllText",t.innerHTML=vui.strings.transformCase("View All"),this.textDiv=t,e.appendChild(t),this.borderDiv=e):this.elem.style.background="url('"+vui.images.home.view_all+"') 0% 0% no-repeat"},onSelect:function(){vui._.setAriaLabel("View All "+this.parentWidget.el.title.innerHTML),vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this),this.useCss?(this.borderDiv.addClass("selected"),this.textDiv.addClass("selected")):this.elem.style.backgroundPosition="0% 100%"},onDeselect:function(){this.useCss?(this.borderDiv.removeClass("selected"),this.textDiv.removeClass("selected")):this.elem.style.backgroundPosition="0% 0%"},onAction:function(){vui.executeOnContainer(this.parentWidget,"viewAllOnAction_")}}),vui.widgets.ListOfListRowBase=new Class({Extends:vui.widgets.HorizontalContainer,name:"vui.widgets.ListOfListRowBase",posterClass:vui.widgets.LoLPosterBase,elemClassName:"ListOfListRow",data:{},posters:[],ind:-1,height:0,listNum:5,endIndex:5,marginTop:0,headerHeight:0,bodyHeight:0,posterPositionWidth:window.vui.ResDef.lol.POSTER_POS_W,posterPositionStart:window.vui.ResDef.lol.POSTER_POS_START,init:function(e,t){t&&(this.headerHeight=t.headerHeight||this.headerHeight,this.bodyHeight=t.bodyHeight||this.bodyHeight,this.height=t.height||this.height,this.marginTop=t.marginTop||this.marginTop),this.ind=e,this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.el.header=document.createElement("div"),this.el.header.style.height=this.headerHeight+"px",this.elem.appendChild(this.el.header),this.el.body=document.createElement("div"),this.el.body.style.height=this.bodyHeight+"px",this.elem.appendChild(this.el.body)},bind:function(e){if(this.data=e,this.totalCount=e.totalCount||0,0==this.totalCount){this.setSelectable(!1);var t=document.createElement("div");return t.className="ListOfListNoDataLabel",t.innerHTML="No Results Found",void this.el.body.appendChild(t)}"1RowTripleSized"==e.layoutHint?(this.posterClass=vui.widgets.LoLTriplePosterBase,this.listNum=1,this.totalCount>this.listNum&&(this.totalCount=this.listNum)):"1RowDoubleSized"==e.layoutHint?(this.posterClass=vui.widgets.LoLDoublePosterBase,this.posterPositionWidth=window.vui.ResDef.lol.POSTER_POS_DOUBLE_W,this.listNum=3,this.totalCount>this.listNum&&(this.totalCount=this.listNum)):(e.searchParams&&e.searchParams.uiEntryType&&"featuredPromo"==e.searchParams.uiEntryType[0]&&(e.layoutHint="1RowDoubleSized",this.posterClass=vui.widgets.LoLDoublePosterBase,this.posterPositionWidth=window.vui.ResDef.lol.POSTER_POS_DOUBLE_W),e.searchParams&&e.searchParams.count&&parseInt(vui._.aStr(e.searchParams.count))<this.totalCount&&(this.totalCount=vui._.aStr(e.searchParams.count))),this.totalCount>this.listNum?(this.viewAllContainer=document.createElement("div"),this.viewAllContainer.className="ListOfListViewAllContainer",this.el.body.appendChild(this.viewAllContainer),this.viewAll=new vui.widgets.ListOfListViewAll(e.title),this.viewAllContainer.appendChild(this.viewAll.elem),this.attachChild(this.viewAll,this.viewAllContainer),this.selected=1,this.setViewAll()):this.selected=0,this.createPosters(e.content)},createCredit:function(e){var t={},i=vui.getModel().portraitBaseUrl;return t._type=vui._.aStr(e._type),t.personId=vui._.aStr(e.id),t.firstName=vui._.aStr(e.name),t.posterUrl=i+t.personId,t.showCastnCrewLable=!0,t},createPosters:function(e){this.posters=[];for(var t=0,i=0;i<this.listNum;i++)e[i]&&(this.posters[t]=new this.posterClass("c_"+t),this.attachChild(this.posters[i],this.el.body),this.posters[t].bind(e[i],t),this.posters[t].elem.style.left=this.posterPositionStart+this.posterPositionWidth*t+"px",t++);this.endIndex=t},unbind:function(){delete this.data,this.totalCount=0,this.contentIds=[],this.detachAllChildren()},getTitle:function(){return this._rowTitle||""},setTitle:function(e){this.el.title||(this.el.title=document.createElement("div"),this.el.title.className="lolTitle",this.el.header.appendChild(this.el.title)),this._rowTitle=vui._.aStr(e)||"",vui._.innerHTML(this.el.title,this._rowTitle)},setViewAll:function(){this.el.viewAllLabel||(this.el.viewAllLabel=document.createElement("div"),this.el.viewAllLabel.className="lolViewAllLabel",this.el.header.appendChild(this.el.viewAllLabel)),vui._.innerHTML(this.el.viewAllLabel,"1 - "+this.endIndex+" of "+this.totalCount)},viewAllOnAction_:function(){delete this.data.preSelected,this.reportViewAll(),vui.executeOnContainer(this.parentWidget,"viewAllOnAction_",this.ind)},reportViewAll:function(e){var t,i,s=e||"viewall",n=vui.executeOnContainer(this.parentWidget,"getActiveTab"),a=vui.executeOnContainer(this.parentWidget,"getActiveSubTab");n&&a?(n=n.toLowerCase(),a=a.toLowerCase(),t=this.getTitle().toLowerCase(),(i={}).selections=n+":"+a+":"+t+":"+s,i.props={subTab:a,category:t},vui.executeOnContainer(this.parentWidget,"omReport_",i)):n&&(n=n.toLowerCase(),t=this.getTitle().toLowerCase(),(i={}).selections=n+":"+t+":"+s,i.props={category:t},vui.executeOnContainer(this.parentWidget,"omReport_",i))},onDirectionDown:function(){vui.executeOnContainer(this.parentWidget,"setNextRowSelected",{ind:this.ind,selected:this.selected}),vui.executeOnContainer(this.parentWidget,"onDirectionDown")},onDirectionUp:function(){vui.executeOnContainer(this.parentWidget,"setPrevRowSelected",{ind:this.ind,selected:this.selected}),vui.executeOnContainer(this.parentWidget,"onDirectionUp")}}),vui.widgets.ListOfListBase=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ListOfListBase",Implements:vui.widgets.NavBackDelegate,elemClassName:"ListOfListBase",rows:[],animDuration:400,rowClass:null,width:0,rowHeight:0,visibleHeight:0,init:function(){this.elem.style.width=this.width+"px",this.el.container=document.createElement("div"),this.el.container.className="lolContainer",this.elem.appendChild(this.el.container),this.bposter=new vui.widgets.BlowupGridPoster,this.elem.appendChild(this.bposter.elem),(this.bposter.parentWidget=this).scroller=new vui.widgets.Scroller3,this.elem.appendChild(this.scroller.elem),this.scroller.setList(this)},scrollUp:function(){return 0!=this.selected&&vui.executeOnContainer(this,"onDirectionUp"),!1},scrollDown:function(){this.selected!=this.rows.length-1&&vui.executeOnContainer(this,"onDirectionDown")},bindData:function(e){for(var t=0;t<e.length;t++)this.rows[t].bind(e[t])},bindUI:function(e){this.rows=[];for(var t,i,s=this._containerHeight=0;s<e.length;s++){this._createRow(s,e[s]),0===s?this.rows[s].elem.style.top="0":(t=parseInt(this.rows[s-1].elem.style.top,10),i=this.rows[s-1].height||this.rowHeight,this.rows[s].elem.style.top=i+t+"px"),this._containerHeight+=this.rows[s].height}2<e.length?this.scroller.show():this.scroller.hide(),this.el.container.style.height=parseInt(this._containerHeight,10)+"px",this.elem.style.height=this.el.container.style.height},_createRow:function(e,t){"1RowTripleSized"==t.layoutHint?(t.bodyHeight=window.vui.ResDef.lol.TRIPLE_BODY_H,t.height=window.vui.ResDef.lol.TRIPLE_ROW_H):("1RowDoubleSized"==t.layoutHint||t.contentSearchParameters&&t.contentSearchParameters.uiEntryType&&"featuredPromo"===vui._.aStr(t.contentSearchParameters.uiEntryType))&&(t.bodyHeight=window.vui.ResDef.lol.DOUBLE_BODY_H,t.height=window.vui.ResDef.lol.DOUBLE_ROW_H),this.rows[e]=new this.rowClass(e,t);var i=this.el.container;return this.attachChild(this.rows[e],i),this.rows[e]},getContainerTop:function(){return!0===window.useWebkit?vui._.getTransformY(this.el.container.style.webkitTransform):this.el.container.offsetTop},setContainerTop:function(e){!0===window.useWebkit?(this.el.container.style.webkitTransitionDuration="0ms",this.el.container.style.webkitTransform="translateY("+e+"px)",this.delayBlowup=!0):this.el.container.style.top=e+"px"},onSelectedPoster:function(e){var t,i,s,n;this.animating||(e.parentWidget?(t=this.getContainerTop(),(i=e.parentWidget.elem.offsetTop)+t+(s=e.parentWidget.height)>this.visibleHeight?(n=0-(i+s-this.visibleHeight),this._doAnimate(n,e)):i+t<0&&(vui._.isIndex(e.parentWidget.ind)&&this.rows[e.parentWidget.ind+1]&&(s=this.rows[e.parentWidget.ind+1].height),n=0-i,this._doAnimate(n,e)),vui.executeOnContainer(this.parentWidget,"onSelectedPoster",e)):alert("Error: no parentWidget"))},_doAnimate:function(e,t){var i=function(){"poster"==t.vop?(this.animating=!1,this.drawBlowup(t),this.setSelectable(!0),this.bposter.show()):(this.animating=!1,this.setSelectable(!0),this.bposter.hide()),vui.setBusy(!1)}.bind(this);this.animating=!0;var s=this._getLoLRatio(e);this.scroller.setRatio(s),vui.setBusy(!0),vui._.animY(this.el.container,e,this.animDuration,i)},_getLoLRatio:function(e){var t=parseInt(this.el.container.style.height,10);return this.visibeHeight>t?t=this.visibleHeight:t-=this.visibleHeight,(0-e)/t},drawBlowup:function(e){var t,i,s;this.animating||(this.pos=this.elem.getPosition(),t=e.elem.getPosition(),i=this.bposter,this.bposter.setSize(e.blowWidth,e.blowHeight,e.hideGlow),s=e.blowUpPaddingTop||window.vui.ResDef.lol.SMALL_POSTER_BLOW_PADDING_T,i.bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+s+"px",i.show())},onDeselectedPoster:function(){this.bposter.unbind()},setNextRowSelected:function(e){var t=e.ind,i=e.selected,s=t+1;this.rows[s]&&(i=this._findNextSelected(t,s,i),this.rows[s].children&&i<this.rows[s].children.length?this.rows[s].selected=i:this.rows[s].children&&0<this.rows[s].children.length&&(this.rows[s].selected=this.rows[s].children.length-1))},setPrevRowSelected:function(e){var t=e.ind,i=e.selected,s=t-1;this.rows[s]&&(i=this._findNextSelected(t,s,i),this.rows[s].children&&i<this.rows[s].children.length?this.rows[s].selected=i:this.rows[s].children&&0<this.rows[s].children.length&&(this.rows[s].selected=this.rows[s].children.length-1))},_findNextSelected:function(e,t,i){return this.rows[e]&&this.rows[t]&&(this.rows[e].viewAll&&!this.rows[t].viewAll?--i<0&&(i=0):!this.rows[e].viewAll&&this.rows[t].viewAll&&i++),i},getItemSelected:function(e){return this.rows[e]&&this.rows[e].selected||0},setItemSelected:function(e,t){this.rows[e]&&(this.rows[e].selected=t)},getState:function(){var e={};return e.row=this.selected||0,e.item=this.getItemSelected(e.row)||0,e.containerTop=this.getContainerTop()||0,e.scrollerRatio=this.scroller.getRatio(),e},restoreState:function(e){this.setContainerTop(e.containerTop),this.selected=e.row,this.setItemSelected(e.row,e.item),this.scroller.setRatio(e.scrollerRatio)},reset:function(){this.scroller.setRatio(0),this.setContainerTop(0),delete this.selected,this.detachAllChildren(),this.rows=[]},hide:function(){this.scroller.hide(),this.parent.apply(this,arguments)},show:function(){this.scroller.show(),this.parent.apply(this,arguments)},onDirectionRight:function(){var e,t=vui.getSelected();t&&t.parentWidget&&t.parentWidget.viewAll&&this.viewAllOnAction_&&(e=t.parentWidget.ind,this.rows&&this.rows[e]&&this.rows[e].data&&(this.rows[e].data.rowType&&"placard"===this.rows[e].data.rowType?this.rows[e].data.preSelected=3:this.rows[e].data.preSelected=5),this.rows[e].reportViewAll("right"),this.viewAllOnAction_(t.parentWidget.ind))}}),vui.widgets.DynamicScrollingListPoster=new Class({Extends:vui.widgets.GridPoster,name:"vui.widgets.DynamicScrollingListPoster",init:function(e){this.parent.apply(this,arguments),this.ind=e},onSelect:function(){this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this)},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)}}),vui.widgets.DynamicScrollingListBase=new Class({Extends:vui.widgets.HorizontalContainer,posterClass:vui.widgets.DynamicScrollingListPoster,elemClassName:"ScrollingListBase",barStartAt:0,barEndAt:window.vui.ResDef.explore.BAR_START_END,posterPositionStart:4,posterPositionWidth:window.vui.ResDef.lol.POSTER_POS_W,visibleNum:4,animDuration:180,init:function(e){this.params=e||{},this.el.bar=document.createElement("div"),this.el.bar.className="ListBar",this.elem.appendChild(this.el.bar),this.barWidth=this.visibleNum*this.posterPositionWidth+this.posterPositionStart,this.el.bar.style.width=this.barWidth+"px",this.elem.style.width=this.barWidth+"px",e.listState&&null!=e.listState&&this.resetBarLeft(e.listState.barLeft),this.bposter=new vui.widgets.BlowupGridPoster,this.elem.appendChild(this.bposter.elem),this.bposter.parentWidget=this},bind:function(e){if(e&&0<e.length){this.data=e,this.totalCount=e.length,this.posters=[];for(var t=0;t<this.data.length;t++)this.posters[t]=new this.posterClass(t),this.attachChild(this.posters[t],this.el.bar),this.posters[t].bind(this.data[t]),this.posters[t].elem.style.left=this.posterPositionStart+this.posterPositionWidth*t+"px";this.updLabel()}else alert("no buildedContent")},onSelectedPoster:function(e){vui.isOnSelectionPath(this)&&vui.executeOnContainer(this.parentWidget,"updateDescriptionContainer");var t=this.getBarLeft(),i=e.elem.offsetLeft||this.posterPositionStart;t+i>this.barWidth?this._doAnimate(parseInt(t-this.posterPositionWidth,10),e):t+i<0&&this._doAnimate(parseInt(t+this.posterPositionWidth,10),e)},updLabel:function(){var e=(0-this.getBarLeft())/this.posterPositionWidth,t=e+this.visibleNum;t>this.totalCount&&(t=this.totalCount);var i={};i.start=e,i.end=t,i.total=this.totalCount,i.num=this.visibleNum,vui.executeOnContainer(this.parentWidget,"updLabel",i)},getBarLeft:function(){return!0===window.useWebkit?vui._.getTransformX(this.el.bar.style.webkitTransform):this.el.bar.offsetLeft},resetBarLeft:function(e){!0===window.useWebkit?(this.el.bar.style.webkitTransitionDuration="0s",this.el.bar.style.webkitTransform="translateX("+e+"px)"):this.el.bar.style.left=e+"px"},_doAnimate:function(e,t){this.hideBlowUp();var i=function(){this.animating=!1,this.drawBlowup(t),this.setSelectable(!0),this.bposter.show(),vui.setBusy(!1)}.bind(this);this.animating=!0,vui.setBusy(!0),vui._.animX(this.el.bar,e,this.animDuration,i)},onDeselectedPoster:function(){this.hideBlowUp()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},drawBlowup:function(e){var t,i;this.animating||(this.updLabel(e.ind),this.pos=this.elem.getPosition(),t=e.elem.getPosition(),(i=this.bposter).bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+10+"px",i.show())},hideBlowUp:function(){this.bposter.hide()}}),vui.widgets.DynamicLoLPosterBase=new Class({Extends:vui.widgets.GridPoster,name:"vui.widgets.DynamicLoLPosterBase",vop:"poster",posterWidth:window.vui.ResDef.lol.POSTER_W,posterHeight:window.vui.ResDef.lol.POSTER_H,blowWidth:window.vui.ResDef.lol.POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.POSTER_BLOW_H,init:function(){this.parent.apply(this,arguments),this.width=this.posterWidth,this.height=this.posterHeight},bind:function(e){this.data=e,this.width=this.posterWidth,this.height=this.posterHeight,this.data.showCastnCrewLable=!0,this.parent.apply(this,arguments),this.elem.style.width=this.width+"px",this.img.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.img.style.height=this.height+"px",this.img.src=vui.images.empty1x1,this.img.src=this.data.resizedPosterUrl},onSelect:function(){this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this)},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)},onAction:function(){var e,t,i,s,n,a={};this.data&&(e=vui.executeOnContainer(this.parentWidget,"getActiveTab"),t=vui.executeOnContainer(this.parentWidget,"getActiveSubTab"),e&&t?(e=e.toLowerCase(),t=t.toLowerCase(),i=(i=vui.executeOnContainer(this.parentWidget,"getTitle")||"").toLowerCase(),(s={}).selections=e+":"+t+":"+i,s.props={subTab:t,category:i},vui.executeOnContainer(this.parentWidget,"omReport_",s),this.data.mainTab=vui.executeOnContainer(this.parentWidget,"getActiveTab"),this.reportPosterClick(this.data)):e&&("search"===(e=e.toLowerCase())?vui.executeOnContainer(this.parentWidget,"omReportSearch_"):(i=(i=vui.executeOnContainer(this.parentWidget,"getTitle")||"").toLowerCase(),(s={}).selections=e+":"+i,s.props={category:i},vui.executeOnContainer(this.parentWidget,"omReport_",s))),"uiEntry"==this.data._type&&vui.analytics.trackEvar({promoType:vui._.toLower(this.data.reportText)||"ad"},{events:"event19"}),e&&t||"search"===e||(this.parentWidget&&this.parentWidget.params&&this.parentWidget.params.mainTab&&(this.data.mainTab=this.parentWidget.params.mainTab),this.reportPosterClick(this.data)),this.data.launch?this.data.launch():(this.parentWidget.data?a=this.parentWidget.data:this.parentWidget.params&&this.parentWidget.params.uxRowId&&(n=this.parentWidget.params.uxRowId,a={uxRowTrackingId:vui._.aStr(vui.m.personalizedCache.uxRow[n].trackingId),uxIsPersonal:"true"===vui._.aStr(vui.m.personalizedCache.uxRow[n].isPersonal)}),vui._.posterOnAction(this.data,a)))},reportPosterClick:function(e){var t,i,s,n,a,o,r,l;e.posterType&&"content"===e.elementType&&(t=vui.m,(i=vui._.aStr(e.contentId))?(s={rowId:"",elementId:i,rowIndex:"",columnIndex:""},(n=t.userSessionStore.getFromStore("zap-api-page-id"))&&(s.pageId=n),e.mainTab&&(s.channel=e.mainTab),this.parentWidget&&this.parentWidget.data?(s.rowId=this.parentWidget.data.uxRowTrackingId+(this.parentWidget.data.uxRowIsPersonal?vui.analytics.zapApiIsPersonalText:""),s.columnIndex=s.rowId+":"+s.elementId+":"+("banner"===this.parentWidget.data.rowType?1:this.index),s.rowIndex=s.rowId+":"+s.elementId+":"+(this.parentWidget.index+1)):(a=this.parentWidget.columns,o=this.parentWidget.currentStart?this.parentWidget.currentStart+1:1,r=(this.index+o)/a,l=this.parentWidget.params.uxRowId,s.rowId=vui._.aStr(vui.m.personalizedCache.uxRow[l].trackingId)+("true"===vui._.aStr(vui.m.personalizedCache.uxRow[l].isPersonal)?vui.analytics.zapApiIsPersonalText:""),s.rowId="PersonalizedShowcase"===controller.baseLayer.currentPage.pageTitle?s.rowId+vui.analytics.zapApiViewAllText:s.rowId,s.columnIndex=s.rowId+":"+s.elementId+":"+((this.index+o)%a==0?a:(this.index+o)%a),s.rowIndex=s.rowId+":"+s.elementId+":"+((this.index+o)%a==0?r:Math.floor(r)+1)),vui.analytics.trackEvar(s,{events:"event209"}),s.channel&&t.userSessionStore.addToStore("zap-api-main-tab",s.channel),s.pageId&&t.userSessionStore.addToStore("zap-api-page-id",s.pageId),t.userSessionStore.addToStore("zap-api-row-id",s.rowId),t.userSessionStore.addToStore("zap-api-element-id",s.elementId),t.userSessionStore.addToStore("zap-api-row-index",s.rowIndex),t.userSessionStore.addToStore("zap-api-column-index",s.columnIndex)):vui._.deleteZapApiEvarsFromSessionStore())}}),vui.widgets.DynamicLoLBannerPosterBase=new Class({Extends:vui.widgets.DynamicLoLPosterBase,name:"vui.widgets.DynamicLoLBannerPosterBase",hideGlow:!0,posterWidth:window.vui.ResDef.lol.BANNER_POSTER_W,posterHeight:window.vui.ResDef.lol.BANNER_POSTER_H,blowWidth:window.vui.ResDef.lol.BANNER_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.BANNER_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.BANNER_POSTER_BLOW_PADDING_T,usePlacard:!0}),vui.widgets.DynamicLoLPlacardPosterBase=new Class({Extends:vui.widgets.DynamicLoLPosterBase,name:"vui.widgets.DynamicLoLPlacardPosterBase",hideGlow:!0,posterWidth:window.vui.ResDef.lol.PLACARD_POSTER_W,posterHeight:window.vui.ResDef.lol.PLACARD_POSTER_H,blowWidth:window.vui.ResDef.lol.PLACARD_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.PLACARD_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.PLACARD_POSTER_BLOW_PADDING_T,usePlacard:!0}),vui.widgets.DynamicLoLLongPosterBase=new Class({Extends:vui.widgets.DynamicLoLPosterBase,name:"vui.widgets.DynamicLoLLongPosterBase",vop:"poster",hideGlow:!1,posterWidth:window.vui.ResDef.lol.LONG_POSTER_W,posterHeight:window.vui.ResDef.lol.LONG_POSTER_H,blowWidth:window.vui.ResDef.lol.LONG_POSTER_BLOW_W,blowHeight:window.vui.ResDef.lol.LONG_POSTER_BLOW_H,blowUpPaddingTop:window.vui.ResDef.lol.LONG_POSTER_BLOW_PADDING_T,usePlacard:!0}),vui.widgets.DynamicListOfListViewAll=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.DynamicListOfListViewAll",elemClassName:"ListOfListViewAll",selectorType:"none",vop:"viewAll",useCss:!0,init:function(){var e,t;this.useCss?((e=document.createElement("div")).className="ListOfListViewAllBg",this.elem.appendChild(e),(t=document.createElement("span")).className="ListOfListViewAllText",t.innerHTML=vui.strings.transformCase("View All"),this.textDiv=t,e.appendChild(t),this.borderDiv=e):this.elem.style.background="url('"+vui.images.home.view_all+"') 0% 0% no-repeat"},onSelect:function(){vui._.setAriaLabel("View All "+this.parentWidget.el.title.innerHTML),vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this),this.useCss?(this.borderDiv.addClass("selected"),this.textDiv.addClass("selected")):this.elem.style.backgroundPosition="0% 100%"},onDeselect:function(){this.useCss?(this.borderDiv.removeClass("selected"),this.textDiv.removeClass("selected")):this.elem.style.backgroundPosition="0% 0%"},onAction:function(){vui.executeOnContainer(this.parentWidget,"viewAllOnAction_")}}),vui.widgets.DynamicListOfListRowBase=new Class({Extends:vui.widgets.HorizontalContainer,name:"vui.widgets.DynamicListOfListRowBase",posterClass:vui.widgets.DynamicLoLPosterBase,elemClassName:"ListOfListRow",data:{},posters:[],ind:-1,height:0,listNum:5,endIndex:5,marginTop:0,headerHeight:0,bodyHeight:0,posterPositionWidth:window.vui.ResDef.lol.POSTER_POS_W,posterPositionStart:window.vui.ResDef.lol.POSTER_POS_START,init:function(e,t){t&&(this.headerHeight=t.headerHeight||this.headerHeight,this.bodyHeight=t.bodyHeight||this.bodyHeight,this.height=t.height||this.height,this.marginTop=t.marginTop||this.marginTop),this.ind=e,this.elem.style.width=this.width+"px",this.elem.style.height=this.height+"px",this.el.header=document.createElement("div"),this.el.header.style.height=this.headerHeight+"px",this.elem.appendChild(this.el.header),this.el.body=document.createElement("div"),this.el.body.className="personalizedRowBody",this.el.body.style.height=this.bodyHeight+"px",this.elem.appendChild(this.el.body)},bind:function(e){if(this.data=e,this.totalCount=e.totalCount||0,0==this.totalCount){this.setSelectable(!1);var t=document.createElement("div");return t.className="ListOfListNoDataLabel",t.innerHTML="No Results Found",void this.el.body.appendChild(t)}switch(e.rowType){case"banner":this.posterClass=vui.widgets.DynamicLoLBannerPosterBase,this.listNum=1,this.totalCount>this.listNum&&(this.totalCount=this.listNum);break;case"placard":this.posterClass=vui.widgets.DynamicLoLPlacardPosterBase,this.posterPositionWidth=window.vui.ResDef.lol.POSTER_POS_DOUBLE_W,this.listNum=3;break;case"longPoster":this.posterClass=vui.widgets.DynamicLoLLongPosterBase,this.posterPositionWidth=window.vui.ResDef.lol.POSTER_POS_DOUBLE_W,this.listNum=3}this.totalCount>this.listNum?(this.viewAllContainer=document.createElement("div"),this.viewAllContainer.className="ListOfListViewAllContainer",this.el.body.appendChild(this.viewAllContainer),this.viewAll=new vui.widgets.ListOfListViewAll(e.title),this.viewAllContainer.appendChild(this.viewAll.elem),this.attachChild(this.viewAll,this.viewAllContainer),this.selected=1,setTimeout(this.setViewAll.bind(this),0)):this.selected=0,this.createPosters(e)},createCredit:function(e){var t={};return t._type=vui._.aStr(e._type),t.personId=vui._.aStr(e.id),t.firstName=vui._.aStr(e.name),t.posterUrl=portraitBaseUrl+t.personId,t.showCastnCrewLable=!0,t},createPosters:function(e){this.posters=[];for(var t,i=0,s=0;s<this.listNum;s++){e.elements[s]&&(this.posters[i]=new this.posterClass("c_"+i),this.attachChild(this.posters[s],this.el.body),(t=e.elements[s]).posterType=vui._.aStr(e.rowType),t.parentTitle=e.parentTitle,t.uxRowTrackingId=e.uxRowTrackingId,t.uxRowIsPersonal=e.uxRowIsPersonal,this.posters[i].bind(t,i),this.posters[i].elem.style.left=this.posterPositionStart+this.posterPositionWidth*i+"px",i++)}this.endIndex=i},unbind:function(){delete this.data,this.totalCount=0,this.contentIds=[],this.detachAllChildren()},getTitle:function(){return this._rowTitle||""},getRowTitle:function(){return this._rowTitle||""},setTitle:function(e){this.el.title||(this.el.title=document.createElement("div"),this.el.title.className="lolTitle",this.el.header.appendChild(this.el.title)),this._rowTitle=vui._.aStr(e)||"",vui._.innerHTML(this.el.title,this._rowTitle)},setViewAll:function(){this.el.viewAllLabel||(this.el.viewAllLabel=document.createElement("div"),this.el.viewAllLabel.className="lolViewAllLabel",this.el.header.appendChild(this.el.viewAllLabel)),vui._.innerHTML(this.el.viewAllLabel,"1 - "+this.endIndex+" of "+this.totalCount)},viewAllOnAction_:function(){delete this.data.preSelected,this.reportViewAll(),vui.executeOnContainer(this.parentWidget,"viewAllOnAction_",this.ind)},reportViewAll:function(e){var t,i,s=e||"viewall",n=vui.executeOnContainer(this.parentWidget,"getActiveTab"),a=vui.executeOnContainer(this.parentWidget,"getActiveSubTab");n&&a?(n=n.toLowerCase(),a=a.toLowerCase(),t=this.getTitle().toLowerCase(),(i={}).selections=n+":"+a+":"+t+":"+s,i.props={subTab:a,category:t},vui.executeOnContainer(this.parentWidget,"omReport_",i)):n&&(n=n.toLowerCase(),t=this.getTitle().toLowerCase(),(i={}).selections=n+":"+t+":"+s,i.props={category:t},vui.executeOnContainer(this.parentWidget,"omReport_",i))},onDirectionDown:function(){vui.executeOnContainer(this.parentWidget,"setNextRowSelected",{ind:this.ind,selected:this.selected}),vui.executeOnContainer(this.parentWidget,"onDirectionDown");var e=this.ind===this.parentWidget.rows.length-1?[this.ind-1,this.ind]:[this.ind,this.ind+1],t=this.delayedTrackVisibleRows.bind(this);clearTimeout(this.parentWidget.scrollTimeoutTimer),this.parentWidget.scrollTimeoutTimer=setTimeout(function(){t(e),this.parentWidget&&this.parentWidget.scrollTimeoutTimer&&clearTimeout(this.parentWidget.scrollTimeoutTimer)}.bind(this),2e3)},onDirectionUp:function(){vui.executeOnContainer(this.parentWidget,"setPrevRowSelected",{ind:this.ind,selected:this.selected}),vui.executeOnContainer(this.parentWidget,"onDirectionUp");var e=0===this.ind?[this.ind,this.ind+1]:[this.ind,this.ind-1],t=this.delayedTrackVisibleRows.bind(this);clearTimeout(this.parentWidget.scrollTimeoutTimer),this.parentWidget.scrollTimeoutTimer=setTimeout(function(){t(e),this.parentWidget&&this.parentWidget.scrollTimeoutTimer&&clearTimeout(this.parentWidget.scrollTimeoutTimer)}.bind(this),2e3)},delayedTrackVisibleRows:function(e){vui.executeOnContainer(this.parentWidget,"trackVisibleRows",e)}}),vui.widgets.DynamicListOfListBase=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DynamicListOfListBase",Implements:vui.widgets.NavBackDelegate,elemClassName:"ListOfListBase",rows:[],animDuration:400,rowClass:null,width:0,rowHeight:0,visibleHeight:0,init:function(){this.elem.style.width=this.width+"px",this.el.container=document.createElement("div"),this.el.container.className="lolContainer",this.elem.appendChild(this.el.container),this.bposter=new vui.widgets.BlowupGridPoster,this.elem.appendChild(this.bposter.elem),(this.bposter.parentWidget=this).scroller=new vui.widgets.Scroller3,this.elem.appendChild(this.scroller.elem),this.scroller.setList(this)},scrollUp:function(){return 0!=this.selected&&vui.executeOnContainer(this,"onDirectionUp"),!1},scrollDown:function(){this.selected!=this.rows.length-1&&vui.executeOnContainer(this,"onDirectionDown")},bindData:function(e){for(var t=0;t<e.length;t++)this.rows[t].bind(e[t])},bindUI:function(e,t,i){null==t&&(t=0),null==i&&(i=e.length),0===t&&(this.rows=[],this._containerHeight=0);for(var s,n,a=t;a<i;a++){this._createRow(a,e[a]),0==a?this.rows[a].elem.style.top="0":(s=parseInt(this.rows[a-1].elem.style.top,10),n=this.rows[a-1].height||this.rowHeight,this.rows[a].elem.style.top=n+s+"px"),this._containerHeight+=this.rows[a].height}2<e.length?this.scroller.show():this.scroller.hide(),this.el.container.style.height=parseInt(this._containerHeight,10)+"px",this.elem.style.height=this.el.container.style.height},_createRow:function(e,t){switch(vui._.aStr(t.rowType)){case"banner":t.bodyHeight=window.vui.ResDef.lol.BANNER_BODY_H,t.height=window.vui.ResDef.lol.BANNER_ROW_H;break;case"placard":break;case"longPoster":t.bodyHeight=window.vui.ResDef.lol.LONG_BODY_H,t.height=window.vui.ResDef.lol.LONG_ROW_H}this.rows[e]=new this.rowClass(e,t);var i=this.el.container;return this.attachChild(this.rows[e],i),this.rows[e]},getContainerTop:function(){return!0===window.useWebkit?vui._.getTransformY(this.el.container.style.webkitTransform):this.el.container.offsetTop},setContainerTop:function(e){!0===window.useWebkit?(this.el.container.style.webkitTransitionDuration="0ms",this.el.container.style.webkitTransform="translateY("+e+"px)",this.delayBlowup=!0):this.el.container.style.top=e+"px"},onSelectedPoster:function(e){var t,i,s,n;this.animating||(e.parentWidget?(t=this.getContainerTop(),(i=e.parentWidget.elem.offsetTop)+t+(s=e.parentWidget.height)>this.visibleHeight?(n=0-(i+s-this.visibleHeight),this._doAnimate(n,e)):i+t<0&&(vui._.isIndex(e.parentWidget.ind)&&this.rows[e.parentWidget.ind+1]&&(s=this.rows[e.parentWidget.ind+1].height),n=0-i,this._doAnimate(n,e)),vui.executeOnContainer(this.parentWidget,"onSelectedPoster",e)):alert("Error: no parentWidget"))},_doAnimate:function(e,t){var i=function(){"poster"==t.vop?(this.animating=!1,this.drawBlowup(t),this.setSelectable(!0),this.bposter.show()):(this.animating=!1,this.setSelectable(!0),this.bposter.hide()),vui.setBusy(!1)}.bind(this);this.animating=!0;var s=this._getLoLRatio(e);this.scroller.setRatio(s),vui.setBusy(!0),vui._.animY(this.el.container,e,this.animDuration,i)},_getLoLRatio:function(e){var t=parseInt(this.el.container.style.height,10);return this.visibeHeight>t?t=this.visibleHeight:t-=this.visibleHeight,(0-e)/t},drawBlowup:function(e){var t,i,s;this.animating||(this.pos=this.elem.getPosition(),t=e.elem.getPosition(),i=this.bposter,this.bposter.setSize(e.blowWidth,e.blowHeight,e.hideGlow),s=e.blowUpPaddingTop||window.vui.ResDef.lol.LONG_POSTER_BLOW_PADDING_T,i.bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+s+"px",i.show())},onDeselectedPoster:function(){this.bposter.unbind()},setNextRowSelected:function(e){var t=e.ind,i=e.selected,s=t+1;this.rows[s]&&(i=this._findNextSelected(t,s,i),this.rows[s].children&&i<this.rows[s].children.length?this.rows[s].selected=i:this.rows[s].children&&0<this.rows[s].children.length&&(this.rows[s].selected=this.rows[s].children.length-1))},setPrevRowSelected:function(e){var t=e.ind,i=e.selected,s=t-1;this.rows[s]&&(i=this._findNextSelected(t,s,i),this.rows[s].children&&i<this.rows[s].children.length?this.rows[s].selected=i:this.rows[s].children&&0<this.rows[s].children.length&&(this.rows[s].selected=this.rows[s].children.length-1))},_findNextSelected:function(e,t,i){return this.rows[e]&&this.rows[t]&&(this.rows[e].viewAll&&!this.rows[t].viewAll?--i<0&&(i=0):!this.rows[e].viewAll&&this.rows[t].viewAll&&i++),i},getItemSelected:function(e){return this.rows[e]&&this.rows[e].selected||0},setItemSelected:function(e,t){this.rows[e]&&(this.rows[e].selected=t)},getState:function(){var e={};return e.row=this.selected||0,e.item=this.getItemSelected(e.row)||0,e.containerTop=this.getContainerTop()||0,e.scrollerRatio=this.scroller.getRatio(),e},restoreState:function(e){this.setContainerTop(e.containerTop),this.selected=e.row,this.setItemSelected(e.row,e.item),this.scroller.setRatio(e.scrollerRatio)},reset:function(){this.scroller.setRatio(0),this.setContainerTop(0),delete this.selected,this.detachAllChildren(),this.rows=[]},hide:function(){this.scroller.hide(),this.parent.apply(this,arguments)},show:function(){this.scroller.show(),this.parent.apply(this,arguments)},onDirectionRight:function(){var e,t=vui.getSelected();t&&t.parentWidget&&t.parentWidget.viewAll&&this.viewAllOnAction_&&(e=t.parentWidget.ind,this.rows&&this.rows[e]&&this.rows[e].data&&(this.rows[e].data.rowType&&"placard"===this.rows[e].data.rowType?this.rows[e].data.preSelected=3:this.rows[e].data.preSelected=5),this.rows[e].reportViewAll("right"),this.viewAllOnAction_(t.parentWidget.ind))}}),vui.DynamicUxRowList=new Class({Extends:vui.DynamicList,name:"vui.DynamicUxRowList",uxRowId:null,listElement:"uxElement",uxRow:null,initialize:function(e){this.uxRowId=e.uxRowId,e.rowType&&(this.rowType=e.rowType),e.rowFilterType&&(this.rowFilterType=e.rowFilterType),e.label&&(this.label=e.label),e.queryService||(e.queryService=vui.getModel()),e.batchSize=50,this.defaultFilters=e.defaultFilters||{},this.filters=e.filters,this.parent.apply(this,arguments)},getQuery:function(e,t){var i={_type:"uxElementSearch"};return i.offset=e,i.count=t,i.uxRowId=this.uxRowId,this.rowFilterType&&-1<this.rowFilterType.indexOf("levelTwoFilter")&&(this.defaultFilters={sortBy:"streamScore"}),this.addFilters(i,this.defaultFilters),this.addFilters(i,this.filters),JSON.parse(JSON.stringify(i))},addFilters:function(e,t){for(var i in t=t||{}){var s=t[i],n=vuiFilters.getQueryFilters(i,s)||{};for(var a in n){var o=n[a];""!=o&&$defined(o)?e[a]=o:delete e[a]}}},getFilterValue:function(e){return this.filters[e]||this.getDefaultFilterValue(e)},getDefaultFilterValue:function(e){return this.defaultFilters[e]},getAllFilters:function(){var e={};if(this.defaultFilters)for(var t in this.defaultFilters)e[t]=this.defaultFilters[t];if(this.filters)for(var t in this.filters)e[t]=this.filters[t];return e},getSortOrder:function(){return vui.SortFilter.getQueryFilters(this.getFilterValue("sortBy")).sortBy},getSortName:function(){return vui.SortFilter.getDisplayName(this.getFilterValue("sortBy"))},getNewWindowStart:function(e){return e},getNewWindowEnd:function(e){return e+this.batchSize-1},doInit:function(t){var e=function(e){e&&(e.rowFilterType&&(this.rowFilterType=e.rowFilterType[0]),this.rowFilterType&&e.rowContentType&&(this.rowFilterType+=e.rowContentType[0]),e.hasBackgroundImage&&e.hasBackgroundImage[0]&&"true"===e.hasBackgroundImage[0]&&(this.backgroundUrlPath=vui.m.getBackgroundUrlFromRowId(vui._.aStr(e.uxRowId))),this.rowType=e.rowType[0],this.label=e.label[0],this.initialized=!0),t()}.bind(this);vui.m.personalizedCache.getUxRow(this.uxRowId,e)},_get:function(e){if(!vui._.isIndex(e))return null;var t=this.totalCount;if(t&&t-1<e)return null;var i=Math.floor(this.batchSize/5),s=this.windowStart;-1<this.availStart&&this.availStart<s&&(s=this.availStart);var n,a=Math.max(this.windowEnd,this.availEnd);return e<s+i+1&&0!=s?(n=Math.max(s-this.batchSize,0),vui._.debounce(this._doQuery(n),300)):a-i+1<e&&a!=t-1&&(n=a+1,vui._.debounce(this._doQuery(n),300)),this.data[e]?(this.data[e].posterType=this.rowType,this.data[e]):null}}),vui.widgets.PersonalizedRow=new Class({Extends:vui.widgets.DynamicListOfListRowBase,name:"vui.widgets.PersonalizedRow",elemClassName:"PersonalizedRow",headerHeight:window.vui.ResDef.recom.HEADER_H,width:window.vui.ResDef.recom.ROW_W,height:window.vui.ResDef.recom.ROW_H,bodyHeight:window.vui.ResDef.recom.BODY_H,marginTop:window.vui.ResDef.recom.MARGIN_T,bindData:function(e,t){this.Rowdata=e,this.setTitle(vui._.aStr(e.label)),this.ribbonSearchParam=null;var i=e.elements&&e.elements[0]&&e.elements[0].uxElement,s=e.elements&&e.elements[0]&&vui._.aStr(e.elements[0].totalCount)||i.length;this.bind({elements:i,totalCount:parseInt(s,10),rowType:vui._.aStr(e.rowType),rowId:vui._.aStr(e.uxRowId),parentTitle:e.parentTitle,uxRowTrackingId:vui._.aStr(e.trackingId)||null,uxRowIsPersonal:"true"===vui._.aStr(e.isPersonal)})},getRibbonSearchParam:function(){return this.ribbonSearchParam}}),vui.widgets.PersonalizedLoL=new Class({Extends:vui.widgets.DynamicListOfListBase,name:"vui.widgets.PersonalizedLoL",elemClassName:"PersonalizedLoL",width:window.vui.ResDef.recom.ROW_W,rowClass:vui.widgets.PersonalizedRow,rowHeight:window.vui.ResDef.recom.ROW_H,visibleHeight:2*window.vui.ResDef.recom.ROW_H,firstProgressiveLoadCount:3,progressiveLoadCount:10,_start:0,visibleRowsInLoL:[],scrollTimeoutTimer:null,init:function(e){e=e||{},this.parent.apply(this,e),e.state&&e.state.lol&&"number"==typeof e.state.lol.row&&(this.firstProgressiveLoadCount=e.state.lol.row+1)},bind:function(e,t){this._model=e,this._start=0,this._parentTitle=vui.executeOnContainer(this.parentWidget,"getTitle")||"",this._bindProgressive()},_bindProgressive:function(){var e=0===this._start?Math.min(this.firstProgressiveLoadCount+this._start,this._model.length):Math.min(this.progressiveLoadCount+this._start,this._model.length);this.bindUI(this._model,this._start,e);for(var t=this._start;t<e;t++)this.rows[t]?(this._model[t].parentTitle=this._parentTitle,this.rows[t].bindData(this._model[t])):alert("no rows???");e<this._model.length&&(this._start=e,this._progressiveTimer=setTimeout(function(){this._bindProgressive(),this._progressiveTimer=null}.bind(this),100))},onDetached:function(){this._progressiveTimer&&clearTimeout(this._progressiveTimer)},viewAllOnAction_:function(e){this.rows[e].data.searchParams&&(this.rows[e].data.query=this.rows[e].data.searchParams);var t,i,s,n=vui.executeOnContainer(this.parentWidget,"getTitle"),a=vui.executeOnContainer(this.parentWidget,"getMainTab");"uxRow"===this.rows[e].Rowdata._type?(t={name:"uxRow",uxRowId:this.rows[e].data.rowId,parentTitle:n},this.parentWidget.currentReportText?t.currentReportText=this.parentWidget.currentReportText:t.currentReportText=(vui.executeOnContainer(this.parentWidget,"getReportText")+":"+(this.rows[e].Rowdata.label?this.rows[e].Rowdata.label:"")).toLowerCase(),this.rows[e].data.preSelected&&(t.preSelected=this.rows[e].data.preSelected),this.rows[e].Rowdata.hasBackgroundImage&&"true"===this.rows[e].Rowdata.hasBackgroundImage[0]&&(t.backgroundUrlPath=vui.m.getBackgroundUrlFromRowId(this.rows[e].Rowdata.uxRowId[0])),vuiFilters.hasSortAndOrFilter()&&(i=vuiFilters.getCurrentFilters(),t.state=t.state||{},t.state.filters=i),s=null,this.rows[e].Rowdata.rowFilterType&&(s=this.rows[e].Rowdata.rowFilterType[0]),s&&this.rows[e].Rowdata.rowContentType&&(s+=this.rows[e].Rowdata.rowContentType[0]),s&&(t.rowFilterType=s),t.mainTab=a,t.uxRowTrackingId=vui._.aStr(this.rows[e].Rowdata.trackingId)||null,t.uxRowIsPersonal="true"===vui._.aStr(this.rows[e].Rowdata.isPersonal),controller.goToPage("PersonalizedShowcase",t)):controller.goToPage("Showcase",this.rows[e].data)},trackVisibleRows:function(e){var t;if(this.visibleRowsInLoL&&this.rows&&0<this.rows.length){this._updateVisibleRows(e);for(var i=0;i<this.visibleRowsInLoL.length;i++)this.visibleRowsInLoL[i].rowTracked||((t=this.rows[this.visibleRowsInLoL[i].rowIndex])&&this._omTrackVisibleRow(t.Rowdata),this.visibleRowsInLoL[i].rowTracked=!0)}},_omTrackVisibleRow:function(e){var t;e.trackingId&&(t={rowId:e.trackingId+("true"===vui._.aStr(e.isPersonal)?vui.analytics.zapApiIsPersonalText:"")},vui.analytics.trackEvar(t,{events:"event207"}))},_isRowTracked:function(e){if(this.visibleRowsInLoL&&0<this.visibleRowsInLoL.length){for(var t=0;t<this.visibleRowsInLoL.length;t++)if(this.visibleRowsInLoL[t].rowIndex===e)return this.visibleRowsInLoL[t].rowTracked;return!1}return!1},_updateVisibleRows:function(e){var t=[],i=null;if(e)for(var s=0;s<e.length;s++)(i={}).rowIndex=e[s],i.rowTracked=this._isRowTracked(e[s]),t.push(i);this.visibleRowsInLoL=t},_getVisibleRowIndexesForContainer:function(e){var t,i=0,s=[];if(this.parentWidget&&this.parentWidget.elem&&(t=this.parentWidget.elem.querySelector("."+e)))for(var n=0;n<this.rows.length;n++){if((i+=this.rows[n].height)>=t.clientHeight)return s;s.push(this.rows[n].ind)}},reset:function(){this.parent(),this.visibleRowsInLoL=[],this.scrollTimeoutTimer&&clearTimeout(this.scrollTimeoutTimer)}}),vui.widgets.PersonalizedGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.PersonalizedGridList",posterClass:vui.widgets.DynamicLoLPosterBase,settings:{normal:{columns:5,rows:2}},columns:5,rows:2,currentStart:0,partialRow:!1,init:function(e){e=e||{},this.parent(e),this.totalCount=null},getMovieListModel:function(e){this.currentStart=0,this.params.state&&0<=this.params.state.scrollOffset&&(this.currentStart=this.params.state.scrollOffset);var t={name:this.listName,uxRowId:this.params.uxRowId,callback:e,currentStart:this.currentStart,numVisible:this.numVisible,filters:this.params.filters};return this.movieListModel&&this.movieListModel.uxRowId==this.params.uxRowId&&this.movieListModel.rowType&&(t.rowType=this.movieListModel.rowType,t.rowFilterType=this.movieListModel.rowFilterType,t.label=this.movieListModel.label),this.params.rowFilterType&&(t.rowFilterType=this.params.rowFilterType,vuiFilters.setCurrentFilterType(t.rowFilterType),t.filters=vuiFilters.getCurrentFilters()),vui.m.getUxRowList(t)},refreshList:function(e){this.totalCount=e.length,0===e.length?(this.setSelectable(!1),this.parentWidget.setSelectable(!1),this.parentWidget.parentWidget.setSelectable(!1)):(this.setSelectable(!0),this.parentWidget.setSelectable(!0),this.parentWidget.parentWidget.setSelectable(!0)),this.movieListModel={data:e,numVisible:4,totalCount:e.length,get:function(e){return this.data[e]}},this.update(),this.totalCount>this.numVisible?this.parentWidget.scroller.show():this.parentWidget.scroller.hide()},select:function(){this.parent.apply(this,arguments)},addWidgetsAfterLoaded:function(){switch(this.movieListModel.rowType){case"banner":this.posterClass=vui.widgets.DynamicLoLBannerPosterBase,this.columns=1;break;case"placard":this.posterClass=vui.widgets.DynamicLoLPlacardPosterBase,this.columns=3;break;case"longPoster":this.posterClass=vui.widgets.DynamicLoLLongPosterBase,this.columns=3;break;default:this.posterClass=vui.widgets.DynamicLoLPosterBase,this.columns=5}this.layout={type:"vertical",cols:this.columns},this.settings={wide:{columns:this.columns+2},normal:{columns:this.columns,rows:this.rows}},this.numVisible=this.columns*this.rows,this.addWidgets(this.el.bar),this._layoutPosters()}}),vui.widgets.PersonalizedPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.PersonalizedGridList,elemClassName:"CoVuduPosterGrid",init:function(){this.el.myTitle=document.createElement("div"),this.el.myTitle.className="CollectionPosterGridTitle",this.elem.appendChild(this.el.myTitle),this.parent.apply(this,arguments)},setTitle:function(e){var t=e;vuiFilters.hasFilter()&&(t+=vui.strings.getText("FILTER_RESULT_TITLE_FILTERED_SUFFIX")),this.el.myTitle.innerHTML=t},onBack:function(){"vui.pages.PersonalizedShowcase"===controller.baseLayer.currentPage.name?controller.goBack():vui.executeOnContainer(this.parentWidget,"onDirectionUp")},hideTitle:function(){this.el.myTitle.style.display="none"},showTitle:function(){this.el.myTitle.style.display="block"},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"isSortHidden")?controller.goBack():vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},focusSortControl:function(){this.list.movieListModel.data&&0===Object.keys(this.list.movieListModel.data).length&&this.onDirectionLeft()},drawBlowup:function(e){this.pos=this.elem.getPosition();var t=e.elem.getPosition(),i=this.bposter;i.bind(e.data),this.bposter.setSize(e.blowWidth,e.blowHeight,e.hideGlow);var s=e.blowUpPaddingTop||window.vui.ResDef.lol.LONG_POSTER_BLOW_PADDING_T;i.bind(e.data),i.elem.style.left=t.x-this.pos.x+(e.width-i.width)/2+"px",i.elem.style.top=t.y-this.pos.y+(e.height-i.height)/2+s+"px",i.show()},listDataReceived:function(e){this.showTitle(),vui.executeOnContainer(this.parentWidget,"onGotFilterType",e.rowFilterType),this.setTitle(e.label),this.parent(e)},select:function(){this.parent.apply(this,arguments)}}),vui.widgets.PersonalizedVuduSort=new Class({Extends:vui.widgets.VuduSort,name:"vui.widgets.PersonalizedVuduSort",elemClassName:"CoVuduSort"}),vui.widgets.PersonalizedSortGrid=new Class({Extends:vui.widgets.VuduSortGrid,elemClassName:"CoSortGrid",sortClass:vui.widgets.PersonalizedVuduSort,gridClass:vui.widgets.PersonalizedPosterGrid,init:function(){this.parent.apply(this,arguments)},show:function(e){this.grid.show(e)},setGridParams:function(e){this.grid.list.params=e},changeFilters:function(){vui.executeOnContainer(this.parentWidget,"changeFilters")},isSortHidden:function(){return!!this.sort.hideFilter},setList:function(e){this.params=e,this.grid.setList(e)},focusSortControl:function(){this.grid.focusSortControl()},onBack:function(){"PersonalizedShowcase"===controller.baseLayer.currentPage.pageTitle&&controller.goBack()},hideTitle:function(){this.grid.hideTitle()},showTitle:function(){this.grid.showTitle()},setTitle:function(e){this.grid.setTitle(e)},omClearAll:function(){var e,t={linkType:"lnk_o",events:"event23"},i="",s=vuiFilters.getCurrentFilterNames(),n="";controller.baseLayer.currentPage&&((e=controller.baseLayer.currentPage).activeTab&&"movies"===e.activeTab.toLowerCase()?(i="clearall:mymovie",t.linkName="moviefilter"):e.activeTab&&"tv"===e.activeTab.toLowerCase()&&(i="clearall:mytv",t.linkName="tvfilter")),Object.keys(s).forEach(function(e){n+=e+"="+s[e].toString()+"|"}),n=n.slice(0,-1);var a={};a.filters=i,0<n.length&&(a.sortFilterCombo=n),vui.analytics.trackEvar(a,t)}}),vui.widgets.PersonalizedView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.PersonalizedView",elemClassName:"PersonalizedView",sortGridClass:vui.widgets.PersonalizedSortGrid,Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate,vui.OmnitureReportGlue],init:function(e){this.el.container=document.createElement("div"),this.el.container.className="PersonalizedViewContainer",this.elem.appendChild(this.el.container);var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.el.container.appendChild(t.elem),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.hide(),this.attachChild(this.movieInfoPanel,this.el.container),this.lol=new vui.widgets.PersonalizedLoL(e),this.attachChild(this.lol,this.el.container)},show:function(e){var t;this.params=e||{},this.params.element&&"page"===vui._.aStr(this.params.element.elementType)?(this._displayLoL(e),this.params.ribbonSearchParam&&this.reportShowcase()):(t={uxRowId:e.element.uxElementId[0]},this._displayGrid(t),this.reportCollection()),this.showSampleAd()},showSampleAd:function(e){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad(e)},reportShowcase:function(){var e={evars:{channel:"promotions"}};vui.analytics.trackPage("showcase page : multiple list",e)},reportCollection:function(){var e="showcase page : single list:collection",t="";"customList"==this.params.listType&&(t=vui._.aStr(this.params.title));var i={};t?(t=e+":"+vui._.toLower(t),i.props={collectionProp:t},i.evars={browseType:t}):i.evars={browseType:e},vui.analytics.trackPage(e,i)},_bindLoL:function(e,t){this._showLoLUI(),this.lol.reset(),this.lol.bind(t)},_displayLoL:function(e){var t=vui._.aStr(e.element.uxElementId),i=function(e){e||controller.goBack(),this._bindLoL(t,e.data),this.showSampleAd(vui.m.getAdUrlFromPageId(t))}.bind(this);vui.m.personalizedCache.getUxPage(t,i)},_setUiPageBG:function(e){this.bar&&"block"===this.bar.elem.style.display||(this.uiPageBGImage.src=e,this.uiPageBGImage.style.display="block")},_showLoLUI:function(){this.sortGrid&&(this.sortGrid.hide(),this.sortGrid.setSelectable(!1)),this.movieInfoPanel.elem.removeClass("gridView"),this.hideSortCue(),this.lol.elem.style.display="block",this.lol.setSelectable(!0)},_deleteState:function(e){delete this._states[e];var t=!1;for(var i in this._states){t=!0;break}t||delete this.params.state},_preSelect:function(e){0<e&&(this.sortGrid.grid.list.selected=e,this.sortGrid.grid.list.children&&this.sortGrid.grid.list.children[e])?vui.select(this.sortGrid.grid.list.children[e]):this.bar&&this.bar.elem&&"none"!==this.bar.elem.style.display||void 0!==e&&vui.select(this.sortGrid)},_displayGrid:function(e){this.lol.reset(),this.lol.elem.style.display="none",this.lol.setSelectable(!1),this.sortGrid||(this.sortGrid=new vui.widgets.PersonalizedSortGrid,this.sortGrid.hideTitle(),this.sortGrid.elem.className="PersonalizedSortGrid",this.attachChild(this.sortGrid,this.el.container)),this.sortGrid.onBack=function(){vui.executeOnContainer(this.parentWidget,"onDirectionUp")}.bind(this.sortGrid),this.sortGrid.selected=1,this.movieInfoPanel.elem.addClass("gridView"),this.sortGrid.elem.style.display="block",this.defaultSort(),this.sortGrid.setSelectable(!1),e.state&&e.state.filters&&(e.filters=e.state.filters),vuiFilters.hasSortAndOrFilter()||vuiFilters.getCurrentFilterType()||e.state&&e.state.filters?(this.shouldShowFilter=!0,this.resetFiltersOnFilterType=!1):(delete this.shouldShowFilter,this.resetFiltersOnFilterType=!0);var t=vuiFilters.getCurrentFilters();t&&(e.filters=t),this.sortGrid.setList(e),this.sortGrid.grid.resetSelector(),this.sortGrid.params.state=null,this.sortGrid.params.scrollOffset=0},_filterGrid:function(e){this.isFiltering=!0;var t=this.sortGrid.params;t.filters=e,this.sortGrid.setList(t),this.sortGrid.firstTimeAnimate=!0},changeFilters:function(){var e=vuiFilters.getCurrentFilters();this._filterGrid(e)},onGotListLength:function(e){if(this.isFiltering)return delete this.isFiltering,void(this.resetFiltersOnFilterType=!1);0!==e?(this.sortGrid.setSelectable(!0),this.params.state&&this.params.state.savedSelection&&(this.params.savedSelection=this.params.state.savedSelection),this.params.savedSelection&&vui.restoreSelectorPosition(this,this.params.savedSelection),(vuiFilters.hasSortAndOrFilter()||40<e||!0===this.shouldShowFilter)&&vuiFilters.getCurrentFilterType()&&!this.forceDisabled?this.enableSort():this.disableSort(),vui.setSelectorVisible(!0),this._preSelect(this._preSelectedPoster),delete this._preSelectedPoster):!vuiFilters.hasSortAndOrFilter()&&!0!==this.shouldShowFilter||!vuiFilters.getCurrentFilterType()||this.forceDisabled?(this.disableSort(),this.sortGrid.selectable=!1):(this.enableSort(),this.sortGrid.selectable=!0,this.el.sortCue.selectable=!0)},onGotFilterType:function(e){vuiFilters.setCurrentFilterType(e),this.resetFiltersOnFilterType&&!this.isFiltering&&vuiFilters.resetCurrentFilters(),this.sortGrid.sort.refresh()},save:function(){var e={};return e.state=this.saveState(),e.pageId=this.params.pageId,e.query=this.params.query,e.title=this.params.title,e.parentTitle=this.params.parentTitle,e.headerUrl=this.params.headerUrl||null,e.ribbonSearchParam=this.params.ribbonSearchParam,e},defaultSort:function(){this.hideSort_(),this.hideSortCue()},showSort_:function(){this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue()},hideSort_:function(){this.sortGrid&&this.sortGrid.hideSort()},disableSort:function(){this.hideSort_(),this.sortGrid&&(this.sortGrid.sort.setSelectable(!1),this.sortGrid.sort.hideFilter=!0),this.hideSortCue(),this._noSort=!0},forceDisableSort:function(){this.disableSort(),this.forceDisabled=!0},enableSort:function(){this.hideSort_(),this.sortGrid&&(this.sortGrid.sort.setSelectable(!0),this.sortGrid.sort.hideFilter=!1),delete this._noSort,this.showSortCue()},showSortCue:function(){this._noSort?this.hideSortCue():(vuiFilters.hasFilter()?(this.sortGrid.sort.selectable=!1,this.el.sortCue.setActive()):this.el.sortCue.setDefault(),this.el.sortCue.show())},hideSortCue:function(){this.el.sortCue.hide(),this.el.sortCue.selectable=!1},showPanel:function(){this.movieInfoPanel.elem.removeClass("offscreen")},hidePanel:function(){this.movieInfoPanel.elem.addClass("offscreen")}}),vui.widgets.PersonalizedTabbedView=new Class({Extends:vui.widgets.PersonalizedView,name:"vui.widgets.PersonalizedTabbedView",elemClassName:"PersonalizedTabbedView",el:{},items:{},itemWidth:0,marginLeftRight:2,selectedInd:null,init:function(e){vui.getModel().isAlivePosterBaseUrl();for(var t,i=(this.params=e).subtabs,s=i.map(function(e){var t=vui._.aStr(e.element);return{title:vui._.aStr(e.label),listOrGrid:t&&"page"===vui._.aStr(t.elementType)?"list":"grid",element:t}}),n=0;n<i.length;n++)if(i[n].isDefault){t=n;break}this._populateSubTabs(e,s),this.parent(e),e&&e.state&&e.state.selectedInd?this.subTab.initSelect(e.state.selectedInd):this.subTab.initSelect(t||0)},_populateSubTabs:function(e,t){this.subTab=new vui.widgets.SubTab(t),this.attachChild(this.subTab)},show:function(e){this.params=e||{}},_show:function(e,t){var i=this.subTab.getListOrGrid(e);"list"==i?this._showLoL(e,t):"grid"==i?this._displayGrid(e,t):alert("Error: should have list or grid")},_displayGrid:function(e,t){this.selectedInd=e;var i=this.subTab.getSubTabData(e).uxElementId[0];t&&t(vui.m.getAdUrlFromRowId(i));var s=this.params.state&&this.params.state.gridState;delete this.params.state;var n=vui.m.getFilterTypeFromUxRowId(i);this.parent({name:"uxRow",uxRowId:i,rowFilterType:n,state:s})},_showLoL:function(t,i){this.lol.reset();var e=this.subTab.getSubTabData(t),s=e&&vui._.aStr(e.uxElementId),n=function(e){this.selectedInd=t,e&&this.subTab.selectedInd==t?(this._bindLoL(e.data),i&&i(vui.m.getAdUrlFromPageId(s))):alert("No UxPage")}.bind(this);vui.m.personalizedCache.getUxPage(s,n)},_bindLoL:function(e){var t;e&&0<e.length?this.lol.bind(e,this.selectedInd):(alert("no Featured data"),this.lol.hide()),this.params&&this.params.state&&((t=this.params.state).lol&&(this.subTab.setDeselectedState(this.selectedInd),this.lol.restoreState(t.lol)),this.params.isDeeplinking&&(vui.restoreSelectorPosition(controller.baseLayer.currentPage,[{modelIndex:1,visibleViewIndex:1},{modelIndex:0,visibleViewIndex:0},{modelIndex:0,visibleViewIndex:0},{modelIndex:this.params.state.selectedInd,visibleViewIndex:this.params.state.selectedInd}]),params.isDeeplinking=null),delete this.params.state),this._showLoLUI(),this.lol.scrollTimeoutTimer=setTimeout(function(){var e=this.lol._getVisibleRowIndexesForContainer(this.el.container.className);this.lol.trackVisibleRows(e),clearTimeout(this.lol.scrollTimeoutTimer)}.bind(this),2e3)},getTitle:function(){return this.subTab?this.params.title+" - "+this.subTab.getSelectedName():""},getMainTab:function(){return this.params&&this.params.title?this.params.title:""},saveState:function(){var e={};return this.lol&&(e.lol=this.lol.getState()),this.sortGrid&&(e.gridState=this.sortGrid.saveState(),e.gridState.currentFilterType=vuiFilters.getCurrentFilterType()),e.selectedInd=this.selectedInd,e},buttonOnAction:function(e){},buttonOnSelect:function(e){this.selectedGid=e,this._getButtonPosition(this.items[e].elem)},posterOnAction:function(e){vui._.posterOnAction(e)},onSelectedSubTab:function(e){var t;e!==this.selectedInd&&(t=function(e){this.showSampleAd(e)}.bind(this),this._show(e,t))},showSampleAd:function(e){var t;!this.movieInfoPanel||((t=vui.getSelected()||{}).model||t.data)&&this.movieInfoPanel.show_sample_ad(e)},getActiveSubTab:function(){return this.subTab.getSelectedName()||null}}),vui.StaticRecommendedList=new Class({initialize:function(l){this.data=[];var e={_type:"contentSearch"},u=vui.m.recommendedCache.getContentIdsByTasteId(l.tasteId);e.contentId=u,e.followup=["uxPromoTags","episodeNumberInSeason","seasonNumber"],vui.getModel().avodManager.addAvodEnabledFollowup(e),e.responseSubset="micro",vui.m.doQuery(e,function(e,t,i){if(t==vui.m.queryStatus.ST_SUCCESS){if(!(i.content&&0<i.content.length))return void alert("content search getContentIdsByTasteId error");for(var s=i.content,n={},a=0;a<u.length;a++){var o=vui._.aStr(s[a].contentId);o&&(n[o]=s[a])}var r=0;this.data=[];for(a=0;a<u.length;a++)n[u[a]]?(this.data[r]=n[u[a]],r++):alert("Error: contentSearch didnt return contentId");this.totalCount=this.data.length,this.realTotalCount=this.data.length,l.callback(this,0,this.realTotalCount)}else callback(null),alert("ERROR: StaticRecommendedList")}.bind(this),{onTimeout:vui.m.QueryOptions.RETRY})},get:function(e){return this.data[e]},length:function(){return this.totalCount||0},setListener:function(e){this.listener=e}}),vui.widgets.RecommendedRow=new Class({Extends:vui.widgets.ListOfListRowBase,name:"vui.widgets.RecommendedRow",elemClassName:"RecommendedRow",headerHeight:window.vui.ResDef.recom.HEADER_H,width:window.vui.ResDef.recom.ROW_W,height:window.vui.ResDef.recom.ROW_H,bodyHeight:window.vui.ResDef.recom.BODY_H,marginTop:window.vui.ResDef.recom.MARGIN_T,bind:function(e){e.totalCount=e.totalCountInTaste&&e.totalCountInTaste[0]||0,this.parent(e),this.setTitle(e.title||""),this.setViewAll()}}),vui.widgets.RecommendedLoL=new Class({Extends:vui.widgets.ListOfListBase,name:"vui.widgets.RecommendedLoL",elemClassName:"RecommendedLoL",width:window.vui.ResDef.recom.ROW_W,rowClass:vui.widgets.RecommendedRow,rowHeight:window.vui.ResDef.recom.ROW_H,visibleHeight:2*window.vui.ResDef.recom.ROW_H,init:function(){this.parent.apply(this,arguments)},bind:function(e){this.parent(e)},viewAllOnAction_:function(e){var t={};t.tasteId=this.rows[e].data.tasteId&&this.rows[e].data.tasteId[0]||null,t.tasteId?(t.title=this.rows[e].data.title&&this.rows[e].data.title[0]||"",t.preSelected=this.rows[e].data.preSelected||null,controller.goToPage("RecommendedViewAll",t)):alert("recommended view all no tasteId")}}),vui.widgets.RecommendedView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.RecommendedView",Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate,vui.OmnitureReportGlue],elemClassName:"RecommendedView",el:{},items:{},itemWidth:0,marginLeftRight:2,init:function(e){this.lol=new vui.widgets.RecommendedLoL,this.attachChild(this.lol),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel)},showNoDataMessage:function(){var e="You need to sign in or sign up to see personalized recommendations.";this.noDataMsg?this.noDataMsg.setTitle(e):(this.noDataMsg=new vui.widgets.NoDataMessage(e),this.attachChild(this.noDataMsg)),vui._.setAriaLabel(e)},show:function(e){vui.getModel().isAlivePosterBaseUrl(),this.lol.reset();var t,i=vui.getModel().recommendedCache;i&&i.data&&0<i.data.length?(this.setSelectable(!0),this.lol.bindUI(i.data),this.lol.bindData(i.data),this.lol.show()):(alert("no recommended data"),this.lol.hide(),this.setSelectable(!1),vui.account.getAccountId()||this.showNoDataMessage()),e&&e.state&&e.state&&((t=e.state).lol&&this.lol.restoreState(t.lol),this.lol.show()),this.showSampleAd()},hide:function(){},saveState:function(){var e={};return e.lol=this.lol.getState(),e},buttonOnSelect:function(e){this.selectedGid=e,this._getButtonPosition(this.items[e].elem)},posterOnAction:function(e){vui._.posterOnAction(e)},showSampleAd:function(){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad()},getActiveSubTab:function(){return null}});var categoryArray=["MOOD","PLOT","PRAISE","STYLE","TIME-PERIOD","PLACE","ATTITUDES","AUDIENCE","BASED ON","FLAG","GENRES","HUMOR","KEYWORDS","LOOK","SCORE"],categoryArrayMap={MOOD:{displayName:"MOOD",shortName:"M",description:vui.strings.getText("DISCOVER_CATEGORY_MOOD")},PLOT:{displayName:"PLOT",shortName:"Sy",description:vui.strings.getText("DISCOVER_CATEGORY_STORY")},PRAISE:{displayName:"ACCLAIM",shortName:"Ac",description:vui.strings.getText("DISCOVER_CATEGORY_PRAISE")},STYLE:{displayName:"STYLE",shortName:"St",description:vui.strings.getText("DISCOVER_CATEGORY_STYLE")},"TIME-PERIOD":{displayName:"ERA",shortName:"Er",description:vui.strings.getText("DISCOVER_CATEGORY_ERA")},PLACE:{displayName:"PLACE",shortName:"Pl",description:""},ATTITUDES:{displayName:"ATTITUDES",shortName:"At",description:""},AUDIENCE:{displayName:"AUDIENCE",shortName:"Au",description:""},"BASED ON":{displayName:"BASED ON",shortName:"B",description:""},FLAG:{displayName:"FLAG",shortName:"Fl",description:""},GENRES:{displayName:"GENRES",shortName:"Gn",description:""},HUMOR:{displayName:"HUMOR",shortName:"Hu",description:""},KEYWORDS:{displayName:"KEYWORDS",shortName:"Ke",description:""},LOOK:{displayName:"LOOK",shortName:"Lo",description:""},SCORE:{displayName:"SCORE",shortName:"Sc",description:""}};vui.widgets.DiscoveryGenes=new Class({Extends:vui.widgets.ImageActionButton,init:function(e,t){(e=e||{}).imgSrc=vui.images.button_size20,e.elemClassName="discover_gene imageActionButton",e.defaultClassName="btn_bg_size20_default",e.selectClassName="btn_bg_size20_select";var i=e.label[0];this.geneName=e.label,18<i.length&&(i=i.substring(0,18)+"..."),e.label=i,this.parent(e),this.label.className=this.label.className+" fontWhite18",this.elem.style.top=t+"px",this.geneId=e.geneId,this.elem.style.top=e.topPos+"px",this.indexPos=e.index,this.totalGenes=e.totalGenes},bind:function(){},onAction:function(){vui.executeOnContainer(this.parentWidget,"selectGene",{geneId:this.geneId,geneName:this.geneName})},onDirectionUp:function(){0==this.indexPos||vui.executeOnContainer(this.parentWidget,"onDirectionUp")},onDirectionDown:function(){this.indexPos==this.totalGenes-1||vui.executeOnContainer(this.parentWidget,"onDirectionDown")},onDirectionLeft:function(){},onDirectionRight:function(){}}),vui.widgets.DiscoveryGenesWidget=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DiscoveryGenesWidget",init:function(e){this.elem.style.background="url('"+vui.images.subway_genes_bg+"') 0 0 no-repeat #000000",this.elem.className="discovery_genes_widget opacity95",this.categoryInfo=new vui.widgets.DiscoveryRoute({doNotApplyDefaultClassName:!0}),this.categoryInfo.setIcon(vui.images.discovery_visited_stop_img),this.categoryInfo.imgSrc="",this.attachChild(this.categoryInfo),this.categoryInfo.selectable=!1},bind:function(e){e=e||{};if(this.currentCategoryIndex=e.currentCategoryIndex,this.categoryIndexPos=e.categoryIndexPos,this.categoryTopPos=e.categoryTopPos,this.categoryInfo.bind({categoryIndex:this.currentCategoryIndex}),e&&e.genes){this.genesWidgets=[];for(var t=2*window.vui.ResDef.discovery.GENE_WIDGET_HEIGHT,i=0;i<e.genes.length;i++){var s,n={};e.selectedGenes&&0<=e.selectedGenes.indexOf(e.genes[i].geneId)||(n.label=e.genes[i].geneName,n.index=i,n.geneId=e.genes[i].geneId,n.topPos=t,n.totalGenes=e.genes.length,s=new vui.widgets.DiscoveryGenes(n),this.genesWidgets.push(s),this.attachChild(s),t+=window.vui.ResDef.discovery.GENE_WIDGET_HEIGHT)}var a=window.vui.ResDef.discovery.GENE_WIDGET_HEIGHT*e.genes.length+2*window.vui.ResDef.discovery.GENE_WIDGET_HEIGHT;a<window.vui.ResDef.discovery.ROUTE_WIDGET_CONTAINER_HEIGHT&&(a=window.vui.ResDef.discovery.ROUTE_WIDGET_CONTAINER_HEIGHT);var o=0<(o=a-(window.vui.ResDef.discovery.ROUTE_WIDGET_CONTAINER_HEIGHT+2-e.categoryTopPos))?window.vui.ResDef.discovery.ROUTE_WIDGET_CONTAINER_TOP-(o-e.categoryTopPos):window.vui.ResDef.discovery.ROUTE_WIDGET_CONTAINER_TOP+e.categoryTopPos;this.elem.style.height=a+"px",this.elem.style.top=o+"px",this.elem.style.borderBottom="2px solid #ffffff"}},selectGene:function(e){e.currentCategoryIndex=this.currentCategoryIndex,e.categoryTopPos=this.categoryTopPos,e.categoryIndexPos=this.categoryIndexPos,vui.executeOnContainer(this.parentWidget,"selectGene",e)},onBack:function(){vui.executeOnContainer(this.parentWidget,"hideGenesWidget")}}),vui.widgets.ResetWidget=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e=e||{},this.categoryIndex=e.categoryIndex,e.label="RESET",e.name="RESET",e.iconSrc=vui.images.startOver_icon,e.imgSrc=vui.images.button_size24,e.elemClassName="discover_route reset_button imageActionButton",e.defaultClassName="btn_bg_size24_default",e.selectClassName="btn_bg_size24_select",e.disabledClassName="btn_bg_size24_disabled",e.iconDisabledClassName="discovery_route_icon_disabled",e.iconSelectClassName="discovery_route_icon_selected",e.iconDefaultClassName="discovery_route_icon_default",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.style.top=e.topPos+"px",this.name=e.name,this.topPos=e.topPos},bind:function(){},onAction:function(){var e={linkType:"lnk_o",linkName:"discoverreset"};vui.analytics.trackEvent("event5",e),vui.executeOnContainer(this.parentWidget,"deselectAllGenes")}}),vui.widgets.BackWidget=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e=e||{},this.categoryIndex=e.categoryIndex,e.label="BACK",e.name="BACK",e.iconSrc=vui.images.back_icon,e.imgSrc=vui.images.button_size24,e.elemClassName="discover_route reset_button imageActionButton",e.defaultClassName="btn_bg_size24_default",e.selectClassName="btn_bg_size24_select",e.disabledClassName="btn_bg_size24_disabled",e.iconDisabledClassName="discovery_route_icon_disabled",e.iconSelectClassName="discovery_route_icon_selected",e.iconDefaultClassName="discovery_route_icon_default",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.style.top=e.topPos+"px",this.name=e.name,this.topPos=e.topPos},bind:function(){},onAction:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.DiscoveryRoute=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).imgSrc=vui.images.button_size24,e.iconSrc=vui.images.discovery_stops_stacked_img,e.elemClassName="discover_route imageActionButton",e.defaultClassName="btn_bg_size24_default",e.selectClassName="btn_bg_size24_select",e.disabledClassName="btn_bg_size24_disabled",e.iconDisabledClassName="discovery_route_icon_disabled",e.iconSelectClassName="discovery_route_icon_selected",e.iconDefaultClassName="discovery_route_icon_default",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.style.top=e.topPos+"px",this.name=e.name,this.topPos=e.topPos,this.categoryIndexPos=e.categoryIndexPos,this.iconLabel=createDiv({className:"iconLabel font18"},this.elem)},bind:function(e){this.categoryIndex=e.categoryIndex;var t=categoryArrayMap[categoryArray[this.categoryIndex]].displayName,i=categoryArrayMap[categoryArray[this.categoryIndex]].shortName;this.iconLabel.innerHTML=i,this.setLabel(t),this.name=e.name,this.metaObj={},this.metaObj.name=t,this.metaObj.description=categoryArrayMap[categoryArray[this.categoryIndex]].description},onAction:function(){vui.executeOnContainer(this.parentWidget,"showGenesWidget",{categoryIndex:this.categoryIndex,topPos:this.topPos,categoryIndexPos:this.categoryIndexPos})},onSelect:function(){this.parent(),vui.executeOnContainer(this.parentWidget,"showMetaDescription",{metaDesc:this.metaObj})}}),vui.widgets.DiscoveryRouteWidget=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DiscoveryRouteWidget",elemClassName:"discovery_route_widget",init:function(){this.countWidget=new createDiv({className:"discovery_count_widget font18"}),this.elem.appendChild(this.countWidget),this.elem.style.background="url('"+vui.images.subway_route_base_bg+"') 0 0 no-repeat transparent",this.indexPos=0,this.routeHeader=new createDiv({className:"discovery_route_planner_text font18"}),this.elem.appendChild(this.routeHeader),this.menuContainer=createDiv({className:"menu_container"},this.elem),this.menuContainer.style.background="url('"+vui.images.subway_route_line_bg+"') 0 0 no-repeat transparent",this.discoveryRoute=[];var e=window.vui.ResDef.discovery.ROUTE_WIDGET_TOP;this.jorneyFinishBack=new vui.widgets.BackWidget({index:0,topPos:e}),this.attachChild(this.jorneyFinishBack),this.jorneyFinishBack.disable(),this.jorneyFinishBack.selectable=!1,this.jorneyFinishBack.hide(),e=e+window.vui.ResDef.discovery.ROUTE_WIDGET_HEIGHT+1,this.jorneyFinish=new vui.widgets.ResetWidget({index:1,topPos:e}),this.attachChild(this.jorneyFinish),this.jorneyFinish.disable(),this.jorneyFinish.selectable=!1,this.jorneyFinish.hide(),e=window.vui.ResDef.discovery.ROUTE_WIDGET_TOP;for(var t=0;t<5;t++){var i=new vui.widgets.DiscoveryRoute({topPos:e,categoryIndexPos:t}),e=e+window.vui.ResDef.discovery.ROUTE_WIDGET_HEIGHT+1;this.attachChild(i),i.disable(),this.discoveryRoute.push(i)}},setIndex:function(e){this.indexPos=e},mapGenes:function(e){this.categoryMap={};for(var t,i,s=0;s<e.length;s++){e[s]&&"gene"==e[s]._type&&(t=e[s].categoryName[0].toUpperCase(),this.categoryMap[t]||(this.categoryMap[t]=[]),(i={}).geneId=e[s].geneId[0],i.geneName=e[s].name,this.categoryMap[t].push(i))}},bind:function(e){var t=e.genes,i=e.resultCount,s=e.selectedCategory?e.selectedCategory.length:0;if(this.countWidget.innerHTML=1!=parseInt(i)?i+" titles":i+" title",6<i&&t&&s<=6){this.routeHeader.innerHTML=vui.strings.getText("DISCOVER_ROUTE_PLANNER"),this.jorneyFinishBack.hide(),this.jorneyFinishBack.selectable=!1,this.jorneyFinish.hide(),this.jorneyFinish.selectable=!1,this.mapGenes(t);for(var n=0,a=0;a<categoryArray.length&&n<this.discoveryRoute.length;a++){var o=categoryArray[a];this.categoryMap[o]&&0<this.categoryMap[o].length&&(this.discoveryRoute[n].bind({categoryIndex:a,name:o}),this.discoveryRoute[n].enable(),this.discoveryRoute[n].show(),n++)}for(var r=n;r<this.discoveryRoute.length;r++)this.discoveryRoute[n].disable(),this.discoveryRoute[n].show()}else{this.routeHeader.innerHTML=vui.strings.getText("DISCOVER_ROUTE_FINISH");for(a=0;a<this.discoveryRoute.length;a++)this.discoveryRoute[a].disable(),this.discoveryRoute[a].hide();this.jorneyFinishBack.enable(),this.jorneyFinishBack.selectable=!0,this.jorneyFinishBack.show(),this.jorneyFinish.enable(),this.jorneyFinish.selectable=!0,this.jorneyFinish.show()}},showGenesWidget:function(e){var t=categoryArray[e.categoryIndex];vui.executeOnContainer(this.parentWidget,"showGenesWidget",{genes:this.categoryMap[t],currentCategoryIndex:e.categoryIndex,categoryTopPos:e.topPos,categoryIndexPos:e.categoryIndexPos})},onBack:function(){0<this.indexPos?vui.executeOnContainer(this.parentWidget,"deSelectGene"):vui.executeOnContainer(this.parentWidget,"onBack")},onDirectionLeft:function(){this.onBack()}}),vui.widgets.DiscoveryVisitedStops=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DiscoveryVisitedStops",elemClassName:"discovery_visited_stops",init:function(){this.selectable=!1,this.countWidget=new Element("div",{class:"discovery_count_widget font18"}),this.elem.appendChild(this.countWidget),this.stopWidget=new Element("div",{class:"discovery_visited_stop"}),this.elem.appendChild(this.stopWidget),this.stopWidgetImg=new Element("div",{class:"discovery_visited_stop_img font18"}),this.stopWidgetImg.style.backgroundImage="url('"+vui.images.discovery_visited_stop_img+"')",this.stopWidget.appendChild(this.stopWidgetImg),this.stopWidgetName=new Element("div",{class:"discovery_visited_stop_name fontWhite18"}),this.stopWidget.appendChild(this.stopWidgetName),this.stopWidgetPath=new Element("div",{class:"discovery_visited_path"}),this.elem.appendChild(this.stopWidgetPath),this.stopWidgetPathImg=new Element("div",{class:"discovery_visited_path_img"}),this.stopWidgetPathImg.style.backgroundImage="url('"+vui.images.discovery_visited_path_img+"')",this.stopWidgetPath.appendChild(this.stopWidgetPathImg),this.hide()},bind:function(e){this.countWidget.innerHTML=e.resultCount+" titles",this.stopWidgetImg.innerHTML=e.categoryName;var t=e.currentStopIndex-e.nextStopIndex,i="horizontal";0===t?(i="horizontal",e.isLastCategory&&(i+="_short")):0<t?i="down":(i="up",t*=-1),this.stopWidgetPathImg.className="line_"+i+"_"+t,this.stopWidgetPathImg.style.top=e.categoryTopPos+window.vui.ResDef.discovery.ROUTE_WIDGET_HEIGHT/2+"px",this.stopWidgetImg.style.top=e.currentCategoryTopPos+"px",this.stopWidgetName.innerHTML=e.geneName,this.stopWidgetName.style.top=e.currentCategoryTopPos+window.vui.ResDef.discovery.ROUTE_WIDGET_NAME_TOPPOS+"px",this.elem.style.left=e.left+"px",this.show(),this.selectable=!1}}),vui.widgets.DiscoveryVisitedMap=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DiscoveryVisitedMap",elemClassName:"Discovery_visited_map",init:function(){this.selectable=!1},bind:function(e){if(this.detachAllChildren(),e&&e.selectedCategory&&0<e.selectedCategory.length){var t=e.selectedCategory.length,i=0;4<t&&(i=t-4);for(var s=0,n=i;n<t;n++){var a={};a.resultCount=e.selectedCategory[n].resultCount,a.isLastCategory=n===t-1,a.categoryName=categoryArrayMap[categoryArray[e.selectedCategory[n].currentCategoryIndex]].shortName,a.currentStopIndex=e.selectedCategory[n].categoryIndexPos,a.nextStopIndex=n===t-1?e.selectedCategory[n].categoryIndexPos:e.selectedCategory[n+1].categoryIndexPos,a.currentCategoryTopPos=e.selectedCategory[n].categoryTopPos,a.currentStopIndex<=a.nextStopIndex?a.categoryTopPos=e.selectedCategory[n].categoryTopPos:a.categoryTopPos=e.selectedCategory[n+1].categoryTopPos;var o=window.vui.ResDef.discovery.ROUTE_WIDGET_WIDTH+window.vui.ResDef.discovery.ROUTE_WIDGET_RIGHT_PADDING;a.left=s*o,a.geneName=e.selectedCategory[n].geneName;var r=new vui.widgets.DiscoveryVisitedStops;this.attachChild(r),r.bind(a),s++}var l=0;3<t&&(l=-1*o);!0!==window.useWebkit&&e.disableAnimation?this.elem.style.left=l+"px":vui._.animX(this.elem,l,300,function(){}),this.show()}else this.hide();this.selectable=!1}}),vui.widgets.DiscoverySubway=new Class({Extends:vui.widgets.Container,name:"vui.widgets.DiscoverySubway",elemClassName:"discoverySubway",init:function(){this.selectedGenes=[],this.selectedCategory=[],this.subwayContainer=createDiv({className:"subway_container"},this.elem),this.subwayContainer.style.background="url('"+vui.images.subway_bg+"') 0 0 no-repeat transparent",this.startWidget=createDiv({className:"discovery_start_widget font18",text:vui.strings.getText("DISCOVER_START"),styles:{display:"none"}}),this.elem.appendChild(this.startWidget),this.routeWidget=new vui.widgets.DiscoveryRouteWidget,this.attachChild(this.routeWidget),this.mapWidget=new vui.widgets.DiscoveryVisitedMap,this.attachChild(this.mapWidget),this.mapWidget.selectable=!1},showGenesWidget:function(e){this.genesWidget=new vui.widgets.DiscoveryGenesWidget,this.attachChild(this.genesWidget),this.genesWidget.elem.style.left=this.discoveryWidgetLocation+"px",e.selectedGenes=this.selectedGenes,this.genesWidget.bind(e),vui.select(this.genesWidget.children[Math.floor(this.genesWidget.children.length/2)])},hideGenesWidget:function(){this.detachChild(this.genesWidget),vui.select(this.routeWidget)},deselectAllGenes:function(){this.selectedGenes=[],this.selectedCategory=[],vui.executeOnContainer(this.parentWidget,"update",{selectedGenes:this.selectedGenes,selectedCategory:this.selectedCategory,disableAnimation:!0})},deSelectGene:function(){this.selectedGenes.pop(),this.selectedCategory.pop(),vui.executeOnContainer(this.parentWidget,"update",{selectedGenes:this.selectedGenes,selectedCategory:this.selectedCategory,disableAnimation:!0})},selectGene:function(e){e.geneId&&this.selectedGenes.push(e.geneId),e.resultCount=this.resultCount,this.selectedCategory.push(e),this.hideGenesWidget(),vui.executeOnContainer(this.parentWidget,"update",{selectedGenes:this.selectedGenes,selectedCategory:this.selectedCategory})},moveDiscoveryWidget:function(e){var t;e&&$defined(e.selectedGeneCount)&&(this.routeWidget.show(),this.routeWidget.setIndex(e.selectedGeneCount),t=0,t=1<=e.selectedGeneCount&&e.selectedGeneCount<3?e.selectedGeneCount*(window.vui.ResDef.discovery.ROUTE_WIDGET_WIDTH+window.vui.ResDef.discovery.ROUTE_WIDGET_RIGHT_PADDING):0==e.selectedGeneCount?window.vui.ResDef.discovery.ROUTE_WIDGET_START:3*(window.vui.ResDef.discovery.ROUTE_WIDGET_WIDTH+window.vui.ResDef.discovery.ROUTE_WIDGET_RIGHT_PADDING),this.discoveryWidgetLocation=t,!0!==window.useWebkit&&e.disableAnimation?this.routeWidget.elem.style.left=t+"px":vui._.animX(this.routeWidget.elem,t,300,function(){}))},bind:function(e){e.selectedGenes&&(this.selectedGenes=e.selectedGenes),e.selectedCategory&&(this.selectedCategory=e.selectedCategory),!e.selectedCategory||0===e.selectedCategory.length||e.selectedCategory.length<4?this.startWidget.style.display="block":this.startWidget.style.display="none",this.routeWidget.bind(e),this.moveDiscoveryWidget({selectedGeneCount:e.selectedGenes.length,disableAnimation:e.disableAnimation}),this.selectedCategory&&this.mapWidget.bind({selectedCategory:this.selectedCategory,disableAnimation:e.disableAnimation}),this.resultCount=e.resultCount}}),vui.widgets.DiscoverydRow=new Class({Extends:vui.widgets.ListOfListRowBase,name:"vui.widgets.DiscoverydRow",posterClass:vui.widgets.LoLSmallPosterBase,elemClassName:"discoverydRow",headerHeight:window.vui.ResDef.discovery.HEADER_H,width:window.vui.ResDef.discovery.ROW_W,height:window.vui.ResDef.discovery.ROW_H,bodyHeight:window.vui.ResDef.discovery.BODY_H,posterPositionWidth:window.vui.ResDef.discovery.POSTER_POS_W,listNum:6,init:function(e){this.parent(e)},bind:function(e,t){this.data=e,this.parent(this.data),this.viewAll&&(t?this.viewAll.hide():this.viewAll.show()),this.setTitle(vui.strings.getText("DISCOVER_TITLE"))}}),vui.widgets.DiscoveryLoL=new Class({Extends:vui.widgets.ListOfListBase,name:"vui.widgets.DiscoveryLoL",elemClassName:"discoveryLoL",width:window.vui.ResDef.discovery.ROW_W,rowClass:vui.widgets.DiscoverydRow,rowHeight:window.vui.ResDef.discovery.ROW_H,visibleHeight:window.vui.ResDef.recom.VISIBLE_H,init:function(){this.parent.apply(this,arguments)},bind:function(e,t){this.reset(),this.bindUI([{}]),this.rows[0]?this.rows[0].bind(e,t):alert("no rows???")},viewAllOnAction_:function(){vui.executeOnContainer(this.parentWidget,"viewAllOnAction_",this.ind)}}),vui.pages.DiscoverView=new Class({Extends:vui.NewPage,name:"vui.pages.DiscoverView",Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate],elemClassName:"discoverView",init:function(){this.selectedGenes=[],this.selectedCategory=[],this.discoveryPosterRow=new vui.widgets.DiscoveryLoL,this.attachChild(this.discoveryPosterRow),this.helpMessage=createDiv({className:"discoverOpacity85 font28 subway_help_message_container",text:vui.strings.getText("DISCOVER_HELP_TEXT")},this.elem),this.subway=new vui.widgets.DiscoverySubway,this.attachChild(this.subway),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.elem.style.left=window.vui.ResDef.discovery.MP_L+"px",this.movieInfoPanel.elem.style.top=window.vui.ResDef.discovery.MP_T+"px",this.movieInfoPanel.hide(),this.movieInfoPanel.selectable=!1,this.attachChild(this.movieInfoPanel)},showPanel:function(){this.movieInfoPanel.makeVisible()},hidePanel:function(){this.movieInfoPanel.invisible()},showMetaDescription:function(e){this.hidePanel(),this.movieInfoPanel.showGenreInfoPanel(e.metaDesc),this.showPanel()},show:function(e){vui.getModel().isAlivePosterBaseUrl();var t=e&&e.state?e&&e.state:{};t.disableAnimation=!0,this.update(t),this.showSampleAd()},showSampleAd:function(){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad()},update:function(t){t.selectedGenes&&(this.selectedGenes=t.selectedGenes),t.selectedCategory&&(this.selectedCategory=t.selectedCategory);var i=function(e){(this.dicoveryInfoModel=e)?(this.bind(e,t),t.savedSelection&&vui.restoreSelectorPosition(this,t.savedSelection)):this.dicoveryInfoModel=vui.getModel().getDiscoveryInfo(i,this.selectedGenes),e=null}.bind(this);this.dicoveryInfoModel=vui.getModel().getDiscoveryInfo(i,this.selectedGenes)},viewAllOnAction_:function(){var e={};e.selectedGenes=this.selectedGenes,controller.goToPage("DiscoveredViewAll",e)},bind:function(e,t){var i;alert("params: "+JSON.encode(t)),this.resultCount=0,this.selectedCategory&&0===this.selectedCategory.length?(this.helpMessage.style.display="block",this.hideViewAll=!0):(this.helpMessage.style.display="none",this.hideViewAll=!1),e&&e.contents&&e.contents[0]?(this.discoveryPosterRow.bind(e.contents[0],this.hideViewAll),this.resultCount=e.contents[0].totalCount):(this.discoveryPosterRow.bind({}),this.resultCount=0),this.selectedCategory&&0===this.selectedCategory.length||0==this.resultCount?this.discoveryPosterRow.selectable=!1:this.discoveryPosterRow.selectable=!0,e&&e.genes&&e.genes[0]&&e.genes[0].gene&&(i={genes:e.genes[0].gene,resultCount:this.resultCount,selectedGenes:this.selectedGenes,selectedCategory:this.selectedCategory},t&&t.disableAnimation?i.disableAnimation=!0:i.disableAnimation=!1,this.subway.bind(i))},hide:function(){},onGotListLength:function(e){},saveState:function(){var e={};return e.selectedGenes=this.selectedGenes,e.selectedCategory=this.selectedCategory,e.savedSelection=vui.saveSelectorPosition(this),e},buttonOnAction:function(){},buttonOnSelect:function(){},posterOnAction:function(e){e&&e.contentId&&0<e.contentId[0]&&controller.goToPage("NewMovieDetails",{contentId:e.contentId})},buildDiscoverPath:function(){var e="";if(this.selectedCategory&&0<this.selectedCategory.length)for(var t=0;t<this.selectedCategory.length;t++){e=e+categoryArrayMap[categoryArray[this.selectedCategory[t].currentCategoryIndex]].displayName+"-"+this.selectedCategory[t].geneName;t!==this.selectedCategory.length-1&&(e+=":")}return vui._.toLower(e)},omReport_:function(e){var t="discover";e.selections&&e.selections.match(":viewall")&&(t+=":viewall"),this.report(t)},report:function(e){var t={evars:{}};t.evars.discoverPath=this.buildDiscoverPath(),t.evars.browseType=e,t.events="event4",t.linkType="lnk_o",t.linkName=e,vui.analytics.trackPage(e,t,0)},reportNoResults:function(){var e={evars:{}};e.evars.discoverPath=this.buildDiscoverPath(),e.events="event28",e.linkType="lnk_o",e.linkName="discover",vui.analytics.trackPage("discover",e,0)}}),vui.widgets.MyResumePoster=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.MyResumePoster",elemClassName:"MyResumePoster",selectorType:"solidrect",init:function(e){this.width=window.vui.ResDef.myVuduView.RESUME_POSTER_W,this.height=window.vui.ResDef.myVuduView.RESUME_POSTER_H,this.elem.setAttribute("aria-hidden","true"),this.posterWidth=0,this.posterHeight=0,this.elem.id=e,this.img=document.createElement("img"),this.elem.appendChild(this.img),this.el.info=document.createElement("div"),this.el.info.className="myVuduPosterResumeInfo",this.elem.appendChild(this.el.info),this.el.title=document.createElement("div"),this.el.title.className="myVuduPosterResumeTitle",this.el.info.appendChild(this.el.title),this.el.season=document.createElement("div"),this.el.season.className="myVuduPosterResumeSeason",this.el.season.style.display="none",this.el.info.appendChild(this.el.season),this.el.expired=document.createElement("div"),this.el.expired.className="myVuduPosterResumeExpired",this.el.info.appendChild(this.el.expired),this.el.expired_label=document.createElement("div"),this.el.expired_label.className="myVuduPosterResumeExpired_label",this.el.expired.appendChild(this.el.expired_label),this.el.expired_value=document.createElement("div"),this.el.expired_value.className="myVuduPosterResumeExpired_value",this.el.expired.appendChild(this.el.expired_value),this.el.status=document.createElement("div"),this.el.status.className="myVuduPosterResumeStatus",this.elem.appendChild(this.el.status),this.el.play=document.createElement("div"),this.el.play.className="myVuduPosterResumePlay",this.el.play.style.background="url('"+vui.images.my.play+"') 0 0 no-repeat",this.el.status.appendChild(this.el.play),this.el.timeline=document.createElement("div"),this.el.timeline.className="myVuduPosterResumeTimeline",this.el.status.appendChild(this.el.timeline),this.el.time=document.createElement("span"),this.el.time.className="myVuduPosterResumeTime",this.el.timeline.appendChild(this.el.time),this.el.totalTime=document.createElement("span"),this.el.totalTime.className="myVuduPosterResumeTotalTime",this.el.timeline.appendChild(this.el.totalTime),this.el.bar_bg=document.createElement("div"),this.el.bar_bg.className="myVuduPosterResumeBarBG",this.el.status.appendChild(this.el.bar_bg),this.el.bar=document.createElement("div"),this.el.bar.className="myVuduPosterResumeBar",this.el.bar_bg.appendChild(this.el.bar),this.el.bar_bg.style.background=vui.Theme.scrubberBg+" 0 0 repeat-x"},bind:function(e){var t=e.content&&e.content.contentId[0];this.data=e.content,e.content.resizedPosterUrl=vui.getModel().getPosterUrl(e.content,window.vui.ResDef.myVuduView.RESUME_POSTER_IMG_UPSCALE_W),e.content.resizedBlowupPosterUrl=vui.getModel().getPosterUrl(e.content,window.vui.ResDef.POSTER_BLOWUP_W),this.img.src=vui.images.empty1x1,this.img.src=e.content.resizedPosterUrl,this.img.width=window.vui.ResDef.myVuduView.RESUME_POSTER_IMG_W,this.img.height=window.vui.ResDef.myVuduView.RESUME_POSTER_IMG_H;var i=e,s=vui.m.bookmarkCache.check(e.content.contentId);i.timeSeconds=s?s.timeSeconds:e.timeSeconds,i=i||{timeSeconds:0};var n=0,a=vui._.aStr(this.data.lengthSeconds)||0;0==i.timeSeconds?n=a:i&&i.timeSeconds&&(n=i.timeSeconds),this.el.time.innerHTML=timeAsString(1e3*n),this.el.totalTime.innerHTML=" / "+timeAsString(1e3*a),this.el.title.innerHTML=this.data.title||"",this.el.bar.style.width=Math.floor(n/a*200)+"px",this.el.expired.style.display="none",vui.m.getMovieInfo(t,function(e){this.expired=vui.m._checkRental(t),this.mim=e,this.expired&&this.updateExpiration()}.bind(this)),this.data.seasonNumber&&this.data.episodeNumberInSeason?(this.el.season.style.display="block",this.el.season.innerHTML="Season "+this.data.seasonNumber[0]+"<br>Episode "+this.data.episodeNumberInSeason[0]):this.el.season.style.display="none",this._setIconDefault(),!1===this.selectable&&(this.selectable=!0),this.elem.style.visibility="visible"},updateExpiration:function(){var e=getTimeDiffString(this.expired);(e=e&&(vui.vvPlatform.appFeatureEnabled()?e.toLowerCase()+" left":e.toUpperCase()))&&!this.mim.rentalUpgraded()&&(this.el.expired_label.innerHTML=vui.strings.transformCase("Expires:"),this.el.expired_value.innerHTML=e,this.el.expired.style.display="block")},unbind:function(){!0===this.selectable&&(this.selectable=!1),delete this.data,this.img.src=vui.images.empty1x1,this.elem.style.visibility="hidden"},onAction:function(){this.data&&vui.m.getMovieInfo(this.data.contentId[0],function(e){var t;e&&(t=function(){vui.executeOnContainer(this.parentWidget,"onClickResumePlay",e.data)}.bind(this),e.refresh(t))}.bind(this))},onPlay:function(){this.onAction()},onSelect:function(){var e=this.el.title.innerHTML+" "+this.el.season.innerHTML;"block"===this.el.expired.style.display&&(e+=". Expires: "+this.el.expired_value.innerHTML.replace("MINS","minutes").replace("HRS","hours")),vui._.setAriaLabel("Continue Watching "+e),this._setIconActive()},drawSelector:function(){},onDeselect:function(){this._setIconDefault()},_setIconActive:function(){this.elem.style.border=vui.Theme.activeWideBorder,this.el.bar.style.background=vui.Theme.scrubber+" 0 0 no-repeat",this.el.status.style.background="#FFFFFF",this.el.info.style.color="#000000",this.el.info.style.background="#FFFFFF",this.el.title.style.color="#000000",this.el.season.style.color="#000000",this.el.time.style.color="#000000",this.el.totalTime.style.color="#000000",this.el.expired_label.style.color="#000000",this.el.expired_value.style.color="#000000",this.el.play.style.backgroundPosition="0 -"+window.vui.ResDef.myVuduView.RESUME_PLAY_BTN_H+"px"},_setIconDefault:function(){this.el.bar.style.background=vui.Theme.scrubber+" 0 0 no-repeat",this.el.play.style.backgroundPosition="0 0",this.elem.style.border="4px solid transparent",this.el.status.style.background="#083452",this.el.info.style.color="#FFFFFF",this.el.info.style.background="#083452",this.el.title.style.color="#FFFFFF",this.el.season.style.color="#FFFFFF",this.el.time.style.color="#FFFFFF",this.el.totalTime.style.color="#FFFFFF",this.el.expired_label.style.color="#FFFFFF",this.el.expired_value.style.color="#FFFFFF"}}),vui.widgets.ResumeGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.ResumeGridList",posterClass:vui.widgets.MyResumePoster,settings:{normal:{columns:4,rows:2}},columns:4,rows:2,partialRow:!1,currentStart:0,refreshTimer:null,expiredRemoved:!1,getResumeListModel:function(){for(var e,t=[],i=[],s=vui.getModel(),n=s.bookmarkCache&&s.bookmarkCache.resumes,a=n&&n.length||0,o=0;o<n.length;o++){n[o].content&&n[o].content.contentId&&((e=vui.m._checkRental(n[o].content.contentId))&&!getTimeDiffString(e)?(this.expiredRemoved=!0,a--):i.push(n[o]),e&&getTimeDiffString(e)&&t.push(parseDate(e).getTime()+1e3-VUDU.vuduTime()))}return n=i,t.length&&(this.setTimerEarliestExpiration(t),vui.executeOnContainer(this.parentWidget,"addListener")),{data:n,totalCount:a,get:function(e){return n[e]}}},setTimerEarliestExpiration:function(e){for(var t=null,i=0;i<e.length;i++)(!t||e[i]<t)&&(t=e[i]);t=2147483647<t?2147483647:t,this.refreshTimer=setTimeout(function(){this.refreshList()}.bind(this),t)},init:function(e){this.movieListModel=this.getResumeListModel(),this.parent(e,this.movieListModel);var t=vui.account.getAccountId()?vui.strings.getText("GRID_EMPTY_MY_VUDU_RESUME"):vui.strings.getText("GRID_LOGIN_MY_VUDU_RESUME",vui.strings.transformCase("Sign Up"));this.msg=new vui.widgets.NoDataMessage(t),this.attachChild(this.msg),this.msg.hide()},_layoutPosters:function(){if(this.children&&0<this.children.length)for(var e=window.vui.ResDef.myVuduView.RESUME_POSTER_TOP,t=window.vui.ResDef.myVuduView.RESUME_POSTER_LEFT,i=this.children[0].width+this.paddingRight,s=this.children[0].height+this.paddingBottom,n=0,a=this.numVisible;n<a;n++){var o=this.children[n].elem.style;n%this.columns==0?(t=window.vui.ResDef.myVuduView.RESUME_POSTER_LEFT,0<n&&(e+=s)):t+=i,o.left=t+"px",o.top=e+"px"}},onClickResumePlay:function(t){var e=function(e){switch(e){case"resume":t.resetBookmark=!1,vui.executeOnContainer(this.parentWidget,"onClickResumePlay",t);break;case"startOver":t.skipHistory=null,t.resetBookmark=!0,vui.executeOnContainer(this.parentWidget,"onClickResumePlay",t);break;case"seeDetails":vui.executeOnContainer(this.parentWidget,"posterOnAction",t);break;case"remove":vui.m.bookmarkCache.remove(t.contentId[0]),this.refreshList({scrollOffset:this.currentStart}),controller.hidePopup();break;case"cancel":case"back":controller.hidePopup()}}.bind(this),i={title:t.title&&t.title[0],data:t,buttons:[{label:vui.strings.transformCase("Resume"),selectButtonClass:"btn_bg_watch_select",defaultButtonClass:"btn_bg_watch_default",action:"resume"},{label:vui.strings.transformCase("Start Over"),action:"startOver"},{label:vui.strings.transformCase("See Details"),action:"seeDetails"},{label:vui.strings.transformCase("Remove From This List"),defaultButtonClass:"btn_bg_cancel_default_watch_list",action:"remove"}],callback:e};controller.showPopup("ChoicesGenericDialog",i)},refreshList:function(e){this.msg.hide(),this.setSelectable(!0),this.parentWidget&&this.parentWidget.scroller&&this.parentWidget.scroller.hide(),this.movieListModel=this.getResumeListModel(),this.expiredRemoved&&this._layoutPosters(),this.movieListModel&&this.movieListModel.data&&this.movieListModel.totalCount?e&&0<=e.scrollOffset?(vui._.setAriaLabel(""),this.currentStart=e.scrollOffset):(this.currentStart=0,this.resetSelector()):(this.setSelectable(!1),this.msg.show(),vui._.setAriaLabel(this.msg.el.title.innerHTML)),(this.partialRow&&this.movieListModel.totalCount>(this.rows-1)*this.columns||!this.partialRow&&this.movieListModel.totalCount>this.rows*this.columns)&&this.parentWidget.scroller.show(),this.update()},select:function(){this.parent.apply(this,arguments)},forceResetSelector:function(){this.selected=0,this.currentStart=0}}),vui.widgets.MyViewResume=new Class({Extends:vui.widgets.PosterGrid,Implements:[vui.widgets.NavBackDelegate,vui.ContentActions],name:"vui.widgets.MyViewResume",elemClassName:"MyViewResume",listClass:vui.widgets.ResumeGridList,init:function(){this.el.title=document.createElement("div"),this.el.title.className="myVuduResumeTitle",this.el.title.innerHTML="Continue Watching",this.elem.appendChild(this.el.title),this.el.body=document.createElement("div"),this.el.body.className="myVuduResumeBody",this.el.body.style.height=window.vui.ResDef.myVuduView.LOL_RESUME_ROW_BODY_H+"px",this.elem.appendChild(this.el.body),this.parent.apply(this,arguments),this.range.style.width=window.vui.ResDef.myVuduView.RESUME_RANGE+"px"},select:function(){this.parent.apply(this,arguments)},show:function(e){e=e||{},this.elem.style.display="block",this.setSelectable(!0),vui.executeOnContainer(this.parentWidget,"hidePanel"),vui.executeOnContainer(this.parentWidget,"moveMetaPanelOffscreen"),this.list.refreshList(e)},hide:function(){this.setSelectable(!1),this.elem.style.display="none",clearTimeout(this.list.refreshTimer),this.removeListener()},onClickResumePlay:function(t){var e,i,s,n;t.ownerships||vui.m.avodManager.canDisplayWatchWithAdsButton(t)?(e=this.getVariantByOwnership(t),i={movie:t,variant:e},this.list.forceResetSelector(),e||"true"!==vui._.aStr(t.isAdvertEnabled)?this.onClickPlay(i,t.skipHistory,t.resetBookmark):this.onClickWatchWithAds(i,t.resetBookmark),vui._.setAriaLabel("")):(s=function(e){switch(e){case"seeDetails":vui.executeOnContainer(this.parentWidget,"posterOnAction",t);break;case"cancel":controller.hidePopup()}}.bind(this),n={title:"Sorry",poster:vui.getModel().getPosterUrl(t,window.vui.ResDef.detailPage.POSTER_WIDTH),text:"This content is no longer free. Please purchase this content to play.",dialogBoxClassName:"ResumeError",buttons:[{name:"seeDetails",style:"blue",label:vui.strings.getText("MOVIE_DETAILS_RENT_OWN_BUTTON")},{name:"cancel",style:"blue",label:vui.strings.getText("FREE_RENTAL_CANCEL_BUTTON")}],callback:s},controller.showPopup("PosterTextDialog",n))},addListener:function(){var e;this.hasListener||(e=function(){var t=!1;this.list.children.every(function(e){return e.expired&&(t=!0,e.updateExpiration()),!0}),t||this.removeListener()}.bind(this),vui.executeOnContainer(this.parentWidget,"addAutoRefreshListener",[this,e]),this.hasListener=!0)},removeListener:function(){this.hasListener&&(vui.executeOnContainer(this.parentWidget,"removeAutoRefreshListener",this),delete this.hasListener)},saveState:function(){return{scrollOffset:this.list.currentStart}}}),vui.widgets.MyVuduSort=new Class({Extends:vui.widgets.VuduSort,name:"vui.widgets.MyVuduSort",elemClassName:"myVuduSort"}),vui.widgets.MyVuduPosterGrid=new Class({Extends:vui.widgets.PosterGrid,elemClassName:"MyVuduPosterGrid",init:function(){this.parent.apply(this,arguments)},setTitle:function(e){this.el.myTitle.innerHTML=e},select:function(){this.parent.apply(this,arguments)}}),vui.widgets.MyVuduGrid=new Class({Extends:vui.widgets.VuduSortGrid,elemClassName:"MyVuduGrid",sortClass:vui.widgets.MyVuduSort,gridClass:vui.widgets.MyVuduPosterGrid,show:function(e){vui.vvPlatform.appFeatureEnabled()||(this.sortL=window.vui.ResDef.myVuduView.CONTAINER_SORT_L_VUDU,this.sortListL=window.vui.ResDef.myVuduView.CONTAINER_SORT_LIST_L_VUDU),e&&e.title&&(this.title=e.title),this.moviesInd=vui.gConnectionInstance.getKidsModeEnabled()?2:1;var t=3;if(vui.gConnectionInstance.getUserCollectionEnabled()&&(t=4),this.NoDataMsgTitle={},this.NoDataMsgTitle[this.moviesInd]=vui.strings.getText("GRID_EMPTY_MY_VUDU_MOVIES"),this.NoDataMsgTitle[this.moviesInd+1]=vui.strings.getText("GRID_EMPTY_MY_VUDU_TV"),this.NoDataMsgTitle[this.moviesInd+2]=vui.strings.getText("GRID_EMPTY_MY_VUDU_WISHLIST"),this.NoDataMsgTitle[this.moviesInd+t]=vui.strings.getText("GRID_EMPTY_MY_VUDU_PREORDER_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu"),this.LoginMsg={},this.LoginMsg[this.moviesInd]=vui.strings.getText("GRID_LOGIN_MY_VUDU_MOVIES"),this.LoginMsg[this.moviesInd+1]=vui.strings.getText("GRID_LOGIN_MY_VUDU_TVS"),this.LoginMsg[this.moviesInd+2]=vui.strings.getText("GRID_LOGIN_MY_VUDU_WISHLIST"),this.LoginMsg[this.moviesInd+t]=vui.strings.getText("GRID_LOGIN_MY_VUDU_PREORDERS"),this.parent.apply(this,arguments),e.vpm&&e.vpm.state){if(e.vpm.state.myTotalCount)for(var i in e.vpm.state.myTotalCount)vui.executeOnContainer(this.parentWidget,"setMyTotalCount",{name:i,count:e.vpm.state.myTotalCount[i]})}else this.firstTimeAnimate=!1;var s=vuiFilters.getVuduState(e.selectedInd);0<Object.keys(s).length&&(e.vpm.filters=s,vuiFilters.setCurrentFilters(s),this.sort.refreshLabel(),this.grid.setList(e.vpm)),this.grid.list.currentStart=e.scrollOffset||0,vui.executeOnContainer(this.parentWidget,"hideSort_"),e.selectedInd!==this.moviesInd&&e.selectedInd!==this.moviesInd+1&&vui.executeOnContainer(this.parentWidget,"hideSortCue"),vui.executeOnContainer(this.parentWidget,"moveMetalPanelBack")},onDirectionRight:function(){var e,t;this.grid.selectable?(e=vui.executeOnContainer(this.parentWidget,"getMyTotalCount"),t=vui.executeOnContainer(this.parentWidget,"getFilterCap"),(vuiFilters.hasSortAndOrFilter()||!vuiFilters.hasSortAndOrFilter()&&t<=e)&&(vui.executeOnContainer(this.parentWidget,"hideSort_"),vui.select(this.grid))):alert("no content on this grid")},onDirectionLeft:function(){var e=vui.executeOnContainer(this.parentWidget,"getMyTotalCount"),t=vui.executeOnContainer(this.parentWidget,"getSubTabSelected"),i=vui.executeOnContainer(this.parentWidget,"getFilterCap");!(vuiFilters.hasSortAndOrFilter()||!vuiFilters.hasSortAndOrFilter()&&i<=e)||t!==this.moviesInd&&t!==this.moviesInd+1||(vui.executeOnContainer(this.parentWidget,"showSort_"),vui.select(this.sort))},onAction:function(){this.onDirectionLeft()},listDataReceived:function(){vui.executeOnContainer(this.parentWidget,"setSortGridTitle",this.title)},showNoDataMessage:function(e){var t=(vui.account.getAccountId()?this.NoDataMsgTitle[e]:this.LoginMsg[e])||"";this.noDataMsg?this.noDataMsg.setTitle(t):(this.noDataMsg=new vui.widgets.NoDataMessage(t),this.attachChild(this.noDataMsg)),vui._.setAriaLabel(t),this.grid.elem.style.display="none",this.noDataMsg.elem.style.display="block"},hideNoDataMessage:function(){this.grid.elem.style.display="block",this.noDataMsg&&(this.noDataMsg.elem.style.display="none")}}),vui.widgets.MyVuduView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MyVuduView",Implements:[vui.gridPanelGlue],elemClassName:"myVuduView",el:{},items:{},itemWidth:0,marginLeftRight:2,myTotalCount:{},showFilterCap:20,subTabArr:[{title:"Continue"},{title:"Movies"},{title:"TV"},{title:"Wishlist"},{title:"Pre-Orders"},{title:"Offers",type:"myoffers"}],myOffersPage:null,init:function(){var e;this.moviesInd=vui.gConnectionInstance.getKidsModeEnabled()?2:1,this.gridIndOffset=3,vui.gConnectionInstance.getUserCollectionEnabled()&&(this.subTabArr.splice(4,0,{title:vui.strings.getText("USER_COLLECTION_HEADING")}),this.gridIndOffset=4),vui.gConnectionInstance.getKidsModeEnabled()&&((e={title:"",hasIcon:!0}).defaultIconSrc=vui.images.kidsMode.star_icon_on_button,e.iconWidth=window.vui.ResDef.myVuduView.STAR_ICON_BUTTON_W,e.iconTabClassName="kidsModeStarButton",e.ariaLabel=vui.strings.getText("FAMILY_SETTINGS_KM")+". "+vui.strings.getText("FAMILY_SETTINGS_DESC_KM")+" "+vui.strings.getText("KIDS_ENTRY_HINT")+" "+vui.strings.getText("KIDS_VIEW_PRIVACY",vui.vvPlatform.appFeatureEnabled()?"video.walmart.com/kids privacy":"vudu.com/kids privacy"),vui.vvPlatform.appFeatureEnabled()||(e.selectedIconSrc=vui.images.kidsMode.star_icon_focus_vudu),this.subTabArr.unshift(e)),vuiFilters.setCurrentFilterType("myMovie");var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="myVuduSortCue clickable",this.elem.style.top=window.vui.ResDef.myVuduView.T+"px",this.elem.style.left="0",this.subTab=new vui.widgets.SubTab(this.subTabArr),this.attachChild(this.subTab),this.subTab.subTabs[0].onDirectionLeft=function(){},this.el.main=document.createElement("div"),this.el.main.className="myVuduMain",this.elem.appendChild(this.el.main),this.el.container=document.createElement("div"),this.el.container.className="myVuduContainer",this.el.container.style.left=window.vui.ResDef.myVuduView.CONTAINER_L+"px",this.el.main.appendChild(this.el.container),this.attachChild(t),this.el.container.appendChild(t.elem),vui.gConnectionInstance.getKidsModeEnabled()&&(this.kidsMode=new vui.widgets.KidsModeEntry("library"),this.kidsMode.elem.style.display="none",this.attachChild(this.kidsMode,this.el.container),vui.m.kidsModeCache.load()),this.resume=new vui.widgets.MyViewResume,this.attachChild(this.resume,this.el.container),this.sortGrid=new vui.widgets.MyVuduGrid,this.attachChild(this.sortGrid,this.el.container),vui.gConnectionInstance.getUserCollectionEnabled()&&(this.collections=new vui.widgets.MyCollectionsView,this.attachChild(this.collections,this.el.container),this.collections.hide()),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.hide(),this.attachChild(this.movieInfoPanel),this.myOffersPage=new vui.widgets.MyOffersView,this.attachChild(this.myOffersPage),this.myOffersPage.hide(),this.movie_vpm={type:"list",name:"MY MOVIES",state:null},this.tv_vpm={type:"list",name:"MY TV SHOWS",state:null},this.wishlist_vpm={type:"list",name:"MY WISH LIST",state:null},this.preorders_vpm={type:"list",name:"MY PREORDER LIST",state:null},this.sortGridTitle=createDiv({className:"myVuduGridSubNavTitle"},this.elem)},setSortGridTitle:function(e){var t;e&&(t=e,this.selectedInd===(this.moviesInd||this.moviesInd+1)&&vuiFilters.hasFilter()&&(t+=vui.strings.getText("FILTER_RESULT_TITLE_FILTERED_SUFFIX")),this.sortGridTitle.innerHTML=t)},setTotalCount:function(){},show:function(e){vui.getModel().isAlivePosterBaseUrl(),this.params=e,this.movieInfoPanel.hide(),this.bookmarkCache=vui.getModel().bookmarkCache,e.state&&e.state.myTotalCount&&(this.myTotalCount=e.state.myTotalCount,this.selectedInd=e.state.selectedInd||0),!1===this.bookmarkCache.isLast30DayDirty?this.bind(e):e.state?(this.bind(e),this.bookmarkCache.fetchResumeData()):this.bookmarkCache.fetchResumeData(function(){this.bind(e)}.bind(this))},bind:function(e){var t,i=0;vui.gConnectionInstance.getKidsModeEnabled()&&(i=1),vui.gConnectionInstance.getUserCollectionEnabled()&&vui.gConnectionInstance.getUserCollectionOnboardingTipEnabled()&&vui.m.myCollectionsModel&&!vui.m.myCollectionsModel.getHasSeenTip("nav")&&(i=this.moviesInd+this.gridIndOffset-1),e&&e.state&&vui._.isIndex(e.state.selectedInd)&&i<(t=e.state.selectedInd)?this.subTab.initSelect(t):this.subTab.initSelect(i)},movieDataReceived_:function(){},parseResult_:function(e){var t;e&&e.recommendationContentsInTaste&&0<e.recommendationContentsInTaste.length?(t=e.recommendationContentsInTaste,this.lol.bind(t)):alert("no data found")},hide:function(){this.resume.hide(),this.myOffersPage.hide()},setSortCueActive:function(){},setSortCueDefault:function(){},showPanel:function(){this.movieInfoPanel.makeVisible()},hidePanel:function(){this.movieInfoPanel.invisible()},showSort_:function(){this.selectedInd!==this.moviesInd&&this.selectedInd!==this.moviesInd+1||(this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue())},hideSort_:function(){this.sortGrid.hideSort()},showSortCue:function(){try{vuiFilters.hasSortAndOrFilter()?(this.el.sortCue.setActive(),this.el.sortCue.show()):this.myTotalCount[this.selectedInd]>=this.showFilterCap&&(this.selectedInd===this.moviesInd||this.selectedInd===this.moviesInd+1)?(this.el.sortCue.setDefault(),this.el.sortCue.show()):this.el.sortCue.hide()}catch(e){this.el.sortCue.hide()}},hideSortCue:function(){this.el.sortCue.hide()},showOrHideSort:function(e){this.selectedInd===this.moviesInd||this.selectedInd===this.moviesInd+1?"none"===this.sortGrid.sort.elem.style.display&&(vuiFilters.hasSortAndOrFilter()||vuiFilters.getCurrentFilterType()||e>=this.showFilterCap)&&this.showSortCue():(this.hideSort_(),vui.gConnectionInstance.getUserCollectionEnabled()&&this.selectedInd===this.moviesInd+this.gridIndOffset-1||this.showPanel(),this.hideSortCue())},getFilterCap:function(){return this.showFilterCap},getMyTotalCount:function(){try{if(this.myTotalCount[this.selectedInd])return this.myTotalCount[this.selectedInd]}catch(e){return 0}return 0},setMyTotalCount:function(e){var t=e.tabIndex,i=e.count;this.myTotalCount[t]=i,this.showOrHideSort(this.myTotalCount[t]),vui.gConnectionInstance.getUserCollectionEnabled()&&this.selectedInd===this.moviesInd+this.gridIndOffset-1||(this.sortGrid.elem.style.display="block",this.sortGridTitle.style.display="block"),!vuiFilters.hasSortAndOrFilter()&&0<this.myTotalCount[t]||vuiFilters.hasSortAndOrFilter()?(this.sortGrid.hideNoDataMessage(),this.sortGrid.setSelectable(!0)):(this.sortGrid.setSelectable(!1),this.sortGrid.showNoDataMessage(this.selectedInd))},onGotListLength:function(e){0<this.selectedInd&&vui._.isIndex(e)&&this.setMyTotalCount({tabIndex:this.selectedInd,count:e})},saveState:function(){var e={};return e.selectedInd=this.selectedInd,e.myTotalCount=this.myTotalCount,vui.gConnectionInstance.getUserCollectionEnabled()&&this.selectedInd===this.moviesInd+this.gridIndOffset-1?e.state=this.collections.saveState():this.selectedInd>=this.moviesInd?e.state=this.sortGrid.saveState():this.selectedInd===this.moviesInd-1&&(e.state=this.resume.saveState()),e},saveVuduState:function(e){vuiFilters.saveVuduState(this.selectedInd,e)},buttonOnAction:function(){},buttonOnSelect:function(e){this.selectedGid=e,this._getButtonPosition(this.items[e].elem)},posterOnAction:function(e){vui._.posterOnAction(e),this.report()},report:function(){if(this.selectedInd===this.moviesInd||this.selectedInd===this.moviesInd+1){var e,t=vuiFilters.getCurrentFilters(),i=null;for(var s in t){(i=i||{})[vui._.toLower(s)]=vui._.toLower(t[s])}i&&(e={evars:{},linkType:"lnk_o"},this.selectedInd===this.moviesInd?(e.evars.browseType="mymovie",e.linkName="moviefilter",e.events="event26",e.evars.filters="movie:"+vui._.toOmFilterStr(i)):this.selectedInd===this.moviesInd+1&&(e.evars.browseType="mytv",e.linkName="tvfilter",e.events="event27",e.evars.filters="tv:"+vui._.toOmFilterStr(i)),vui.analytics.trackPage(e.evars.browseType,e,0))}},omClearAll:function(){var e={linkType:"lnk_o",events:"event23"},t="";this.selectedInd===this.moviesInd?(t="clearall:mymovie",e.linkName="moviefilter"):this.selectedInd===this.moviesInd+1&&(t="clearall:mytv",e.linkName="tvfilter");var i=vuiFilters.getCurrentFilterNames(),s="";Object.keys(i).forEach(function(e){s+=e+"="+i[e].toString()+"|"}),s=s.slice(0,-1);var n={};n.filters=t,0<s.length&&(n.sortFilterCombo=s),vui.analytics.trackEvar(n,e)},getSubTabSelected:function(){return this.subTab.getSelected_()},showGridView:function(e,t){this.resume.hide(),this._hideMyCollections();var i={};this.myTotalCount[e]&&(i.myTotalCount=this.myTotalCount[e]),i.scrollOffset=t&&t.scrollOffset,e===this.moviesInd?(vuiFilters.setCurrentFilterType("myMovie"),this.sortGrid.sort.refresh()):e===this.moviesInd+1&&(vuiFilters.setCurrentFilterType("myTV"),this.sortGrid.sort.refresh()),vuiFilters.resetCurrentFilters(),this.sortGrid.sort.refresh();var s={type:"list",name:null,state:t||null};this.movieInfoPanel.promoImg.style.display="none",(i.selectedInd=e)===this.moviesInd?(s.name="MY MOVIES",i.title=vui.vvPlatform.appFeatureEnabled()?"Your Movies":"My Movies"):e===this.moviesInd+1?(s.name="MY TV SHOWS",i.title=vui.vvPlatform.appFeatureEnabled()?"Your TV":"My TV"):e===this.moviesInd+2?(s.name="MY WISH LIST",i.title=vui.vvPlatform.appFeatureEnabled()?"Your Wishlist":"My Wishlist",this.movieInfoPanel.promoImg.style.display="block"):e===this.moviesInd+this.gridIndOffset&&(s.name="MY PREORDER LIST",i.title=vui.vvPlatform.appFeatureEnabled()?"Your Pre-Orders":"My Pre-Orders"),i.vpm=s,e!==this.moviesInd&&e!==this.moviesInd+1||(i.vpm.filters=vuiFilters.getCurrentFilters()),this.sortGrid.show(i)},onSelectedSubTab:function(e){if(vui.gConnectionInstance.getKidsModeEnabled()&&this.kidsMode.hide(),this.collections&&this.collections.hide(),e<this.subTabArr.length&&this.subTabArr[e]&&"myoffers"===this.subTabArr[e].type)return this.selectedInd=e,void this.showMyOffers();var t;this.hideMyOffers(),this.params&&this.params.state&&this.params.state.state?(e===this.moviesInd||e===this.moviesInd+1||e===this.moviesInd+2||e===this.moviesInd+this.gridIndOffset?(t=vui.deepCopy(this.params.state.state),this.selectedInd=e,delete this.params.state,this.showGridView(e,t)):e===this.moviesInd-1?(this._showResume(this.params.state.state),this.selectedInd=e):0===e?(this._showKidsMode(),this.selectedInd=e):vui.gConnectionInstance.getUserCollectionEnabled()&&e===this.moviesInd+this.gridIndOffset-1&&(this.selectedInd=e,this._showMyCollections(this.params.state.state),this.showMyCollectionTip()),delete this.params.state):e===this.moviesInd||e===this.moviesInd+1||e===this.moviesInd+2||e===this.moviesInd+this.gridIndOffset?(this.selectedInd=e,this.showGridView(e),this.showSampleAd()):e===this.moviesInd-1?(this._showResume(),this.selectedInd=e):0===e?(this._showKidsMode(),this.selectedInd=e):vui.gConnectionInstance.getUserCollectionEnabled()&&e===this.moviesInd+this.gridIndOffset-1&&(this.selectedInd=e,this._showMyCollections(),this.showMyCollectionTip())},selectKidsModeButton:function(){vui.select(this.subTab.subTabs[0])},_showKidsMode:function(){this.resume.hide(),this._hideMyCollections(),this.kidsMode.show(),this.sortGrid.elem.style.display="none",this.sortGridTitle.style.display="none",this.sortGrid.setSelectable(!1),this.hideMyOffers(),this.hideSortCue()},_showResume:function(e){this.showPanel(),this.movieInfoPanel.hide(),this._hideMyCollections(),this.sortGrid.elem.style.display="none",this.sortGridTitle.style.display="none",this.sortGrid.setSelectable(!1),this.resume.show(e),this.hideSortCue()},_showMyCollections:function(e){this.sortGrid.elem.style.display="none",this.sortGridTitle.style.display="none",this.sortGrid.setSelectable(!1),this.hideMyOffers(),this.resume.hide(),this.hideSortCue(),this.hidePanel(),this.collections&&this.collections.show(e)},_hideMyCollections:function(){this.collections&&this.collections.hide()},showMyCollectionTip:function(){if(!(vui.gConnectionInstance.getUserCollectionEnabled()&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getHasSeenTip("nav"))){for(var e=this.subTab.elem.offsetLeft,t=0;t<=this.selectedInd;t++){var i=this.subTab.children[t];t<this.selectedInd?i.data&&i.data.hasIcon&&i.data.iconWidth&&i.elem.clientWidth<i.data.iconWidth?e+=i.data.iconWidth+i.elem.clientWidth:e+=i.elem.clientWidth:e+=i.elem.clientWidth/2}e=parseInt(e,10)-window.vui.ResDef.myVuduView.MY_COLLECTION_TIP_W/2+"px";var s="Introducing Lists: ",n="Create customized groups of movies and TV. Organize your movies and TV, create curated lists, and more! ";controller.showPopup("SimpleTextDialog",{elemClassName:"myCollectionTip",title:s,text:n,buttons:[{label:vui.strings.transformCase("Got It"),size:1,labelClassName:"font24",desc:"Lists. "+s+" "+n+" Got it!"}],buttonArial:!0,opacity:"opacity50",left:e,dialogBoxClassName:"myCollectionTipBox",titlePos:"relative",textPos:"relative",buttonPos:"relative",overrideBoxClassName:!0,backgroundImage:vui.images.userCollection.tooltip_bubble_nav,callback:function(){vui.m.myCollectionsModel&&vui.m.myCollectionsModel.saveTipState("nav"),controller.hidePopup(),vui.select(this.subTab.subTabs[this.selectedInd])}.bind(this)})}},moveMetalPanelBack:function(){this.movieInfoPanel.elem.removeClass("offscreen")},moveMetaPanelOffscreen:function(){this.movieInfoPanel.elem.addClass("offscreen")},showSampleAd:function(){var e=!1;this.selectedInd!==this.moviesInd&&this.selectedInd!==this.moviesInd+1&&this.selectedInd!==this.moviesInd+2&&this.selectedInd!==this.moviesInd+this.gridIndOffset||(e=!0),e&&this.movieInfoPanel&&!1===this.sortGrid.isShowingSort()&&(this.hidePanel(),this.movieInfoPanel.show_sample_ad(vui.m.getAdUrlForMyLibrary()))},showMyOffers:function(){this.hidePanel(),this.sortGrid.elem.style.display="none",this.sortGridTitle.style.display="none",this.sortGrid.setSelectable(!1),this.hideSortCue(),this.resume.hide(),this.myOffersPage.show()},hideMyOffers:function(){this.myOffersPage.hide()}}),vui.widgets.FeaturedRow=new Class({Extends:vui.widgets.ListOfListRowBase,name:"vui.widgets.FeaturedRow",elemClassName:"FeaturedRow",headerHeight:window.vui.ResDef.recom.HEADER_H,width:window.vui.ResDef.recom.ROW_W,height:window.vui.ResDef.recom.ROW_H,bodyHeight:window.vui.ResDef.recom.BODY_H,marginTop:window.vui.ResDef.recom.MARGIN_T,bindData:function(e,t){if(this.Rowdata=e,this.setTitle(e.title),this.ribbonSearchParam=null,e.contentSearchParameters&&"creditList"==e.contentSearchParameters._type){alert("please test creditlist");var i=e.contentSearchParameters.creditList[0]&&e.contentSearchParameters.creditList[0].credit,s=[];if(5<i.length&&(alert("creditList more then 5?"),i.length=5),0<i.length){for(var n=0;n<i.length;n++)s[n]=this.createCredit(i[n]);var a={content:s,totalCount:i.length,realCount:i.length,currentStart:0,length:function(){return this.totalCount||0},get:function(e){return this.Rowdata[e]}};this.bind(a,0,i.length)}}else{e.contentSearchParameters&&"uiEntrySearch"==e.contentSearchParameters._type&&(this.ribbonSearchParam=e.contentSearchParameters);var o=function(e){e.searchParams&&"uiEntrySearch"==e.searchParams._type&&e.content&&(e.totalCount<5||e.totalCount>vui._CONS.showcaseRibbonCap)&&(this.ribbonSearchParam=null),this.bind(e)}.bind(this);vui.m.featuredCache.getFeaturedRow(this.ind,t,e,o)}},getRibbonSearchParam:function(){return this.ribbonSearchParam}}),vui.widgets.FeaturedLoL=new Class({Extends:vui.widgets.ListOfListBase,name:"vui.widgets.FeaturedLoL",elemClassName:"FeaturedLoL",width:window.vui.ResDef.recom.ROW_W,rowClass:vui.widgets.FeaturedRow,rowHeight:window.vui.ResDef.recom.ROW_H,visibleHeight:2*window.vui.ResDef.recom.ROW_H,init:function(){this.parent.apply(this,arguments)},bind:function(e,t){this.bindUI(e);for(var i=0;i<e.length;i++)this.rows[i]?this.rows[i].bindData(e[i],t):alert("no rows???")},viewAllOnAction_:function(e){this.rows[e].data.searchParams&&(this.rows[e].data.query=this.rows[e].data.searchParams);var t=vui.executeOnContainer(this.parentWidget,"getTitle");this.parentWidget.currentReportText&&(this.rows[e].data.currentReportText=this.parentWidget.currentReportText),this.rows[e].data.parentTitle=t,controller.goToPage("Showcase",this.rows[e].data)}}),vui.widgets.FeaturedView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.FeaturedView",Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate,vui.OmnitureReportGlue],elemClassName:"FeaturedView",el:{},items:{},itemWidth:0,marginLeftRight:2,selectedInd:null,show:function(n){vui.getModel().isAlivePosterBaseUrl(),this.params=n;var e=function(e){if(e){var t;!n.deeplinkTab||(t=vui.m.featuredCache.getSubTabIndex(n.deeplinkTab))&&(n.state={lol:{row:1,item:1,containerTop:0,scollerRatio:0},selectedInd:t},n.isDeeplinking=!0);for(var i=[],s=0;s<e.length;s++)i[s]={},i[s].title=e[s].title&&e[s].title[0]||"",e[s].parameters?i[s].listOrGrid="list":i[s].listOrGrid="grid";this._populateSubTabs(n,i)}else alert("Feature SubTab emtpy")}.bind(this);vui.m.featuredCache.getFeaturedSubTabs(e)},_populateSubTabs:function(e,t){this.subTab=new vui.widgets.SubTab(t),this.attachChild(this.subTab),this.el.container=document.createElement("div"),this.el.container.className="FeaturedContainer",this.elem.appendChild(this.el.container),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.hide(),this.attachChild(this.movieInfoPanel,this.el.container),this.lol=new vui.widgets.FeaturedLoL,this.attachChild(this.lol,this.el.container),vuiFilters.setCurrentFilterType("explore"),vuiFilters.resetCurrentFilters(),e&&e.state?this.subTab.initSelect(e.state.selectedInd):this.subTab.initSelect(0)},_show:function(e){var t=this.subTab.getListOrGrid(e);"list"==t?this._showLoL(e):"grid"==t?this._showGrid(e):alert("Error: should have list or grid")},_showGrid:function(e){this.lol.reset(),this.lol.elem.style.display="none",this.lol.setSelectable(!1),this.grid||(this.grid=new vui.widgets.PosterGrid,this.grid.elem.className="FeaturedPosterGrid",this.attachChild(this.grid,this.el.container)),this.grid.elem.style.display="block",this.grid.setSelectable(!0),this.movieInfoPanel.elem.addClass("gridView");var t={type:"list",name:"COLLECTIONS",state:null};this.params.state&&this.params.state.grid&&(t.state=this.params.state.grid),this.selectedInd=e,this.grid.setList(t,!1)},_showLoL:function(t){this.lol.reset(),this.grid&&(this.grid.elem.style.display="none",this.grid.setSelectable(!1)),this.movieInfoPanel.elem.removeClass("gridView"),this.lol.setSelectable(!0);var e=function(e){e&&this.subTab.selectedInd==t&&(this.selectedInd=t,this._bindLoL(e))}.bind(this);vui.m.featuredCache.getFeatured(t,e)},_bindLoL:function(e){var t,i=e.parameters&&e.parameters.listParameters;i&&0<i.length?this.lol.bind(i,this.selectedInd):(alert("no Featured data"),this.lol.hide()),this.params&&this.params.state&&((t=this.params.state).lol&&(this.subTab.setDeselectedState(this.selectedInd),this.lol.restoreState(t.lol)),this.params.isDeeplinking&&(vui.restoreSelectorPosition(controller.baseLayer.currentPage,[{modelIndex:1,visibleViewIndex:1},{modelIndex:0,visibleViewIndex:0},{modelIndex:0,visibleViewIndex:0},{modelIndex:this.params.state.selectedInd,visibleViewIndex:this.params.state.selectedInd}]),this.params.isDeeplinking=null),delete this.params.state),this.lol.elem.style.display="block"},getTitle:function(){return this.subTab?"SPOTLIGHT - "+this.subTab.getSelectedName():""},saveState:function(){var e={};return this.lol&&(e.lol=this.lol.getState()),this.grid&&(e.grid={},e.grid.scrollOffset=this.grid.getScrollOffset()),e.selectedInd=this.selectedInd,e},buttonOnAction:function(){},buttonOnSelect:function(e){this.selectedGid=e,this._getButtonPosition(this.items[e].elem)},posterOnAction:function(e){vui._.posterOnAction(e)},onSelectedSubTab:function(e){e!==this.selectedInd&&this._show(e),this.showSampleAd()},showSampleAd:function(){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad()},getActiveSubTab:function(){return this.subTab.getSelectedName()||null}}),vui.myOffers={accountId:null,notifyNewOffersWidget:null,accountBenefits:[],directorTimeDelta:-1,displayModels:[],setAccountId:function(e){this.accountId=e},setNotifyUnreadOffersWidget:function(e){this.notifyNewOffersWidget=e,this.notifyNewOffersWidget.setHasNewOffers(this.hasNewOffers())},refresh:function(){var e;-1!=this.directorTimeDelta?this._refresh():(e=this)._getDirectorTimeDelta(function(){e._refresh()})},_refresh:function(s){var e,n;s||(this.accountBenefits=[],this.displayModels=[]),this.accountId?((e={_type:"accountBenefitSearch"}).accountId=this.accountId,e.followup=["targetGroup","offers"],e.count=100,e.offset=s||0,n=this,vui.getModel().doQuery(e,function(e,t,i){t===vui.getModel().queryStatus.ST_SUCCESS?(n._parseAccountBenefitSearch(i),i.moreBelow&&"true"===i.moreBelow[0]?n._refresh(s?s+100:100):n.notifyNewOffersWidget&&n.notifyNewOffersWidget.setHasNewOffers(n.hasNewOffers())):alert("accountBenefitSearch query failed")})):alert("Unable to refresh MyOffers because accountId is not set")},reset:function(){this.accountId=null,this.directorTimeDelta=-1,this.accountBenefits=[],this.displayModels=[],this.notifyNewOffersWidget&&this.notifyNewOffersWidget.setHasNewOffers(!1)},_getDirectorTimeDelta:function(n){var a=this,e={_type:"infoGet"};vui.getModel().doQuery(e,function(e,t,i){var s;t===vui.getModel().queryStatus.ST_SUCCESS?(s=i.currentTime&&0<i.currentTime.length?parseDate(i.currentTime[0])-new Date:0,a.directorTimeDelta=s):alert("infoGet query failed"),n()})},_parseAccountBenefitSearch:function(e){var s,n,a=[];e&&e.accountBenefit&&e.accountBenefit.length&&(s=this,n={},e.accountBenefit.every(function(t){var e=null;try{e=new vui.AccountBenefit(t,s.directorTimeDelta)}catch(e){return alert("Error parsing accountBenefitSearch response, object: "+JSON.encode(t)+", error: "+e),!0}var i=e.getSingleContentId();return i&&(n[i]?(n[i].mergeRelatedBenefit(e),e=null):n[i]=e),e&&a.push(e),!0}),Array.prototype.push.apply(this.accountBenefits,a))},_setBenefitViewed:function(e,t,i){var s={_type:"accountBenefitUpdate"};s.userSegmentId=e,s.targetGroupId=t,s.viewed="true",s.accountId=this.accountId,vui.getModel().doQuery(s,function(e){i(e)})},setBenefitsViewedState:function(e){var s=this,t=this.getBenefitsForContent(e),n=0;t.filter(function(e){return!e.isViewed}).every(function(i){n++,s._setBenefitViewed(i.userSegmentId,i.targetGroupId,function(e){if(n--,e===vui.getModel().queryStatus.ST_SUCCESS){if(0===n){for(var t=0;t<s.displayModels.length;t++)if(s.displayModels[t].userSegmentId==i.userSegmentId&&s.displayModels[t].targetGroupId==i.targetGroupId){s.displayModels[t].isViewed=!0;break}for(t=0;t<s.accountBenefits.length;t++)if(s.accountBenefits[t].userSegmentId==i.userSegmentId&&s.accountBenefits[t].targetGroupId==i.targetGroupId){s.accountBenefits[t].isViewed=!0;break}this.notifyNewOffersWidget&&this.notifyNewOffersWidget.setHasNewOffers(this.hasNewOffers())}}else alert("accountBenefitUpdate query failed")})})},hasNewOffers:function(){return 0<this.accountBenefits.filter(function(e){return!e.isViewed&&e.type===vui.AccountBenefit.BENEFIT_TYPE.CONTENT}).length},getBenefitsForContent:function(t){return this.accountBenefits.filter(function(e){return 0<e.contentOffers.filter(function(e){return e.contentId===t}).length})},getPromoTagUrl:function(e,t){if(e){if(0<this.getBenefitsForContent(vui._.aStr(e.contentId)).length)switch(t){case"poster":return vui.images.myoffers.promo_tag;case"detail":case"meta":return vui.images.myoffers.infopanel_banner}return""}},getExpirationText:function(e){var t=window.getTimeDiffString(e);return t?"Expires in "+t.toLowerCase():"EXPIRED"},_loadDisplayModels:function(o){var r=[],l=0,u=this,e=this.accountBenefits.filter(function(e){return e.type===vui.AccountBenefit.BENEFIT_TYPE.CONTENT&&e.getCheapestOffer()&&e.getCheapestOffer().variantId});if(!e.length)return this.displayModels=r,o(this.displayModels);e.every(function(n){var a=n.getCheapestOffer(),e={_type:"contentVariantSearch",contentVariantId:a.variantId,followup:["offers","preOrderOffers"]};return l++,vui.getModel().doQuery(e,function(e,t,i){var s;l--,t===vui.getModel().queryStatus.ST_SUCCESS&&(s=new vui.MyOfferDisplayModel(n),i.contentVariant&&i.contentVariant.map(function(e){return e.offers&&e.offers[0]&&e.offers[0].offer?e.offers[0].offer:null}).flatten().filter(function(e){return e.offerType&&e.offerType[0]===a.offerType&&e.price&&e.price[0]&&(!e.startTime||parseDate(e.startTime)<VUDU.vuduTime())}).every(function(e){s.fullPrice=parseFloat(e.price)}),r.push(s)),0===l&&(u.displayModels=r.sort(function(e,t){return e.expireDate>t.expireDate}),o(u.displayModels))}),!0})},getDisplayModels:function(e){var t=[];if(this.displayModels.length){for(var i=0;i<this.displayModels.length;i++)this.displayModels[i].expire=this.getExpirationText(this.displayModels[i].expireDate),"EXPIRED"!=this.displayModels[i].expire&&t.push(this.displayModels[i]);this.displayModels=t,e(this.displayModels)}else this._loadDisplayModels(e)}},vui.widgets.MyOfferPoster=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.MyOfferPoster",elemClassName:"myOffersPoster",selectorType:"solidrect",init:function(){this.width=window.vui.ResDef.myoffers.OFFERCARD_W,this.height=window.vui.ResDef.myoffers.OFFERCARD_H,this.img=document.createElement("img"),this.img.className="myOffersPosterImage",this.elem.appendChild(this.img);var e=document.createElement("div");e.className="myOffersPosterContainer",this.container=e,this.elem.appendChild(e),this.el.unreadicon=document.createElement("img"),this.el.unreadicon.className="myOffersPosterUnreadIcon",this.el.unreadicon.src=vui.images.myoffers.card_unread_icon,this.el.unreadicon.style.visibility="hidden",e.appendChild(this.el.unreadicon),this.el.read=document.createElement("div"),this.el.read.className="myOffersPosterRead",e.appendChild(this.el.read),this.el.timeleft=document.createElement("div"),this.el.timeleft.className="myOffersPosterTimeleft",e.appendChild(this.el.timeleft);var t=document.createElement("div");t.style.clear="both",e.appendChild(t),this.el.priceoffer=document.createElement("span"),this.el.priceoffer.className="myOffersPosterPriceOffer",e.appendChild(this.el.priceoffer),this.el.pricebefore=document.createElement("span"),this.el.pricebefore.className="myOffersPosterPriceBefore",e.appendChild(this.el.pricebefore),this.el.title=document.createElement("div"),this.el.title.className="myOffersPosterTitle",e.appendChild(this.el.title),this.el.description=document.createElement("div"),this.el.description.className="myOffersPosterDescription",e.appendChild(this.el.description)},bind:function(e){this.data=e,this.el.read.innerText=e.isViewed?"":"Unread",this.el.unreadicon.style.visibility=e.isViewed?"hidden":"visible",this.img.src=vui.getModel().getPosterUrl({contentId:[e.contentId]},window.vui.ResDef.POSTER_W),this.el.timeleft.innerText=e.expire,this.el.priceoffer.innerText="$"+window.getPriceStr(e.price),this.el.pricebefore.innerText="Reg: $"+window.getPriceStr(e.fullPrice),this.el.title.innerText=e.title,this.el.description.innerText=vui._.multiLineEllipsis(e.description,160),this._setIconDefault(),0==this.selectable&&(this.selectable=!0),this.elem.style.visibility="visible"},unbind:function(){1==this.selectable&&(this.selectable=!1),delete this.data,this.img.src=vui.images.empty1x1,this.el.read.innerText="",this.el.timeleft.innerText="",this.el.priceoffer.innerText="",this.el.pricebefore.innerText="",this.el.title.innerText="",this.el.description.innerText="",this.el.unreadicon.style.visibility="hidden",this.elem.style.visibility="hidden"},onAction:function(){var e;this.data&&(this.data.hasMultipleOffers?(e={_type:"contentSearch",contentId:this.data.contentIds,responseSubset:"micro"},controller.goToPage("Showcase",{title:this.data.title,query:e,parentTitle:"MY OFFERS"})):(vui.executeOnContainer(this.parentWidget,"report",this.data.offerId),vui._.posterOnAction(this.data)))},onSelect:function(){var e="Get Offer: "+this.data.title+". $"+window.getPriceStr(this.data.price)+". "+this.data.expire;vui._.setAriaLabel(e),this._setIconActive()},drawSelector:function(){},onDeselect:function(){this._setIconDefault()},_setIconActive:function(){this.elem.style.border=window.vui.ResDef.myoffers.OUTLINE_W+vui.Theme.activeVariableBorder,this.container.style.backgroundColor="#FFFFFF",this.el.timeleft.style.color="#656565",this.el.title.style.color="#000000",this.el.description.style.color="#656565",this.el.pricebefore.style.color="#656565",this.el.unreadicon.style.color="#656565",this.el.read.style.color="#656565"},_setIconDefault:function(){this.elem.style.border=window.vui.ResDef.myoffers.OUTLINE_W+"px solid transparent",this.container.style.backgroundColor="#093351",this.el.timeleft.style.color="#FFFFFF",this.el.title.style.color="#FFFFFF",this.el.description.style.color="#FFFFFF",this.el.pricebefore.style.color="#FFFFFF",this.el.unreadicon.style.color="#FFFFFF",this.el.read.style.color="#FFFFFF"}}),vui.widgets.MyOffersGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.MyOffersGridList",posterClass:vui.widgets.MyOfferPoster,settings:{normal:{columns:2,rows:2}},columns:2,rows:2,partialRow:!1,currentStart:0,init:function(e){(e=e||{}).paddingBottom=window.vui.ResDef.myoffers.PADDING_BOTTOM,this.parent(e,this.MovieListModel),this.el.bar.className="myOffersGridContainer",this.totalCount=null;var t=vui.account.getAccountId()?vui.strings.getText("GRID_EMPTY_MY_VUDU_OFFERS"):vui.strings.getText("GRID_LOGIN_MY_VUDU_OFFERS",vui.strings.transformCase("Sign Up"));this.msg=new vui.widgets.NoDataMessage(t),this.attachChild(this.msg),this.msg.elem.style.display="none",this.haveReadTTS=!1},refreshList:function(e){var t;this.ariaTimeout&&(clearTimeout(this.ariaTimeout),this.ariaTimeout=null),0===e.length?(this.totalCount=0,this.msg.elem.style.display="block",this.ariaTimeout=setTimeout(function(){var e;this.haveReadTTS||(this.ariaTimeout=null,e=vui.m.userId?vui.strings.getText("GRID_EMPTY_MY_VUDU_OFFERS"):vui.strings.getText("GRID_LOGIN_MY_VUDU_OFFERS"),vui._.setAriaLabel(e),this.haveReadTTS=!0)}.bind(this),2e3),this.setSelectable(!1),this.parentWidget.setSelectable(!1),this.parentWidget.parentWidget.setSelectable(!1),this.parentWidget.scroller.hide()):(this.msg.elem.style.display="none",this.setSelectable(!0),this.parentWidget.setSelectable(!0),this.parentWidget.parentWidget.setSelectable(!0),this.totalCount=e.length,this.movieListModel={data:e,numVisible:4,totalCount:e.length,get:function(e){return this.data[e]}},this.update(),(t=vui.getSelected())&&t._setIconActive&&t._setIconActive(),this.totalCount>this.numVisible?this.parentWidget.scroller.show():this.parentWidget.scroller.hide())},select:function(){this.parent.apply(this,arguments)},hide:function(){this.ariaTimeout&&(clearTimeout(this.ariaTimeout),this.ariaTimeout=null)}}),vui.widgets.MyOffersGrid=new Class({Extends:vui.widgets.PosterGrid,Implements:[vui.widgets.NavBackDelegate,vui.ContentActions],name:"vui.widgets.MyOffersGrid",elemClassName:"myOffersView",listClass:vui.widgets.MyOffersGridList,init:function(){this.el.title=document.createElement("div"),this.el.title.className="myOffersGridTitle",this.el.title.innerHTML=vui.vvPlatform.appFeatureEnabled()?"Your Offers":"My Offers",this.elem.appendChild(this.el.title),this.parent.apply(this,arguments),this.totalCount=this.list.totalCount,this.scroller.elem.className="myOffersGridScroller",this.range.className="myOffersGridResultsCount"},select:function(){this.parent.apply(this,arguments)},show:function(){this.elem.style.display="block";var t=this;vui.myOffers.getDisplayModels(function(e){t.list.refreshList.call(t.list,e)})}}),vui.widgets.MyOffersView=new Class({Extends:vui.widgets.Container,elemClassName:"OffersContainer",Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate],layout:{type:"horizontal"},name:"vui.widgets.myOffersView",init:function(){this.el.main=document.createElement("div"),this.el.main.className="myOffersMain",this.elem.appendChild(this.el.main),this.el.container=document.createElement("div"),this.el.container.className="myVuduContainer",this.el.container.style.left=window.vui.ResDef.myVuduView.CONTAINER_L+"px",this.el.main.appendChild(this.el.container),this.grid=new vui.widgets.MyOffersGrid,this.attachChild(this.grid,this.el.container)},show:function(e){this.elem.style.display="block",this.selected=e&&e.selected||0;var t=this;this.refreshTextTimer=setInterval(function(){vui.myOffers.getDisplayModels(function(e){t.grid.list.refreshList(e)})},1e4),e&&e.state&&(this.grid.list.currentStart=e.state.scrollOffset||0),this.grid.show()},saveState:function(){var e={};return e.scrollOffset=this.grid.list.getScrollOffset(),e},hide:function(){clearInterval(this.refreshTextTimer),this.parent(),this.selectable=!1,this.grid.list.hide()},report:function(e){var t={evars:{},linkType:"lnk_o"};t.evars.browseType="myoffers",t.evars.offerId=e,vui.analytics.trackEvent("event52",t)}}),vui.AccountBenefit=function(e,t){function i(e,t,i,s,n,a,o){this.price=t,this.regularPrice=i,this.contentId=e,this.variantId=s,this.offerType=n,this.stopTime=a,this.offerId=o}var s=e.targetGroup&&e.targetGroup.length?e.targetGroup[0]:null;this.cardTitle=s&&s.cardTitle&&s.cardTitle[0]||"This offer doesn't have a title",this.helloBarText=s&&s.helloBarText&&s.helloBarText[0]||"This offer doesn't have any hellobar text",this.cardDescription=s&&s.cardDescription&&s.cardDescription[0]||"This offer doesn't have a description",this.notificationText=s&&s.notificationText&&s.notificationText[0]||"This notification doesn't have a description",this.targetGroupId=e.targetGroupId&&e.targetGroupId[0],this.userSegmentId=e.userSegmentId&&e.userSegmentId[0];var n,a=e.expirationTime&&e.expirationTime[0];this.expirationDate=a?new Date(parseDate(a).getTime()+t):null,this.isViewed=e.viewed&&e.viewed.length&&"true"===e.viewed[0],this.contentOffers=[],e.offers&&e.offers[0]&&e.offers[0].offer&&e.offers[0].offer[0]&&((n=this).contentOffers=e.offers[0].offer.filter(function(e){return!(e.completeMySeason&&"true"===e.completeMySeason[0]||n._isOfferExpired(e,t)||!n._isCurrentOffer(e,t))}).map(function(e){return n.type=vui.AccountBenefit.BENEFIT_TYPE.CONTENT,new i(e.contentId[0],parseFloat(e.price[0]),e.regularPrice?parseFloat(e.regularPrice[0]):-1,e.contentVariantId[0],e.offerType[0],new Date(n._getOfferStopTime(e).getTime()+t),e.offerId[0])}))},vui.AccountBenefit.prototype.getSingleContentId=function(){var t=this;if(t.contentIds=[],0<this.contentOffers.length){var e=this.contentOffers[0].contentId;return this.contentOffers.every(function(e){return t.contentIds.contains(e.contentId)||t.contentIds.push(e.contentId),!0}),1<t.contentIds.length&&(e=null,t.hasMultipleOffers=!0),e}return null},vui.AccountBenefit.prototype.mergeRelatedBenefit=function(e){this.getCheapestOffer().price>=e.getCheapestOffer().price&&(this.cardTitle=e.cardTitle,this.helloBarText=e.helloBarText,this.cardDescription=e.cardDescription,this.notificationText=e.notificationText,this.targetGroupId=e.targetGroupId,this.userSegmentId=e.userSegmentId,this.expirationDate=e.expirationDate,this.isViewed=!!e.isViewed&&e.isViewed,this.offerId=e.offerId),this.contentOffers=this.contentOffers.concat(e.contentOffers)},vui.AccountBenefit.prototype._getOfferStopTime=function(e){return e.preOrderStopTime&&0<e.preOrderStopTime.length?parseDate(e.preOrderStopTime[0]):e.stopTime&&0<e.stopTime.length?parseDate(e.stopTime[0]):null},vui.AccountBenefit.prototype._getOfferStartTime=function(e){return e.preOrderStartTime&&0<e.preOrderStartTime.length?parseDate(e.preOrderStartTime[0]):e.startTime&&0<e.startTime.length?parseDate(e.startTime[0]):null},vui.AccountBenefit.prototype._isCurrentOffer=function(e,t){var i=this._getOfferStartTime(e);return!i||i<=new Date((new Date).getTime()+t)},vui.AccountBenefit.prototype._isOfferExpired=function(e,t){var i=this._getOfferStopTime(e);return!!i&&i+t<new Date},vui.AccountBenefit.prototype.getCheapestOffer=function(){for(var e=null,t=null,i=0;i<this.contentOffers.length;++i)(null==e||e>this.contentOffers[i].price)&&(e=this.contentOffers[i].price,t=this.contentOffers[i],this.offerId=this.contentOffers[i].offerId);return t},vui.AccountBenefit.prototype.getEarliestExpirationTimeForContent=function(t){var i=this.expirationDate;return this.contentOffers.filter(function(e){return e.contentId===t}).every(function(e){return(null==i||e.stopTime<i)&&(i=e.stopTime),!0}),i},vui.AccountBenefit.BENEFIT_TYPE={CONTENT:"content"},vui.MyOfferDisplayModel=function(e){this.title=e.cardTitle,this.description=e.cardDescription,this.isViewed=e.isViewed,this.userSegmentId=e.userSegmentId,this.targetGroupId=e.targetGroupId;var t=e.getCheapestOffer();this.contentId=t.contentId,this.price=t.price,this.fullPrice=t.regularPrice,-1!==this.fullPrice&&null!=this.fullPrice||(this.fullPrice=t.price),this.expireDate=e.getEarliestExpirationTimeForContent(this.contentId),this.expire=vui.myOffers.getExpirationText(this.expireDate),this.offerId=e.offerId,this.hasMultipleOffers=e.hasMultipleOffers,this.contentIds=e.contentIds},vui.widgets.Tabs=new Class({Extends:vui.widgets.Container,name:"vui.widgets.Tabs",elemPosition:"static",selectedTab:0,selectorType:"none",layout:{type:"horizontal"},itemActionPrefix:"tab",tabItemClass:null,elemClassName:"outerTabContainer",itemChildren:[],init:function(){},setModel:function(e){var t=(thismodel=e).tabs,i=0;this.itemChildren=[];for(var s=0,n=t.length;s<n;s++){var a=new this.tabItemClass;a.bind(t[s],s),a.left=i,a.elem.style.left=i+"px",i+=a.getItemWidth(),this.attachChild(a),this.itemChildren.push(a)}},setUnSelected:function(){this.activeItem&&this.activeItem.setUnSelectedClass()},setSelected:function(){this.activeItem&&this.activeItem.setSelectedClass()},onDeselect:function(){},restoreActive:function(e){alert("RESTORE ACTIVE:"+e);for(var t=0,i=this.itemChildren.length;t<i;t++){var s=this.itemChildren[t];if(s.model&&s.model.name==e){this.selected=t,this.setBg("Active",s),s.setDefaultClass(),s.onSelect(!0),s.onPageLoaded();break}}},itemActive:function(e){alert("ITEM ACTIVE: prefix:"+this.itemActionPrefix),this.activeItem&&this.activeItem!=e&&this.activeItem.onInactive(),this.activeItem=e,vui.executeOnContainer(this.parentWidget,this.itemActionPrefix+"Active",e)},itemDraw:function(e){this.setBg("Select",e),e.setActiveClass()},itemSelect:function(e){this.selectItem=e,this.setBg("Select",e)},itemDeselect:function(e){},setDisabled:function(){},setBg:function(e,t){}}),vui.widgets.ItemUiDelegate=new Class({name:"vui.widgets.ItemUiDelegate",setDefaultClass:function(){this.model.iconPath?this.elem.style.backgroundPosition="0 0":this.elem.style.color=vui.Theme.secondaryDefaultTextColor},setActiveClass:function(){this.model.iconPath?"search"==this.model.type?this.elem.style.backgroundPosition="0 -"+window.vui.ResDef.home.TAB_SEARCH_HEIGHT+"px":this.elem.style.backgroundPosition="0 -"+window.vui.ResDef.home.TAB_HEIGHT+"px":this.elem.style.color=vui.Theme.primarySelectedButtonColor},setSelectedClass:function(){this.model.iconPath?"search"==this.model.type?this.elem.style.backgroundPosition="0 -"+2*window.vui.ResDef.home.TAB_SEARCH_HEIGHT+"px":this.elem.style.backgroundPosition="0 -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px":this.elem.style.color=vui.Theme.activeTextColor},setUnSelectedClass:function(){this.setSelectedClass()},onAction:function(){vui.select(this)},onInactive:function(){if(this.active=!1,this.itemParams&&this.setDefaultClass)try{this.setDefaultClass()}catch(e){}},onSelect:function(e){this.active=!0,vui.executeOnContainer(this.parentWidget,"itemActive",this)},drawSelector:function(e){vui.executeOnContainer(this.parentWidget,"itemDraw",this),this.parent(e)},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"itemDeselect",this)},onPageLoaded:function(){}}),vui.widgets.MovieDetailsTabItem=new Class({Extends:vui.widgets.LeafContainer,Implements:vui.widgets.ItemUiDelegate,name:"vui.widgets.MovieDetailsTabItem",selectorType:"none",elemClassName:"movieDetailsTab fontMedium",itemParams:{defaultText:"defaultTab",actionText:"actionTab"},padding:28,init:function(){vui.vvPlatform.appFeatureEnabled()?this.height=window.vui.ResDef.detailPage.SUBTAB_HEIGHT_P34:this.height=window.vui.ResDef.detailPage.SUBTAB_HEIGHT,this.fgDiv=new Element("div",{class:"fgDiv fontMedium"}),this.width=window.vui.ResDef.detailPage.SUBTAB_WIDTH,this.bgDiv=new Element("div",{class:"tab_bg_default"}),this.elem.appendChild(this.bgDiv),this.elem.appendChild(this.fgDiv),this.fgDiv.style.color=vui.Theme.movieDetailsTabDefaultTextColor,this.elem.style.height=this.height+"px"},bind:function(e,t){e&&(this.model=e,this.pos=t,e.title&&vui._.innerHTML(this.fgDiv,e.title),"familyFilter"===e.name&&this.doCalloutAnimation(),e.iconPath&&(this.fgDiv.style.background="url('"+e.iconPath+"') 0 0 no-repeat"),this.elem.style.width=this.width+"px")},doCalloutAnimation:function(){vui.m.familyPlayCalloutAnimation&&vui.m.familyPlayCalloutAnimation.canPlayAnimation()&&(vui.m.familyPlayCalloutAnimation.recordAnimationShown(),alert("Doing family play callout animation!"),this.elem.style.height="40px",setTimeout(function(){this.elem.classList.add("startCalloutAnimation");var e=createDiv({className:"calloutPopup",position:"relative"},this.elem);createDiv({className:"calloutPopupLabel",text:"NEW"},e);setTimeout(function(){e.classList.add("startCalloutPopupAnimation")},0),setTimeout(function(){this.elem.classList.replace("startCalloutAnimation","stopCalloutAnimation"),e.classList.replace("startCalloutPopupAnimation","stopCalloutPopupAnimation")}.bind(this),5e3)}.bind(this),1e3))},setDefaultClass:function(){this.model.iconPath?this.fgDiv.style.backgroundPosition="0 0":this.fgDiv.style.color=vui.Theme.movieDetailsTabDefaultTextColor,this.bgDiv.className="tab_bg_default"},setActiveClass:function(){this.model.iconPath?this.fgDiv.style.backgroundPosition="0 -"+window.vui.ResDef.home.TAB_HEIGHT+"px":this.fgDiv.style.color=vui.Theme.primarySelectedTextColor,this.bgDiv.className="tab_bg_active"},setSelectedClass:function(){this.model.iconPath&&(this.fgDiv.style.backgroundPosition="0 -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px"),this.bgDiv.className="tab_bg_selected"},setUnSelectedClass:function(){this.model.iconPath?this.fgDiv.style.backgroundPosition="0 -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px":this.fgDiv.style.color=vui.Theme.movieDetailsTabDefaultTextColor,this.bgDiv.className="tab_bg_selected"},onDeselect:function(){this.parentWidget.activeItem==this?this.setUnSelectedClass():this.setDefaultClass(),vui.executeOnContainer(this.parentWidget,"trackInterest",{title:this.model.title,isEnter:!1})},getItemWidth:function(){return this.width||0},getItemHeight:function(){return this.height||0},unbind:function(){delete this.model,this.elem.style.display="none"},onSelect:function(e){if(vui._.setAriaLabel(this.model.title),e)return this.setUnSelectedClass(),void(this.parentWidget.activeItem=this);vui.executeOnContainer(this.parentWidget,"trackInterest",{title:this.model.title,isEnter:!0}),vui.executeOnContainer(this.parentWidget,"updateDescriptionContainer")},onAction:function(){vui.select(this),this.parentWidget.activeItem==this?vui.executeOnContainer(this.parentWidget,"onDirectionRight"):vui.executeOnContainer(this.parentWidget,"itemActive",this)},onPageLoaded:function(){vui.executeOnContainer(this.parentWidget,"loadTab",this)}}),vui.widgets.MovieDetailsTabs=new Class({Extends:vui.widgets.Tabs,tabItemClass:vui.widgets.MovieDetailsTabItem,name:"vui.widgets.MovieDetailsTabs",layout:{type:"vertical"},elemClassName:"movieDetailsOuterTabContainer",setModel:function(e){var t=(this.model=e).tabs,i=16;this.itemChildren=[];for(var s=0,n=t.length;s<n;s++){var a=new this.tabItemClass;a.bind(t[s],s),a.top=i,a.elem.style.top=i+"px",i+=a.getItemHeight(),this.attachChild(a),this.itemChildren.push(a)}},onDirectionLeft:function(){vui.executeOnContainer(this,"showDescriptionContainer"),vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},onBack:function(){vui.executeOnContainer(this,"showDescriptionContainer"),vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},afterOnDirectionDown:function(){vui.getSelected().onAction()},afterOnDirectionUp:function(){vui.getSelected().onAction()}}),vui.widgets.HomeTabItem3=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.HomeTabItem3",selectorType:"none",elemClassName:"HomeTabItem3",itemParams:{defaultText:"defaultTab3",actionText:"actionTab3"},init:function(){this.elem.setAttribute("role","menuitem"),this.elem.style.position="static",this.el.title=document.createElement("div"),this.el.title.className="HomeTabItemTitle",this.elem.appendChild(this.el.title),this.el.title.style.color="white",this.el.title.style.height=window.vui.ResDef.home.TAB_HEIGHT+"px"},bind:function(e,t){e&&(this.model=e,this.pos=t,"my"==e.name?vui._.innerHTML(this.el.title,vui.strings.getTransformedText(vui.vvPlatform.appFeatureEnabled()?"TAB_YOUR_LIBRARY":"TAB_MY_VUDU")):e.title&&vui._.innerHTML(this.el.title,vui.strings.transformCase(e.title)),e.iconPath&&(this.el.title.style.backgroundImage="url('"+e.iconPath+"') ",this.el.title.style.height="32px","search"==e.type?(this.el.title.addClass("search_icon"),this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_SEARCH_HEIGHT+"px",this.el.title.style.height="34px"):(this.elem.addClass("icon"),this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px")))},setDefaultClass:function(){this.model.iconPath&&("search"==this.model.type?this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_SEARCH_HEIGHT+"px":this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px"),this.el.title.style.color="white",this.el.title.style.borderBottom="none",this.elem.style.backgroundColor="initial",this.elem.style.borderRadius="0"},setActiveClass:function(){this.model.iconPath&&("search"==this.model.type?(this.el.title.addClass("search_icon"),this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -0px"):(this.elem.addClass("icon"),this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px 2px")),this.el.title.style.color="#000000",this.elem.style.backgroundColor=vui.Theme.alternateSelectedButtonColor,this.elem.style.borderRadius="6px",this.el.title.style.borderBottom="none"},setSelectedClass:function(){this.setUnSelectedClass()},setUnSelectedClass:function(){this.model.iconPath&&("search"==this.model.type?this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_SEARCH_HEIGHT+"px":this.el.title.style.backgroundPosition=window.vui.ResDef.home.TAB_ICON_PADDING+"px -"+2*window.vui.ResDef.home.TAB_HEIGHT+"px"),this.el.title.style.color="#FFFFFF",this.el.title.style.borderBottom="2px solid white",this.elem.style.backgroundColor="initial",this.elem.style.borderRadius="0"},onAction:function(){this.active?vui.executeOnContainer(this.parentWidget,"onDirectionDown"):(this.active=!0,vui.executeOnContainer(this.parentWidget,"itemActive",this))},onInactive:function(){if(this.active=!1,this.itemParams&&this.setDefaultClass)try{this.setDefaultClass()}catch(e){}},onSelect:function(e){alert("itemUiDelgate: onSelect, directionarrow"),vui.select(this),this.drawSelector(!0),vui._.setAriaLabel(this.el.title.innerHTML||this.model.type)},drawSelector:function(e){vui.executeOnContainer(this.parentWidget,"itemDraw",this),this.parent(e)},onDeselect:function(){alert("itemUiDelgate: onDeselect, active"),this.active?this.setSelectedClass():this.setDefaultClass(),vui.executeOnContainer(this.parentWidget,"itemDeselect",this)},omReportFailedSearch:function(e){var t,i;!controller.baseLayer.currentPage||controller.baseLayer.currentPage.activeTab.toLowerCase()!==e||(t=controller.baseLayer.currentPage).children&&t.children[1]&&t.children[1].children&&t.children[1].children[0]&&((i=t.children[1].children[0])&&i.omReportFailedSearch&&i.omReportFailedSearch())},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft"),this.omReportFailedSearch(vui.gConnectionInstance.usePersonalizedApis()?"tv":"recommended")},onDirectionRight:function(){vui.executeOnContainer(this.parentWidget,"onDirectionRight"),(this.parentWidget.selected||-1)===(Array.isArray(this.parentWidget.children)?this.parentWidget.children.length:0)-1&&this.setDefaultClass(),this.omReportFailedSearch("infosettings")}}),vui.widgets.MyOffersTabButton=new Class({Extends:vui.widgets.HomeTabItem3,name:"vui.widgets.MyOffersTabButton",bind:function(e,t){this.parent.apply(this,arguments),this.el.title.style.width=window.vui.ResDef.home.TAB_MYOFFERS_ICON_WIDTH+"px",this.el.title.style.height="32px",vui.myOffers&&vui.myOffers.setNotifyUnreadOffersWidget(this)},setHasNewOffers:function(e){var t="url('"+(e?vui.images.home.myoffers_notification_unread:vui.images.home.myoffers_notification_read)+"') ";this.el.title.style.backgroundImage=t},onSelect:function(e){alert("itemUiDelgate: onSelect, directionarrow"),vui.select(this),this.drawSelector(!0),vui.vvPlatform.appFeatureEnabled()?vui._.setAriaLabel("Your Offers"):vui._.setAriaLabel("My Offers")}}),vui.widgets.Tabs3=new Class({Extends:vui.widgets.Tabs,name:"vui.widgets.Tabs3",tabItemClass:vui.widgets.HomeTabItem3,setModel:function(e){this.elem.setAttribute("role","menubar");var t=(this.model=e).tabs;this.itemChildren=[];for(var i,s=0,n=0,a=t.length;n<a;n++){!0===t[n].requireLogin&&!vui.account.getAccountId()||(i=null,(i="myOffers"===t[n].name?new vui.widgets.MyOffersTabButton:new this.tabItemClass).bind(t[n],s),this.attachChild(i),this.itemChildren.push(i),s++)}},setActive:function(e){alert("SET ACTIVE: "+e);for(var t=0,i=this.itemChildren.length;t<i;t++){var s=this.itemChildren[t];s.model&&s.model.name===e?(this.selected=t,s.setSelectedClass(),s.setActiveClass(),s.onAction()):s.setDefaultClass()}},restoreActive:function(e){alert("RESTORE ACTIVE:"+e);for(var t=0,i=this.itemChildren.length;t<i;t++){var s=this.itemChildren[t];if(s.model&&s.model.name==e){this.selected=t,s.setSelectedClass(),s.onAction();break}}},afterOnDirectionDown:function(){vui.isOnSelectionPath(this)&&vui.getSelected().onAction()},afterOnDirectionUp:function(){vui.isOnSelectionPath(this)&&vui.getSelected().onAction()}}),vui.widgets.SubTabItem=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.SubTabItem",elemClassName:"SubTabItem",selectorType:"none",elemPosition:"static",init:function(e,t){this.elem.setAttribute("role","menuitem"),this.ind=e,this.data=t,this.el.title=document.createElement("div"),this.el.title.className="SubTabItemTitle",this.el.title.innerHTML=t.title,this.elem.appendChild(this.el.title),this.data.hasIcon&&(this.icon=createImg({className:this.data.iconTabClassName,position:"relative"},this.elem.children[0])),this.setIconDefault()},onSelect:function(){this.setIconSelected(),vui._.setAriaLabel(this.data.title),this.data.ariaLabel&&vui._.setAriaLabel(this.data.ariaLabel)},setSelectedClass:function(){this.setUnSelectedClass()},setUnSelectedClass:function(){this.setIconSelected()},drawSelector:function(){this.setIconSelected(),this.data},onDeselect:function(){vui.executeOnContainer(this.parentWidget,"getSelected_")===this.ind?this.setIconDeselected():this.setIconDefault()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack"),this.setIconDeselected()},onDirectionUp:function(){vui.executeOnContainer(this.parentWidget,"onDirectionUp"),this.setIconDeselected()},setIconSelected:function(){this.el.title.style.color="#000000",this.el.title.style.backgroundColor=vui.Theme.alternateSelectedButtonColor,this.el.title.style.borderRadius="6px",this.el.title.style.borderBottom="none",this.data.hasIcon&&(this.icon.src=this.data.selectedIconSrc||this.data.defaultIconSrc)},setIconDeselected:function(){this.el.title.style.backgroundColor="initial",this.el.title.style.borderRadius="0",this.el.title.style.borderBottom="2px solid white",this.el.title.style.color="#FFFFFF",this.data.hasIcon&&(this.icon.src=this.data.deSelectedIconSrc||this.data.defaultIconSrc)},setIconDefault:function(){this.el.title.style.color="#FFFFFF",this.el.title.style.borderBottom="none",this.el.title.style.backgroundColor="transparent",this.el.title.style.backgroundColor="initial",this.el.title.style.borderRadius="0",this.data.hasIcon&&(this.icon.src=this.data.defaultIconSrc)},onAction:function(e){this.parentWidget.selectedInd===this.ind?vui.executeOnContainer(this.parentWidget,"onDirectionDown"):(vui.executeOnContainer(this.parentWidget,"onSelectedSubTab",this.ind),vui.executeOnContainer(this.parentWidget,"setAllSubTabDefault_"))}}),vui.widgets.SubTab=new Class({Extends:vui.widgets.HorizontalContainer,Implements:vui.widgets.NavBackDelegate,name:"vui.widgets.SubTab",elemClassName:"SubTab",selectedInd:null,init:function(e){this.data=e,this.subTabs={};for(var t=0;t<e.length;t++)this.subTabs[t]=new vui.widgets.SubTabItem(t,e[t]),this.attachChild(this.subTabs[t]);this.selectedDelay=null,this.canReportDelay=null,this._firstCreated=!0,this.rowReportTimer=null},setSubTabDeselected:function(){vui._.isIndex(this.selectedInd)&&this.subTabs[this.selectedInd]&&this.subTabs[this.selectedInd].setIconDeselected()},onSelectedSubTab:function(e){var t,i;clearTimeout(this.selectedDelay),clearTimeout(this.canReportDelay),clearTimeout(this.rowReportTimer),vui._.deleteZapApiEvarsFromSessionStore(),this.selectedInd!==e||this.loading?(i=t=null,this.data[e].element&&"page"===vui._.aStr(this.data[e].element.elementType)&&this.data[e].element.uxElementId?(t=vui._.aStr(this.data[e].element.uxElementId),vui.getModel().userSessionStore.addToStore("zap-api-page-id",t)):this.data[e].element&&"row"===vui._.aStr(this.data[e].element.elementType)&&this.data[e].element.uxElementId&&(i=vui._.aStr(this.data[e].element.uxElementId)),this.selectedInd=e,this._firstCreated?(vuiFilters.setCurrentFilterType(null),vui.executeOnContainer(this.parentWidget,"onSelectedSubTab",e),this.canReportDelay=setTimeout(function(){vui.executeOnContainer(this,"omTrackSubTab",{pageTitle:this.data[e].title,pageId:t,events:t?"event206":null})}.bind(this),100)):(this.loading=!0,this.selectedDelay=setTimeout(function(){vui.executeOnContainer(this.parentWidget,"onSelectedSubTab",e),vui.executeOnContainer(this,"omTrackSubTab",{pageTitle:this.data[e].title,pageId:t,events:t?"event206":null}),this.loading=!1}.bind(this),150)),this.rowReportTimer=setTimeout(function(){i&&vui.executeOnContainer(this,"omTrackRowId",i),clearTimeout(this.rowReportTimer)}.bind(this),2e3)):vui.executeOnContainer(this.parentWidget,"showSampleAd"),this._firstCreated=!1},initSelect:function(e){this.setDeselectedState(e),this.onSelectedSubTab(e)},setDeselectedState:function(e){this.subTabs[e].setIconDeselected(),this.selected=e},getSelected_:function(){return this.selectedInd},getSelectedName:function(){try{return this.subTabs[this.selected].data.title||""}catch(e){}return""},setAllSubTabDefault_:function(){for(var e in this.subTabs)e!=this.selectedInd&&this.subTabs[e].setIconDefault()},getSubTabData:function(e){return this.subTabs[e]&&this.subTabs[e].data&&this.subTabs[e].data&&this.subTabs[e].data.element||null},getListOrGrid:function(e){return this.subTabs[e]&&this.subTabs[e].data&&this.subTabs[e].data.listOrGrid||null},disableItem:function(e){this.subTabs[e]&&(this.subTabs[e].setSelectable(!1),this.subTabs[e].hide())},enableItem:function(e){this.subTabs[e]&&(this.subTabs[e].setSelectable(!0),this.subTabs[e].elem.style.display="block")},afterOnDirectionDown:function(){vui.isOnSelectionPath(this)&&vui.getSelected().onAction()},afterOnDirectionUp:function(){vui.isOnSelectionPath(this)&&vui.getSelected().onAction()}}),vui.widgets.SearchKeyButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size13_default",e.selectClassName="btn_bg_select btn_bg_size13_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.elem.style.left=e.index*window.vui.ResDef.searchView.KEYPAD_BUTTON_LEFT+"px",this.label.className=this.label.className+" fontMedium"},bind:function(e){this.setLabel(e)},onAction:function(){vui._.setAriaLabel(vui._.getSymbolLabel(this.getLabel())+"- selected"),vui.executeOnContainer(this.parentWidget,"onKey",this.getLabel())},onSelect:function(){this.parent(),vui._.setAriaLabel(vui._.getSymbolLabel(this.getLabel()))}}),vui.widgets.SearchKeypadRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.searchKeypadRow",layout:{type:"horizontal"},init:function(e){this.rowIndex=e.index,this.elem.className="searchKeypadRow_"+e.index,this.elem.style.top=e.index*window.vui.ResDef.searchView.KEYPAD_BUTTON_TOP+"px",this.keyButton=[];for(var t=0;t<6;t++)this.keyButton[t]=new vui.widgets.SearchKeyButton({elemClassName:"searchKeypadButton_"+t,index:t}),this.attachChild(this.keyButton[t])},bind:function(e){for(var t=0;t<6;t++)$defined(e[t])?(this.keyButton[t].setLabel(e[t]),this.keyButton[t].elem.style.display="block",this.keyButton[t].selectable=!0):(this.keyButton[t].elem.style.display="none",this.keyButton[t].selectable=!1)},onDirectionDown:function(){for(var e,t=0;t<6;t++)if(vui.getSelected()==this.keyButton[t]){e=t;break}vui.executeOnContainer(this.parentWidget,"rowDown",{index:this.rowIndex,selectedButtonIndex:e})},onDirectionUp:function(){for(var e,t=0;t<6;t++)if(vui.getSelected()==this.keyButton[t]){e=t;break}vui.executeOnContainer(this.parentWidget,"rowUp",{index:this.rowIndex,selectedButtonIndex:e})}}),vui.widgets.LetterPad=new Class({Extends:vui.widgets.Container,name:"vui.widgets.LetterPad",elemClassName:"letterPad",layout:{type:"vertical"},init:function(e){this.keyString=vui.vvPlatform.appFeatureEnabled()?"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890":vui.strings.getText("KEYBOARD_SEARCH_KEYS"),this.rows=[];for(var t=0;t<6;t++)this.rows[t]=new vui.widgets.SearchKeypadRow({index:t}),this.attachChild(this.rows[t])},bind:function(){for(var e=0;e<6;e++)this.rows[e].bind(this.keyString.substr(6*e,6))},onSymbolLetterToggleKey:function(e){e==vui.strings.getText("KEYBOARD_ABC_KEYS")?(vui._.setAriaLabel("alphanumeric keyboard selected"),this.keyString=vui.vvPlatform.appFeatureEnabled()?"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890":vui.strings.getText("KEYBOARD_SEARCH_KEYS"),this.bind(),this.parentWidget.toggleRow.symbolKey.ttsLabel="Symbols Keyboard",this.parentWidget.toggleRow.abcKey.ttsLabel="Alphanumeric Keyboard On"):(vui._.setAriaLabel("symbols keyboard selected"),this.keyString="!@#$^&*()\\/?,_-+\"%'.;:<>=[]{}|~`",this.bind(),this.parentWidget.toggleRow.symbolKey.ttsLabel="Symbols Keyboard On",this.parentWidget.toggleRow.abcKey.ttsLabel="Alphanumeric Keyboard")},rowDown:function(e){var t;e.index<5&&(t=e.index+1),this.rows[t]&&this.rows[t].children&&this.rows[t].children[e.selectedButtonIndex]&&1==this.rows[t].children[e.selectedButtonIndex].selectable?vui.select(this.rows[t].children[e.selectedButtonIndex]):vui.executeOnContainer(this,"onDirectionDown")},rowUp:function(e){var t;alert("**** rowUp"+JSON.encode(e)),0<e.index&&(t=e.index-1),this.rows[t]&&this.rows[t].children&&this.rows[t].children[e.selectedButtonIndex]&&1==this.rows[t].children[e.selectedButtonIndex].selectable?vui.select(this.rows[t].children[e.selectedButtonIndex]):vui.executeOnContainer(this,"onDirectionUp")}}),vui.widgets.ExtraButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e=e||{};vui.vvPlatform.appFeatureEnabled()?e.defaultClassName="btn_bg_default btn_bg_size15_default":e.defaultClassName="btn_bg_dark_default btn_bg_size15_default",e.selectClassName="btn_bg_select btn_bg_size15_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" fontSmall"},bind:function(e){this.setLabel(e)}}),vui.widgets.ExtraButtonsRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.extraButtonsRow",elemClassName:"extraButtonsRow",layout:{type:"horizontal"},init:function(e){this.backKey=new vui.widgets.ExtraButton({elemClassName:"backKey",label:vui.strings.getTransformedText("KEYBOARD_DELETE_BUTTON")}),this.spaceKey=new vui.widgets.ExtraButton({elemClassName:"spaceKey",label:vui.strings.getTransformedText("KEYBOARD_SPACE_KEY")}),this.clearKey=new vui.widgets.ExtraButton({elemClassName:"clearKey",label:vui.strings.getTransformedText("KEYBOARD_CLEAR_KEY")}),this.backKey.onAction=function(){vui.executeOnContainer(this.parentWidget,"onBackspaceKey")},this.attachChild(this.backKey),this.attachChild(this.spaceKey),this.spaceKey.onAction=function(){vui._.setAriaLabel("space selected"),vui.executeOnContainer(this.parentWidget,"onKey"," ")},this.attachChild(this.clearKey),this.clearKey.onAction=function(){vui.executeOnContainer(this.parentWidget,"onClearKey")}}}),vui.widgets.SymbolLetterToggleButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){e=e||{};vui.vvPlatform.appFeatureEnabled()?e.defaultClassName="btn_bg_default btn_bg_size14_default":e.defaultClassName="btn_bg_dark_default btn_bg_size14_default",e.selectClassName="btn_bg_select btn_bg_size14_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" fontSmall"},bind:function(e){this.setLabel(e)},onAction:function(){vui.executeOnContainer(this.parentWidget,"onSymbolLetterToggleKey",this.getLabel())},onSelect:function(){this.parent(),vui._.setAriaLabel(this.ttsLabel)}}),vui.widgets.ToogleRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.toogleRow",layout:{type:"horizontal"},init:function(e){this.abcKey=new vui.widgets.SymbolLetterToggleButton({elemClassName:"abcKey"}),this.abcKey.ttsLabel="Alphanumeric keyboard on",this.attachChild(this.abcKey),this.symbolKey=new vui.widgets.SymbolLetterToggleButton({elemClassName:"symbolKey"}),this.symbolKey.ttsLabel="Symbol keyboard",this.attachChild(this.symbolKey)},bind:function(){this.abcKey.setLabel(vui.strings.getText("KEYBOARD_ABC_KEYS")),this.symbolKey.setLabel(vui.strings.getText("KEYBOARD_SYMBOL_KEYS"))}}),vui.widgets.searchKeypad=new Class({Extends:vui.widgets.Container,name:"vui.widgets.searchKeypad",layout:{type:"vertical"},elemClassName:"searchKeypad",init:function(e){this.toggleRow=new vui.widgets.ToogleRow,this.attachChild(this.toggleRow),this.letterPad=new vui.widgets.LetterPad,this.attachChild(this.letterPad),this.extraButtonsRow=new vui.widgets.ExtraButtonsRow,this.attachChild(this.extraButtonsRow)},bind:function(){this.toggleRow.bind(),this.letterPad.bind()},onSymbolLetterToggleKey:function(e){this.letterPad.onSymbolLetterToggleKey(e)}}),vui.widgets.SearchField=new Class({Extends:vui.widgets.Container,name:"vui.widgets.searchField",elemClassName:"searchField",layout:{type:"horizontal"},init:function(e){this.selectable=!1}}),vui.widgets.SearchKeyButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size13_default",e.selectClassName="btn_bg_select btn_bg_size13_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.elem.style.left=e.index*window.vui.ResDef.searchView.KEYPAD_BUTTON_LEFT+"px",this.label.className=this.label.className+" fontMedium"},bind:function(e){this.setLabel(e)},onAction:function(){vui._.setAriaLabel(vui._.getSymbolLabel(this.getLabel().toLowerCase())+"- selected"),vui.executeOnContainer(this.parentWidget,"onKey",this.getLabel())},onSelect:function(){this.parent(),vui._.setAriaLabel(vui._.getSymbolLabel(this.getLabel()).toLowerCase())}}),vui.widgets.SearchKeypadRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.searchKeypadRow",layout:{type:"horizontal"},init:function(e){this.rowIndex=e.index,this.elem.className="searchKeypadRow_"+e.index,this.elem.style.top=e.index*window.vui.ResDef.searchView.KEYPAD_BUTTON_TOP+"px",this.keyButton=[];for(var t=0;t<6;t++)this.keyButton[t]=new vui.widgets.SearchKeyButton({elemClassName:"searchKeypadButton_"+t,index:t}),this.attachChild(this.keyButton[t])},bind:function(e){for(var t=0;t<6;t++)$defined(e[t])?(this.keyButton[t].setLabel(e[t]),this.keyButton[t].elem.style.display="block",this.keyButton[t].selectable=!0):(this.keyButton[t].elem.style.display="none",this.keyButton[t].selectable=!1)},onDirectionDown:function(){for(var e,t=0;t<6;t++)if(vui.getSelected()==this.keyButton[t]){e=t;break}vui.executeOnContainer(this.parentWidget,"rowDown",{index:this.rowIndex,selectedButtonIndex:e})},onDirectionUp:function(){for(var e,t=0;t<6;t++)if(vui.getSelected()==this.keyButton[t]){e=t;break}vui.executeOnContainer(this.parentWidget,"rowUp",{index:this.rowIndex,selectedButtonIndex:e})}}),vui.widgets.LetterPad=new Class({Extends:vui.widgets.Container,name:"vui.widgets.LetterPad",elemClassName:"letterPad",layout:{type:"vertical"},init:function(e){this.keyString=vui.vvPlatform.appFeatureEnabled()?"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890":vui.strings.getText("KEYBOARD_SEARCH_KEYS"),this.rows=[];for(var t=0;t<6;t++)this.rows[t]=new vui.widgets.SearchKeypadRow({index:t}),this.attachChild(this.rows[t])},bind:function(){for(var e=0;e<6;e++)this.rows[e].bind(this.keyString.substr(6*e,6))},onSymbolLetterToggleKey:function(e){e==vui.strings.getText("KEYBOARD_ABC_KEYS")?(vui._.setAriaLabel("alphanumeric keyboard selected"),this.keyString=vui.vvPlatform.appFeatureEnabled()?"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890":vui.strings.getText("KEYBOARD_SEARCH_KEYS"),this.bind(),this.parentWidget.toggleRow.symbolKey.ttsLabel="Symbols Keyboard",this.parentWidget.toggleRow.abcKey.ttsLabel="Alphanumeric Keyboard On"):(vui._.setAriaLabel("symbols keyboard selected"),this.keyString="!@#$^&*()\\/?,_-+\"%'.;:<>=[]{}|~`",this.bind(),this.parentWidget.toggleRow.symbolKey.ttsLabel="Symbols Keyboard On",this.parentWidget.toggleRow.abcKey.ttsLabel="Alphanumeric Keyboard")},rowDown:function(e){var t;e.index<5&&(t=e.index+1),this.rows[t]&&this.rows[t].children&&this.rows[t].children[e.selectedButtonIndex]&&1==this.rows[t].children[e.selectedButtonIndex].selectable?vui.select(this.rows[t].children[e.selectedButtonIndex]):vui.executeOnContainer(this,"onDirectionDown")},rowUp:function(e){var t;alert("**** rowUp"+JSON.encode(e)),0<e.index&&(t=e.index-1),this.rows[t]&&this.rows[t].children&&this.rows[t].children[e.selectedButtonIndex]&&1==this.rows[t].children[e.selectedButtonIndex].selectable?vui.select(this.rows[t].children[e.selectedButtonIndex]):vui.executeOnContainer(this,"onDirectionUp")}}),vui.widgets.ExtraButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_dark_default btn_bg_size15_default",e.selectClassName="btn_bg_select btn_bg_size15_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" font18"},bind:function(e){this.setLabel(e)}}),vui.widgets.ExtraButtonsRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.extraButtonsRow",elemClassName:"extraButtonsRow",layout:{type:"horizontal"},init:function(e){this.backKey=new vui.widgets.ExtraButton({elemClassName:"backKey",label:vui.strings.getTransformedText("KEYBOARD_DELETE_BUTTON")}),this.backKey.onAction=function(){vui.executeOnContainer(this.parentWidget,"onBackspaceKey")},this.attachChild(this.backKey),this.spaceKey=new vui.widgets.ExtraButton({elemClassName:"spaceKey",label:vui.strings.getTransformedText("KEYBOARD_SPACE_KEY")}),this.attachChild(this.spaceKey),this.spaceKey.onAction=function(){vui._.setAriaLabel("space selected"),vui.executeOnContainer(this.parentWidget,"onKey"," ")},this.clearKey=new vui.widgets.ExtraButton({elemClassName:"clearKey",label:vui.strings.getTransformedText("KEYBOARD_CLEAR_KEY")}),this.attachChild(this.clearKey),this.clearKey.onAction=function(){vui.executeOnContainer(this.parentWidget,"onClearKey")}}}),vui.widgets.SymbolLetterToggleButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_dark_default btn_bg_size14_default",e.selectClassName="btn_bg_select btn_bg_size14_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" font18"},bind:function(e){this.setLabel(e)},onAction:function(){vui.executeOnContainer(this.parentWidget,"onSymbolLetterToggleKey",this.getLabel())},onSelect:function(){this.parent(),vui._.setAriaLabel(this.ttsLabel)}}),vui.widgets.ToogleRow=new Class({Extends:vui.widgets.Container,name:"vui.widgets.toogleRow",layout:{type:"horizontal"},init:function(e){this.abcKey=new vui.widgets.SymbolLetterToggleButton({elemClassName:"abcKey"}),this.abcKey.ttsLabel="Alphanumeric keyboard on",this.attachChild(this.abcKey),this.symbolKey=new vui.widgets.SymbolLetterToggleButton({elemClassName:"symbolKey"}),this.symbolKey.ttsLabel="Symbol keyboard",this.attachChild(this.symbolKey)},bind:function(){this.abcKey.setLabel(vui.strings.getText("KEYBOARD_ABC_KEYS")),this.symbolKey.setLabel(vui.strings.getText("KEYBOARD_SYMBOL_KEYS"))}}),vui.widgets.searchKeypad=new Class({Extends:vui.widgets.Container,name:"vui.widgets.searchKeypad",layout:{type:"vertical"},elemClassName:"searchKeypad",init:function(e){this.toggleRow=new vui.widgets.ToogleRow,this.attachChild(this.toggleRow),this.letterPad=new vui.widgets.LetterPad,this.attachChild(this.letterPad),this.extraButtonsRow=new vui.widgets.ExtraButtonsRow,this.attachChild(this.extraButtonsRow)},bind:function(){this.toggleRow.bind(),this.letterPad.bind()},onSymbolLetterToggleKey:function(e){this.letterPad.onSymbolLetterToggleKey(e)}}),vui.widgets.SuggestedPoster=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.SuggestedPoster",width:window.vui.ResDef.searchView.SUGGESTED_POSTER_WIDTH,height:window.vui.ResDef.searchView.SUGGESTED_POSTER_HEIGHT,init:function(){var e={defaultClassName:"btn_bg_default btn_bg_size16_default",selectClassName:"btn_bg_select btn_bg_size16_select"};this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" suggestedPoster"),this.label.className=this.label.className+" fontSmall",this.elem.style.display="none"},show:function(e){this.bind(e)},bind:function(e){if(alert("****** params: "+JSON.encode(e)),e&&e.object){switch(this.data=e.object[0],this.data._type){case"person":t=(t=this.data.searchFullName+" (person)").substring(0,18)+"...",this.setLabel(t);break;case"recommendationGene":var t;t=(t=this.data.name+" ("+this.data.category+")").substring(0,18)+"...",this.setLabel(t)}this.elem.style.display="block"}},onAction:function(){switch(this.data._type){case"person":vui.executeOnContainer(this.parentWidget,"omReportRelated_",this.data),controller.goToPage("FilmographyView",{model:this.data,listType:"filmography"});break;case"recommendationGene":vui.executeOnContainer(this.parentWidget,"omReportRelated_",this.data),controller.goToPage("GeneCollectionView",{model:this.data,listType:"geneCollection"})}},onSelect:function(){var e;switch(this.parent(),this.data._type){case"person":e=this.data.searchFullName+": person";break;case"recommendationGene":e=this.data.name+": "+this.data.category}vui._.setAriaLabel("Search Suggestion: "+e)},unbind:function(e){this.hide()}}),vui.widgets.SuggestedSearchList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.SuggestedPoster,settings:{normal:{columns:1,rows:5}},getKeyFunc:function(){return null},getMovieListModel:function(e){if(this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),this.searchMethod="getSuggestedSearchResults",this.params.state.savedState&&(this.params.state.scrollOffset=this.params.state.savedState.scrollOffset,this.params.scrollOffset=this.params.state.savedState.scrollOffset,this.currentStart=this.params.scrollOffset),this.params.state.term){var t={term:this.params.state.term,callback:e,currentStart:this.currentStart},i=vui.getModel();return this.listModel=i[this.searchMethod](t),this.listModel}return this.savedList?(e(this.savedList,this.savedStart,this.savedStart),this.listModel=this.savedList,this.savedList=null,this.listModel):(e(),{})},init:function(e){(e=e||{}).paddingBottom=window.vui.ResDef.searchView.SUGGESTED_GRIDLIST_PADDING_BOTTOM,this.parent(e,this.getMovieListModel),this.searchMethod="getSuggestedSearchResults",this.preventRightSiblingSelection=!1}}),vui.widgets.SuggestedSearchPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.SuggestedSearchList,elemClassName:"suggestedSearchPosterGrid",init:function(e){this.parent.apply(this,arguments),this.emptyMessage=new Element("div",{class:"emptyMessage fontItalicDull",html:"",styles:{display:"none"}})}}),vui.widgets.SuggestedSearchResultGridContainer=new Class({Extends:vui.widgets.Container,name:"vui.pages.SuggestedSearchResultGridContainer",elemClassName:"suggestedSearchResultGridContainer",selectionInheritance:!0,init:function(e){(e=e||{}).scrollBarLeft=508,this.params=e,this.grid=new vui.widgets.SuggestedSearchPosterGrid(this.params),this.params.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid)},show:function(e,t){this.parent(),this.params=e,this.bind(e)},bind:function(e){this.params=e||{},this.params.name="similar",this.params.searchMethod="getSuggestedSearchResults",this.grid.setList(this.params,null==this.params.savedState)},onGotListLength:function(e){0===e&&vui.executeOnContainer(this.parentWidget,"hideSuggestedResults")},save:function(){return this.grid.getScrollOffset()}}),vui.widgets.SearchGridList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.GridPoster,settings:{normal:{columns:3,rows:2}},getKeyFunc:function(){return null},getMovieListModel:function(e){if(this.currentStart=0,this.params=this.params||{},this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),this.searchMethod="getMoviesBySearch",this.params&&this.params.state&&this.params.state.term){this.searchMethod="getMoviesBySearch";var t={term:this.params.state.term,callback:e,currentStart:this.currentStart},i=vui.getModel();return this.listModel=i[this.searchMethod](t),this.listModel}this.searchMethod="getTopSearchResults";t={callback:e,currentStart:this.currentStart},i=vui.getModel();return this.listModel=i[this.searchMethod](t),this.listModel},init:function(e){this.params=e||{},this.parent(e,this.getMovieListModel),this.searchMethod="getMoviesBySearch"},setParams:function(e){alert("*******setParams: "+JSON.encode(e)),this.params=e}}),vui.widgets.SearchPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.SearchGridList,elemClassName:"searchPosterGrid",posterOnAction:function(e){vui.executeOnContainer(this.parentWidget,"omReportSearch_"),vui.executeOnContainer(this.parentWidget,"posterOnAction",e)}}),vui.widgets.SearchResultGridContainer=new Class({Extends:vui.widgets.Container,name:"vui.pages.SearchResultGridContainer",elemClassName:"SearchResultGridContainer",selectionInheritance:!0,init:function(e){this.params=e,this.searchResultdHeader=new Element("div",{class:"searchResultdHeader fontSmall",html:vui.strings.getText("SEARCH_DIALOG_TOP_SEARCH_RESULTS")}),this.elem.appendChild(this.searchResultdHeader),this.searchResultdHeader.selectable=!1,this.searchResultdHeader.style.display="none",this.grid=new vui.widgets.SearchPosterGrid(this.params),this.params&&this.params.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid)},show:function(e,t){this.bind(e)},bind:function(e){this.params=e||{},this.params.state&&this.params.state.term?this.searchResultdHeader.style.display="none":this.searchResultdHeader.style.display="block",this.params.name="similar",this.grid.setList(e,null==e.savedState),this.grid.emptyMessage.innerHTML=vui.strings.getText("SEARCH_NO_RESULTS")},onGotListLength:function(e){0==e&&0<this.lastSearchResultCount&&vui.executeOnContainer(this.parentWidget,"reportNoResults"),this.lastSearchResultCount=e,this.params&&this.params.state&&this.params.state.savedSelection&&vui.restoreSelectorPosition(this.parentWidget,this.params.state.savedSelection)},save:function(){return this.grid.getScrollOffset()}}),vui.widgets.rightSection=new Class({Extends:vui.widgets.Container,name:"vui.widgets.rightSection",elemClassName:"rightSection",layout:{type:"vertical"},init:function(e){this.keypad=new vui.widgets.searchKeypad,this.attachChild(this.keypad),this.suggestedHeader=new Element("div",{class:"suggestedHeader fontSmall",html:vui.strings.getText("SUGGESTED_SEARCH_PANEL_HEADER")}),this.elem.appendChild(this.suggestedHeader),this.suggestedHeader.selectable=!1,this.suggestedResultGrid=new vui.widgets.SuggestedSearchResultGridContainer,this.attachChild(this.suggestedResultGrid),this.suggestedResultGrid.selectable=!1,this.suggestedResultGrid.hide()},show:function(e){e&&e.state&&e.state.term?(this.suggestedHeader.style.display="block",this.suggestedResultGrid.show(e),this.suggestedResultGrid.selectable=!0):(this.hideSuggestedResults(),this.suggestedResultGrid.selectable=!1)},showKeyPad:function(e){this.keypad.bind()},save:function(){return this.suggestedResultGrid.save()},hideSuggestedResults:function(){this.suggestedHeader.style.display="none",this.suggestedResultGrid.hide()}}),vui.widgets.SearchView=new Class({Extends:vui.widgets.Container,Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate],layout:{type:"horizontal"},name:"vui.widgets.searchView",elemClassName:"searchView",init:function(e){this.searchdHeader=new Element("div",{class:"searchdHeader fontSmall",html:vui.strings.getText("SEARCH_SCREEN_HEADER")}),this.elem.appendChild(this.searchdHeader),this.searchdHeader.selectable=!1,this.searchField=new vui.widgets.SearchField,this.attachChild(this.searchField),this.rightSidePanel=new vui.widgets.rightSection,this.attachChild(this.rightSidePanel),this.searchResultGrid=new vui.widgets.SearchResultGridContainer,this.attachChild(this.searchResultGrid),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.hide(),this.attachChild(this.movieInfoPanel),window.search=this},onAttachParent:function(){this.searchField.elem.innerHTML=""},show:function(e){vui.getModel().isAlivePosterBaseUrl(),this.rightSidePanel.showKeyPad(),vui.setSearchField4Automation=function(e){this.searchField.elem.innerHTML=vui._.aStr(e),this.showText()}.bind(this),alert("***** show params: "+JSON.encode(e)),e.state&&e.state.term?this.searchField.elem.innerHTML=e.state.term:this.searchField.elem.innerHTML="",this.searchResultGrid.show(e),this.rightSidePanel.show(e),this.showSampleAd()},hide:function(){this.movieInfoPanel.hide()},showSampleAd:function(){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad()},onBackspaceKey:function(){var e,t,i,s=this.searchField.elem.innerHTML;alert("text: "+this.searchField.elem.get("html")),vui._.setAriaLabel("Back Selected"),s&&0<s.length&&(t=!1,-1!==(e=s.lastIndexOf("&"))&&("&lt;"!==(i=s.substring(e))&&"&gt;"!==i&&"&amp;"!==i||(t=!0)),this.searchField.elem.innerHTML=!0===t?s.substring(0,e):s.substring(0,s.length-1)),this.showText()},onClearKey:function(){vui._.setAriaLabel("clear selected"),this.omReportFailedSearch(),this.searchField.elem.innerHTML="",this.showText(),this.showSampleAd()},omReportFailedSearch:function(){var e;this.searchField.elem.innerHTML&&2<this.searchField.elem.innerHTML.length&&(e={evars:{searchText:this.searchField.elem.innerHTML}},vui.analytics.trackEvent("event128",e))},showText:function(){this.doQuery()},doQuery:function(){var e={state:{}};0!==this.searchField.elem.innerHTML.length&&(e.state.term=this.searchField.elem.innerHTML),this.searchResultGrid.show(e),this.rightSidePanel.show(e)},onKey:function(e){this.searchField.elem.innerHTML=this.searchField.elem.innerHTML+e,this.showText()},onNumeric:function(e){this.onKey(e)},saveState:function(){alert("SEARCH SAVE STATE");var e={};return""!==this.searchField.elem.innerHTML&&(e.term=this.searchField.elem.innerHTML),e.scrollOffset=this.searchResultGrid.save(),e.savedState={},e.savedState.scrollOffset=this.rightSidePanel.save(),e.savedSelection=vui.saveSelectorPosition(this),e},getCurrentKeyword:function(){return(this.searchField.elem.innerHTML||"").toLowerCase()},onItemClick:function(e){vui._.posterOnAction(e)},omReportRelated_:function(e){if(e.searchFullName)var t="person:"+vui._.aStr(e.searchFullName)||this.getCurrentKeyword();else{if(!e.category||!e.name)return void alert("Error: omReportRelated _type: "+_type);t=vui._.aStr(e.category)+":"+vui._.aStr(e.name)}var i,s={evars:{},linkType:"lnk_o"};s.evars.searchText="",i="relatedsearch",s.evars.browseType=i,s.linkName=i,s.events="event2",s.evars.relatedSearchText=vui._.toLower(t),vui.analytics.trackPage(i,s,0)},omReportSearch_:function(){var e="search",t={evars:{},linkType:"lnk_o"};t.evars.browseType=e,t.linkName=e,t.events="event1",t.evars.searchText=this.getCurrentKeyword()||"topsearchresults",vui.analytics.trackPage(e,t,0)},reportNoResults:function(){var e="search",t={evars:{}};t.evars.browseType=e,t.events="event28",t.linkType="lnk_o",t.linkName=e,t.evars.searchText=this.getCurrentKeyword(),vui.analytics.trackPage(e,t,0)}}),vui.widgets.PersonalizedSuggestedPoster=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.PersonalizedSuggestedPoster",width:window.vui.ResDef.searchView.SUGGESTED_POSTER_WIDTH,height:window.vui.ResDef.searchView.SUGGESTED_POSTER_HEIGHT,init:function(){var e={defaultClassName:"btn_bg_default btn_bg_size16_default",selectClassName:"btn_bg_select btn_bg_size16_select"};this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" suggestedPoster"),this.label.className=this.label.className+" fontSmall",this.elem.style.display="none"},show:function(e){this.bind(e)},bind:function(e){var t;alert("****** params: "+JSON.encode(e)),e&&e.value&&(this.data=e.value[0],t=this.data,this.setLabel(t),this.elem.style.display="block")},onAction:function(){vui.executeOnContainer(this.parentWidget,"doRecommendedSearch",this.data)},onSelect:function(){this.parent(),vui._.setAriaLabel("Search Suggestion: "+this.data)},unbind:function(e){this.hide()}}),vui.widgets.PersonalizedSuggestedSearchList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.PersonalizedSuggestedPoster,settings:{normal:{columns:1,rows:5}},getKeyFunc:function(){return null},init:function(e){(e=e||{}).paddingBottom=window.vui.ResDef.searchView.SUGGESTED_GRIDLIST_PADDING_BOTTOM,this.parent(e,this.getMovieListModel),this.searchMethod="getSuggestedSearchResults",this.preventRightSiblingSelection=!1},refreshList:function(e){this.totalCount=e.length,this.totalCount<=this.currentStart&&(this.currentStart=0),0===e.length?(this.setSelectable(!1),this.parentWidget.setSelectable(!1),this.parentWidget.parentWidget.setSelectable(!1)):(this.setSelectable(!0),this.parentWidget.setSelectable(!0),this.parentWidget.parentWidget.setSelectable(!0)),this.totalCount>this.numVisible?this.parentWidget.scroller.show():this.parentWidget.scroller.hide(),this.movieListModel={data:e,numVisible:4,totalCount:e.length,get:function(e){return this.data[e]}},this.update()}}),vui.widgets.PersonalizedSuggestedSearchPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.PersonalizedSuggestedSearchList,elemClassName:"suggestedSearchPosterGrid",init:function(e){this.parent.apply(this,arguments),this.emptyMessage=new Element("div",{class:"emptyMessage fontItalicDull",html:"",styles:{display:"none"}})},showResults:function(e){this.list.refreshList(e)}}),vui.widgets.PersonalizedSuggestedSearchResultGridContainer=new Class({Extends:vui.widgets.Container,name:"vui.pages.PersonalizedSuggestedSearchResultGridContainer",elemClassName:"suggestedSearchResultGridContainer",selectionInheritance:!0,init:function(e){(e=e||{}).scrollBarLeft=508,this.params=e,this.grid=new vui.widgets.PersonalizedSuggestedSearchPosterGrid(this.params),this.params.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid)},showResults:function(e){var t=[];e.keywords&&e.keywords[0]&&e.keywords[0].keyword&&(t=e.keywords[0].keyword),0===t.length?vui.executeOnContainer(this.parentWidget,"hideSuggestedResults"):vui.executeOnContainer(this.parentWidget,"showSuggestedTitle"),this.grid.showResults(t),this.show(),t.length<=5&&(this.grid.range.style.display="none")},save:function(){return this.grid.getScrollOffset()}}),vui.widgets.PersonalizedSearchGridList=new Class({Extends:vui.widgets.PersonalizedGridList,settings:{normal:{columns:3,rows:2}},columns:3,rows:2,addWidgetsAfterLoaded:null,omReportSearch_:function(){vui.executeOnContainer(this.parentWidget,"omReportSearch_")}}),vui.widgets.PersonalizedSearchPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.PersonalizedSearchGridList,elemClassName:"searchPosterGrid",posterOnAction:function(e){vui.executeOnContainer(this.parentWidget,"omReportSearch_"),vui.executeOnContainer(this.parentWidget,"posterOnAction",e)},show:function(e){var t=[];if(e)if(e.contents&&e.contents[0]&&0<e.contents[0].totalCount)t=e.contents[0].content;else if(e.data)for(var i=Object.keys(e.data),s=0;s<i.length;s++)t.push(e.data[i[s]]);0===t.length?(this.emptyMessage.innerHTML=vui.strings.getText("SEARCH_NO_RESULTS"),this.emptyMessage.style.display="block",vui._.setAriaLabel(this.emptyMessage.innerHTML)):this.emptyMessage.style.display="none",this.list.currentStart=this.scrollOffset||0,this.list.refreshList(t),t.length<=6&&(this.range.style.display="none")},omReportSearch_:function(){vui.executeOnContainer(this.parentWidget,"omReportSearch_")}}),vui.widgets.PersonalizedSearchResultGridContainer=new Class({Extends:vui.widgets.Container,name:"vui.pages.PersonalizedSearchResultGridContainer",elemClassName:"SearchResultGridContainer",selectionInheritance:!0,init:function(e){this.params=e,this.searchResultdHeader=new Element("div",{class:"searchResultdHeader fontSmall",html:vui.strings.getText("SEARCH_DIALOG_TOP_SEARCH_RESULTS")}),this.elem.appendChild(this.searchResultdHeader),this.searchResultdHeader.selectable=!1,this.searchResultdHeader.style.display="none",this.grid=new vui.widgets.PersonalizedSearchPosterGrid(this.params),this.params&&this.params.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid)},show:function(e,t){this.bind(e)},bind:function(e){this.params=e||{},this.params.state&&this.params.state.term?this.searchResultdHeader.style.display="none":this.searchResultdHeader.style.display="block",this.params.state&&(this.grid.scrollOffset=e.state.scrollOffset)},showResults:function(e,t){this.params.state||(this.grid.list.selected=0,this.grid.scrollOffset=0),this.searchResultdHeader.style.display=t?"block":"none",this.grid.show(e)},onGotListLength:function(e){0==e&&0<this.lastSearchResultCount&&vui.executeOnContainer(this.parentWidget,"reportNoResults"),this.lastSearchResultCount=e,this.params&&this.params.state&&this.params.state.savedSelection&&(vui.restoreSelectorPosition(this.parentWidget,this.params.state.savedSelection),delete this.params.state)},save:function(){return this.grid.getScrollOffset()}}),vui.widgets.PersonalizedRightSection=new Class({Extends:vui.widgets.Container,name:"vui.widgets.PersonalizedRightSection",elemClassName:"rightSection",layout:{type:"vertical"},init:function(e){this.keypad=new vui.widgets.searchKeypad,this.attachChild(this.keypad),this.suggestedHeader=new Element("div",{class:"suggestedHeader fontSmall",html:vui.strings.getText("SUGGESTED_SEARCH_PANEL_HEADER")}),this.elem.appendChild(this.suggestedHeader),this.suggestedHeader.selectable=!1,this.suggestedResultGrid=new vui.widgets.PersonalizedSuggestedSearchResultGridContainer,this.attachChild(this.suggestedResultGrid),this.suggestedResultGrid.selectable=!1,this.suggestedResultGrid.hide()},show:function(e){e&&e.state&&e.state.term?(this.suggestedHeader.style.display="block",this.suggestedResultGrid.show(e),this.suggestedResultGrid.selectable=!0):(this.hideSuggestedResults(),this.suggestedResultGrid.selectable=!1)},showResults:function(e){e&&e.keywords?this.suggestedHeader.style.display="block":this.hideSuggestedResults(),this.suggestedResultGrid.showResults(e)},showKeyPad:function(e){this.keypad.bind()},save:function(){return this.suggestedResultGrid.save()},hideSuggestedResults:function(){this.suggestedHeader.style.display="none",this.suggestedResultGrid.hide()},showSuggestedTitle:function(){this.suggestedHeader.style.display="block"}}),vui.widgets.PersonalizedSearchView=new Class({Extends:vui.widgets.Container,Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate],layout:{type:"horizontal"},name:"vui.widgets.searchView",elemClassName:"searchView",init:function(e){this.searchdHeader=new Element("div",{class:"searchdHeader fontSmall",html:vui.strings.getText("SEARCH_SCREEN_HEADER")}),this.elem.appendChild(this.searchdHeader),this.searchdHeader.selectable=!1,this.searchField=new vui.widgets.SearchField,this.attachChild(this.searchField),this.rightSidePanel=new vui.widgets.PersonalizedRightSection,this.attachChild(this.rightSidePanel),this.searchResultGrid=new vui.widgets.PersonalizedSearchResultGridContainer,this.attachChild(this.searchResultGrid),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.movieInfoPanel.hide(),this.attachChild(this.movieInfoPanel),window.search=this},onAttachParent:function(){this.searchField.elem.innerHTML=""},show:function(e){vui.getModel().isAlivePosterBaseUrl(),this.rightSidePanel.showKeyPad(),alert("***** show params: "+JSON.encode(e)),e.state&&e.state.term?this.searchField.elem.innerHTML=e.state.term:this.searchField.elem.innerHTML="",vui.setSearchField4Automation=function(e){this.searchField.elem.innerHTML=vui._.aStr(e),this.showText()}.bind(this),this.searchResultGrid.show(e),this.rightSidePanel.show(e),this.showText(),e.state||this.showSampleAd()},hide:function(){this.movieInfoPanel.hide()},showSampleAd:function(){this.movieInfoPanel&&this.movieInfoPanel.show_sample_ad(vui.m.getAdUrlForSearch())},onBackspaceKey:function(){var e,t,i,s=this.searchField.elem.innerHTML;alert("text: "+this.searchField.elem.get("html")),vui._.setAriaLabel("Back Selected"),s&&0<s.length&&(t=!1,-1!==(e=s.lastIndexOf("&"))&&("&lt;"!==(i=s.substring(e))&&"&gt;"!==i&&"&amp;"!==i||(t=!0)),this.searchField.elem.innerHTML=!0===t?s.substring(0,e):s.substring(0,s.length-1)),this.showText()},onClearKey:function(){vui._.setAriaLabel("clear selected"),this.omReportFailedSearch(),this.searchField.elem.innerHTML="",this.showText(),this.showSampleAd()},omReportFailedSearch:function(){var e;this.searchField.elem.innerHTML&&2<this.searchField.elem.innerHTML.length&&(e={evars:{searchText:this.searchField.elem.innerHTML}},vui.analytics.trackEvent("event128",e))},showText:function(){this.doQuery()},doQuery:function(){var i,e,t,s={state:{}},n="";0!==this.searchField.elem.innerHTML.length&&(n=this.searchField.elem.innerHTML),0!==(s.state.term=n).length?(i=this,vui.getModel().contentSuggestionGet(n,function(e){i.searchResultGrid.showResults(e),i.rightSidePanel.showResults(e);var t=e&&e.contents&&e.contents[0]&&e.contents[0].content&&e.contents[0].content.length||0;vui.executeOnContainer(i.searchResultGrid,"onGotListLength",t),vui.executeOnContainer(i.searchResultGrid,"listDataReceived",e)})):(this.searchMethod="getTopSearchResults",e={callback:function(){this.searchResultGrid.showResults(this.listModel,!0),this.rightSidePanel.showResults(this.listModel),vui.executeOnContainer(this.searchResultGrid,"onGotListLength",1),vui.executeOnContainer(this.searchResultGrid,"listDataReceived",this.listModel)}.bind(this)},t=vui.getModel(),this.listModel=t[this.searchMethod](e))},onKey:function(e){this.searchField.elem.innerHTML=this.searchField.elem.innerHTML+e,this.showText()},onNumeric:function(e){this.onKey(e)},saveState:function(){alert("SEARCH SAVE STATE");var e={};return""!==this.searchField.elem.innerHTML&&(e.term=this.searchField.elem.innerHTML),e.scrollOffset=this.searchResultGrid.save(),e.savedState={},e.savedState.scrollOffset=this.rightSidePanel.save(),e.savedSelection=vui.saveSelectorPosition(this),e},getCurrentKeyword:function(){return(this.searchField.elem.innerHTML||"").toLowerCase()},onItemClick:function(e){vui._.posterOnAction(e)},doRecommendedSearch:function(e){console.log("DOING"),this.searchField.elem.innerHTML=e,this.showText()},omReportRelated_:function(e){if(e.searchFullName)var t="person:"+vui._.aStr(e.searchFullName)||this.getCurrentKeyword();else{if(!e.category||!e.name)return void alert("Error: omReportRelated _type: "+_type);t=vui._.aStr(e.category)+":"+vui._.aStr(e.name)}var i,s={evars:{},linkType:"lnk_o"};s.evars.searchText="",i="relatedsearch",s.evars.browseType=i,s.linkName=i,s.events="event2",s.evars.relatedSearchText=vui._.toLower(t),vui.analytics.trackPage(i,s,0)},omReportSearch_:function(){var e={evars:{},linkType:"lnk_o"},t="search";e.evars.browseType=t,e.linkName=t,e.events="event1",e.evars.searchText=this.getCurrentKeyword()||"topsearchresults",vui.analytics.trackPage(t,e,0)},reportNoResults:function(){var e="search",t={evars:{}};t.evars.browseType=e,t.events="event28",t.linkType="lnk_o",t.linkName=e,t.evars.searchText=this.getCurrentKeyword(),vui.analytics.trackPage(e,t,0)}}),vui.widgets.GenrebarButtonBase=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.GenrebarButtonBase",selectorType:"none",elemClassName:"GenrebarButton",width:window.vui.ResDef.explore.BAR_BTN_W,height:window.vui.ResDef.explore.BAR_BTN_H,imgWidth:window.vui.ResDef.explore.BAR_IMG_W,imgHeight:window.vui.ResDef.explore.BAR_IMG_H,init:function(){this.elem.style.width=window.vui.ResDef.explore.BAR_BTN_W+"px",this.elem.style.height=window.vui.ResDef.explore.BAR_BTN_H+"px",this.el.img=document.createElement("img"),this.el.img.className="genrebarButtonImg",this.el.img.width=this.imgWidth,this.el.img.height=this.imgHeight,this.elem.appendChild(this.el.img),this.el.sign=document.createElement("div"),this.el.sign.className="genrebarButtonSign",this.el.sign.style.width=window.vui.ResDef.explore.BAR_BTN_W+"px",this.el.sign.style.height=window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px",this.el.sign.style.top=window.vui.ResDef.explore.BAR_BTN_SIGN_T+"px",this.el.gname=document.createElement("div"),this.el.gname.className="genrebarButtonGname",this.el.gname.style.left="2px",this.el.gname.style.width=window.vui.ResDef.explore.BAR_IMG_W+"px",this.el.gname.style.top=window.vui.ResDef.explore.BAR_GNAME_T+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_H+"px",this.el.gname_txt=document.createElement("div"),this.el.gname_txt.className="genrebarButtonGname_txt",this.el.gname_txt.style.width=window.vui.ResDef.explore.BAR_IMG_W+"px",this.el.gname.appendChild(this.el.gname_txt),this.elem.appendChild(this.el.sign),this.elem.appendChild(this.el.gname)},bind:function(){alert("please overwrite")},setIconSelected:function(){this.el.img.style.borderColor="#EEE","subGenre"==this.data.category?this.el.sign.style.background="url('"+vui.images.explore.sub_genre_check+"') center no-repeat":this.el.sign.style.background="url('"+vui.images.explore.genre_clear+"') center no-repeat",this.el.sign.style.display="block",this.el.gname.style.top=window.vui.ResDef.explore.BAR_GNAME_S_T+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_S_H+"px",this.iconSelected=!0},setIconDeselected:function(){this.el.img.style.borderColor="transparent",this.el.sign.style.display="none",this.el.gname.style.top=window.vui.ResDef.explore.BAR_GNAME_T+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_H+"px",this.iconSelected=!1},setSign:function(e){"+"==e?this.setIconDeselected():"-"==e&&this.setIconSelected()},onAction:function(){this.data&&null!=this.data.ind&&vui.executeOnContainer(this.parentWidget,"buttonOnAction",this.data)},onSelect:function(){this.data&&null!=this.data.ind&&(this.el.gname.style.display="none",vui.executeOnContainer(this.parentWidget,"buttonOnSelect",this.data.ind))},onDeselect:function(){this.el.gname.style.display="block",vui.executeOnContainer(this.parentWidget,"hideBlowUp")}}),vui.widgets.GenrebarButton=new Class({Extends:vui.widgets.GenrebarButtonBase,name:"vui.widgets.GenrebarButton",elemClassName:"GenrebarButton",bind:function(e,t,i,s,n,a,o){this.elem.setAttribute("role","option"),this.data={},this.data.ind=e,this.data.name=i,this.data.description=s,this.data.id=t,this.data.category=n,this.data.allowedContentType=a;var r="";try{r="subGenre"==this.data.category?vui.m.exploreBaseUrl[a].subGenre:vui.m.exploreBaseUrl[a].genre,this.el.img.src=r+this.data.id+"-144.jpg"}catch(e){alert("no base url. use default"),this.el.img.src=vui.images.home.default_ribbon}this.el.img.width=this.imgWidth,this.el.img.height=this.imgHeight,o==t?this.setIconSelected():this.setIconDeselected(),this.el.gname_txt.innerHTML=this.data.name.toUpperCase(),this.elem.id="GenrebarButton_"+this.data.id,this.el.gname.style.display="block"},onSelect:function(){this.parent(),"subGenre"==this.data.category&&this.iconSelected?vui._.setAriaLabel("Clear Selection: "+this.data.name):vui._.setAriaLabel("subGenre"==this.data.category?"sub genre":"genre: "+this.data.name)},onAction:function(){this.parent()}}),vui.widgets.GenrebarBlowUpBase=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.GenrebarBlowUpBase",elemClassName:"GenrebarBlowUp",init:function(){this.hide(),this.elem.style.width=window.vui.ResDef.explore.BAR_BLOW_W+"px",this.elem.style.height=window.vui.ResDef.explore.BAR_BLOW_H+"px",this.el.blowUp=document.createElement("div"),this.el.blowUp.className="genrebarViewBlowUp",this.el.img=document.createElement("img"),this.el.img.className="blowUp_genrebarButtonImg",this.el.img.width=window.vui.ResDef.explore.BAR_IMG_BLOW_W,this.el.img.height=window.vui.ResDef.explore.BAR_IMG_BLOW_H,this.el.sign=document.createElement("div"),this.el.sign.className="blowUp_genrebarButtonSign",this.el.sign.style.width=window.vui.ResDef.explore.BAR_BLOW_W+"px",this.el.sign.style.height=window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px",this.el.sign.style.top=window.vui.ResDef.explore.BAR_BLOW_SIGN_T+"px",this.el.gname=document.createElement("div"),this.el.gname.className="blowUp_genrebarButtonGname",this.el.gname.style.top=window.vui.ResDef.explore.BAR_BLOW_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px",this.el.gname.style.left=parseInt((window.vui.ResDef.explore.BAR_BLOW_W-window.vui.ResDef.explore.BAR_BTN_W)/2,10)+"px",this.el.gname.style.width=window.vui.ResDef.explore.BAR_IMG_W+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_H+"px",this.el.gname_txt=document.createElement("div"),this.el.gname_txt.className="blowUp_genrebarButtonGname_txt",this.el.gname.appendChild(this.el.gname_txt),this.elem.appendChild(this.el.img),this.elem.appendChild(this.el.blowUp),this.elem.appendChild(this.el.sign),this.elem.appendChild(this.el.gname)},bind:function(){},show:function(e){var t=(this.item=e).item_left-(window.vui.ResDef.explore.BAR_BLOW_W-window.vui.ResDef.explore.BAR_BTN_W)/2;!0===window.useWebkit?this.elem.style.transform="translateX("+t+"px)":this.elem.style.left=t+"px",this.elem.style.display="block"},setIconSelected:function(){"subGenre"==this.item.data.category?this.el.sign.style.background="url('"+vui.images.explore.sub_genre_check+"') center no-repeat":this.el.sign.style.background="url('"+vui.images.explore.genre_clear+"') center no-repeat",vui._.setAriaLabel(this.item.data.name+" selected"),this.el.gname.style.top=window.vui.ResDef.explore.BAR_BTN_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px"},setIconDeselected:function(){this.el.sign.style.display="block","subGenre"==this.item.data.category?(this.el.sign.style.background="url('"+vui.images.explore.sub_genre_add+"') center no-repeat",vui._.setAriaLabel(this.item.data.name+" cleared")):this.el.sign.style.background="url('"+vui.images.explore.genre_add+"') center no-repeat",this.el.gname.style.top=window.vui.ResDef.explore.BAR_BLOW_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px"},setSign:function(e){"+"==e?this.setIconDeselected():"-"==e&&this.setIconSelected()},hide:function(){this.elem.style.display="none"}}),vui.widgets.GenrebarBlowUp=new Class({Extends:vui.widgets.GenrebarBlowUpBase,name:"vui.widgets.GenrebarBlowUp",elemClassName:"GenrebarBlowUp",show:function(e){this.parent.apply(this,arguments),this.el.sign.style.display="block";var t=e.data.id;if(t){var i="";try{var s=e.data.allowedContentType,i="subGenre"==e.data.category?vui.m.exploreBaseUrl[s].subGenre:vui.m.exploreBaseUrl[s].genre;this.el.img.src=i+t+"-144.jpg"}catch(e){alert("no base url. GenrebarBlowUp. use default"),this.el.img.src=vui.images.home.default_ribbon}var n=e.el.gname_txt.innerHTML||"";this.el.gname_txt.innerHTML=n.toUpperCase()}"subGenre"==this.item.data.category?"none"===this.item.el.sign.style.display?this.el.sign.style.background="url('"+vui.images.explore.sub_genre_add+"') center no-repeat":this.el.sign.style.background="url('"+vui.images.explore.genre_clear+"') center no-repeat":"none"===this.item.el.sign.style.display?this.el.sign.style.background="url('"+vui.images.explore.genre_add+"') center no-repeat":this.el.sign.style.background=this.item.el.sign.style.background}}),vui.widgets.ButtonGenreBlowUp=new Class({Extends:vui.widgets.GenrebarBlowUp,name:"vui.widgets.ButtonGenreBlowUp",elemClassName:"ButtonGenreBlowUp",show:function(e){var t=e.id,i=e.name||"";try{var s=e.allowedContentType,n=vui.m.exploreBaseUrl[s].genre;this.el.img.src=n+t+"-144.jpg"}catch(e){alert("no base url. use default"),this.el.img.src=vui.images.home.default_ribbon}this.el.gname_txt.innerHTML=i.toUpperCase(),this.elem.style.display="block",this.el.sign.style.background="url('"+vui.images.explore.genre_clear+"') center no-repeat",this.el.sign.style.display="block",this.elem.style.display="block"}}),vui.widgets.GenrebarButtonGenre=new Class({Extends:vui.widgets.GenrebarButton,name:"vui.widgets.GenrebarButtonGenre",elemClassName:"GenrebarButtonGenre",init:function(){this.parent.apply(this,arguments),this.el.gname.style.top=window.vui.ResDef.explore.BAR_BTN_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px",this.blowUp=new vui.widgets.ButtonGenreBlowUp,this.elem.appendChild(this.blowUp.elem)},bind:function(e,t,i,s){this.parent(0,e,t,"","genre",s),this.setSelectable(!0),this.el.sign.style.background="url('"+vui.images.explore.genre_check+"') center no-repeat",null!=i&&(!0===window.useWebkit?this.elem.style.transform="translateX("+i+"px)":this.elem.style.left=i+"px"),this.show()},onSelect:function(){vui._.setAriaLabel("Clear Selection: "+this.data.name),vui.executeOnContainer(this.parentWidget,"buttonGenreOnSelect")},onDeselect:function(){this.hideBlowUp()},hide:function(){this.hideBlowUp(),this.setSelectable(!1),this.elem.style.display="none"},show:function(){this.hideBlowUp(),this.setSelectable(!0),this.elem.style.display="block",this.el.sign.style.background="url('"+vui.images.explore.genre_check+"') center no-repeat",this.el.sign.style.display="block",this.el.gname.style.top=window.vui.ResDef.explore.BAR_BTN_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px",this.el.img.style.borderColor="#EEE"},hideBlowUp:function(){this.blowUp.hide()},showBlowUp:function(){this.data&&this.data.id&&this.blowUp.show(this.data)},onAction:function(){vui.executeOnContainer(this.parentWidget,"buttonGenreOnAction",this.state)}}),vui.widgets.GenrebarBase=new Class({Extends:vui.widgets.Container,name:"vui.widgets.GenrebarBase",elemClassName:"Genrebar",layout:{type:"horizontal"},items:[],barStartAt:window.vui.ResDef.explore.BAR_START_AT,barEndAt:window.vui.ResDef.explore.BAR_START_END,buttonClass:null,blowUpClass:null,visibleItemNum:7,barState:"genre",init:function(){this.elem.style.background="url('"+vui.images.explore.ribbon_bg+"') top  no-repeat",this.el.barContainer=document.createElement("div"),this.el.barContainer.className="genrebarViewBarContainer",this.el.barContainer.style.width=this.barEndAt-this.barStartAt+window.vui.ResDef.explore.CONTAINER_PADDING+"px",this.elem.appendChild(this.el.barContainer),this.el.bar=document.createElement("div"),this.el.bar.className="genrebarViewBar",this.el.barContainer.appendChild(this.el.bar),this.el.leftBG=document.createElement("div"),this.el.leftBG.className="genrebarViewLeftBG",this.el.leftBG.style.width=window.vui.ResDef.explore.BAR_BTN_ARROW_W+"px",this.el.leftBG.style.left=this.barStartAt-window.vui.ResDef.explore.BAR_BTN_ARROW_W+"px",this.elem.appendChild(this.el.leftBG),this.el.leftBG_arrow=document.createElement("img"),this.el.leftBG_arrow.className="genrebarViewLeftBG_arrow",this.el.leftBG_arrow.src=vui.images.explore.arrow_left,this.el.leftBG.appendChild(this.el.leftBG_arrow),this.el.leftBG.addEvents({click:function(){var e=Math.floor(-this.bar_left/840)-1;(0<=e||e<=3)&&vui.getSelected()&&(vui.getSelected().deselect(),vui.select(this.items[e*this.visibleItemNum]))}.bind(this),mouseover:function(){this.el.leftBG.addClass("select")}.bind(this),mouseleave:function(){this.el.leftBG.removeClass("select")}.bind(this)}),this.el.rightBG=document.createElement("div"),this.el.rightBG.className="genrebarViewRightBG",this.el.rightBG.style.width=window.vui.ResDef.explore.BAR_BTN_ARROW_W+"px",this.el.rightBG.style.left=this.barEndAt+"px",this.elem.appendChild(this.el.rightBG),this.el.rightBG_arrow=document.createElement("img"),this.el.rightBG_arrow.className="genrebarViewRightBG_arrow",this.el.rightBG_arrow.src=vui.images.explore.arrow_right,this.el.rightBG.appendChild(this.el.rightBG_arrow),this.el.rightBG.addEvents({click:function(){var e=Math.floor(-this.bar_left/840)+1;(0<=e||e<=3)&&vui.getSelected()&&(vui.getSelected().deselect(),vui.select(this.items[e*this.visibleItemNum]))}.bind(this),mouseover:function(){this.el.rightBG.addClass("select")}.bind(this),mouseleave:function(){this.el.rightBG.removeClass("select")}.bind(this)}),this.blowUp=new this.blowUpClass,this.el.bar.appendChild(this.blowUp.elem),this.blowUp.elem.className="GenrebarBlowUp"},reset:function(){this.setSelectable(!1),this.detachAllChildren(),vui._.removeAllElements(this.el.bar),this._deleteAllItems(),this.data=[],this.el.barContainer.style.left=this.barStartAt+"px",this.el.barContainer.style.width=this.barEndAt-this.barStartAt+window.vui.ResDef.explore.CONTAINER_PADDING+"px",this.el.bar.style.left="0",!0===window.useWebkit&&(this.el.bar.style.transform="translateX(0)"),this.bar_left=0,this.el.leftBG.style.left=this.barStartAt-window.vui.ResDef.explore.BAR_BTN_ARROW_W+"px",this.el.leftBG.style.display="none",this.el.rightBG.style.left=this.barEndAt+"px",this.hideBlowUp(),this.setSelectable(!0)},_deleteAllItems:function(){var t=this;this.items.each(function(e){e.destroyRecursive(e),t.detachChild(e)}),this.items=[]},onDetachChild:function(){this._deleteAllItems()},restoreBar:function(e){!0===window.useWebkit?this.el.bar.style.transform="translateX("+e.left+"px)":this.el.bar.style.left=e.left+"px",this.bar_left=e.left;var t=e.iconSelected||0;this.children[t]&&(this.selected=t),this.setBarLeftByInd(t),vui.analytics.trackEvent("event26")},restoreSubGenreSelected:function(){vui._.isIndex(this.selected)&&this.items[this.selected]&&this.items[this.selected].setIconSelected()},bindGenre:function(e){var t,i=vui.executeOnContainer(this.parentWidget,"getAllowedContentType");this.setGenreBar(),e&&"tvOnly"==i&&vui.m.tvGenreList?(this._bind(vui.m.tvGenreList,"genre"),this.restoreBar(e),vui.select(this)):e&&"moviesOnly"==i&&vui.m.movieGenreList?(this._bind(vui.m.movieGenreList,"genre"),this.restoreBar(e),vui.select(this)):"tvOnly"==i&&vui.m.tvGenreList?this._bind(vui.m.tvGenreList,"genre"):"moviesOnly"==i&&vui.m.movieGenreList?this._bind(vui.m.movieGenreList,"genre"):(t=function(e){e&&this._bind(e,"genre")}.bind(this),vui.getModel().geneGenreSearch(i,t))},bindSubGenre:function(e,t,i){var s,n=vui.executeOnContainer(this.parentWidget,"getAllowedContentType");this.hideBlowUp(),i&&"tvOnly"==n&&vui.m.tvSubGenreList[e]?(vui.executeOnContainer(this.parentWidget,"showButtonGenre",{id:e,name:t,noAnim:!0}),this._bind(vui.m.tvSubGenreList[e],"subGenre"),this.restoreBar(i)):i&&"moviesOnly"==n&&vui.m.movieSubGenreList[e]?(vui.executeOnContainer(this.parentWidget,"showButtonGenre",{id:e,name:t,noAnim:!0}),this._bind(vui.m.movieSubGenreList[e],"subGenre"),this.restoreBar(i)):(vui.executeOnContainer(this.parentWidget,"showButtonGenre",{id:e,name:t}),"tvOnly"==n&&vui.m.tvSubGenreList[e]?this._delayBindSubGenre(vui.m.tvSubGenreList[e]):"moviesOnly"==n&&vui.m.movieSubGenreList[e]?this._delayBindSubGenre(vui.m.movieSubGenreList[e]):(s=function(e){this._delayBindSubGenre(e)}.bind(this),vui.getModel().geneSubGenreSearch(n,e,s)))},_delayBindSubGenre:function(e){setTimeout(function(){e&&(this._bind(e,"subGenre"),vui.select(this))}.bind(this),1e3)},setGenreBar:function(){this.visibleItemNum=7,this.barStartAt=window.vui.ResDef.explore.BAR_START_AT,this.barEndAt=window.vui.ResDef.explore.BAR_START_END,this.reset()},setSubGenreBar:function(){this.barStartAt=window.vui.ResDef.explore.SUB_BAR_START_AT,this.barEndAt=window.vui.ResDef.explore.SUB_BAR_START_END,this.visibleItemNum=6,this.reset()},setSign:function(e,t){this.items[t]&&(this.items[t].setSign(e),this.blowUp.setSign(e))},_bind:function(e,t,i){this.reset();for(var s,n,a,o=e.length,r=0,l=vui.executeOnContainer(this.parentWidget,"getAllowedContentType"),u=0;u<o;u++)this.items[u]=new this.buttonClass,n=e[u].name&&e[u].name[0]||"",a=e[u].description&&e[u].description[0]||"",s="subGenre"==t?e[u].geneSubGenreId&&e[u].geneSubGenreId[0]||"":e[u].geneGenreId&&e[u].geneGenreId[0]||"",this.items[u].bind(u,s,n,a,t,l,i),r=u*(window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN),this.items[u].elem.style.left=r+"px",this.items[u].item_left=r,this.data[u]={name:e[u].name,geneIds:e[u].geneIds},this.attachChild(this.items[u],this.el.bar);this.bar_width=r+window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN,this.el.bar.style.width=this.bar_width+"px",this.el.bar.appendChild(this.blowUp.elem,this.el.barContainer),this.updateLeftRightBG()},updateLeftRightBG:function(){var e=this.bar_left,t=parseInt(this.el.bar.style.width,10);e<0||!0===this.alwaysShowLeftArrow?this.el.leftBG.style.display="block":this.el.leftBG.style.display="none",e+t+this.barStartAt>this.barEndAt?this.el.rightBG.style.display="block":this.el.rightBG.style.display="none"},show:function(){},hide:function(){},onGotListLength:function(){},saveState:function(){},getState:function(){var e={};if(e.selected=this.selected,e.left=this.bar_left,e.selectedInd=this.selectedInd,e.iconSelected=null,this.items)for(var t=0;t<this.items.length;t++)if(!0===this.items[t].iconSelected){e.iconSelected=t;break}var i=null,i=!0===window.useWebkit?vui._.getTransformX(this.blowUp.elem.style.webkitTransform):parseInt(this.blowUp.elem.style.left,10);return e.blowUpLeft=i+this.barStartAt+e.left,e},buttonOnSelect:function(e){this.selectedInd=e,this._getButtonPosition(e),this.updateLeftRightBG(),vui.executeOnContainer(this.parentWidget,"buttonOnSelect",this.items[e])},_getButtonPosition:function(e){var t,i,s=this.items[e].elem,n=this.bar_left||0,a=s.offsetLeft,o=window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN,r=this.barEndAt-this.barStartAt;a+n<0?(i=e+1-this.visibleItemNum<=0?0:0-parseInt(e/this.visibleItemNum,10)*this.visibleItemNum*o,this._moveBar(i,e)):r<a+n+o?(t=1,i=e+this.visibleItemNum<=this.children.length-1?(t=this.visibleItemNum-1,0-(e+1-this.visibleItemNum+t)*o):0-(t=parseInt((this.children.length-1)/this.visibleItemNum,10)*this.visibleItemNum)*o,this._moveBar(i,e)):this.showBlowUp(e)},setBarLeftByInd:function(e){var t=window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN,i=0;0<=e-this.visibleItemNum&&(i=0-parseInt(e/this.visibleItemNum,10)*this.visibleItemNum*t),this.bar_left=parseInt(i,10);var s=function(){}.bind(this);vui._.animX(this.el.bar,this.bar_left,0,s)},hideBlowUp:function(){this.blowUp.hide()},showBlowUp:function(e){this.items[e]?this.blowUp.show(this.items[e]):alert("no blowup Item:"+e)},_moveBar:function(e,t){this.showBlowUp(t),this.bar_left=parseInt(e,10);var i=function(){}.bind(this);vui._.animX(this.el.bar,this.bar_left,900,i)},onSelectedPoster:function(){},getVisibleRange:function(){return{s:this.barStartAt,e:this.barEndAt}},onDirectionUp:function(){this.blowUp.hide(),vui.executeOnContainer(this.parentWidget,"onDirectionUp")},onDirectionDown:function(){this.blowUp.hide(),vui.executeOnContainer(this.parentWidget,"onDirectionDown")},onBack:function(){this.blowUp.hide(),vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.Genrebar=new Class({Extends:vui.widgets.GenrebarBase,name:"vui.widgets.Genrebar",elemClassName:"Genrebar",layout:{type:"horizontal"},visibleItemNum:7,buttonClass:vui.widgets.GenrebarButton,blowUpClass:vui.widgets.GenrebarBlowUp,barState:"genre"}),vui.widgets.GenrebarView=new Class({Extends:vui.widgets.HorizontalContainer,name:"vui.widgets.GenrebarView",elemClassName:"GenrebarView",init:function(){this.buttonGenre=new vui.widgets.GenrebarButtonGenre,this.el.divider=document.createElement("div"),this.el.divider.className="genrebarDivider",this.el.divider.style.background="url('"+vui.images.explore.divider+"') center no-repeat",this.elem.appendChild(this.el.divider),this.buttonGenre.hide(),this.attachChild(this.buttonGenre),this.bar=new vui.widgets.Genrebar,this.attachChild(this.bar),this.genreBarState=null},saveGenreState:function(e){this.genreBarState=null,this.genreBarState=this.bar.getState(),0<e&&(this.genreBarState.genre_id=e,this.saveButtonGenreState(this.genreBarState))},saveButtonGenreState:function(e){this.buttonGenre.state=vui.deepCopy(e)},restoreButtonGenreState:function(e){this.buttonGenre.state=e},hideBar:function(){this.bar.hide()},showBar:function(){this.bar.show()},buttonGenreOnSelect:function(){this.bar.hideBlowUp(),this.buttonGenre.showBlowUp()},buttonGenreOnAction:function(e){e&&(this.genreBarState=e),this.bar.hideBlowUp(),this.hideButtonGenre(),vui.executeOnContainer(this.parentWidget,"resetGrid"),this.bindGenre(e)},showButtonGenre:function(e){var t,i,s,n,a,o,r=e.id,l=e.name;this.genreBarState&&(s=(t=parseInt(this.genreBarState.blowUpLeft,10))-(i=window.vui.ResDef.explore.BTN_GENRE_L),n=100*(Math.floor(s/window.vui.ResDef.explore.BAR_BTN_W)+3),a=vui.executeOnContainer(this.parentWidget,"getAllowedContentType"),e.noAnim?this.buttonGenre.bind(r,l,i,a):(this.buttonGenre.bind(r,l,t,a),o=function(){vui._.animOpacity(this.bar.elem,1,1e3),this.buttonGenre.setSelectable(!0)}.bind(this),setTimeout(function(){vui._.animX(this.buttonGenre.elem,i,n,o)}.bind(this),100),vui._.animOpacity(this.bar.elem,0,n)))},hideButtonGenre:function(){this.buttonGenre.setSelectable(!1),this.buttonGenre.hide()},bindGenre:function(){this.el.divider.style.display="none",this.hideButtonGenre(),this.bar.bindGenre(this.genreBarState),this.genreBarState=null},setSubGenreBar:function(){this.bar.setSubGenreBar()},setSign:function(e,t){this.bar.setSign(e,t)},reset:function(){this.bar.reset()},bindSubGenre:function(e,t,i){this.el.divider.style.display="block",this.bar.bindSubGenre(e,t,i)},saveState:function(){return this.saveGenreState(),this.genreBarState},onBack:function(){this.buttonGenre.selectable?!0!==this.buttonGenre.isSelected?vui.select(this.buttonGenre):(alert("back from buttonGenreOnAction"),this.buttonGenreOnAction(this.buttonGenre.state)):vui.executeOnContainer(this,"onDirectionUp")}}),vui.widgets.ExVuduSort=new Class({Extends:vui.widgets.VuduSort,name:"vui.widgets.ExVuduSort",elemClassName:"exVuduSort"}),vui.widgets.ExVuduPosterGrid=new Class({Extends:vui.widgets.PosterGrid,elemClassName:"ExVuduPosterGrid",init:function(){this.el.myTitle=document.createElement("div"),this.el.myTitle.className="MyVuduPosterGridTitle",this.elem.appendChild(this.el.myTitle),this.parent.apply(this,arguments)},setTitle:function(e){"string"==typeof e&&(this.el.myTitle.innerHTML=e)},select:function(){this.parent.apply(this,arguments),vui.executeOnContainer(this.parentWidget,"gridOnSelect")}}),vui.widgets.ExSortGrid=new Class({Extends:vui.widgets.VuduSortGrid,elemClassName:"ExSortGrid",sortClass:vui.widgets.ExVuduSort,gridClass:vui.widgets.ExVuduPosterGrid,init:function(){this.parent.apply(this,arguments),this.reset()},shownSort:function(){return"none"!==this.sort.elem.style.display},_updGrid:function(){var e,t={type:"list",name:vui.executeOnContainer(this.parentWidget,"getVpmName"),state:null};t.filters=vuiFilters.getCurrentFilters(),t.filterLabels=vuiFilters.getCurrentFilterNames(),this.subGenre&&0<this.subGenre.length?(delete t.filters.geneGenreId,t.filters.geneSubGenreId=this.subGenre,t.filterLabels.subGenre=this.subGenreName,e=vui.executeOnContainer(this.parentWidget,"saveTotalState"),vuiFilters.setExploreSavedState(e)):this.genre?(t.filters.geneGenreId=this.genre,delete t.filters.geneSubGenreId,t.filterLabels.genre=this.genreName,(e=vui.executeOnContainer(this.parentWidget,"saveTotalState")).genreBarState&&(e.genreBarState.left=0,e.genreBarState.blowUpLeft=0,delete e.genreBarState.selected),vuiFilters.setExploreSavedState(e)):(delete t.filters.geneGenreId,delete t.filters.geneSubGenreId,delete t.filterLabels.genre,delete t.filterLabels.subGenre,vuiFilters.resetExploreSavedState()),this.grid.setList(t,!1),this.grid.list.selected=void 0,this.setTitle()},setSelectedCategory:function(e){e&&e.genre&&this.setGenre(e.genre.id,e.genre.name),e&&e.subGenre&&this.setSubGenre(e.subGenre.id,e.subGenre.name)},selectGenre:function(e,t){this.reset(),this.setGenre(e,t),this._updGrid()},setGenre:function(e,t){this.genre=e,this.genreName=t},deSelectGenre:function(){this.reset(),this._updGrid()},selectSubGenre:function(e,t){this.setSubGenre(e,t),this._updGrid()},setSubGenre:function(e,t){this.subGenre=[],this.subGenreName=[],this.subGenre.push(e),this.subGenreName.push(t)},deSelectSubGenre:function(e){for(var t=0;t<this.subGenre.length;t++)if(this.subGenre[t]==e){this.subGenre.splice(t,1),this.subGenreName.splice(t,1);break}this._updGrid()},setTitle:function(){var e,t,i=" ";this.genreName?(i=this.genreName,this.subGenre&&0<this.subGenre.length&&(i=this.subGenreName.join(", ")+" in "+i)):(t=" ","moviesbrowse"===(e=vui.executeOnContainer(this.parentWidget,"_getBrowseType"))?t=vui.strings.getText("FILTER_CONTENTTYPE_OPTION_MOVIES"):"tvbrowse"===e&&(t=vui.strings.getText("FILTER_CONTENTTYPE_OPTION_TV")),i=vui.strings.getText("FILTER_RESULT_TITLE",t),vuiFilters.hasFilter(!0)&&(i+=vui.strings.getText("FILTER_RESULT_TITLE_FILTERED_SUFFIX"))),this.grid.setTitle(i)},resetTitle:function(){this.grid.setTitle("")},gridOnSelect:function(){this.animating||vui.executeOnContainer(this.parentWidget,"showPanel")},reset:function(){this.genre=null,this.genreName=null,this.subGenre=[],this.subGenreName=[]}}),vui.widgets.ExploreView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ExploreView",elemClassName:"exploreView",Implements:[vui.gridPanelGlue],vpm_name:"ALL TITLES",allowedContentType:"",el:{},selectedCategory:{},init:function(){this.genreBarView=new vui.widgets.GenrebarView,this.attachChild(this.genreBarView);var e=new vui.widgets.sortCue;(this.el.sortCue=e).elem.className="exVuduSortCue clickable",this.attachChild(e),this.sortGrid=new vui.widgets.ExSortGrid,this.attachChild(this.sortGrid),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel),this.selectedCategory.genre=null,this.selectedCategory.subGenre=null},onAction:function(){},resetCategory:function(){this.selectedCategory={},this.selectedCategory.genre=null,this.selectedCategory.subGenre=null},resetSubCategory:function(){this.selectedCategory.subGenre=null},show:function(e){vui.getModel().isAlivePosterBaseUrl();var t={};t.vpm={type:"list",name:this.vpm_name,state:null};var i=vuiFilters.getExploreSavedState();if(!i||!i.state||e.state&&e.state.state||(e.state=i),e.state&&e.state.state)try{t.vpm.state=e.state.state,vuiFilters.setCurrentFilters(e.state.state.filters||{}),this.sortGrid.sort.refreshLabel(),this.selectedCategory=e.state.selectedCategory,this.sortGrid.setSelectedCategory(this.selectedCategory),this.selectedCategory.subGenre||this.selectedCategory.genre?(this.genreBarView.genreBarState=e.state.genreBarState,e.state.buttonGenreState&&this.genreBarView.restoreButtonGenreState(e.state.buttonGenreState),this.genreBarView.setSubGenreBar(),this.genreBarView.bindSubGenre(this.selectedCategory.genre.id,this.selectedCategory.genre.name,e.state.genreBarState),this.selectedCategory.subGenre&&this.genreBarView.bar.restoreSubGenreSelected(),0<e.state.genreBarViewSelected&&(this.genreBarView.selected=e.state.genreBarViewSelected)):this.genreBarView.bar.bindGenre(e.state.genreBarState),this.hideSort_()}catch(e){alert("error on restoring ribbon bar.")}else this.genreBarView.bindGenre(),this.hideSort_();t.vpm.filters=vuiFilters.getCurrentFilters(),this.sortGrid.show(t),this.sortGrid.firstTimeAnimate=!0,this.showSampleAd(),this.sortGrid.resetTitle()},hide:function(){},showSubGenre:function(e,t,i,s){this.genreBarView.saveGenreState(t),this.genreBarView.setSubGenreBar(),this.genreBarView.bindSubGenre(t,i,s)},resetGrid:function(){var e=this.selectedCategory.genre&&this.selectedCategory.genre.ind;this.resetCategory(),this.sortGrid.deSelectGenre(),null!==e&&this.genreBarView.setSign("+",e)},buttonOnAction:function(e){var t,i=e.ind,s=e.category;"genre"==s?this.selectedCategory.genre&&this.selectedCategory.genre.id==e.id?(vui._.setAriaLabel(e.name+" cleared"),this.resetGrid(),this.genreBarView.setSign("+",e.ind),this.omTrackSortFilter("removeFilter",null)):(vui._.setAriaLabel(e.name+" selected"),this.selectedCategory.genre=e,this.sortGrid.selectGenre(e.id,e.name),this.showSubGenre(i,e.id,e.name),this.omTrackSortFilter("addFilter",{type:e.category,value:e.name})):"subGenre"==s&&(t=e.id,this.selectedCategory.subGenre&&this.selectedCategory.subGenre.id==e.id?(this.resetSubCategory(),this.sortGrid.deSelectSubGenre(t,e.name),this.genreBarView.setSign("+",e.ind),this.omTrackSortFilter("removeFilter",null)):(this.selectedCategory.subGenre&&this.genreBarView.setSign("+",this.selectedCategory.subGenre.ind),this.resetSubCategory(),this.selectedCategory.subGenre=e,this.genreBarView.setSign("-",e.ind),this.sortGrid.selectSubGenre(t,e.name),this.omTrackSortFilter("addFilter",{type:e.category,value:e.name})))},omTrackSortFilter:function(e,t){var i={evars:{}};"addFilter"===e?i.events="event25":"removeFilter"===e&&(i.events="event26");var s=vuiFilters.getCurrentFilterNames(),n="";Object.keys(s).forEach(function(e){var t=s[e].toString();0<t.length&&(n+=e+"="+t+"|")}),n=n.slice(0,-1);var a={};a.sortFilterCombo=n,"addFilter"===e&&(a.sortFilter=t.type+"="+t.value),vui.analytics.trackEvar(a,i)},onGotListLength:function(e){0==e&&this.showSort_()},saveState:function(){return this.saveTotalState()},saveTotalState:function(){var e={};return e.state=this.sortGrid.saveState(),e.genreBarState=this.genreBarView.saveState(),e.genreBarViewSelected=this.genreBarView.selected,e.selectedCategory=this.selectedCategory,e.buttonGenreState=this.genreBarView.buttonGenre.state,e},buttonOnSelect:function(e){e&&this.showGenreInfoPanel(e)},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionUp")},exploreCategoryActive:function(){},posterOnAction:function(e){e&&e.contentId&&0<e.contentId[0]&&(this.report(),vui._.setAriaLabel(""),controller.goToPage("NewMovieDetails",{contentId:e.contentId}))},showSort_:function(){this.sortGrid.resetTitle(),this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue()},hideSort_:function(){this.sortGrid.setTitle(),this.sortGrid.hideSort()},showSortCue:function(){vuiFilters.hasFilter(!0)?this.el.sortCue.setActive():this.el.sortCue.setDefault(),this.el.sortCue.show()},hideSortCue:function(){this.el.sortCue.hide()},showPanel:function(){this.movieInfoPanel.makeVisible()},hidePanel:function(){this.movieInfoPanel.invisible()},showGenreInfoPanel:function(e){var t;!1===this.sortGrid.isShowingSort()&&e.data&&(this.hidePanel(),(t={}).name=e.data.name||"",t.description=e.data.description||"",this.movieInfoPanel.showGenreInfoPanel(t),this.showPanel())},showSampleAd:function(){this.movieInfoPanel&&!1===this.sortGrid.isShowingSort()&&(this.movieInfoPanel.show_sample_ad(),this.showPanel())},getVpmName:function(){return this.vpm_name},getAllowedContentType:function(){return this.allowedContentType},setTotalCount:function(e){},report:function(){var e=vuiFilters.getCurrentFilters(),t=null,i=null;for(var s in e){"geneSubGenreId"==s?((i=i||{}).subGenreRibbonSelection=vui._.aStr(e[s]).toLowerCase(),i.genreRibbonSelection=this.selectedCategory.genre&&this.selectedCategory.genre.id||""):"geneGenreId"==s?(i=i||{}).genreRibbonSelection=e[s]:(t=t||{})[vui._.toLower(s)]=vui._.toLower(e[s])}var n={evars:{}};if(i){for(var s in n.linkType="lnk_o",n.linkName="ribbon","moviesOnly"==this.allowedContentType?(n.evars.browseType="moviesbrowse",n.events="event16"):"tvOnly"==this.allowedContentType&&(n.evars.browseType="tvbrowse",n.events="event17"),i)n.evars[s]=i[s];vui.analytics.trackPage(n.evars.browseType,n,0)}t&&(n.linkType="lnk_o","moviesOnly"==this.allowedContentType?(n.evars.browseType="moviesbrowse",n.linkName="moviefilter",n.events="event24",n.evars.filters="movie:"+vui._.toOmFilterStr(t)):"tvOnly"==this.allowedContentType&&(n.evars.browseType="tvbrowse",n.linkName="tvfilter",n.events="event25",n.evars.filters="tv:"+vui._.toOmFilterStr(t)),vui.analytics.trackPage(n.evars.browseType,n,0))},_getBrowseType:function(){return"moviesOnly"==this.allowedContentType?"moviesbrowse":"tvOnly"==this.allowedContentType?"tvbrowse":""},omClearAll:function(){var e={linkType:"lnk_o",events:"event23"},t="";"moviesOnly"==this.allowedContentType?(t="clearall:movie",e.linkName="moviefilter"):"tvOnly"==this.allowedContentType&&(t="clearall:tv",e.linkName="tvfilter");var i=vuiFilters.getCurrentFilterNames(),s="";Object.keys(i).forEach(function(e){s+=e+"="+i[e].toString()+"|"}),s=s.slice(0,-1);var n={};n.filters=t,0<s.length&&(n.sortFilterCombo=s),vui.analytics.trackEvar(n,e)}}),vui.widgets.ExploreMovie=new Class({Extends:vui.widgets.ExploreView,name:"vui.widgets.ExploreMovie",vpm_name:"ALL MOVIES",allowedContentType:"moviesOnly",init:function(){vuiFilters.setCurrentFilterType("exploreMovie"),this.parent.apply(this,arguments)},show:function(){this.parent.apply(this,arguments)}}),vui.widgets.ExploreTV=new Class({Extends:vui.widgets.ExploreView,name:"vui.widgets.ExploreTV",vpm_name:"ALL TV",allowedContentType:"tvOnly",init:function(){vuiFilters.setCurrentFilterType("exploreTV"),this.parent.apply(this,arguments)},show:function(){this.parent.apply(this,arguments)}}),vui.widgets.InfoIconsActivate=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.InfoIconsActivate",elemClassName:"InfoIconsActivate",selectorType:"none",init:function(){this.label=document.createElement("div"),this.label.className="InfoIconsActivate_label",this.elem.appendChild(this.label),this.setDefault()},onAction:function(){var e=function(e){vui.executeOnContainer(this.parentWidget,"onActivateAction",e)}.bind(this);vui.ActivationController.beginActivation(e,"browse",!1)},setDefault:function(){this.elem.style.backgroundColor="#007bc4",this.elem.style.color="#FFFFFF",this.elem.style.borderRadius="6px"},setActive:function(){this.elem.style.backgroundColor="#FFFFFF",this.elem.style.color="#000000",this.elem.style.borderRadius="6px"},setText:function(e){this.label.innerHTML=e},onSelect:function(){this.setActive(),vui._.setAriaLabel(this.label.innerHTML)},onDeselect:function(){this.setDefault()}}),vui.widgets.InfoIcons=new Class({Extends:vui.widgets.Container,elemPosition:"static",name:"vui.widgets.InfoIcons",elemClassName:"infoIcons",pcElem:'<img style="position:absolute;top:3px;left:3px;" src="images/pc_enabled.png">',init:function(){this.activate=new vui.widgets.InfoIconsActivate,this.attachChild(this.activate),this.parental_control=document.createElement("div"),this.parental_control.className="infoIcons_parental_control",this.parental_control.innerHTML=vui.strings.transformCase("Parental Controls"),this.elem.appendChild(this.parental_control),this.credit_label=document.createElement("div"),this.credit_label.className="infoIcons_credit_label",this.credit_label.innerHTML=vui.strings.transformCase("Credits"),this.elem.appendChild(this.credit_label),this.credit_amount=document.createElement("div"),this.credit_amount.className="infoIcons_credit_amount",this.elem.appendChild(this.credit_amount),this.pc_icon=document.createElement("div"),this.pc_icon.className="infoIcons_pc_icon",this.pc_icon.style.background="url('"+vui.images.home.lock+"') no-repeat",this.elem.appendChild(this.pc_icon),this.updateInnerHtml()},_createCredit:function(){document.createElement("div")},updateInnerHtml:function(){this.credit_label.style.display="none",this.parental_control.style.display="none",this.credit_amount.style.display="none",this.pc_icon.style.display="none";var e,t,i=vui.promo.getAmount();vui.account.getAccountId()?(this.activate.hide(),i=vui.fund.getServiceBalance()+"",this.selectable=!1,"0"==i?(this.activate.hide(),(t=vui.getModel().parentalControls).newEnabled&&(this.parental_control.style.display="block",this.pc_icon.style.display="block",this.pc_icon.className="infoIcons_pc_icon infoIcons_pc_icon_no_amount")):(e=window.getPriceStr(i),t=vui.getModel().parentalControls,0<e?(txt=vui.strings.getText("SETTINGS_CREDIT_HEADING",parseFloat(e+"")),this.credit_amount.innerHTML="$"+e,this.credit_label.style.display="block",this.credit_amount.style.display="block",t.newEnabled&&(this.pc_icon.style.display="block",this.pc_icon.className="infoIcons_pc_icon")):t.newEnabled&&(this.parental_control.style.display="block",this.pc_icon.style.display="block",this.pc_icon.className="infoIcons_pc_icon infoIcons_pc_icon_no_amount"))):(this.selectable=!0,this.activate.setText(vui.strings.getTransformedText("OPENING_PITCH_SIGNUP_BUTTON")),this.activate.show())},onActivateAction:function(e){"success"==e&&(this.updateInnerHtml(),controller.refreshCurrentPage())}}),vui.widgets.InfoView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.InfoView",init:function(e){var t=this.elem,i=new Element("div",{class:"infoMessage fontItalicDull",html:e.text});t.appendChild(i),this.selectable=!1}}),vui.widgets.HomePageBook=new Class({Extends:vui.widgets.Book,name:"vui.widgets.HomePageBook",elemClassName:"homeTabContentContainer",selectionInheritance:!0,fullScreenMode:!1,pages:{featuredView:{widgetClass:vui.widgets.FeaturedView,skipHistory:!0},exploreMovie:{widgetClass:vui.widgets.ExploreMovie,skipHistory:!0},exploreTV:{widgetClass:vui.widgets.ExploreTV,skipHistory:!0},recommendedView:{widgetClass:vui.widgets.RecommendedView,skipHistory:!0},myVuduView:{widgetClass:vui.widgets.MyVuduView,skipHistory:!0},searchView:{widgetClass:vui.widgets.SearchView,skipHistory:!0},personalizedSearchView:{widgetClass:vui.widgets.PersonalizedSearchView,skipHistory:!0},infoView:{widgetClass:vui.widgets.InfoAndSettingsView,skipHistory:!0},myOffersView:{widgetClass:vui.widgets.MyOffersView,skipHistory:!0},personalizedView:{widgetClass:vui.widgets.PersonalizedView,skipHistory:!0},personalizedTabbedView:{widgetClass:vui.widgets.PersonalizedTabbedView,skipHistory:!0}},init:function(e){this.parent(e),this.delayDisplay=!1},setPage:function(t,i){!0===this.delayDisplay?(clearTimeout(this.tabTimer),this.tabTimer=setTimeout(function(){window.homeTabWaiting=!1;var e=vui.setBusy(!0,500);this.setPage_(t,i),vui.setBusy(!1,null,e)}.bind(this),window.selectDelay),window.homeTabWaiting=!0):(this.setPage_(t,i),this.delayDisplay=!0)},setPage_:function(e,t){var i=t||{};this.savedState&&this.savedState[0]==e?i.state=this.savedState[1]:i.state=null,this.deeplinkTab&&(i.deeplinkTab=this.deeplinkTab,this.deeplinkTab=null),(this.currentPageName!=e||this.currentNavTab&&this.currentNavTab!==i.name)&&(i.redo=!1,this.goToPage(e,i)),this.currentPageName=e,vui.gConnectionInstance.usePersonalizedApis()&&(this.currentNavTab=i.name),delete this.savedState},getCurrentPageEvars:function(){if(this.currentPage&&this.currentPage.getPageEvars)return this.currentPage.getPageEvars()},getState:function(){var e=[this.currentPageName];return this.currentPage&&this.currentPage.saveState&&e.push(this.currentPage.saveState()),e},setState:function(e){this.savedState=e},setDeeplinkParams:function(e){this.deeplinkTab=e},showSampleAd:function(){this.currentPage&&this.currentPage.showSampleAd&&this.currentPage.showSampleAd()}}),vui.widgets.TopNav=new Class({Extends:vui.widgets.HorizontalContainer,init:function(e){this.tabs=new vui.widgets.Tabs3,this.tabs.setModel(vui.TabsModel),this.attachChild(this.tabs,e),this.infoIcons=new vui.widgets.InfoIcons,this.attachChild(this.infoIcons,e)},onDirectionDown:function(){!0!==window.homeTabWaiting&&(1===this.selected?this.onDirectionLeft():vui.executeOnContainer(this.parentWidget,"onDirectionDown"))},onDirectionUp:function(){!0!==window.homeTabWaiting&&(0===this.selected&&this.infoIcons.selectable?this.onDirectionRight():vui.executeOnContainer(this.parentWidget,"onDirectionUp"))},afterOnDirectionDown:function(){this.getSelectedChild()==this.infoIcons&&this.tabs.setDisabled()}}),vui.pages.Home=new Class({Extends:vui.NewPage,Implements:vui.ContentActions,name:"vui.pages.Home",init:function(){this.selectable=!1;var e=createDiv({className:"outerContentContainer",position:"static"});this.elem.appendChild(e),this.topNav=new vui.widgets.TopNav(e),this.attachChild(this.topNav);var t=new vui.widgets.LogoBar;e.appendChild(t.elem),this.homePageBook=new vui.widgets.HomePageBook,this.attachChild(this.homePageBook,e)},afterOnDirectionDown:function(){this.getSelectedChild()!=this.tabs&&this.topNav.tabs.setDisabled()},tabActive:function(e){var t,i=e.model.name;i!=this.activeTab?"spotlight"==(this.activeTab=i)?this.homePageBook.setPage("featuredView"):"recommended"==i?(this.homePageBook.setPage("recommendedView"),this.trackMainTab(i)):"moviesBrowse"==i?(this.homePageBook.setPage("exploreMovie"),this.trackMainTab(i)):"tvBrowse"==i?(this.homePageBook.setPage("exploreTV"),this.trackMainTab(i)):"discover"==i?((t=vui.getModel().getDiscoverState())&&t.bookState&&this.homePageBook.setState(t.bookState),this.homePageBook.setPage("discoverView"),this.trackMainTab(i)):"my"==i||"myLibrary"==i?(vui._.deleteZapApiEvarsFromSessionStore(),this.homePageBook.setPage("myVuduView")):("search"==i?(vui._.deleteZapApiEvarsFromSessionStore(),vui.gConnectionInstance.usePersonalizedApis()?this.homePageBook.setPage("personalizedSearchView"):this.homePageBook.setPage("searchView")):"infoSettings"==i?(vui._.deleteZapApiEvarsFromSessionStore(),this.homePageBook.setPage("infoView")):"myOffers"==i?(vui._.deleteZapApiEvarsFromSessionStore(),this.homePageBook.setPage("myOffersView")):e.model.subtabs?this.homePageBook.setPage("personalizedTabbedView",e.model):this.homePageBook.setPage("personalizedView",e.model),this.trackMainTab(i)):this.homePageBook.showSampleAd()},trackMainTab:function(e){this.report(e,null,{channel:e},null,e)},changeFilters:function(e){null==this.filterParams&&(this.filterParams={type:"list",name:"ALL TITLES"}),this.filterParams.filters=e,alert("FILERS IS: "+JSON.encode(e))},getActiveTab:function(){return this.activeTab},omTrackSubTab:function(e){var t=(this.activeTab||"").toLowerCase(),i=e.pageTitle.toLowerCase();"mylibrary"===t&&""===i&&(i="kids mode");var s=t+":"+i;this.report(s,null,{channel:t,menuSubMenu:s,pageId:e.pageId},{subTab:t},t,e.events)},omTrackRowId:function(e){var t,i,s;vui.m.personalizedCache.uxRow[e]&&(t=vui._.aStr(vui.m.personalizedCache.uxRow[e].trackingId),i="true"===vui._.aStr(vui.m.personalizedCache.uxRow[e].isPersonal)?vui.analytics.zapApiIsPersonalText:"",t&&(s={rowId:t+i},vui.analytics.trackEvar(s,{events:"event207"})))},fundRefresh:function(){this.topNav.infoIcons&&this.topNav.infoIcons.updateInnerHtml()},show:function(e){e.bookState&&(this.homePageBook.setState(e.bookState),this.homePageBook.delayDisplay=!1),e.spotlightTab&&this.homePageBook.setDeeplinkParams(e.spotlightTab),vui.gConnectionInstance.usePersonalizedApis()?this.topNav.tabs.restoreActive(e.activeTab||vui.TabsModel.defaultTab):this.topNav.tabs.restoreActive(e.activeTab||"spotlight"),controller.baseLayer&&controller.baseLayer.currentDialog||(this.selectable=!0),e.savedSelection&&vui.restoreSelectorPosition(this,e.savedSelection),this.moreAnalytics={evars:{promoType:"novalue"}}},save:function(){this.doReport&&this.doReport();var e,t={};return t.activeTab=this.activeTab,t.savedSelection=vui.saveSelectorPosition(this),t.bookState=this.homePageBook.getState(),this.activeTab&&"discover"==this.activeTab&&"discoverView"==this.homePageBook.currentPageName&&(e=t,vui.getModel().saveDiscoverState(e)),t},hide:function(){this.parent(),this.homePageBook.hide(),this.reportTimer&&clearTimeout(this.reportTimer)},report:function(e,t,i,s,n,a){if(n){this.reportText=e.toLowerCase(),this.reportAnalytics={},this.currentReportText=this.reportText,(i=i||{}).browseType=t?"novalue":this.reportText;var o=this.homePageBook.getCurrentPageEvars();if(o)for(var r in o)i[r]=o[r];this.reportAnalytics.evars=i,this.reportAnalytics.props=s,this.reportAnalytics.channel=n.toLowerCase(),a&&(this.reportAnalytics.events=a),this.doReport||(this.doReport=function(){this.reportText&&(vui.analytics.trackPage(vui._.toLower(this.reportText),this.reportAnalytics,0),delete this.reportText)}.bind(this)),this.reportTimer&&clearTimeout(this.reportTimer),this.reportTimer=setTimeout(function(){this.doReport()}.bind(this),window.REPORTDELAY)}else alert("error! no channel")}}),vui.widgets.IconParaActionButton=new Class({Extends:vui.widgets.LeafContainer,name:"vui.widgets.IconParaActionButton",selectorType:"none",init:function(e){e=e||{},this.elem.className="iconParaActionButton",this.icon=document.createElement("div"),this.icon.className="iconParaActionButton_icon",this.elem.appendChild(this.icon),e.iconSrc&&(this.icon.style.backgroundImage="url('"+e.iconSrc+"')"),this.label=document.createElement("div"),this.elem.appendChild(this.label),this.label.className="iconParaActionButton_label",this.label.className+=" "+e.defaultClassName,this.avodTagImg=new Element("img"),this.avodTagImg.style.display="none",this.label.appendChild(this.avodTagImg),this.primaryLabel=document.createElement("p"),this.label.appendChild(this.primaryLabel),this.primaryLabel.className="iconParaActionButton_primaryLabel",this.secondaryLabel=document.createElement("p"),this.label.appendChild(this.secondaryLabel),this.secondaryLabel.className="iconParaActionButton_secondaryLabel",e.defaultClassName&&(this.defaultClassName=e.defaultClassName),e.imgSrc&&(this.label.style.backgroundImage="url('"+e.imgSrc+"')"),e.selectClassName&&(this.selectClassName=e.selectClassName),e.primaryLabel&&this.setPrimaryLabel(e.primaryLabel),e.secondaryLabel&&this.setSecondaryLabel(e.secondaryLabel),e.onSelect&&(this.onSelectFunc=definition.onSelect)},onSelect:function(){this.label.className&&(this.label.className=this.label.className.replace(this.defaultClassName,""),-1===this.label.className.indexOf(this.selectClassName)&&(this.label.className=this.label.className.trim()+" "+this.selectClassName)),this.onSelectFunc&&this.onSelectFunc()},onDeselect:function(){this.label.className&&(this.label.className=this.label.className.replace(this.selectClassName,""),-1===this.label.className.indexOf(this.defaultClassName)&&(this.label.className=this.label.className.trim()+" "+this.defaultClassName))},setPrimaryLabel:function(e){this.primaryLabel.innerHTML=e},getPrimaryLabel:function(){return this.primaryLabel.innerHTML||""},setSecondaryLabel:function(e){this.secondaryLabel.innerHTML=e},getSecondaryLabel:function(){return this.secondaryLabel.innerHTML||""},setIcon:function(e){this.icon&&(this.icon.style.backgroundImage="url('"+e+"')")},adjustIconSize:function(e){e?this.icon.style.backgroundSize=e+"px":this.icon.offsetWidth&&(this.icon.style.backgroundSize=this.icon.offsetWidth+1+"px")}}),vui.widgets.SeasonsBase=new Class({Extends:vui.widgets.IconParaActionButton,startFaded:!1,init:function(e){(e=e||{}).defaultClassName="btn_bg_dark_default btn_bg_size9_default",e.selectClassName="btn_bg_dark_default btn_bg_size9_select",this.parent(e),null==e.selectable&&(selectable=!0);var t=this.elem;e.id&&(t.id=e.id),t.className=t.className+" seasonBase",this.width=window.vui.ResDef.detailPage.SEASON_ITEM_BASE_WIDTH,this.height=window.vui.ResDef.detailPage.SEASON_ITEM_BASE_HEIGHT,t.style.width=this.width+"px",t.style.height=this.height+"px",this.ownCheckMark=new Element("img",{class:"ownCheckMark"}),this.ownCheckMark.src=vui.images.ownCheckmark,t.appendChild(this.ownCheckMark),this.ownCheckMark.style.display="none",this.descLabel=document.createElement("p"),this.elem.appendChild(this.descLabel),this.descLabel.className="iconParaActionButton_descLabel",this.descLabel.selectable=!1,1==this.startFaded&&this.fade(),this.selectable=!0},bind:function(e){var t=function(e){(this.movieInfoModel=e)?(e.refresh(),this.bindData(e)):this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,t),e=null}.bind(this),i=e.contentId;this.movieInfoModel=vui.getModel().getMovieInfo(i,t)},bindData:function(e){this.data=e.data;var t=this.data.title[0],i=t.indexOf(":");-1!==i&&(t=t.substr(0,i)),this.setPrimaryLabel(t);var s=-1!==(i=(s=this.data.title[0]).indexOf(":"))?s.substr(i+1):"";this.setSecondaryLabel(s);var n=this.data.contentId&&this.data.contentId[0],a=vui.getModel();a.ownedMovieCache[n]||this.data.containerId&&a.anyOfCidsPurchased(this.data.containerId)?this.ownCheckMark.style.display="block":this.ownCheckMark.style.display="none";var o=232;"sd"===window.WIDGETRESOLUTION&&(o=160),this.description=this.data&&this.data.description&&this.data.description[0]||"",this.description.length>o&&(this.description=window.truncate(this.data.description[0],o)+"..."),this.descLabel.innerHTML=this.description;var r=a.getPosterUrl(this.data,window.vui.ResDef.detailPage.POSTER_W);this.setIcon(r),this.adjustIconSize();var l=vui._.getPromoUrl(this.data,"poster");this.data.isAdvertEnabled&&"true"===this.data.isAdvertEnabled[0]&&l?(this.avodTagImg.src=l,this.avodTagImg.style.display="inherit"):this.avodTagImg.style.display="none",this.elem.style.visibility="visible"},unbind:function(){this.elem.style.visibility="hidden"},onAction:function(){vui._.deleteZapApiEvarsFromSessionStore(),vui.executeOnContainer(this.parentWidget,"posterOnAction",this.data)},onSelect:function(){var e;this.parent(),this.elem.style.border=vui.Theme.activeBorder,this.data&&(e="",e+=vui._.aStr(this.data.title),this.description&&(e+=". "+vui._.aStr(this.description)),vui._.setAriaLabel(e))},onDeselect:function(){this.parent(),this.elem.style.border=vui.Theme.invisibleBorder},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.ActorItemBase2=new Class({Extends:vui.widgets.IconParaActionButton,startFaded:!1,init:function(e){(e=e||{}).defaultClassName="btn_bg_dark_default btn_bg_size7_default",e.selectClassName="btn_bg_dark_default btn_bg_size7_select",this.parent(e),null==e.selectable&&(selectable=!0);var t=this.elem;e.id&&(t.id=e.id),t.className=t.className+" actor_item_base2",this.width=window.vui.ResDef.detailPage.ACTIOR_ITEM_BASE_WIDTH+1,this.height=window.vui.ResDef.detailPage.ACTIOR_ITEM_BASE_HEIGHT,t.style.width=this.width+"px",t.style.height=this.height+"px",1==this.startFaded&&this.fade()},bind:function(e){var t="",t=(this.data=e).lastName?e.firstName?e.firstName[0]+" "+e.lastName[0]:e.lastName[0]:e.firstName?e.firstName[0]:vui.strings.getText("GET_FULL_NAME_UNKNOWN");20<(this.fullNameLabel=t).length&&(t=t.substring(0,20)+"..."),this.setPrimaryLabel(t);var i="";e.role&&(1===e.role.length&&"Actor"==e.role[0]?e.characterName&&(i=e.characterName.join("/")):i=e.role.join("/")),20<(this.roleLabel=i).length&&(i=i.substring(0,20)+"..."),this.setSecondaryLabel(i),e.portraitUrl&&(this.setIcon(e.portraitUrl+"-"+window.vui.ResDef.detailPage.ACTIOR_ITEM_IMAGE_WIDTH+".jpg"),this.adjustIconSize()),this.elem.style.visibility="visible"},unbind:function(){this.elem.style.visibility="hidden"},onAction:function(){vui.executeOnContainer(this.parentWidget,"actorMenuItemAction",this.data),controller.goToPage("FilmographyView",{model:this.data,listType:"filmography"})},onSelect:function(){this.parent(),vui._.setAriaLabel(this.fullNameLabel+": "+this.roleLabel),this.elem.style.border=vui.Theme.activeBorder,vui.executeOnContainer(this.parentWidget,"actorMenuItemAction",this.data)},onDeselect:function(){this.parent(),this.elem.style.border="none"},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.RtReviewsBase=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.RtReviewsBase",init:function(e){(e=e||{}).defaultClassName="btn_bg_dark_default btn_bg_size8_default",e.selectClassName="btn_bg_select_outline btn_bg_size8_select",e.elemClassName="rt_review_base",this.parent(e),this.elem.setAttribute("role","document");var t=this.elem;e.id&&(t.id=e.id),this.width=window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_WIDTH,this.height=window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_HEIGHT,t.style.width=this.width+"px",t.style.height=this.height+"px",this.source=document.createElement("p"),this.elem.appendChild(this.source),this.source.className="rtReview_source",this.source.selectable=!1,this.comment=document.createElement("p"),this.elem.appendChild(this.comment),this.comment.className="rtReview_label",this.comment.selectable=!1},onAction:function(){vui.select(this)},onSelect:function(){this.parent(),this.label.style.color="white",vui._.setAriaLabel(this.data.author+". "+this.data.source+". "+this.data.comment),vui.executeOnContainer(this.parentWidget,"updateReviews"),this.elem.style.height=this.heightDiff+window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_HEIGHT+"px",this.comment.style.height=this.commentHeightMax+"px"},onDeselect:function(){this.parent(),vui.executeOnContainer(this.parentWidget,"updateReviews"),this.elem.style.height=parseInt(this.elem.style.height,10)-this.heightDiff+"px",this.comment.style.height=window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_HEIGHT+"px"},bind:function(e){"fresh"==(this.data=e).icon?this.setIcon(vui.images.mp.tomato):this.setIcon(vui.images.mp.reviewSplat),this.setLabel(e.author),this.source.innerHTML=e.source;var t=vui._.aStr(e.comment),i=vui.measureDimensions(t,"rtReview_label").height,s=window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_LIMIT,n=window.truncate(t,s);this.comment.innerHTML=n;var a=(parseInt(i/window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT)+2)*window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT+window.vui.ResDef.detailPage.REVIEW_ITEM_LABEL_HEIGHT+window.vui.ResDef.detailPage.REVIEW_ITEM_PADDING_BOTTOM;this.requiredHeight=a>window.vui.ResDef.detailPage.REVIEW_ITEM_HIGHLIGHT_HEIGHT?window.vui.ResDef.detailPage.REVIEW_ITEM_HIGHLIGHT_HEIGHT:a<window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_HEIGHT?window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_HEIGHT:a,this.heightDiff=this.requiredHeight-window.vui.ResDef.detailPage.REVIEW_ITEM_BASE_HEIGHT;var o=this.requiredHeight-window.vui.ResDef.detailPage.REVIEW_ITEM_LABEL_HEIGHT-window.vui.ResDef.detailPage.REVIEW_ITEM_PADDING_BOTTOM;this.commentHeightMax=(parseInt(o/window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT)+1)*window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_LINE_HEIGHT,this.comment.style.height=window.vui.ResDef.detailPage.REVIEW_ITEM_COMMENT_HEIGHT+"px",this.elem.style.visibility="visible"},unbind:function(){this.elem.style.visibility="hidden"},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.BookmarkProgressBar=new Class({name:"vui.widgets.BookmarkProgressBar",Extends:vui.widgets.Container,elemPosition:"static",nonCompleteBar:null,progressIndicator:null,init:function(e){e=e||{},this.elem.className="bookmarkProgressBar",e.shellWidth?this.shellWidth=e.shellWidth:this.shellWidth=window.vui.ResDef.detailPage.BOOKMARK_SHELL_WIDTH,this._createTimeLine(),this._createNonCompleteBar()},_createTimeLine:function(){this.timeline=new Element("div",{class:"bookmarkTimeline"}),this.elem.appendChild(this.timeline),this.time=new Element("span",{class:"bookmarkTime"}),this.timeline.appendChild(this.time),this.totalTime=new Element("span",{class:"bookmarkTotalTime"}),this.timeline.appendChild(this.totalTime)},_createNonCompleteBar:function(){this.nonCompleteBar=createDiv({className:"progressNonCompleteBar",position:"static"}),this.elem.appendChild(this.nonCompleteBar),this.nonCompleteBar.style.width=this.shellWidth+"px";var e=new Element("div",{class:"progressNonCompleteBar_grayBg"});e.style.backgroundColor=vui.Theme.scrubberBg,e.style.width=this.shellWidth+"px",this.nonCompleteBar.appendChild(e),this.progressIndicator=new Element("div",{class:"progressNonCompleteBar_progressIndicator"}),this.progressIndicator.style.backgroundColor=vui.Theme.scrubber,this.nonCompleteBar.appendChild(this.progressIndicator)},bind:function(e){this.time.innerHTML=timeAsString(1e3*e.time),this.totalTime.innerHTML=" / "+timeAsString(1e3*e.totalTime),this.showNonComplete(e.progress)},showNonComplete:function(e){e=0<e&&e<100?e:100==e?100:0,this.progressIndicator.style.width="0";var t=Math.round(e*this.shellWidth/100);this.progressIndicator.style.width=t+"px"}}),vui.widgets.RentalWidget=new Class({name:"vui.widgets.RentalWidget",Extends:vui.widgets.Base,init:function(e){(e=e||{}).elemClassName&&(this.elem.className=e.elemClassName),this.days_hrs=document.createElement("img"),this.days_hrs.src=vui.images.rentalInfo_days_hrs,this.days_hrs.className="rental_widget_bg",this.elem.appendChild(this.days_hrs),this.days_hrs.style.display="none",this.hrs_mins=document.createElement("img"),this.hrs_mins.src=vui.images.rentalInfo_hrs_min,this.hrs_mins.className="rental_widget_bg",this.elem.appendChild(this.hrs_mins),this.hrs_mins.style.display="none",this.mins_secs=document.createElement("img"),this.mins_secs.src=vui.images.rentalInfo_min_sec,this.mins_secs.className="rental_widget_bg",this.elem.appendChild(this.mins_secs),this.mins_secs.style.display="none",this.quality=document.createElement("img"),this.quality.className="rental_widget_quality",this.elem.appendChild(this.quality),this.quality.style.display="none",this.textPos1=document.createElement("div"),this.textPos1.className="rental_widget_text1 font32",this.elem.appendChild(this.textPos1),this.textPos1.style.display="none",this.textPos2=document.createElement("div"),this.textPos2.className="rental_widget_text2 font32",this.elem.appendChild(this.textPos2),this.textPos2.style.display="none"},bind:function(e){if(e){var t=!1,i=null;switch(e.length<=3&&e[2]?i=e[2]:3<e.length&&e[4]&&(t=!0,i=e[4]),i&&(this.quality.src=vui.images.mp[i.toLowerCase()+"_on"],"hdx"==i.toLowerCase()||"uhd"==i.toLowerCase()?this.quality.className=this.quality.className+" rental_hdx":this.quality.className=this.quality.className+" rental_hdsd",this.quality.style.display="block"),e[1]){case vui.strings.getText("TIME_STRING_DAY"):this.days_hrs.style.display="block",this.hrs_mins.style.display="none",this.mins_secs.style.display="none",this.textPos1.style.display="block",this.textPos2.style.display="block",this.textPos1.innerHTML=e[0],this.textPos2.innerHTML=t&&e[2]?e[2]:"00";break;case vui.strings.getText("TIME_STRING_HOUR"):this.days_hrs.style.display="none",this.hrs_mins.style.display="block",this.mins_secs.style.display="none",this.textPos1.style.display="block",this.textPos2.style.display="block",this.textPos1.innerHTML=e[0],this.textPos2.innerHTML=t&&e[2]?e[2]:"00";break;case vui.strings.getText("TIME_STRING_MINUTE"):this.days_hrs.style.display="none",this.hrs_mins.style.display="none",this.mins_secs.style.display="block",this.textPos1.style.display="block",this.textPos2.style.display="block",this.textPos1.innerHTML=e[0],this.textPos2.innerHTML=t&&e[2]?e[2]:"00";break;case vui.strings.getText("TIME_STRING_SECOND"):this.days_hrs.style.display="none",this.hrs_mins.style.display="none",this.mins_secs.style.display="block",this.textPos1.style.display="block",this.textPos2.style.display="block",this.textPos1.innerHTML="00",this.textPos2.innerHTML=e[0]}}}}),vui.widgets.EpisodePriceLabel=new Class({name:"vui.widgets.EpisodePriceLabel",Extends:vui.widgets.Base,init:function(){this.elem.className="episodePriceLabel font22"},showFree:function(){this.elem.innerHTML="free",this.show()},showBonus:function(){this.elem.innerHTML="bonus",this.show()},showComing:function(e){this.elem.innerHTML=e||"",this.show()},_formatPrice:function(e){return"from $"+e},showPrice:function(e){this.elem.innerHTML=this._formatPrice(e),this.show()},setFontColor:function(e){this.elem.style.color=e}}),vui.widgets.UHDFeatures=new Class({Extends:vui.widgets.Base,name:"vui.widgets.UHDFeatures",elemPosition:"static",init:function(){this.elem.className="UHDFeatures",this.title=createDiv({className:"UHDFeaturesTitle",position:"static"},this.elem),this.title.innerHTML=vui.strings.transformCase("UHD Features",!0),this.promoIcons=createDiv({className:"UHDPromoIcons",position:"static"},this.elem),this.leftSpacing=0,this.availableFeatures=[]},addIcon:function(e){var t=createImg({className:"UHDIcon",position:"static"},this.promoIcons),i={uhdLogo:"uhd",hdr10_details_enabled:"hdr",hdr10_details_disabled:"hdr disabled",dolbyVisionLogo:"dolbyVision",dolbyVisionLogoGrey:"dolbyVision"}[e]||e;this.availableFeatures.push(i),t.src=vui.images[e]},bind:function(e){var t,i,s;vui.gConnectionInstance.getIsMVPEnabled()?(t=e.data.contentVariants[0].contentVariant.filter(function(e){return"uhd"===e.videoQuality[0]})[0].editions[0].edition,s=i=!1,t&&t.forEach(function(e){"hdr10"===e.videoProfile[0]&&"dash"===e.editionFormat[0]&&(i=!0),"dvheDtr"!==e.videoProfile[0]&&"dvheStn"!==e.videoProfile[0]||"dash"!==e.editionFormat[0]||(s=!0)}),this.addIcon("uhdLogo"),vui.vvPlatform.dolbyVision&&s&&"ceres"!==vui.vvPlatform.id?this.addIcon("dolbyVisionLogo"):vui.vvPlatform.hdr10&&i?this.addIcon("hdr10_details_enabled"):this.addIcon("hdr10_details_disabled")):(this.addIcon("uhdLogo"),vui.vvPlatform.dolbyVision?this.addIcon("dolbyVisionLogo"):"pallas"===vui.vvPlatform.id&&this.addIcon("dolbyVisionLogoGrey"));var n=vui._.dolbyAudio(e.data);n&&vui.images[n]&&this.addIcon(n),this.elem.style.display="inline-block"},getAriaLabel:function(){return 0<this.availableFeatures.length?this.title.innerHTML+": "+this.availableFeatures.join(", ")+". ":""}}),vui.widgets.FamilyplayInfo=new Class({Extends:vui.widgets.Base,name:"vui.widgets.FamilyplayInfo",elemClassName:"fpInfo",elemPosition:"static",init:function(){this.icon=createImg({src:vui.images.familyplay_info_icon,position:"relative"},this.elem)},bind:function(){this.elem.style.display="inline-block"},getAriaLabel:function(){return"inline-block"===this.elem.style.display?"Family play.":""}}),vui.widgets.ActorList=new Class({Extends:vui.widgets.GenericGridList,name:"vui.widgets.ActorList",settings:{normal:{columns:2,rows:4}},getMovieListModel:function(e){if(this.data){for(var t=Math.min(8,this.data.length),i=this.data.slice(0,t),s=this.data.slice(t),n=Math.ceil(t/2),a=[],o=0;o<n;o++)i[o]&&a.push(i[o]),i[o+n]&&a.push(i[o+n]);var r=a.concat(s),l={data:r,get:function(e){return r[e]},totalCount:r.length,setListener:function(e){this.listener=e}};e&&e(l,0,r.length-1)}else l={data:null,get:function(){return null},totalCount:0,setListener:function(e){this.listener=e}},e&&e(l,0,0);return l},init:function(e){this.layout={type:"vertical"},e.paddingRight=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT,e.paddingBottom=window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,this.parent(e,this.getMovieListModel),e.numVisible&&(this.numVisible=e.numVisible),this.elem.className="movieGridList",this.params=e,this.listName="MOST WATCHED",this.numVisible=e.numVisible||this.numVisible},createWidget:function(e){var t=new vui.widgets.ActorItemBase2({id:e}),i=t.getElem();return i.style.left="0",i.style.top=e*(parseInt(i.style.height)+window.vui.ResDef.detailPage.ACTIOR_ITEM_BASE_PADDING)+"px",t},getKeyFunc:function(){return function(e){return vui.getModel().getPosterUrl(e,"125")}.bind(this)},destroy:function(){this.parent()},getRowIndex:function(){return this.rowIndex},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.CastList=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],listClass:vui.widgets.ActorList,name:"vui.widgets.CastList",show:function(e,t){t||(this.movieInfoModel=e.movieInfoModel),this.bind(this.movieInfoModel)},bind:function(e){this.list.data=e.credits[0].credit,8<this.list.data.length&&this.scroller.show(),this.list.refresh()},init:function(e){this.elem.className="castList";var t=new Element("div",{class:"castListContainer"});this.elem.appendChild(t),this.list=new vui.widgets.ActorList(e),this.attachChild(this.list,t),this.scroller=new vui.widgets.Scroller3,this.scroller.hide(),this.attachChild(this.scroller,t),this.list.setBeginArrow(this.scroller)},setList:function(e,t){this.list.listName=e,t&&(this.list.params=t),this.list.refresh()},unload:function(e){e.scrollOffset=0,e.rowIndex=0,e.selectedIndex=0}}),vui.widgets.MovieDetailsCastView=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsCastView",elemClassName:"movieDetailsTabDetailInnerContainer",layout:{type:"horizontal"},init:function(e){this.castList=new vui.widgets.CastList(e),this.attachChild(this.castList)},castViewPosterGridOnBack:function(){vui.select(this.castList)},show:function(e,t){var i=e.savedState;t||(this.movieInfoModel=e.movieInfoModel),i?(this.castList.list.currentStart=i.castOffset,this.castList.list.selected=i.castPos.modelIndex,this.savedState=i):this.selectedIndex=0,this.bind(this.movieInfoModel)},bind:function(e){var t=e.get();this.movieInfo=t,this.castList.bind(t),this.savedState||this.reset()},reset:function(){var e=this.movieInfo.credits[0].credit;e&&0<e.length&&(this.actorMenuItemAction(e[0]),delete this.actorClicked,delete this.selectedIndex)},actorMenuItemAction:function(e){var t,i;this.actorClicked&&this.actorClicked===e.personId[0]||(this.actorClicked=e.personId[0],(t={name:"cast"}).actorId=e.personId[0],this.savedState&&(t.state={},t.state.scrollOffset=this.savedState.posterOffset,delete this.savedState),(i=vui.getSelected())&&"vui.widgets.ActorItemBase2"===i.name&&(this.currSelObj=i))},onGotListLength:function(){vui.setSelectorVisible(!0)},save:function(){var e={};return e.castOffset=this.castList.list.getScrollOffset(),e.castPos=this.castList.list.getSelectedIndex(),e}}),vui.widgets.ReviewList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.ReviewList",partialRow:!1,settings:{normal:{columns:1,rows:4}},getMovieListModel:function(e){var t;return this.data?(t={data:this.data,get:function(e){return this.data[e]},totalCount:this.data.length,setListener:function(e){this.listener=e}},e&&e(t,0,this.data.length-1)):(t={data:null,get:function(e){return null},totalCount:0,setListener:function(e){this.listener=e}},e&&e(t,0,0)),t},init:function(e){this.preventRightSiblingSelection=!1,e=e||{},this.layout={type:"vertical"},e.paddingRight=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT,e.paddingBottom=window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,this.parent(e,this.getMovieListModel),e.numVisible&&(this.numVisible=e.numVisible),this.elem.className="movieGridList",this.params=e,this.listName="MOST WATCHED";this.elem},updateReviews:function(){var e=vui.getSelected(),t=0;for(i=0;i<this.children.length;i++)var s=this.children[i],t=s==e?(s.elem.style.top=parseInt(t,10)+"px",parseInt(t+s.requiredHeight+window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,10)):(s.elem.style.top=parseInt(t,10)+"px",parseInt(t+s.height+window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,10))},createWidget:function(e){var t=new vui.widgets.RtReviewsBase({id:e+1}),i=t.getElem();return i.style.left="0",i.style.top=e*(parseInt(i.style.height)+window.vui.ResDef.detailPage.ACTIOR_ITEM_BASE_PADDING)+"px",t},getKeyFunc:function(e){return function(e){return vui.getModel().getPosterUrl(e,"125")}},destroy:function(){this.parent()},getRowIndex:function(){return this.rowIndex},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.RtReviewList=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],listClass:vui.widgets.ReviewList,name:"vui.widgets.RtReviewList",show:function(e,t){t||(this.movieInfoModel=e.movieInfoModel),this.bind(this.movieInfoModel)},bind:function(e){4<(this.list.data=e).length&&this.scroller.show(),this.list.refresh()},init:function(e,t){this.elem.className="reviewList",t&&(this.elem.className=this.elem.className+" "+t);var i=new Element("div",{class:"reviewListContainer"});this.elem.appendChild(i),this.list=new vui.widgets.ReviewList(e),this.attachChild(this.list,i),this.scroller=new vui.widgets.Scroller3,this.scroller.hide(),this.attachChild(this.scroller,i),this.list.setBeginArrow(this.scroller)},setList:function(e,t){this.list.listName=e,t&&(this.list.params=t),this.list.refresh()},unload:function(e){e.scrollOffset=0,e.rowIndex=0,e.selectedIndex=0},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.MovieDetailsRtReviews=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsRtReviews",elemClassName:"movieDetailsTabReviewContainer",layout:{type:"horizontal"},init:function(e){this.goodReviewList=new vui.widgets.RtReviewList(e,"movieDetails_good_rtReviews"),this.badReviewList=new vui.widgets.RtReviewList(e,"movieDetails_bad_rtReviews"),this.attachChild(this.goodReviewList),this.attachChild(this.badReviewList)},show:function(e,t){var i=e.savedState;t||(this.movieInfoModel=e.movieInfoModel),i?(this.goodReviewList.list.currentStart=i.goodReviewOffset,this.goodReviewList.list.selected=i.goodReviewPos.modelIndex,this.badReviewList.list.currentStart=i.goodReviewOffset,this.badReviewList.list.selected=i.goodReviewPos.modelIndex,this.savedState=i):this.selectedIndex=0,this.bind(this.movieInfoModel)},bind:function(e){var t=e.get(),i=(this.movieInfo=t).tomatoReviews[0].tomatoReview,s=[],n=[];if(i)for(var a in i)i.hasOwnProperty(a)&&("fresh"==i[a].icon?s.push(i[a]):n.push(i[a]));this.goodReviewList.bind(s),this.badReviewList.bind(n),this.savedState||this.reset()},reset:function(){var e=this.movieInfo.tomatoReviews[0].tomatoReview;e&&0<e.length&&delete this.selectedIndex},onGotListLength:function(){vui.setSelectorVisible(!0)},save:function(){var e={};return e.goodReviewOffset=this.goodReviewList.list.getScrollOffset(),e.goodReviewPos=this.goodReviewList.list.getSelectedIndex(),e.badReviewOffset=this.badReviewList.list.getScrollOffset(),e.badReviewPos=this.badReviewList.list.getSelectedIndex(),e},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.ParentalGuideTopSection=new Class({Extends:vui.widgets.Container,selectable:!1,elemPosition:"relative",init:function(e,t){this.ariaLabel="",createImg({src:vui.images.commonSense.mediaLogo,className:"commonSenseLogo",position:"relative"},this.elem),e&&(createImg({src:vui.images.commonSense["age"+e+"_detail"],className:"ageLimitIcon"},this.elem),this.ariaLabel+="Age Limit: "+e),t.summary&&(createDiv({text:vui._.aStr(t.summary),className:"summary fontWhite24",position:"relative"},this.elem),this.ariaLabel+=". "+t.summary+" ")}}),vui.widgets.ParentalGuideNeedToKnow=new Class({Extends:vui.widgets.Container,selectable:!1,elemClassName:"parentalGuideNeedToKnow",elemPosition:"relative",init:function(e){createDiv({text:vui.strings.getText("FAMILY_PARENTS_NEED_TO_KNOW"),className:"header fontWhite24",position:"static"},this.elem),createDiv({text:e,className:"needToKnow fontWhite22",position:"static"},this.elem),createDiv({text:vui.strings.getText("COMMON_MEDIA_DISCLAIMER"),className:"header fontWhite24",position:"static"},this.elem),createDiv({text:vui.strings.getText("COMMON_MEDIA_DISCLAIMER_DESCRIPTION"),className:"needToKnow fontWhite22",position:"static"},this.elem),this.ariaLabel=" "+vui.strings.getText("FAMILY_PARENTS_NEED_TO_KNOW")+" "+e+" "+vui.strings.getText("COMMON_MEDIA_DISCLAIMER")+" "+vui.strings.getText("COMMON_MEDIA_DISCLAIMER_DESCRIPTION")}}),vui.widgets.ParentalGuideRatingsArea=new Class({Extends:vui.widgets.Container,selectable:!1,elemClassName:"parentalGuideRatingsArea",elemPosition:"relative",circleWidth:window.vui.ResDef.detailPage.PARENTAL_GUIDE_CIRCLE_W,circleSpacing:window.vui.ResDef.detailPage.PARENTAL_GUIDE_CIRCLE_SPACING,init:function(s){var n={educationalValue:{label:"FAMILY_META_EDUCATIONAL_VALUE",icon:"educationalIcon"},positiveMessages:{label:"FAMILY_META_POSITIVE_MESSAGES",icon:"messagesIcon"},positiveRoleModels:{label:"FAMILY_META_ROLE_MODELS",icon:"roleModelsIcon"},violence:{label:"FAMILY_META_VIOLENCE",icon:"violenceIcon"},sex:{label:"FAMILY_META_SEX",icon:"sexIcon"},language:{label:"FAMILY_META_LANGUAGE",icon:"languageIcon"},consumerism:{label:"FAMILY_META_CONSUMERISM",icon:"consumerismIcon"},drinkDrugSmoke:{label:"FAMILY_META_DRINKING_DRUGS",icon:"drugsIcon"}};this.ariaLabel="",Object.keys(n).forEach(function(e){var t=this.createWidget({label:vui.strings.getText(n[e].label),iconSrc:vui.images.commonSense[n[e].icon],rating:s[e]});this.elem.appendChild(t);var i=vui.strings.getText(n[e].label).replace("<br/>"," ");this.ariaLabel+=i+": "+(s[e]&&0<s[e]?s[e]:"Not Present")+". "}.bind(this))},createWidget:function(e){var t=createDiv({className:"parentalGuideRating",position:"relative"});0<e.rating?(this.circleContainer=createDiv({className:"circleContainer"},t),this.addCircles(e.rating)):createDiv({className:"notPresent",text:vui.strings.getText("FAMILY_META_NO_RATING")},t);var i=createDiv({className:"iconContainer"},t);return e.iconSrc&&createImg({src:e.iconSrc,position:"relative",className:"parentalRatingIcon"},i),createDiv({text:e.label,className:"labelText fontWhite18"},t),t},addCircles:function(e){for(var t=0,i=1;i<6;i++){var s=createDiv({});i<=e&&s.addClass("filled"),s.style.left=t+"px",t+=this.circleWidth+this.circleSpacing,this.circleContainer.appendChild(s)}}}),vui.widgets.MovieDetailsParentalGuide=new Class({Extends:vui.widgets.Container,elemClassName:"movieDetailsParentalGuide",scrollerShowing:!1,init:function(e){var t=e.movieInfoModel.data,i=vui._.aStr(t.parentalGuide),s=vui._.aStr(t.ageLimit);this.ariaLabel=vui.strings.getText("TAB_FAMILY_PARENT_GUIDE")+". ",this.scrollableWidget=new vui.widgets.ScrollableContainer,this.attachChild(this.scrollableWidget,this.elem);var n,a,o=new vui.widgets.ParentalGuideTopSection(s,i);this.scrollableWidget.addWidget(o),this.ariaLabel+=o.ariaLabel,vui._.aStr(i.parentalGuideRating)&&(n=new vui.widgets.ParentalGuideRatingsArea(vui._.aStr(i.parentalGuideRating)),this.ariaLabel+=n.ariaLabel,this.scrollableWidget.addWidget(n)),vui._.aStr(i.parentsNeedToKnow)&&(a=new vui.widgets.ParentalGuideNeedToKnow(i.parentsNeedToKnow[0]),this.scrollableWidget.addWidget(a),this.ariaLabel+=a.ariaLabel),vui._.setAriaLabel(this.ariaLabel),this.scroller=new vui.widgets.SelectableScroller,this.attachChild(this.scroller,this.elem),this.scroller.hide(),this.elem.addEvent("mouseenter",this.onMouseEnter.bind(this))},show:function(){this.scrollableWidget.hasScrollableContent()?(this.scroller.show(),this.scrollerShowing=!0):this.selectable=!1},hide:function(){this.elem.removeEvent("mouseenter")},onDirectionDown:function(){this.scrollableWidget.scrollDown(),this.updateScroller()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},onDirectionUp:function(){this.scrollableWidget.scrollUp(),this.updateScroller()},updateScroller:function(){this.scroller.setRatio(this.scrollableWidget.getCurrentScrollRatio())},onMouseEnter:function(){this.scrollerShowing&&vui.select(this.scroller)},onMouseWheel:function(e){this.scrollerShowing&&(0<e.wheel?this.onDirectionUp():this.onDirectionDown())}}),vui.widgets.FamilyFilter=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsMoreInfoView",elemClassName:"movieDetailsTabDetailInnerContainer",scrollerShowing:!1,init:function(){var e=vui.strings.getText("DEFAULT_TAB_FAMILY_PLAY");this.scrollableWidget=new vui.widgets.ScrollableContainer,this.attachChild(this.scrollableWidget,this.elem);var t=new Element("div",{class:"familyFilterMain"}),i=new Element("h2");i.innerHTML=vui.strings.getText("DETAILS_FAMILY_PLAY_TITLE"),t.appendChild(i),e+=". "+i.innerHTML;var s=new Element("div",{class:"sections fontWhite18"});s.innerHTML=vui.strings.getText("DETAILS_FAMILY_PLAY_DESC1"),t.appendChild(s),e+=". "+s.innerHTML;var n=new Element("div",{class:"sections fontWhite18"});n.innerHTML=vui.strings.getText("DETAILS_FAMILY_PLAY_DESC2"),t.appendChild(n),e+=". "+n.innerHTML;var a=new Element("div",{class:"clearplay_powered"});a.innerText=vui.strings.getText("DETAILS_FAMILY_PLAY_BY");var o=new Element("img",{class:"clearplay_image",src:vui.images.clearplay_w_text});a.appendChild(o),t.appendChild(a),e+=". "+a.innerText+" Clear Play",this.scrollableWidget.scrollableArea.appendChild(t),this.scroller=new vui.widgets.SelectableScroller,this.attachChild(this.scroller,this.elem),this.scroller.hide(),this.elem.addEvent("mouseenter",this.onMouseEnter.bind(this)),vui._.setAriaLabel(e)},show:function(){this.scrollableWidget.hasScrollableContent()?(this.scroller.show(),this.scrollerShowing=!0,this.selectable=!0):this.selectable=!1},hide:function(){this.elem.removeEvent("mouseenter")},onDirectionDown:function(){this.scrollableWidget.scrollDown(),this.updateScroller()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},onDirectionUp:function(){this.scrollableWidget.scrollUp(),this.updateScroller()},updateScroller:function(){this.scroller.setRatio(this.scrollableWidget.getCurrentScrollRatio())},onMouseEnter:function(){this.scrollerShowing&&vui.select(this.scroller)},onMouseWheel:function(e){this.scrollerShowing&&(0<e.wheel?this.onDirectionUp():this.onDirectionDown())}}),vui.widgets.MovieDetailsMoreInfoView=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsMoreInfoView",elemClassName:"movieDetailsTabDetailInnerContainer",scrollerShowing:!1,init:function(e){this.ariaLabel="",this.rightSideAriaLabel="",this.scrollableWidget=new vui.widgets.ScrollableContainer,this.attachChild(this.scrollableWidget,this.elem);var t=new Element("table",{class:"moreInfoTable"}),i=new Element("tr",{class:"moreInfoTr"}),s=new Element("td",{class:"moreInfoLeftTd"});i.appendChild(s),t.appendChild(i),this.secondary=new Element("div",{class:"fontSmall movieDetailsSecondaryInfo"}),s.appendChild(this.secondary),this.summary=new Element("div",{class:"fontWhite18 moreInfoSummary"}),s.appendChild(this.summary);var n=new Element("td",{class:"moreInfoRightTd"});i.appendChild(n),this.addRightSide(n),this.movieInfoModel=e.movieInfoModel,this.bind(e.movieInfoModel),this.scrollableWidget.scrollableArea.appendChild(t),this.scroller=new vui.widgets.SelectableScroller,this.attachChild(this.scroller,this.elem),this.scroller.hide(),this.elem.addEvent("mouseenter",this.onMouseEnter.bind(this))},addRightSide:function(e){var t=new Element("table",{class:"moreInfoRightTable",border:0});this.variants={},(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll())&&(this.variants.uhd=this.addQualityRow(t,"uhd")),this.variants.hdx=this.addQualityRow(t,"hdx"),vui.gConnectionInstance.getRemoveHD()||(this.variants.hd=this.addQualityRow(t,"hd")),this.variants.sd=this.addQualityRow(t,"sd"),e.appendChild(t)},addQualityRow:function(e,t){var i=new Element("tr",{class:"moreInfoRightTr"}),s=new Element("td",{class:"moreInfoRightVariantIconTd "+t}),n=new Element("img");n.src=vui.images["qty_"+t+"_white"],s.appendChild(n),i.appendChild(s);var a=new Element("tr",{class:"moreInfoRightTr"}),o=new Element("td",{class:"moreInfoRightVariantInfoTd fontSmall"});return a.appendChild(o),e.appendChild(i),e.appendChild(a),{cell:o,row1:i,row2:a}},show:function(){this.scrollableWidget.hasScrollableContent()?(this.scroller.show(),this.scrollerShowing=!0,this.selectable=!0):this.selectable=!1},qualityResolution:{sd:"480p",hd:"720p",hdx:"1080p",uhd:"4K"},getVariantInfo:function(e){var t,i,s,n,a=e.videoQuality,o="";"sd"==a?(t=vui.strings.getText("MORE_INFO_FULLSCREEN"),"enhancedWidescreen"==e.aspectRatio[0]?t=vui.strings.getText("MORE_INFO_ENHANCED_WIDESCREEN").replace(/\s/g," "):"widescreen"==e.aspectRatio[0]&&(t=vui.strings.getText("MORE_INFO_WIDESCREEN")),o=this.qualityResolution[a]+"/"+t):(o=this.qualityResolution[a],vui.gConnectionInstance.getIsMVPEnabled()&&(s=(i=this.movieInfoModel.data.contentVariants[0].contentVariant.filter(function(e){return"uhd"===vui._.aStr(e.videoQuality)}).map(function(e){return e.editions[0].edition})[0])&&i.some(function(e){return"dash"===e.editionFormat[0]&&"hdr10"===e.videoProfile[0]}),n=i&&i.some(function(e){return"dash"===e.editionFormat[0]&&("dvheDtr"===e.videoProfile[0]||"dvheStn"===e.videoProfile[0])}),"uhd"==a&&s&&(o+="<br/>HDR10"),"uhd"==a&&n&&"ceres"!==vui.vvPlatform.id&&(o+="<br/>Dolby Vision")));var r=e.audioCodec&&e.audioCodec[0]||"",l=e.audioType&&e.audioType[0]||"",u="";return""!=l&&(u="stereo"==l?vui.strings.getText("MORE_INFO_STEREO"):(e.audioChannels&&e.audioChannels[0]||"").substr(0,3)),o+="dolbyDigital"==r?"<br/>Dolby Digital "+u:"dolbyDigitalPlus"==r?"<br/>Dolby Digital Plus "+u:"dolbyAtmos"==r?"<br/>Dolby Atmos":"<br/>"+u},getGenreString:function(e){if(!e.geneGenres||!e.geneGenres[0].geneGenre)return vui.strings.getText("MOVIE_DETAILS_N_A");var t=[],i=e.geneGenres&&e.geneGenres[0]&&e.geneGenres[0].geneGenre;if(i)for(var s=0;s<i.length;s++)t.push(i[s].name);return t.join(" / ")},_createDiv:function(e,t){var i=document.createElement("div");return i.className=e,t&&t.appendChild(i),i},aspectRatioEnum:{enhancedWidescreen:vui.strings.getText("MOVIE_DETAILS_ENHANCED_WIDESCREEN"),fullscreen:vui.strings.getText("MOVIE_DETAILS_FULLSCREEN"),widescreen:vui.strings.getText("MOVIE_DETAILS_WIDESCREEN")},soundMixEnum:{stereo:vui.strings.getText("MOVIE_DETAILS_STEREO"),surround:vui.strings.getText("MOVIE_DETAILS_SURROUND_SOUND")},screenTypeEnum:{color:vui.strings.getText("MOVIE_DETAILS_COLOR"),blackAndWhite:vui.strings.getText("MOVIE_DETAILS_B_W")},getFirstVariantData:function(e){var t,i,s={};return e.bestStreamableVideoQuality&&e.variants[e.bestStreamableVideoQuality[0]]?t=e.variants[e.bestStreamableVideoQuality[0]]:(i=vui.getModel().ownedMovieCache[e.contentId[0]])&&i.owned?t=i.ownedList[i.owned]:i&&i.rented&&(t=i.rentedList[i.rented]),t?(t.aspectRatio&&(s.aspectText=this.aspectRatioEnum[t.aspectRatio[0]]),t.audioType&&(s.soundMixText=this.soundMixEnum[t.audioType[0]]),s.language="",t.language&&(s.language=t.language.join("/")),t.lengthSeconds&&(s.lengthSeconds=[t.lengthSeconds[0]])):(s.aspectText="",s.soundMixText="",s.language=""),s},addSecondaryInfo:function(e,t){var i=this.getGenreString(e),s=this.getFirstVariantData(e),n="";s.lengthSeconds&&(n=vui.strings.getText("MOVIE_DETAILS_LENGTH_MINUTES",Math.ceil(s.lengthSeconds[0]/60)));var a="";e.releaseTime&&(a=vui.displayReleaseTime(e.releaseTime[0]));var o="",o=e.distributionStudio?e.distributionStudio[0].name[0]:e.studio[0].name[0],r=s.language,l=window.getFriendlyRating(e.contentRating[0]);this.secInfo1=this._createDiv("moreInfoSecInfo font18",t);var u=[];l&&""!=l&&u.push(l),""!=n&&u.push(n),e.subtitleTrack&&u.push("CC"),this.secInfo1.innerHTML=u.join(" / "),this.ariaLabel+=this.secInfo1.innerHTML,this.secInfo2=this._createDiv("moreInfoSecInfo font18",t),u=[],""!=a&&u.push(a),""!=i&&u.push(i),this.secInfo2.innerHTML=u.join(" / "),this.ariaLabel+=". "+this.secInfo2.innerHTML,u=[],this.secInfo3=this._createDiv("moreInfoSecInfo font18",t),""!=o&&u.push(o),""!=r&&u.push(r),this.secInfo3.innerHTML=u.join(" / "),this.ariaLabel+=". "+this.secInfo3.innerHTML},bind:function(e){var t=e.get();if(this.addSecondaryInfo(t,this.secondary),this.summary.innerHTML=vui._.aStr(t.description),t.variants)for(var i=vui.m.qualityArray,s=0,n=i.length;s<n;s++){var a,o=i[s];t.variants[o]&&this.variants[o]?(this.variants[o].cell.innerHTML=this.getVariantInfo(t.variants[o]),(a=this.variants[o].cell.innerHTML.split("<br>"))[0]&&a[0].contains("p")&&(a[0]=a[0].replace("p"," p")),a=a.join(" "),this.rightSideAriaLabel+=o+". "+a+". "):this.variants[o]&&(this.variants[o].cell.style.display="none",this.variants[o].row1.style.display="none",this.variants[o].row2.style.display="none")}vui._.setAriaLabel("More Info: "+this.ariaLabel+". "+vui._.aStr(t.description)+". "+this.rightSideAriaLabel)},hide:function(){this.elem.removeEvent("mouseenter")},onDirectionDown:function(){this.scrollableWidget.scrollDown(),this.updateScroller()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},onDirectionUp:function(){this.scrollableWidget.scrollUp(),this.updateScroller()},updateScroller:function(){this.scroller.setRatio(this.scrollableWidget.getCurrentScrollRatio())},onMouseEnter:function(){this.scrollerShowing&&vui.select(this.scroller)},onMouseWheel:function(e){this.scrollerShowing&&(0<e.wheel?this.onDirectionUp():this.onDirectionDown())}}),vui.widgets.LeftActionButton=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.LeftActionButton",init:function(e){(e=e||{}).elemClassName="episode_tab_left_button",e.defaultClassName="btn_bg_dark_default btn_bg_size10_default",e.selectClassName="btn_bg_select btn_bg_size10_select",this.parent(e),this.label&&(this.label.className=this.label.className+" fontMedium"),this.selectable=!0},bind:function(e){this.data=e.data;var t=this.data.episodeNumberInSeason[0]+"";1==t.length&&(t="0"+t),this.setLabel(t);var i,s=vui.getModel(),n=this.data.ownerships,a=null;this.canPlay=!1,this.notYetAvailable=!1,this.canPurchase=!1,this.actionParams={};var o,r=this.data.contentId&&this.data.contentId[0];if(s.ownedMovieCache[r]||this.data.containerId&&s.anyOfCidsPurchased(this.data.containerId))n&&"episode"==this.data.type&&(o=vui.executeOnContainer(this.parentWidget,"getVariantByOwnership",this.data),this.setIcon(vui.images.watch_icon),this.ariaLabel="Play Episode "+t,this.data.streamableStartTime&&(a=window.getFutureDateString(this.data.streamableStartTime[0]),gotStreamableStart=!0),this.data.streamingSoon?(this.notYetAvailable=!0,this.canPlay=!1):$defined(a)?(this.canPlay=!1,this.notYetAvailable=!0):o?($extend(u={},o),this.canPlay=!0,this.actionParams={movie:this.data,variant:u}):this.canPlay=!1);else if(i=s.getBestOffer(this.data),this.ariaLabel,"episode"==this.data.type){var l=this.data.seasonInfo;if(vui.getModel().avodManager.canDisplayWatchWithAdsButton(this.data))this.canPlay=!1,this.canPurchase=!1,this.setIcon(vui.images.watch_icon),this.ariaLabel="Play Episode "+t,this.actionParams={movie:this.data},this.canPlayAVOD=!0;else if(i&&i[1]&&"free"==i[1]){this.setIcon(vui.images.watch_icon),this.ariaLabel="Play Episode "+t,this.canPlay=!0,this.canPurchase=!1;for(var u=null,d=s.qualityArrayNoUHD,c=0;c<d.length;c++)if(this.data.variants[d[c]]){u=this.data.variants[d[c]];break}this.actionParams={movie:this.data,variant:u}}else this.data.validOffers&&e.isAvailableHereAndNow()?(this.setIcon(vui.images.rent_own_icon),this.ariaLabel="Own Episode "+t,this.canPurchase=!0,this.actionParams={successCallback:function(){controller.refreshCurrentPage()}.bind(this),mim:e}):l&&l.data&&l.data.validOffers&&l.isAvailableHereAndNow()?(this.setIcon(vui.images.rent_own_icon),this.ariaLabel="Own Season",this.canPurchase=!0,this.actionParams={successCallback:function(){controller.refreshCurrentPage()}.bind(this),mim:e}):(this.canPurchase=!1,this.selectable=!1)}},fixValidOffersFromOwnerships:function(t,i){if(!t||!i)return t;function e(e){t[e]&&t[e].Purchase&&(t[e].Purchase=!1)}function s(e){return i[e]&&i[e].isOwned&&"Purchase"==i[e].type}return s("hdx")?(e("hd"),e("sd")):s("hd")&&e("sd"),t},onSelect:function(){this.parent(),vui._.setAriaLabel(this.ariaLabel||""),vui.executeOnContainer(this.parentWidget,"onEpisodeButtonSelect",this.data),this.elem.addClass("episode_tab_left_button_select")},onDeselect:function(){this.parent(),this.elem.removeClass("episode_tab_left_button_select")},onAction:function(){1==this.canPlay?vui.executeOnContainer(this.parentWidget,"activateOrPlay",this.actionParams):this.canPlayAVOD?vui.executeOnContainer(this.parentWidget,"onClickWatchWithAds",this.actionParams):this.notYetAvailable?this.data.streamingSoon?this.showSimpleDialog(vui.strings.getText("MOVIE_DETAILS_AVAILABLE_SOON")):this.data.streamableStartTime&&this.showSimpleDialog(vui.strings.getTransformedText("GET_BEST_OFFER_AVAILABLE_IN"," "+window.getFutureDateString(this.data.streamableStartTime[0]))):1==this.canPurchase&&vui.executeOnContainer(this.parentWidget,"doTransact",this.actionParams)}}),vui.widgets.RightActionButton=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.RightActionButton",init:function(e){(e=e||{}).elemClassName="episode_tab_right_button",e.defaultClassName="btn_bg_dark_default btn_bg_size11_default",e.selectClassName="btn_bg_select_outline btn_bg_size11_select",this.parent(e),this.label&&(this.label.className=this.label.className+" font22"),this.progressBar=new vui.widgets.BookmarkProgressBar({shellWidth:200}),this.attachChild(this.progressBar,this.elem),this.epsPrice=new vui.widgets.EpisodePriceLabel,this.attachChild(this.epsPrice,this.elem),this.selectable=!0},bind:function(e){var t,i,s,n,a,o,r,l,u,d,c,h;this.data=e.data,this.data&&(this.epsPrice.hide(),this.progressBar.hide(),t=this.data.contentId&&this.data.contentId[0],d=(i=vui.getModel()).getBestOfferAndOwnershipInfo(this.data),this.secondaryLabel,i.ownedMovieCache[t]||this.data.containerId&&i.anyOfCidsPurchased(this.data.containerId)?(this.data.lengthSeconds&&(s=this.data.lengthSeconds[0]),l=a=0,l=(n=i.bookmarkCache.check(t))&&s?(o=n.timeSeconds,r=n.resetBookmark,0!==o||r?(a=o,Math.ceil(100*o/parseInt(s,10))):(a=s,100)):0,s&&((u={}).time=a,u.totalTime=s,u.progress=l,this.progressBar.bind(u),this.progressBar.show(),this.secondaryLabel=parseInt(l/s*100)+"% watched")):(d=i.getBestOfferAndOwnershipInfo(this.data))&&(d.comingSoon&&d.comingDate?this.epsPrice.showComing(d.comingDate):0<=d.price&&(0===d.price?this.epsPrice.showFree():this.epsPrice.showPrice(d.price)),this.secondaryLabel=this.epsPrice.elem.innerHTML),c=(h=this.data.title[0]).indexOf(":"),h=vui._.multiLineEllipsis(h.substring(c+2),35),this.setLabel(h))},onAction:function(){vui.executeOnContainer(this.parentWidget,"episodeOnAction",this.data)},onSelect:function(){this.parent(),this.data&&this.data.title&&vui._.setAriaLabel("Episode Name. "+vui._.aStr(this.data.title)),vui.executeOnContainer(this.parentWidget,"onEpisodeButtonSelect",this.data),this.elem.addClass("episode_tab_right_button_select")},onDeselect:function(){this.parent(),this.elem.removeClass("episode_tab_right_button_select")}}),vui.widgets.EpisodeItem=new Class({Extends:vui.widgets.Container,name:"vui.widgets.EpisodeItem",selectorType:"none",layout:{type:"horizontal"},init:function(e){this.height=window.vui.ResDef.detailPage.EPISODE_ITEM_BASE_HEIGHT,this.width=window.vui.ResDef.detailPage.EPISODE_ITEM_BASE_WIDTH;var t=this.elem;t.id=e,t.style.width=this.width+"px",t.style.height=this.height+"px",this.leftButton=new vui.widgets.LeftActionButton,this.attachChild(this.leftButton),this.rightButton=new vui.widgets.RightActionButton,this.attachChild(this.rightButton)},bind:function(e){var t=function(e){(this.movieInfoModel=e)?(e.refresh(),this.bindData(e)):this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,t),e=null}.bind(this),i=e.contentId&&e.contentId[0];vui.getModel().getMovieInfo(i,t),this.elem.style.visibility="visible"},bindData:function(e){var t;this.data=e.data,this.leftButton.bind(e),this.rightButton.bind(e),vui.isOnSelectionPath(this)&&((t=vui.getSelected())&&t.onSelect(),vui.executeOnContainer(this.parentWidget,"onEpisodeButtonSelect",this.data))},unbind:function(){this.elem.style.visibility="hidden"},onSelect:function(){},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.EpisodesList=new Class({Extends:vui.widgets.GenericGridList,name:"vui.widgets.EpisodesList",rowIndex:0,partialRow:!0,padding:5,settings:{normal:{columns:1,rows:5}},columns:1,rows:5,getListModel:function(e){alert("EPISODE GET LIST MODEL");var t=this.params,i=this.seasonId;t.scrollOffset&&(this.currentStart=t.scrollOffset);var s={seasonId:i,callback:e,currentStart:this.currentStart};return vui.getModel().getSeasonEpisodes(s)},bind:function(e,t,i){var s;0===t&&this.setFirstTimeSelection(),vui.executeOnContainer(this.parentWidget,"isBack")||0<(s=this.getFirstTimeSelection())&&s>this.numVisible-1&&(this.currentStart=s-this.numVisible+2,this.currentStart<0&&(this.currentStart=0)),this.parent(e,t,i)},init:function(e){(e=e||{}).paddingRight=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT,e.paddingBottom=window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,this.scrollIncrement=this.scrollDelta=this.columns,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.layout={type:"vertical",cols:this.scrollDelta},this.parent(e,this.getListModel),e.numVisible&&(this.numVisible=e.numVisible),this.elem.className="movieGridList",this.params=e,this.listName="MOST WATCHED",this.numVisible=e.numVisible||this.numVisible},createWidget:function(e){var t=new vui.widgets.EpisodeItem,i=t.getElem();return i.style.left="0",i.style.top=e*(parseInt(i.style.height)+this.padding)+"px",t},destroy:function(){alert("DESTROY SCROLLING LIST"),this.parent()},episodeOnAction:function(e){vui._.setAriaLabel(""),vui._.deleteZapApiEvarsFromSessionStore(),controller.goToPage("NewMovieDetails",{contentId:e.contentId[0]})},getRowIndex:function(){return this.rowIndex},getFirstTimeSelection:function(){if(this.lastWatchedEpisode){var e=this.lastWatchedEpisode.contentId&&this.lastWatchedEpisode.contentId[0];if(e){var t=vui.getModel().bookmarkCache.check(e);if(t&&0===parseInt(t.timeSeconds,10))return this.lastWatchedEpisode.rank<this.movieListModel.totalCount-1?this.lastWatchedEpisode.rank+1:0}if(0<=parseInt(this.lastWatchedEpisode.rank,10))return this.lastWatchedEpisode.rank}return this.firstOwnedEpisode&&0<=parseInt(this.firstOwnedEpisode.rank,10)?this.firstOwnedEpisode.rank:null},_checkPurchasedContainerId:function(e){if(!e)return!1;var t=vui.getModel();for(var i in e)if(t.ownedMovieCache[e[i]])return!0;return!1},setFirstTimeSelection:function(){var e=this.movieListModel;if(!this.movieListModel||!this.movieListModel.data)return null;for(var t=vui.getModel(),i=0,s=0;s<e.totalCount;s++){var n,a,o=e.data&&e.data[s];o&&((n=o.contentId&&o.contentId[0])&&(this.firstOwnedEpisode||(t.ownedMovieCache[n]||this._checkPurchasedContainerId(o.containerId))&&(this.firstOwnedEpisode=o,this.firstOwnedEpisode.rank=s),(a=t.bookmarkCache.check(n))&&a.modificationTime&&i<a.modificationTime&&(i=a.modificationTime,this.lastWatchedEpisode=o,this.lastWatchedEpisode.rank=s)))}},resetFirstTimeSelection:function(){delete this.firstOwnedEpisode,delete this.lastWatchedEpisode},select:function(e){this._firstTimeSelect||(this.resetFirstTimeSelection(),this.setFirstTimeSelection(),this._firstTimeSelect=!0);var t=this.getFirstTimeSelection();null===t||((t-=this.currentStart)<0&&(t=0),this.changeSelection(t),this.resetFirstTimeSelection()),this.parent(e)},beforeOnDirectionUp:function(){var e,t=this.getSelectedIndex()&&this.getSelectedIndex().modelIndex,i=this.getSelectedChild().getSelectedIndex(),s=i&&i.modelIndex;this.children[t-1]&&(e=this.children[t-1],this.children.length>s?e.selected=s:e.selected=this.children.length-1)},beforeOnDirectionDown:function(){var e,t=this.getSelectedIndex()&&this.getSelectedIndex().modelIndex,i=this.getSelectedChild().getSelectedIndex(),s=i&&i.modelIndex;this.children[t+1]&&(e=this.children[t+1],this.children.length>s?e.selected=s:e.selected=this.children.length-1)}}),vui.widgets.MovieDetailsEpisodesView=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],name:"vui.pages.MovieDetailsEpisodesView",elemClassName:"movieDetailsTabDetailInnerContainer",init:function(e){this.params=e;var t=new Element("div",{class:"episodesListContainer"});this.elem.appendChild(t),this.episodesList=new vui.widgets.EpisodesList(e),this.attachChild(this.episodesList,t),this.initRightDetails()},initRightDetails:function(){var e=new Element("div",{class:"episodeRightDetails"});e.style.display="none",this.elem.appendChild(e),this.episodeTitle=new Element("div",{class:"episodeTitle font22"}),e.appendChild(this.episodeTitle),this.episodeTitle.selectable=!1,this.summary=new Element("div",{class:"episodeSummary font18"}),e.appendChild(this.summary),this.summary.selectable=!1,this.rightSideContainer=e,this.rightSideContainer.selectable=!1},show:function(e,t){var i=e.savedState;i&&(this.episodesList.currentStart=i.scrollOffset,this.episodesList.selected=i.episodePos.modelIndex,this.savedState=i),t||(this.movieInfoModel=e.movieInfoModel);var s=this.movieInfoModel.data;"season"==s.type?this.bind(e.movieInfoModel):"episode"==s.type&&vui.getModel().getMovieInfo(s.seasonId,function(e){this.bind(e)}.bind(this))},bind:function(e){var t=e.data;this.movieInfo=e,this.episodesList.seasonId=t.contentId[0],this.episodesList.refresh()},hide:function(){this.parent()},refreshBind:function(e){this.bind(e)},listDataReceived:function(){var e=this.episodesList.getSelectedIndex();e&&e.modelIndex&&this.episodesList.children[e.modelIndex]?this.episodesList.children[e.modelIndex].onSelect&&this.episodesList.children[e.modelIndex].onSelect():this.episodesList.children[0].onSelect&&this.episodesList.children[0].onSelect()},onEpisodeButtonSelect:function(e){e&&(e.variants=vui.getModel().getVariantsHash(e),e.description&&(this.episodeTitle.innerHTML="Episode Synopsis:",this.summary.innerHTML=e.description[0]),this.rightSideContainer.style.display="block")},save:function(){var e={};return e.scrollOffset=this.episodesList.getScrollOffset(),e.episodePos=this.episodesList.getSelectedIndex(),e},isBack:function(){return!!this.savedState}}),vui.widgets.DetailList=new Class({Extends:vui.widgets.GenericGridList,name:"vui.widgets.DetailList",partialRow:!0,settings:{normal:{columns:1,rows:3}},getMovieListModel:function(e){var t;if(this.currentStart=0,this.params.currentStart&&(this.currentStart=this.params.currentStart),this.params&&this.params.seriesId)return t={seriesId:this.params.seriesId,callback:e,currentStart:this.currentStart},vui.getModel().getSeriesSeasons(t)},init:function(e){e=e||{},this.layout={type:"vertical"},e.paddingRight=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT,e.paddingBottom=window.vui.ResDef.detailPage.GRIDLIST_PADDING_BOTTOM,this.parent(e,this.getMovieListModel),e.numVisible&&(this.numVisible=e.numVisible),this.elem.className="movieGridList",this.params=e,this.listName="MOST WATCHED",this.numVisible=e.numVisible||this.numVisible},createWidget:function(e){var t=new vui.widgets.SeasonsBase({id:e+1}),i=t.getElem();return i.style.left="0",i.style.top=e*(parseInt(i.style.height)+window.vui.ResDef.detailPage.SEASON_ITEM_BASE_PADDING)+"px",t},getKeyFunc:function(){return function(e){return vui.getModel().getPosterUrl(e,"125")}},destroy:function(){this.parent()},getRowIndex:function(){return this.rowIndex}}),vui.widgets.DetailPageList=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],listClass:vui.widgets.DetailList,name:"vui.widgets.DetailPageList",bind:function(e){e=e||{};this.list.params=e,this.list.refresh()},listDataReceived:function(e){e&&e.data&&3<=Object.keys(e.data).length&&(this.scroller=new vui.widgets.Scroller3,this.attachChild(this.scroller,this.container),this.list.setBeginArrow(this.scroller))},init:function(e){this.elem.className="detailPageList",this.container=new Element("div",{class:"detailPageListContainer"}),this.elem.appendChild(this.container),this.list=new vui.widgets.DetailList(e),this.attachChild(this.list,this.container)},save:function(){var e={};return e.listOffset=this.list.getScrollOffset(),e.listPos=this.list.getSelectedIndex(),e},highlightSelected:function(){var e;vui.isOnSelectionPath(this)&&((e=this.list.getSelectedIndex())&&e.modelIndex&&this.list.children[e.modelIndex]?this.list.children[e.modelIndex].onSelect():this.list.children[0].onSelect())}}),vui.widgets.DetailPageListView=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.PromoTableUI],name:"vui.pages.DetailPageListView",elemClassName:"movieDetailsTabDetailInnerContainer",init:function(e){this.params=e;var t=new Element("div",{class:"detailPageListContainer"});this.elem.appendChild(t),this.detailPageList=new vui.widgets.DetailPageList(e),this.attachChild(this.detailPageList,t)},show:function(e){this.bind(e.movieInfoModel,e)},bind:function(e,t){var i;listParams={},t&&t.savedState&&((i=t.savedState)&&(listParams.currentStart=i.listOffset,listParams.selected=i.listPos.modelIndex,this.savedState=i));var s=e.data;this.movieInfo=e,"season"==s.type||"episode"==s.type?listParams.seriesId=s.seriesId:listParams.seriesId=s.contentId,this.detailPageList.bind(listParams)},onSelect:function(){},hide:function(){this.parent()},refreshBind:function(e){this.bind(e)},listDataReceived:function(){},save:function(){return this.detailPageList.save()},isBack:function(){return!!this.savedState}}),vui.widgets.BundleList=new Class({Extends:vui.widgets.ScrollingListBase,name:"vui.widgets.BundleList",elemClassName:"BundleList",barStartAt:0,barEndAt:window.vui.ResDef.explore.BAR_START_END,posterPositionStart:window.vui.ResDef.detailPage.BUNDLE_LIST_START,posterPositionWidth:window.vui.ResDef.lol.POSTER_POS_W,visibleNum:4,animDuration:window.vui.ResDef.ANIM_DURATION}),vui.widgets.BundleListContainer=new Class({Extends:vui.widgets.Container,name:"vui.widgets.BundleListContainer",elemClassName:"BundleListContainer",init:function(e){this.params=e,this.list=new vui.widgets.BundleList(this.params),this.attachChild(this.list),this.label=new Element("div",{class:"BundleListLabel"}),this.elem.appendChild(this.label),this.leftArrow=new Element("div",{class:"BundleListLeftArrow"}),this.elem.appendChild(this.leftArrow),this.leftArrow.addEvents({click:function(){this.list.onDirectionLeft()}.bind(this)}),this.rightArrow=new Element("div",{class:"BundleListRightArrow"}),this.elem.appendChild(this.rightArrow),this.rightArrow.addEvents({click:function(){this.list.onDirectionRight()}.bind(this)}),this.leftArrow.style.visibility="hidden",this.rightArrow.style.visibility="hidden",this.label.style.visibility="hidden",this.leftArrow.style.backgroundImage="url("+vui.images.interstitial_prev_arrow+")",this.rightArrow.style.backgroundImage="url("+vui.images.interstitial_next_arrow+")"},bind:function(e){this.list.bind(e.data.bundledContent)},updLabel:function(e){this.label.style.visibility=e.total>e.num?"visible":"hidden",this.leftArrow.style.visibility=0<e.start?"visible":"hidden",this.rightArrow.style.visibility=e.end<e.total&&e.total>e.num?"visible":"hidden",this.label.innerHTML=e.start+1+" - "+e.end+" of "+e.total}}),vui.widgets.BundleDetailsView=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate,vui.PromoTableUI],name:"vui.pages.BundleDetailsView",elemClassName:"bundleDetailsRightContainer",selectionInheritance:!0,init:function(e){this.params=e||{},this.contentId=e.contentId,this.elem.style.top=e.topPos+window.vui.ResDef.detailPage.BOTTOM_CONTAINER_TOP+"px",this.selectable=!1;var t=new Element("table",{class:"bundleDetailsTable"}),i=new Element("tr",{class:"bundleDetailsTr"}),s=new Element("td",{colspan:3});i.appendChild(s),t.appendChild(i),this.listTitle=new Element("div",{class:"bundleContentTitle fontMedium"}),this.listTitle.innerHTML=vui.strings.getTransformedText("BUNDLE_DETAILS_INCLUDES"),s.appendChild(this.listTitle);var n=new Element("tr",{class:"bundleDetailsTr"}),a=new Element("td",{class:"bundleDetailsBottomTd",colspan:3});n.appendChild(a),t.appendChild(n),this.elem.appendChild(t),this.grid=new vui.widgets.BundleListContainer(this.params),this.attachChild(this.grid,a)},bind:function(e){var t=(this.movieInfoModel=e).data;this.params.listState&&0<this.params.listState.selected&&this.grid.setSelectable(!1);t.contentId,this.grid.params=this.params||{},this.grid.currentStart=this.currentStart,this.grid.bind(e)},shown:function(){this.grid.setSelectable(!0)},onSelect:function(){alert("BUNDLE ONSELECT")},save:function(){alert("SAVE BUNDLE DETAILS VIEW");var e={};return e.barLeft=this.grid.list.getBarLeft(),e.selected=this.grid.list.selected,e},restore:function(e){this.params.listState=e},hide:function(){this.movieInfoModel&&vui.getModel().destroy(this.movieInfoModel)},onDirectionLeft:function(){vui.executeOnContainer(this,"showDescriptionContainer"),vui.executeOnContainer(this.parentWidget,"onDirectionLeft")},onBack:function(){vui.executeOnContainer(this,"showDescriptionContainer"),vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.XofyCartItem=new Class({Extends:vui.widgets.LeafContainer,elemClassName:"XofyCartItem",selectorType:"none",init:function(e,t,i,s){this.isStatic=s,this.params=e,this.params?(this.poster=document.createElement("div"),this.poster.className="XofyCartItem_poster",this.poster.id="XofyCartItem_poster_"+t,this.poster.style.backgroundImage="url("+e.posterUrl+")",this.isSelection=!0,this.contentId=e.contentId,this.onRemove=i,this.overlay=createImg({src:vui.images.mixMatch.smallMinusIcon},this.poster),this.overlay.style.display="none"):(this.poster=document.createElement("div"),this.poster.className="XofyCartItem_poster_blank",this.poster.id="XofyCartItem_poster_"+t,this.poster.style.backgroundImage="url("+vui.images.mixMatch.emptyPoster+")",this.isSelection=!1,this.selectable=!1),this.elem.appendChild(this.poster)},onAction:function(){this.onRemove&&!this.isStatic&&this.onRemove(this.contentId)},onSelect:function(){this.elem&&!this.isStatic&&this.params&&(this.elem.firstChild.addClass("selected"),this.addOverlay()),vui._.setAriaLabel("Remove "+this.params.title)},onDeselect:function(){this.elem&&!this.isStatic&&this.params&&(this.elem.firstChild.removeClass("selected"),this.removeOverlay())},addOverlay:function(){this.overlay.style.display="block"},removeOverlay:function(){this.overlay.style.display="none"}}),vui.widgets.XofyCart=new Class({Extends:vui.widgets.Container,name:"vui.widgets.XofyCart",elemClassName:"XofyCart",layout:{type:"horizontal"},init:function(e,t,i){this.elem.id="XofyCart",this.selections=e.selections,this.selectable=!1,this.selectionsAllowed=e.numVisible,this.collectionId=e.collectionId,this.onClickBuyNow=t,this.isStatic=i,this.updateSelections(this.selections),this.xofycollections=vui.getModel().xofycollections},clickBuyNow:function(){this.onClickBuyNow()},updateSelections:function(e){if(this.selections=e||this.selections,this.selectable=!!this.selections.length,!(this.selections.length>this.selectionsAllowed)){document.getElementById("XofyCart")&&this.detachAllChildren();for(var t,i,s=0;s<this.selectionsAllowed;s++){function n(e){this.xofycollections.removeContent(this.collectionId,e),this.updateSelections(this.xofycollections.getSelections(this.collectionId)),vui.analytics.trackEvent("scRemove,event82",{product:e,linkType:"lnk_o",linkName:"X of Y Bundle"})}var a=this.selections[s]?new vui.widgets.XofyCartItem(this.selections[s],s,this.isStatic?null:n.bind(this),this.isStatic):new vui.widgets.XofyCartItem(null,s,null,null);this.attachChild(a)}this.isStatic||(t=this.selections.length===parseInt(this.selectionsAllowed),i=new vui.widgets.XofyBuyNowButton(null,t),this.attachChild(i))}}}),vui.widgets.XofyBuyNowButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e,t){this.params=e||{},this.params.defaultClassName="btn_bg_default btn_bg_size4_default",this.params.selectClassName="btn_bg_select btn_bg_size4_select",this.params.disabledClassName="btn_bg_disabled btn_bg_size4_disabled",this.params.label=vui.strings.getTransformedText("MM_BUY_NOW_BUTTON"),this.ttsLabel="buy now",this.parent(this.params),this.icon.style.backgroundPosition="0% 0%",this.id="buy_now_button",t||this.disable()},onSelect:function(){this.icon.style.backgroundPosition="0% 0%",this.parent(),vui._.setAriaLabel(this.ttsLabel)},onDeselect:function(){this.icon.style.backgroundPosition="0% 100%",this.parent()},onAction:function(){vui.executeOnContainer(this.parentWidget,"clickBuyNow")}}),vui.widgets.SimilarGridList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.GridPoster,settings:{normal:{columns:4,rows:2}},getKeyFunc:function(){return null},getMovieListModel:function(e){var t;return alert("GET SIMILAR GRID MODEL: params:"),this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("ET SIMI:"+JSON.encode(this.params)),this.params.seriesId?(t={seriesId:this.params.seriesId,callback:e,currentStart:this.currentStart},vui.getModel().getSeriesSeasons(t)):(t={contentId:this.params.contentId,callback:e,currentStart:this.currentStart,maxResults:20},vui.getModel().getSimilarMovies(t))},init:function(e){e=e||{},this.parent(e,this.getMovieListModel)},createWidget:function(e){return new this.posterClass("poster"+e,{width:window.vui.ResDef.PosterGrid.SIMILAR_POSTER_W,height:window.vui.ResDef.PosterGrid.SIMILAR_POSTER_H,blowupWidth:window.vui.ResDef.PosterGrid.SIMILAR_BLOWUP_POSTER_W,blowupHeight:window.vui.ResDef.PosterGrid.SIMILAR_BLOWUP_POSTER_H})},onBack:function(){vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.SimilarPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.SimilarGridList,elemClassName:"similarPosterGrid",init:function(){this.parent({blowupWidth:window.vui.ResDef.PosterGrid.SIMILAR_BLOWUP_POSTER_W,blowupHeight:window.vui.ResDef.PosterGrid.SIMILAR_BLOWUP_POSTER_H,scrollBarLeft:window.vui.ResDef.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_L,scrollBarTop:window.vui.ResDef.PosterGrid.SIMILAR_POSTERGRID_SCROLLER_T})}}),vui.widgets.MovieDetailsSimilar=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsSimilar",elemClassName:"movieDetailsTabDetailInnerContainer",selectionInheritance:!0,init:function(e){this.params=e,this.grid=new vui.widgets.SimilarPosterGrid(e),e.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid),vui._.deleteZapApiEvarsFromSessionStore()},show:function(e,t){t||(this.movieInfoModel=e.movieInfoModel),e.savedState&&(this.savedState=e.savedState),this.bind(this.movieInfoModel)},bind:function(e){var t=e.get(),i={name:"similar"};"season"==this.params.contentType||"episode"==this.params.contentType?i.seriesId=t.seriesId[0]:i.contentId=t.contentId[0],this.savedState&&(i.state={},i.state.scrollOffset=this.savedState.scrollOffset,delete this.savedState),this.grid.setList(i,null==i.savedState)},onGotListLength:function(){vui.setSelectorVisible(!0)},save:function(){var e={};return e.scrollOffset=this.grid.getScrollOffset(),alert("SACVING SIMILAR:"+e.scrollOffset),e}}),vui.widgets.ExtrasGridList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.GridPoster,settings:{normal:{columns:4,rows:2}},columns:4,rows:2,paddingRight:24,getKeyFunc:function(){return null},getListModelFactory:function(){return function(e){var t;return this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),t={contentId:this.params.contentId,callback:e,currentStart:this.currentStart},vui.getModel().getExtras(t)}.bind(this)},init:function(e){e=e||{},this.parent(e,this.getListModelFactory())}}),vui.widgets.ExtrasPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.ExtrasGridList,elemClassName:"extrasPosterGrid",onBack:function(){this.onDirectionLeft()},listDataReceived:function(e){this.hideDimmer||(this.dimmer.style.display="none");var t=0;clearTimeout(this.staleTimer),this.staleTimer=null,e&&e.data&&e.totalCount&&0!=e.totalCount?(t=e.totalCount,this.emptyMessage.style.display="none",e.totalCount<=this.list.numVisible?(this.range.style.display="none",this.scroller.hide()):(this.range.style.display="block",this.scroller.show())):(this.emptyMessage.style.display="block",this.range.style.display="none",this.scroller.hide()),vui.executeOnContainer(this.parentWidget,"onGotListLength",t),vui.executeOnContainer(this.parentWidget,"listDataReceived",e)}}),vui.widgets.MovieDetailsExtras=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsExtras",elemClassName:"movieDetailsTabDetailInnerContainer",selectionInheritance:!0,init:function(e){this.params=e,this.grid=new vui.widgets.ExtrasPosterGrid(e),e.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid)},show:function(e,t){t||(this.movieInfoModel=e.movieInfoModel),e.savedState&&(this.savedState=e.savedState),this.bind(this.movieInfoModel)},bind:function(e){var t=e.get(),i={name:"extras"};i.contentId=t.contentId[0],this.savedState&&(i.state={},i.state.scrollOffset=this.savedState.scrollOffset,delete this.savedState),this.grid.setList(i,null==i.savedState)},onGotListLength:function(){vui.setSelectorVisible(!0)},save:function(){var e={};return e.scrollOffset=this.grid.getScrollOffset(),e}}),vui.widgets.LockedExtrasPoster=new Class({Extends:vui.widgets.GridPoster,init:function(e,t){(t=t||{}).width=window.vui.ResDef.detailPage.EXTRA_POSTER_WIDTH,t.height=window.vui.ResDef.detailPage.EXTRA_POSTER_HEIGHT,this.parent(null,t)},bind:function(e){this.parent(e),this.data=e},onSelect:function(){this.parent(),vui.executeOnContainer(this.parentWidget,"updateLabel",{title:this.data.title,videoQualityLock:this.data.videoQualityLock,offerTypeLock:this.data.offerTypeLock}),this.ariaTimeout=setTimeout(function(){vui._.setAriaLabel(vui.executeOnContainer(this.parentWidget,"getLabel",this.data)),this.ariaTimeout=null}.bind(this),10)},onDeselect:function(){this.ariaTimeout&&clearTimeout(this.ariaTimeout),this.parent(),vui.executeOnContainer(this.parentWidget,"resetLabel",{})}}),vui.widgets.LockedExtrasGridList=new Class({Extends:vui.widgets.GenericGridList,posterClass:vui.widgets.LockedExtrasPoster,settings:{normal:{columns:4,rows:2}},columns:4,rows:2,paddingRight:24,getKeyFunc:function(){return null},getListModelFactory:function(){return function(e){var t;return this.currentStart=0,this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),t={contentId:this.params.contentId,callback:e,currentStart:this.currentStart},vui.getModel().getLockedExtras(t)}.bind(this)},init:function(e){e=e||{},this.parent(e,this.getListModelFactory())}}),vui.widgets.LockedExtrasPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.LockedExtrasGridList,elemClassName:"lockedExtrasPosterGrid",init:function(e){(e=e||{}).blowupWidth=window.vui.ResDef.PosterGrid.POSTER_WIDTH,e.blowupHeight=window.vui.ResDef.PosterGrid.POSTER_HEIGHT,this.parent(e)},onBack:function(){this.onDirectionLeft()}}),vui.widgets.MovieDetailsLockedExtras=new Class({Extends:vui.widgets.Container,name:"vui.pages.MovieDetailsExtras",elemClassName:"movieDetailsLockedExtras",selectionInheritance:!0,init:function(e){this.params=e,this.gridLabel=new createDiv({className:"movieDetailsLockedExtras_label font18"}),this.elem.appendChild(this.gridLabel),this.grid=new vui.widgets.LockedExtrasPosterGrid(e),e.savedState&&(this.grid.list.selectionInheritance=!1),this.attachChild(this.grid),this.allQualities={},this.allQualities.HDX=3,this.allQualities.HD=2,this.allQualities.SD=1},show:function(e,t){t||(this.movieInfoModel=e.movieInfoModel),e.savedState&&(this.savedState=e.savedState),this.bind(this.movieInfoModel)},bind:function(e){var t=e.get(),i={name:"lockedExtras"};i.contentId=t.contentId[0],this.savedState&&(i.state={},i.state.scrollOffset=this.savedState.scrollOffset,delete this.savedState),this.resetLabel(),this.grid.setList(i,null==i.savedState)},getHighestVideoQualityPurchased:function(e,t){var i=e.ownerships;if(!i)return null;var s=null;for(var n in i)1==i[n].isOwned&&(!s||vui.m.qualMap[n]>s)&&(s=vui.m.qualMap[n]),t&&"ptr"!=t||1==i[n].isRented&&(!s||vui.m.qualMap[n]>s)&&(s=vui.m.qualMap[n]);return s},isUnlocked:function(e){var t,i,s;e.videoQualityLock&&(t=e.videoQualityLock[0]),e.offerTypeLock&&(i=e.offerTypeLock[0]),e.contentMovieData&&(s=e.contentMovieData);var n=this.getHighestVideoQualityPurchased(this.movieInfoModel.get(),i),a=this.getHighestVideoQualityPurchased(s,i);return!t&&null!=n||null!=a||!(!t||!(a>=this.allQualities[t.toUpperCase()]||n>=this.allQualities[t.toUpperCase()]))},resetLabel:function(){this.gridLabel.innerHTML=""},updateLabel:function(e){this.gridLabel.innerHTML=this.getLabel(e)},getLabel:function(e){var t;(e=e||{}).videoQualityLock&&(t=e.videoQualityLock[0]);var i="rent or own";e.offerTypeLock&&(i="pto"==e.offerTypeLock[0]?"own":"rent");for(var s=[],n=this.movieInfoModel.get(),a=["UHD","HDX","HD","SD"],o=0,r=0;o<a.length;o++){var l=a[o];n.variants[l.toLowerCase()]&&(s[r++]=l)}var u=e.title[0]+" is available only when you "+i+" "+n.title,d=!1;if(t){u+=" in ";for(var c="",o=0;o<s.length;o++){if(c+=s[o],s[o]==t.toUpperCase()){d=!0;break}c+=", "}if(!1===d){c="";for(o=0;o<a.length&&(c+=a[o],a[o]!=t.toUpperCase());o++)c+=", "}u+=c}return u},onGotListLength:function(){vui.setSelectorVisible(!0)},save:function(){var e={};return e.scrollOffset=this.grid.getScrollOffset(),e},showErrorDialog:function(e,t,i){var s={title:e,text:t,buttons:[{name:"done",style:"blue",label:vui.strings.getText("PURCHASE_DIALOG_OK_BUTTON"),width:150,centered:!0}],callback:function(){controller.hidePopup(),i&&i()}};controller.showPopup("SimpleTextDialog",s)},posterOnAction:function(e){var t,i;this.isUnlocked({contentMovieData:e,videoQualityLock:e.videoQualityLock,offerTypeLock:e.offerTypeLock})?e&&e.contentId&&((t=vui.m.MovieInfoCache.check(e.contentId))&&t.refresh(),vui.playBonusContent(e.contentId,e,"movie")):(i=vui.strings.getText("LOCKED_EXTRAS_NO_RIGHTS_DLG_TEXT")+"\n",i+=this.getLabel({title:e.title,videoQualityLock:e.videoQualityLock,offerTypeLock:e.offerTypeLock}),this.showErrorDialog(vui.strings.getText("LOCKED_EXTRAS_NO_RIGHTS_DLG_TITLE"),i))}}),vui.widgets.MovieDetailsAboutUhd=new Class({Extends:vui.widgets.Container,elemClassName:"movieDetailsAboutUhd",init:function(){this.gridLabel=createDiv({className:"movieDetailsLockedExtras_label font22"},this.elem),this.ariaLabel="About UHD. "+vui.strings.getText("DETAILS_ABOUT_TITLE_1")+". "+vui.strings.getText("DETAILS_ABOUT_TITLE_2"),this.gridLabel.innerHTML=vui.strings.getText("DETAILS_ABOUT_TITLE_1"),this.gridLabel.innerHTML+="<br>"+vui.strings.getText("DETAILS_ABOUT_TITLE_2"),this.ariaLabel+=". 4K",this.createWidget("res4K",vui.images.uhdLogo,"DETAILS_ABOUT_DESC_4K"),"ceres"===vui.vvPlatform.id?(this.ariaLabel+=". High Dynamic Range",vui.gConnectionInstance.getIsMVPEnabled()?this.createWidget("dolbyVis",vui.images.hdr10_about,"DETAILS_ABOUT_DESC_DVISION"):this.createWidget("dolbyVis",vui.images.mp.hdr,"DETAILS_ABOUT_DESC_DVISION")):vui.gConnectionInstance.getIsMVPEnabled()?(this.ariaLabel+=". High Dynamic Range",this.createWidget("dolbyVis",vui.images.hdr10_about,"DETAILS_ABOUT_DESC_HDR")):(this.ariaLabel+=". Dolby Vision",this.createWidget("dolbyVis",vui.images.dolbyVisionLogo,"DETAILS_ABOUT_DESC_DVISION")),this.ariaLabel+=". Dolby Atmos",this.createWidget("dolbyAtmos",vui.images.dolbyAtmos,"DETAILS_ABOUT_DESC_DATMOS"),this.ariaLabel+=". UHD";var e=vui.vvPlatform.appFeatureEnabled()?"video.walmart.com":"Vudu.com";this.createWidget("uhdLogo",null,"DETAILS_ABOUT_DESC_DUHD_APPX",e),vui._.setAriaLabel(this.ariaLabel),this.selectable=!1},createWidget:function(e,t,i,s){var n=createDiv({className:e},this.elem);t&&(createImg({className:e+"Icon"},n).src=t),createDiv({className:e+"Text font16"},n).innerHTML=vui.strings.getText(i,s),this.ariaLabel+=". "+vui.strings.getText(i,s)}}),vui.widgets.MovieDetailsBook=new Class({Extends:vui.widgets.Book,name:"vui.widgets.MovieDetailsBook",selectionInheritance:!0,fullScreenMode:!1,elemClassName:"movieDetailsTabDetailContainer",pages:{seasonsView:{widgetClass:vui.widgets.DetailPageListView,skipHistory:!0,pageTitle:"Seasons View"},episodesView:{widgetClass:vui.widgets.MovieDetailsEpisodesView,skipHistory:!0,pageTitle:"Episodes View"},castView:{widgetClass:vui.widgets.MovieDetailsCastView,skipHistory:!0,pageTitle:"Cast View"},rtReviews:{widgetClass:vui.widgets.MovieDetailsRtReviews,skipHistory:!0,pageTitle:"RT reviews"},similar:{widgetClass:vui.widgets.MovieDetailsSimilar,skipHistory:!0,pageTitle:"Similar"},moreInfoView:{widgetClass:vui.widgets.MovieDetailsMoreInfoView,skipHistory:!0,pageTitle:"MoreInfo"},familyFilter:{widgetClass:vui.widgets.FamilyFilter,skipHistory:!0,pageTitle:"FamilyFilter"},extras:{widgetClass:vui.widgets.MovieDetailsExtras,skipHistory:!0,pageTitle:"Extras"},lockedExtras:{widgetClass:vui.widgets.MovieDetailsLockedExtras,skipHistory:!0,pageTitle:"lockedExtras"},aboutUhd:{widgetClass:vui.widgets.MovieDetailsAboutUhd,skipHistory:!0,pageTitle:"About UHD"},parentalGuide:{widgetClass:vui.widgets.MovieDetailsParentalGuide,skipHistory:!0,pageTitle:"parentalGuide"}}}),vui.widgets.MovieDetailsTabView=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],name:"vui.pages.MovieDetailsTabView",elemClassName:"movieDetailsRightContainer",selectionInheritance:!0,layout:{type:"horizontal"},init:function(e){this.params=e,this.contentId=e.contentId,this.elem.style.top=e.topPos+window.vui.ResDef.detailPage.BOTTOM_CONTAINER_TOP+"px",this.movieDetailsTabs=new vui.widgets.MovieDetailsTabs,this.attachChild(this.movieDetailsTabs),this.book=new vui.widgets.MovieDetailsBook,this.attachChild(this.book),this.selectable=!1,this.elem.style.visibility="hidden"},goToMap:{seasons:function(e){this.book.goToPage("seasonsView",e)},episodes:function(e){this.book.goToPage("episodesView",e)},overview:function(e){this.book.goToPage("overview",e)},cast:function(e){this.book.goToPage("castView",e)},reviews:function(e){this.book.goToPage("rtReviews",e)},familyFilter:function(e){this.book.goToPage("familyFilter",e)},similar:function(e){var t=this.movieInfoModel.get();e.contentType=t.type[0],this.book.goToPage("similar",e)},moreInfo:function(e){this.book.goToPage("moreInfoView",e)},extras:function(e){this.book.goToPage("extras",e)},lockedExtras:function(e){this.book.goToPage("lockedExtras",e)},aboutUhd:function(e){this.book.goToPage("aboutUhd",e)},parentalGuide:function(e){this.book.goToPage("parentalGuide",e)}},tabModels:{series:{tabs:[{name:"lockedExtras",title:vui.strings.getText("DEFAULT_TAB_LOCKED_EXTRAS_APPX",vui.vvPlatform.appFeatureEnabled()?"":"Vudu")},{name:"seasons",title:vui.strings.getText("SEASON_TAB_SIMILAR")},{name:"cast",title:vui.strings.getText("SEASON_TAB_CAST")},{name:"moreInfo",title:vui.strings.getText("SEASON_TAB_MORE_INFO")},{name:"parentalGuide",title:vui.strings.getText("TAB_FAMILY_PARENT_GUIDE")}]},season:{tabs:[{name:"lockedExtras",title:vui.strings.getText("DEFAULT_TAB_LOCKED_EXTRAS_APPX",vui.vvPlatform.appFeatureEnabled()?"":"Vudu")},{name:"episodes",title:vui.strings.getText("EPISODE_TAB_EPISODES")},{name:"seasons",title:vui.strings.getText("SEASON_TAB_SIMILAR")},{name:"cast",title:vui.strings.getText("SEASON_TAB_CAST")},{name:"moreInfo",title:vui.strings.getText("SEASON_TAB_MORE_INFO")},{name:"parentalGuide",title:vui.strings.getText("TAB_FAMILY_PARENT_GUIDE")}]},episode:{tabs:[{name:"lockedExtras",title:vui.strings.getText("DEFAULT_TAB_LOCKED_EXTRAS_APPX",vui.vvPlatform.appFeatureEnabled()?"":"Vudu")},{name:"extras",title:vui.strings.getText("DEFAULT_TAB_EXTRAS")},{name:"cast",title:vui.strings.getText("EPISODE_TAB_CAST")},{name:"episodes",title:vui.strings.getText("EPISODE_TAB_EPISODES")},{name:"seasons",title:vui.strings.getText("EPISODE_TAB_SIMILAR")},{name:"moreInfo",title:vui.strings.getText("EPISODE_TAB_MORE_INFO")},{name:"parentalGuide",title:vui.strings.getText("TAB_FAMILY_PARENT_GUIDE")}]},normal:{tabs:[{name:"lockedExtras",title:vui.strings.getText("DEFAULT_TAB_LOCKED_EXTRAS_APPX",vui.vvPlatform.appFeatureEnabled()?"":"Vudu")},{name:"extras",title:vui.strings.getText("DEFAULT_TAB_EXTRAS")},{name:"cast",title:vui.strings.getText("DEFAULT_TAB_CAST")},{name:"reviews",title:vui.strings.getText("DEFAULT_TAB_REVIEWS")},{name:"familyFilter",title:vui.strings.getText("DEFAULT_TAB_FAMILY_PLAY")},{name:"parentalGuide",title:vui.strings.getText("TAB_FAMILY_PARENT_GUIDE")},{name:"similar",title:vui.strings.getText("DEFAULT_TAB_SIMILAR")},{name:"moreInfo",title:vui.strings.getText("DEFAULT_TAB_MORE_INFO")},{name:"aboutUhd",title:"About UHD"}]}},removeTabFromModel:function(e,t){for(var i,s=0;s<e.tabs.length;s++)e.tabs[s].name==t&&(i=s);return $defined(i)&&e.tabs.splice(i,1),e},bind:function(e){var t,i=(this.movieInfoModel=e).data;this.elem.style.visibility="visible",t=this.tabModels[i.type]?this.tabModels[i.type]:this.tabModels.normal,0==e.hasLockedExtras()&&(t=this.removeTabFromModel(t,"lockedExtras")),0==e.hasExtras()&&(t=this.removeTabFromModel(t,"extras")),!i||i.credits[0]&&i.credits[0].credit&&0<i.credits[0].credit.length||(t=this.removeTabFromModel(t,"cast")),!i||i.tomatoReviews[0]&&i.tomatoReviews[0].tomatoReview||(t=this.removeTabFromModel(t,"reviews")),(!vui.gConnectionInstance.isClearplayEnabled()||i&&"false"===vui._.aStr(i.hasClearplay))&&(t=this.removeTabFromModel(t,"familyFilter")),i&&!vui._.isUHDContent(i)&&(t=this.removeTabFromModel(t,"aboutUhd")),i&&!vui._.aStr(i.parentalGuide)&&(t=this.removeTabFromModel(t,"parentalGuide")),this.movieDetailsTabs.setModel(t),this.restoreTab?this.movieDetailsTabs.restoreActive(this.restoreTab):(this.movieDetailsTabs.restoreActive(t.tabs[0].name),this.restoreTab=t.tabs[0].name)},refreshBind:function(e){var t=this.book.currentPage;t.refreshBind&&t.refreshBind(e)},onChangeSelection:function(){this.getSelectedChild()},tabActive:function(e,t,i){var s=e.model.name;if(vui.isOnSelectionPath(this)&&vui.executeOnContainer(this.parentWidget,"updateDescriptionContainer"),s==this.selectedMDTab&&!i){if("wiki"!=s)return void(!0!==this.parentWidget.descIsHidden&&this.report(s));goToPage("wikipedia",this.movieInfoModel)}this.report(s),this.loadTab(e)},loadTab:function(e){var t=e.model.name;this.selectedMDTab=t,this.restoreTab=this.selectedMDTab;var i={};i.movieInfoModel=this.movieInfoModel,i.savedState=this.pageState,i.tabName=t,this.goToMap[t]?this.goToMap[t].bind(this)(i):alert("ERROR: '"+t+"' is not a valid page name"),this.pageState=null,vui.executeOnContainer(this.parentWidget,"onChangeTab")},restore:function(e){e&&(this.restoreTab=e[0],this.pageState=e[1])},save:function(){var e=this.restoreTab,t=null,i=this.book.currentPage;if(i&&i.save&&(t=i.save()),e)return[e,t];this.doReport&&this.doReport()},hide:function(){this.parent(),this.book.hide(),delete this.selectedMDTab,this.reportTimer&&clearTimeout(this.reportTimer)},report:function(i){clearTimeout(this.reportTimer),this.reportTimer=setTimeout(function(){var e,t;this.parentWidget&&!0===this.parentWidget.descIsHidden&&(t=((e=vui.executeOnContainer(this.parentWidget,"getPageTitle_")||"")||"product details")+":"+i,e=e.toLowerCase(),t=t.toLowerCase(),vui.analytics.trackPage(t,{evars:{channel:e}}))}.bind(this),window.REPORTDELAY)}}),vui.widgets.ActionButton=new Class({Extends:vui.widgets.ImageActionButton,elemPosition:"static",init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",e.disabledClassName="btn_bg_disabled btn_bg_size4_disabled",e&&e.buttonClass&&(e.buttonClass.contains("promo")&&(this.promo=!0),e.buttonClass.contains("watch")&&(e.defaultClassName="btn_bg_watch_default btn_bg_size4_default",e.selectClassName="btn_bg_watch_select btn_bg_size4_select")),this.parent(e),this.label.className=this.label.className+" fontMedium",this.pageLoaded=!1},bind:function(e,t){e&&(this.model=e,this.pos=t,!0===this.model.disable?this.disable():(this.enable(),this.promo&&(this.label.style.color="#ff8f02")),this.setLabel(e.title),this.setDescription(e.desc),!window.vui.vvPlatform.appFeatureEnabled()&&e.iconSrc?this.setIcon(e.iconSrc):this.label.className=this.label.className+" noIcon",this.show())},unbind:function(){delete this.model,this.hide()},onAction:function(){this.model.action&&vui.executeOnContainer(this.parentWidget,this.model.action,this.model.params)},onSelect:function(){this.parent(),1==this.pageLoaded&&vui.executeOnContainer(this.parentWidget,"showDescriptionContainer")}}),vui.widgets.ActionButtons=new Class({Extends:vui.widgets.Container,selectedTab:0,selectorType:"none",centerAlignedClass:"actionButtonsContainer",name:"vui.widgets.ActionButtons",init:function(){this.elem.className="detailPageActionButtonsContainer",this.tabChildren=[],this.selectable=!1},setModel:function(e,t){for(var i=new Element("div",{class:"actionButtonsContainer"}),s=e,n=0,a=s.length;n<a;n++){var o={};s[n].iconSrc&&(o.iconSrc=s[n].iconSrc),s[n].buttonClass&&(o.buttonClass=s[n].buttonClass),o.isBack=!1,t&&1==t&&(o.isBack=!0);var r=new vui.widgets.ActionButton(o);this.attachChild(r,i),this.tabChildren.push(r)}this.refreshModel(s),this.elem.appendChild(i),this.tabsContainer=i},refreshModel:function(e){for(var t=0,i=e.length;t<i;t++){var s,n=this.tabChildren[t];n||(s={iconSrc:null,isBack:!1},n=new vui.widgets.ActionButton(s),this.attachChild(n,this.tabsContainer),this.tabChildren.push(n)),n.bind(e[t])}if(e&&e.length<this.tabChildren.length)for(t=e.length;t<this.tabChildren.length;t++)this.tabChildren[t].unbind()},bind:function(e,t){this.movieInfoModel=e,this.data=e.data,this.actionButtonModel=this.getDetailsActionModel(),this.setModel(this.actionButtonModel,t)},refreshBind:function(e){this.movieInfoModel=e,this.data=e.data;var t=this.getCompString(this.actionButtonModel);this.actionButtonModel=this.getDetailsActionModel(),t!==this.getCompString(this.actionButtonModel)&&this.refreshModel(this.actionButtonModel)},getCompString:function(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e[i].title;return t},fixValidOffersFromOwnerships:function(t,i){if(!t||!i)return t;function e(e){t[e]&&t[e].Purchase&&(t[e].Purchase=!1),t[e]&&t[e].walmartOffer&&(t[e].walmartOffer=!1)}function s(e){return i[e]&&i[e].isOwned&&"Purchase"==i[e].type}return s("uhd")?(e("hdx"),e("hd"),e("sd")):s("hdx")?(e("hd"),e("sd")):s("hd")&&e("sd"),t},toggleWishlist:function(){var e;this.movieInfoModel&&(e=function(){this.changeWishlist()}.bind(this),vui.doActivationOr(e,e,{calledFrom:"purchase"}))},addToMyCollections:function(){var e,t=function(){function t(){controller.goToPage("MyCollectionsView",i),vui.analytics.trackPage("MyListsView")}var i={enteredFrom:"details",movieInfo:this.movieInfoModel};"bundle"!==vui._.aStr(this.movieInfoModel.data.type)?vui.m.myCollectionsModel.getCollectionsWithContent({contentId:i.movieInfo.data.contentId,callback:function(e){i.collectionList=e,t()}}):t()}.bind(this);vui.m.userId?t():(e=function(e){"quit"!==e&&"success"===e&&t()}.bind(this),vui.ActivationController.beginActivation(e))},changeWishlist:function(){this.movieInfoModel.isWished()?(this.movieInfoModel.setWished(!1),vui._.setAriaLabel("Removed From Wishlist")):(this.movieInfoModel.setWished(!0),vui._.setAriaLabel("Added to Wishlist")),this.refreshModel(this.getDetailsActionModel())},rateCallback:function(){this.parentWidget.descriptionContainer.refreshBind(this.movieInfoModel)},getDetailsActionModel:function(){var e=[],t=vui.getModel(),i=this.data,s=i.ownerships,n=VUDU.vuduTime(),a=!1,o=null,r=!1,l=null;if(s)for(var u in s){var d=s[u];if(d.isRented){if(parseDate(d.ends).getTime()<n)continue;a=isContentRented=!0}else a=isContentOwned=!0}var c,h,v=!1,m=vui._.aStr(this.data.type);(vui.getModel().avodManager.canDisplayWatchWithAdsButton(i)||!s&&"season"===m&&"true"===vui._.aStr(i.isAdvertEnabled))&&(v=!0,e.push({name:"watchads",title:vui.strings.getTransformedText("MOVIE_DETAILS_WATCH_ADS"),buttonClass:"watch",action:"onClickWatchWithAds",params:{movie:i,variant:w,currentWidget:this}})),!s||"program"!==m&&"episode"!==m&&"bundle"!==m&&"series"!==m&&"season"!==m||(h=vui.executeOnContainer(this.parentWidget,"getVariantByOwnership",i),this.data.streamableStartTime&&(o=window.getFutureDateString(this.data.streamableStartTime[0]),r=!0),this.data.streamingSoon?e.push({name:"watchSoon",title:vui.strings.getText("MOVIE_DETAILS_AVAILABLE_SOON"),buttonClass:"watch",disable:!0}):$defined(o)?e.push({name:"watchSoon",title:"watch soon"===o.toLowerCase()?o:vui.strings.getText("MOVIE_DETAILS_WATCH_X"," "+o),buttonClass:"watch",disable:!0}):h&&($extend(w={},h),P=vui.strings.getText("MOVIE_DETAILS_WATCH_X",""),c="watch",i.contentId&&i.contentId[0]&&(b=t.bookmarkCache.check(i.contentId[0]))&&0<b.timeSeconds&&(P=vui.strings.getText("MOVIE_DETAILS_RESUME_X",""),c="resume"),e.push({name:c,title:P,buttonClass:"watch",action:"onClickPlay",params:{movie:i,variant:w,currentWidget:this,name:c}})));var g,_,p,T,f,E,S,I,C,y=!1;if((l=t.getBestOffer(i))&&l[1]&&"free"==l[1]&&(y=!0),y&&!v){for(var w=null,A=t.qualityArray,O=0;O<A.length;O++)if(this.data.variants[A[O]]){w=this.data.variants[A[O]];break}var b,P=vui.strings.getTransformedText("MOVIE_DETAILS_WATCH_ADS");i.contentId&&i.contentId[0]&&(b=t.bookmarkCache.check(i.contentId[0]))&&0<b.timeSeconds&&(P=vui.strings.getText("MOVIE_DETAILS_RESUME_X","")),e.push({name:"watch",title:P,action:"activateOrPlay",buttonClass:"watch",params:{movie:i,variant:w,currentWidget:this}})}if(!s&&!y&&!v&&vui.gConnectionInstance.getTokenEnabled()&&vui.fund.getValidTokenBalance()){function N(e){return!(e.startTime&&!(e.startTime&&parseDate(vui._.aStr(e.startTime))<VUDU.vuduTime()))}for(var R=vui.fund.getValidTokens(),w=null,D=null,L=vui.m.qualityArrayNoHD,O=0;O<R.length;O++)for(var M=R[O].maxVideoQuality,x=0;x<L.length;x++){var k=L[x],B=i.offers&&i.offers[k]&&i.offers[k].Rental;if(k===M){if(i.variants[k]&&B&&N(B)){D=B,w=i.variants[k];break}}else if(vui.m.qualMap[k]<vui.m.qualMap[M]&&i.variants[k]&&B&&N(B)){D=B,w=i.variants[k];break}}w&&D&&e.push({name:"watch",title:vui.strings.getTransformedText("MOVIE_DETAILS_WATCH_TOKEN"),action:"onTransactWithToken",params:{movie:i,variant:w,offer:D},buttonClass:"promo watch"})}"episode"===vui._.aStr(i.type)&&i.validOffers&&i.seasonInfo&&i.seasonInfo.data&&i.seasonInfo.data.ownerships&&(i.validOffers=this.fixValidOffersFromOwnerships(i.validOffers,i.seasonInfo.data.ownerships),i.seasonInfo.data.validOffers=this.fixValidOffersFromOwnerships(i.seasonInfo.data.validOffers,i.seasonInfo.data.ownerships)),"season"===vui._.aStr(i.type)&&i.validOffers&&i.ownerships&&(i.validOffers=this.fixValidOffersFromOwnerships(i.validOffers,i.ownerships)),i.validOffers&&((g=t.availableInFuture(i))&&!1===r&&0==this.movieInfoModel.isAvailableToPreorder()&&!this.movieInfoModel.hasBeenPreOrdered()?t.dateIsToday(g)?(_=window.getFutureDateString(g),e.push({name:"comingSoon",title:vui.strings.getTransformedText("MOVIE_DETAILS_AVAILABLE_X",_),disable:!0})):e.push({name:"comingSoon",title:vui.strings.getTransformedText("MOVIE_DETAILS_COMING_SOON"),disable:!0}):((E=this.movieInfoModel.getAvailableOfferTypes())&&(p=E.rent,T=E.own,f=E.preorder),"season"===vui._.aStr(i.type)&&this.movieInfoModel.doesTagExist("currentNDA")?V=vui.strings.getTransformedText("MOVIE_DETAILS_SEASON_PASS_BUTTON"):p?V=T?vui.strings.getTransformedText("MOVIE_DETAILS_RENT_OWN_BUTTON"):vui.strings.getTransformedText("MOVIE_DETAILS_RENT_BUTTON"):T&&(V=vui.strings.getTransformedText("MOVIE_DETAILS_OWN_BUTTON")),V&&e.push({name:"rent_own",title:V,action:"doTransact",params:{successCallback:function(){controller.refreshCurrentPage()},isPreorder:!!f}}),f&&!this.movieInfoModel.contentPreOrdered()&&this.movieInfoModel.canUpgradePreOrder()&&e.push({name:"preorder",title:vui.strings.getTransformedText("MOVIE_DETAILS_PREORDER_BUTTON"),action:"doTransact",params:{successCallback:function(){controller.refreshCurrentPage()},isPreorder:!0}}))),t.preOrderedMovieCache.check(this.movieInfoModel.getContentId())&&e.push({name:"managepreorder",title:vui.strings.getTransformedText("MOVIE_DETAILS_MANAGE_PREORDER"),action:"doManagePreOrder",params:function(){controller.refreshCurrentPage()}}),"episode"!==vui._.aStr(i.type)||(S=i.seasonInfo)&&S.data&&S.data.validOffers&&S.isAvailableHereAndNow()&&(I=S.doesTagExist("currentNDA")?vui.strings.getText("MOVIE_DETAILS_SEASON_PASS_BUTTON"):vui.strings.getText("MOVIE_DETAILS_SEASON_PURCHASE_BUTTON"),((C=S.data.validOffers).hdx&&C.hdx.Purchase||C.hd&&C.hd.Purchase||C.sd&&C.sd.Purchase)&&e.push({name:"seasonPass",title:I,action:"doTransact",params:{successCallback:function(){controller.refreshCurrentPage()},mim:S}})),this.data&&this.data.streamableTrailerEditionId&&(!vui.vvPlatform.isLightDevice||this.data.dashTrailerEditionId)&&e.push({name:"watch_trailer",title:vui.strings.getText("MOVIE_DETAILS_WATCH_TRAILER"),desc:"Watch Trailer",action:"watchTrailer"});var U,G=vui._.aStr(i.type),F=!0;vui.gConnectionInstance.getUserCollectionEnabled()||(F=!1),"bonus"!==G&&"trailer"!==G&&"episode"!==G||(F=!1),F&&(U=vui.strings.getText("USERLIB_MOVIE_DETAILS_ADD_TO_MYLIST_BUTTON"),e.push({name:"list",title:U,action:"addToMyCollections",desc:"Add to list"}));var H,V,W,Y=!0;return vui.gConnectionInstance.getUserCollectionEnabled()&&F&&(Y=!1),(a||s||this.movieInfoModel.hasBeenPreOrdered())&&(Y=!1),!Y||"episode"!==vui._.aStr(i.type)||(H=i.seasonId&&i.seasonId[0])&&t.wishedMovieCache.check(H)&&(Y=!1),Y&&(V=vui.strings.getText("MOVIE_DETAILS_ADD_TO_WISHLIST"),W="&#xFF0B; ",this.movieInfoModel.isWished()&&(V=vui.strings.getText("MOVIE_DETAILS_REMOVE_FROM_WISHLIST"),W="&#xFF0D; ",iconImg=vui.images.remove_wishlist_icon),e.push({name:"wishlist",title:W+V,action:"toggleWishlist"})),e.push({name:"rate",title:vui.strings.getText("MOVIE_DETAILS_RATE"),action:"doRate",params:this}),e}}),vui.widgets.BottomContainer=new Class({Extends:vui.widgets.Container,name:"vui.widgets.BottomContainer",layout:{type:"horizontal"},elemClassName:"movieDetailsBottomContainer",init:function(e){this.params=e||{},this.leftContainer=new Element("div",{class:"movieDetailsLeftContainer"}),this.rentalWidgetContainer=new vui.widgets.RentalWidget({elemClassName:"rental_widget_container"}),this.attachChild(this.rentalWidgetContainer,this.leftContainer),this.rentalWidgetContainer.hide(),this.rentalWidgetContainer.selectable=!1,this.availQualityContainer=new Element("div",{class:"availQualityContainer"}),this.leftContainer.appendChild(this.availQualityContainer),this.availQualityContainer.selectable=!1,this.availQualityContainer.style.display="none",this.offerInfoPanel=new vui.widgets.OfferInfoPanel({elemClassName:"movieDetail_offerInfoPanel"}),this.attachChild(this.offerInfoPanel,this.availQualityContainer),this.offerInfoPanel.selectable=!1,this.availQualities=new vui.widgets.AvailableQualities({elemClassName:"movieDetail_available_qualities"}),this.attachChild(this.availQualities,this.availQualityContainer),this.availQualities.selectable=!1,this.posterBlock=new Element("div",{class:"movieDetailsPosterBlock"}),this.leftContainer.appendChild(this.posterBlock),this.posterBlock.selectable=!1,this.actionButtons=new vui.widgets.ActionButtons,this.attachChild(this.actionButtons,this.leftContainer),this.promoImg=new Element("img",{class:"movieDetailPromoImg"}),this.elem.appendChild(this.promoImg),this.promoImg.style.display="none",this.titleContainer=new Element("div",{class:"movieDetailsTitleContainer fontLarge"}),this.elem.appendChild(this.titleContainer),this.title=new Element("div",{class:"movieDetailsTitle fontLarge"}),this.titleContainer.appendChild(this.title),this.elem.appendChild(this.leftContainer),this.descriptionContainer=new vui.widgets.MovieDetailsOverviewContainer,this.attachChild(this.descriptionContainer),this.descriptionContainer.elem.style.visibility="hidden",this.descIsHidden=!1},hideDescriptionContainer:function(){var e,t;this.movieDetailsTabView&&0==this.descIsHidden&&!window._vuidata.ignoreUserEvents&&(this.descriptionContainer.elem.style.display="none",e=window.vui.ResDef.detailPage.RIGHT_CONTAINER_RIGHT,t=function(){this.descIsHidden=!0}.bind(this),vui._.animX(this.movieDetailsTabView.elem,e,window.vui.ResDef.detailPage.ANIMATION_DURATION,t))},showDescriptionContainer:function(){var e,t;this.movieDetailsTabView&&1==this.descIsHidden&&!window._vuidata.ignoreUserEvents&&(e=window.vui.ResDef.detailPage.RIGHT_CONTAINER_LEFT,t=function(){this.descriptionContainer.elem.style.display="block",this.descIsHidden=!1}.bind(this),vui._.animX(this.movieDetailsTabView.elem,e,window.vui.ResDef.detailPage.ANIMATION_DURATION,t))},bind:function(e,t){this.movieInfoModel=e,this.isBack=t.isBackAgain||!1,this.descIsHidden=t.descIsHidden||!1;var i,s=e.data;"episode"===vui._.aStr(s.type)&&((i=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).style.backgroundColor="black",i.innerHTML=vui.getEpisodeSeasonLabel(s),this.posterBlock.appendChild(i));var n=!1;(s.contentId&&vui.getModel().ownedMovieCache[s.contentId[0]]||s.contentId&&vui.getModel().anyOfCidsPurchased(s.contentId))&&vui.checkOwnedCacheValidity(s.ownerships)&&(n=!0);var a,o=e.getRentalInfo(!0),r=vui._.getPromoUrl(s,"detail");o&&!e.rentalUpgraded()?(this.rentalWidgetContainer.bind(o),this.rentalWidgetContainer.show(),this.availQualityContainer.style.display="none"):r&&!n?(this.offerInfoPanel.bind(e),this.rentalWidgetContainer.hide(),this.availQualityContainer.style.display="none",this.promoImg.src=r,this.promoImg.style.display="block"):(this.offerInfoPanel.bind(e),e.data.ownerships?(this.availQualities.hide(),this.offerInfoPanel.elem.style.top="20px"):this.availQualities.bind(e),this.availQualityContainer.style.display="block",this.rentalWidgetContainer.hide()),this.posterBlock.src=vui.images.empty1x1,s.posterUrl&&(a="hd"==window.WIDGETRESOLUTION?s.posterUrl[0]+"-"+window.vui.ResDef.detailPage.POSTER_W+".jpg":s.posterUrl[0]+"-l.jpg",this.posterBlock.style.backgroundImage="url("+a+")",this.posterBlock.style.backgroundSize=window.vui.ResDef.detailPage.POSTER_BACKGROUND+"px",this.posterBlock.style.backgroundRepeat="no-repeat"),this.actionButtons.bind(e);var l=vui.measureDimensions(s.title[0],"movieDetailsTitle fontLarge");this.titleContainer.style.height=l.height+"px",vui.myOffers.setBenefitsViewedState(vui._.aStr(s.contentId)),this.title.innerHTML=vui._.aStr(s.title);var u=this.titleContainer.getSize().y+window.vui.ResDef.detailPage.OVERVIEW_SPACING;this.descriptionContainer.elem.style.top=window.vui.ResDef.detailPage.OVERVIEW_TOP+u+"px",this.descriptionContainer.bind(e),this.params.topPos=this.titleContainer.getSize().y,"bundle"==s.type?this.movieDetailsTabView=new vui.widgets.BundleDetailsView(this.params):this.movieDetailsTabView=new vui.widgets.MovieDetailsTabView(this.params),this.descIsHidden?(this.descriptionContainer.elem.style.display="none",this.movieDetailsTabView.elem.style.left=window.vui.ResDef.detailPage.RIGHT_CONTAINER_RIGHT+"px"):(this.descriptionContainer.elem.style.display="block",this.movieDetailsTabView.elem.style.left=window.vui.ResDef.detailPage.RIGHT_CONTAINER_LEFT+"px"),this.descriptionContainer.elem.style.visibility="visible",this.attachChild(this.movieDetailsTabView),t&&t.bookState&&this.movieDetailsTabView.restore&&this.movieDetailsTabView.restore(t.bookState),this.movieDetailsTabView.bind(this.movieInfoModel),this.actionButtons.selectable=!0,vui.gConnectionInstance.getUserCollectionEnabled()&&this.showMyCollectionTip(),this.movieDetailsTabView.selectable=!0,this.movieDetailsTabView.grid&&(this.movieDetailsTabView.grid.selectable=!0)},refreshBind:function(e){var t,i,s,n;e?(this.actionButtons.refreshBind(e),this.descriptionContainer.refreshBind(),i=!1,((t=e.data).contentId&&vui.getModel().ownedMovieCache[t.contentId[0]]||t.contentId&&vui.getModel().anyOfCidsPurchased(t.contentId))&&vui.checkOwnedCacheValidity(t.ownerships)&&(i=!0),s=e.getRentalInfo(),n=vui._.getPromoUrl(e.data,"detail"),s&&!e.rentalUpgraded()?(this.rentalWidgetContainer.bind(s),this.rentalWidgetContainer.show(),this.availQualityContainer.style.display="none"):n&&!i?(this.offerInfoPanel.bind(e),this.rentalWidgetContainer.hide(),this.availQualityContainer.style.display="none",this.promoImg.src=n,this.promoImg.style.display="block"):(this.offerInfoPanel.bind(e),e.data.ownerships?(this.availQualities.hide(),this.offerInfoPanel.elem.style.top="20px"):this.availQualities.bind(e),this.availQualityContainer.style.display="block",this.rentalWidgetContainer.hide(),this.promoImg.style.display="none")):alert("Error: no movieInfo object")},beforeOnDirectionDown:function(){this.hideDescriptionContainer()},hideOwnedQualities:function(e){this.availQualities.hideQuality(e)},showMyCollectionTip:function(){if(!(vui.gConnectionInstance.getUserCollectionEnabled()&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getHasSeenTip("detail"))){for(var e=this.actionButtons.parentWidget.elem.offsetTop+this.actionButtons.elem.offsetTop,t=this.actionButtons.children,i=0;i<t.length;i++){var s=t[i];if(!s.model||"list"===s.model.name){e+=s.elem.clientHeight/2;break}e+=s.elem.clientHeight+4}e=parseInt(e,10)-window.vui.ResDef.myVuduView.MY_COLLECTION_TIP_H/2+"px",this.listButton=this.actionButtons.children.filter(function(e){return e.model&&"list"===e.model.name})[0];var n="We've moved things around:",a="Now you can add to wishlist and create your own lists.";controller.showPopup("SimpleTextDialog",{elemClassName:"myCollectionTip detailsPageTip",title:n,text:a,buttons:[{label:vui.strings.transformCase("Ok"),size:1,labelClassName:"font24",desc:"Add to list. "+n+" "+a+" OK"}],buttonArial:!0,opacity:"opacity50",top:e,dialogBoxClassName:"myCollectionTipBox",titlePos:"relative",textPos:"relative",buttonPos:"relative",overrideBoxClassName:!0,backgroundImage:vui.images.userCollection.tooltip_bubble_details,callback:function(){vui.m.myCollectionsModel&&vui.m.myCollectionsModel.saveTipState("detail"),controller.hidePopup(),vui.select(this.listButton)}.bind(this)})}}}),vui.widgets.MovieDetailsOverviewContainer=new Class({Extends:vui.widgets.Base,Implements:[vui.PromoTableUI],name:"vui.widgets.MovieDetailsOverviewContainer",elemClassName:"movieDetailsOverviewContainer",init:function(){var e=new Element("div",{class:"movieDetailsOverviewMain"});this.elem.appendChild(e),this.secondary=new Element("div",{class:"movieDetailsSecondaryInfo fontWhite20"}),e.appendChild(this.secondary),this.secInfo1=createDiv({className:"movieDetailsSecInfo1 fontWhite20",position:"static"},this.secondary),this.secInfo2=createDiv({className:"movieDetailsSecInfo2 fontWhite20",position:"static"},this.secondary),this.detailsRatingArea=new Element("div",{class:"detailsRatingArea"}),e.appendChild(this.detailsRatingArea),this.iconInfoBlock=new vui.widgets.IconInfoBlock,this.attachChild(this.iconInfoBlock,e),this.detailsRatingArea.style.display="none",this.crb=new vui.widgets.NewRatingBlock("community"),this.crb.elem.className="newCommunityRating",this.detailsRatingArea.appendChild(this.crb.elem),vui.features.TOMATOMETER&&(this.rb=new vui.widgets.NewTomatoRatingBlock,this.rb.elem.className="newTomatoRating",this.rb.elem.style.display="none",this.detailsRatingArea.appendChild(this.rb.elem)),this.maContainer=new Element("div",{class:"maContainer"}),this.detailsRatingArea.appendChild(this.maContainer),this.maIcon=createImg({className:"maIcon",src:vui.images.mp.ma},this.maContainer),this.maContainer.style.display="none",this.uvContainer=new Element("div",{class:"uvContainer"}),this.detailsRatingArea.appendChild(this.uvContainer),this.uvIcon=new Element("img",{class:"uvIcon"}),this.uvIcon.src=vui.images.mp.uv,this.uvContainer.appendChild(this.uvIcon),this.uvContainer.style.display="none",this.UHDFeatures=new vui.widgets.UHDFeatures,this.attachChild(this.UHDFeatures,e),this.UHDFeatures.hide(),this.familyplayInfo=new vui.widgets.FamilyplayInfo,this.attachChild(this.familyplayInfo,e),this.familyplayInfo.hide(),this.progressBar=new vui.widgets.BookmarkProgressBar,this.attachChild(this.progressBar,e),this.progressBar.hide(),this.pricingArea=new vui.widgets.PricingArea,this.attachChild(this.pricingArea,e),this.pricingArea.hide(),this.summary=new Element("div",{class:"font22 movieDetailsSummary"}),e.appendChild(this.summary)},hide:function(){this.parent()},refreshBind:function(){this.iconInfoBlock.bind(this.movieInfoModel),this.pricingArea.bind(this.movieInfoModel),this.bindProgressBar(this.movieInfoModel.data)},getGenreString:function(e){if(!e.geneGenres||!e.geneGenres[0].geneGenre)return"";var t=[],i=e.geneGenres&&e.geneGenres[0]&&e.geneGenres[0].geneGenre;if(i)for(var s=i.length,s=Math.min(s,3),n=0;n<s;n++)t.push(i[n].name);return t.join(" / ")},aspectRatioEnum:{enhancedWidescreen:vui.strings.getText("MOVIE_DETAILS_ENHANCED_WIDESCREEN"),fullscreen:vui.strings.getText("MOVIE_DETAILS_FULLSCREEN"),widescreen:vui.strings.getText("MOVIE_DETAILS_WIDESCREEN")},soundMixEnum:{stereo:vui.strings.getText("MOVIE_DETAILS_STEREO"),surround:vui.strings.getText("MOVIE_DETAILS_SURROUND_SOUND")},screenTypeEnum:{color:vui.strings.getText("MOVIE_DETAILS_COLOR"),blackAndWhite:vui.strings.getText("MOVIE_DETAILS_B_W")},getFirstVariantData:function(e){var t,i,s={};return e.bestStreamableVideoQuality&&e.variants[e.bestStreamableVideoQuality[0]]?t=e.variants[e.bestStreamableVideoQuality[0]]:(i=vui.getModel().ownedMovieCache[e.contentId[0]])&&i.owned?t=i.ownedList[i.owned]:i&&i.rented&&(t=i.rentedList[i.rented]),t?(t.aspectRatio&&(s.aspectText=this.aspectRatioEnum[t.aspectRatio[0]]),t.audioType&&(s.soundMixText=this.soundMixEnum[t.audioType[0]]),s.language="",t.language&&(s.language=t.language.join("/")),t.lengthSeconds&&(s.lengthSeconds=[t.lengthSeconds[0]])):(s.aspectText="",s.soundMixText="",s.language="",e.lengthSeconds&&(s.lengthSeconds=[e.lengthSeconds[0]]),e.language&&(s.language=e.language.join("/"))),s},addSecondaryInfo:function(e){var t=this.getGenreString(e),i=this.getFirstVariantData(e),s="";i.lengthSeconds&&(s=vui.strings.getText("MOVIE_DETAILS_LENGTH_MINUTES",Math.ceil(i.lengthSeconds[0]/60)));var n="";e.releaseTime&&(n=vui.displayReleaseTime(e.releaseTime[0])),studio=e.distributionStudio?e.distributionStudio[0].name[0]:e.studio[0].name[0];var a=i.language,o=window.getFriendlyRating(e.contentRating[0]),r=[];o&&""!=o&&r.push(o),""!=n&&r.push(n),""!=s&&r.push(s),e.subtitleTrack&&r.push("CC"),""!=a&&r.push(a),this.secInfo1.innerHTML=r.join(" / "),this.maIcon=createImg({className:"maIcon",src:vui.images.mp.ma,position:"static"},this.secInfo1),this.maIcon.style.display="none",this.uvIcon=new Element("img",{class:"uvIcon"}),this.uvIcon.src=vui.images.mp.uv,this.secInfo1.appendChild(this.uvIcon),this.uvIcon.style.display="none",""!=t&&(this.secInfo2.innerHTML=t)},bind:function(e){var t=e.get();this.movieInfoModel=e,this.progressBar.hide(),this.pricingArea.hide(),this.addSecondaryInfo(t),this.topPos=this.topPos+this.secondary.getSize().y+window.vui.ResDef.detailPage.OVERVIEW_SPACING,this.crb.bind(e),this.iconInfoBlock.bind(e),vui.features.TOMATOMETER&&(this.rb.elem.style.display="none",this.rb.bind(e)),iconLeftPos=vui.features.TOMATOMETER&&"none"!==this.rb.elem.style.display?window.vui.ResDef.detailPage.UV_ICON_LEFT_TM:window.vui.ResDef.detailPage.UV_ICON_LEFT_WTM,isMaContent(t)&&"bundle"!=e.type?(this.maIcon.style.display="inline-block",this.maContainer.style.display="inline-block",iconLeftPos+=window.vui.ResDef.detailPage.UV_ICON_RIGHT_SPACING):(this.maIcon.style.display="none",this.maContainer.style.display="none",iconLeftPos+=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT),t.UVStatus&&"bundle"!=e.type?(this.uvIcon.style.display="inline-block",this.uvContainer.style.display="inline-block",iconLeftPos+=window.vui.ResDef.detailPage.UV_ICON_RIGHT_SPACING):(this.uvIcon.style.display="none",this.uvContainer.style.display="none",iconLeftPos+=window.vui.ResDef.detailPage.GRIDLIST_PADDING_RIGHT),vui._.isUHDContent(this.movieInfoModel.data)&&"bundle"!==this.movieInfoModel.data.type[0]&&this.UHDFeatures.bind(this.movieInfoModel),t&&"true"===vui._.aStr(t.hasClearplay)&&vui.gConnectionInstance.isClearplayEnabled()&&this.familyplayInfo.bind(),this.pricingPanelTop=this.UHDShowing?window.vui.ResDef.detailPage.PRICING_PANEL_T_2:window.vui.ResDef.detailPage.PRICING_PANEL_T_1,this.bindProgressBar(t),this.pricingArea.bind(this.movieInfoModel),this.topPos=this.pricingPanelTop+window.vui.ResDef.detailPage.OVERVIEW_SPACING,this.pricingArea.elem.style.top=this.topPos+"px",this.progressBar.elem.style.top=this.topPos+2*window.vui.ResDef.detailPage.OVERVIEW_SPACING+"px",this.UHDShowing&&(this.summary.style.top=window.vui.ResDef.detailPage.SUMMARY_UHD_TOP+"px");var i="sd"==window.WIDGETRESOLUTION?230:240;t.description&&(this.summary.innerHTML=window.truncate(t.description[0],i));var s=(this.elem.getBoundingClientRect().y||this.elem.getBoundingClientRect().top)+this.elem.clientHeight-(this.summary.getBoundingClientRect().y||this.summary.getBoundingClientRect().top),n=Math.floor(s/window.vui.ResDef.detailPage.SUMMARY_LINE_HEIGHT);setTimeout(function(){this.summary.style.webkitLineClamp=n}.bind(this),0),this.summary.style.height=n*window.vui.ResDef.detailPage.SUMMARY_LINE_HEIGHT+"px",this.summary.innerHTML=vui._.aStr(t.description)},getAriaLabel:function(){var e=this.secInfo1.innerText+". "+this.secInfo2.innerText+". ";return e+=this.iconInfoBlock.getAriaLabel(),e+=this.UHDFeatures.getAriaLabel(),e+=this.familyplayInfo.getAriaLabel(),e+=this.pricingArea.getAriaLabel()},bindProgressBar:function(e){var t,i,s,n,a,o,r,l=vui.getModel(),u=e.contentId&&e.contentId[0],d=l._checkRental(u);l.ownedMovieCache[u]&&!d||e.containerId&&l.anyOfCidsPurchased(e.containerId)||l.ownedMovieCache[u]&&d&&getTimeDiffString(d)?(e.lengthSeconds&&(t=e.lengthSeconds[0]),o=s=0,o=(i=l.bookmarkCache.check(u))&&t?(n=i.timeSeconds,a=i.resetBookmark,0!==n||a?(s=n,Math.ceil(100*n/parseInt(t,10))):(s=t,100)):0,t&&((r={}).time=s,r.totalTime=t,r.progress=o,this.progressBar.bind(r),this.progressBar.show()),this.pricingArea.hide()):(this.progressBar.hide(),this.pricingArea.show())},_createDiv:function(e,t){var i=document.createElement("div");return i.className=e,t&&t.appendChild(i),i}}),vui.pages.NewMovieDetails=new Class({Extends:vui.NewPage,Implements:vui.ContentActions,name:"vui.pages.NewMovieDetails",init:function(e){vui._.setAriaLabel(""),this.params=e,this.contentId=e.contentId,this.bgImg=new Element("img",{class:"detailPage-bg-image",styles:{width:window.vui.ResDef.SCREEN_WIDTH,height:window.vui.ResDef.SCREEN_HEIGHT}}),this.elem.appendChild(this.bgImg);var t=new Element("div",{class:"contentContainer detailPage-container"});this.elem.appendChild(t);var i=new vui.widgets.LogoBar;t.appendChild(i.elem),this.infoIcons=new vui.widgets.InfoIcons,this.attachChild(this.infoIcons),this.infoIcons.elem.setAttribute("aria-hidden","true"),this.bottomContainer=new vui.widgets.BottomContainer,this.attachChild(this.bottomContainer,t),vui.addHomeHelp(this.elem),this.motionIcons=new vui.widgets.MotionIcons,this.attachChild(this.motionIcons,t),vui.vvPlatform.selectorFollowsMouse||this.motionIcons.hide()},show:function(i,e){vui.getModel().isAlivePosterBaseUrl(),e||(this.moreAnalytics={events:"prodView,event3",product:this.contentId},this.report()),i.isBackAgain=e,i&&(this.savedSelection=i.savedSelection);var s=function(e){var t;(this.movieInfoModel=e)?e.data?(t=this,e.refresh(function(){t.bind(t.movieInfoModel.data,i)})):controller.showPopup("SimpleTextDialog",{title:"Sorry",text:"Content is not available at this time",buttons:[{label:vui.strings.getText("THEATER_ERROR_POPUP_OK_BUTTON")}],callback:function(){1!=controller.goBack()&&controller.goHome(),controller.hidePopup()}}):this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,s),e=null}.bind(this);this.movieInfoModel=vui.getModel().getMovieInfo(this.contentId,s),this.bottomContainer&&this.bottomContainer.movieDetailsTabView&&this.bottomContainer.movieDetailsTabView.shown&&this.bottomContainer.movieDetailsTabView.shown(),this.initTabTracking()},hide:function(){this.bottomContainer.movieDetailsTabView&&this.bottomContainer.movieDetailsTabView.hide(),this.movieInfoModel&&vui.getModel().destroy(this.movieInfoModel),this.refreshNotifier&&(this.refreshNotifier.removeAllAutoRefreshListeners(),delete this.refreshNotifier),delete this.movieInfoModel,null!==this.handleLaunchInterval&&(clearInterval(this.handleLaunchInterval),this.handleLaunchInterval=null)},onAttachParent:function(){},bind:function(e,t){this.data=e;var i,s,n,a=vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode();if(t&&t.launchFromDeeplink&&a)return t.launchFromDeeplink=null,void this.handleLaunchFromDeeplink(t);1==this.movieInfoModel.hasBgImage()?(i=vui.getModel().getBackgroundUrlFromContentId(e.contentId[0]),this.bgImg.src=i||vui.images.BG_Temp):this.bgImg.src=vui.images.BG_Temp,this.bottomContainer.bind(this.movieInfoModel,t),this.savedSelection?vui.restoreSelectorPosition(this,this.savedSelection):((!vui.gConnectionInstance.getUserCollectionEnabled()||vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getHasSeenTip("detail"))&&vui.select(this.bottomContainer),s=(s=(s=(s=this.bottomContainer.descriptionContainer.getAriaLabel()).replace("&amp;","and")).replace("CC","Closed Captions")).replace("N/A","not available"),this.data.description&&(s+=vui._.aStr(this.data.description)),n=this.bottomContainer.actionButtons.actionButtonModel[0].title,(!vui.gConnectionInstance.getUserCollectionEnabled()||vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getHasSeenTip("detail"))&&(vui._.createTempAlert(n+" "+vui._.aStr(this.data.title)+". "+s,this.elem),vui.vvPlatform.muteTTS=!0,setTimeout(function(){vui.vvPlatform.muteTTS=!1},2e3))),this.infoIcons.elem.setAttribute("aria-hidden",""),this.addMovieDetailsRefreshListener();for(var o=0;o<this.bottomContainer.actionButtons.tabChildren.length;o++)this.bottomContainer.actionButtons.tabChildren[o].pageLoaded=!0;this.movieInfoModel&&this.movieInfoModel.data&&this.movieInfoModel.data.walmartCatalogItems&&vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&setTimeout(function(){this.bottomContainer.refreshBind(this.movieInfoModel)}.bind(this),1e3),t&&t.launchFromDeeplink&&(t.launchFromDeeplink=null,this.handleLaunchFromDeeplink(t))},handleLaunchFromDeeplink:function(e){var t=e.contentType||"content",i=this.getVariantByOwnership(this.data),s=vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode();"trailer"===t?s?controller.goToPage("kidsModeWhosWatching",{fromDeepLink:!0,data:{name:"NewMovieDetails",contentId:this.contentId}},!0):this.watchTrailer():"content"===t&&(s?(Number(vui.familyModel.getAgeLimit())||12)>Number(this.data.ageLimit&&this.data.ageLimit[0]||13)&&i?vui.familyModel.enterKidsMode("deeplink",!0,{movie:this.data,variant:i}):controller.goToPage("kidsModeWhosWatching",{fromDeepLink:!0,data:{name:"NewMovieDetails",contentId:this.contentId}},!0):i&&(vui.getModel().directorCsClient&&vui.getModel().directorCsClient.isOpen()?this.onClickPlay({movie:this.data,variant:i}):(alert("CS Connection not up, setInterval and try later"),this.handleLaunchIntervalTimes=0,this.handleLaunchInterval=setInterval(function(){if(16<this.handleLaunchIntervalTimes)return alert("Give up trying to play a movie from the deeplink"),clearInterval(this.handleLaunchInterval),void(this.handleLaunchInterval=null);this.handleLaunchIntervalTimes++,vui.getModel().directorCsClient&&vui.getModel().directorCsClient.isOpen()?(null!==this.handleLaunchInterval&&(clearInterval(this.handleLaunchInterval),this.handleLaunchInterval=null),this.onClickPlay({movie:this.data,variant:i})):alert("CONNECTION NOT OPEN YET, TRY AGAIN..")}.bind(this),400))))},addMovieDetailsRefreshListener:function(){var e=function(){this.movieInfoModel.refreshOffers(),this.bottomContainer.refreshBind(this.movieInfoModel)}.bind(this);this.addAutoRefreshListener([this,e])},save:function(){var e={};return e.contentId=this.contentId,e.descIsHidden=this.bottomContainer.descIsHidden,e.bookState=this.bottomContainer.movieDetailsTabView&&this.bottomContainer.movieDetailsTabView.save(),e.savedSelection=vui.saveSelectorPosition(this),e},fundRefresh:function(){this.infoIcons&&this.infoIcons.updateInnerHtml()},addAutoRefreshListener:function(e){return this.refreshNotifier||(this.refreshNotifier=new vui.RefreshNotifier),this.refreshNotifier.addAutoRefreshListener(e[0],e[1]),!0},removeAutoRefreshListener:function(e){return this.refreshNotifier&&this.refreshNotifier.removeAutoRefreshListener(e),!0},updateDescriptionContainer:function(){this.bottomContainer&&this.bottomContainer.hideDescriptionContainer()},initTabTracking:function(){this.trackingTab={},vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings&&(this.trackingTab["Family Play"]={duration:1e3,cb:vui.clearPlaySettings&&vui.clearPlaySettings.trackInterest}),this.trackingTabTimer={}},trackInterest:function(e){var t=e.isEnter,i=e.title;this.trackingTab&&!this.trackingTabTimer&&this.trackingTab[i]&&!this.trackingTab[i].sent&&(t?this.trackingTabTimer[i]=setTimeout(function(){this.trackingTab[i].cb.call(null,this.data),this.trackingTab[i].sent=!0}.bind(this),this.trackingTab[i].duration):(clearTimeout(this.trackingTabTimer[i]),this.trackingTabTimer[i]=null))},showDescriptionContainer:function(){this.bottomContainer&&this.bottomContainer.showDescriptionContainer()},onChangeTab:function(){this.refreshNotifier&&this.refreshNotifier.removeAllAutoRefreshListeners(),this.addMovieDetailsRefreshListener()},onDirectionLeft:function(){this.onBack()},onBack:function(){0!==controller.baseLayer.goBack()&&controller.goHome()},onLogin:function(){this.movieInfoModel.refresh(function(){this.movieInfoModel.refreshOffers(),this.bottomContainer.refreshBind(this.movieInfoModel)}.bind(this))},onMouseMove:function(){this.motionIcons.show()},report:function(){clearTimeout(this.reportTimer),this.reportTimer=setTimeout(function(){var e;this.data&&(this.moreAnalytics={events:"prodView,event3",product:this.contentId,evars:{contentType:vui._.aStr(this.data.type)}},vui.deepLink&&vui.deepLink.switchingToDeepLinkPage&&("ceres"===vui.vvPlatform.id&&(this.moreAnalytics.evars.campaign="eden"),vui.deepLink.switchingToDeepLinkPage=!1),e=vui.executeOnContainer(this.parentWidget,"getPageTitle_")||"",vui.analytics.trackPage(e,this.moreAnalytics,0))}.bind(this),window.REPORTDELAY)}}),vui.widgets.CoVuduSort=new Class({Extends:vui.widgets.VuduSort,name:"vui.widgets.CoVuduSort",elemClassName:"CoVuduSort",onBack:function(){controller.goBack()},onDirectionLeft:function(){controller.goBack()}}),vui.widgets.CoGridList=new Class({Extends:vui.widgets.MovieGridList,partialRow:!1,settings:{normal:{columns:5,rows:2}},rows:2,getMovieListModel:function(){return function(e){this.currentStart=0,this.params&&0<this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("RETURN DELEGATE FOR COLLECTION GRID LIST:"+JSON.encode(this.params));var t=this.params.listParams;return t.currentStart=this.currentStart,t.callback=e,vui.getModel()[this.params.listFetcher](t)}.bind(this)},init:function(){this.scrollIncrement=this.scrollDelta=this.columns,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.parent(null,this.getMovieListModel())}}),vui.widgets.CoVuduPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.CoGridList,elemClassName:"CoVuduPosterGrid",init:function(){this.el.myTitle=document.createElement("div"),this.el.myTitle.className="CollectionPosterGridTitle",this.elem.appendChild(this.el.myTitle),this.parent.apply(this,arguments)},setTitle:function(e){"string"==typeof e&&(this.el.myTitle.innerHTML=e)},select:function(){this.parent.apply(this,arguments)},onBack:function(){controller.goBack()},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"isSortHidden")?controller.goBack():vui.executeOnContainer(this.parentWidget,"onDirectionLeft")}}),vui.widgets.CoSortGrid=new Class({Extends:vui.widgets.VuduSortGrid,elemClassName:"CoSortGrid",sortClass:vui.widgets.CoVuduSort,gridClass:vui.widgets.CoVuduPosterGrid,init:function(){this.parent.apply(this,arguments)},setGridParams:function(e){this.grid.list.params=e},changeFilters:function(){vui.executeOnContainer(this.parentWidget,"changeFilters")},isSortHidden:function(){return!!this.sort.hideFilter},onDirectionLeft:function(){this.isSortHidden()||this.parent.apply(this,arguments)},omClearAll:function(){var e,t={linkType:"lnk_o",events:"event23"},i="",s=vuiFilters.getCurrentFilterNames(),n="";controller.baseLayer.currentPage&&("movies"===(e=controller.baseLayer.currentPage).activeTab.toLowerCase()?(i="clearall:mymovie",t.linkName="moviefilter"):"tv"===e.activeTab.toLowerCase()&&(i="clearall:mytv",t.linkName="tvfilter")),Object.keys(s).forEach(function(e){n+=e+"="+s[e].toString()+"|"}),n=n.slice(0,-1);var a={};a.filters=i,0<n.length&&(a.sortFilterCombo=n),vui.analytics.trackEvar(a,t)}}),vui.widgets.CollectionbarButton=new Class({Extends:vui.widgets.GenrebarButtonBase,name:"vui.widgets.CollectionbarButton",elemClassName:"CollectionbarButton",setIconSelected:function(){this.el.img.style.borderColor="#999",this.el.gname.style.top=window.vui.ResDef.collection.BAR_GNAME_T+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_S_H+"px",this.iconSelected=!0},setIconDeselected:function(){this.el.img.style.borderColor="transparent",this.el.sign.style.display="none",this.el.gname.style.top=window.vui.ResDef.collection.BAR_GNAME_T+"px",this.el.gname.style.height=window.vui.ResDef.explore.BAR_GNAME_H+"px",this.iconSelected=!1},bind:function(e,t,i){this.data=t,this.ind=e;var s=t.ribbonUrl&&t.ribbonUrl[0]||null;this.el.img.src=s||vui.images.home.default_ribbon,this.el.img.width=this.imgWidth,this.el.img.height=this.imgHeight;var n=vui._.aStr(this.data.title);this.el.gname_txt.innerHTML=n.toUpperCase(),this.desc=n.replace("&"," and "),this.el.gname.style.display="block",i==e?this.setIconSelected():this.setIconDeselected()},onAction:function(){vui.executeOnContainer(this.parentWidget,"CollectionRibbonOnAction",this)},onSelect:function(){vui.executeOnContainer(this.parentWidget,"buttonOnSelect",this.ind)}}),vui.widgets.CollectionbarBlowUp=new Class({Extends:vui.widgets.GenrebarBlowUpBase,name:"vui.widgets.CollectionbarBlowUp",elemClassName:"CollectionbarBlowUp",init:function(){this.parent.apply(this,arguments),this.el.gname.style.top=window.vui.ResDef.collection.BAR_BLOW_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H/2+"px"},show:function(e){this.parent.apply(this,arguments),this.el.sign.style.display="none";var t=e.el.gname_txt.innerHTML||"";this.el.gname_txt.innerHTML=t.toUpperCase(),e.el.img&&e.el.img.src&&(this.el.img.src=e.el.img.src)},setIconSelected:function(){this.el.gname.style.top=window.vui.ResDef.explore.BAR_BTN_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px"},setIconDeselected:function(){this.el.gname.style.top=window.vui.ResDef.collection.BAR_BLOW_SIGN_T+window.vui.ResDef.explore.BAR_BTN_SIGN_H+"px"}}),vui.widgets.Collectionbar=new Class({Extends:vui.widgets.GenrebarBase,name:"vui.widgets.Collectionbar",elemClassName:"Collectionbar",layout:{type:"horizontal"},visibleItemNum:6,buttonClass:vui.widgets.CollectionbarButton,blowUpClass:vui.widgets.CollectionbarBlowUp,barStartAt:window.vui.ResDef.collection.BAR_START_AT,barEndAt:window.vui.ResDef.collection.BAR_START_END,barState:"genre",init:function(){this.parent.apply(this,arguments),this.elem.style.background=""},bind:function(e,t){this.data=e,this.reset(),this.setSelectable(!1);var i=0,s=0;for(var n in this.selectedId=t,this.selected=t,e)this.items[s]=new this.buttonClass,this.items[s].bind(s,e[n],t),i=s*(window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN),this.items[s].elem.style.left=i+"px",this.items[s].item_left=i,this.attachChild(this.items[s],this.el.bar),s++;this.bar_width=i+window.vui.ResDef.explore.BAR_BTN_W+window.vui.ResDef.explore.BAR_BTN_MARGIN,this.el.bar.style.width=this.bar_width+"px",this.el.bar.appendChild(this.blowUp.elem,this.el.barContainer),this.setBarLeftByInd(this.selectedId),this.updateLeftRightBG()},CollectionRibbonOnAction:function(e){var t=e.ind,i=this.selectedId;this.items[i]&&this.items[i].setIconDeselected(),this.items[t]&&(this.items[t].setIconSelected(),this.selectedId=t),vui.executeOnContainer(this.parentWidget,"CollectionRibbonOnAction",e.data)},buttonOnSelect:function(e){this.parent(e),this.enableCategoryTTS&&vui._.setAriaLabel(this.items[e].desc)}}),vui.pages.Collection=new Class({Extends:vui.NewPage,Implements:vui.gridPanelGlue,sortGridClass:vui.widgets.CoSortGrid,elemClassName:"collectionPage",name:"vui.pages.Collection",init:function(e){var t;vui._.setAriaLabel(""),this.dontReadTitle||vui._.createTempAlert(vui._.aStr(e.title),this.elem,!0),e.currentReportText?this.currentReportText=e.currentReportText:this.currentReportText=vui._.findReportParentTitle()||"",this.currentReportText&&0!==this.currentReportText.length||e.parentTitle&&(t=e.parentTitle,this.currentReportText=(t.replace(" - ",":")+":"+(e.elementLabel?e.elementLabel:"")).toLowerCase()),vuiFilters.setCurrentFilterType("collection"),vuiFilters.resetCurrentFilters(),this.params=e;var i=new vui.widgets.LogoBar;this.elem.appendChild(i.elem),this.motionIcons=new vui.widgets.MotionIcons,this.attachChild(this.motionIcons),vui.vvPlatform.selectorFollowsMouse||this.motionIcons.hide(),this.titleText=document.createElement("div"),this.titleText.className="coTitleText",this.elem.appendChild(this.titleText),e&&e.ribbonSearchParam&&(this.bar=new vui.widgets.Collectionbar,this.enableCategoryTTS&&(this.bar.enableCategoryTTS=!0),this.attachChild(this.bar),this.bar.setSelectable(!1),this.bar.hide()),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel)},_showGrid:function(e,t){if(vui.getModel().isAlivePosterBaseUrl(),this.shouldShowFilter=!1,t)t.currentFilterType&&(vuiFilters.setCurrentFilterType(t.currentFilterType),this.sortGrid.sort.refresh()),0<t.scrollOffset&&(e.scrollOffset=t.scrollOffset),t.filters&&(e.listParams.filters=t.filters,vuiFilters.setCurrentFilters(t.filters||{}),this.sortGrid.sort.refreshLabel(),vuiFilters.hasSortAndOrFilter()&&(this.shouldShowFilter=!0));else try{var i=e.listParams.query;i&&"contentSearch"==i._type&&i.type&&("episode"==i.type[0]||"season"==i.type[0]||"series"==i.type[0])?(vuiFilters.setCurrentFilterType("collectionTV"),vuiFilters.resetCurrentFilters(),this.sortGrid.sort.refresh()):i&&"contentSearch"==i._type&&i.studioId&&i.studioId[0]&&(vuiFilters.setCurrentFilterType("collectionNoStudio"),vuiFilters.resetCurrentFilters(),this.sortGrid.sort.refresh())}catch(e){alert("smart filter failed. "+e.message)}try{e.listParams.query.tag[0]&&(this.queryTag="newTrailer")}catch(e){alert("no gridParams query tag found. "+e.message)}this.sortGrid.setGridParams(e),this.sortGrid.show(e),this.sortGrid.firstTimeAnimate=!0},_filterGrid:function(e){this.isFiltering=!0,this.sortGrid.setGridParams(e),this.sortGrid.show(e),this.sortGrid.firstTimeAnimate=!0},setTitle:function(e){this._title=e,this.titleText.innerHTML=vui._.aStr(e)},getTitle:function(){return this._title||""},getReportText:function(){return this._title.replace(" - ",":")||""},posterOnAction:function(t){var i={};Object.keys(t).forEach(function(e){i[e]=t[e]}),i.bonusTag=this.queryTag,vui._.posterOnAction(i)},showSort_:function(){this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue()},hideSort_:function(){this.sortGrid&&this.sortGrid.hideSort()},defaultSort:function(){this.hideSort_(),this.hideSortCue()},disableSort:function(){this.hideSort_(),this.sortGrid&&(this.sortGrid.sort.setSelectable(!1),this.sortGrid.sort.hideFilter=!0),this.hideSortCue(),this._noSort=!0},forceDisableSort:function(){this.disableSort(),this.forceDisabled=!0},enableSort:function(){this.hideSort_(),this.sortGrid&&(this.sortGrid.sort.setSelectable(!0),this.sortGrid.sort.hideFilter=!1),this.showSortCue(),delete this._noSort},showSortCue:function(){this._noSort?this.hideSortCue():(vuiFilters.hasFilter()?(this.sortGrid.sort.selectable=!1,this.el.sortCue.setActive()):this.el.sortCue.setDefault(),this.el.sortCue.show())},hideSortCue:function(){this.el.sortCue.hide(),this.el.sortCue.selectable=!1},showPanel:function(){this.movieInfoPanel.elem.removeClass("offscreen")},hidePanel:function(){this.movieInfoPanel.elem.addClass("offscreen")},onGotListLength:function(e){if(this.isFiltering)delete this.isFiltering;else{if(this.sortGrid.selectable=!0,0==e)return this.motionIcons||(this.homeTop=new vui.widgets.HomeTop,this.attachChild(this.homeTop),this.homeTop.setSelectable(!0),this.homeTop.elem.style.display="block",vui.select(this.homeTop)),void(!vuiFilters.hasSortAndOrFilter()&&!0!==this.shouldShowFilter||!vuiFilters.getCurrentFilterType()||this.forceDisabled?this.disableSort():(this.enableSort(),this.sortGrid.sort.selectable=!1,vuiFilters.hasSortAndOrFilter()&&(this.el.sortCue.selectable=!0,this.sortGrid.selectable=!1,this.sortGrid.grid.selectable=!1)));this.params.state&&this.params.state.savedSelection&&(this.params.savedSelection=this.params.state.savedSelection),this.params.savedSelection&&vui.restoreSelectorPosition(this,this.params.savedSelection),(vuiFilters.hasSortAndOrFilter()||40<e||!0===this.shouldShowFilter)&&vuiFilters.getCurrentFilterType()&&!this.forceDisabled?this.enableSort():this.disableSort(),vui.setSelectorVisible(!0),this._preSelect(this._preSelectedPoster),delete this._preSelectedPoster}},changeFilters:function(){alert("please overwrite changeFilters.")},showFilter:function(){this.filters&&(this.showingFilters=!1)},hideFilter:function(){this.filters&&(this.filters.show(!0),this.showingFilters=!1)},afterShow:function(){},_preSelect:function(e){0<e&&(this.sortGrid.grid.list.selected=e,this.sortGrid.grid.list.children&&this.sortGrid.grid.list.children[e])?vui.select(this.sortGrid.grid.list.children[e]):this.bar&&this.bar.elem&&"none"!==this.bar.elem.style.display||void 0!==e&&vui.select(this.sortGrid)},saveState:function(){var e={},t=vuiFilters.getCurrentFilters()||{};return e.filters=vui.deepCopy(t),e.searchParams=this.params.searchParams,this.sortGrid&&(e.gridState=this.sortGrid.saveState(),e.gridState.currentFilterType=vuiFilters.getCurrentFilterType()),this.lol&&(e.lol=this.lol.getState()),this.bar&&(e.bar=this.bar.getState()),e.savedSelection=vui.saveSelectorPosition(this),e},onBack:function(){vuiFilters.resetCurrentFilters(),controller.goBack()},setTotalCount:function(){},hide:function(){this.parent(),this.sortGrid&&this.sortGrid.hide(),this.movieInfoPanel.hide()},onMouseMove:function(){this.motionIcons.show()}}),vui.pages.DiscoveredViewAll=new Class({Extends:vui.pages.Collection,name:"vui.pages.DiscoveredViewAll",init:function(){this.parent.apply(this,arguments)},show:function(e){this.setTitle("DISCOVER - Collection"),this.sortGrid.grid.setTitle(vui.strings.getText("DISCOVER_TITLE")),this.forceDisableSort();var t={listName:"customList",listFetcher:"getDiscoveriesByGenes",listParams:{selectedGenes:(this.params=e).selectedGenes}};this._showGrid(t,e.gridState)},save:function(){var e=this.saveState();return e.selectedGenes=this.params.selectedGenes,e}}),vui.pages.RecommendedViewAll=new Class({Extends:vui.pages.Collection,name:"vui.pages.RecommendedViewAll",init:function(e){this.parent.apply(this,arguments);var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid),vui.select(this.sortGrid)},show:function(e){this.setTitle("Recommended"),this.sortGrid.grid.setTitle(vui._.aStr(e.title)),this.disableSort();var t={listName:"customList",listFetcher:"getRecommendedByTasteId",listParams:{tasteId:(this.params=e).tasteId}};e.state&&e.state.gridState&&0<e.state.gridState.scrollOffset&&(t.scrollOffset=e.state.gridState.scrollOffset),this._showGrid(t,e.gridState),this._preSelect(e.preSelected)},save:function(){var e={};return e.state=this.saveState(),e.title=this.params.title,e.tasteId=this.params.tasteId,e}}),vui.pages.FilmographyView=new Class({Extends:vui.pages.Collection,name:"vui.pages.FilmographyView",elemClassName:"FilmographyView pageContainer",init:function(){this.parent.apply(this,arguments);var e=new Element("img",{class:"filmographyImage"});this.elem.appendChild(e),this.headingImg=e,this.headingImg.style.display="none";var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid),vui.select(this.sortGrid),vui._.deleteZapApiEvarsFromSessionStore()},show:function(e){e.model&&e.model.personId?(this.hideSort_(),this.params=e,this.setTitle(vui.strings.transformCase("Movie Details - ",!0)+getFullName(e.model)),vui._.setAriaLabel(""),vui._.createTempAlert(getFullName(e.model)+" Filmography",this.elem,!0),e.model.portraitUrl&&(this.headingImg.src=e.model.portraitUrl+"-"+window.vui.ResDef.detailPage.ACTIOR_ITEM_IMAGE_WIDTH+".jpg",this.headingImg.style.display="block"),this.defaultSort(),this.sortGrid.grid.setTitle("Filmography"),gridParams={listName:"filmography",listFetcher:"getFilmography",listParams:{personId:this.params.model.personId}},this._showGrid(gridParams,e.gridState)):alert("no model!")},changeFilters:function(){var e=vuiFilters.getCurrentFilters(),t={listName:"customList",listFetcher:"getFilmography",scrollOffset:0,listParams:{personId:this.params.model.personId[0],filters:e}};this._filterGrid(t)},save:function(){var e=this.saveState();return e.model=this.params.model,e}}),vui.pages.GeneCollectionView=new Class({Extends:vui.pages.Collection,name:"vui.pages.geneCollectionView",init:function(){this.parent.apply(this,arguments);var e=new Element("div",{class:"geneCollectionViewHeader font20"});this.elem.appendChild(e),this.heading=e;var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid),vui.select(this.sortGrid)},show:function(e){e.model&&e.model.geneId?(this.hideSort_(),this.params=e,this.setTitle(""),this.heading.innerHTML="Search By "+this.params.model.category[0]+": "+this.params.model.name[0],this.disableSort(),gridParams={listName:"geneCollection",listFetcher:"getGeneCollection",listParams:{geneId:this.params.model.geneId[0]}},this._showGrid(gridParams,e.gridState)):alert("no model!")},changeFilters:function(){var e=vuiFilters.getCurrentFilters(),t={listName:"geneCollection",listFetcher:"getGeneCollection",scrollOffset:0,listParams:{geneId:this.params.model.geneId[0],filters:e}};this._filterGrid(t)},save:function(){var e=this.saveState();return e.model=this.params.model,e}}),vui.widgets.ShowcaseRow=new Class({Extends:vui.widgets.ListOfListRowBase,name:"vui.widgets.ShowcaseRow",elemClassName:"ShowcaseRow",headerHeight:window.vui.ResDef.recom.HEADER_H,width:window.vui.ResDef.recom.ROW_W,height:window.vui.ResDef.recom.ROW_H,bodyHeight:window.vui.ResDef.recom.BODY_H,marginTop:window.vui.ResDef.recom.MARGIN_T,bindData:function(i,e,t,s){if(this.row_i=i,this.pageId=e,this.Rowdata=t,this.setTitle(t.title),this.ribbonSearchParam=null,t.contentSearchParameters&&"creditList"==t.contentSearchParameters._type){var n=t.contentSearchParameters.creditList[0]&&t.contentSearchParameters.creditList[0].credit,a=[];vui.getModel().portraitBaseUrl;if(0<n.length){for(var o=0;o<n.length;o++)a[o]=this.createCredit(n[o]);var r={};r.content=a,r.searchParams=t.contentSearchParameters,r.totalCount=n.length,r.title=t.title||"",this.bind(r)}}else{t.contentSearchParameters&&"uiEntrySearch"==t.contentSearchParameters._type&&(this.ribbonSearchParam=t.contentSearchParameters),"uiEntrySearch"==t._type&&(this.ribbonSearchParam=t);var l=function(e,t){e?(e.searchParams&&"uiEntrySearch"==e.searchParams._type&&e.content&&e.totalCount>vui._CONS.showcaseRibbonCap&&(this.ribbonSearchParam=null),this.bind(e),this.setViewAll(),this.rowDataPopulated=!0,t||0!=i||vui.executeOnContainer(this.parentWidget,"defaultSelector_")):alert("no vui.m.uiPageCache.getRow")}.bind(this);vui.m.uiPageCache.getRow(e,i,t.contentSearchParameters,l)}},getRibbonSearchParam:function(){return this.ribbonSearchParam}}),vui.widgets.ShowcaseLoL=new Class({Extends:vui.widgets.ListOfListBase,name:"vui.widgets.ShowcaseLoL",elemClassName:"ShowcaseLoL",width:window.vui.ResDef.recom.ROW_W,rowClass:vui.widgets.ShowcaseRow,rowHeight:window.vui.ResDef.recom.ROW_H,visibleHeight:2*window.vui.ResDef.recom.ROW_H,init:function(){this.parent.apply(this,arguments)},bind:function(e,t){this.bindUI(t);for(var i=0;i<t.length;i++)this.rows[i]&&this.rows[i].bindData(i,e,t[i],t.length)},viewAllOnAction_:function(e){this.rows[e].data.searchParams&&(this.rows[e].data.query=this.rows[e].data.searchParams);var t=vui.executeOnContainer(this.parentWidget,"getTitle")||"";this.rows[e].data.parentTitle=t,this.rows[e]&&this.rows[e].Rowdata&&this.rows[e].Rowdata.title&&(this.rows[e].data.title=this.rows[e].Rowdata.title),this.parentWidget.currentReportText&&(this.rows[e].data.currentReportText=this.parentWidget.currentReportText),controller.goToPage("Showcase",this.rows[e].data)},hasFirstRowPopulated:function(){return!(!this.rows[0]||!0!==this.rows[0].rowDataPopulated)},onBack:function(){controller.goBack()},onDirectionLeft:function(){controller.goBack()}}),vui.pages.Showcase=new Class({Extends:vui.pages.Collection,name:"vui.pages.Showcase",init:function(e){this.uiPageBGImage=document.createElement("img"),this.uiPageBGImage.className="uiPageBGImage",this.uiPageBGImage.style.display="none",this.elem.appendChild(this.uiPageBGImage),this.image=document.createElement("img"),this.image.className="customHeadImage",this.image.style.display="none",this.elem.appendChild(this.image),this.enableCategoryTTS=!0,this.dontReadTitle=!0,this.parent.apply(this,arguments),this.el.container=document.createElement("div"),this.el.container.className="ShowcaseContainer",this.elem.appendChild(this.el.container);var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.el.container.appendChild(t.elem),this._firstCreated=!0,this._states={},this._states.show=!0,this._states.default=!0},show:function(e){!(this.params=e).query||"uiEntrySearch"!=e.query._type||e.totalCount>vui._CONS.showcaseRibbonCap||(this._ribbonSearchParam=e.query),this.selectedRibbonInd=e.selectedRibbonInd||0,this.params.state&&(this.params.state.ribbonSearchParam&&(this.params.ribbonSearchParam=this.params.state.ribbonSearchParam),this.params.state.bar&&(this.selectedRibbonInd=this.params.state.bar.iconSelected||0)),e.ribbonSearchParam&&this.initRibbon(e.ribbonSearchParam),e&&e.pageId?(this._displayLoL(e),e.ribbonSearchParam&&this.reportShowcase()):(this._displayGrid(e),this.reportCollection()),this._deleteState("show")},reportShowcase:function(){var e={evars:{channel:"promotions"}};vui.analytics.trackPage("showcase page : multiple list",e)},reportCollection:function(){var e="showcase page : single list:collection",t="";"customList"==this.params.listType&&(t=vui._.aStr(this.params.title));var i={};t?(t=e+":"+vui._.toLower(t),i.props={collectionProp:t},i.evars={browseType:t}):i.evars={browseType:e},vui.analytics.trackPage(e,i)},getRibbonSearchParam:function(){return this._ribbonSearchParam||null},_bindLoL:function(e,t){this._showLoLUI(),this.lol.reset(),this.lol.bind(e,t)},_displayLoL:function(t){this.params.pageId=t.pageId;var e=function(e){e||controller.goBack(),t.parentTitle&&this.setTitle(t.parentTitle),e&&e.parameters&&e.parameters.listParameters&&(e.backgroundUrl&&this._setUiPageBG(e.backgroundUrl),this._bindLoL(this.params.pageId,e.parameters.listParameters),this.lol.hasFirstRowPopulated()&&this.defaultSelector_())}.bind(this);vui.m.uiPageCache.uiPageSearch(this.params.pageId,e)},_setUiPageBG:function(e){this.bar&&"block"===this.bar.elem.style.display||(this.uiPageBGImage.src=vui.addDashSuffixToFileName(e,vui.ResDef.SCREEN_WIDTH),this.uiPageBGImage.style.display="block",this.uiPageBGImage.onerror=function(){this.uiPageBGImage.style.display="none"}.bind(this))},_showLoLUI:function(){this.sortGrid&&(this.sortGrid.hide(),this.sortGrid.setSelectable(!1)),this.lol||(this.lol=new vui.widgets.ShowcaseLoL,this.attachChild(this.lol,this.el.container)),this.movieInfoPanel.elem.removeClass("gridView"),this.hideSortCue(),this.lol.elem.style.display="block",this.lol.setSelectable(!0)},_showGridUI:function(){this.lol&&(this.lol.hide(),this.lol.setSelectable(!1)),this.sortGrid||(this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid,this.el.container),vui.select(this.sortGrid)),this.movieInfoPanel.elem.addClass("gridView"),this.sortGrid.elem.style.display="block",this.sortGrid.setSelectable(!0)},defaultSelector_:function(){this.params.state&&this.params.state.lol&&this.lol&&(this.lol.restoreState(this.params.state.lol),vui.select(this.lol)),this._firstCreated&&(vui.select(this.lol),delete this._firstCreated),this._deleteState("default"),this.bar&&!0!==this.bar.disableRibbon&&this.bar.setSelectable(!0)},_deleteState:function(e){delete this._states[e];var t=!1;for(var i in this._states){t=!0;break}t||delete this.params.state},_displayGrid:function(e){var t,i;e.query?(this._showGridUI(),e.headerUrl&&!e.ribbonSearchParam?(this.image.src=vui.addDashSuffixToFileName(e.headerUrl,vui.ResDef.SCREEN_WIDTH),this.image.style.display="block",this.image.onerror=function(){this.image.style.display="none"}.bind(this)):this.image.style.display="none",e.backgroundUrl&&this._setUiPageBG(e.backgroundUrl),"uiEntrySearch"==e.query._type?this.forceDisableSort():this.defaultSort(),this.params=e,vui._.aStr(e.title),e.parentTitle&&e.parentTitle,this.setTitle(e.parentTitle),this.sortGrid.grid.setTitle(vui._.aStr(e.title)),e.query.followup?vui._.addTotalCount(e.query.followup):e.query.followup=["totalCount","uxPromoTags"],t={listName:this.params.listType,listFetcher:"getCustomList",scrollOffset:0,listParams:{query:"creditList"===this.params.query._type?this.params:this.params.query}},i=e.state&&e.state.gridState||null,this._showGrid(t,i),this._firstCreated&&(e.preSelected&&(this._preSelectedPoster=e.preSelected),delete this._firstCreated)):alert("no query for grid","error")},changeFilters:function(){var e=vuiFilters.getCurrentFilters();vui._.addTotalCount(this.params.query.followup);var t={listName:this.params.listType,listFetcher:"getCustomList",scrollOffset:0,listParams:{query:this.params.query,filters:e}};this._filterGrid(t)},CollectionRibbonOnAction:function(e){var t=e.parameters&&e.parameters[0]||null;if(t&&t.contentSearch){var i={listType:"customList"};i.title=t.title,i.query=t.contentSearch[0],i.ribbonSearchParam=this.params.ribbonSearchParam,i.selectedRibbonInd=this.params.selectedRibbonInd,this._displayGrid(i)}else if(t.name&&t.name[0]){var s=t.name[0];try{var n=t[s][0].pageId[0];this._displayLoL({pageId:n})}catch(e){return void alert("no pageId!")}}var a="ad:"+vui._.toLower(vui._.aStr(e.title));vui.analytics.trackEvar({promoType:vui._.toLower(a)},{events:"event19"})},initRibbon:function(e){var t=function(e){e?e.realTotalCount<=vui._CONS.showcaseRibbonCap?(this.bar.bind(e.data,this.selectedRibbonInd),this.bar.setSelectable(!0),this.bar.elem.style.display="block",this.uiPageBGImage.style.display="none"):(alert("number of ribbon exceeded "+vui._CONS.showcaseRibbonCap),this.bar.disableRibbon=!0,this.bar.setSelectable(!1),this.bar.elem.style.display="none"):alert("no model.data","error")}.bind(this);vui.m.uiEntryRibbonCache.uiEntrySearch(e,t)},save:function(){var e={};return e.state=this.saveState(),e.pageId=this.params.pageId,e.query=this.params.query,e.title=this.params.title,e.parentTitle=this.params.parentTitle,e.headerUrl=this.params.headerUrl||null,e.ribbonSearchParam=this.params.ribbonSearchParam,e}}),vui.pages.PersonalizedShowcase=new Class({Extends:vui.pages.Collection,name:"vui.pages.PersonalizedShowcase",init:function(e){this.uiPageBGImage=document.createElement("img"),this.uiPageBGImage.className="uiPageBGImage",this.uiPageBGImage.style.display="none",this.elem.appendChild(this.uiPageBGImage),this.image=document.createElement("img"),this.image.className="customHeadImage",this.image.style.display="none",this.elem.appendChild(this.image),this.parent.apply(this,arguments),this.setTitle(e.parentTitle),this.el.container=document.createElement("div"),this.el.container.className="PersonalizedShowcaseContainer",this.elem.appendChild(this.el.container);var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.el.container.appendChild(t.elem),this._firstCreated=!0,this._states={},this._states.show=!0,this._states.default=!0,this.currentReportText&&0!==this.currentReportText.length||(this.currentReportText=e.currentReportText)},show:function(e){(this.params=e)&&"page"===vui._.aStr(e.elementType)?(this._displayLoL(e),e.ribbonSearchParam&&this.reportShowcase()):(this._displayGrid(e),this.reportCollection()),this._deleteState("show")},reportShowcase:function(){var e={evars:{channel:"promotions"}};vui.analytics.trackPage("showcase page : multiple list",e)},reportCollection:function(){var e="showcase page : single list:collection",t="";"customList"==this.params.listType&&(t=vui._.aStr(this.params.title));var i={};t?(t=e+":"+vui._.toLower(t),i.props={collectionProp:t},i.evars={browseType:t}):i.evars={browseType:e},this.params.uxRowTrackingId&&(i.evars.rowId=this.params.uxRowTrackingId+vui.analytics.zapApiViewAllText+(this.params.uxRowIsPersonal?vui.analytics.zapApiIsPersonalText:""),i.events="event207"),vui.analytics.trackPage(e,i)},getRibbonSearchParam:function(){return this._ribbonSearchParam||null},_bindLoL:function(e,t){this._showLoLUI(),this.lol.reset(),this.lol.bind(t),vui.select(this.lol),this.lol.scrollTimeoutTimer=setTimeout(function(){var e=this.lol._getVisibleRowIndexesForContainer(this.el.container.className);this.lol.trackVisibleRows(e),clearTimeout(this.lol.scrollTimeoutTimer)}.bind(this),2e3)},_displayLoL:function(e){var t=vui._.aStr(e.uxElementId),i=function(e){e||controller.goBack(),e.backgroundImageUrl&&this._setUiPageBG(e.backgroundImageUrl),this._bindLoL(t,e.data),this.defaultSelector_(),vui.analytics.trackEvent("event206",{evars:{pageId:t}}),vui.getModel().userSessionStore.addToStore("zap-api-page-id",t)}.bind(this);vui.m.personalizedCache.getUxPage(t,i)},onGotListLength:function(e){var t;this.parent(e),this.sortGrid&&this.sortGrid.grid&&this.sortGrid.grid.list&&((t=this.sortGrid.grid.list&&this.sortGrid.grid.list.movieListModel)&&t.backgroundUrlPath&&this._setUiPageBG(t.backgroundUrlPath))},_setUiPageBG:function(e){this.bar&&"block"===this.bar.elem.style.display||(this.uiPageBGImage.src=e,this.uiPageBGImage.style.display="block")},_showLoLUI:function(){this.sortGrid&&(this.sortGrid.hide(),this.sortGrid.setSelectable(!1)),this.lol||(this.lol=new vui.widgets.PersonalizedLoL(this.params),this.lol.onBack=null,this.attachChild(this.lol,this.el.container),this.lol.onDirectionLeft=function(){controller.goBack()}),this.movieInfoPanel.elem.removeClass("gridView"),this.hideSortCue(),this.lol.elem.style.display="block",this.lol.setSelectable(!0)},defaultSelector_:function(){this.params.state&&this.params.state.lol&&this.lol&&(this.lol.restoreState(this.params.state.lol),vui.select(this.lol)),this._firstCreated&&(vui.select(this.lol),delete this._firstCreated),this._deleteState("default"),this.bar&&!0!==this.bar.disableRibbon&&this.bar.setSelectable(!0)},_deleteState:function(e){delete this._states[e];var t=!1;for(var i in this._states){t=!0;break}t||delete this.params.state},_displayGrid:function(e){this.lol&&(this.lol.reset(),this.lol.elem.style.display="none",this.lol.setSelectable(!1)),e.backgroundUrlPath&&this._setUiPageBG(e.backgroundUrlPath),this.sortGrid||(this.sortGrid=new vui.widgets.PersonalizedSortGrid,this.sortGrid.elem.className="PersonalizedShowcaseSortGrid",this.sortGrid.parentWidgetTitle="personalizedShowcase",this.attachChild(this.sortGrid,this.el.container),this.sortGrid.setSelectable(!0)),this.movieInfoPanel.elem.addClass("gridView"),this.sortGrid.elem.style.display="block",e.state&&e.state.filters&&(e.filters=e.state.filters),vuiFilters.hasSortAndOrFilter()||e.state&&e.state.filters?(this.shouldShowFilter=!0,this.resetFiltersOnFilterType=!1):(delete this.shouldShowFilter,this.resetFiltersOnFilterType=!0),this._firstCreated&&(e.preSelected&&(this._preSelectedPoster=e.preSelected),delete this._firstCreated),this.sortGrid.setList(e),this.sortGrid.params.state=null,this.sortGrid.params.scrollOffset=0},_filterGrid:function(e){this.isFiltering=!0;var t=this.sortGrid.params;t.filters=e,this.sortGrid.setList(t),this.sortGrid.firstTimeAnimate=!0},changeFilters:function(){var e=vuiFilters.getCurrentFilters();this._filterGrid(e)},save:function(){var e={};return(e=this.params).state=this.saveState(),e.state.gridState&&e.state.gridState.scrollOffset&&(e.state.scrollOffset=e.state.gridState.scrollOffset),e},onGotFilterType:function(e){vuiFilters.setCurrentFilterType(e),this.resetFiltersOnFilterType&&!this.isFiltering&&vuiFilters.resetCurrentFilters(),this.sortGrid.sort.refresh()}}),vui.Xofycollections=new Class({collections:{},initialize:function(){this.collections={}},getSelections:function(e){return this.collections.hasOwnProperty(e)||(this.collections[e]=[]),this.collections[e]},addContent:function(e,t){this.collections[e].push(t)},removeContent:function(e,t){this.collections[e]=this.collections[e].filter(function(e){return e.contentId!=t})},clearCollection:function(e){delete this.collections[e]},clearAll:function(){this.collections={}},isInCollection:function(e,t){return 0<this.collections[e].filter(function(e){return e.contentId===t}).length}}),vui.pages.XofYShowcase=new Class({Extends:vui.pages.Collection,Implements:vui.ContentActions,name:"vui.pages.XofYShowcase",elemClassName:"XofYShowcasePage pageContainer",init:function(s){this.parent.apply(this,arguments),s.tokenOffer?this.getTokenInfo(s,this.continueIntialization.bind(this)):(vui.m.getEntryInfo({parameters:[{}],uiEntryId:s.uiEntryId},function(e){var t=e.data,i=t.backgroundUrlPath?vui.addDashSuffixToFileName(vui._.aStr(vui.m.getUiEntryImageUrl(vui._.aStr(t.backgroundUrlPath))),vui.ResDef.SCREEN_WIDTH):"";!i&&t.backgroundUrl&&(i=t.backgroundUrl),s={listType:"customList",title:i?"":vui._.aStr(t.title),headerUrl:vui.addDashSuffixToFileName(vui._.aStr(vui.m.getUiEntryImageUrl(t.posterUrlPath)),window.vui.ResDef.mm.CART_POSTER_W),description:t.description,tokenOffer:t.parameters[0].tokenOffer,placardUrl:vui._.aStr(t.placardUrlPath),backgroundUrl:i},this.getTokenInfo(s,this.continueIntialization.bind(this))}.bind(this)),createImg({src:vui.images.BG_Temp}))},continueIntialization:function(e){e.backgroundUrl&&!this.uiPageBGImage&&this.showBackgroundImage(e),this.offerIds=e.offerIds||[],this.ptoTokenCount=e.ptoTokenCount,this.collectionId=e.collectionId,this.xofycollection=vui.getModel().xofycollections;var t,i,s,n={selections:this.xofycollection.getSelections(this.collectionId),numVisible:this.ptoTokenCount,childWidgetClass:vui.widgets.GridPoster,collectionId:this.collectionId};e.backgroundUrl||this.showcaseHeaderContainer||((t=document.createElement("div")).className="XofYShowcaseHeaderContainer",(i=document.createElement("div")).className="XofYshowcaseTitle",i.innerText=e.title,t.appendChild(i),(s=document.createElement("div")).className="XofYshowcasePricing",s.innerText=vui._.aStr(e.description)||"Choose "+this.ptoTokenCount+" films for $"+e.lowestPrice+".",t.appendChild(s),this.elem.appendChild(t),this.showcaseHeaderContainer=t),this.selectedQuality="sd",this.xofycart=new vui.widgets.XofyCart(n,this.onClickBuy.bind(this)),this.attachChild(this.xofycart),this.el.container=document.createElement("div"),this.el.container.className="XofYShowcaseContainer",this.elem.appendChild(this.el.container);var a=new vui.widgets.sortCue;(this.el.sortCue=a).elem.className="CoVuduSortCue clickable",this.attachChild(a),this.el.container.appendChild(a.elem),this._firstCreated=!0,this._states={},this._states.show=!0,this._states.default=!0,this.params=e,this._displayGrid(e),this.forceDisableSort(),this.reportCollection(),this._deleteState("show"),this.xofycollection.getSelections(this.collectionId).length==this.ptoTokenCount&&vui.select(this.xofycart.children[this.xofycart.children.length-1]),document.getElementById("infoPanelPromoImg3").style.display="none"},showBackgroundImage:function(e){this.uiPageBGImage&&"block"===this.uiPageBGImage.style.display||(this.uiPageBGImage=document.createElement("img"),this.uiPageBGImage.className="uiPageBGImage",this.uiPageBGImage.src=e.backgroundUrl,this.uiPageBGImage.style.display="block",this.uiPageBGImage.onerror=function(){this.uiPageBGImage.style.display="none"}.bind(this),this.elem.appendChild(this.uiPageBGImage))},show:function(){},getTokenInfo:function(l,u){var s,e;s=function(e){var t,i,s=e.tokenOffer.map(function(e){return e.fundPolicy[0].collectionId[0]}).reduce(function(e,t){return e===t?e:null}),n=e.tokenOffer.map(function(e){return vui._.aStr(e.ptoTokenCount)}).reduce(function(e,t){return e===t?e:null}),a=new Date(e.tokenOffer.map(function(e){return vui._.aStr(e.startTime)}).reduce(function(e,t){return e===t?e:null})),o=new Date(e.tokenOffer.map(function(e){return vui._.aStr(e.stopTime)}).reduce(function(e,t){return e===t?e:null})),r=(t=e.tokenOffer).reduce(function(e,t){var i=parseFloat(vui._.aStr(t.price));return e<i?e:i},parseFloat(vui._.aStr(t[0].price)));!function(e,t,i,s,n){if(null!==e)if(null!==t)if(null!==i)if(null!==s)if(null!==n){if(!(s<i))return 1;alert("Start Time greater than Stop time")}else alert("lowestPrice do not match");else alert("stopTimes do not match");else alert("startTimes do not match");else alert("ptoTokenCount do not match");else alert("Collection Ids for tokens do not match")}(s,n,a,o,r)?(i={title:"Mix and Match",text:"Sorry. This Mix and Match offer has expired",data:{headerUrl:l.headerUrl},buttons:[{label:vui.strings.transformCase("Cancel"),icon:"cancel_icon",action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"3"}],callback:function(){controller.hidePopup(),controller.goBack()}},controller.showPopup("ChoicesGenericDialog",i)):(l.query={_type:"contentSearch",collectionId:s},l.collectionId=s,l.tokenOfferId=l.tokenOffer[0].tokenOfferId,l.ptoTokenCount=n,l.lowestPrice=r,l.tokenOffer=e.tokenOffer,u(l))},e={_type:"tokenOfferSearch",tokenOfferId:l.tokenOffer[0].tokenOfferId,count:100,released:!0,deleted:!1,followup:"fundPolicy"},vui.getModel().doQuery(e,function(e,t,i){i?s(i):alert("Error doing token offer search")})},onClickBuy:function(){var e=d(this.params,this.selectedQuality);this.tokenOfferId=vui._.aStr(e[0].tokenOfferId);var l=vui._.aStr(e[0].ptoTokenCount),u={rating:"ALL",value:0},a=this.xofycollection.getSelections(this.collectionId);function d(e,t){return e.tokenOffer.filter(function(e){return t===vui._.aStr(e.fundPolicy[0].maxVideoQuality)})}function r(e){var t=e.data&&e.data.variants||{},i=e.data.ownerships&&e.data.ownerships[this.selectedQuality]&&e.data.ownerships[this.selectedQuality].isOwned;if(i&&vui.m.qualMap[this.selectedQuality]<vui.m.qualMap[this.findHighestQualOffer()]){var s={title:vui.strings.getText("MM_ALREADY_OWN_TITLE_IN_QUALITY",this.selectedQuality.toUpperCase()),posterUrl:vui._.aStr(e.data.posterUrl),text:vui._.aStr(e.data.title)+"<br><br>"+vui.strings.getText("MM_CHOOSE_ANOTHER_QUALITY")};this.showErrorDialog(s)}else if(i){alert("XofY: Title already owned "+vui._.aStr(e.data.title),"notice");s={title:vui.strings.getText("MM_ALREADY_OWN_TITLE_IN_QUALITY",this.selectedQuality.toUpperCase()),posterUrl:vui._.aStr(e.data.posterUrl),text:vui._.aStr(e.data.title)+"<br><br>"+vui.strings.getText("MM_SELECT_DIFF_TITLE")};this.showErrorDialog(s)}else{var n,a,o,r=function(e){if(e)for(var t=0,i=e.length;t<i;t++){if("pto"===vui._.aStr(e[t].offerType))return vui._.aStr(e[t].offerId)}return null}(t[this.selectedQuality]&&t[this.selectedQuality].offers&&t[this.selectedQuality].offers[0].offer);if(r&&!this.offerIds.contains(r))this.offerIds.push(r);else if(!r){alert("No offer id found for :"+vui._.aStr(e.data.title));s={title:vui.strings.getText("MM_NO_OFFER_FOUND",this.selectedQuality.toUpperCase()),posterUrl:vui._.aStr(e.data.posterUrl),text:vui._.aStr(e.data.title)+"<br><br>"+vui.strings.getText("MM_SELECT_DIFF_TITLE")};return void this.showErrorDialog(s)}n=window.getFriendlyToGeneric(window.getFriendlyRating(vui._.aStr(e.data.contentRating))),u=(a={ALL:0,G:1,FAM:2,PG:3,"PG-13":4,R:5,NR:6})[n]>u.value?{rating:n,value:a[n]}:u,this.offerIds.length===parseInt(l)?(o=d(this.params,this.selectedQuality),this.tokenOfferId=vui._.aStr(o[0].tokenOfferId),h.call(this,this.offerIds,u,function(){controller.showPopup("AnimationWaitDialog"),getXofYTokenPurchasePlan(this.offerIds,this.tokenOfferId,c.bind(this))}.bind(this))):console.info("ids didnt match bundle size. this.offerIds: "+JSON.stringify(this.offerIds))}}var c=function(e,t){var i,s,n;console.info("PurchasePlan Token Check status",e,t),"ok"==e?(console.info("PurchasePlan Token Check SUCCESSFUL"),i={selections:a,numVisible:a.length,childWidgetClass:vui.widgets.GridPoster,collectionId:this.collectionId},s=new vui.widgets.XofyCart(i,null,!0),n={title:vui.strings.getText("CONFIRM_PURCHASE"),purchasePlan:t,callback:function(e){"confirm"===e?purchaseXofYWithToken(this.offerIds,this.tokenOfferId,t,function(e,t){var i,s,n;console.info("In Purchase Callback"),"ok"==e?(i={selections:a,numVisible:a.length,childWidgetClass:vui.widgets.GridPoster,collectionId:this.collectionId},s=new vui.widgets.XofyCart(i,null,!0),n={title:vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_THANK_YOU"),text:vui.strings.getText("MM_ENJOY_BUNDLE"),cartBanner:s,view:"success",layout:{type:"horizontal"}},controller.showPopup("XofYDialog",n),this.trackPurchase(a,this.selectedQuality,t),console.info("In Purchase Callback SUCCESSFUL"),vui.Model.PopulateOwnedMovieCache(function(){alert("REFRESH MOVIE AFTER PURCHASE OF MM")}),vui.fund.refresh(),vui.myOffers.refresh(),this.offerIds=[],this.xofycollection.clearCollection(this.collectionId),this.xofycart.updateSelections(this.xofycollection.getSelections(this.collectionId))):(n="alreadyPurchased"==e?{title:vui.strings.getText("MM_MIX_AND_MATCH_HEADER"),text:vui.strings.getText("MM_ERROR_ALREADY_OWN")}:{title:vui.strings.getText("MM_MIX_AND_MATCH_HEADER"),text:vui.strings.getText("MM_ERROR_PROCESSING")},this.showErrorDialog(n))}.bind(this)):controller.hidePopup()}.bind(this),cartBanner:s,quality:this.selectedQuality,view:"confirm",layout:{type:"horizontal"}},controller.showPopup("XofYDialog",n)):(n={title:vui.strings.getText("MM_MIX_AND_MATCH_HEADER"),text:vui.strings.getText("MM_ERROR_ACCOUNT_PAYMENT")},this.showErrorDialog(n))},h=function(e,t,i){var s;vui.getModel().parentalControls.isRestricted("purchase",t.rating)?(s=vui.strings.getText("PURCHASE_DIALOG_PIN_REQUIRED_PURCHASE"),vui.analytics.showDialog("Transaction ParentalControls Dialog"),vui.passcodePrompt({promptText:s,fullScreenDialog:!0,callback:function(e){"correct"===e?i():controller.hidePopup()}.bind(this)})):i()};a.length===parseInt(l)&&function(e,t){var i=vui.m.qualityArray,s={};e.tokenOffer.every(function(e){var t=vui._.aStr(e.fundPolicy[0].maxVideoQuality),i=vui._.aStr(e.price);return s[t]=i,!0});var n=i.filter(function(e){return s[e]}).map(function(e){return{label:vui.strings.getTransformedText("MM_OWN_PRICE")+s[e],action:e}});var a={selections:t,numVisible:t.length,childWidgetClass:vui.widgets.GridPoster,collectionId:this.collectionId},o=new vui.widgets.XofyCart(a,null,!0),e={title:vui.strings.getText("MM_YOUR_BUNDLE"),text:vui.strings.getText("MM_SELECT_QUALITY"),data:t,buttons:n,callback:function(e){"cancel"!==e&&(this.selectedQuality=e),this.offerIds=[],t.forEach(function(e){vui.getModel().getMovieInfo(e.contentId,r.bind(this))}.bind(this))}.bind(this),cartBanner:o,view:"offers",layout:{type:"vertical"}};controller.showPopup("XofYDialog",e)}.call(this,this.params,a)},posterOnAction:function(e){this.showDialog(e)},findHighestQualOffer:function(){for(var e="sd",t=0;t<this.params.tokenOffer.length;t++){var i=this.params.tokenOffer[t],s=i&&vui._.aStr(i.fundPolicy),n=s&&vui._.aStr(s.maxVideoQuality);n&&vui.m.qualMap[n]>vui.m.qualMap[e]&&(e=n)}return e},showDialog:function(t){var i=vui._.aStr(t.contentId),e=this.xofycollection.getSelections(this.collectionId).length,s=vui.getModel().getPosterUrl(t,window.vui.ResDef.xOfY.CART_POSTER_W),n=this.findHighestQualOffer(),a=t.containerId&&vui.m.anyOfCidsPurchased(t.containerId)&&vui.m.anyOfCidsPurchased(t.containerId).owned,o=vui.m.ownedMovieCache[i]&&vui.m.ownedMovieCache[i].owned||a,r=function(e){switch(e){case"add":this.doActivationOrCommand(function(e){var t={contentId:i,posterUrl:s,title:vui._.aStr(e.title)};this.xofycollection.addContent(this.collectionId,t),this.xofycart.updateSelections(this.xofycollection.getSelections(this.collectionId)),this.xofycollection.getSelections(this.collectionId).length===parseInt(this.ptoTokenCount)?vui.select(this.xofycart.children[this.xofycart.children.length-1]):this.sortGrid.grid.bposter.bind(e),this.trackAdd(i)}.bind(this,t));break;case"remove":this.xofycollection.removeContent(this.collectionId,i),this.trackRemove(i),this.sortGrid.grid.bposter.bind(t),this.xofycart.updateSelections(this.xofycollection.getSelections(this.collectionId));break;case"details":controller.goToPage("NewMovieDetails",{contentId:i})}vui.account.getAccountId()&&(controller.hidePopup(),vui.select(this.lol))}.bind(this),l={label:vui.strings.transformCase("Add"),action:"add",size:"3"},u={label:vui.strings.transformCase("Remove"),action:"remove",size:"3"},d={label:vui.strings.transformCase("See Details"),action:"details",size:"3"},c={label:vui.strings.transformCase("Cancel"),action:"cancel",defaultButtonClass:"btn_bg_cancel_default",size:"3"},h={title:vui.strings.getText("MM_ADD_TO_BUNDLE"),text:vui._.aStr(t.title),data:t,buttons:[l,d,c],callback:r};this.xofycollection.isInCollection(this.collectionId,i)?(h.title=vui.strings.getText("MM_ALREADY_ADDED_TITLE"),h.buttons[0]=u):o&&vui.m.qualMap[o]>=vui.m.qualMap[n]?(h.title=vui.strings.getText("MM_ALREADY_OWN_TITLE"),h.buttons=[d,c],h.focus="CANCEL",h.lol=this.lol):e===parseInt(this.ptoTokenCount)?(h.title=vui.strings.getText("MM_CART_FULL"),h.text="",h.buttons=[d,c]):o&&(h.title=vui.strings.getText("MM_ALREADY_OWN_TITLE_IN_QUALITY",o.toUpperCase()),h.text=vui.strings.getText("MM_BUY_HIGHER_QUALITY",n.toUpperCase())),controller.showPopup("ChoicesGenericDialog",h)},reportCollection:function(){var e="xofyshowcase page : single list:collection",t="";"customList"==this.params.listType&&(t=vui._.aStr(this.params.title));var i={};t?(t=e+":"+vui._.toLower(t),i.props={collectionProp:t},i.evars={browseType:t}):i.evars={browseType:e},vui.analytics.trackPage(e,i)},trackAdd:function(e){vui.analytics.trackEvent("scAdd,event81",{product:e,linkType:"lnk_o",linkName:"X of Y Bundle"})},trackRemove:function(e){vui.analytics.trackEvent("scRemove,event82",{product:e,linkType:"lnk_o",linkName:"X of Y Bundle"})},trackCheckout:function(){vui.analytics.trackEvent("scCheckout",{linkType:"lnk_o",linkName:"scCheckout"})},trackPurchase:function(e,t,i){var s="X of Y Bundle",n=(i&&i[0].needRealMoneyAmount&&i[0].needRealMoneyAmount[0]||0)/this.ptoTokenCount,a={product:e.reduce(function(e,t,i){return 0===i?t.contentId+";1;"+n+",":e+";"+t.contentId+";1;"+n+","},""),linkType:"lnk_o",linkName:s,events:"purchase"};vui.analytics.trackPage(s,a,0)},showErrorDialog:function(e){var t=vui.images.genericOverlay,i={title:e.title,poster:t,text:e.text,dialogBoxClassName:"mmError",buttons:[{name:"done",style:"blue",label:vui.strings.getText("PURCHASE_DIALOG_OK_BUTTON")}],callback:function(){controller.hidePopup()}};controller.showPopup("PosterTextDialog",i)},_showLoLUI:function(){this.sortGrid&&(this.sortGrid.hide(),this.sortGrid.setSelectable(!1)),this.lol||(this.lol=new vui.widgets.ShowcaseLoL,this.attachChild(this.lol,this.el.container)),this.hideSortCue(),this.lol.elem.style.display="block",this.lol.setSelectable(!0)},_showGridUI:function(){this.sortGrid||(this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid,this.el.container),vui.select(this.sortGrid)),this.sortGrid.elem.style.display="block",this.sortGrid.setSelectable(!0)},defaultSelector_:function(){this.params.state&&this.params.state.lol&&this.lol&&(this.lol.restoreState(this.params.state.lol),vui.select(this.lol)),this._firstCreated&&(vui.select(this.lol),delete this._firstCreated),this._deleteState("default"),this.bar&&!0!==this.bar.disableRibbon&&this.bar.setSelectable(!0)},_deleteState:function(e){delete this._states[e];var t=!1;for(var i in this._states){t=!0;break}t||delete this.params.state},_displayGrid:function(e){var t,i,s;e.query?(this._showGridUI(),(this.params=e).parentTitle&&(t=e.parentTitle,this.setTitle(t),this.sortGrid.grid.setTitle(t)),e.query.followup?vui._.addTotalCount(e.query.followup):e.query.followup=["totalCount","uxPromoTags"],i={listName:this.params.listType,listFetcher:"getCustomList",scrollOffset:0,listParams:{query:"creditList"===this.params.query._type?this.params:this.params.query}},s=e.state&&e.state.gridState||null,this._showGrid(i,s),this._firstCreated&&(e.preSelected&&(this._preSelectedPoster=e.preSelected),delete this._firstCreated)):alert("no query for grid","error")},save:function(){var e=this.params;return e.state=this.saveState(),e.pageId=this.params.pageId,e.query=this.params.query,e}}),window.TEST_LAYOUT||(vui.widgets.RatingSelector=new Class({Extends:vui.widgets.StickyLeafContainer,currentRating:0,selectorType:"none",init:function(e,t){this.currentRating=2*t},onSelect:function(){vui._.setAriaLabel(this.getRating().toString())},onAttachParent:function(){this.bind()},onDirectionLeft:function(){0<this.currentRating&&--this.currentRating,this.bind()},onDirectionRight:function(){this.currentRating<10&&(this.currentRating+=1),this.bind()},onClick:function(e){var t=window.vui.ResDef.overlays.RATE_DIALOGUE_LEFT+this.currentRating*window.vui.ResDef.overlays.RATE_DIALOGUE_CLICK_SPACE;e.event.x>t?this.onDirectionRight():this.onDirectionLeft()},bind:function(){vui._.setAriaLabel(this.getRating().toString()),vui.executeOnContainer(this.parentWidget,"setRating",this.currentRating),vui.select(this)},getRating:function(){return this.currentRating/2}}),vui.widgets.DoneButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).label=vui.strings.getTransformedText("RATESHARE_DONE"),e.defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" rate_dialog_done_button"},onAction:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.pages.RatingDialog=new Class({Extends:vui.widgets.overlayDialogue,init:function(e){(e=e||{}).trackingName&&(this.trackingName=e.trackingName),this.parent(e),this.rate_container=createDiv({className:"rate_container"},this.elem),this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:"Rate"},this.rate_container),this.dialogHeading=createDiv({className:"font20 dialogHeadingText"},this.rate_container),this.dialogDesc=createDiv({className:"font20 dialogDescText"},this.rate_container),this.dialogPoster=createDiv({className:"dialogPoster"},this.rate_container),this.ratingArea=createDiv({className:"ratingArea"},this.rate_container),this.ratingStarDefault=createDiv({className:"ratingStarDefault"},this.ratingArea),this.ratingStarRated=createDiv({className:"ratingStarRated"},this.ratingArea)},show:function(e){var t=e.mim;this.mim=t,this.currentRating=t.getUserRating(),this.cb=e.cb;var i=vui.strings.getText("CONTENT_TYPE_"+vui._.aStr(this.mim.data.type).toUpperCase());this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(t.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")",this.dialogHeading.innerHTML=vui.strings.getText("RATESHARE_SUB_TITLE",i),this.ratingStarDefault.style.background="url("+vui.images.rating_dialog_stars+")",this.ratingStarRated.style.backgroundImage="url("+vui.images.rating_dialog_stars+")",this.dialogDesc.innerHTML="Use the Left / Right buttons on your remote to rate the "+i+" and then press "+vui.strings.getTransformedText("RATE_DIALOG_DONE_BUTTON"),this.rator=new vui.widgets.RatingSelector(this.ratingArea,this.currentRating),this.attachWidget(this.rator),this.doneButton=new vui.widgets.DoneButton,this.attachChild(this.doneButton,this.rate_container),vui._.setAriaLabel("Rate. "+vui.strings.getText("RATESHARE_SUB_TITLE",i)+". "+this.dialogDesc.innerHTML)},setRating:function(e){var t=e*window.vui.ResDef.overlays.RATE_DIALOGUE_STAR_W;0<e&&(t+=Math.floor((e-1)/2)*window.vui.ResDef.overlays.RATE_DIALOGUE_STAR_SPACE),this.ratingStarRated.style.width=t+"px"},onBack:function(){var e=this.rator.getRating();this.currentRating!==e&&this.mim.setUserRating(e),controller.hidePopup(),this.cb&&this.cb()}})),window.TEST_LAYOUT||(vui.widgets.OfferActionButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size12_default",e.selectClassName="btn_bg_select btn_bg_size12_select",e.disabledClassName="btn_bg_disabled btn_bg_size12_disabled",this.parent(e),this.discLabel=createDiv({className:"discLabel font16"},this.elem),this.discLabel.style.display="none"},bind:function(e,t,i,s){this.elem;this.data=e,this.mim=s,this.offerInfo=t,(vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&t.offer&&t.offer.isWalmartOffer&&s.data.walmartCatalogItems&&i||!vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&t.offer&&t.offer.isWalmartOffer&&i)&&(this.discLabel.innerHTML="w/ "+vui.strings.transformCase(vui.m.qualDisc[t.videoQuality]),this.discLabel.style.display="block"),i?(e.hasStarted||(this.selectable=!1,this.disable()),this.label.className=this.label.className+" fontMedium",(e.isConditional||e.discount)&&this.elem.addClass("condOfferButton"),e.price&&this.setLabel(e.price)):(this.selectable=!1,this.elem.removeEvents("mouseenter"),e&&"mine"==e?(this.disable(),this.setIcon(vui.images.checkmark),this.icon.className=this.icon.className+" offer_action_button_checkmark"):(e?this.setLabel(e):this.selectable=!1,this.disable(),this.label.className=this.label.className+" font16"))},unbind:function(){this.hide()},onAction:function(){this.selectable&&vui.executeOnContainer(this.parentWidget,"onChoice",{offerInfo:this.offerInfo,mim:this.mim,discount:this.data.discount})},onSelect:function(){this.selectable&&(this.offerInfo&&this.offerInfo.offer&&this.data&&(this.desc=this.createAriaLabel(),vui._.setAriaLabel(this.desc)),this.parent())},onDeselect:function(){this.selectable&&this.parent()},createAriaLabel:function(){var e="ptr"==vui._.aStr(this.offerInfo.offer.offerType)?"Rent ":"Own ",t=this.offerInfo.offer.preOrderStartTime?"Preorder ":e;return"season"===this.data.type&&(t+=" season "),t+=this.offerInfo.videoQuality.toUpperCase(),"true"===vui._.aStr(this.offerInfo.offer.includePhysicalCopy)&&(t+=" with "+vui.m.qualDisc[this.offerInfo.videoQuality]),t+=" "+this.data.price}}),vui.widgets.TransactionCancelButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_cancel_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",e.label=e.label||vui.strings.getTransformedText("OFFER_DIALOG_CANCEL"),this.parent(e),this.label.className=this.label.className+" fontMedium",e.extraClass?this.elem.addClass(e.extraClass):this.elem.addClass("transaction_cancel_button")},bind:function(e){e&&e.callback&&(this.callback=e.callback)},unbind:function(){this.hide()},onAction:function(){this.callback?this.callback("cancel"):controller.hidePopup()},onSelect:function(){vui._.setAriaLabel(this.label.innerHTML),this.parent()}}),vui.widgets.PreorderBackButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",e.label=e.label||vui.strings.getTransformedText("OFFER_DIALOG_CANCEL"),e.extraClass&&this.elem.addClass(e.extraClass),this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" preorder_back"},bind:function(e){e&&e.callback&&(this.callback=e.callback)},unbind:function(){this.hide()},onAction:function(){this.callback?this.callback("cancel"):controller.hidePopup()},onSelect:function(){vui._.setAriaLabel(this.label.innerHTML),this.parent()}}),vui.widgets.PreorderCancelButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size5_default",e.selectClassName="btn_bg_select btn_bg_size5_select",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" preorder_cancel_button"},bind:function(e){},unbind:function(){this.hide()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onConfirm")},onSelect:function(){this.parent()}}),vui.widgets.TransactionConfirmButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" transaction_confirm_button"},bind:function(e){},unbind:function(){this.hide()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onConfirm")},onSelect:function(){this.desc&&vui._.setAriaLabel(this.desc),this.parent()}}),vui.widgets.ChoicesGenericButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){this.action=e.action,(e=e||{}).defaultClassName=e.defaultButtonClass?e.defaultButtonClass:"btn_bg_default",e.defaultClassName+=" btn_bg_size"+(e.size||"11")+"_default choicesGenericButtons",e.selectClassName=e.selectButtonClass?e.selectButtonClass:"btn_bg_select",e.selectClassName+=" btn_bg_size"+(e.size||"11")+"_select choicesGenericButtons",e.disabledClassName=e.disabledButtonClass?e.disabledButtonClass:"btn_bg_disabled",e.disabledClassName+=" btn_bg_size"+(e.size||"11")+"_disabled choicesGenericButtons",this.parent(e),this.label.className=this.label.className+" fontMedium"},onAction:function(){vui.executeOnContainer(this.parentWidget,"onButtonAction",this.action)}}),vui.widgets.WatchNowButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_watch_default btn_bg_size4_default",e.selectClassName="btn_bg_watch_select btn_bg_size4_select",e.label=vui.strings.getTransformedText("TRANSACTION_SUCCESS_DIALOG_WATCH_NOW"),this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" watch_now_button"},bind:function(e){e.playCallback&&(this.playCallback=e.playCallback)},unbind:function(){this.hide()},onAction:function(){this.playCallback&&this.playCallback()},onSelect:function(){this.parent()}}),vui.widgets.PreviewButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" preview_button_"+e.quality,this.quality=e.quality},bind:function(e){},unbind:function(){this.hide()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onChoice",this.quality)},onSelect:function(){this.parent()}}),vui.widgets.PurchasePreviewButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",this.parent(e),e.isConditional&&(this.label.style.color=vui.Theme.discountColor),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" preview_button_"+e.bid,this.transactionType=e.transactionType},bind:function(e){},unbind:function(){this.hide()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onClick",this.transactionType)},onSelect:function(){this.parent()}}),vui.widgets.WatchLaterButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size4_default",e.selectClassName="btn_bg_select btn_bg_size4_select",e.label=vui.strings.getTransformedText("TRANSACTION_SUCCESS_DIALOG_WATCH_LATER"),this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" watch_later_button"},bind:function(e){e.cancelCallback&&(this.cancelCallback=e.cancelCallback),e.iconSrc&&(this.icon.style.backgroundImage="url('"+e.iconSrc+"')")},unbind:function(){this.hide()},onAction:function(){this.cancelCallback&&this.cancelCallback()},onSelect:function(){this.parent()}}),vui.widgets.AddressConfirmButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="btn_bg_default btn_bg_size6_default",e.selectClassName="btn_bg_select btn_bg_size6_select",this.parent(e),this.label.className=this.label.className+" fontMedium",this.elem.className=this.elem.className+" address_confirm_button"},bind:function(e){},unbind:function(){this.hide()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onConfirm")},onSelect:function(){this.parent()}}),vui.pages.ManagePreOrderDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Manage Preorder Dialog",layout:{type:"horizontal"},init:function(e){e=e||{},this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:vui.strings.getText("MANAGE_PREORDER_TITLE")},t),this.upgrade=e.upgrade,this.dialogHeading=createDiv({className:"fontMedium dialogHeading long_heading",text:vui.strings.getText("MANAGE_PREORDER_DESC")},t),this.dialogPoster=createDiv({className:"dialogPoster"},t),this.confirmOfferInfo=createDiv({className:"confirmOfferInfo"},t);var i=createDiv({className:"offer_confirm_button_container"});t.appendChild(i),this.offerText=createDiv({className:"font18 offerText"},i),this.backButton=new vui.widgets.PreorderBackButton({label:vui.strings.transformCase("Back")}),this.attachChild(this.backButton,i),this.cancelPreorderButton=new vui.widgets.PreorderCancelButton,this.attachChild(this.cancelPreorderButton,i)},show:function(e){var t,i,s,n=e.mim&&e.mim.data;!this.upgrade||(t=vui.getModel().preOrderedMovieCache.check(n.contentId[0]))&&t.contentVariant&&t.contentVariant[0]&&t.contentVariant[0].videoQuality&&(i=t.contentVariant[0].videoQuality[0].toUpperCase(),this.dialogHeading.innerHTML=vui.strings.getText("MANAGE_CANCEL_TO_PREORDER_DESC",i)),this.callback=e.callback,this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(n,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==n.type&&((s=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(n),this.dialogPoster.appendChild(s)),this.cancelPreorderButton.setLabel(vui.strings.getTransformedText("MANAGE_PREORDER_CANCEL")),vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogHeading.innerHTML+". "+this.backButton.getLabel())},onConfirm:function(){this.selectable=!1,this.callback("confirm"),this.dialogHeading.innerHTML=vui.strings.getText("CONFIRM_OFFER_PROCESSING"),vui._.setAriaLabel(this.dialogHeading.innerHTML);var e=new vui.widgets.TransactionSpinner;this.spinner=e,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(e.elem),this.spinner.spin()},hide:function(){this.spinner&&this.spinner.stop()},onBack:function(){this.callback("back")}}),vui.widgets.OfferActionRow=new Class({Extends:vui.widgets.Container,layout:{type:"horizontal"},init:function(e){e=e||{};this.quality=e.quality.toLowerCase(),this.totalRows=e.totalRows,this.rowIndex=e.rowIndex,this.elem.className="offer_action_row";var t,i=new Element("img",{class:this.quality+"Img"});i.src=vui.images[this.quality+"_offer"],this.elem.appendChild(i),this["actionButton_"+this.rowIndex]=new vui.widgets.OfferActionButton({elemClassName:"offerButton_column_1"}),this.attachChild(this["actionButton_"+this.rowIndex]),1<e.numColumns&&(this[t="actionButton_"+(this.totalRows+this.rowIndex)]=new vui.widgets.OfferActionButton({elemClassName:"offerButton_column_2"}),this.attachChild(this[t])),2<e.numColumns&&"hd"!==this.quality&&(this[t="actionButton_"+(2*this.totalRows+this.rowIndex)]=new vui.widgets.OfferActionButton({elemClassName:"offerButton_column_3"}),this.attachChild(this[t])),this.selectable=!1},bind:function(e){var t=this["actionButton_"+e.buttonIndex];t&&t.bind(e.data,{offer:e.offer,videoQuality:e.videoQuality},e.isOfferOk,e.mim),e.isOfferOk&&(this.selectable=!0)}}),vui.pages.OfferDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Transaction Offer Grid Dialog",init:function(e){(e=e||{}).trackingName&&(this.trackingName=e.trackingName),this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:"Rent or Buy"},t),this.dialogHeading=createDiv({className:"fontWhite32 dialogHeading"},t),this.dialogPoster=createDiv({className:"dialogPoster"},t),this.rentHeader=createDiv({className:"font20 rentHeader",text:vui.strings.getTransformedText("OFFER_DIALOG_RENT")},t),this.ownHeader=createDiv({className:"font20 ownHeader",text:vui.strings.getTransformedText("OFFER_DIALOG_OWN")},t),this.attachPhysicalDisc(t),this.container=createDiv({className:"offer_dialogue_button_container",id:"offerDialogLayoutButtons"}),t.appendChild(this.container),this.offerActionRow=[],this.cancelButton=new vui.widgets.TransactionCancelButton,this.myofferContainer=createDiv({className:"myOfferTransactionContainer"},t),createDiv({className:"myOfferTransactionContainerIcon",position:"relative"},this.myofferContainer),createDiv({text:"My Offer",className:"myOfferTransactionContainerText"},this.myofferContainer);var i=new vui.widgets.TransactionSpinner;this.spinner=i,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(i.elem),this.selectable=!1},offerType:["Rental","Purchase","walmartOffer"],attachPhysicalDisc:function(e){this.physicalHeader=createDiv({className:"font20 physicalHeader",text:vui.strings.getTransformedText("OFFERDISC_DIALOG_DISC_DIGITAL")},e),this.physicalHeader.style.display="none"},showPhysicalDisc:function(){this.physicalHeader.style.display="block"},hide:function(){this.spinner&&this.spinner.stop()},show:function(p){this.spinner.spin();var T=(this.params=p).mim;T.getRealTimePricing(function(){var e;this.spinner.stop(),this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(T.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==T.data.type&&((e=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(T.data),this.dialogPoster.appendChild(e)),p&&p.origin&&(this.origin=p.origin),p&&p.origin&&"PreviewPurchase"==p.origin?(this.dialogHeader.innerHTML=vui.strings.getText("PREVIEW_PURCHASE_DIALOG_PREVIEW_COMPLETE"),this.dialogHeading.innerHTML=vui.strings.getText("PREVIEW_PURCHASE_DIALOG_TO_CONTINUE"),this.cancelButton.bind(p)):p&&p.origin&&"condOffer"==p.origin?(this.cancelButton.bind(p),this.onBack=function(){p.callback("cancel")}):this.dialogHeading.innerHTML=T.get().title[0],p&&p.fromPromo&&this.cancelButton.bind(p);var t=vui.getModel().getOfferMatrix(T);this.quals=vui.getModel().qualityArray,this.qualLen=this.quals.length,T.data.offers.type=T.data.type&&T.data.type[0];var i=2;(vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&vui.gConnectionInstance.getPhysicalDiscEnabled()&&T.data.walmartCatalogItems&&vui._.isDiskAvailable(T.data.walmartCatalogItems)||!vui.gConnectionInstance.getIsRealTimePhysicalDisk()&&T.data.hasWalmartOffer&&vui.gConnectionInstance.getPhysicalDiscEnabled())&&(i=3,this.showPhysicalDisc());var s=!1;if(T.data&&T.data.seasonInfo&&"episode"==T.data.type){var n=vui.getModel().getOfferMatrix(T.data.seasonInfo);if(n)for(c=0;c<this.qualLen;c++)if(n[this.quals[c]][1]){s=!0;break}if(s){for(c=0;c<this.qualLen;c++)t[this.quals[c]][1]||n[this.quals[c]][1]?(t[this.quals[c]][0]=t[this.quals[c]][1],t[this.quals[c]][1]=n[this.quals[c]][1]):t[this.quals[c]]=[];this.rentHeader.innerHTML=vui.strings.getText("OFFER_DIALOG_OWN"),T.data.seasonInfo.doesTagExist("currentNDA")?this.ownHeader.innerHTML=vui.strings.getText("OFFER_DIALOG_SEASON_PASS"):this.ownHeader.innerHTML=vui.strings.getText("MOVIE_DETAILS_SEASON_PURCHASE_BUTTON")}}var a=T.getAvailableOfferTypes();a&&(po=a.preorder,po&&(this.dialogHeader.innerHTML="Pre-Order or Rent",this.ownHeader.innerHTML=vui.strings.getTransformedText("MOVIE_DETAILS_PREORDER_BUTTON")));for(var o=0;o<this.qualLen;o++){var r=this.quals[o];t[r]&&0<t[r].length&&(this.offerActionRow[o]=new vui.widgets.OfferActionRow({quality:r,totalRows:this.quals.length,rowIndex:o,numColumns:i}),this.attachChild(this.offerActionRow[o],this.container))}for(var l,u,d=-1,c=0;c<this.quals.length;c++){if(T.data.variants[this.quals[c]]&&function(e,t){return!!e&&e.some(function(e){return e.videoQuality[0]===t&&"dash"===e.editionFormat[0]})}(T.data.variants[this.quals[c]].editions[0].edition,this.quals[c])){d=c;break}}for(!p.isPreorder&&"bundle"!=vui._.aStr(T.data.type)&&"season"!=vui._.aStr(T.data.type)||(d=0),c=0;c<this.qualLen*i;c++){var h,v,m,g=this.quals[c%this.qualLen],_=Math.floor(c/this.qualLen);t[g]&&0<t[g].length&&(v=t[g][_],m=T.data.offers,s?(u=this.params.mim.data.seasonInfo.data.offers,0===_&&m&&m[g]&&m[g][this.offerType[1]]?l=m[g][this.offerType[1]]:1===_&&u&&u[g]&&u[g][this.offerType[1]]&&(l=u[g][this.offerType[1]])):m&&m[g]&&m[g][this.offerType[_]]&&(l=m[g][this.offerType[_]]),h=s&&c>=this.qualLen?{data:v,offer:l,videoQuality:g,isOfferOk:t.isOfferOk(v),mim:T.data.seasonInfo,buttonIndex:c}:{data:v,offer:l,videoQuality:g,isOfferOk:t.isOfferOk(v),mim:T,buttonIndex:c},(c%this.qualLen<d||-1==d)&&(h.data=null,h.isOfferOk=!1),this.offerActionRow[c%this.qualLen].bind(h),v&&v.isConditional&&(this.myofferContainer.style.visibility="visible"))}this.attachChild(this.cancelButton,this.container),this.selectable=!0,vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogHeading.innerHTML+". "+vui.getSelected().desc),vui.analytics.trackEvent("scAdd",{product:T.data.contentId[0]})}.bind(this))},onDirectionRight:function(){var e,t=this.getSelectedIndex().modelIndex;"number"==typeof t&&t<=2&&0<t&&((e=this.children[t+3])&&e.selectable&&this.changeSelection(e))},onDirectionLeft:function(){var e,t=this.getSelectedIndex().modelIndex;0<t&&t<3&&((e=this.children[t-3])&&e.selectable&&this.changeSelection(e))},beforeOnDirectionDown:function(){var e=this.getSelectedIndex().modelIndex;if(this.getSelectedChild()&&"function"==typeof this.getSelectedChild().getSelectedIndex){if(!this.getSelectedChild().getSelectedIndex)return;var t=this.getSelectedChild().getSelectedIndex().modelIndex;this.children[e+1]&&(nextIndex=this.children[e+1],this.children.length>t?nextIndex.selected=t:nextIndex.selected=this.children.length-1)}},beforeOnDirectionUp:function(){var e,t=this.getSelectedIndex().modelIndex;3!==t?this.getSelectedChild()&&"function"==typeof this.getSelectedChild().getSelectedIndex&&(e=this.getSelectedChild().getSelectedIndex().modelIndex,this.children[t-1]&&(nextIndex=this.children[t-1],this.children.length>e?nextIndex.selected=e:nextIndex.selected=this.children.length-1)):this.changeSelection(this.children[this.children.length-1])},onChoice:function(e){var t,i,s=e.offerInfo,n=e.mim,a=n&&n.data||this.params.mim.data,o=s.offer,r=s.videoQuality;this.origin&&"condOffer"==this.origin&&this.params.callback("purchase",a.variants[r],o),this.origin&&"PreviewPurchase"==this.origin?(t={movie:(i=this.params).movie,startTime:i.startTime,variant:a.variants[r],offer:o,fromPreview:!0,dontShowBandwidthDialog:!0},i.movie.contentId&&vui.analytics.trackEvent("scAdd",{product:i.movie.contentId[0]}),this.params.callback(t)):(i={movie:a,variant:a.variants[r],offer:o,offers:a.offers,validOffers:a.validOffers,discount:e.discount},this.params.callback(i))}}),vui.pages.PhysicalOfferDialog=new Class({Extends:vui.pages.OfferDialog,trackingName:"Physical Disc Offer Dialog",elemClassName:"physicalOfferContainer",init:function(e){this.parent(e),this.dialogHeader.innerHTML="Own Disc + Digital",this.rentHeader.style.display="none",this.ownHeader.style.display="none",this.disclaimer=createDiv({className:"font16 physicalDisclaimer",text:"DVDs/Blu-rays are sold and shipped by Walmart.com. Watch the digital copy instantly on Vudu."},this.container);var t=new vui.widgets.TransactionSpinner;this.spinner=t,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(t.elem)},hide:function(){this.spinner&&this.spinner.stop()},show:function(e){var r=(this.params=e).mim;this.spinner.spin(),r.getRealTimePricing(function(){this.spinner&&this.spinner.stop(),this.dialogHeading.innerHTML=r.get().title[0],this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(r.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")";var e=vui.getModel().getPhysicalOfferMatrix(r);this.quals=vui.getModel().qualityArray,this.qualLen=this.quals.length,r.data.offers.type=r.data.type&&r.data.type[0];for(var t,s,n,a=0;a<this.qualLen;a++){var o=this.quals[a];e[o]&&0<e[o].length&&(this.offerActionRow[a]=new vui.widgets.OfferActionRow({quality:o,totalRows:this.quals.length,rowIndex:a,numColumns:1}),this.attachChild(this.offerActionRow[a],this.container))}for(i=0;i<this.qualLen;i++)e[t=this.quals[i%this.qualLen]]&&0<e[t].length&&(s=e[t][0],n=this.params.mim.data.offers[t][this.offerType[2]],this.offerActionRow[i%this.qualLen].bind({data:s,offer:n,videoQuality:t,isOfferOk:e.isOfferOk(s),mim:r,buttonIndex:i}),s&&s.isConditional&&(this.myofferContainer.style.visibility="visible"));this.attachChild(this.cancelButton,this.container),this.selectable=!0,vui.analytics.trackEvent("scAdd",{product:r.data.contentId[0]});for(a=0;a<this.children.length;a++){this.children[a].children.every(function(e){return!e.selectable})&&this.children[a].children.length&&(this.children[a].selectable=!1)}vui._.setAriaLabel(this.dialogHeading.innerHTML+". "+this.dialogHeader.innerHTML+". "+vui.getSelected().label.innerText)}.bind(this))}}),vui.pages.ConfirmOfferDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Transaction Confirm Dialog",layout:{type:"horizontal"},init:function(e){e=e||{},this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:vui.strings.getText("AVAIL_INFO_OWN")},t),this.dialogHeading=createDiv({className:"font28 dialogHeading"},t),this.dialogPoster=createDiv({className:"dialogPoster"},t),this.confirmOfferInfo=createDiv({className:"confirmOfferInfo"},t),this.buttonContainer=createDiv({className:"offer_confirm_button_container"}),t.appendChild(this.buttonContainer),this.confirmButton=new vui.widgets.TransactionConfirmButton,this.confirmButton.defaultClassName="btn_bg_confirm_default",this.confirmButton.selectClassName="btn_bg_confirm_select",this.attachChild(this.confirmButton,this.buttonContainer),this.cancelButton=new vui.widgets.TransactionCancelButton,this.attachChild(this.cancelButton,this.buttonContainer),this.offerText=createDiv({className:"font18 offerText"},this.buttonContainer),this.disclaimerDiv=createDiv({className:"disclaimerDiv"},t),this.myofferContainer=createDiv({className:"myOfferTransactionContainer"},t),createDiv({className:"myOfferTransactionContainerIcon",position:"relative"},this.myofferContainer),createDiv({text:"My Offer",className:"myOfferTransactionContainerText"},this.myofferContainer)},offerTextTitle:[vui.strings.getText("OFFER_DIALOG_RENTAL"),vui.strings.getText("OFFER_DIALOG_PURCHASE"),vui.strings.getText("OFFER_DIALOG_PREORDER")],offerAction:[vui.strings.getTransformedText("CONFIRM_OFFER_RENT"),vui.strings.getTransformedText("CONFIRM_OFFER_OWN"),vui.strings.getTransformedText("OFFER_DIALOG_PREORDER_TEXT")],show:function(e){this.setButtons(e);var t=e.movie;this.callback=e.callback;var i,s,n,a,o=0;"pto"!=vui._.aStr(e.offer.offerType)&&"ptoWal"!=vui._.aStr(e.offer.offerType)||(o=e.offer.preOrderStartTime&&parseDate(e.offer.preOrderStopTime).getTime()>=VUDU.vuduTime()?2:1),this.offer=e.offer,this.offer.isConditional?this.offer.isConditional&&(this.myofferContainer.style.visibility="visible",this.confirmButton.elem.addClass("condOfferButton")):e.discount&&this.confirmButton.elem.addClass("condOfferButton"),this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(t,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==t.type&&((i=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(t),this.dialogPoster.appendChild(i)),this.dialogHeader.innerHTML=header=vui.strings.getText("CONFIRM_OFFER_CONFIRM_X",this.offerTextTitle[o]),0===o?(s=this.offer.viewingSeconds/60/60/24<=2?"hour":null,n=vui.strings.getText("CONFIRM_OFFER_THIS_TITLE_AVAILABLE",getTimeString(this.offer.licenseSeconds),getTimeString(this.offer.viewingSeconds,s)),this.dialogHeading.className=this.dialogHeading.className+" fontMedium long_heading"):2===o?(n=vui.strings.getText("CONFIRM_OFFER_THIS_TITLE_PREORDER"),this.dialogHeading.className=this.dialogHeading.className+" fontMedium long_heading"):vui._.aStr(this.offer.includePhysicalCopy)?(a=vui._.aStr(e.variant.videoQuality),n="Own "+vui.m.qualDisc[a]+" + "+a.toUpperCase()+" digital copy",this.dialogHeading.addClass("long_heading")):n=vui.strings.getText("CONFIRM_OFFER_THIS_TITLE_ADDED"),this.dialogHeading.innerHTML=n,this.cancelButton.bind(e),this.offerText.innerHTML=this.isPhysicalPurchase?"":this.offerAction[o],"mex"===vui.USER_COUNTRY?createImg({className:"mex_disclaimer",src:vui.images.mexicoTransactionPanelDisclaimer},this.disclaimerDiv):2===o?createImg({className:"preorder_disclaimer",src:vui.images.preOrderDisclaimer},this.disclaimerDiv):this.isPhysicalPurchase?createDiv({className:"tos_refund font18",text:"View our policies on DVD/Blu-ray orders at vudu.com/ToS"},this.disclaimerDiv):this.offer.maySufferBlackoutWindows&&this.offer.maySufferBlackoutWindows[0]&&createImg({className:"tos_disclaimer",src:vui.images.ld},this.disclaimerDiv);var r=e.purchasePlan;this.taxOK=r&&r.tax&&null!=r.tax[0]&&"0"!=r.tax[0];var l=r&&(null!=r.serviceCreditAmount||null!=r.realMoneyAmount||null!=r.giftCardAmount||r.shippingCost||this.taxOK),u=r&&r.needRealMoneyAmount&&r.needRealMoneyAmount[0]||0,d=window.getPriceStr(u.toString());"mex"===vui.USER_COUNTRY||2===o?this.confirmButton.setLabel(vui.strings.getTransformedText("CONFIRM_OFFER_X_FOR_PRICE","",getPriceStr(this.offer.price[0]))):this.confirmButton.setLabel(vui.strings.getTransformedText("CONFIRM_OFFER_X_FOR_PRICE","",d)),2===o&&(this.confirmButton.elem.className="preOrder_confirm_button "+this.confirmButton.elem.className,this.cancelButton.elem.className="preOrder_cancel_button "+this.cancelButton.elem.className),this.ariaItemized="",l&&this.createItemized(r,e),confirmLabel=this.isPhysicalPurchase?"for "+this.total:this.confirmButton.getLabel(),this.confirmButton.desc=this.offerAction[o]+" "+e.variant.videoQuality[0].toUpperCase()+" "+confirmLabel,vui._.setAriaLabel(header+". "+n.replace(/HRS/,"hours")+". "+this.ariaItemized+". "+this.offerAction[o]+" "+e.variant.videoQuality[0].toUpperCase()+" "+confirmLabel)},setButtons:function(e){var t;this.isPhysicalPurchase=!1,e.offer&&e.offer.isWalmartOffer?(this.isPhysicalPurchase=!0,this.confirmButton.elem.className=this.confirmButton.elem.className+" physicalOfferConfirmButton"):(t=e.variant.videoQuality[0]||"sd",this.confirmButton.setIcon(vui.images[t+"_overlay"]),"hdx"==t||"uhd"==t?this.confirmButton.icon.style.width=window.vui.ResDef.overlays.QUALITY_ICON_HDX_WIDTH+"px":(this.confirmButton.icon.style.width=window.vui.ResDef.overlays.QUALITY_ICON_HD_WIDTH+"px",this.confirmButton.elem.addClass("small")))},addPriceUpdateInfo:function(e){var t=parseFloat(vui._.aStr(e.offer.price)),i=parseFloat(vui._.aStr(e.purchasePlan.subTotal)),s=i<t?"*Price Reduced!":t<i?"*Price Updated.":"";this.ariaItemized+=". "+s,this.physicalPriceUpdate=createDiv({className:"font18 physicalPriceUpdate",top:this.pos,text:s},this.frag)},addShippingInfo:function(e){var t=vui._.aStr(e.expectedDeliveryDate);t&&(this.physicalShippingInfo=createDiv({className:"font18 physicalShippingInfo",top:this.pos,text:"Arrives "+vui.displayReleaseTime(t)+" (estimated)"},this.frag),this.ariaItemized+=". "+this.physicalShippingInfo.innerHTML)},createLineItem:function(e,t,i,s){var n;createDiv({className:"offerItemizedText font18 "+s,top:this.pos,text:e+":"},this.frag),this.ariaItemized+=". "+e+": ",t?(n=vui.strings.getText("CONFIRM_OFFER_X_PRICE",window.getPriceStr(i)),parseFloat(i)||"Shipping"!=e||(n="FREE"),createDiv({className:"offerItemizedValue font18 "+s,top:this.pos,text:n},this.frag),this.ariaItemized+=vui.strings.getText("CONFIRM_OFFER_X_PRICE",window.getPriceStr(i))):(createDiv({className:"offerItemizedValue font18",top:this.pos,text:vui.strings.getText("CONFIRM_OFFER_NEG_X_PRICE",window.getPriceStr(i))},this.frag),this.ariaItemized+=vui.strings.getText("CONFIRM_OFFER_NEG_X_PRICE",window.getPriceStr(i))),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING},createItemized:function(e,t){this.frag=document.createDocumentFragment(),this.pos=0;var i=e.subTotal&&e.subTotal[0]||0,s=e.tax&&e.tax[0]||0,n=e.serviceCreditAmount&&e.serviceCreditAmount[0]||0,a=e.needRealMoneyAmount&&e.needRealMoneyAmount[0]||0,o=e.giftCardAmount&&e.giftCardAmount[0]||0,r=vui._.aStr(e.shippingCost)||0;e.realMoneyAmount&&(n=(+(n||0)+(e.realMoneyAmount&&+e.realMoneyAmount[0])).toString()),this.total=(parseFloat(i)+parseFloat(s)+parseFloat(r)-parseFloat(n)).toFixed(2),this.isPhysicalPurchase?this.confirmButton.setLabel("OWN FOR $"+getPriceStr(this.total)):this.confirmButton.setLabel(vui.strings.getTransformedText("CONFIRM_OFFER_X_FOR_PRICE","",getPriceStr(this.total))),i&&(this.addPriceUpdateInfo(t),t.discount?this.createLineItem("Price",!0,i,"condOffer"):this.createLineItem("Price",!0,i)),this.isPhysicalPurchase&&(this.addShippingInfo(e),this.createLineItem("Shipping",!0,r)),this.taxOK&&this.createLineItem("Tax",!0,s),n&&this.createLineItem("Service Credit",!1,n),createDiv({className:"total_divider",top:this.pos},this.frag),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/3,this.createLineItem("Total",!0,this.total,"total"),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/2,(o||a)&&createDiv({className:"total_charged offerItemizedText font18",top:this.pos,text:"Charged to"},this.frag),this.pos=this.pos+window.vui.ResDef.overlays.ITEMIZED_BILL_SPACING/1.5,o&&this.createLineItem("Gift Card(s)",!1,o),a&&this.createLineItem("Payment on File",!1,a),this.confirmOfferInfo.appendChild(this.frag),this.buttonContainer.addClass("itemized")},onConfirm:function(){var e;this.spinner||(this.selectable=!1,this.callback("confirm"),this.dialogHeading.innerHTML=vui.strings.getText("CONFIRM_OFFER_PROCESSING"),vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogHeading.innerHTML),e=new vui.widgets.TransactionSpinner,this.spinner=e,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(e.elem),this.spinner.spin())},hide:function(){this.spinner&&this.spinner.stop()},onBack:function(){this.callback("back")}}),vui.pages.PreorderCancelSuccessDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Preorder Cancel Success Dialog",layout:{type:"horizontal"},init:function(e){e=e||{},this.parent(e);var t=createDiv({className:"offer_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:vui.strings.getText("CANCEL_PREORDER_SUCCESS_TITLE")},t),this.dialogHeading=createDiv({className:"fontWhite32 dialogHeading long_heading",text:vui.strings.getText("CANCEL_PREORDER_SUCCESS_DESC")},t),this.dialogPoster=createDiv({className:"dialogPoster"},t);var i=createDiv({className:"offer_complete_button_container"});t.appendChild(i),this.watchLaterButton=new vui.widgets.WatchLaterButton,this.watchLaterButton.setLabel(vui.strings.getTransformedText("TRANSACTION_SUCCESS_DIALOG_DONE")),this.attachChild(this.watchLaterButton,i)},show:function(e){var t;this.params=e,this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(e.movie,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==e.movie.type&&((t=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(e.movie),this.dialogPoster.appendChild(t)),this.watchLaterButton.setLabel(vui.strings.getTransformedText("TRANSACTION_SUCCESS_DIALOG_DONE")),this.watchLaterButton.icon.style.visibility="hidden",this.watchLaterButton.elem.style.left="0",this.watchLaterButton.bind(e),vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogHeading.innerHTML+". "+this.watchLaterButton.getLabel())},onBack:function(){this.params.cancelCallback&&this.params.cancelCallback(),this.parent()}}),vui.pages.TransactionSuccessDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Transaction Success Dialog",layout:{type:"horizontal"},init:function(e){e=e||{},this.parent(e);var t,i,s,n=null,a=!1;e.offer&&"pto"==vui._.aStr(e.offer.offerType)&&(n=e.offer.preOrderStartTime&&parseDate(e.offer.preOrderStopTime).getTime()>=VUDU.vuduTime()?2:1),e.offer.includePhysicalCopy&&(a=!0,n=2),this.offer_container=createDiv({className:"offer_container"},this.elem),this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader",text:vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_THANK_YOU")},this.offer_container),2===n?(this.dialogHeading=createDiv({className:"font28 dialogHeading long_heading"},this.offer_container),s=a?(t=vui.displayReleaseTime(vui._.aStr(e.purchasePlan.expectedDeliveryDate)),i=vui.m.qualDisc[vui._.aStr(e.variant.videoQuality)],t?vui.strings.getText("OWNDISC_DIALOG_CONFIRM_BLURAY_TEXT",i)+t+".":vui.strings.getText("OWNDISC_DIALOG_CONFIRM_MISSING_SHIPDATE",i)):vui.strings.getText("PREORDER_SUCCESS_DIALOG_TRANS_COMPLETE",e.movie&&e.movie.title),this.dialogHeading.innerHTML=s):this.dialogHeading=createDiv({className:"fontWhite32 dialogHeading",text:vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_TRANS_COMPLETE")},this.offer_container),this.dialogPoster=createDiv({className:"dialogPoster"},this.offer_container);var o=createDiv({className:"offer_complete_button_container"},this.offer_container);this.watchNowButton=new vui.widgets.WatchNowButton,this.attachChild(this.watchNowButton,o),this.watchLaterButton=new vui.widgets.WatchLaterButton,this.attachChild(this.watchLaterButton,o)},show:function(e){var t,i;this.params=e,this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(e.movie,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==e.movie.type&&((t=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(e.movie),this.dialogPoster.appendChild(t)),"season"==e.movie.type||"bundle"==e.movie.type||e.offer.preOrderStartTime&&e.offer.preOrderStartTime[0]||e.movie.streamableStartTime&&e.movie.streamableStartTime[0]?(this.watchNowButton.elem.style.display="none",this.watchNowButton.selectable=!1,this.watchLaterButton.setLabel(vui.strings.getTransformedText("TRANSACTION_SUCCESS_DIALOG_DONE")),i=vui.strings.transformCase("Done"),this.watchLaterButton.icon.style.visibility="visible",this.watchLaterButton.elem.style.left="0"):(i=vui.strings.transformCase("Watch Now"),this.watchNowButton.bind(e)),this.watchLaterButton.bind(e);var s,n="pto"==vui._.aStr(e.offer.offerType)||"ptoWal"==vui._.aStr(e.offer.offerType),a="",o="";vui.gConnectionInstance.getIsUVSupportEnabled()&&e.movie.UVStatus&&isMaContent(e.movie)&&n?o=a=vui.strings.getText("CONFIRM_PURCHASE_UVMA"):isMaContent(e.movie)&&n?o=a=vui.strings.getText("CONFIRM_PURCHASE_MA"):vui.gConnectionInstance.getIsUVSupportEnabled()&&e.movie.UVStatus&&n&&(o=a=vui.strings.getText("CONFIRM_PURCHASE_UV")),e.dmaStatus&&("expired"==e.dmaStatus?o=a=vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_MA_EXPIRED_APPX","vudu.com/renew"):"almostExpired"==e.dmaStatus&&(s=e.dmaExpirationDate,a="This title will also be added to your Movies Anywhere library.",createDiv({className:"dma_status font16",text:vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_MA_ALMOST_EXPIRED_APPX",s,"vudu.com/renew")},this.offer_container),o=a+" "+vui.strings.getText("TRANSACTION_SUCCESS_DIALOG_MA_ALMOST_EXPIRED_APPX",s,"vudu.com/renew"))),a&&createDiv({className:"uv_disclaimer font16",text:a},this.offer_container),vui._.setAriaLabel(this.dialogHeader.innerHTML+". "+this.dialogHeading.innerHTML+". "+i+". "+o)},onBack:function(){this.params.cancelCallback&&this.params.cancelCallback(),this.parent()}}),vui.pages.PreviewDialog=new Class({Extends:vui.widgets.overlayDialogue,init:function(e){e=e||{},this.parent(e);var t=createDiv({className:"preview_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader"},t),this.dialogHeading=createDiv({className:"fontWhite32 dialogHeading",text:vui.strings.getText("PREVIEW_DIALOG_PREVIEW_OPTIONS")},t),this.dialogPoster=createDiv({className:"dialogPoster"},t);var i=createDiv({className:"preview_dialogue_button_container"});t.appendChild(i),this.hdxButton=new vui.widgets.PreviewButton({label:vui.strings.getText("PREVIEW_DIALOG_1080P"),iconSrc:vui.images.hdx_overlay,quality:"hdx"}),this.attachChild(this.hdxButton,i),this.hdButton=new vui.widgets.PreviewButton({label:vui.strings.getText("PREVIEW_DIALOG_720P"),iconSrc:vui.images.hd_overlay,quality:"hd"}),this.attachChild(this.hdButton,i),this.sdButton=new vui.widgets.PreviewButton({label:vui.strings.getText("PREVIEW_DIALOG_480P"),iconSrc:vui.images.sd_overlay,quality:"sd"}),this.attachChild(this.sdButton,i),this.cancelButton=new vui.widgets.TransactionCancelButton,this.attachChild(this.cancelButton,t)},show:function(e){var t;this.params=e,this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(e.mim.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==this.params.mim.data.type&&((t=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(this.params.mim.data),this.dialogPoster.appendChild(t));var i=this.params.mim.data,s=vui.getModel();this.quals=s.qualityArrayNoUHD,(vui.gConnectionInstance.getIsUHDSupported()||vui.gConnectionInstance.get4KForAll())&&(this.quals=s.qualityArray);for(var n=0,a=0;a<this.quals.length;a++){var o=this.quals[a],r=s.getPreviewOffer(i,o);r&&(0===n||r<n)&&(n=r),r||this[o+"Button"].disable()}this.dialogHeader.innerHTML=vui.strings.getText("PREVIEW_DIALOG_WATCH_A_X_MIN_PREVIEW",n)},onChoice:function(e){var t=this.params.mim.data;controller.hidePopup();var i={movie:t,variant:t.variants[e],offers:t.offers[e],validOffers:t.validOffers[e],quality:e};this.params.callback(i)}}),vui.pages.PreviewPurchaseDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Transaction from Preview Dialog",offerP:[vui.strings.getText("CONFIRM_OFFER_RENT"),vui.strings.getTransformedText("CONFIRM_OFFER_OWN")],init:function(e){(e=e||{}).isOpaqueBg=!0,this.parent(e);var t=createDiv({className:"preview_purchase_container"},this.elem);this.dialogHeader=createDiv({className:"fontWhite32 dialogHeader"},t),this.dialogHeading=createDiv({className:"fontWhite32 dialogHeading",text:vui.strings.getText("PREVIEW_DIALOG_PREVIEW_OPTIONS")},t),this.dialogPoster=createDiv({className:"dialogPoster"},t),this.container=createDiv({className:"preview_purchase_dialogue_button_container"}),t.appendChild(this.container),this.myofferContainer=createDiv({className:"myOfferTransactionContainer"},t),createDiv({className:"myOfferTransactionContainerIcon",position:"relative"},this.myofferContainer),createDiv({text:"My Offer",className:"myOfferTransactionContainerText"},this.myofferContainer)},show:function(e){this.dialogHeader.innerHTML=vui.strings.getText("PREVIEW_PURCHASE_DIALOG_PREVIEW_COMPLETE"),this.dialogHeading.innerHTML=vui.strings.getText("PREVIEW_PURCHASE_DIALOG_TO_CONTINUE");var t,i=(this.params=e).variant.videoQuality[0],s=vui.getModel().getOfferMatrix(e.movieInfo),n=s&&s[i];this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(e.movieInfo.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")","episode"==this.params.movieInfo.data.type&&((t=new Element("div",{class:"posterBlockOverlaySmall fontMedium"})).innerHTML=vui.getEpisodeSeasonLabel(this.params.movieInfo.data),this.dialogPoster.appendChild(t));for(var a=0,o=0;o<2;o++){var r,l=n[o];l&&s.isOfferOk(l)&&l.hasStarted&&(r=new vui.widgets.PurchasePreviewButton({label:"FOR "+l.price,transactionType:o,bid:a,isConditional:l.isConditional,iconSrc:vui.images[i+"_overlay"]}),createDiv({className:"font18 offerText_"+a},this.container).innerHTML=this.offerP[o],this.attachChild(r,this.container),a+=1,r.icon.style.width="hdx"==i||"uhd"==i?window.vui.ResDef.overlays.QUALITY_ICON_HDX_WIDTH+"px":window.vui.ResDef.overlays.QUALITY_ICON_HD_WIDTH+"px",l.isConditional&&(this.myofferContainer.style.visibility="visible"))}this.cancelButton=new vui.widgets.TransactionCancelButton({label:vui.strings.getText("PREVIEW_PURCHASE_DIALOG_NO_THANKS")}),this.attachChild(this.cancelButton,this.container),this.cancelButton.elem.className=this.cancelButton.elem.className+"_"+a,this.cancelButton.onAction=function(){controller.hidePopup(),this.params.callback()}.bind(this),this.selectable=!0},onChoice:function(e){var t=this.params,i={movie:t.movie,startTime:t.startTime,variant:t.variant,fromPreview:!0,dontShowBandwidthDialog:!0};0==e?i.offer=t.offerRental:1==e&&(i.offer=t.offerPurchase),t.movie.contentId&&vui.analytics.trackEvent("scAdd",{product:t.movie.contentId[0]}),this.params.callback(i)},onBack:function(){controller.hidePopup(),this.params.callback()}}),vui.pages.AddressConfirmDialog=new Class({Extends:vui.widgets.overlayDialogue,trackingName:"Address Confirm Dialog",layout:{type:"horizontal"},init:function(e){(this.params=e).isOpaqueBg=!1,this.parent(e),this.callback=e.callback;var t=createDiv({className:"address_container offer_container"},this.elem);this.dialogHeading=createDiv({className:"fontWhite32 dialogHeader"},t),this.dialogText=createDiv({className:"font20 dialogHeading long_heading"},t),this.dialogPoster=createDiv({className:"dialogPoster"},t),this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(e.movie,window.vui.ResDef.detailPage.POSTER_WIDTH)+")",this.addressBlock=createDiv({className:"font18 addressBlock"},t);var i=vui.account.getShippingAddress(),s=vui.account.getPhoneNumber();this.container=createDiv({className:"address_confirmation_button_container"}),this.cancelButton=new vui.widgets.TransactionCancelButton,this.disclaimer=createDiv({className:"font18 disclaimer"},t),i&&s?this.createDefaultView(i,s):this.createMissingAddressView(i,s),this.attachChild(this.cancelButton,this.container),t.appendChild(this.container)},show:function(){this.parent(),vui._.setAriaLabel(this.dialogHeading.innerHTML+". "+this.dialogText.innerHTML+". "+this.addressBlock.innerHTML+". "+vui.getSelected().getLabel())},createMissingAddressView:function(e,t){e?(this.dialogHeading.innerHTML=vui.strings.getText("OWNDISC_ADD_PHONE_HEADER"),this.dialogText.innerHTML=vui.strings.getText("OWNDISC_MISSING_PHONE_NUMBER_TEXT")+"<br>"+vui.strings.getText("OWNDISC_ADD_PHONE_TEXT")):t?(this.dialogHeading.innerHTML=vui.strings.getText("OWNDISC_ADD_ADDRESS_HEADER"),this.dialogText.innerHTML=vui.strings.getText("OWNDISC_MISSING_ADDRESS_TEXT")+"<br>"+vui.strings.getText("OWNDISC_ADD_ADDRESS_TEXT")):(this.dialogHeading.innerHTML=vui.strings.getText("OWNDISC_ADD_ADDRESS_AND_PHONE_HEADER"),this.dialogText.innerHTML=vui.strings.getText("OWNDISC_MISSING_ADDRESS_AND_PHONE_TEXT")+"<br>"+vui.strings.getText("OWNDISC_ADD_ADDRESS_AND_PHONE_TEXT")),this.addressBlock.innerHTML=vui.vvPlatform.appFeatureEnabled()?vui.strings.getText("OWNDISC_UPDATE_ADDRESS_URL_TEXT_APPX","video.walmart.com"):vui.strings.getText("OWNDISC_UPDATE_ADDRESS_URL_TEXT_APPX","www.vudu.com"),this.cancelButton.elem.style.left=window.vui.ResDef.overlays.ADDRESS_CANCEL_LEFT+"px",this.cancelButton.label.innerHTML=vui.strings.transformCase("Back"),this.disclaimer.innerHTML=vui.strings.getText("OWNDISC_MISSING_INFO_DISCLAIMER_APPX",vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu")},createDefaultView:function(e,t){this.dialogHeading.innerHTML=vui.strings.getText("OWNDISC_CONFIRM_ADDRESS_HEADER"),this.dialogText.innerHTML=vui.strings.getText("OWNDISC_SHIPPING_POLICY",vui.m.qualDisc[this.params.videoQuality]),this.addressBlock.innerHTML=vui.formatAddressAndNumber(e,t),this.confirmButton=new vui.widgets.AddressConfirmButton({label:"YES, ADDRESS IS CORRECT"}),this.attachChild(this.confirmButton,this.container),this.disclaimer.innerHTML=vui.vvPlatform.appFeatureEnabled()?"You can update your address on the web at video.walmart.com/myaccount.":"You can update your address on the web at vudu.com/myaccount."},onConfirm:function(){this.callback(!0);var e=new vui.widgets.TransactionSpinner;this.spinner=e,this.spinner.elem.className="spinnerConfirm",this.elem.appendChild(e.elem),this.spinner.spin()},hide:function(){this.spinner&&this.spinner.stop()}}),vui.pages.WaitDialog=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){e.dialogBoxClassName="wait_dialog",this.parent(e);var t=new vui.widgets.Buffering;this.buffering=t,this.attachChild(t),this.dialogType="WaitDialog",t.setAdvertAnimation()},show:function(){this.buffering.show(!0)},onBack:function(){},hide:function(){this.buffering.hide()}})),vui.pages.D2DLanding=new Class({Extends:vui.NewPage,name:"vui.pages.D2DLanding",layout:{type:"horizontal"},init:function(e){this.params=e,this.elem.style.backgroundColor="black",vui.getModel().userId?this.initExisting():this.initNew()},getWrapper:function(e,t){return"<table height='"+t+"' width='100%'><tr><td valign='middle' align='center' style='position: relative' class='headerText'>"+e+"</td></tr></table>"},initExisting:function(){this.elem.style.background="url("+vui.images.d2dWelcomeExistingUsers+") center no-repeat";var e=456,t=415;"hd"===window.WIDGETRESOLUTION&&(e=534,t=566);var i=["Home",{activeTab:"my"}],s={label:this.getWrapper("Browse",58),centered:!0,width:130,height:71,onAction:function(){controller.goToPage(i[0],i[1])}},n=new vui.widgets.BlueGrayButton("button0",s),a=n.getElem();a.style.left=t+"px",a.style.top=e+"px",this.attachChild(n)},initNew:function(){this.elem.style.background="url("+vui.images.d2dWelcomeNewUsers+") center no-repeat";var e=vui.promo.getAmount(),t=$defined(e)&&"0"!=e?"Try it free, with $"+e+" credit":"Try it free!",i=new Element("div",{class:"D2DLandingOfferText",html:t});this.elem.appendChild(i);var s=456,n=336;"hd"===window.WIDGETRESOLUTION&&(s=534,n=488);var a=vui.strings.getText("OPENING_PITCH_SIGN_UP_BUTTON_BREAK");$defined(e)&&"0"!=e&&(e=window.getPriceStr(e),a="<span class='fontSmallBold'>"+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_1")+"</span> "+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_2",e)+"<br /><span class='fontSmallBold'>"+vui.strings.getText("OPENING_PITCH_PROMO_BUTTON_3")+"</span>");var o={label:this.getWrapper(a,40),centered:!0,width:130,height:71,onAction:function(){vui.ActivationController.beginActivation(function(e){"quit"!=e&&controller.goHome()})}},r=new vui.widgets.BlueGrayButton("button0",o),l=r.getElem();l.style.left=n+"px",l.style.top=s+"px",this.attachChild(r),n+=160;var u={label:this.getWrapper(vui.strings.getText("OPENING_PITCH_EXPLORE_VUDU"),40),centered:!0,width:130,height:71,onAction:function(){controller.goHome()}},d=new vui.widgets.BlueGrayButton("button0",u),c=d.getElem();c.style.left=n+"px",c.style.top=s+"px",this.attachChild(d)},show:function(){}}),vui.widgets.OpeningPitchGridList=new Class({Extends:vui.widgets.ScrollingBase,name:"vui.widgets.OpeningPitchGridList",scrollIncrement:1,rowIndex:0,numVisible:5,rows:1,selectable:!0,visibleCount:5,scrollDelta:1,padding:window.vui.ResDef.movieGridList.PADDING_RIGHT,getListModel:function(e){var t=0;if(this.params.scrollOffset&&(t=this.params.scrollOffset),this.data)return e(i={data:this.data,get:function(e){return this.data[e]},totalCount:this.data.length,currentStart:t,setListener:function(e){this.listener=e}},0,this.data.length-1),i;var i,s={name:"MOST WATCHED",currentStart:0,callback:e,maxResults:5};return i=vui.getModel().getMoviesByListName(s)},init:function(e){this.layout={type:"horizontal"},this.parent(e,this.getListModel),e.numVisible&&(this.visibleCount=this.numVisible=e.numVisible),e.childWidgetClass&&(this.childWidgetClass=e.childWidgetClass),this.params=e;var t=this.elem;this.addWidgets(t)},createWidget:function(e){var t=new this.childWidgetClass;return t.elem.style.border=vui.Theme.openingPitchBorder,t.onSelect=function(){t.elem.style.border=vui.Theme.activeWideBorder,vui._.setAriaLabel(vui._.aStr(this.data.title))},t.onDeselect=function(){t.elem.style.border=vui.Theme.openingPitchBorder},t.getElem().style.left=e*(window.vui.ResDef.PosterGrid.POSTER_WIDTH+this.padding)+"px",t},getKeyFunc:function(e){return function(e){return vui.getModel().getPosterUrl(e,window.vui.ResDef.PosterGrid.POSTER_WIDTH)}},getRowIndex:function(){return this.rowIndex},update:function(e){this.children&&this.children.length===this.numVisible&&(this.parent(e),this.report())},report:function(){clearTimeout(this.reportTimer),this.reportTimer=setTimeout(function(){vui.analytics.trackPage("welcome",{},0)},window.REPORTDELAY)}}),vui.widgets.OpeningPitchButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){var t=(e=e||{}).size||1;e.defaultClassName="btn_bg_default btn_bg_size"+t+"_default",e.selectClassName="btn_bg_select btn_bg_size"+t+"_select",this.parent(e),e&&e.elemClassName&&(this.getElem().className+=" "+e.elemClassName),this.label.className=this.label.className+" font22"},onDeselect:function(){this.desc="",this.parent()}}),vui.widgets.LowerLeftContainer=new Class({Extends:vui.widgets.Container,Implements:[vui.widgets.NavBackDelegate],name:"vui.widgets.lowerLeftContainer",elemClassName:"lowerLeftContainer",selectionInheritance:!0,layout:{type:"vertical"},init:function(){this.signUpButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_SIGNUP_BUTTON"),iconSrc:vui.images.continue_icon,elemClassName:"opButton_signup imageActionButton",onAction:function(){vui.ActivationController.beginActivation(function(e){"quit"!==e&&"success"===e&&controller.goHome()},"welcome")}}),this.attachChild(this.signUpButton),this.browseButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_BROWSE_BUTTON"),iconSrc:vui.images.browse_icon,elemClassName:"opButton_browse imageActionButton",onAction:function(){controller.goHome();var e={linkType:"lnk_o",linkName:"Browse Button"};vui.analytics.trackEvent("",e)}}),this.attachChild(this.browseButton),this.logInButton=new vui.widgets.OpeningPitchButton({label:vui.strings.getTransformedText("OPENING_PITCH_LOGIN_BUTTON"),iconSrc:vui.images.enter_email_icon,elemClassName:"opButton_login imageActionButton",onAction:function(){vui.ActivationController.beginActivation(function(e){"quit"!==e&&controller.goHome()},"welcome",!0)}}),this.attachChild(this.logInButton)},onBack:function(){controller.exitApp()}}),vui.widgets.LowerRightContainer=new Class({Extends:vui.widgets.Container,name:"vui.widgets.lowerRightContainer",elemClassName:"lowerRightContainer",init:function(e){var t=new Element("div",{class:"topSection"});this.elem.appendChild(t),this.promoTitleText=new Element("div",{class:"promoTitleText font44"}),t.appendChild(this.promoTitleText),this.promoDescText1=new Element("div",{class:"promoDescText font22"}),t.appendChild(this.promoDescText1),this.promoDescText2=new Element("div",{class:"promoDescText font22"}),t.appendChild(this.promoDescText2);var i=new Element("div",{class:"bottomSection"});this.elem.appendChild(i),vui.vvPlatform.isXbox?this.text1=new Element("div",{class:"vuduValueText font22",html:vui.strings.getText("OPENING_PITCH_TEXT_3_XBOX")}):this.text1=new Element("div",{class:"vuduValueText font22",html:vui.strings.getText("OPENING_PITCH_TEXT_3")}),this.text1.style.display="none",this.disclaimer=createDiv({className:"tos font16"},t),this.disclaimer.style.display="none",i.appendChild(this.text1)},bind:function(e){this.tts=[];var t,i=vui.promo.getPromoType(),s=vui.gConnectionInstance.getActivationPromo();if(s)switch(s){case 1:this.promoTitleText.set("html",vui.strings.getText("OPENING_PITCH_TEXT_1_OFFER")),this.promoDescText2.style.display="none",this.disclaimer.set("html",vui.strings.getText("OPENING_PITCH_TERMS_APPLY")),this.disclaimer.style.display="block",this.text1.style.display="block",this.tts.push(this.promoTitleText.innerHTML,this.disclaimer.innerHTML,this.text1.innerHTML)}else i?(this.promoTitleText.set("html",vui.promo.getPromoTitle()),this.promoDescText1.set("html",vui.promo.getPromoDescription()),t=vui.promo.getPromoDescription2(),this.tts.push(this.promoTitleText.innerHTML,this.promoDescText1.innerHTML),t?(this.promoDescText2.style.display="block",this.promoDescText2.set("html",t),this.tts.push(this.promoDescText2.innerHTML)):this.promoDescText2.style.display="none"):vui.vvPlatform.appFeatureEnabled()?(this.promoTitleText.set("html",vui.strings.getText("OPENING_PITCH_WMV_TEXT_1")),this.promoDescText1.set("html",vui.strings.getText("OPENING_PITCH_WMV_TEXT_3")),this.promoDescText2.style.display="none",this.tts.push(this.promoTitleText.innerHTML,this.promoDescText1.innerHTML)):(this.promoTitleText.set("html",vui.strings.getText("OPENING_PITCH_TEXT_1")),this.promoDescText2.style.display="none",this.text1.style.display="block",this.tts.push(this.promoTitleText.innerHTML,this.text1.innerHTML));this.tts.push("sign up")},getTTS:function(){return this.tts.join(",")}}),vui.pages.OpeningPitch_AccountActivationPromo=new Class({Extends:vui.NewPage,Implements:vui.ContentActions,name:"vui.pages.OpeningPitch_AccountActivationPromo",layout:{type:"vertical"},init:function(e){this.elem.style.backgroundColor=vui.Theme.primaryBackgroundColor,this.elem.style.backgroundRepeat="no-repeat";var t=new Element("div",{class:"openingpitch_container"});this.elem.appendChild(t);var i=new vui.widgets.LogoBar;t.appendChild(i.elem);var s=new Element("div",{class:"upperContainer"});t.appendChild(s),this.grid=new vui.widgets.OpeningPitchGridList({childWidgetClass:vui.widgets.GridPoster}),this.attachChild(this.grid,s);var n=new Element("div",{class:"lowerContainer"});t.appendChild(n),this.lowerLeftContainer=new vui.widgets.LowerLeftContainer,this.attachChild(this.lowerLeftContainer,n),this.lowerRightContainer=new vui.widgets.LowerRightContainer,this.attachChild(this.lowerRightContainer,n),this.lowerRightContainer.selectable=!1;var a=document.createElement("div"),o=window.vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"Vudu";a.innerHTML=vui.strings.getText("OPENING_PITCH_SIDEBAR_TOP_TEXT_APPX",o),a.style.position="absolute",a.style.top="64px",a.style.left="251px",a.className="promoDescText font22",t.appendChild(a),this.grid.params=this.params||{},this.grid.params.numVisible=5,this.grid.params.scrollOffset=0,this.grid.params.layout={type:"horizontal"};createImg({src:vui.images.BG_Temp})},show:function(e){vui.getModel().isAlivePosterBaseUrl(),this.lowerRightContainer.bind(),0<vui.promo.getPromotedContent().length&&(this.grid.data=vui.promo.getPromotedContent()),this.grid.refresh(),this.lowerLeftContainer.signUpButton.desc=this.lowerRightContainer.getTTS(),vui.select(this.lowerLeftContainer.signUpButton)}}),vui.kidsModeContentActions=new Class({Extends:vui.ContentActions,posterOnAction:function(e){var t=e.rowType;e=e.data?e.data:e,"season"===vui._.aStr(e.type)?controller.goToPage("KidsModeEpisodes",{data:e,rowType:t}):e&&e.contentId&&this.getContentData(e.contentId[0],function(e){this.data=e;var t,i,s,n,a=null;vui.m.kidsModeCache.setRefreshBookmark(),vui.getModel().avodManager.canDisplayWatchWithAdsButton(e)?this.onClickWatchWithAds({movie:e,currentWidget:this}):(t=e.ownerships,s=(i=vui.getModel().getBestOffer(e))&&i[1]&&"free"==i[1],(t&&("program"==e.type||"episode"==e.type||"bundle"==e.type||"series"==e.type)||s)&&(avariant=this.getVariantByOwnership(e),e.streamableStartTime&&(a=window.getFutureDateString(e.streamableStartTime[0]),gotStreamableStart=!0),e.streamingSoon||a?e.transportStreamTrailerEditionId?this.watchTrailer():(n={title:"Playback Not Yet Available",text:"This title is pre-ordered but not available to watch yet!",buttons:[{name:"done",label:vui.strings.getTransformedText("GENERIC_DIALOG_OK_BUTTON"),style:"blue",icon:"confirm_icon",size:"4"}],data:e,callback:function(){controller.hidePopup()}},controller.showPopup("ChoicesGenericDialog",n)):avariant&&this.onClickPlay({movie:e,variant:avariant,currentWidget:this})))}.bind(this))},getContentData:function(e,t){var i=function(e){e?e.data?t(e.data):controller.showPopup("SimpleTextDialog",{title:"Sorry",text:"Content is not available at this time",buttons:[{label:vui.strings.getText("THEATER_ERROR_POPUP_OK_BUTTON")}],callback:function(){controller.goBack()}}):vui.getModel().getMovieInfo(this.contentId,i)}.bind(this);vui.getModel().getMovieInfo(e,i)},onClickResumePlay:function(e){var t=this.getVariantByOwnership(e),i={movie:e,variant:t};e.isFromLandingPage&&(this.resumeClicked=!0),t||"true"!==vui._.aStr(e.isAdvertEnabled)?this.onClickPlay(i,e.skipHistory,e.resetBookmark):this.onClickWatchWithAds(i,e.resetBookmark)}}),vui.kidsModeTrackingTool=new Class({reportEnterKidsMode:function(e){e="km_"+vui._.aStr(e).toLowerCase();vui.analytics.trackPage(e,{props:{enterKidsMode:"kids mode"}})},reportExitKidsMode:function(){vui.analytics.trackPage("home")}}),vui.kidsModePasscodePrompt=new Class({passcodePrompt:function(t){var i=t.authType||"_default",s=t.callback,n=vui.familyModel;s||alert("ERROR: Attempting to show passcode dialog with no callback"),!t.forcePrompt&&n.isAuthorized(i)?s("correct"):(t.callback=function(e){"correct"!=e||t.forcePrompt||n.authorize(i),s(e)},t.heading=vui.strings.getText("EXIT_KIDS_MODE"),t.isOpaqueBg=!1,t.elemClassName="overlay passcode_panel",controller.showPopup("PasscodeDialog",t))},goBack:function(e,t){var i,s;this.clickBackBufferTime?alert("click back too fast."):(i=function(){vui.familyModel.exitKidsMode(),t?controller.goToPage(t.name,{contentId:t.contentId},!0):controller.goHome(),e&&e()},vui.familyModel.getNeedExitPin()?(s={promptText:vui.strings.getText("KIDS_EXIT_ENTER_PIN"),authType:"kids_mode_exit",callback:function(e){"correct"===e?i():"back"===e&&controller.hidePopup()}},this.passcodePrompt(s)):i())}}),vui.widgets.KidsModeResumePoster=new Class({Extends:vui.widgets.LeafContainer,elemClassName:"kidsModeResumePoster",name:"vui.widgets.KidsModeResumePoster",init:function(e){this.width=vui.ResDef.kidsMode.RESUME_POSTER_W,this.height=vui.ResDef.kidsMode.RESUME_POSTER_H,this.backgroundContainer=createDiv({className:"kidsModeResumeContainer"},this.elem),this.elem.setAttribute("aria-hidden","true"),this.posterWidth=0,this.posterHeight=0,this.elem.id=e,this.poster=createImg({className:"kidsModeResumePoster_img"},this.elem);var t=createDiv({className:"kidsModeResumePoster_info"},this.elem);this.title=createDiv({className:"kidsModeResumePoster_title",position:"static"},t),this.season=createDiv({className:"kidsModeResumePoster_season",position:"static"},t),this.season.style.display="none";var i=createDiv({className:"kidsModeResumePoster_status"},this.elem),s=createDiv({className:"kidsModeResumePoster_barBg",style:{background:vui.Theme.kidsMode.scrubberBg+" 0 0 no-repeat"}},i);this.progressBar=createDiv({className:"kidsModeResumePoster_bar"},s)},bind:function(e){this.data=e.content,e.content.resizedPosterUrl=vui.getModel().getPosterUrl(e.content,vui.ResDef.kidsMode.RESUME_POSTER_IMG_UPSCALE_W),e.content.resizedBlowupPosterUrl=vui.getModel().getPosterUrl(e.content,vui.ResDef.POSTER_BLOWUP_W),this.poster.src=e.content.resizedPosterUrl,this.poster.width=vui.ResDef.kidsMode.RESUME_POSTER_IMG_W,this.poster.height=vui.ResDef.kidsMode.RESUME_POSTER_IMG_H;var t=0,i=vui._.aStr(this.data.lengthSeconds)||0;e?e&&e.timeSeconds&&(t=vui.m.bookmarkCache.check(e.content.contentId).timeSeconds||0):t=i,this.progressBar.style.width=Math.floor(t/i*200)+"px",this.progressBar.style.background=vui.Theme.kidsMode.scrubber+" 0 0 no-repeat",this.title.innerHTML=this.data.title||"",this.data.seasonNumber&&this.data.episodeNumberInSeason?(this.season.style.display="block",this.season.innerHTML="Season "+this.data.seasonNumber[0]+"<br>Episode "+this.data.episodeNumberInSeason[0]):this.season.style.display="none",this._setIconDefault(),this.selectable=!0,this.elem.style.visibility="visible"},unbind:function(){1==this.selectable&&(this.selectable=!1),delete this.data,this.poster.src=vui.images.empty1x1,this.elem.style.visibility="hidden"},onAction:function(){this.data&&vui.m.getMovieInfo(this.data.contentId[0],function(e){e&&e.refresh(function(){vui.executeOnContainer(this.parentWidget,"onClickResumePlay",e.data)}.bind(this))}.bind(this))},onSelect:function(){vui._.setAriaLabel(this.title.innerHTML),this._setIconActive(),this.data&&vui.executeOnContainer(this.parentWidget,"onSelectedPoster",this)},onDeselect:function(){this._setIconDefault(),vui.executeOnContainer(this.parentWidget,"onDeselectedPoster",this)},_setIconActive:function(){this.elem.style.border=vui.Theme.kidsMode.activeWideBorder},_setIconDefault:function(){this.elem.style.border=vui.Theme.kidsMode.invisibleBorder}}),vui.widgets.KidsModeRow=new Class({Extends:vui.widgets.ListOfListRowBase,name:"vui.widgets.KidsModeRow",elemClassName:"kidsModeRow",headerHeight:vui.ResDef.kidsMode.HEADER_H,height:vui.ResDef.kidsMode.ROW_H,width:vui.ResDef.kidsMode.ROW_W,bodyHeight:vui.ResDef.kidsMode.BODY_H,listNum:7,bind:function(e){if(this.data=e,this.totalCount=e.totalCount||0,0==this.totalCount){this.setSelectable(!1);var t=document.createElement("div");return t.className="ListOfListNoDataLabel",t.innerHTML="No Results Found",void this.el.body.appendChild(t)}this.selected=0,"Continue Watching"==e.title&&(this.posterClass=vui.widgets.KidsModeResumePoster,this.posterPositionWidth=vui.ResDef.kidsMode.RESUME_POSTER_POSITION_W,this.listNum=4),this.createPosters(e.content),this.setTitle(e.title||""),this.getViewAllEnabled()&&(this.setViewAll(),createImg({className:"kidsModeRow_rightArrow",src:vui.images.kidsMode.view_all},this.el.body))},onClickResumePlay:function(e){var t;e.ownerships||vui.m.avodManager.canDisplayWatchWithAdsButton(e)?(e.isFromLandingPage=!0,vui.m.bookmarkCache.check(e.contentId)||(this.refreshBookmark=!0),vui.executeOnContainer(this.parentWidget,"onClickResumePlay",e)):(t={title:"Sorry",poster:vui.getModel().getPosterUrl(e,vui.ResDef.detailPage.POSTER_WIDTH),text:"This title is not available to watch!",dialogBoxClassName:"ResumeError",buttons:[{name:"cancel",style:"blue",label:"OK"}],callback:function(){controller.hidePopup()}},controller.showPopup("PosterTextDialog",t))},posterOnAction:function(e){vui.m.bookmarkCache.check(e.contentId)||(this.refreshBookmark=!0),vui.executeOnContainer(this.parentWidget,"posterOnAction",{data:e,rowType:this.data.title})},onSelectedPoster:function(e){vui.executeOnContainer(this.parentWidget,"onSelectedPoster",e)},viewAllOnAction_:function(){delete this.data.preSelected,vui.executeOnContainer(this.parentWidget,"viewAllOnAction_",this.ind)},getViewAllEnabled:function(){return this.totalCount>this.listNum},getRowTitle:function(){return this._rowTitle},getRefreshBookmark:function(){return this.refreshBookmark||!1}}),vui.widgets.KidsModeMovieLoL=new Class({Extends:vui.widgets.ListOfListBase,Implements:vui.kidsModeContentActions,elemClassName:"kidsModeMovieLoL",name:"vui.widgets.KidsModeMovieLoL",rowClass:vui.widgets.KidsModeRow,rowHeight:vui.ResDef.kidsMode.ROW_H,visibleHeight:2*vui.ResDef.kidsMode.ROW_H,init:function(){this.parent(),this.scroller.elem.style.visibility="hidden"},onDirectionRight:function(){var e,t=vui.getSelected();t&&t.parentWidget&&this.viewAllOnAction_&&(e=t.parentWidget.ind,this.rows&&this.rows[e]&&this.rows[e].getViewAllEnabled()&&(this.rows[e].data&&(this.rows[e].data.preSelected=this.rows[e].selected+1),this.viewAllOnAction_(t.parentWidget.ind)))},viewAllOnAction_:function(e){var t={};(t=this.rows[e].data).preSelected=this.rows[e].data.preSelected||null,t._preSelectedPoster=t.preSelected,controller.goToPage("KidsModeViewAll",t)},getState:function(){var e=this.parent();return e.rowTitle=this.rows[this.selected].getRowTitle(),e.refreshBookmark=this.rows[this.selected].getRefreshBookmark(),e}}),vui.widgets.KidsModeExitButton=new Class({Extends:vui.widgets.ImageActionButton,Implements:[vui.kidsModeTrackingTool],elemClassName:"kidsModeExitButton",name:"vui.widgets.KidsModeExitButton",init:function(){this.parent({label:vui.strings.getTransformedText("EXIT_KIDS_MODE_BUTTON_TEXT"),elemClassName:"kidsModeExitButton",defaultClassName:"kidsModeExitButton",selectClassName:"kidsModeExitButton kidsModeExitButtonSelect"})},onSelect:function(){this.parent(),vui._.setAriaLabel(vui.strings.getText("EXIT_KIDS_MODE"))},onDeselect:function(){this.parent()},onAction:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.KidsModeHeadline=new Class({Extends:vui.widgets.Container,elemClassName:"kidsModeHeadline",name:"vui.widgets.KidsModeHeadline",init:function(e){e=e||{},this.ageLimit=vui.familyModel&&vui.familyModel.getAgeLimit();var t=createDiv({className:"kidsModeHeadline_logo_container"},this.elem);this.kidsModeLogo=createImg({className:"kidsModeHeadline_logo",src:vui.images.kidsMode.logo_landing_page},t),this.ageRange=createDiv({className:"kidsModeHeadline_ageRange",text:this.ageLimit?this.ageLimit+" years":""},t),this.ageRangeSup=createDiv({className:"kidsModeHeadline_ageRange_sup",text:this.ageLimit?vui.strings.getText("KIDS_AGE_AND_BELOW"):""},t),this.appLogo=createImg({className:"kidsModeHeadline_app_logo",src:vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo},this.elem),e.disableButton||!1||(this.exitButton=new vui.widgets.KidsModeExitButton,this.attachChild(this.exitButton,this.elem))},passcodePrompt:function(e){vui.executeOnContainer(this.parentWidget,"passcodePrompt",e)},getHeadlineTitle:function(){return this.ageLimit+" years and below"}}),vui.widgets.KidsModeLandingView=new Class({Extends:vui.widgets.Container,Implements:[vui.kidsModePasscodePrompt,vui.kidsModeTrackingTool],name:"vui.widgets.KidsModeLandingView",elemClassName:"kidsModeLandingView",init:function(){this.headline=new vui.widgets.KidsModeHeadline,this.attachChild(this.headline);var e=createDiv({className:"kidsModeLandingView_container"},this.elem);this.lol=new vui.widgets.KidsModeMovieLoL,this.attachChild(this.lol,e),this.clickBackBufferTime=!0,setTimeout(function(){this.clickBackBufferTime=!1}.bind(this),1e3)},show:function(e){vui._.setAriaLabel(""),(e=e||{}).lol&&e.lol.refreshBookmark||vui.m.kidsModeCache.getRefreshBookmark()?vui.m.bookmarkCache.fetchResumeData(function(){this.showUI(e)}.bind(this)):this.showUI(e)},showUI:function(e){this.data=e.data&&e.entry&&vui.m.kidsModeCache.isBookmarkUpdated()?e.data:vui.m.kidsModeCache.getCache(),e&&e.showEmpty||0===this.data.length?this.displayEmptyMessage():(this.lol.bindUI(this.data),this.lol.bindData(this.data),e&&e.lol&&this.lol.restoreState(e.lol),this.lol.show(),this.lol.selectable=!0,vui.select(this.lol),e&&"deeplink"===e.from&&e.deepLinkParams?this.lol.onClickPlay(e.deepLinkParams):(setTimeout(function(){var e=this.lol.rows[this.lol.selected].getRowTitle(),t=vui.getSelected();t.data&&t.data.title&&(e+=", "+vui._.aStr(t.data.title)),vui._.setAriaLabel(e)}.bind(this),0),this.reportEnterKidsMode("landing page")))},displayEmptyMessage:function(){var e=vui.strings.getText("KIDS_MODE_EMPTY"),t=vui.strings.getText("KIDS_NO_CONTENT2"),i=vui.strings.getText("EXIT_KIDS_MODE");createDiv({className:"kidsModeEmptyTitle",text:e},this.elem),createDiv({className:"kidsModeEmtpyMessage",text:t},this.elem),this.lol.selectable=!1,vui.select(this.headline),setTimeout(function(){vui._.setAriaLabel(e+", "+t.replace(/<br\/>/,"")+", "+i)},0)},onSelectedPoster:function(){},save:function(){var e={};return e.data=this.data,e.lol=this.lol.getState(),"Continue Watching"===e.lol.rowTitle&&this.lol.resumeClicked&&(e.entry=!0,delete this.lol.resumeClicked),e},onBack:function(){this.goBack(this.reportExitKidsMode)},onBlue:function(){var e=this.lol&&this.lol.children&&this.lol.children[0];0===this.lol.selected?this.goBack(this.reportExitKidsMode):vui.select(e)}}),vui.widgets.KidsModeGridList=new Class({Extends:vui.widgets.CoGridList,name:"vui.widgets.KidsModeGridList",partialRow:!0,settings:{normal:{columns:7,rows:3}},rows:3,posterClass:vui.widgets.GridPoster}),vui.widgets.KidsModePosterGrid=new Class({Extends:vui.widgets.CoVuduPosterGrid,listClass:vui.widgets.KidsModeGridList,elemClassName:"kidsModePosterGrid",name:"vui.widgets.KidsModePosterGrid",init:function(){this.parent(),this.scroller.elem.style.visibility="hidden"},listDataReceived:function(e){this.parent(e),e.totalCount>this.list.numVisible-7&&(this.range.style.display="block")}}),vui.widgets.KidsModeSortGrid=new Class({Extends:vui.widgets.CoSortGrid,gridClass:vui.widgets.KidsModePosterGrid,name:"vui.widgets.KidsModeSortGrid",posterOnAction:function(e){var t={data:e,rowType:this.parentWidget.params.title};vui.executeOnContainer(this.parentWidget,"posterOnAction",t)}}),vui.widgets.KidsModeResumeGridList=new Class({Extends:vui.widgets.ResumeGridList,posterClass:vui.widgets.KidsModeResumePoster,name:"vui.widgets.KidsModeResumeGridList",partialRow:!1,init:function(){this.parent({paddingRight:12})},getSelectedPoster:function(){return this.selected},getResumeListModel:function(){var t=this.parent(),e=t.data,o=Number(vui.familyModel.getAgeLimit()),i=e.filter(function(e){var t=e.content||{};if(t&&t.contentId){var i=t.ageLimit&&Number(t.ageLimit)<=o,s=!0,n=!0;vui.familyModel.getShowAVOD()||(s=vui.m.ownedMovieCache[t.contentId]||"false"===vui._.aStr(t.isAdvertEnabled));var a=vui.m._checkRental(t.contentId);return a&&!getTimeDiffString(a)&&(n=!1),n&&i&&s}return!1});return t.get=function(e){return t.data[e]},t.data=i,t.totalCount=i.length,t},onClickResumePlay:function(e){vui.executeOnContainer(this.parentWidget,"onClickResumePlay",e)}}),vui.widgets.KidsModeResumeViewAll=new Class({Extends:vui.widgets.MyViewResume,Implements:[vui.kidsModePasscodePrompt,vui.kidsModeTrackingTool],listClass:vui.widgets.KidsModeResumeGridList,name:"vui.widgets.KidsModeResumeViewAll",show:function(e){e=e||{},this.parent(e),this.selected=e.selected||0,this.el.title.innerHTML="",this.scroller.elem.style.visibility="hidden",vui.select(this.list.children[this.selected]),e.totalCount>this.list.numVisible?this.range.style.display="block":this.range.style.display="none"},onDirectionLeft:function(){controller.goBack()},onClickResumePlay:function(e){var t;e.ownerships||vui.m.avodManager.canDisplayWatchWithAdsButton(e)?(this.list.forceResetSelector(),vui.executeOnContainer(this.parentWidget,"onClickResumePlay",e)):(t={title:"Sorry",poster:vui.getModel().getPosterUrl(e,vui.ResDef.detailPage.POSTER_WIDTH),text:"This title is not available to watch!",dialogBoxClassName:"ResumeError",buttons:[{name:"cancel",style:"blue",label:"OK"}],callback:function(){controller.hidePopup()}},controller.showPopup("PosterTextDialog",t))},onBack:function(){controller.goBack()},onBlue:function(){vui.familyModel.enterKidsMode("resumeViewAll",!0)}}),vui.widgets.KidsModeViewAll=new Class({Extends:vui.pages.Collection,Implements:[vui.kidsModePasscodePrompt,vui.kidsModeTrackingTool,vui.kidsModeContentActions],sortGridClass:vui.widgets.KidsModeSortGrid,elemClassName:"kidsModeViewAll",name:"vui.widgets.KidsModeViewAll",init:function(e){vui._.setAriaLabel(""),vui._.createTempAlert(vui._.aStr(e.title),this.elem,!0),vuiFilters.setCurrentFilterType("collection"),vuiFilters.resetCurrentFilters(),this.params=e,this.titleText=document.createElement("div"),this.titleText.className="coTitleText",this.elem.appendChild(this.titleText),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel),this.hidePanel(),this.headline=new vui.widgets.KidsModeHeadline({disableButton:!0}),this.headline.selectable=!1,this.attachChild(this.headline);var t=new vui.widgets.sortCue;(this.el.sortCue=t).elem.className="CoVuduSortCue clickable",this.attachChild(t),this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid),vui.select(this.sortGrid),this.resume=new vui.widgets.KidsModeResumeViewAll,this.resume.elem.style.top="184px",this.resume.elem.style.left="66px",this.attachChild(this.resume,this.elem),this.resume.hide(),this.elem.style.background=vui.vvPlatform.appFeatureEnabled()?"linear-gradient(180deg, #7842FF 0%, #4C0CC2 100%)":"#00807D"},onGotListLength:function(e){this.parent(),this.disableSort()},show:function(e){var t;this.disableSort(),this.sortGrid.grid.setTitle(vui._.aStr(e.title)),"Continue Watching"==e.title?(e.selected=e.preSelected,this.resume.show(e),this.sortGrid.selectable=!1):(t={listName:"kidsMode",listFetcher:"getKidsModeList",listParams:e},e._preSelectedPoster&&(this._preSelectedPoster=e._preSelectedPoster,delete e._preSelectedPoster,e.state&&e.state.gridState&&(e.state.gridState.scrollOffset=0)),this._showGrid(t,e.state&&e.state.gridState),this._preSelect(e.preSelected),this.sortGrid.grid.onBlue=function(){vui.familyModel.enterKidsMode("viewAll",!0)}.bind(this)),this.reportEnterKidsMode(this.params.title)},save:function(){var e=this.params;return e.state=this.saveState(),"Continue Watching"==this.params.title&&(e.preSelected=this.resume.list.getSelectedPoster(),e.scrollOffset=this.resume.list.currentStart),e}}),vui.pages.KidsModeDialog=new Class({Extends:vui.pages.SimpleTextDialog,layout:{type:"vertical"},show:function(e){(e=e||{}).elemClassName&&(this.elemClassName=e.elemClassName),e.hint&&(this.hint=createDiv({className:"kidsModeDialogHint font20",text:e.hint},this.dialogBox.elem)),this.parent(e)}}),vui.widgets.kidsModeWhosWatching=new Class({Extends:vui.widgets.Container,Implements:[vui.kidsModePasscodePrompt,vui.kidsModeTrackingTool],elemClassName:"whosWatching",name:"vui.widgets.kidsModeWhosWatching",init:function(e){this.params=e||{},createImg({className:"kidsModeHeadline_app_logo",src:vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo},this.elem),createDiv({className:"whosWatching_helloAgain",text:vui.strings.getText("KIDS_HELLO")},this.elem),createDiv({className:"whosWatching_message",text:vui.strings.getText("KIDS_BACK_TO_KIDS_MODE")},this.elem),createImg({className:"whosWatching_star",src:vui.images.kidsMode.star_icon_white_hello_again,position:"relative"},this.elem);var t=createDiv({className:"whosWatchingButtonContainer"},this.elem);this.yesButton=new vui.widgets.ImageActionButton({label:vui.strings.getTransformedText("KIDS_BTN_YES"),name:"yes",onAction:function(){vui.familyModel.enterKidsMode("welcome")},elemClassName:"whosWatchingYesButton",defaultClassName:"btn_bg_default btn_bg_size4_default",selectClassName:"btn_bg_select btn_bg_size4_select",labelClassName:"whosWatchingButtonLabel",position:"relative"}),this.attachChild(this.yesButton,t),this.noButton=new vui.widgets.ImageActionButton({label:vui.strings.getTransformedText("KIDS_NOT_A_KID"),name:"no",onAction:this.onBack.bind(this),elemClassName:"whosWatchingNoButton",defaultClassName:"btn_bg_default btn_bg_size4_default",selectClassName:"btn_bg_select btn_bg_size4_select",labelClassName:"whosWatchingButtonLabel"}),this.attachChild(this.noButton,t),setTimeout(function(){vui._.setAriaLabel(vui.strings.getText("KIDS_HELLO")+", "+vui.strings.getText("KIDS_BACK_TO_KIDS_MODE")+", yeah")},0)},onBack:function(){var e;this.params&&this.params.fromDeepLink&&(e=this.params.data),this.goBack(this.reportExitKidsMode,e)},onBlue:function(){vui.familyModel.enterKidsMode("welcome")}}),vui.widgets.KidsEpisodePoster=new Class({Extends:vui.widgets.GridPoster,Implements:vui.kidsModePasscodePrompt,elemClassName:"kidsEpisodesPoster",name:"vui.widgets.KidsEpisodePoster",init:function(e,t){(t=t||{}).width=vui.ResDef.kidsMode.EPISODE_POSTER_W,t.height=vui.ResDef.kidsMode.EPISODE_POSTER_H,this.parent(e,t),this.img.width=this.width,this.img.height=this.height,this.title=createDiv({className:"kidsEpisodePoster_title"},this.elem),this.promoImg.style.display="none"},parseContentPoster:function(e){this.data=e,this.data.resizedPosterUrl=vui.getModel().getKidsModeImageUrl(this.data,vui.ResDef.kidsMode.EPISODE_POSTER_W),this.data.resizedBlowupPosterUrl=vui.getModel().getKidsModeImageUrl(this.data,vui.ResDef.kidsMode.EPISODE_POSTER_W),this.title.innerHTML=e.episodeNumberInSeason+" - "+e.title,this._bindFromModel()},_bindFromModel:function(){this.parent(),this.img.width=vui.ResDef.kidsMode.EPISODE_POSTER_IMG_W,this.img.height=vui.ResDef.kidsMode.EPISODE_POSTER_IMG_H},onSelect:function(){this._setIconActive(),this.data&&this.data.title&&vui._.setAriaLabel(this.data.title)},onDeselect:function(){this._setIconDefault()},_setIconActive:function(){this.img.style.border=vui.Theme.kidsMode.activeWideBorder},_setIconDefault:function(){this.img.style.border=vui.Theme.kidsMode.invisibleBorder},onBack:function(){controller.goBack()},onBlue:function(){vui.familyModel.enterKidsMode("episodeView",!0)}}),vui.widgets.KidsEpisodesGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.KidsEpisodesGridList",posterClass:vui.widgets.KidsEpisodePoster,settings:{normal:{columns:4,rows:2}},columns:4,rows:2,partialRow:!0,getMovieListModel:function(e){var t=this.params,i=t.contentId;t.scrollOffset&&(this.currentStart=t.scrollOffset);var s=this.getRowType(),n={seasonId:i,callback:e,currentStart:this.currentStart},a=!1;return(vui.getModel().ownedMovieCache[i]||t.containerId&&vui.getModel().anyOfCidsPurchased(t.containerId))&&(a=!0),"Free TV"===s&&(n.isAdvertEnabled=!0),a||"Your TV"!==s||(n.listType="rentedOrOwned"),vui.m.getSeasonEpisodes(n)},getRowType:function(){return vui.executeOnContainer(this.parentWidget,"getRowType")},posterOnAction:function(e){vui.executeOnContainer(this.parentWidget,"posterOnAction",{data:e,rowType:this.getRowType()})}}),vui.widgets.KidsEpisodesGrid=new Class({Extends:vui.widgets.PosterGrid,name:"vui.widgets.KidsEpisodesGrid",listClass:vui.widgets.KidsEpisodesGridList,elemClassName:"kidsEpisodesGrid",init:function(){this.parent(),this.scroller.elem.style.visibility="hidden"},drawBlowup:function(){},posterOnAction:function(e){vui.executeOnContainer(this.parentWidget,"posterOnAction",e)},getCurrentStart:function(){return this.list.currentStart||0},getSelected:function(){return this.list.selected||0},listDataReceived:function(e){this.parent(e),e.totalCount>this.list.numVisible-4&&(this.range.style.display="block")},getRowType:function(){return vui.executeOnContainer(this.parentWidget,"getRowType")}}),vui.widgets.KidsEpisodesPosterBlock=new Class({Extends:vui.widgets.Container,name:"vui.widgets.KidsEpisodesPosterBlock",elemClassName:"kidsEpisodesPosterBlock",init:function(){var e=createDiv({className:"kidsEpisodesPosterBlock_container"},this.elem);this.poster=new vui.widgets.GridPoster(0,{width:168,height:238}),this.attachChild(this.poster,e),this.seasonTitle=createDiv({className:"kidsEpisodesPosterBlock_title"},e),createImg({className:"kidsModeHeadline_app_logo",src:vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo},this.elem),this.selectable=!1},bind:function(e){this.poster.bind(e),this.seasonTitle.innerHTML=e.title}}),vui.widgets.KidsEpisodesView=new Class({Extends:vui.NewPage,Implements:vui.kidsModeContentActions,name:"vui.widgets.KidsEpisodesView",elemClassName:"kidsModeLandingView",init:function(e){var t;this.rowType=e.rowType||e.state&&e.state.rowType||"",e=e.data?e.data:e,this.bgImg=createImg({className:"kidsModeEpisodesBg"},this.elem),this.grid=new vui.widgets.KidsEpisodesGrid,this.attachChild(this.grid),this.posterBlock=new vui.widgets.KidsEpisodesPosterBlock,this.attachChild(this.posterBlock),e.state&&e.state.selected&&(t=e.state.selected,vui.select(this.grid.list.children[t]))},getRowType:function(){return this.rowType},show:function(e){var t;this.params=e.data?e.data:e,!this.params.hasBackgroundImage||"true"!==vui._.aStr(this.params.hasBackgroundImage)||(t=vui.getModel().getBackgroundUrlFromContentId(this.params.contentId[0]))&&(this.bgImg.src=t),this.posterBlock.bind(this.params),this.grid.setList(this.params)},onDirectionLeft:function(){controller.goBack()},save:function(){return this.params.state={scrollOffset:this.grid.getCurrentStart(),selected:this.grid.getSelected(),rowType:this.rowType},this.params}}),vui.MyCollectionActions={manageOption:null,skipLandingOnNewListBtn:!1,createOrRenameCollection:function(s){if(s){var e=s.result;if("back"===e)this.params.collectionInfo?vui.MyCollectionActions.displayManageCollectionDialog(this.params.collectionInfo,null,"rename"):(vui.MyCollectionActions.skipLandingOnNewListBtn=!1,controller.hidePopup());else if("done"===e){var n=s.text;if(""===n){var t={elemClassName:"emptyCollectionNameDialog",title:"Enter a List Name",text:"Name cannot be blank.",buttons:[{name:"edit",style:"blue",label:"Edit Name"},{name:"cancel",style:"blue",label:"Cancel"}],callback:function(e){"edit"===e?vui.MyCollectionActions.displayKeyboard(this.params):"back"===e?(vui.MyCollectionActions.skipLandingOnNewListBtn=!1,vui.MyCollectionActions.displayKeyboard(this.params)):"cancel"===e&&(vui.MyCollectionActions.skipLandingOnNewListBtn=!1,controller.hidePopup())}.bind(this)};return void controller.showPopup("SimpleTextDialog",t)}var a=this.params&&this.params.collectionStoreCallback||s&&s.collectionStoreCallback;if(vui.m.myCollectionsModel&&!vui.m.myCollectionsModel.checkCollectionNameValidity(n))return vui.MyCollectionActions.displayNameLengthLimitDialog({collectionStoreCallback:a,createdFrom:this.params.createdFrom,collectionInfo:this.params.collectionInfo,enteredName:s.text}),void(vui.MyCollectionActions.skipLandingOnNewListBtn=!1);var i=!1;if(this.params.collectionInfo&&vui._.aStr(this.params.collectionInfo.name)===s.text&&(i=!0),!i&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.checkIfCollectionNameExists(n))return vui.MyCollectionActions.displayDuplicateNameDialog({collectionStoreCallback:a,createdFrom:this.params.createdFrom,collectionInfo:this.params.collectionInfo,enteredName:s.text}),void(vui.MyCollectionActions.skipLandingOnNewListBtn=!1);var o={name:n,callback:function(e){var t,i;"success"===e?(controller.hidePopup(),this.params&&this.params.collectionStoreCallback&&this.params.collectionStoreCallback({name:n})):"existed"===e?vui.MyCollectionActions.displayDuplicateNameDialog({collectionStoreCallback:a,createdFrom:this.params.createdFrom,collectionInfo:this.params.collectionInfo,enteredName:s.text}):"notFound"===e?(30<(t=n).length&&(t=t.slice(0,30)+"..."),i={elemClassName:"collectionNotFoundDialog",title:"None",text2:t,text3:"List no longer exists.",buttons:[{label:"OK"}],callback:function(){controller.goBack()}.bind(this)},controller.showPopup("SimpleTextDialog",i)):controller.hidePopup()}.bind(this)};this.params&&this.params.collectionInfo&&this.params.collectionInfo.userCollectionId&&(o.userCollectionId=this.params.collectionInfo.userCollectionId),this.params.movieInfo&&(o.contentId=vui.MyCollectionActions.unBundle(this.params.movieInfo.data)),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.storeCollection(o)}}},displayKeyboard:function(e){var t,i={createdFrom:e.createdFrom,title:vui.strings.getText("USERLIB_CREATE_NEW_LIST"),callback:this.createOrRenameCollection,collectionStoreCallback:this.callback,mode:"PASSWORD_LOWERCASE",dialogBoxClassName:"email_dialogue",elemClassName:"myCollectionKeyboard",buttons:[{name:"back",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_PROMPT_BACK_BUTTON"),labelClassName:"font24"},{name:"done",label:vui.strings.getTransformedText("ACTIVATION_EMAIL_PROMPT_DONE_BUTTON"),labelClassName:"font24"}],movieInfo:e.movieInfo};e&&(e.collectionStoreCallback&&(i.collectionStoreCallback=e.collectionStoreCallback),e.collectionInfo&&(i.collectionInfo=e.collectionInfo,i.title="Edit List Name"),e.enteredName&&(0<(t=vui._.aStr(e.enteredName)).length&&(i.text=t),i.prefilled=!0)),i.isOpaqueBg=!1,controller.showPopup("TextInputDialog",i)},displayDuplicateNameDialog:function(t){controller.showPopup("SimpleTextDialog",{elemClassName:"myCollectionDuplicateNameDialog",dialogBoxHeight:255,title:"Name Already Exists",text:t.enteredName,buttons:[{name:"edit",label:"Edit Name"},{name:"cancel",label:"Cancel"}],callback:function(e){"edit"===e||"back"===e?this.displayKeyboard({createdFrom:t.createdFrom,collectionStoreCallback:t.collectionStoreCallback,collectionInfo:t.collectionInfo,enteredName:t.enteredName}):"cancel"===e&&controller.hidePopup()}.bind(this)})},displayNameLengthLimitDialog:function(t){controller.showPopup("SimpleTextDialog",{elemClassName:"myCollectionNameLengthLimitDialog",dialogBoxHeight:255,title:"Name is Too Long",text:t.enteredName,text2:"Must be fewer than 75 characters.",buttons:[{name:"edit",label:"Edit Name"},{name:"cancel",label:"Cancel"}],callback:function(e){"edit"===e||"back"===e?this.displayKeyboard({createdFrom:t.createdFrom,collectionStoreCallback:t.collectionStoreCallback,collectionInfo:t.collectionInfo,enteredName:t.enteredName}):"cancel"===e&&controller.hidePopup()}.bind(this)})},displayMaxNumberDialog:function(){controller.showPopup("SimpleTextDialog",{elemClassName:"myCollectionMaxNumberDialog",dialogBoxHeight:255,title:"Unable to Create List",text:"You have the maximum number of allowed lists ("+vui.m.myCollectionsModel.getMaxCollectionCount()+").",buttons:[{name:"ok",label:"OK"}],callback:function(){controller.hidePopup()}})},displayNewCollectionDialog:function(t){var e=t.movieInfo,i={createdFrom:t.createdFrom,title:vui.strings.getText("USERLIB_CREATE_NEW_LIST"),text:vui.strings.getText("USERLIB_SUGGESTED_LIST_NAMES"),buttons:[{name:"custom",style:"blue",label:vui.strings.getTransformedText("USERLIB_CUSTOM_NAME")},{name:"done",style:"blue",label:vui.strings.getTransformedText("USERLIB_DONE_BTN")},{name:"cancel",style:"blue",label:vui.strings.getTransformedText("USERLIB_CANCEL_BTN")}],buttonContainerLayout:{type:"vertical"},callback:function(e){t.callback&&t.callback(e)},movieInfo:e},s=e&&e.data;i.radioButtons=[];for(var n=vui.getModel().getGenresFromMovie(e),a={program:"Movies",season:"TV"},o=0;o<3;o++){var r,l="";n&&0<n.length&&n.length>o&&s.type&&(r=n[o]+" "+a[s.type],vui.m.myCollectionsModel&&!vui.m.myCollectionsModel.checkIfCollectionNameExists(r)&&(l=r)),""!==l&&i.radioButtons.push({name:l,value1:"OFF",value2:"ON",checked:0===o?"ON":"OFF",desc:l})}var u={createdFrom:t.createdFrom,movieInfo:e,collectionStoreCallback:i.callback};this.displayKeyboard(u)},displayManageCollectionDialog:function(a,o,e){var t,i=function(e){switch(e){case"reorder":controller.goToPage("MyCollectionsCustomSort",{collectionParams:a}),vui.MyCollectionActions.manageOption=e;break;case"remove":controller.goToPage("MyCollectionsBulkDelete",{collectionParams:a,posterType:"remove"}),vui.MyCollectionActions.manageOption=e;break;case"edit":var t={collectionInfo:a,enteredName:vui._.aStr(a.name)};o&&(t.collectionStoreCallback=o),this.displayKeyboard(t);break;case"delete":var i=vui.strings.getText("USERLIB_DELETE_DIALOG_TITLE"),s=vui.strings.getText("USERLIB_DELETE_DIALOG_DESC"),n={title:i,text:a.name,desc:s,buttons:[{name:"ok",style:"blue",size:4,label:vui.strings.getText("USERLIB_DELETE_LIST"),desc:i+". "+a.name+s+vui.strings.getText("USERLIB_DELETE_LIST")},{name:"cancel",style:"grey",size:4,label:vui.strings.getText("USERLIB_CANCEL_BTN")}],buttonContainerLayout:{type:"horizontal"}};controller.showPopup("MyCollectionDeletionDialog",n);break;case"cancel":controller.hidePopup(),vui.MyCollectionActions.manageOption=null}}.bind(this),s={elemClassName:"myCollectionManageDialog",title:a.name,data:{},buttons:[{label:"Reorder List",action:"reorder",size:4,desc:vui._.aStr(a.name)+". Reorder List"},{label:"Remove Titles",action:"remove",size:4},{label:"Edit Name",action:"edit",size:4},{label:vui.strings.getText("USERLIB_DELETE_LIST"),action:"delete",size:4},{label:"Cancel",defaultButtonClass:"btn_bg_cancel_default cancelBtn",selectButtonClass:"btn_bg_select cancelBtn",action:"cancel",size:4}],callback:i};if(controller.showPopup("ChoicesGenericDialog",s),e)switch(e){case"reorder":vui.select(controller.baseLayer.currentDialog.children[0]);break;case"remove":vui.select(controller.baseLayer.currentDialog.children[1]);break;case"rename":vui.select(controller.baseLayer.currentDialog.children[2]);break;case"delete":vui.select(controller.baseLayer.currentDialog.children[3])}controller.baseLayer.currentPage&&controller.baseLayer.currentPage.contentCount&&0<controller.baseLayer.currentPage.contentCount||controller.baseLayer.currentDialog.children&&((t=controller.baseLayer.currentDialog.children)[0]&&(t[0].disable&&t[0].disable(),t[0].onMouseEnter=function(){}),t[1]&&(t[1].disable&&t[1].disable(),t[1].onMouseEnter=function(){}))},posterOnAction:function(e){e&&e.data&&vui._.posterOnAction(e.data)},unBundle:function(e){if("bundle"===vui._.aStr(e.type)&&e.bundledContent){for(var t=[],i=0;i<e.bundledContent.length;i++)t.push(vui._.aStr(e.bundledContent[i].contentId));return t}return vui._.aStr(e.contentId)}},vui.pages.MyCollectionDeletionDialog=new Class({Extends:vui.pages.OverlayDialogNew,Implements:vui.MyCollectionActions,init:function(e){(e=e||{}).dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" myCollectionDeletionDialog posterTextDialog":"myCollectionDeletionDialog posterTextDialog",e.isOpaqueBg=!1,this.parent(e)},show:function(e){e=e||{},this.text=createDiv({text:e.text||"",className:"dialogInnerText font36"},this.dialogBox.elem),this.desc=createDiv({text:e.desc||"",className:"dialogDescText fontWhite28"},this.dialogBox.elem),e.buttons&&(this.dialogBox.setButtons(e.buttons,e.buttonContainerLayout),buttonLabel=e.buttons[0].label),this.callback=e.callback},onButtonEvent:function(e){var t=e.name;"ok"===t?vui.m.myCollectionsModel&&vui.m.myCollectionsModel.removeCollection({userCollectionId:vui._.aStr(this.parentWidget.currentParams.userCollectionId),callback:function(){controller.hidePopup(),controller.goBack()}.bind(this)}):"cancel"===t&&controller.hidePopup()},onBack:function(){this.displayManageCollectionDialog(this.parentWidget.currentParams,function(e){e&&e.name&&controller.baseLayer.currentPage&&controller.baseLayer.currentPage.setTitle(e.name)}.bind(this),"delete")}}),vui.pages.MyCollectionPosterTextDialog=new Class({Extends:vui.pages.OverlayDialogNew,Implements:vui.MyCollectionActions,elemClassName:"myCollectionPosterTextDialog",init:function(e){e=e||{},(this.params=e).dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" posterTextDialog":"posterTextDialog",e.isOpaqueBg=!1,this.movieInfo=e.movieInfo||{},this.parent(e)},show:function(e){e=e||{},this.parent(e);var t="";if(e.title&&(t+=e.title),this.text=createDiv({text:e.text,className:"dialogInnerText font20"},this.dialogBox.elem),t+=". "+e.text,e.secondTitle&&(this.secondTitle.innerHTML=e.secondTitle,t+=". "+e.secondTitle),this.buttonContainer=new vui.widgets.buttonWidgetContainer({elemClassName:"dialogBox_button_container",layout:"vertical"}),this.customButtons=[],e.buttons){var i=e.buttons;if(this.buttonContainer&&this.dialogBox.detachChild(this.buttonContainer),i&&0===i.length)return;this.buttonContainer.elem.addClass("layout_"+i.length+"_buttons"),i[0].elemClassName=" imageActionButton button_0",(n=new vui.widgets.buttonWidget(i[0])).onDirectionUp=function(){this.radioButtons&&0<this.radioButtons.length&&vui.select(this.radioButtons[this.radioButtons.length-1])}.bind(this),this.buttonContainer.attachChild(n),this.customButtons.push(n),this.secondLineButtonsCon=new vui.widgets.HorizontalContainer({elemClassName:"secondLineButtonsCon"});for(var s=1;s<i.length;s++){i[s].elemClassName=" imageActionButton button_"+s;var n=new vui.widgets.buttonWidget(i[s]);1===s&&(n.onDirectionLeft=function(){}.bind(this)),n.onDirectionDown=function(){}.bind(this),this.secondLineButtonsCon.attachChild(n),this.customButtons.push(n)}this.buttonContainer.attachChild(this.secondLineButtonsCon)}if(this.radioButtonContainer=new vui.widgets.HorizontalContainer({elemClassName:"radioButtonContainer"}),this.radioButtons=[],e.radioButtons){t+=". "+e.radioButtons[0].name;for(s=0;s<e.radioButtons.length;s++){var a=e.radioButtons[s];this.radioButtons[s]=new vui.widgets.RadioButton({name:a.name,value:a.name,checked:!1,label:a.desc,style:{position:"relative"},callback:function(){var e=vui.getSelected();if(e){e.setIconActive(),this.setCheckedName(e.params);for(var t=0;t<this.radioButtons.length;t++)t!==e.index&&this.radioButtons[t].setIconDefault()}}.bind(this),onDirectionUp:function(){var e=vui.getSelected();e&&this.radioButtons[e.index-1]&&vui.select(this.radioButtons[e.index-1])}.bind(this),onDirectionDown:function(){var e=vui.getSelected();e&&(this.radioButtons[e.index+1]?vui.select(this.radioButtons[e.index+1]):e.index===this.radioButtons.length-1&&this.customButtons&&this.customButtons[0]&&vui.select(this.customButtons[0]))}.bind(this)}),this.radioButtons[s].index=s,this.radioButtons[s].setIconDefault=function(){this.button.checked=!1,this.button.classList.remove("active"),this.label.classList.remove("active")},this.radioButtons[s].onSelect=function(){this.button.classList.add("active"),this.label.classList.add("active"),vui._.setAriaLabel(this.params.label)},this.radioButtonContainer.attachChild(this.radioButtons[s])}}this.buttonContainer.attachChild(this.radioButtonContainer),this.dialogBox.attachChild(this.buttonContainer),this.callback=e.callback,vui.select(this.radioButtons[0]),vui._.setAriaLabel(t)},setCheckedName:function(e){this.checked=e},onButtonEvent:function(e){var t,i=e.name;"custom"===i?this.displayKeyboard({movieInfo:this.movieInfo,collectionStoreCallback:this.callback}):"cancel"===i?controller.hidePopup():"done"===i&&this.checked&&(t=this.checked.name,this.createOrRenameCollection({result:"done",text:t,collectionStoreCallback:this.callback}))},onBack:function(){controller.hidePopup()}}),vui.widgets.MyCollectionsGridList=new Class({Extends:vui.widgets.CoGridList,name:"vui.widgets.MyCollectionsGridList",partialRow:!1,settings:{normal:{columns:5,rows:2}},rows:3,posterClass:vui.widgets.GridPoster,bind:function(e,t,i){var s,n;e.error?e.error.subCode&&"notFound"===vui._.aStr(e.error.subCode)?(controller.baseLayer.currentPage.params.error=e.error,30<(s=controller.baseLayer.currentPage.params&&vui._.aStr(controller.baseLayer.currentPage.params.name)).length&&(s=s.slice(0,30)+"..."),n={elemClassName:"collectionNotFoundDialog",title:"None",text2:s,text3:"List no longer exists.",buttons:[{label:"OK"}],callback:function(){controller.goBack()}.bind(this)},controller.showPopup("SimpleTextDialog",n)):alert("failed to retrieve the collection"):this.parent(e,t,i)}}),vui.widgets.MyCollectionsPosterGrid=new Class({Extends:vui.widgets.CoVuduPosterGrid,listClass:vui.widgets.MyCollectionsGridList,elemClassName:"myCollectionsPosterGrid",name:"vui.widgets.MyCollectionsPosterGrid",refreshList:function(e){e&&e.sortOrder&&this.list.params&&this.list.params.listParams&&(this.list.params.listParams.sortOrder=e.sortOrder),this.list.refresh(e)},onDirectionRight:function(){this.selectable?(vuiFilters.hasSortAndOrFilter()||vuiFilters.getCurrentFilterType())&&(controller.hidePopup(),vui.executeOnContainer(this.parentWidget,"hideSort_"),vui.select(this)):alert("no content on this grid")},onDirectionLeft:function(){vui.executeOnContainer(this.parentWidget,"showSort_")},listDataReceived:function(e){e.error||this.parent(e)}}),vui.widgets.MyCollectionsSort=new Class({Extends:vui.widgets.VuduSort,name:"vui.widgets.MyCollectionsSort",elemClassName:"myCollectionsSort",show:function(e){this.parent(e),this.displayButtonOptions(this.sort[0].button);var t=controller.baseLayer.currentDialog,i=this;i.elem.style.visibility="visible",t.optionOnAction=function(){var e=this.getSelectedIndex();i.elem.style.visibility="hidden",controller.hidePopup(),this.cb(e.modelIndex)},t.onDirectionRight=function(){vui.executeOnContainer(this.parentWidget,"sortMenuOnDirectionRight")}.bind(this),t.onBack=function(){vui.executeOnContainer(this.parentWidget,"sortMenuOnBack")}.bind(this)}}),vui.widgets.MyCollectionsSortGrid=new Class({Extends:vui.widgets.CoSortGrid,sortClass:vui.widgets.MyCollectionsSort,gridClass:vui.widgets.MyCollectionsPosterGrid,name:"vui.widgets.MyCollectionsSortGrid",elemClassName:"myCollectionsSortGrid CoSortGrid",sortL:window.vui.ResDef.myVuduView.CONTAINER_SORT_L_VUDU,sortListL:window.vui.ResDef.myVuduView.CONTAINER_SORT_LIST_L_VUDU,posterOnAction:function(e){var t={data:e,rowType:this.parentWidget.params.title};vui.executeOnContainer(this.parentWidget,"posterOnAction",t)},sortMenuOnDirectionRight:function(){this.grid.onDirectionRight()},sortMenuOnBack:function(){this.grid.onDirectionRight()},onBack:function(){vui.executeOnContainer(this.parentWidget,"onBack")}}),vui.widgets.MyCollectionsManageButton=new Class({Extends:vui.widgets.ImageActionButton,Implements:vui.MyCollectionActions,init:function(e){(e=e||{}).elemClassName="myCollectionsBtn firstButton",e.defaultClassName="imageActionButton btn_bg_default btn_bg_size4_default",e.selectClassName="imageActionButton btn_bg_select btn_bg_size4_select",e.labelClassName="firstButtonLabel font24",e.label="Manage List",this.parent(e),this.autoSelect=null},callback:function(e){controller.baseLayer&&controller.baseLayer.currentPage&&e&&e.name&&controller.baseLayer.currentPage.setTitle(e.name)},onAction:function(){var e=vui.executeOnContainer(this.parentWidget,"getParams");this.displayManageCollectionDialog(e,null,this.autoSelect),this.autoSelect=null},onSelect:function(){this.parent()},onDeselect:function(){this.parent()}}),vui.widgets.MyCollectionsViewAll=new Class({Extends:vui.pages.Collection,Implements:vui.MyCollectionActions,sortGridClass:vui.widgets.MyCollectionsSortGrid,elemClassName:"myCollectionsViewAll",name:"vui.widgets.MyCollectionsViewAll",init:function(e){this.params=e,this.contentCount=this.contentCount||Number(vui._.aStr(e.contentCount))||0,this.titleText=document.createElement("div"),this.titleText.className="coTitleText",this.elem.appendChild(this.titleText),createImg({className:"myCollectionsLogo"},this.elem).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.topButtonContainer=new vui.widgets.HorizontalContainer({elemClassName:"myCollectionsManageTopBtnCon"}),this.attachChild(this.topButtonContainer),this.manageButton=new vui.widgets.MyCollectionsManageButton,this.manageButton.elem.style.display="none",this.topButtonContainer.attachChild(this.manageButton),this.addTitlesButton=new vui.widgets.ImageActionButton({label:"Add Titles",onAction:function(){vui.MyCollectionActions.manageOption="add",controller.goToPage("MyCollectionsBulkAdd",{collectionParams:this.params,collectionList:this.collectionList,posterType:"add"})}.bind(this),elemClassName:"myCollectionsBtn secondButton",defaultClassName:"imageActionButton btn_bg_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"secondButtonLabel font24"}),this.addTitlesButton.widgetName="addTitlesButton",this.addTitlesButton.elem.style.display="none",this.topButtonContainer.attachChild(this.addTitlesButton),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel),this.hidePanel(),vuiFilters.setCurrentFilterType("userCollections");var t=new vui.widgets.sortCue({text:"Sort"});(this.el.sortCue=t).elem.className="myVuduSortCue clickable",this.attachChild(t),this.sortGrid=new this.sortGridClass,this.attachChild(this.sortGrid),this.sortGrid.grid.emptyMessage.style.display="none",this.sortGrid.sort.clearAll_(),this.emptyMessageCon=createDiv({className:"emptyMessageCon"},this.sortGrid.grid.elem);var i=createDiv({className:"emptyMessage font20",text:"Add movies and TV shows to this list by selecting the Add to List button on any movie or TV season page."});this.emptyMessageCon.appendChild(i),this.emptyMessageCon.style.display="none"},setTitle:function(e){this.parent(e),vui._.aStr(this.params.name)!==e&&(this.params.name=e)},onGotListLength:function(e){this.params.error||(this.contentCount=e,this.parent(),this.sortGrid.grid.emptyMessage.style.display="none",this.addTitlesButton.elem.style.display="block",0===e?(this.manageButton.onDirectionDown=function(){},this.addTitlesButton.onDirectionDown=function(){},vui.select(this.addTitlesButton),this.emptyMessageCon.style.display="block",vui._.setAriaLabel(vui._.aStr(this.params.name)+". Add movies and TV shows to this list by selecting the Add to List button on any movie or TV season page. Add Titles.")):(vui._.setAriaLabel(vui._.aStr(this.params.name)),this.sortGrid.sort.selectable=!1,vui.MyCollectionActions.manageOption?("add"===vui.MyCollectionActions.manageOption?vui.select(this.addTitlesButton):(this.manageButton.autoSelect=vui.MyCollectionActions.manageOption,vui.select(this.manageButton),this.manageButton.onAction()),vui.MyCollectionActions.manageOption=null):vui.select(this.sortGrid)),this.showOrHideSort(),this.manageButton.elem.style.display="block")},listDataReceived:function(e){var t=[];if(e&&e.data)for(var i=0;i<Object.keys(e.data).length;i++)t.push(vui._.aStr(e.data[i].contentId));this.collectionList=t},show:function(e){this.setTitle(e.name);var t={listName:"myCollections",listFetcher:"getMyCollections",listParams:e};e._preSelectedPoster&&(this._preSelectedPoster=e._preSelectedPoster,delete e._preSelectedPoster,e.state&&e.state.gridState&&(e.state.gridState.scrollOffset=0)),this._showGrid(t,e.state&&e.state.gridState),this._preSelect(e.preSelected),this.showPanel()},_showGrid:function(e,t){this.parent(e,t),this.sortGrid.firstTimeAnimate=!1},changeFilters:function(){var e=vuiFilters.getCurrentFilters().sortBy;this.refreshList({sortOrder:{"-ucAddedTime":"defaultOrder",ucTitle:"azOrder","-ucReleaseTime":"-releaseTimeOrder"}[e]}),"-ucAddedTime"===e&&this.sortGrid.sort.clearAll_()},showPanel:function(){this.movieInfoPanel.makeVisible()},hidePanel:function(){this.movieInfoPanel.invisible()},showSort_:function(){this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue()},hideSort_:function(){this.sortGrid.hideSort()},showSortCue:function(){try{"block"===this.emptyMessageCon.style.display?this.el.sortCue.hide():(this.el.sortCue.setDefault(),this.el.sortCue.show())}catch(e){this.el.sortCue.hide()}},hideSortCue:function(){this.el.sortCue.hide()},showOrHideSort:function(){"none"===this.sortGrid.sort.elem.style.display?(vuiFilters.hasSortAndOrFilter()||vuiFilters.getCurrentFilterType())&&this.showSortCue():(this.hideSort_(),this.showPanel(),this.hideSortCue())},getParams:function(){if(this.params)return this.params},refreshList:function(e){e&&e.sortOrder&&this.sortGrid.grid.refreshList(e)},selectSortButton:function(){vui.select(this.sortButton)},save:function(){var e=this.params,t=vui.getSelected();return e.state=this.saveState(),e.state.lastSelected=t,e},onBack:function(){controller.goBack()}}),vui.widgets.MyCollectionsNewButton=new Class({Extends:vui.widgets.ImageActionButton,Implements:vui.MyCollectionActions,init:function(e){(e=e||{}).defaultClassName="imageActionButton btn_bg_default btn_bg_size4_default",e.selectClassName="imageActionButton btn_bg_select btn_bg_size4_default",e.labelClassName="addCollectionBtnLabel font24",this.parent(e),this.setLabel(vui.strings.getText("USERLIB_CREATE_LIST"))},onAction:function(){var i;vui.m.myCollectionsModel&&vui.m.myCollectionsModel.checkIfCanAddMoreCollections()?(i=vui.executeOnContainer(this.parentWidget,"getMovieInfo"),vui.MyCollectionActions.skipLandingOnNewListBtn=!0,vui.executeOnContainer(this.parentWidget,"clearState"),this.displayNewCollectionDialog({createdFrom:i?"Product Detail Page":"MyVudu",movieInfo:i,callback:function(e){var t=function(){vui.MyCollectionActions.skipLandingOnNewListBtn=!1,i?vui.executeOnContainer(this.parentWidget,"showConfirmationAfterCreation",e):vui.executeOnContainer(this.parentWidget,"selectRecentAdded",e)}.bind(this);vui.executeOnContainer(this.parentWidget,"refreshList",t)}.bind(this)})):this.displayMaxNumberDialog()},onSelect:function(){vui.MyCollectionActions.skipLandingOnNewListBtn||(this.parent(),vui._.setAriaLabel("New list."))}}),vui.widgets.MyCollectionsTopButtonContainer=new Class({Extends:vui.widgets.HorizontalContainer,elemClassName:"myCollectionsTopButtonContainer",getMovieInfo:function(){return vui.executeOnContainer(this.parentWidget,"getMovieInfo")},refreshList:function(e){vui.executeOnContainer(this.parentWidget,"refreshList",e)},selectRecentAdded:function(){vui.select(this.parentWidget.grid.list.children[0])},showConfirmationAfterCreation:function(e){vui.executeOnContainer(this.parentWidget,"showConfirmationAfterCreation",e)},clearState:function(){vui.executeOnContainer(this.parentWidget,"clearState")}}),vui.widgets.MyCollectionsDoneButton=new Class({Extends:vui.widgets.ImageActionButton,init:function(e){(e=e||{}).defaultClassName="imageActionButton btn_bg_default btn_bg_size4_default",e.selectClassName="imageActionButton btn_bg_select btn_bg_size4_default",e.labelClassName="addCollectionBtnLabel font24",this.parent(e),this.setLabel("Done")},onAction:function(){controller.goBack()},onSelect:function(){this.parent(),this.ariaLabel&&(vui._.setAriaLabel(this.ariaLabel),this.ariaLabel="Done")}}),vui.widgets.MyCollectionsPoster=new Class({Extends:vui.widgets.LeafContainer,Implements:vui.MyCollectionActions,name:"vui.widgets.MyCollectionsPoster",elemClassName:"myCollectionsPoster",init:function(e){this.addToWishlist=[],this.addId=null,this.removeId=null,this.width=window.vui.ResDef.myVuduView.COLLECTION_POSTER_W,this.height=window.vui.ResDef.myVuduView.COLLECTION_POSTER_H,this.posterWidth=0,this.posterHeight=0,this.elem.id=e,this.container=createDiv({className:"myCollectionContainer"}),this.posterContainer=createDiv({className:"myCollectionPosterContainer"});for(var t=0;t<3;t++){var i=document.createElement("img");i.src=vui.images.empty1x1,i.width=window.vui.ResDef.myVuduView.COLLECTION_MINI_POSTER_W,i.height=window.vui.ResDef.myVuduView.COLLECTION_MINI_POSTER_H,this.posterContainer.appendChild(i)}this.container.appendChild(this.posterContainer),this.bottomCon=new vui.widgets.HorizontalContainer({elemClassName:"myCollectionBottomCon font20"}),this.titleCon=createDiv({className:"myCollectionTitleCon"}),this.title=createDiv({className:"myCollectionTitle mediumCollectionTitle"},this.titleCon),this.titleCount=createDiv({className:"myCollectionTitleCount"},this.titleCon),this.bottomCon.elem.appendChild(this.titleCon),this.elem.appendChild(this.container),this.withCheckMarks=!1,this.checkMark=createDiv({className:"myCollectionCheckMark"}),this.checkMark.style.display="none",this.bottomCon.elem.appendChild(this.checkMark),this.container.appendChild(this.bottomCon.elem),this.addIcon=createDiv({className:"myCollectionPosterAddIcon",text:"&#xFF0B;"},this.container),this.addIcon.style.display="none",controller.baseLayer.currentPage&&(controller.baseLayer.currentPage.activeTab||(this.withCheckMarks=!0,this.checkMark.style.display="inline-block",this.title.addClass("narrowCollectionTitle"))),this.confirm=createDiv({className:"confirmIcon"}),this.elem.appendChild(this.confirm),this.confirm.style.display="none",this.confirmType=""},bind:function(e){if(e){this._setIconDefault(),this.selectable||(this.selectable=!0),this.elem.style.visibility="visible",this.data=e,this.confirm.style.display,this.titleCount.style.display="none",this.addIcon.style.display="none",this.posterContainer.style.display="block",this.titleCount.removeClass("fullCollectionTitleCount"),this.title.addClass("mediumCollectionTitle");var t="";e.name&&(t=vui._.aStr(e.name),this.title.innerHTML=t),this.titleCount.style.display="block";var i=e.contentCount&&vui._.aStr(e.contentCount)||0;this.movieInfoModel={},this.parentWidget&&this.parentWidget.getMovieInfo&&(this.movieInfoModel=this.parentWidget.getMovieInfo(),this.movieInfoModel&&(this.movieInfoData=this.movieInfoModel.data,this.contentType=vui._.aStr(this.movieInfoData.type))),this.fullList="userCollection"===this.data._type&&vui.m.myCollectionsModel&&!vui.m.myCollectionsModel.checkIfCanAddMoreTitles(i);var s=vui.executeOnContainer(this.parentWidget,"getCollectionListWithContent");"bundle"===this.contentType?this.contentInCollection=vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getIsBundleInCollection(this.data.contents,this.movieInfoData):this.contentInCollection=this.movieInfoData&&vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getIsContentInCollection(this.data,vui._.aStr(this.movieInfoData.contentId),s),this.withCheckMarks&&(this.checkMark.style.display="inline-block",this.setEmpty(),"userCollection"!==this.data._type||this.fullList&&!this.contentInCollection?"wishlist"===this.data._type&&this.movieInfoModel.isWished()&&this.setGreen():this.contentInCollection&&this.setGreen()),0<i.length&&"0"!==i?!this.fullList||this.contentInCollection?(this.titleCount.innerHTML=" ("+vui._.aStr(e.contentCount)+")",this.withCheckMarks&&(this.title.removeClass("mediumCollectionTitle"),this.title.addClass("narrowCollectionTitle"))):(this.titleCount.innerHTML=" ("+vui._.aStr(e.contentCount)+" - Full)",this.checkMark.style.display="none",this.title.removeClass("mediumCollectionTitle"),this.title.addClass("narrowCollectionTitle"),this.titleCount.addClass("fullCollectionTitleCount")):this.titleCount.innerHTML=" (0)",this.title.innerHTML=t;for(var n,a=0;a<3;a++){this.posterContainer.children[a].src=vui.images.empty1x1,e.contents&&e.contents[a]&&((n=e.contents[a]).resizedPosterUrl=vui.getModel().getPosterUrl(n,window.vui.ResDef.myVuduView.COLLECTION_POSTER_IMG_UPSCALE_W),n.resizedPosterUrl&&(this.posterContainer.children[a].src=n.resizedPosterUrl))}}},unbind:function(){this.selectable&&(this.selectable=!1),this.elem.style.visibility="hidden"},onSelect:function(){if(this._setIconActive(),"block"!==this.confirm.style.display)if(this.updated)this.updated=!1;else{var e=vui.getSelected();if(e&&e.data){for(var t=e.data,i=(i=vui._.aStr(t.name)).split(""),s=0;s<i.length;s++)i[s]=vui._.getSymbolLabel(i[s]);i=i.join("");var n=vui._.aStr(t.contentCount);i+=", "+n+" in list.","userCollection"===t._type&&vui.m.myCollectionsModel&&n>=vui.m.myCollectionsModel.getMaxContentCount()&&!this.contentInCollection&&(i+=". Full"),vui._.setAriaLabel(i)}}},onDeselect:function(){this._setIconDefault(),vui.executeOnContainer(this.parentWidget,"clearAnimation")},onAction:function(){var e,t,i;"block"===this.confirm.style.display||this.parentWidget.updateTimer||(vui.executeOnContainer(this.parentWidget,"setUpdateTimer"),(e=vui.getSelected())&&e.data&&("userCollection"===(t=e.data)._type?i=function(){if(this.withCheckMarks){if(this.fullList&&!this.contentInCollection)return;this.updateCollection()}else controller.goToPage("MyCollectionsViewAll",t)}.bind(this):"wishlist"===t._type&&(i=function(){this.withCheckMarks&&this.updateWishlist()}.bind(this)),i()))},setGreen:function(){this.checkMark.style.backgroundImage="url('"+vui.images.userCollection.circle_green+"')",this.checked="green"},setRed:function(){this.checkMark.style.backgroundImage="url('"+vui.images.userCollection.circle_red+"')",this.checked="red"},setEmpty:function(){this.checkMark.style.backgroundImage="url('"+vui.images.userCollection.circle_empty+"')",this.checked="empty"},setBlackEmpty:function(){this.checkMark.style.backgroundImage="url('"+vui.images.userCollection.circle_empty_black+"')",this.checked="blackEmpty"},toggleCheckmark:function(e){var t=vui._.aStr(this.data.name),i=Number(vui._.aStr(this.data.contentCount)),s="";"green"===this.checked?(i-=e||1,this.contentInCollection=!1,s="Removed from "):"blackEmpty"===this.checked?(i+=e||1,this.contentInCollection=!0,s="Added to "):alert("error on check mark"),s+=" "+t+". "+i+" in list","userCollection"===this.data._type&&vui.m.myCollectionsModel&&i>=vui.m.myCollectionsModel.getMaxContentCount()&&!this.contentInCollection&&(s+=". Full"),vui._.setAriaLabel(s),this.updated=!0},reportContentAddition:function(){var e="",t="",i="",s="",n=this.movieInfoModel.getAvailableOfferTypes(),i=n&&n.preorder?"Pre-orders":this.movieInfoData.isAdvertEnabled&&"true"===vui._.aStr(this.movieInfoData.isAdvertEnabled)?"AVOD":"TVOD",e="program"===vui._.aStr(this.movieInfoData.type)?"Movie":"TV",t=this.movieInfoData.ownerships||vui.m.ownedMovieCache[this.movieInfoData.contentId]?"owned":"non-owned",s="Pre-orders"===i||"AVOD"===i?i:e+" | "+i+" "+t,a={collectionTitleAdded:"Product Detail Page"};a.collectionTitleAddedType=s},updateCollection:function(){var t,e;this.movieInfoData&&this.data&&(this.contentInCollection?(this.removeId=this.data.userCollectionId,this.confirmType="remove"):(this.addId=this.data.userCollectionId,this.confirmType="add"),t=function(){if(this.parentWidget){var a=vui.executeOnContainer(this.parentWidget,"getMovieInfo"),e=vui.MyCollectionActions.unBundle(a.data);if("bundle"===vui._.aStr(a.data.type)){var t=a.data.bundledContent.length;if(this.addId){var i=vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getMaxContentCount();if(i-Number(this.data.contentCount)<t){var s={elemClassName:"myCollectionMaxContentLimitDialog",title:"Unable to Add",text:"You have the maximum number of titles allowed ("+i+").",buttons:[{label:"OK"}],callback:function(){controller.hidePopup()}.bind(this)};return void controller.showPopup("SimpleTextDialog",s)}}}var n=function(e){this.updating=!1,vui.executeOnContainer(this.parentWidget,"removeUpdatingCollections",this.data.userCollectionId);var t,i,s,n=vui._.aStr(this.data.name);"success"===e._type?(this.addId&&this.reportContentAddition(),t=1,"bundle"===vui._.aStr(a.data.type)&&(t=a.data.bundledContent.length),this.toggleCheckmark(t),vui.executeOnContainer(this.parentWidget,"refreshList",function(){var e=this;n!==vui._.aStr(this.data.name)&&(e=vui.executeOnContainer(this.parentWidget,"getCollection",n)),e.confirmType=this.confirmType,vui.select(e),vui.getSelected().resetCollectionsToUpdate(),vui.getSelected().showConfirmation()}.bind(this))):"error"===e._type&&(e.subCode&&"notFound"===vui._.aStr(e.subCode)?(i="",this.addId?i="Add To":this.removeId&&(i="Remove From"),s={elemClassName:"collectionNotFoundDialog",title:"Unable to "+i,text2:n,text3:"List no longer exists.",buttons:[{label:"OK"}],callback:function(){controller.hidePopup(),vui.executeOnContainer(this.parentWidget,"refreshList",function(){this.resetCollectionsToUpdate()}.bind(this))}.bind(this)},controller.showPopup("SimpleTextDialog",s)):alert("failed to update collectioins"))}.bind(this);0===this.parentWidget.isUpdatingArr.length&&(this.updating=!0,vui.executeOnContainer(this.parentWidget,"addUpdatingCollections",this.data.userCollectionId),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.updateMyCollections(e,this.removeId,this.addId,null,n))}}.bind(this),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.userId?t():(e=function(e){"quit"!==e&&"success"===e&&t()}.bind(this),vui.ActivationController.beginActivation(e)))},updateWishlist:function(){var t,e;this.movieInfoData&&this.data&&(this.movieInfoModel.isWished()?(this.addToWishlist=[!1,this.movieInfoModel],this.confirmType="remove"):(this.addToWishlist=[!0,this.movieInfoModel],this.confirmType="add"),vui.m.ownedMovieCache[this.movieInfoData.contentId]||(t=function(){var e,t,i;this.parentWidget&&(e=vui.executeOnContainer(this.parentWidget,"getMovieInfo"),t=vui._.aStr(e.data.contentId),i=function(e){"ok"===e?(this.toggleCheckmark(),vui.executeOnContainer(this.parentWidget,"refreshList",function(){this.resetCollectionsToUpdate(),this.showConfirmation()}.bind(this))):alert("failed to update Wishlist")}.bind(this),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.updateMyCollections(t,null,null,this.addToWishlist,i))}.bind(this),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.userId?t():(e=function(e){"quit"!==e&&"success"===e&&t()}.bind(this),vui.ActivationController.beginActivation(e))))},showConfirmation:function(){"add"===this.confirmType?this.confirm.style.backgroundImage="url('"+vui.images.userCollection.confirmation+"')":this.confirm.style.backgroundImage="",this.confirm.style.display="block",this.container.addClass("opacity30"),this.updating||vui.executeOnContainer(this.parentWidget,"setAnimation",this)},resetCollectionsToUpdate:function(){this.addToWishlist=[],this.addId=null,this.removeId=null},_setIconActive:function(){this.container.style.border="1px solid transparent",this.elem.style.border="4px solid #ffffff",this.container.style.backgroundColor="#ffffff",this.container.style.borderRadius="4px",this.bottomCon.elem.style.color="#000000","empty"===this.checked&&this.setBlackEmpty()},_setIconDefault:function(){this.elem.style.border="4px solid transparent",this.container.style.border="1px solid #041c2c",this.container.style.backgroundColor="#083452",this.bottomCon.elem.style.color="#ffffff","blackEmpty"===this.checked&&this.setEmpty()}}),vui.widgets.MyCollectionGridList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.MyCollectionGridList",posterClass:vui.widgets.MyCollectionsPoster,settings:{normal:{columns:4,rows:2}},columns:4,rows:2,partialRow:!1,currentStart:0,refreshTimer:null,expiredRemoved:!1,getState:function(){return this.state},saveState:function(e){this.state=e},init:function(e){this.params=e||{},this.parent(e),this.isUpdatingArr=[]},getCollection:function(e){if(this.children&&e){for(var t,i=0;i<this.children.length;i++)if(vui._.aStr(this.children[i].data.name)===e){t=this.children[i];break}return t}},getCollectionListModel:function(e){function t(e){return i[e]}var i=vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getCache(e),s=i.length;return this.saveState({data:i,totalCount:s,get:t}),{data:i,totalCount:s,get:t}},refreshList:function(e){this.parentWidget.scroller.hide();var t=this.parentWidget&&this.parentWidget.params,i=!1;t&&t.enteredFrom&&"details"===t.enteredFrom&&!t.movieInfo.data.ownerships&&!vui.m.ownedMovieCache[t.movieInfo.data.contentId]&&(i=!0);var s,n,a="false";t&&t.enteredFrom&&"details"===t.enteredFrom&&t.movieInfo.data.contentId&&(s=vui._.aStr(t.movieInfo.data.contentId),(n=vui._.aStr(t.movieInfo.data.type))&&"bundle"===n&&(a="true"));var o=function(){vui.m.wishedMovieCache.refresh(),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.load(function(){this.movieListModel=this.getCollectionListModel(i),(this.partialRow&&this.movieListModel.totalCount>(this.rows-1)*this.columns||!this.partialRow&&this.movieListModel.totalCount>this.rows*this.columns)&&this.parentWidget.scroller.show(),0===this.movieListModel.totalCount?(this.parentWidget.emptyMessage.style.display="block",vui._.setAriaLabel(this.parentWidget.emptyMessage.innerHTML),vui.executeOnContainer(this.parentWidget,"setDoneButtonAriaLabel",this.parentWidget.emptyMessage.innerHTML)):this.parentWidget.emptyMessage.style.display="none",this.update(),vui.executeOnContainer(this.parentWidget,"showOrHideRange",this.movieListModel.totalCount),0<this.movieListModel.totalCount&&vui.executeOnContainer(this.parentWidget,"setFocusOnGrid"),e&&e(this.movieListModel.totalCount)}.bind(this),a)}.bind(this);!s||a&&"true"===a?o():vui.m.myCollectionsModel.getCollectionsWithContent({contentId:s,callback:function(e){this.parentWidget.parentWidget.params.collectionList=e,o()}.bind(this)})},addUpdatingCollections:function(e){this.isUpdatingArr.push(e)},removeUpdatingCollections:function(t){this.isUpdatingArr=this.isUpdatingArr.filter(function(e){return e!==t})},select:function(){this.parent.apply(this,arguments)},getMovieInfo:function(){return vui.executeOnContainer(this.parentWidget,"getMovieInfo")},setAnimation:function(e){this.animationItem=e,this.confirmationTimer=setTimeout(function(){this.animationItem.confirm.style.display="none",this.animationItem.confirmType="",this.animationItem.container.removeClass("opacity30"),clearTimeout(this.confirmationTimer)}.bind(this),500)},clearAnimation:function(){this.animationItem&&(this.animationItem.confirm.style.display="none",this.animationItem.container.removeClass("opacity30"))},setUpdateTimer:function(){this.updateTimer=setTimeout(function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}.bind(this),1e3)}}),vui.widgets.MyCollectionPosterGrid=new Class({Extends:vui.widgets.PosterGrid,name:"vui.widgets.MyCollectionPosterGrid",elemClassName:"myCollectionPosterGrid",Implements:[vui.gridPanelGlue,vui.widgets.NavBackDelegate,vui.ContentActions],listClass:vui.widgets.MyCollectionGridList,init:function(e){this.params=e||{},this.parent.apply(this,arguments),this.range.style.width=window.vui.ResDef.myVuduView.RESUME_RANGE+"px",this.emptyMessage.innerHTML=vui.m.userId?vui.strings.getText("USERLIB_EMPTY_LIST_CREATE_NEW"):"Please sign in to see your lists.",this.emptyMessage.removeClass("fontItalicDull"),this.emptyMessage.addClass("fontWhite20")},getMovieInfo:function(){return vui.executeOnContainer(this.parentWidget,"getMovieInfo")},showOrHideRange:function(e){e>this.list.numVisible?this.range.style.display="block":this.range.style.display="none"},setFocusOnGrid:function(){this.parentWidget.enteredFromDetails&&vui.select(this)},onDirectionUp:function(){vui.executeOnContainer(this.parentWidget,"selectUpperButton")},setDoneButtonAriaLabel:function(e){vui.executeOnContainer(this.parentWidget,"setDoneButtonAriaLabel",e)},getCollectionListWithContent:function(){return vui.executeOnContainer(this.parentWidget,"getCollectionListWithContent")}}),vui.widgets.MyCollectionsView=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MyCollectionsView",elemClassName:"myCollectionsView",init:function(e){var t,i;this.params=e||{},this.title=createDiv({className:"myCollectionsTitle fontWhite24",text:"My Lists"},this.elem),this.buttonContainer=new vui.widgets.MyCollectionsTopButtonContainer,this.buttonContainer.elem.style.position="relative",this.enteredFromDetails=!1,e&&e.enteredFrom&&"details"===e.enteredFrom&&(this.enteredFromDetails=!0,this.title.innerHTML="Uncheck to Remove",this.title.style.color="#B0BEC5",this.title.style.display="none",createImg({className:"familySettingLogo"},this.elem).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,t=e.movieInfo&&e.movieInfo.data,this.header=createDiv({className:"myCollectionsHeader"}),i=vui.getModel().getPosterUrl(t,window.vui.ResDef.myVuduView.COLLECTION_POSTER_IMG_UPSCALE_W)||vui.images.empty1x1,createImg({className:"myCollectionsHeaderImg",src:i,width:window.vui.ResDef.myVuduView.COLLECTION_MINI_POSTER_W,height:window.vui.ResDef.myVuduView.COLLECTION_MINI_POSTER_H},this.header),this.headerTitle=createDiv({className:"myCollectionsHeaderTitle fontWhite40",text:"Select List(s) to Add"},this.header),this.titleText=createDiv({className:"myCollectionsHeaderDesc font36",text:"bundle"===vui._.aStr(t.type)?"Contents of "+vui._.aStr(t.title):vui._.aStr(t.title)||""},this.header),this.elem.appendChild(this.header),this.doneButton=new vui.widgets.MyCollectionsDoneButton({elemClassName:"myCollectionsBtn doneBtn"}),this.buttonContainer.attachChild(this.doneButton)),this.newButton=new vui.widgets.MyCollectionsNewButton({elemClassName:"myCollectionsBtn newBtn"}),this.buttonContainer.attachChild(this.newButton),this.buttonContainer.elem.style.display="none",vui.m.userId&&this.attachChild(this.buttonContainer),this.grid=new vui.widgets.MyCollectionPosterGrid(this.params),this.grid.selectable=!0,this.attachChild(this.grid)},save:function(){var e={};return e.enteredFrom=this.params.enteredFrom,e.movieInfo=this.params.movieInfo,e},saveState:function(){return{scrollOffset:this.grid.getScrollOffset(),listSelected:this.grid.list.selected}},clearState:function(){this.grid.list.currentStart=0},show:function(u){this.elem.style.display="block",vui.m.userId&&this.setSelectable(!0),vui.executeOnContainer(this.parentWidget,"hidePanel"),vui.executeOnContainer(this.parentWidget,"moveMetaPanelOffscreen"),this.grid.list.currentStart=u&&u.scrollOffset||0,this.selected=u&&u.selected||0,this.grid.list.refreshList(function(e){var t,i,s,n,a,o,r,l;this.buttonContainer.elem.style.display="block",this.enteredFromDetails&&(0<e?(vui.select(this.grid),this.title.style.display="block"):this.title.style.display="none"),u&&"number"==typeof u.listSelected&&this.grid.list.children&&(this.grid.list.children[u.listSelected]&&this.grid.list.children[u.listSelected].data?vui.select(this.grid.list.children[u.listSelected]):this.grid.list.children[u.listSelected-1]&&this.grid.list.children[u.listSelected-1].data&&vui.select(this.grid.list.children[u.listSelected-1])),!this.enteredFromDetails||(t=this.params.movieInfo&&this.params.movieInfo.data)&&this.grid.list.movieListModel&&this.grid.list.movieListModel.data&&((i=this.grid.list.movieListModel.data[0])&&(s=i.name,n=i.contentCount,a=i._type,o="",o+="Select Lists to Add. "+this.titleText.innerHTML+".",o+=". "+s,o+=". "+n,o+=" in list",r=this.getCollectionListWithContent(),l=!1,l="bundle"===vui._.aStr(t.type)?vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getIsBundleInCollection(i.contents,t):vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getIsContentInCollection(i,vui._.aStr(t.contentId),r),"userCollection"===a&&vui.m.myCollectionsModel&&n>=vui.m.myCollectionsModel.getMaxContentCount()&&!l&&(o+=". Full"),vui._.setAriaLabel(o)))}.bind(this))},getCollectionListWithContent:function(){return this.params&&this.params.collectionList?this.params.collectionList:[]},selectUpperButton:function(){this.doneButton?vui.select(this.doneButton):vui.select(this.newButton)},hide:function(){this.elem.style.display="none",this.setSelectable(!1)},refreshList:function(e){this.grid.list.refreshList(e)},getMovieInfo:function(){return this.params&&this.params.movieInfo?this.params.movieInfo:null},showConfirmationAfterCreation:function(t){var e,i;t&&t.name&&((e=this.grid.list.children.filter(function(e){return e.data&&e.data.name&&vui._.aStr(e.data.name)===t.name}))&&0<e.length&&((i=e[0]).confirmType="add",vui.select(i),i.showConfirmation()))},setDoneButtonAriaLabel:function(e){this.params&&this.params.movieInfo&&this.params.movieInfo.data&&(this.doneButton.ariaLabel="Select Lists to Add. "+vui._.aStr(this.params.movieInfo.data.title)+". "+e+". Done.")},onBack:function(){this.enteredFromDetails?controller.goBack():vui.select(this.parentWidget.subTab.subTabs[this.parentWidget.selectedInd])}}),vui.widgets.MyCollectionsBulkAddDeletePoster=new Class({Extends:vui.widgets.GridPoster,elemClassName:"myCollectionsBulkAddDeletePoster",name:"vui.widgets.MyCollectionsBulkAddDeletePoster",init:function(e,t){this.parent(e,t),this.checkmarkOverlay=createDiv({className:"posterGridCheckmarkOverlay opacity50"}),this.checkmarkImg=createImg({className:"posterGridOverlayCheckmark",src:vui.images.userCollection.circle_empty}),this.checkmarkState="empty",this.itemContainer.appendChild(this.checkmarkOverlay),this.itemContainer.appendChild(this.checkmarkImg),this.skipSameWidgetTTS=!0},bind:function(e,t){this.parent(e,t),this.collectionList=vui.executeOnContainer(this.parentWidget,"getCollectionList")||[],this.posterType=vui.executeOnContainer(this.parentWidget,"getPosterType"),"bundle"!==vui._.aStr(this.data.type)?(this.inCollection=this.isContentInCollection(this.data,this.collectionList),this.inCollection?this.setGray():this.isContentInCandidate(this.data)?"add"===this.posterType?this.setGreen():this.setRed():this.setEmpty()):vui.getModel().getMovieInfo(this.data.contentId,function(e){this.data.bundledContent=e.data.bundledContent||null,this.inCollection=this.isBundleInCollection(this.data,this.collectionList),this.inCollection?this.setGray():this.isContentInCandidate(this.data)?"add"===this.posterType?this.setGreen():this.setRed():this.setEmpty()}.bind(this))},setEmpty:function(){this.checkmarkImg.src=vui.images.userCollection.circle_empty,this.checkmarkState="empty"},setGreen:function(){this.checkmarkImg.src=vui.images.userCollection.circle_green,this.checkmarkState="green"},setRed:function(){this.checkmarkImg.src=vui.images.userCollection.circle_red,this.checkmarkState="red"},setGray:function(){this.checkmarkImg.src=vui.images.userCollection.circle_gray,this.checkmarkState="gray"},isContentInCandidate:function(e){var t=vui._.aStr(e.contentId);if("bundle"!==vui._.aStr(e.type)){var i=vui.executeOnContainer(this.parentWidget,"getBulkAddDeleteCandidate");return i&&i.contains(t)}var s=vui.executeOnContainer(this.parentWidget,"getBundleCandidate");return s&&s.contains(t)},isContentInCollection:function(e,t){var i=vui._.aStr(e.contentId);return t.contains(i)},isBundleInCollection:function(e,t){if(!e||!t||!e.bundledContent)return!1;for(var i=0,s=0;s<t.length;s++)for(var n=0;n<e.bundledContent.length;n++)vui._.aStr(t[s])===vui._.aStr(e.bundledContent[n].contentId)&&(i+=1);return i===e.bundledContent.length},onSelect:function(){this.parent();var e="empty",t=vui._.aStr(this.data.title);this.collectionParams=vui.executeOnContainer(this.parentWidget,"getParams");var i=vui._.aStr(this.collectionParams.name),s="";this.inCollection?(e="gray",s=t+" already added to "+i+"."):this.isContentInCandidate(this.data)?"add"===this.posterType?(e="green",s=t+" added to "+i+"."):"remove"===this.posterType&&(e="red",s=t+" removed from "+i+"."):"add"===this.posterType?s="Select to add "+t+".":"remove"===this.posterType&&(s="Select to remove "+t+"."),vui.executeOnContainer(this.parentWidget,"updateBposterCheckmark",e),vui._.setAriaLabel(s)},onAction:function(){this.toggleCheckmark()},toggleCheckmark:function(){var e=vui._.aStr(this.data.title);this.collectionParams=vui.executeOnContainer(this.parentWidget,"getParams");var t=vui._.aStr(this.collectionParams.name);"gray"!==this.checkmarkState&&("empty"===this.checkmarkState?"add"===this.posterType?(this.setGreen(),vui.executeOnContainer(this.parentWidget,"updateBposterCheckmark","green"),vui._.setAriaLabel(e+" added to "+t+".")):"remove"===this.posterType&&(this.setRed(),vui.executeOnContainer(this.parentWidget,"updateBposterCheckmark","red"),vui._.setAriaLabel(e+" removed from "+t+".")):"green"!==this.checkmarkState&&"red"!==this.checkmarkState||("green"===this.checkmarkState?vui._.setAriaLabel(e+" removed from "+t+"."):"red"===this.checkmarkState&&vui._.setAriaLabel(e+" added to "+t+"."),this.setEmpty(),vui.executeOnContainer(this.parentWidget,"updateBposterCheckmark","empty")),vui.executeOnContainer(this.parentWidget,"updateBulkAddDeleteCandidate",this))}}),vui.widgets.MyCollectionsBulkAddList=new Class({Extends:vui.widgets.MovieGridList,elemClassName:"myCollectionsBulkAddList",posterClass:vui.widgets.MyCollectionsBulkAddDeletePoster}),vui.widgets.MyCollectionsBulkAddPosterGrid=new Class({Extends:vui.widgets.PosterGrid,listClass:vui.widgets.MyCollectionsBulkAddList,elemClassName:"myCollectionsPosterGrid myCollectionsBulkAddPosterGrid",init:function(){this.parent.apply(this,arguments),this.blowupCheckmarkOverlay=createDiv({className:"blowupCheckmarkOverlay opacity50"}),this.blowupCheckmarkImg=createImg({className:"blowupOverlayCheckmark",src:vui.images.userCollection.circle_empty}),this.bposter.elem.appendChild(this.blowupCheckmarkOverlay),this.bposter.elem.appendChild(this.blowupCheckmarkImg),this.bundleCandidate=[],this.bulkAddCandidate=[],this.emptyMessage.innerHTML="Currently, you do not own any movies or TV shows.<br>Click the Search To Add button to find and add any content.",this.emptyMessage.removeClass("fontItalicDull"),this.title=createDiv({className:"bulkAddPosterGridTitle fontWhite20",text:"From My Movies and TV"}),this.elem.appendChild(this.title),this.bposter.skipTTS=!0},select:function(){this.parent.apply(this,arguments)},updateBposterCheckmark:function(e){this.blowupCheckmarkImg.src=vui.images.userCollection["circle_"+e]},updateBundleCandidate:function(e){var t=vui._.aStr(e.data.contentId);"green"===e.checkmarkState?this.bundleCandidate.contains(t)||this.bundleCandidate.push(t):"empty"===e.checkmarkState&&(this.bundleCandidate=this.bundleCandidate.filter(function(e){return e!==t}))},updateBulkAddDeleteCandidate:function(e){var t=function(t){"green"===e.checkmarkState?this.bulkAddCandidate.contains(t)||this.bulkAddCandidate.push(t):"empty"===e.checkmarkState&&(this.bulkAddCandidate=this.bulkAddCandidate.filter(function(e){return e!==t}))}.bind(this);if("bundle"===vui._.aStr(e.data.type)){for(var i=vui.MyCollectionActions.unBundle(e.data),s=0;s<i.length;s++){t(i[s])}this.updateBundleCandidate(e)}else{t(vui._.aStr(e.data.contentId))}},resetBulkAddDeleteCandidate:function(){this.bulkAddCandidate=[],this.bundleCandidate=[]},getBulkAddDeleteCandidate:function(){return this.bulkAddCandidate},getBundleCandidate:function(){return this.bundleCandidate}}),vui.widgets.MyCollectionsBulkAddSortGrid=new Class({Extends:vui.widgets.VuduSortGrid,elemClassName:"myCollectionsBulkAddSortGrid",sortClass:vui.widgets.MyVuduSort,gridClass:vui.widgets.MyCollectionsBulkAddPosterGrid,show:function(e){e&&e.title&&(this.title=e.title),this.parent.apply(this,arguments),e.vpm&&e.vpm.state||(this.firstTimeAnimate=!1),this.sort.refreshLabel(),this.grid.setList(e.vpm),vui.executeOnContainer(this.parentWidget,"showSort_"),vuiFilters.hasSortAndOrFilter()?vui.select(this.sort):vui.select(this.grid),this.grid.list.currentStart=e.scrollOffset||0},onDirectionRight:function(){vui.select(this.grid)},onAction:function(){this.onDirectionLeft()},changeFilters:function(){this.vpm.state=null,this.parent();var e=vuiFilters.getCurrentFilters();e&&e.userCollectionType?"movies"===e.userCollectionType?this.grid.title.innerHTML="From My Movies":"tv"===e.userCollectionType?this.grid.title.innerHTML="From My TV":"moviesAndTv"===e.userCollectionType&&(this.grid.title.innerHTML="From My Movies and TV"):this.grid.title.innerHTML="From My Movies and TV"},listDataReceived:function(){},getParams:function(){return vui.executeOnContainer(this.parentWidget,"getParams")}}),vui.widgets.MyCollectionsBulkAdd=new Class({Extends:vui.widgets.Container,Implements:[vui.gridPanelGlue,vui.MyCollectionActions],elemClassName:"myCollectionsBulkAdd",name:"vui.widgets.MyCollectionsBulkAdd",sortClass:vui.widgets.MyVuduSort,gridClass:vui.widgets.MyCollectionsBulkAddPosterGrid,init:function(e){this.params=e&&e.collectionParams,this.collectionList=e&&e.collectionList,this.bulkPosterType=e&&e.posterType,this.titleText=document.createElement("div"),this.titleText.className="titleText",this.elem.appendChild(this.titleText),createImg({className:"myCollectionsLogo"},this.elem).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.topButtonContainer=new vui.widgets.HorizontalContainer({elemClassName:"myCollectionsManageTopBtnCon"}),this.topButtonContainerOnMouseEnter=this.topButtonContainer.onMouseEnter,this.attachChild(this.topButtonContainer),this.topButtonContainer.elem.style.display="none",this.cancelButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_CANCEL_BTN"),onAction:function(){this.sortGrid.grid.resetBulkAddDeleteCandidate(),controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn firstButton",defaultClassName:"imageActionButton btn_bg_cancel_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"firstButtonLabel font24"}),this.topButtonContainer.attachChild(this.cancelButton),this.doneButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_DONE_BTN"),onAction:function(){vui.MyCollectionActions.manageOption=null;var e,t=this.sortGrid.grid.getBulkAddDeleteCandidate(),i=vui.m.myCollectionsModel&&vui.m.myCollectionsModel.getMaxContentCount();t&&t.length+this.collectionList.length>i?(e={elemClassName:"myCollectionMaxContentLimitDialog",title:"Unable to Add",text:"You have the maximum number of titles allowed ("+i+").",buttons:[{label:"OK"}],callback:function(){controller.hidePopup()}.bind(this)},controller.showPopup("SimpleTextDialog",e)):t&&0<t.length?vui.m.myCollectionsModel&&vui.m.myCollectionsModel.addContents({contentId:t,userCollectionId:vui._.aStr(this.params.userCollectionId),callback:function(e){e._type&&"success"===e._type&&controller.goBack()}}):controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn secondButton",defaultClassName:"imageActionButton btn_bg_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"secondButtonLabel font24"}),this.topButtonContainer.attachChild(this.doneButton),this.movieInfoPanel=new vui.widgets.movieInfoPanel,this.attachChild(this.movieInfoPanel),this.hidePanel();var t=new vui.widgets.sortCue({text:"Sort"});(this.el.sortCue=t).elem.className="myVuduSortCue clickable",this.attachChild(t),this.sortGrid=new vui.widgets.MyCollectionsBulkAddSortGrid,this.attachChild(this.sortGrid,this.el.container),this.sortGrid.elem.style.top="184px",this.sortGrid.grid.emptyMessage.style.display="none",this.goToSearchButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_SEARCH_BTN"),desc:"Currently, you do not own any movies or TV shows. Click the Search To Add button to find and add any content. Search To Add.",onAction:function(){controller.goSearch({skipHistory:!1})},elemClassName:"myCollectionsBtn goToSearchButton",defaultClassName:"imageActionButton btn_bg_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"goToSearchButtonLabel font24"}),this.goToSearchButton.elem.style.display="none",this.goToSearchButton.onDirectionRight=function(){},this.sortGrid.attachChild(this.goToSearchButton),this.sortGrid.elem.style.display="none"},setTitle:function(e){this.titleText.innerHTML=e},onGotListLength:function(e){0===e?(this.goToSearchButton.elem.style.display="block",vui.select(this.goToSearchButton),this.sortGrid.elem.style.display="block",this.sortGrid.sort.onDirectionRight=function(){vui.select(this.goToSearchButton)}.bind(this)):(this.goToSearchButton.elem.style.display="none",this.sortGrid.elem.style.display="block",vuiFilters.hasSortAndOrFilter()?vui.select(this.sortGrid.sort):vui.select(this.sortGrid.grid),this.sortGrid.sort.onDirectionRight=function(){vui.select(this.sortGrid.grid)}.bind(this)),this.topButtonContainer.elem.style.display="block"},show:function(e){this.setTitle("Adding to List: "+vui._.aStr(e.collectionParams.name));var t={};t.scrollOffset=e.state&&e.state.scrollOffset,vuiFilters.setCurrentFilterType("userCollectionsBulkAdd"),vuiFilters.clearCurrentFilters(),this.sortGrid.sort.refresh();var i={type:"list",name:"MY COLLECTION CONTENTS",state:e.state||null};t.vpm=i,t.vpm.filters=vuiFilters.getCurrentFilters(),this.sortGrid.show(t)},hidePanel:function(){this.movieInfoPanel.invisible()},showSort_:function(){this.sortGrid.showSort(),this.hidePanel(),this.hideSortCue()},hideSort_:function(){this.hidePanel()},hideSortCue:function(){this.el.sortCue.hide()},getParams:function(){if(this.params)return this.params},getCollectionList:function(){return this.collectionList||[]},getPosterType:function(){return this.bulkPosterType},refreshList:function(e){e&&e.sortOrder&&this.sortGrid.grid.refreshList(e)},save:function(){var e={};e.collectionParams=this.params;var t=vui.getSelected();return e.state=this.sortGrid.saveState(),e.state.lastSelected=t,e},onBack:function(){controller.goBack()}}),vui.widgets.MyCollectionsBulkDeleteList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.MyCollectionsBulkDeleteList",posterClass:vui.widgets.MyCollectionsBulkAddDeletePoster,settings:{normal:{columns:7,rows:2}},columns:7,rows:2,partialRow:!1,currentStart:0,getMovieListModel:function(){return function(e){this.currentStart=0,this.params&&0<this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("RETURN DELEGATE FOR COLLECTION GRID LIST:"+JSON.encode(this.params));var t=this.params.listParams;return t.currentStart=this.currentStart,t.callback=e,vui.getModel().getMyCollections(t)}.bind(this)},bind:function(e,t,i){var s,n;e.error?e.error.subCode&&"notFound"===vui._.aStr(e.error.subCode)?(controller.baseLayer.currentPage.params.error=e.error,30<(s=controller.baseLayer.currentPage.params&&vui._.aStr(controller.baseLayer.currentPage.params.name)).length&&(s=s.slice(0,30)+"..."),n={elemClassName:"collectionNotFoundDialog",title:"None",text:s+" does not exist.",buttons:[{label:"OK"}],callback:function(){controller.goBack()}.bind(this)},controller.showPopup("SimpleTextDialog",n)):alert("failed to retrieve the collection"):this.parent(e,t,i)},init:function(){this.scrollIncrement=this.scrollDelta=this.columns,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.parent(null,this.getMovieListModel())}}),vui.widgets.MyCollectionsBulkDeletePosterGrid=new Class({Extends:vui.widgets.PosterGrid,name:"vui.widgets.MyCollectionsBulkDeletePosterGrid",elemClassName:"myCollectionsBulkDeletePosterGrid",listClass:vui.widgets.MyCollectionsBulkDeleteList,init:function(){this.parent.apply(this,arguments),this.blowupCheckmarkOverlay=createDiv({className:"blowupCheckmarkOverlay opacity50"}),this.blowupCheckmarkImg=createImg({className:"blowupOverlayCheckmark",src:vui.images.userCollection.circle_empty}),this.bposter.elem.appendChild(this.blowupCheckmarkOverlay),this.bposter.elem.appendChild(this.blowupCheckmarkImg),this.bulkDeleteCandidate=[],this.bposter.skipTTS=!0},updateBposterCheckmark:function(e){this.blowupCheckmarkImg.src=vui.images.userCollection["circle_"+e]},updateBulkAddDeleteCandidate:function(e){var t=vui._.aStr(e.data.contentId);"red"===e.checkmarkState?this.bulkDeleteCandidate.contains(t)||this.bulkDeleteCandidate.push(t):"empty"===e.checkmarkState&&(this.bulkDeleteCandidate=this.bulkDeleteCandidate.filter(function(e){return e!==t}))},resetBulkAddDeleteCandidate:function(){this.bulkDeleteCandidate=[]},getBulkAddDeleteCandidate:function(){return this.bulkDeleteCandidate},select:function(){this.parent.apply(this,arguments)},show:function(e){e=e||{},this.elem.style.display="block",this.setSelectable(!0);var t={name:"My Collections"};t.listParams=e.collectionParams,t.state=e.state||{},this.setList(t)},listDataReceived:function(e){this.parent(e)},hide:function(){this.setSelectable(!1),this.elem.style.display="none"},saveState:function(){return{scrollOffset:this.list.currentStart,listSelected:this.list.selected}},getParams:function(){return vui.executeOnContainer(this.parentWidget,"getParams")}}),vui.widgets.MyCollectionsBulkDelete=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MyCollectionsBulkDelete",elemClassName:"myCollectionsBulkDelete",init:function(e){this.params=e||{},this.bulkPosterType=e&&e.posterType,createImg({className:"myCollectionsLogo"},this.elem).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.title=createDiv({className:"bulkDeleteTitle font36",text:"Select Titles(s) to Remove"}),this.elem.appendChild(this.title),this.topButtonContainer=new vui.widgets.HorizontalContainer({elemClassName:"myCollectionsManageTopBtnCon"}),this.topButtonContainerOnMouseEnter=this.topButtonContainer.onMouseEnter,this.attachChild(this.topButtonContainer),this.cancelButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_CANCEL_BTN"),onAction:function(){this.grid.resetBulkAddDeleteCandidate(),controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn firstButton",defaultClassName:"imageActionButton btn_bg_cancel_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"firstButtonLabel font24"}),this.cancelButtonOnMouseEnter=this.cancelButton.onMouseEnter,this.topButtonContainer.attachChild(this.cancelButton),this.doneButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_DONE_BTN"),onAction:function(){vui.MyCollectionActions.manageOption=null;var e=this.grid.getBulkAddDeleteCandidate();e&&0<e.length?vui.m.myCollectionsModel&&vui.m.myCollectionsModel.removeContents({contentId:e,userCollectionId:vui._.aStr(this.params.collectionParams.userCollectionId),callback:function(e){e._type&&"success"===e._type&&controller.goBack()}}):controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn secondButton",defaultClassName:"imageActionButton btn_bg_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"secondButtonLabel font24"}),this.topButtonContainer.attachChild(this.doneButton),this.topButtonContainer.elem.style.display="none",this.topButtonContainer.selectable=!1,this.grid=new vui.widgets.MyCollectionsBulkDeletePosterGrid,this.attachChild(this.grid)},show:function(e){this.params=e,this.grid.show(this.params),vui.select(this.grid)},hide:function(){this.grid.hide()},save:function(){return{collectionParams:this.params.collectionParams,state:this.grid.saveState()}},saveState:function(){return{state:this.grid.saveState()}},onGotListLength:function(){this.topButtonContainer.elem.style.display="block",this.topButtonContainer.selectable=!0},getPosterType:function(){return this.bulkPosterType},getParams:function(){if(this.params&&this.params.collectionParams)return this.params.collectionParams}}),vui.widgets.MyCollectionsCustomSortPoster=new Class({Extends:vui.widgets.GridPoster,init:function(e,t){this.parent(e,t),this.skipSameWidgetTTS=!0}}),vui.widgets.MyCollectionsCustomSortList=new Class({Extends:vui.widgets.MovieGridList,name:"vui.widgets.MyCollectionsCustomSortList",posterClass:vui.widgets.MyCollectionsCustomSortPoster,settings:{normal:{columns:7,rows:2}},columns:7,rows:2,partialRow:!1,currentStart:0,getMovieListModel:function(){return function(e){this.currentStart=0,this.params&&0<this.params.scrollOffset&&(this.currentStart=this.params.scrollOffset),alert("RETURN DELEGATE FOR COLLECTION GRID LIST:"+JSON.encode(this.params));var t=this.params.listParams;return t.currentStart=this.currentStart,t.callback=e,vui.getModel().getMyCollections(t)}.bind(this)},bind:function(e,t,i){var s,n;e.error?e.error.subCode&&"notFound"===vui._.aStr(e.error.subCode)?(controller.baseLayer.currentPage.params.error=e.error,30<(s=controller.baseLayer.currentPage.params&&vui._.aStr(controller.baseLayer.currentPage.params.name)).length&&(s=s.slice(0,30)+"..."),n={elemClassName:"collectionNotFoundDialog",title:"None",text:s+" does not exist.",buttons:[{label:"OK"}],callback:function(){controller.goBack()}.bind(this)},controller.showPopup("SimpleTextDialog",n)):alert("failed to retrieve the collection"):this.parent(e,t,i)},init:function(){this.scrollIncrement=this.scrollDelta=this.columns,this.numVisible=this.columns*this.rows,this.visibleCount=this.columns*this.rows,this.parent(null,this.getMovieListModel())}}),vui.widgets.MyCollectionsCustomSortPosterGrid=new Class({Extends:vui.widgets.PosterGrid,name:"vui.widgets.MyCollectionsCustomSortPosterGrid",elemClassName:"myCollectionsCustomSortPosterGrid",listClass:vui.widgets.MyCollectionsCustomSortList,init:function(){this.parent.apply(this,arguments),this.titleTexts=["Select Title to Reorder","Move to Destination"],this.title=createDiv({className:"customSortTitle font24",text:this.titleTexts[0]}),this.elem.appendChild(this.title),this.bposterMovedUp=!1,this.newOrderList=[],this.newOrder=!1,this.reOrdered=!1,this.isInReorderMode=!1,this.previousDirection=0,this.scrollerMouseEnter=this.scroller.onMouseEnter,this.bposter.skipTTS=!0},select:function(){this.parent.apply(this,arguments)},show:function(e){e=e||{},this.elem.style.display="block",this.setSelectable(!0);var t={name:"My Collections"};t.listParams=e.collectionParams,t.state=e.state||{},this.setList(t)},listDataReceived:function(e){this.parent(e);for(var t=0;e.totalCount&&t<e.totalCount;t++)this.newOrderList.push(e.data&&e.data[t])},hide:function(){this.setSelectable(!1),this.elem.style.display="none"},saveState:function(){return{scrollOffset:this.list.currentStart,listSelected:this.list.selected}},moveBposterUp:function(){this.bposter.elem.style.top=Number(this.bposter.elem.style.top.slice(0,-2))-22+"px",this.bposterMovedUp=!0},moveBposterDown:function(){this.bposter.elem.style.top=Number(this.bposter.elem.style.top.slice(0,-2))+22+"px",this.bposterMovedUp=!1},toggleBposterState:function(){this.bposterMovedUp?this.moveBposterDown():(this.moveBposterUp(),vui._.setAriaLabel(this.titleTexts[1]))},switchMode:function(){this.isInReorderMode=!this.isInReorderMode,this.isInReorderMode?(this.title.innerHTML=this.titleTexts[1],this.scroller.elem.removeClass("clickable"),this.scroller.onMouseEnter=null,vui.executeOnContainer(this.parentWidget,"disableButtons")):(this.title.innerHTML=this.titleTexts[0],this.scroller.elem.addClass("clickable"),this.scroller.onMouseEnter=this.scrollerMouseEnter,vui.executeOnContainer(this.parentWidget,"enableButtons"))},selectBlowupPoster:function(){this.bposter&&(this.isInReorderMode&&this.newOrder&&(this.newOrder=!1),this.switchMode(),this.toggleBposterState())},getReorderMode:function(e,t,i,s){var n=this.list.currentStart+Number(e.poster_id.slice(6)),a=this.list.currentStart+Number(t.poster_id.slice(6)),o=null;return n===a?1===this.previousDirection?(n-=this.list.columns,o=2):-1===this.previousDirection&&(n+=this.list.columns,o=1):i.y!==s.y?i.y<s.y?(o=2,this.previousDirection=1):(o=1,this.previousDirection=-1):n>=this.newOrderList.length?(n-=this.list.columns,o=2):1===Math.abs(n-a)?o=0:a<n?o=1:n<a&&(o=2),a>=this.newOrderList.length&&(a=this.newOrderList.length-1),[n,a,o]},drawBlowup:function(e){var t;this.isInReorderMode?this.selectedPoster&&this.selectedPosterPos?(t=this.getReorderMode(this.selectedPoster,e,this.selectedPosterPos,e.elem.getPosition()),this.reOrderPosters(t)):this.newOrder&&(this.parent(e),this.moveBposterUp()):this.parent(e)},onDeselectedPoster:function(e){this.parent(),this.isInReorderMode&&(this.selectedPoster=e,this.selectedPosterPos=e.elem.getPosition())},onSelectedPoster:function(){var e=this.list.children[this.list.selected];vui.select(e),this.drawBlowup(e),this.isInReorderMode||vui._.setAriaLabel("Select "+vui._.aStr(e.data.title)+" to reorder.")},swapPosters:function(e,t){var i=this.newOrderList[e];this.newOrderList[e]=this.newOrderList[t],this.newOrderList[t]=i},moveUpOrLeft:function(e,t){if(this.newOrderList){for(var i=this.newOrderList[e],s=e;t<s&&0<=s-1;s--)this.newOrderList[s]=this.newOrderList[s-1];this.newOrderList[t]=i}},moveDownOrRight:function(e,t){if(this.newOrderList){for(var i=this.newOrderList[e],s=e;s<t&&s+1<this.newOrderList.length;s++)this.newOrderList[s]=this.newOrderList[s+1];this.newOrderList[t]=i}},reOrderPosters:function(e){if(this.newOrderList){vui._.setAriaLabel(this.titleTexts[1]);var t=function(){for(var e={},t=0;t<this.newOrderList.length;t++)e[t]=this.newOrderList[t];this.list.movieListModel.data=e,this.selectedPoster=null,this.selectedPosterPos=null,this.newOrder=!0,this.list.bind(this.list.movieListModel),this.list.movieListModel.totalCount<=this.list.numVisible?(this.range.style.display="none",this.scroller.hide()):(this.range.style.display="block",this.scroller.show()),this.reOrdered=!0}.bind(this);switch(e[2]){case 0:this.swapPosters(e[0],e[1]),t();break;case 1:this.moveUpOrLeft(e[0],e[1]),t();break;case 2:this.moveDownOrRight(e[0],e[1]),t()}}}}),vui.widgets.MyCollectionsCustomSort=new Class({Extends:vui.widgets.Container,name:"vui.widgets.MyCollectionsCustomSort",elemClassName:"myCollectionsCustomSort",init:function(e){this.params=e||{},createImg({className:"myCollectionsLogo"},this.elem).src=vui.vvPlatform.appFeatureEnabled()?vui.images.wmvLogo:vui.images.newVuduLogo,this.topButtonContainer=new vui.widgets.HorizontalContainer({elemClassName:"myCollectionsManageTopBtnCon rightBtnCon"}),this.topButtonContainerOnMouseEnter=this.topButtonContainer.onMouseEnter,this.attachChild(this.topButtonContainer),this.cancelButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_CANCEL_BTN"),onAction:function(){controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn firstButton",defaultClassName:"imageActionButton btn_bg_cancel_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"firstButtonLabel font24"}),this.cancelButtonOnMouseEnter=this.cancelButton.onMouseEnter,this.topButtonContainer.attachChild(this.cancelButton),this.saveButton=new vui.widgets.ImageActionButton({label:vui.strings.getText("USERLIB_SAVE_BTN"),onAction:function(){var e;vui.MyCollectionActions.manageOption=null,this.grid.newOrderList&&this.grid.reOrdered?(e=this.getContentId(this.grid.newOrderList),vui.m.myCollectionsModel&&vui.m.myCollectionsModel.storeContents({userCollectionId:vui._.aStr(this.params.collectionParams.userCollectionId),contentId:e,callback:function(e){"success"===e._type&&controller.goBack()}.bind(this)})):controller.goBack()}.bind(this),elemClassName:"myCollectionsBtn secondButton",defaultClassName:"imageActionButton btn_bg_default btn_bg_size4_default",selectClassName:"imageActionButton btn_bg_select btn_bg_size4_select",labelClassName:"secondButtonLabel font24"}),this.saveButtonOnMouseEnter=this.saveButton.onMouseEnter,this.topButtonContainer.attachChild(this.saveButton),this.topButtonContainer.elem.style.display="none",this.topButtonContainer.selectable=!1,this.grid=new vui.widgets.MyCollectionsCustomSortPosterGrid,this.attachChild(this.grid)},getContentId:function(e){var t=[];return e.filter(function(e){t.push(vui._.aStr(e.contentId))}),t},show:function(e){this.params=e,this.grid.show(this.params),vui.select(this.grid)},hide:function(){this.grid.hide()},disableButtons:function(){this.topButtonContainer.selectable=!1,this.cancelButton.selectable=!1,this.saveButton.selectable=!1,this.cancelButton.elem.removeClass("clickable"),this.saveButton.elem.removeClass("clickable"),this.cancelButton.onMouseEnter=null,this.saveButton.onMouseEnter=null},enableButtons:function(){this.topButtonContainer.selectable=!0,this.cancelButton.selectable=!0,this.saveButton.selectable=!0,this.cancelButton.elem.addClass("clickable"),this.saveButton.elem.addClass("clickable"),this.cancelButton.onMouseEnter=this.cancelButtonOnMouseEnter,this.saveButton.onMouseEnter=this.saveButtonOnMouseEnter},save:function(){return{collectionParams:this.params.collectionParams,state:this.grid.saveState()}},saveState:function(){return{state:this.grid.saveState()}},posterOnAction:function(){this.grid.selectBlowupPoster()},onGotListLength:function(){this.topButtonContainer.elem.style.display="block",this.topButtonContainer.selectable=!0}}),vui.pages.RentToOwnDialog=new Class({Extends:vui.pages.OverlayDialogNew,init:function(e){e=e||{},(this.params=e).elemClassName="rtoDialogContainer",e.trackingName&&(this.trackingName=e.trackingName),e.dialogBoxClassName=e.dialogBoxClassName?e.dialogBoxClassName+" rtoDialog posterTextDialog":"rtoDialog posterTextDialog",this.parent(e),this.dialogHeading=createDiv({className:"dialogHeadingText rtoDialogHeadingText fontWhite32"},this.dialogBox.elem),this.dialogDesc=createDiv({className:"fontWhite20 rtoDialogDescriptionText"},this.dialogBox.elem),this.dialogPoster=createDiv({className:"dialogPoster"},this.dialogBox.elem);var t=this._getRentToOwnPrice(e);this.buttons=[{name:"buy",style:"blue",size:4,label:"OWN FOR $"+getPriceStr(t)},{name:"cancel",style:"grey",size:4,label:vui.strings.getTransformedText("OFFER_DIALOG_CANCEL"),iconSrc:vui.images.cancel_icon}],this.buttonContainerLayout={type:"horizontal"}},show:function(e){var t=e.mim;this.mim=t,this.cb=e.cb,this.buttons&&this.dialogBox.setButtons(this.buttons,this.buttonContainerLayout),this.dialogPoster.style.background="url("+vui.getModel().getPosterUrl(t.data,window.vui.ResDef.detailPage.POSTER_WIDTH)+")",this.dialogHeading.innerHTML="Now that you've seen it. Own it.",this.dialogDesc.innerHTML="Save the cost of your rental with this special offer.",vui._.setAriaLabel(this.dialogHeading.innerHTML+" "+this.dialogDesc.innerHTML+" "+this.buttons[0].label)},onButtonEvent:function(e){var s,n,a,t,i=e.name,o={};"buy"===i?(s=function(){controller.hidePopup(),controller.goBack()}.bind(this),n=function(){console.log("RTO: transation canceled!"),controller.goBack()}.bind(this),a=function(e){switch(e){case"myvudu":controller.goToPage("Home",{activeTab:"myLibrary"},!0);break;case"browse":controller.goToPage("Home",{},!0)}}.bind(this),t=function(e,t,i){"purchase"===e?(o.movie=this.params.mim.data,o.variant=t,o.offer=i,o.successCallback=n,o.callback=n,o.rtoParams={buttons:[{label:vui.strings.transformCase("My Vudu"),selectButtonClass:"btn_bg_watch_select",defaultButtonClass:"btn_bg_watch_default",action:"myvudu"},{label:vui.strings.transformCase("Browse"),action:"browse"}],title:"Thank you",text:"Transaction Complete",data:this.params.mim.data,callback:a,quality:vui._.aStr(t.videoQuality)},(new vui.ContentActions).onClickOffer(o)):"cancel"===e&&s()}.bind(this),controller.showPopup("OfferDialog",{mim:this.mim,callback:t,origin:"condOffer"})):"cancel"===i&&this.onBack()},onBack:function(){controller.hidePopup(),this.cb&&this.cb()},_getRentToOwnPrice:function(e){for(var t=e.mim,i=0;0<(i<e.offers.length);i++)if(t.data.ownerships[e.offers[i].qualityLevel]&&e.offers[i].offer.price&&0<e.offers[i].offer.price.length)return vui._.aStr(e.offers[i].offer.price)}}),vui.widgets.MainBook=new Class({Extends:vui.widgets.Book,name:"vui.widgets.MainBook",trackPages:!0,appname:window.APPNAME,pages:{Home:{widgetClass:vui.pages.Home,pageTitle:"Home"},NewMovieDetails:{widgetClass:vui.pages.NewMovieDetails,pageTitle:"product details"},RecommendedViewAll:{widgetClass:vui.pages.RecommendedViewAll,pageTitle:"RecommendedViewAll"},FilmographyView:{widgetClass:vui.pages.FilmographyView,pageTitle:"FilmographyView"},GeneCollectionView:{widgetClass:vui.pages.GeneCollectionView,pageTitle:"GeneCollectionView"},Showcase:{widgetClass:vui.pages.Showcase,pageTitle:"showcase"},WebTheater:{widgetClass:vui.pages.WebTheater,pageTitle:"WebTheater"},Theater:{widgetClass:vui.pages.Theater,pageTitle:"Theater"},infoView:{widgetClass:vui.widgets.InfoAndSettingsView,pageTitle:"Info And Settings"},OpeningPitch:{widgetClass:vui.pages.OpeningPitch,pageTitle:"Opening Pitch"},uxOpeningPitch:{widgetClass:vui.pages.uxOpeningPitch,pageTitle:"ux Opening Pitch"},OpeningPitch_AccountActivationPromo:{widgetClass:vui.pages.OpeningPitch_AccountActivationPromo,pageTitle:"Opening Pitch"},OpeningPitch_Remote:{widgetClass:vui.pages.OpeningPitch_Remote,pageTitle:"Remote Opening Pitch"},D2DLanding:{widgetClass:vui.pages.D2DLanding,pageTitle:"D2DLanding"},XofYShowcase:{widgetClass:vui.pages.XofYShowcase,pageTitle:"XofYShowcase"},PersonalizedShowcase:{widgetClass:vui.pages.PersonalizedShowcase,pageTitle:"PersonalizedShowcase"},KidsModeEntry:{widgetClass:vui.widgets.KidsModeEntry,pageTitle:"KidsModeEntry"},FamilyModeEntry:{widgetClass:vui.widgets.FamilyModeEntry,pageTitle:"FamilyModeEntry"},KidsMode:{widgetClass:vui.widgets.KidsModeLandingView,pageTitle:"KidsMode"},KidsModeViewAll:{widgetClass:vui.widgets.KidsModeViewAll,pageTitle:"KidsModeViewAll"},KidsModeEpisodes:{widgetClass:vui.widgets.KidsEpisodesView,pageTitle:"KidsModeEpisodes"},ParentalControlsPanel:{widgetClass:vui.widgets.ParentalControlsPanel,pageTitle:"ParentalControlsPanel"},kidsModeWhosWatching:{widgetClass:vui.widgets.kidsModeWhosWatching,pageTitle:"kidsModeWhosWatching"},MyCollectionsCustomSort:{widgetClass:vui.widgets.MyCollectionsCustomSort,pageTitle:"MyCollectionsCustomSort"},MyCollectionsBulkAdd:{widgetClass:vui.widgets.MyCollectionsBulkAdd,pageTitle:"MyCollectionsBulkAdd"},MyCollectionsBulkDelete:{widgetClass:vui.widgets.MyCollectionsBulkDelete,pageTitle:"MyCollectionsBulkDelete"},MyCollectionsViewAll:{widgetClass:vui.widgets.MyCollectionsViewAll,pageTitle:"MyCollectionsViewAll"},MyCollectionsView:{widgetClass:vui.widgets.MyCollectionsView,pageTitle:"MyCollectionsView"}},dialogs:{RatingDialog:{widgetClass:vui.pages.RatingDialog},RentToOwnDialog:{widgetClass:vui.pages.RentToOwnDialog},TextInputDialog:{widgetClass:vui.pages.TextInputDialog},SimpleTextDialog:{widgetClass:vui.pages.SimpleTextDialog},PosterTextDialog:{widgetClass:vui.pages.PosterTextDialog},MyCollectionPosterTextDialog:{widgetClass:vui.pages.MyCollectionPosterTextDialog},MyCollectionDeletionDialog:{widgetClass:vui.pages.MyCollectionDeletionDialog},ScrollableTextDialog:{widgetClass:vui.pages.ScrollableTextDialog},VuduFilterDialog:{widgetClass:vui.pages.VuduFilterDialog},OfferDialog:{widgetClass:vui.pages.OfferDialog},ManagePreOrderDialog:{widgetClass:vui.pages.ManagePreOrderDialog},ConfirmOfferDialog:{widgetClass:vui.pages.ConfirmOfferDialog},ConfirmExitCodeDialog:{widgetClass:vui.pages.ConfirmExitCodeDialog},ConfirmExitDialog:{widgetClass:vui.pages.ConfirmExitDialog},ChoicesGenericDialog:{widgetClass:vui.pages.ChoicesGenericDialog},XofYDialog:{widgetClass:vui.pages.XofYDialog},TransactionSuccessDialog:{widgetClass:vui.pages.TransactionSuccessDialog},PreorderCancelSuccessDialog:{widgetClass:vui.pages.PreorderCancelSuccessDialog},PasscodeDialog:{widgetClass:vui.pages.PasscodeDialog},ZeroButtonDialog:{widgetClass:vui.pages.ZeroButtonDialog},OneButtonDialog:{widgetClass:vui.pages.OneButtonDialog},PreviewDialog:{widgetClass:vui.pages.PreviewDialog},PreviewPurchaseDialog:{widgetClass:vui.pages.PreviewPurchaseDialog},Login:{widgetClass:vui.pages.Login},ActivationOptionsDialog:{widgetClass:vui.pages.ActivationOptionsDialog},MovieDetailPop:{widgetClass:vui.pages.MovieDetailPop},NextEpisodeDialogue:{widgetClass:vui.pages.NextEpisodeDialogue},WaitDialog:{widgetClass:vui.pages.WaitDialog},DeactivatePopup:{widgetClass:vui.pages.DeactivatePopup},HelpInfoDialog:{widgetClass:vui.pages.HelpInfoDialog},AddressConfirmDialog:{widgetClass:vui.pages.AddressConfirmDialog},PhysicalOfferDialog:{widgetClass:vui.pages.PhysicalOfferDialog},AnimationWaitDialog:{widgetClass:vui.pages.AnimationWaitDialog},FullScreenDialog:{widgetClass:vui.pages.FullScreenDialog},ActivationCode:{widgetClass:vui.pages.ActivationCode},KidsModeDialog:{widgetClass:vui.pages.KidsModeDialog},FamilyPlayNotice:{widgetClass:vui.widgets.ClearPlayEnableNotice}},onBack:function(){alert("ON BACK IN PAGE!"),0!=this.goBack()&&controller.exitApp()},onBlue:function(){window.clearInterval(vui.nextEpisodeTimer),vui.autoNextEpisodeCounter&&(vui.autoNextEpisodeCounter=0),vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()?vui.familyModel.enterKidsMode("mainBook",!0):controller.goHome()},onYellow:function(){vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()||(window.clearInterval(vui.nextEpisodeTimer),vui.autoNextEpisodeCounter&&(vui.autoNextEpisodeCounter=0),controller.goSearch())},onExit:function(){controller.exitApp(!0)},start:function(){vui.fund.addListener(function(){this.currentPage&&this.currentPage.fundRefresh&&this.currentPage.fundRefresh()}.bind(this))}});var ClearPlayControl=function(e,t){this.playerControl=e,this.events=t,this.eventTimer=null,this.muteTimer=null,this.currentEvent=null};function ClearPlayEventCollection(e){this.contentId=e,this.events=[]}function ClearPlaySettings(){this.categories={nudity:!0,violence:!0,language:!0,substanceAbuse:!0},this.available=!1,this.isRestricted=!1,this.key="clearplay|"+VUDU.registry.deviceId}ClearPlayControl.EVENT_LEAD_TIME=.5,ClearPlayControl.prototype.clearEventTimer=function(){this.eventTimer&&(clearTimeout(this.eventTimer),this.eventTimer=null)},ClearPlayControl.prototype.clearMuteTimer=function(){this.muteTimer&&(clearTimeout(this.muteTimer),this.muteTimer=null)},ClearPlayControl.prototype.onTimerEvent=function(){var e=this.playerControl.getCurrentPosition();if(alert("CLEARPLAY timer event! id: "+this.currentEvent.id+" start at: "+this.currentEvent.start+", current stream time: "+e),"mute"===this.currentEvent.type){var t=Math.floor(1e3*(this.currentEvent.stop-e));this.mute(t)}else{if("skip"!==this.currentEvent.type)throw new Error("unknown event type: "+this.currentEvent.type);alert("CLEARPLAY SKIPPING id:"+this.currentEvent.id+" start at: "+this.currentEvent.start+", current stream time: "+e),this.skip(this.currentEvent.stop)}},ClearPlayControl.prototype.mute=function(e){var t=this.playerControl.getVolume();0!==t&&null===this.muteTimer&&(alert("CLEARPLAY muting for ms: "+e),this.playerControl.setVolume(0,!0),this.muteTimer=setTimeout(function(){this.playerControl.setVolume(t,!1),this.clearMuteTimer(),this.reset()}.bind(this),e))},ClearPlayControl.prototype.skip=function(e){alert("CLEARPLAY skipping to "+e),this.playerControl.seekClearplay(e,!1)&&this.reset()},ClearPlayControl.prototype.schedule=function(e){var t,i;this.currentEvent&&this.currentEvent.id===e.id?alert("CLEARPLAY event already scheduled"):(this.currentEvent&&this.reset(),t=this.playerControl.getCurrentPosition(),(i=e.start-t-ClearPlayControl.EVENT_LEAD_TIME)<0&&(i=0),this.currentEvent=e,this.eventTimer=setTimeout(this.onTimerEvent.bind(this),Math.floor(1e3*i)),alert("scheduling in sec "+i))},ClearPlayControl.prototype.reset=function(){this.currentEvent&&(this.currentEvent=null),this.clearEventTimer()},ClearPlayControl.prototype.onPlayerTime=function(e){var t=this.events.findCurrentOrFutureEvent(e);t&&t.start-e<1&&t.stop>e&&(alert("CLEARPLAY call schedule for event "+t.id+", start: "+t.start+", type: "+t.type),this.schedule(t))},ClearPlayControl.prototype.adjustSeekTargetTime=function(e){return this.events.findFilteredSeekTime(e)},ClearPlayControl.prototype.isInSkipInterval=function(e){var t=this.events.findCurrentOrFutureEvent(e);return t&&"skip"==t.type&&t.start<e&&t.stop>e},ClearPlayControl.prototype.getCurrentSkipStop=function(e){var t=this.events.findCurrentOrFutureEvent(e);return this.isInSkipInterval(e)?t.stop:-1},vui.ClearPlayControl=ClearPlayControl,vui.ClearPlayEvent=function(e,t,i,s){this.id=e,this.start=t,this.stop=i,this.type=s},ClearPlayEventCollection.prototype.initFromClearPlayJSON=function(e,t,i){this.events=[];var s=this.parseFilters(e,t);this.events=i.eventList.filter(function(e){return s[e.id]}).map(function(e){return new vui.ClearPlayEvent(e.id,e.interrupt,e.resume,1===e.type?"mute":"skip")}),this.validate(),alert("Loaded ClearPlay events, count: "+this.events.length),this.events.forEach(function(e){alert("ClearPlay event start: "+1e3*e.start+", duration: "+Math.round(1e3*(e.stop-e.start))/1e3+", type: "+e.type)})},ClearPlayEventCollection.prototype.setEvents=function(e){this.events=e},ClearPlayEventCollection.prototype.parseFilters=function(e,t){var i={},s={1:e.getCategories().nudity,2:e.getCategories().violence,3:e.getCategories().language,4:e.getCategories().substanceAbuse};return t.filterSettingsUI.category.filter(function(e){return s[e.id]}).forEach(function(e){e.subcategory&&e.subcategory.forEach(function(e){e.incident&&e.incident.map(function(e){return e.id}).forEach(function(e){return i[e]=!0})})}),i},ClearPlayEventCollection.prototype.validate=function(){for(var e=null,t=1;t<this.events.length;++t){var i=this.events[t-1],s=this.events[t];if(i.start>s.start){e="events not ordered "+i.id+" "+s.id;break}if(i.stop>s.start){if("skip"!==i.type||"mute"!==s.type){e="events overlap "+i.id+" "+s.id;break}this.events.splice(t,1),t--}}e&&alert("Validation failed for ClearPlay data, content "+this.contentId+", error: "+e)},ClearPlayEventCollection.prototype.findCurrentOrFutureEvent=function(e){if(e>this.events[this.events.length-1].stop)return null;for(var t=bSearch(this.events,new vui.ClearPlayEvent("",e,0,"mute"),function(e,t){var i=e.start-t.start;return Math.abs(i)<.1?0:i},!0),i=0,s=t;i<s.length;i++){var n=s[i],a=this.events[n];if(a.start<=e&&a.stop>e)return a}return 0<t.length?this.events[t[t.length-1]]:null},ClearPlayEventCollection.prototype.findFilteredSeekTime=function(e){for(var t=0,i=this.events;t<i.length;t++){var s=i[t];if(s.start<e&&e<s.stop&&"skip"===s.type)return e=s.stop,this.findFilteredSeekTime(e);if(s.start>e)break}return e},ClearPlayEventCollection.prototype.clear=function(){this.events=[],alert("ClearPlay events cleared")},vui.ClearPlayEventCollection=ClearPlayEventCollection,ClearPlaySettings.prototype.load=function(a){var o=this,r=vui.getModel(),e={_type:"appUserDataSearch"};e.name=this.key,e.userId=r.userId;return r.doQuery(e,function(e,t,i){var s,n="appUserData";t==r.queryStatus.ST_SUCCESS?i[n]&&i[n][0]&&i[n][0].value?(alert("----------------- settings load result"+JSON.encode(i[n][0].value)),(s=i[n][0].value)&&(o.available="true"===vui._.aStr(s[0].available),o.categories.nudity="true"===vui._.aStr(s[0].nudity),o.categories.violence="true"===vui._.aStr(s[0].violence),o.categories.language="true"===vui._.aStr(s[0].language),o.categories.substanceAbuse="true"===vui._.aStr(s[0].substanceAbuse),o.isRestricted="true"===vui._.aStr(s[0].isRestricted))):alert("clear play settings load failed: "+JSON.encode(i)):alert("vui.settings load failed "+t),a(this.categories)})},ClearPlaySettings.prototype.reset=function(e){e?(this.categories={nudity:!0,violence:!0,language:!0,substanceAbuse:!0},this.available=!1,this.isRestricted=!1):this.save(!0)},ClearPlaySettings.prototype.save=function(e){var t;e?t={nudity:[!0],violence:[!0],language:[!0],substanceAbuse:[!0],available:[!1],isRestricted:[!1]}:(t={available:[this.available],isRestricted:[this.isRestricted]},Object.keys(this.categories).forEach(function(e){t[e]=[this.categories[e]]}.bind(this)));var i=vui.getModel();if(!i.userId)return alert("ERROR: could not save settings because there's no userId"),null;var s={applicationId:"clearplay_settings",value:[t],_type:"appUserDataStore"};return s.name=this.key,s.userId=i.userId,i.doQuery(s,function(e){e==i.queryStatus.ST_SUCCESS?alert("vui.settings SAVED!"):alert("vui.settings not saved!"+e)})},ClearPlaySettings.prototype.setCategories=function(t){var i=this;Object.keys(this.categories).forEach(function(e){return i.categories[e]=t[e]||!1})},ClearPlaySettings.prototype.setCategory=function(e){this.categories[e.category]=e.value,this.save()},ClearPlaySettings.prototype.getCategories=function(){return this.categories},ClearPlaySettings.prototype.getEnabled=function(){return this.available},ClearPlaySettings.prototype.getEnabledCategories=function(){return Object.keys(this.categories).filter(function(e){return this.categories[e]}.bind(this))},ClearPlaySettings.prototype.getAvailable=function(){return this.available},ClearPlaySettings.prototype.setAvailable=function(e){this.available=e,this.save()},ClearPlaySettings.prototype.getRestricted=function(){return this.isRestricted},ClearPlaySettings.prototype.setRestricted=function(e){this.isRestricted=e,this.save()},ClearPlaySettings.prototype.getFilterStatus=function(){var e=this.getEnabledCategories().length;return 0===e?"OFF":e<Object.keys(this.categories).length?"SOME":"ON"},ClearPlaySettings.prototype.injectTrackingParams=function(e){if("object"==typeof e){e.evars=e.evars||{};var t=[];if(this.available)for(var i in t.push("cp=on"),this.categories)this.categories[i]?t.push(i+"=on"):t.push(i+"=off");else t.push("cp=off");e.evars.CPSettings=t.join("|")}},ClearPlaySettings.prototype.trackingDuringPlayback=function(){var e={};this.injectTrackingParams(e),vui.analytics.trackEvent("event177",e)},ClearPlaySettings.prototype.trackSettingChange=function(e){var t={},i=e.toOn?"event173":"event174";t.evars={familyFilter:e.category},vui.analytics.trackEvent(i,t)},ClearPlaySettings.prototype.trackInterest=function(e){var t={product:vui._.aStr(e.contentId)};vui.analytics.trackEvent("event178",t)},vui.ClearPlaySettings=ClearPlaySettings;var CryptoJS=CryptoJS||function(r){function i(){}var e={},t=e.lib={},s=t.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes;if(e=e.sigBytes,this.clamp(),s%4)for(var n=0;n<e;n++)t[s+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(s+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[s+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*r.random()|0);return new l.init(t,e)}}),n=e.enc={},a=n.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],s=0;s<e;s++){var n=t[s>>>2]>>>24-s%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new l.init(i,t/2)}},o=n.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],s=0;s<e;s++)i.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new l.init(i,t)}},u=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,s=t.sigBytes,n=this.blockSize,a=s/(4*n);if(e=(a=e?r.ceil(a):r.max((0|a)-this._minBufferSize,0))*n,s=r.min(4*e,s),e){for(var o=0;o<e;o+=n)this._doProcessBlock(i,o);o=i.splice(0,e),t.sigBytes-=s}return new l.init(o,s)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new c.HMAC.init(i,t).finalize(e)}}});var c=e.algo={};return e}(Math);!function(){var l=CryptoJS.lib.WordArray;CryptoJS.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp(),e=[];for(var n=0;n<i;n+=3)for(var a=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,o=0;o<4&&n+.75*o<i;o++)e.push(s.charAt(a>>>6*(3-o)&63));if(t=s.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;!(a=i.charAt(64))||-1!=(a=e.indexOf(a))&&(t=a);for(var s,n,a=[],o=0,r=0;r<t;r++){r%4&&(s=i.indexOf(e.charAt(r-1))<<r%4*2,n=i.indexOf(e.charAt(r))>>>6-r%4*2,a[o>>>2]|=(s|n)<<24-o%4*8,o++)}return l.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function C(e,t,i,s,n,a,o){return((e=e+(t&i|~t&s)+n+o)<<a|e>>>32-a)+t}function y(e,t,i,s,n,a,o){return((e=e+(t&s|i&~s)+n+o)<<a|e>>>32-a)+t}function w(e,t,i,s,n,a,o){return((e=e+(t^i^s)+n+o)<<a|e>>>32-a)+t}function A(e,t,i,s,n,a,o){return((e=e+(i^(t|~s))+n+o)<<a|e>>>32-a)+t}for(var e=CryptoJS,t=(s=e.lib).WordArray,i=s.Hasher,s=e.algo,O=[],n=0;n<64;n++)O[n]=4294967296*a.abs(a.sin(n+1))|0;s=s.MD5=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=e[n=t+i];e[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var i=this._hash.words,n=e[t+0],s=e[t+1],a=e[t+2],o=e[t+3],r=e[t+4],l=e[t+5],u=e[t+6],d=e[t+7],c=e[t+8],h=e[t+9],v=e[t+10],m=e[t+11],g=e[t+12],_=e[t+13],p=e[t+14],T=e[t+15],f=C(f=i[0],I=i[1],S=i[2],E=i[3],n,7,O[0]),E=C(E,f,I,S,s,12,O[1]),S=C(S,E,f,I,a,17,O[2]),I=C(I,S,E,f,o,22,O[3]),f=C(f,I,S,E,r,7,O[4]),E=C(E,f,I,S,l,12,O[5]),S=C(S,E,f,I,u,17,O[6]),I=C(I,S,E,f,d,22,O[7]),f=C(f,I,S,E,c,7,O[8]),E=C(E,f,I,S,h,12,O[9]),S=C(S,E,f,I,v,17,O[10]),I=C(I,S,E,f,m,22,O[11]),f=C(f,I,S,E,g,7,O[12]),E=C(E,f,I,S,_,12,O[13]),S=C(S,E,f,I,p,17,O[14]),f=y(f,I=C(I,S,E,f,T,22,O[15]),S,E,s,5,O[16]),E=y(E,f,I,S,u,9,O[17]),S=y(S,E,f,I,m,14,O[18]),I=y(I,S,E,f,n,20,O[19]),f=y(f,I,S,E,l,5,O[20]),E=y(E,f,I,S,v,9,O[21]),S=y(S,E,f,I,T,14,O[22]),I=y(I,S,E,f,r,20,O[23]),f=y(f,I,S,E,h,5,O[24]),E=y(E,f,I,S,p,9,O[25]),S=y(S,E,f,I,o,14,O[26]),I=y(I,S,E,f,c,20,O[27]),f=y(f,I,S,E,_,5,O[28]),E=y(E,f,I,S,a,9,O[29]),S=y(S,E,f,I,d,14,O[30]),f=w(f,I=y(I,S,E,f,g,20,O[31]),S,E,l,4,O[32]),E=w(E,f,I,S,c,11,O[33]),S=w(S,E,f,I,m,16,O[34]),I=w(I,S,E,f,p,23,O[35]),f=w(f,I,S,E,s,4,O[36]),E=w(E,f,I,S,r,11,O[37]),S=w(S,E,f,I,d,16,O[38]),I=w(I,S,E,f,v,23,O[39]),f=w(f,I,S,E,_,4,O[40]),E=w(E,f,I,S,n,11,O[41]),S=w(S,E,f,I,o,16,O[42]),I=w(I,S,E,f,u,23,O[43]),f=w(f,I,S,E,h,4,O[44]),E=w(E,f,I,S,g,11,O[45]),S=w(S,E,f,I,T,16,O[46]),f=A(f,I=w(I,S,E,f,a,23,O[47]),S,E,n,6,O[48]),E=A(E,f,I,S,d,10,O[49]),S=A(S,E,f,I,p,15,O[50]),I=A(I,S,E,f,l,21,O[51]),f=A(f,I,S,E,g,6,O[52]),E=A(E,f,I,S,o,10,O[53]),S=A(S,E,f,I,v,15,O[54]),I=A(I,S,E,f,s,21,O[55]),f=A(f,I,S,E,c,6,O[56]),E=A(E,f,I,S,T,10,O[57]),S=A(S,E,f,I,u,15,O[58]),I=A(I,S,E,f,_,21,O[59]),f=A(f,I,S,E,r,6,O[60]),E=A(E,f,I,S,m,10,O[61]),S=A(S,E,f,I,a,15,O[62]),I=A(I,S,E,f,h,21,O[63]);i[0]=i[0]+f|0,i[1]=i[1]+I|0,i[2]=i[2]+S|0,i[3]=i[3]+E|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32;var n=a.floor(i/4294967296);for(t[15+(64+s>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t[14+(64+s>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,i=0;i<4;i++)s=t[i],t[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);return e},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=i._createHelper(s),e.HmacMD5=i._createHmacHelper(s)}(Math),function(){var e=CryptoJS,t=e.lib,i=t.Base,u=t.WordArray,s=(t=e.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(o=this.cfg).hasher.create(),s=u.create(),n=s.words,a=o.keySize,o=o.iterations;n.length<a;){r&&i.update(r);var r=i.update(e).finalize(t);i.reset();for(var l=1;l<o;l++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*a,s}});e.EvpKDF=function(e,t,i){return s.create(i).compute(e,t)}}(),CryptoJS.lib.Cipher||function(){var e=(h=CryptoJS).lib,t=e.Base,o=e.WordArray,i=e.BufferedBlockAlgorithm,s=h.enc.Base64,n=h.algo.EvpKDF,a=e.Cipher=i.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(s){return{encrypt:function(e,t,i){return("string"==typeof t?v:c).encrypt(s,e,t,i)},decrypt:function(e,t,i){return("string"==typeof t?v:c).decrypt(s,e,t,i)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function r(e,t,i){var s=this._iv;s?this._iv=void 0:s=this._prevBlock;for(var n=0;n<i;n++)e[t+n]^=s[n]}var l=h.mode={},u=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize;r.call(this,e,t,s),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),u.Decryptor=u.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,n=e.slice(t,t+s);i.decryptBlock(e,t),r.call(this,e,t,s),this._prevBlock=n}}),l=l.CBC=u,u=(h.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,s=(i=i-e.sigBytes%i)<<24|i<<16|i<<8|i,n=[],a=0;a<i;a+=4)n.push(s);i=o.create(n,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:l,padding:u}),reset:function(){a.reset.call(this);var e,t=(i=this.cfg).iv,i=i.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var d=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,i=(e=s.parse(e)).words;return 1398893684==i[0]&&1701076831==i[1]&&(t=o.create(i.slice(2,4)),i.splice(0,4),e.sigBytes-=16),d.create({ciphertext:e,salt:t})}},c=e.SerializableCipher=t.extend({cfg:t.extend({format:l}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var n=e.createEncryptor(i,s);return t=n.finalize(t),n=n.cfg,d.create({ciphertext:t,key:i,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(i,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),h=(h.kdf={}).OpenSSL={execute:function(e,t,i,s){return s=s||o.random(8),e=n.create({keySize:t+i}).compute(e,s),i=o.create(e.words.slice(t),4*i),e.sigBytes=4*t,d.create({key:e,iv:i,salt:s})}},v=e.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:h}),encrypt:function(e,t,i,s){return i=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize),s.iv=i.iv,(e=c.encrypt.call(this,e,t,i.key,s)).mixIn(i),e},decrypt:function(e,t,i,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),i=s.kdf.execute(i,e.keySize,e.ivSize,t.salt),s.iv=i.iv,c.decrypt.call(this,e,t,i.key,s)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,i=e.algo,o=[],s=[],n=[],a=[],r=[],l=[],u=[],d=[],c=[],h=[],v=[],m=0;m<256;m++)v[m]=m<128?m<<1:m<<1^283;for(var g=0,_=0,m=0;m<256;m++){var p=(p=_^_<<1^_<<2^_<<3^_<<4)>>>8^255&p^99;o[g]=p;var T=v[s[p]=g],f=v[T],E=v[f],S=257*v[p]^16843008*p;n[g]=S<<24|S>>>8,a[g]=S<<16|S>>>16,r[g]=S<<8|S>>>24,l[g]=S,S=16843009*E^65537*f^257*T^16843008*g,u[p]=S<<24|S>>>8,d[p]=S<<16|S>>>16,c[p]=S<<8|S>>>24,h[p]=S,g?(g=T^v[v[v[E^T]]],_^=v[v[_]]):g=_=1}var I=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=t.extend({_doReset:function(){for(var e,t=(s=this._key).words,i=s.sigBytes/4,s=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],a=0;a<s;a++){a<i?n[a]=t[a]:(e=n[a-1],a%i?6<i&&4==a%i&&(e=o[e>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e]):(e=o[(e=e<<8|e>>>24)>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e],e^=I[a/i|0]<<24),n[a]=n[a-i]^e)}for(t=this._invKeySchedule=[],i=0;i<s;i++)a=s-i,e=i%4?n[a]:n[a-4],t[i]=i<4||a<=4?e:u[o[e>>>24]]^d[o[e>>>16&255]]^c[o[e>>>8&255]]^h[o[255&e]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,a,r,l,o)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,u,d,c,h,s),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,n,a,o,r){for(var l=this._nRounds,u=e[t]^i[0],d=e[t+1]^i[1],c=e[t+2]^i[2],h=e[t+3]^i[3],v=4,m=1;m<l;m++)var g=s[u>>>24]^n[d>>>16&255]^a[c>>>8&255]^o[255&h]^i[v++],_=s[d>>>24]^n[c>>>16&255]^a[h>>>8&255]^o[255&u]^i[v++],p=s[c>>>24]^n[h>>>16&255]^a[u>>>8&255]^o[255&d]^i[v++],h=s[h>>>24]^n[u>>>16&255]^a[d>>>8&255]^o[255&c]^i[v++],u=g,d=_,c=p;g=(r[u>>>24]<<24|r[d>>>16&255]<<16|r[c>>>8&255]<<8|r[255&h])^i[v++],_=(r[d>>>24]<<24|r[c>>>16&255]<<16|r[h>>>8&255]<<8|r[255&u])^i[v++],p=(r[c>>>24]<<24|r[h>>>16&255]<<16|r[u>>>8&255]<<8|r[255&d])^i[v++],h=(r[h>>>24]<<24|r[u>>>16&255]<<16|r[d>>>8&255]<<8|r[255&c])^i[v++],e[t]=g,e[t+1]=_,e[t+2]=p,e[t+3]=h},keySize:8});e.AES=t._createHelper(i)}();var CryptoJS=CryptoJS||function(r){function i(){}var e={},t=e.lib={},s=t.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=t.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes;if(e=e.sigBytes,this.clamp(),s%4)for(var n=0;n<e;n++)t[s+n>>>2]|=(i[n>>>2]>>>24-n%4*8&255)<<24-(s+n)%4*8;else if(65535<i.length)for(n=0;n<e;n+=4)t[s+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*r.random()|0);return new l.init(t,e)}}),n=e.enc={},a=n.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],s=0;s<e;s++){var n=t[s>>>2]>>>24-s%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new l.init(i,t/2)}},o=n.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],s=0;s<e;s++)i.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new l.init(i,t)}},u=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,s=t.sigBytes,n=this.blockSize,a=s/(4*n);if(e=(a=e?r.ceil(a):r.max((0|a)-this._minBufferSize,0))*n,s=r.min(4*e,s),e){for(var o=0;o<e;o+=n)this._doProcessBlock(i,o);o=i.splice(0,e),t.sigBytes-=s}return new l.init(o,s)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new c.HMAC.init(i,t).finalize(e)}}});var c=e.algo={};return e}(Math);!function(){var e=CryptoJS,t=(s=e.lib).WordArray,i=s.Hasher,d=[],s=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i,s=this._hash.words,n=s[0],a=s[1],o=s[2],r=s[3],l=s[4],u=0;u<80;u++){u<16?d[u]=0|e[t+u]:(i=d[u-3]^d[u-8]^d[u-14]^d[u-16],d[u]=i<<1|i>>>31),i=(n<<5|n>>>27)+l+d[u],i=u<20?i+(1518500249+(a&o|~a&r)):u<40?i+(1859775393+(a^o^r)):u<60?i+((a&o|a&r|o&r)-1894007588):i+((a^o^r)-899497514),l=r,r=o,o=a<<30|a>>>2,a=n,n=i}s[0]=s[0]+n|0,s[1]=s[1]+a|0,s[2]=s[2]+o|0,s[3]=s[3]+r|0,s[4]=s[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(64+s>>>9<<4)]=Math.floor(i/4294967296),t[15+(64+s>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(s),e.HmacSHA1=i._createHmacHelper(s)}(),function(){var u=CryptoJS.enc.Utf8;CryptoJS.algo.HMAC=CryptoJS.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=u.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),a=this._iKey=t.clone(),o=n.words,r=a.words,l=0;l<i;l++)o[l]^=1549556828,r[l]^=909522486;n.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();var vui=vui||{};vui.DirectorCsClient=function(r,n,t,e){var l=this,i=null,u=null,a=null,o=null,d=!1,c={},s=1,h=0,v=!1,m=null,g=!1,_=!1;alert("in DirectorCsClient constructor"),e&&(c=e._getQueuedRequests()),this.open=function(e,t){i=new vui.DirectorCsClient.LightDeviceManager(r),u=new vui.DirectorCsClient.DirectorRequestBuilder,a=new vui.DirectorCsClient.Watchdog(this),v=t,m=e,i.getLightDevice(function(e){l._lightDeviceId=e.lightDeviceId,l._kickstart(function(e){l._openWebSocket(e)},function(e,t){l._log("kickstart error code: "+e+", message: "+t,!0),l.tryReconnect(e)})},function(e){l._log("problem requesting light device: "+e,!0),e?"tooManyDevices"===e?(l._handleCriticalError(vui.DirectorCsClient.ERRORS.TOO_MANY_DEVICES),vui.getModel().deactivate(function(){})):l._handleCriticalError(vui.DirectorCsClient.ERRORS.LOGIN_ERROR):l.tryReconnect(vui.DirectorCsClient.ERRORS.CANT_CREATE_LIGHT_DEVICE)})},this.close=function(){g=!0,l._closeWebSocket(),g=!1,a&&a.stop()},this.doItNote=function(e,t){return!(!e.userId&&!e.accountId&&"userNetLogRequest"!=e._type)&&(!!this.CsQueries[e._type]&&(!(!d&&0==h)&&(l._log("run query: "+e._type),e.requestCallbackId=s,c[s.toString()]={query:e,callBack:t,sent:!1},s++,this._sendQueuedRequests(),!0)))},this.tryReconnect=function(e){var t;l._closeWebSocket(),h<vui.DirectorCsClient.CONST.MAX_RETRY_COUNT&&e!=vui.DirectorCsClient.ERRORS.LOGIN_ERROR?(h++,t=1e3*(Math.random()*(vui.DirectorCsClient.CONST.MAX_RETRY_DELAY-vui.DirectorCsClient.CONST.MIN_RETRY_DELAY)+vui.DirectorCsClient.CONST.MIN_RETRY_DELAY),1===h&&(t=100*Math.random()+100),l._log("will retry in "+t/1e3+", attempt "+h),window.setTimeout(function(){l.open(m,v)},t)):(l._log("Unable to restore CS connection after "+h+" attempts, error code: "+e,!0),l._handleCriticalError(e))},this.sendCsNotificationResponse=function(e,t){e.requestCallbackId&&(t.responseCallbackId=e.requestCallbackId),this._sendRequestInt({query:t},!0)},this._getQueuedRequests=function(){return c},this._informStateListeners=function(){},this._sendQueuedRequests=function(){if(d){var e=[];for(var t in c){var i=c[t];if(!i.sent)try{var s="userNetLogRequest"===i.query._type;this._sendRequestInt(i,s),s&&e.push(t)}catch(e){alert("Error when sending queued requests: "+e,"error")}}e.every(function(e){delete c[e]})}else alert("attempting to send queued requests but not logged in","info")},this._kickstart=function(n,a){this._log("kickstarting CS connection");var o=new XMLHttpRequest,e=l._getCsServerUrl(),t={accountId:r.userId,lightDeviceId:this._lightDeviceId,sessionKey:r.sessionKey};e+=u.buildRequest(t),o.open("GET",e,!0),o.onload=function(){var e,t,i,s;g?l._log("kickstart request completed, but current CS client instance is shutting down."):(e=JSON.decode(o.responseText)).server&&0<e.server.length?(t=e.server[0],l._log("CS server kickstart url: "+t),n(t)):(i=(i=Array.isArray(e.error)?e.error[0]:null)||"CS server kickstart returned unknown response",s=vui.DirectorCsClient.ERRORS.KICKSTART_ERROR,"Cannot find user in director"===i&&(s=vui.DirectorCsClient.ERRORS.LOGIN_ERROR),l._log("kickstart failed: "+i),a(s,i))},o.onerror=function(){l._log("kickstart request failed"),g?l._log("kickstart request failed, but current CS client instance is shutting down."):a(vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED,"error sending kickstart request")},o.ontimeout=function(){l._log("kickstart request timed out"),g?l._log("kickstart request timed out, but current CS client instance is shutting down."):a(vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED,"timeout sending kickstart request")},o.timeout=vui.DirectorCsClient.CONST.KICKSTART_REQUEST_TIMEOUT,o.send(null)},this._onWebSocketOpen=function(){var e=new vui.DirectorCsClient.Cypher(r.network).encrypt(i.getLightDeviceKey()),t={_type:"lightDeviceLoginQuery",accountId:r.userId,lightDeviceId:i.getLightDeviceId(),lightDeviceKey:e,sessionKey:r.sessionKey};o.send(u.buildRequest(t))},this._handleConnectionSuccess=function(){d=!0,h=0,a.start();function e(){l._sendQueuedRequests(),l._log("connection succesfull"),m?(l._log("calling openStatusCallBack from CS"),m(vui.DirectorCsClient.ERRORS.OK),m=null):controller.refreshCurrentPage(),l._informStateListeners("connected"),_=!0}v?e():l._renewSessionKey(e)},this._renewSessionKey=function(s){l._log("renewing session key...");var e={_type:"sessionKeyRenewRequest"};e.userId=r.userId,e.weakSession=r.sessionKey,l.doItNote(e,function(e,t,i){t===r.queryStatus.ST_SUCCESS?i.hasOwnProperty("sessionKey")?(r.sessionKey=i.sessionKey[0].weakSessionKey[0],v||r.saveAuthentication(!0)):l._log("unable to renew session key, status: "+i.status[0]):l._log("unable to renew session key!",!0),s&&s()})},this._onWebSocketMessage=function(e){a.notifyResponseReceived();var t=u.parseResponse(e.data);switch(t._type){case"lightDeviceLoginResult":"ok"===t.status[0]?(l._log("CS connection login success"),l._handleConnectionSuccess()):(l._log("CS connection login error: "+e.data,!0),l._handleCriticalError(vui.DirectorCsClient.ERRORS.LOGIN_ERROR));break;case"keepAliveRequest":try{o.send(u.buildKeepAliveResponse()),l._log("CS keepAliveRequest")}catch(e){l._log("CS keepAliveRequest failed",e)}break;default:var i,s=Array.isArray(t.responseCallbackId)?t.responseCallbackId[0]:null;"error"===t._type?s&&c[s]?(i="query failed, type: "+c[s].query._type+", error code: "+t.code[0]+", text: "+t.text[0],l._log(i,!0),c[s].callBack(s,r.queryStatus.ST_GENERIC_ERROR,t)):l._log("query failed, error code: "+t.code[0]+", text: "+t.text[0],!0):s?(c[s]?c[s].callBack(s,r.queryStatus.ST_SUCCESS,t):this._log("Arrived unexpected response: "+JSON.stringify(t)),delete c[s]):(l._log("Notification Received: "+JSON.stringify(t)),"dataChanged"!==t._type&&"playbackStarted"!=t._type&&"clientMessageSend"!=t._type||!n||n(t))}},this._onWebSocketClose=function(){l._log("websocket closed, connection dropped"),l._closeWebSocket(),a.stop(),_=!1,l.tryReconnect(vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED)},this._onWebSocketError=function(e){_=!1,l._log("CS WS error: "+JSON.encode(e))},this._sendRequestInt=function(e,t){delete e.query.format,delete e.query.sessionKey;var i=u.buildRequest(e.query);try{if(1!==o.readyState)throw l._log("WebSocket Status: "+o.readyState),"WEBSOCKET NOT OPEN!";o.send(i),e.sent=!0}catch(e){throw e}t||a.notifyRequestSent()},this.removeLightDevice=function(e){i?i.removeLightDevice(e):e()},this.getLightDeviceId=function(){return i?i.getLightDeviceId():""},this.sendNetLogs=function(e){var t;o&&1===o.readyState?(t={_type:"userNetLogRequest",data:e,dataEncoding:"base64"},this.doItNote(t,function(){})):alert("websocket was not open")},this.isOpen=function(){return _},this._getCsServerUrl=function(){switch(r.network){case"production":case"pre-production":return"https://startup.vudu.com/kickstart/webSocketLightDeviceQuery?";case"qa":return"https://startup.qa.marquee.net/kickstart/webSocketLightDeviceQuery?";case"dev":return"https://startup.dev.marquee.net/kickstart/webSocketLightDeviceQuery?"}throw"Unable to resolve kickstart url, unknown network prefix: "+r.network},this._log=function(e,t){vui.DirectorCsClient.log(e,t)},this._handleCriticalError=function(e){if(l._informStateListeners("disconnected"),_=!1,h=0,m)return m(e),void(m=null);t&&t(e)},this._closeWebSocket=function(){d=!1,o&&(o.onopen=null,o.onmessage=null,o.onerror=null,o.onclose=null,o.close(),o=null)},this._openWebSocket=function(e){l._log("open websocket: "+e),(o=new WebSocket(e)).onopen=l._onWebSocketOpen,o.onmessage=l._onWebSocketMessage,o.onerror=l._onWebSocketError,o.onclose=l._onWebSocketClose},this.CsQueries={walmartCartItemAddRequest:!0,purchaseRequest:!0,purchasePreflight:!0,purchaseForTokenPreflight:!0,purchaseForTokenRequest:!0,userNetLogRequest:!0,preOrderRequest:!0,preOrderDelete:!0,advertStreamingSessionStop:!0,advertStreamingSessionStart:!0,sessionKeyRenewRequest:!0,streamingSessionStart:!0,streamingSessionStop:!0,editionLocationGet:!0,playReadyDrmLicenseRequest:!0,xboxAccountLinkRemove:!0,xboxPurchaseReserve:!0,xboxPurchaseReservationConfirm:!0,xboxPurchaseReservationCancel:!0}},vui.DirectorCsClient.log=function(e,t){e=(new Date).toLocaleTimeString()+" CS connection: "+e,t?alert(e,"error"):alert(e)},vui.DirectorCsClient.ERRORS={OK:0,CONNECTION_DROPPED:1,LOGIN_ERROR:2,KICKSTART_ERROR:3,CANT_CREATE_LIGHT_DEVICE:4,QUERY_TIMEOUT:5,TOO_MANY_DEVICES:6},vui.DirectorCsClient.CONST={MAX_RETRY_COUNT:10,MAX_RETRY_DELAY:7,MIN_RETRY_DELAY:3,KICKSTART_REQUEST_TIMEOUT:4e3},vui.DirectorCsClient.connectionStateListeners=[],vui.DirectorCsClient.addStateListener=function(e){vui.DirectorCsClient.connectionStateListeners.push(e)},vui.DirectorCsClient.getStatusText=function(e){switch(e){case vui.DirectorCsClient.ERRORS.OK:return"OK";case vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED:return"Connection lost";case vui.DirectorCsClient.ERRORS.LOGIN_ERROR:return"Connection server login error";case vui.DirectorCsClient.ERRORS.KICKSTART_ERROR:return"Connection server kickstart error";case vui.DirectorCsClient.ERRORS.CANT_CREATE_LIGHT_DEVICE:return"Unable to request light device!";case vui.DirectorCsClient.ERRORS.QUERY_TIMEOUT:return"Connection server query timeout";case vui.DirectorCsClient.ERRORS.TOO_MANY_DEVICES:return"Too many devices!"}return"Unknown connection server client error"},vui.DirectorCsClient.getHelpText=function(e){switch(e){case vui.DirectorCsClient.ERRORS.TOO_MANY_DEVICES:return vui.vvPlatform.appFeatureEnabled()?"You have reached your limit for devices activated to this account. Please visit your account settings at video.walmart.com to deactivate one and then try again.":"Please visit your account on Vudu.com to deauthorize one, then restart the Vudu app to try again.";case vui.DirectorCsClient.ERRORS.CONNECTION_DROPPED:return vui.strings.getText("SPLASH_CHECK_CONNECTION_RETRY");default:return"Please check your internet connection or try again later."}};var vui=vui||{};if(!vui.DirectorCsClient)throw"DirectorCsClient is not defined!";vui.DirectorCsClient.Cypher=function(e){var i;switch(e){case"production":case"pre-production":i="Issue encountered while playing the movie, please try again later";break;case"qa":i="Sorry but we are having trouble playing this content";break;default:i="Failed to start playback. Please check your network settings"}function n(){for(var e=new Int8Array(16),t=0;t<16;t++)e[t]=255&(i.charCodeAt(t)*(t+1)^i.charCodeAt(31-t));return CryptoJS.enc.Hex.parse(function(e){for(var t="",i=new Uint8Array(e),s=0;s<i.length;s++)i[s]<16&&(t+="0"),t+=i[s].toString(16);return t}(e))}this.encrypt=function(e){var t=CryptoJS.enc.Hex.parse(e),i=n();return"A"+CryptoJS.AES.encrypt(t,i,{iv:CryptoJS.enc.Hex.parse("00000000000000000000000000000000"),mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).ciphertext.toString()},this.getLoginSignKey=function(e,t){var i=e+t,s=n();return CryptoJS.HmacSHA1(i,s).toString()}};var vui=vui||{};if(!vui.DirectorCsClient)throw"DirectorCsClient is not defined!";vui.DirectorCsClient.DirectorRequestBuilder=function(){this.buildRequest=function(e){return this._buildRequestInt(e)},this.buildKeepAliveResponse=function(){return this.buildRequest({_type:"keepAliveResponse"})},this.parseResponse=function(e){var t={};if(0===e.length)return t;for(var i=e.split("&"),s=0;s<i.length;++s){var n=i[s].split("="),a="",o="";if(1===n.length)a=n[0];else{if(2<n.length)throw"Error parsing CS response, badly formed key-value pair, number of parts > 2";2===n.length&&(a=n[0],o=n[1])}a=a.replace(/\+/g,"%20"),a=decodeURIComponent(a),o=o.replace(/\+/g,"%20"),o=decodeURIComponent(o);var r=t;if(-1!==a.indexOf(".")){var l=a;if("."==a.charAt(a.length-1))throw"Error parsing CS response, path '"+l+"' ends with a dot!";var u=l.split("."),d=u.length;if(d%2==0){if(this._findNoteByPath(t,u,d.length,l),0<o.length)throw"Error parsing CS response, even-length path '"+l+"' in url '"+e+"' has a value, but even-length paths just create a note.";continue}r=this._findNoteByPath(t,u,d-1,l),a=u[d-1]}"_type"===a?r._type=o:(r[a]=r[a]||[],r[a].push(o))}return t},this._findNoteByPath=function(e,t,i,s){for(var n=e,a=0;a<i;a+=2){var o=t[a],r=t[a+1];if(0===o.length)throw"empty part in path '"+s+"'";r=parseInt(r);var l=n[o]?n[o].length:0;if(r<l)n=n[o][r];else if(r==l){var u={};n[o]=n[o]||[],n[o].push(u),n=u}else if(l<r)throw"index "+r+" is too big.  '"+o+"' only has "+l+" values so far, so index must be less than or equal to that in path '"+s+"'"}return n},this._addRequestProperty=function(i,e,s){var n="";if(null==e)return n;if(Array.isArray(e)){if(0===e.length)return n;if("object"==typeof e[0])for(var t=0;t<e.length;++t){var a=this._buildRequestInt(e[t],s+i+"."+t+".");n+=a?a+"&":""}else{var o=this;e.map(function(e){var t=o._addRequestProperty(i,e,s);n+=t?t+"&":""})}0<n.length&&"&"===n[n.length-1]&&(n=n.substring(0,n.length-1))}else n="object"==typeof e?this._addRequestProperty(i,[e],s):encodeURIComponent(s+i)+"="+encodeURIComponent(e);return n},this._buildRequestInt=function(e,t){t=t||"";var i,s="";for(var n in e)null!=e[n]&&null!=e[n]&&e.hasOwnProperty(n)&&"function"!=typeof e[n]&&(s+=(i=this._addRequestProperty(n,e[n],t))?i+"&":"");return s.substring(0,s.length-1)}};var vui=vui||{};if(!vui.DirectorCsClient)throw"DirectorCsClient is not defined!";vui.DirectorCsClient.LightDeviceManager=function(o){var r,l;this.getLightDevice=function(n,a){var t,s,i;r&&l?n({lightDeviceId:r,lightDeviceKey:l}):(o.userId&&o.sessionKey||o.setSessionFromCookie(),(t={_type:"lightDeviceRequest"}).lightDeviceType=vui.vvPlatform.clientType,t.accountId=o.userId,t.sessionKey=o.sessionKey,t.domain=vui.vvPlatform.getDomain(),s=function(){o.doQuery(t,function(e,t,i){var s;t==o.queryStatus.ST_SUCCESS?(s=i.status&&i.status[0],"lightDeviceResponse"===i._type&&s&&"ok"===s?(r=i.lightDevice[0].lightDeviceId[0],l=i.lightDevice[0].lightDeviceKey[0],n({lightDeviceId:r,lightDeviceKey:l})):s?(vui.DirectorCsClient.log("lightDeviceRequest failed with status! "+JSON.encode(i),!0),a(s)):(vui.DirectorCsClient.log("lightDeviceRequest failed with error! "+JSON.encode(i),!0),a("accessDenied"))):(vui.DirectorCsClient.log("Unable to create light device, query status: "+t,!0),a(null))})},i=function(){r=vui.m.lightDeviceId;var e={_type:"lightDeviceSearch"};e.lightDeviceType=vui.vvPlatform.clientType,e.accountId=o.userId,e.lightDeviceId=vui.m.lightDeviceId,r?o.doQuery(e,function(e,t,i){r&&i&&!i.lightDevice?(vui.m.closeCsConnection(),vui.m.logout(),vui.account.refresh(function(){controller.goToLoadingPage()})):s()}):s()},vui.vvPlatform.isXbox?vui.ActivationController.getXboxTokenAsync().then(function(e){t.xboxToken=e.token,i()},function(e){alert(e,"error"),controller.hidePopup(),vui.getModel().logout();var t=vui.getModel()&&vui.getModel().supportPhone||"",i=vui.vvPlatform.appFeatureEnabled()?"Walmart Video":"VUDU";vui.ActivationController.showError(vui.strings.getText("ACTIVATION_GENERAL_ERROR_TEXT_APPX",i,t)),vui.setBusy(!1),a(e)}):("chromecast"!==vui.vvPlatform.clientType&&(t.lightDeviceClientId=VUDU.registry.deviceId),i()))},this.removeLightDevice=function(t){var i={};vui.vvPlatform.isXbox?(i._type="xboxAccountLinkRemove",i.userId=o.userId,i.xboxType="xboxOne",vui.ActivationController.getXboxTokenAsync().then(function(e){i.xboxToken=e.token,alert("Removing the Xbox One link"),o.doQuery(i,function(){l=r=null,t()})})):r?(i._type="lightDeviceRemove",i.lightDeviceId=r,i.accountId=o.userId,alert("Removing light device"),o.doQuery(i,function(){l=r=null,t()})):t()},this.getLightDeviceId=function(){return r},this.getLightDeviceKey=function(){return l}};var vui=vui||{};if(!vui.DirectorCsClient)throw"DirectorCsClient is not defined!";vui.DirectorCsClient.Watchdog=function(e){var t=!1,i=null,s=null,n=this;this.start=function(){t=!0,s=window.setTimeout(this.tick,1e3)},this.stop=function(){t=!1,s&&(window.clearTimeout(s),s=null)},this.notifyRequestSent=function(){i=new Date},this.notifyResponseReceived=function(){i=null},this.tick=function(){t&&(i&&1e4<new Date-i?(vui.DirectorCsClient.log("CS connection: timeout waiting for server response"),e.tryReconnect(vui.DirectorCsClient.ERRORS.QUERY_TIMEOUT)):s=window.setTimeout(n.tick,1e3))}};var vui=window.vui||{};vui.DashPlayer=function(d){this._playerFrame=null,this._startParams=null,this._duration=null,this._checkStartupTimerHandle=null,this._bitrates=[],this.blackScreen=!1,this.destroyedFrame=null,this._started=!1,this._deferStop=!1,this.streamingAlgorithm=null,this.streamingPlayer=null,this.MAX_STARTUP_TIME=45e3,vui.gConnectionInstance.isClearplayEnabled()&&(this.clearPlayControl=null,this.clearPlayEvents=[],this.clearPlaySettings=vui.clearPlaySettings?vui.clearPlaySettings:new vui.ClearPlaySettings,this.clearPlaySettings.load(function(){vui.clearPlaySettings=this.clearPlaySettings}.bind(this))),this._timestamps=null,this._endedEventTimerHandle=null,this._addLog=function(e,t){alert(e,t)},this.attachCppPlayerHooks=function(e){VUDU.video.prepareToPlay=this.prepareToPlay.bind(this),VUDU.video.getTimestamps=this.getTimestamps.bind(this),e.plugin.Pause=this.pause.bind(this),e.plugin.Stop=this.stop.bind(this),e.plugin.Resume=this.resume.bind(this),"object"==typeof webapis&&webapis.appcommon&&(pluginAPI.setOffScreenSaver=function(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF)},pluginAPI.setOnScreenSaver=function(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)})},this._sendMsgToPlayer=function(e,t){var i=document.getElementById("playerFrame");i&&i.contentWindow.postMessage(e,t||"*")},this.getFullUrl=function(){var e=this._startParams.url[0]+"/manifest.mpd";return this._startParams.urlSuffix&&(e+=this._startParams.urlSuffix[0]),e},this.msgHandler=function(e){if(e&&e.data&&e.data.type){var t=e.data.context;if(this.instance===t)switch(e.data.type){case Asteroid.PlayerBridge.Bridge.EVENT.READY:if((this._started=!0)===this._deferStop){this._performStop(),this._deferStop=!1;break}var i=Asteroid.PlayerBridge.Builder.HostMsgBuilder.setDebugLevel(vui.account.getUserLogLevel(),vui.account.hasLevel2DebugLabel());this._sendMsgToPlayer(i,"*");var s=vui.gConnectionInstance.getAsteroidPlayer();s&&(n=Asteroid.PlayerBridge.Builder.HostMsgBuilder.loadPlayerImplementation(s),this._sendMsgToPlayer(n,"*"));var n,a=vui.gConnectionInstance.getAsteroidStreamingAlgorithm();a&&(n=Asteroid.PlayerBridge.Builder.HostMsgBuilder.selectStreamingAlgorithm(a),this._sendMsgToPlayer(n,"*")),this.startPlaybackViaPost(this);break;case Asteroid.PlayerBridge.Bridge.EVENT.STATE_CHANGE:var o=e.data.status;this.onDashPlayerStateChange(o,t);break;case Asteroid.PlayerBridge.Bridge.EVENT.DESTROYED:this._started=!1,this.destroyPlayerFrame();break;case"asteroid_loaded":var r=Asteroid.PlayerBridge.Bridge.formatHostConnectMessage(this.instance);this._sendMsgToPlayer(r,"*")}else console.error("Message from bridge has wrong context: ",t,"; expected: ",this.instance)}}.bind(this),this.checkPlayerStarted=function(){this._checkStartupTimerHandle=null,d.state!==d.PREPARING&&d.state!==d.BUFFERING||(this._addLog("Error after "+this.MAX_STARTUP_TIME+" still not playing "),d.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.TIMEOUT))},this.startPlaybackViaPost=function(e){var t,i=e._startParams.urlSuffix?e._startParams.urlSuffix[0].substring(1):"",s={uriBase:e._startParams.subtitleBaseUri,uriSuffix:i,subtitles:e._startParams.subtitleArr},n=e._startParams.encodingFormat3D;Asteroid.PlayerBridge.Params.EditionProfile&&(n=Asteroid.PlayerBridge.Params.EditionProfile(Asteroid.PlayerBridge.Params.EditionProfile.Dimensionality(e._startParams.encodingFormat3D),Asteroid.PlayerBridge.Params.EditionProfile.VideoProfile(e._startParams.videoProfile))),vui.gConnectionInstance.isClearplayEnabled()&&this.clearPlayControl&&vui.clearPlaySettings&&vui.clearPlaySettings.getEnabled()&&(0<(t=this.clearPlayControl.getCurrentSkipStop(e._startParams.startTime/1e3))&&(e._startParams.startTime=1e3*t+2e3));var a=Asteroid.PlayerBridge.Builder.HostMsgBuilder.start(i,e.getFullUrl(),e._startParams.startTime/1e3,e._startParams.selectedQuality,n,s,e._startParams.suggestedMaxBitrate);e._sendMsgToPlayer(a,"*")},this.loadClearPlayData=function(a,e,o){var t={_type:"clearplayIncidentsGet",contentId:a,videoQuality:e,category:this.clearPlaySettings.getEnabledCategories()};vui.getModel().doQuery(t,function(e,t,i){var s,n;i&&i.clearplayIncident?(s=i.clearplayIncident.map(function(e,t){return new vui.ClearPlayEvent(t.toString(),parseInt(e.startOffset[0])/1e3,parseInt(e.endOffset[0])/1e3,e.action[0].toLowerCase())}),(n=new vui.ClearPlayEventCollection(a)).setEvents(s),this.clearPlayEvents=n,this.clearPlayControl=new vui.ClearPlayControl(this,n),o()):alert("Bad clearplayincidentget="+t,"error")}.bind(this))},this.processTimeUpdate=function(e){window.videoElement=e,alert("CLEARPLAY timeupdate "+e.currentTime,"info"),this.clearPlayControl.onPlayerTime(e.currentTime)},this.createPlayerFrame=function(){this._playerFrame&&this.destroyPlayerFrame(),this.instance=""+Date.now(),this._playerFrame=document.createElement("iframe"),this._playerFrame.style.position="absolute",this._playerFrame.style.width=window.vui.ResDef.SCREEN_WIDTH+"px",this._playerFrame.style.height=window.vui.ResDef.SCREEN_HEIGHT+"px",this._playerFrame.style.top="0",this._playerFrame.style.left="0",this._playerFrame.setAttribute("id","playerFrame"),this._playerFrame.setAttribute("allowfullscreen","true"),this._playerFrame.style.zIndex="2",this._playerFrame.setAttribute("frameBorder","0"),this._playerFrame.setAttribute("src","dashplayer/index.html"),document.body.appendChild(this._playerFrame),this.clearPlaySettings=vui.clearPlaySettings?vui.clearPlaySettings:new vui.ClearPlaySettings;var i=function(){this._playerFrame.removeEventListener("load",i);var e=vui.vvPlatform.id;"hygiea"===e&&(e="intera"),this._playerFrame.contentWindow.postMessage({message:e,context:this.instance},"*");var t;(0,window.pretendPlayerCallback)("player","stateChanged",{state:"preparing_to_play"}),d.state=d.BUFFERING,this._checkStartupTimerHandle&&window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=window.setTimeout(this.checkPlayerStarted.bind(this),this.MAX_STARTUP_TIME),vui.gConnectionInstance.isClearplayEnabled()&&"true"===this._startParams.hasClearplay&&(t=function(){var e,t=this._playerFrame.contentDocument.createElement("meta");t.name="clearplay",t.content=this._startParams.contentId,this._playerFrame.contentDocument.head.appendChild(t),"movie"!==this._startParams.playbackType&&"adcontent"!==this._startParams.playbackType||((e=this._playerFrame.contentWindow.document.getElementsByTagName("video")[0]).setAttribute("data-contentId",this._startParams.contentId),e.addEventListener("timeupdate",function(){this.clearPlaySettings.getEnabled()&&d.state==d.PLAYING&&this.processTimeUpdate.call(this,e)}.bind(this))),vui.clearPlaySettings||(vui.clearPlaySettings=this.clearPlaySettings)}.bind(this),this.clearplayInSeeking=!1,this.clearPlaySettings.load(this.loadClearPlayData.bind(this,this._startParams.contentId,this._startParams.selectedQuality,t)))}.bind(this);this._playerFrame.addEventListener("load",i),window.addEventListener("message",this.msgHandler)},this.destroyPlayerFrame=function(){var e;this.destroyedFrame=null,window.removeEventListener("message",this.msgHandler),this._playerFrame&&(this._playerFrame.parentElement.removeChild(this._playerFrame),this._playerFrame=null),!this.blackScreen||(e=document.getElementById("theaterPage"))&&(e.style.backgroundColor="transparent",this.blackScreen=!1),window.fireEvent("playerDestroyed")},this.onDashPlayerStateChange=function(e,t){var i=e.state[0];if("timeChanged"!==i&&"licenseRequest"!=i&&"sendNetLogs"!=i&&this._addLog("callback from player: "+JSON.stringify(e)),this.destroyedFrame&&this.destroyedFrame===t)return"sendStats"===i&&(this._addLog("sending playback final stats"),alert(JSON.stringify(e)),this.sendStats(e.stats)),void this._addLog(vui._.aStr(e.message),vui._.aStr(e.level));switch(i){case"timeChanged":this._duration=parseInt(e.duration[0]),window.setCurTime(1e3*parseInt(e.currentTime[0]),1e3*this._duration),this.checkStreamEnded(parseFloat(e.currentTime[0]),parseFloat(e.duration[0]));break;case"playbackRateChanged":var s=e.playbackRate[0];"0"===s?window.startDrawLoading():"1"===s?window.endDrawLoading():this._addLog("unknown payback rate: "+s);break;case"ended":if(vui.vvPlatform.isXbox&&(Windows.Media.SystemMediaTransportControls.getForCurrentView().playbackStatus=Windows.Media.MediaPlaybackStatus.stopped),this._endedEventTimerHandle)return void this._addLog("got ENDED from player but notification is schedulled, ignoring");window.setCurTime(1e3*this._duration,1e3*this._duration),window.stopPlayer();break;case"playererror":this._addLog("error notification from player!"),d.sendNotification(vui.Facade.PLAYER_ERROR,"PLAYER ERROR");break;case"playing":vui.vvPlatform.isXbox&&(Windows.Media.SystemMediaTransportControls.getForCurrentView().playbackStatus=Windows.Media.MediaPlaybackStatus.playing),this._checkStartupTimerHandle&&(window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=null),window.endDrawLoading();break;case"seeked":this.clearplayInSeeking&&(d.state=d.PLAYING,this.clearplayInSeeking=!1,this.clearPlayControl.reset());break;case"paused":vui.vvPlatform.isXbox&&(Windows.Media.SystemMediaTransportControls.getForCurrentView().playbackStatus=Windows.Media.MediaPlaybackStatus.paused);break;case"bufferunderrun":window.startDrawLoading();break;case"licenseRequest":var n=e.drmToken[0],a=e.requestSequence[0];this.handleLicenseRequest(n,a);break;case"loadedBitrates":var o=e.length&&e.length[0];this.bitrates=[];for(var r=0;r<o;++r)this.bitrates.push(r);break;case"loadedPlayer":this.streamingPlayer=vui._.aStr(e.id),this.streamingAlgorithm=vui._.aStr(e.streamingAlgorithm);break;case"changedBitrateIndex":var l=e.newBitrate&&e.newBitrate[0];this._addLog("changedBitrateIndex "+l);var u={bitrate:l,rates:this.bitrates};window.pretendPlayerCallback("player","bitrateChanged",u);break;case"changedDebugInfo":this._addLog("debug info from player"),e.newDebugInfo&&e.newDebugInfo[0]?this.notifyDebugInfo(e.newDebugInfo[0]):this._addLog("changedDebugInfo notification has unknown format");break;case"sendStats":this._addLog("sending playback stats"),alert(JSON.stringify(e)),this.sendStats(e.stats);break;case"sendNetLogs":this._addLog(vui._.aStr(e.message),vui._.aStr(e.level))}},this.prepareToPlay=function(e){this.timestamps=null,this._duration=0,this._bitrates=[],this._endedEventTimerHandle=null,this._startParams=e,this._started=!1,this._deferStop=!1,window.startDrawLoading(),this._playerFrame?(alert("Existing player. Wait for Destroy Event"),window.addEvent("playerDestroyed",function(){alert("Old player destroyed"),this.createPlayerFrame(),window.removeEvents("playerDestroyed")}.bind(this))):this.createPlayerFrame(),this.adjustFrameAspectRatio(),this.retrieveTimestampInfo(e.thumbnailsBaseUri,e.thumbnailsUriSuffix)},this.pause=function(){var e=Asteroid.PlayerBridge.Builder.HostMsgBuilder.pause();this._sendMsgToPlayer(e)},this.resume=function(){var e=Asteroid.PlayerBridge.Builder.HostMsgBuilder.play();this._sendMsgToPlayer(e)},this.stop=function(){window.removeEvents("playerDestroyed"),!1!==this._started?this._performStop():this._deferStop=!0},this._performStop=function(){this.clearPlayControl&&this.clearPlayControl.reset(),this.destroyedFrame=this.instance;var e=Asteroid.PlayerBridge.Builder.HostMsgBuilder.flushStats();this._sendMsgToPlayer(e);var t,i=Asteroid.PlayerBridge.Builder.HostMsgBuilder.stop();this._sendMsgToPlayer(i),this._checkStartupTimerHandle&&(window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=null),this._endedEventTimerHandle&&(window.clearTimeout(this._endedEventTimerHandle),this._endedEventTimerHandle=null),!this._playerFrame||this.blackScreen||(t=document.getElementById("theaterPage"))&&(t.style.backgroundColor="black",this.blackScreen=!0)},this.seek=function(e,t,i){var s="after"==t?Asteroid.PlayerBridge.Params.SeekTarget.AFTER:"exact"==t?Asteroid.PlayerBridge.Params.SeekTarget.EXACT:Asteroid.PlayerBridge.Params.SeekTarget.BEFORE,n=0!=i,a=Asteroid.PlayerBridge.Params.SeekOptions(s,n),o=Asteroid.PlayerBridge.Builder.HostMsgBuilder.seek(e,a);this._sendMsgToPlayer(o)},this.getTimestamps=function(){if(this._timestamps)return this._timestamps;if(vui.vvPlatform.inBrowser()&&this._duration){for(var e=[],t=0;t<this._duration;++t)e.push(1e3*t);return e}return null},this.adjustFrameAspectRatio=function(){this._startParams.aspectRatio},this.handleLicenseRequest=function(e,a){var t="playReadyDrmLicenseRequest";"sol"!==vui.vvPlatform.id||vui.args.playready||(t="widevineDrmLicenseRequest");var i={_type:t,drmToken:e,userId:vui.account.getAccountId(),sessionKey:vui.getModel().sessionKey,editionId:this._startParams.editionId},o=this;vui.getModel().doQuery(i,function(e,t,i){var s,n;i&&i.zoom&&0<i.zoom.length&&o._addLog("RequestID is: "+vui._.aStr(i.zoom[0].requestId),"notice"),t===vui.getModel().queryStatus.ST_SUCCESS?(s=i&&i.license&&i.license[0])?(o._addLog("got DRM license"),n=Asteroid.PlayerBridge.Builder.HostMsgBuilder.loadLicense(a,s),o._sendMsgToPlayer(n),d.refreshOwnershipInfo()):(o._addLog("Malformed playReadyDrmLicenseRequest response, unable to find license"),o._addLog("server response: "+JSON.encode(i)),d.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR")):(o._addLog("playReadyDrmLicenseRequest query failed: "+JSON.encode(i)),d.sendNotification(vui.Facade.PLAYER_ERROR,"DIRECTOR ERROR"))})},this.retrieveTimestampInfo=function(e,t){var i,s,n;e?(s=e+"/timestamps.txt"+t,(i=new XMLHttpRequest).open("GET",s,!0),n=this,i.onload=function(){var e=i.responseText.trim();try{n._timestamps=e.split("\n").map(function(e){return parseInt(e)}),n._timestamps.unshift(0),n._timestamps.pop()}catch(e){n._addLog("unable to parse timestamps: "+e)}},i.onerror=function(e){n._addLog("unable to load timestamps: "+e)},i.send(null)):this._addLog("unable to load timestamps, thumbnailsBaseUri is not set!!!")},this.notifyDebugInfo=function(e){alert("player debug info: "+e),d.onPlaybackDebugInfo(e)},this.handlePowerSuspend=function(){var e;d&&(d.state!==d.STOPPED?d.stop("powerOff"):d.isDoingRatingDialog&&(controller.hidePopup(),controller.goBack(),d.isDoingRatingDialog=!1)),vui.m.featuredCache.clearCache(),vui.getModel().closeCsConnection(),controller.baseLayer.currentPage&&(e=controller.baseLayer.currentPage,controller.baseLayer.currentParams=e.save?e.save():{})},this.handlePowerResume=function(){vui.m.userId&&vui.m.sessionKey&&vui.getModel().loadUser(function(){window.updateVuduSplashScreen("none"),controller.baseLayer.currentPage&&"Theater"!==controller.baseLayer.currentTemplate&&controller.refreshCurrentPage()})},this.sendStats=function(e){if(0<e.length&&(!vui.gConnectionInstance.getIsDissableAggStatsForAds()||"advert"!==d.contentType)){var t,i,s=null!==(s=vui.vvPlatform.getConnectionType())?";connectionType="+s:"",n={};if(n.sessionId=d.getStreamingSessionId(),n.editionId=this._startParams.editionId,n.movieUrl=this._startParams.url[0],n.clientData=(vui.vvPlatform.clientTypeForStreamingStats||vui.vvPlatform.clientType)+";streamingPlayer="+this.streamingPlayer+";streamingAlgorithm="+this.streamingAlgorithm+s,"vizioCast"!==vui.vvPlatform.clientType||(t=vui.vvPlatform.getSystemInfoFromVizioUserAgent())&&(n.clientData+=";firmware="+t.fw+";model="+t.model),alert(n.clientData),"object"==typeof e[0])i=e[0];else if("string"==typeof e[0])try{i=JSON.decode(e[0])}catch(e){this._addLog("error parsing playback stats: "+e)}if(i)for(var a in i)n[a]||(n[a]=i[a]);Array.isArray(n.bitrates)&&(n.levels=n.bitrates.length,n.bitrates=n.bitrates.map(function(e){return Math.round(parseFloat(e)/1e3)})),vui.netLogger.addAggStatLog(n)}},this.checkStreamEnded=function(e,t){!vui.vvPlatform.isXbox&&Math.abs(t-e)<1&&null===this._endedEventTimerHandle&&(this._addLog("scheduling ENDED event handler call"),this._endedEventTimerHandle=window.setTimeout(function(){window.stopPlayer()},700))},document.addEventListener("visibilitychange",function(){document.hidden?(this._addLog("power suspend app"),this.handlePowerSuspend()):(this._addLog("power resume app"),this.handlePowerResume())}.bind(this)),this.getCurrentPosition=function(){return window.videoElement.currentTime},this.getVolume=function(){return window.videoElement.volume},this.setVolume=function(e,t){var i=Asteroid.PlayerBridge.Builder.HostMsgBuilder.setVolume(e,t);this._sendMsgToPlayer(i)},this.seekClearplay=function(e){if(d.state!==d.PLAYING&&window.videoElement)return 1;alert("CLEARPLAY seek "+e,"info"),this.clearplayInSeeking=!0,d.state=d.BUFFERING,this.seek(e,"after",!1)}};var vui=window.vui||{};vui.AncinusPlayer=function(d){this._playerFrame=null,this._startParams=null,this._duration=null,this._checkStartupTimerHandle=null,this._bitrates=[],this._started=!1,this._deferStop=!1,this.destroyedFrame=null,this.MAX_STARTUP_TIME=45e3,this._timestamps=null,this._endedEventTimerHandle=null,this._addLog=function(e,t){alert(e,t)},this.attachCppPlayerHooks=function(e){VUDU.video.prepareToPlay=this.prepareToPlay.bind(this),VUDU.video.getTimestamps=this.getTimestamps.bind(this),e.plugin.Pause=this.pause.bind(this),e.plugin.Stop=this.stop.bind(this),e.plugin.Resume=this.resume.bind(this),"object"==typeof webapis&&webapis.appcommon&&(pluginAPI.setOffScreenSaver=function(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_OFF)},pluginAPI.setOnScreenSaver=function(){webapis.appcommon.setScreenSaver(webapis.appcommon.AppCommonScreenSaverState.SCREEN_SAVER_ON)})},this.getFullUrl=function(){var e=this._startParams.url[0]+"/manifest.mpd";return this._startParams.urlSuffix&&(e+=this._startParams.urlSuffix[0]),e},this._sendMsgToPlayer=function(e){ancinus.postMsgToPlayer(e)},this.msgHandler=function(e){if(e&&e.data&&e.data.type){var t=e.data.context;if(this.instance===t)switch(e.data.type){case ancinus.PlayerBridge.Bridge.EVENT.READY:if((this._started=!0)===this._deferStop){this._performStop(),this._deferStop=!1;break}var i=ancinus.PlayerBridge.Builder.HostMsgBuilder.setDebugLevel(vui.account.getUserLogLevel(),vui.account.hasLevel2DebugLabel());this._sendMsgToPlayer(i),this.startPlaybackViaPost(this);break;case ancinus.PlayerBridge.Bridge.EVENT.STATE_CHANGE:var s=e.data.status;this.handleStateChange(s,t);break;case ancinus.PlayerBridge.Bridge.EVENT.DESTROYED:this._started=!1,window.VUDU_APP_ARGS.doCAF?this.detachFromPlayerFrame():this.destroyPlayerFrame()}else alert("Message from bridge has wrong context: "+t+"; expected: "+this.instance,"debug")}}.bind(this),this.checkPlayerStarted=function(){this._checkStartupTimerHandle=null,d.state!==d.PREPARING&&d.state!==d.BUFFERING||(this._addLog("Error after "+this.MAX_STARTUP_TIME+" still not playing "),d.sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.TIMEOUT))},this.startPlaybackViaPost=function(e){var t=e._startParams.urlSuffix?e._startParams.urlSuffix[0].substring(1):"",i={uriBase:e._startParams.subtitleBaseUri,uriSuffix:t,subtitles:e._startParams.subtitleArr},s=ancinus.PlayerBridge.Builder.HostMsgBuilder.start(t,e.getFullUrl(),e._startParams.startTime/1e3,e._startParams.selectedQuality,e._startParams.encodingFormat3D,i,e._startParams.suggestedMaxBitrate);this._sendMsgToPlayer(s)},this.createPlayerFrame=function(){this.instance=""+Date.now(),this._playerFrame=document.createElement("iframe"),this._playerFrame.style.position="absolute",this._playerFrame.style.width=window.vui.ResDef.SCREEN_WIDTH+"px",this._playerFrame.style.height=window.vui.ResDef.SCREEN_HEIGHT+"px",this._playerFrame.style.top="0",this._playerFrame.style.left="0",this._playerFrame.setAttribute("id","playerFrame"),this._playerFrame.setAttribute("allowfullscreen","true"),this._playerFrame.style.zIndex="2",this._playerFrame.setAttribute("frameBorder","0"),this._playerFrame.setAttribute("src","node_modules/@vudu/ancinus/player.html"),document.body.appendChild(this._playerFrame);var t=function(){this._playerFrame.removeEventListener("load",t);var e=ancinus.PlayerBridge.Bridge.formatHostConnectMessage(this.instance);this._playerFrame.contentWindow.postMessage(e,"*");(0,window.pretendPlayerCallback)("player","stateChanged",{state:"preparing_to_play"}),d.state=d.BUFFERING,this._checkStartupTimerHandle&&window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=window.setTimeout(this.checkPlayerStarted.bind(this),this.MAX_STARTUP_TIME)}.bind(this);this._playerFrame.addEventListener("load",t),ancinus.shimPlayerMsgPost(this._playerFrame.contentWindow),window.addEventListener("message",this.msgHandler)},this.attachToPlayerFrame=function(){this.instance=""+Date.now();var e=ancinus.PlayerBridge.Bridge.formatHostConnectMessage(this.instance);ancinus.postMsgToPlayer(e);(0,window.pretendPlayerCallback)("player","stateChanged",{state:"preparing_to_play"}),d.state=d.BUFFERING,this._checkStartupTimerHandle&&window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=window.setTimeout(this.checkPlayerStarted.bind(this),this.MAX_STARTUP_TIME),ancinus.setPlayerWindowStyle({top:"0px",left:"0px",width:window.vui.ResDef.SCREEN_WIDTH+"px",height:window.vui.ResDef.SCREEN_HEIGHT+"px",zIndex:"2"}),window.addEventListener("message",this.msgHandler)},this.destroyPlayerFrame=function(){this.destroyedFrame=null,window.removeEventListener("message",this.msgHandler),this._playerFrame&&(this._playerFrame.parentElement.removeChild(this._playerFrame),this._playerFrame=null),window.fireEvent("playerDestroyed")},this.detachFromPlayerFrame=function(){window.removeEventListener("message",this.msgHandler),ancinus.setPlayerWindowStyle({zIndex:"-100"}),window.fireEvent("playerDestroyed")},this.handleStateChange=function(e,t){var i=e.state[0];switch("timeChanged"!==i&&"licenseRequest"!=i&&"sendNetLogs"!=i&&this._addLog("callback from player: "+JSON.stringify(e)),i){case"timeChanged":if(this.destroyedFrame&&this.destroyedFrame===t)return;this._duration=parseInt(e.duration[0]),window.setCurTime(1e3*parseInt(e.currentTime[0]),1e3*this._duration),window.VUDU_APP_ARGS.doCAF||this.checkStreamEnded(parseFloat(e.currentTime[0]),parseFloat(e.duration[0]));break;case"playbackRateChanged":var s=e.playbackRate[0];"0"===s?window.startDrawLoading():"1"===s?window.endDrawLoading():this._addLog("unknown payback rate: "+s);break;case"ended":if(this._endedEventTimerHandle)return void this._addLog("got ENDED from player but notification is schedulled, ignoring");window.setCurTime(1e3*this._duration,1e3*this._duration),window.stopPlayer();break;case"playererror":this._addLog("error notification from player!"),d.sendNotification(vui.Facade.PLAYER_ERROR,"PLAYER ERROR");break;case"playing":this._checkStartupTimerHandle&&(window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=null),window.endDrawLoading();break;case"bufferunderrun":window.startDrawLoading();break;case"licenseRequest":var n=e.drmToken[0],a=e.requestSequence[0];this.handleLicenseRequest(n,a);break;case"loadedBitrates":var o=e.length&&e.length[0];this.bitrates=[];for(var r=0;r<o;++r)this.bitrates.push(r);break;case"changedBitrateIndex":var l=e.newBitrate&&e.newBitrate[0];this._addLog("changedBitrateIndex "+l);var u={bitrate:l,rates:this.bitrates};window.pretendPlayerCallback("player","bitrateChanged",u);break;case"changedDebugInfo":this._addLog("debug info from player"),e.newDebugInfo&&e.newDebugInfo[0]?this.notifyDebugInfo(e.newDebugInfo[0]):this._addLog("changedDebugInfo notification has unknown format");break;case"sendStats":this._addLog("sending playback stats"),alert(JSON.stringify(e)),this.sendStats(e.stats);break;case"sendNetLogs":this._addLog(vui._.aStr(e.message),vui._.aStr(e.level))}},this.prepareToPlay=function(e){this.timestamps=null,this._duration=0,this._bitrates=[],this._endedEventTimerHandle=null,this._started=!1,this._deferStop=!1,this._startParams=e,window.startDrawLoading(),window.VUDU_APP_ARGS.doCAF?this.attachToPlayerFrame():this._playerFrame?(alert("Existing player. Wait for Destroy Event"),window.addEvent("playerDestroyed",function(){alert("Old player destroyed"),this.createPlayerFrame(),window.removeEvents("playerDestroyed")}.bind(this))):this.createPlayerFrame(),this.adjustFrameAspectRatio(),this.retrieveTimestampInfo(e.thumbnailsBaseUri,e.thumbnailsUriSuffix)},this.pause=function(){var e=ancinus.PlayerBridge.Builder.HostMsgBuilder.pause();this._sendMsgToPlayer(e)},this.resume=function(){var e=ancinus.PlayerBridge.Builder.HostMsgBuilder.play();this._sendMsgToPlayer(e)},this.stop=function(){window.removeEvents("playerDestroyed"),0!=this._started?this._performStop():this._deferStop=!0},this._performStop=function(){var e,t,i=document.getElementById("playerFrame");(window.VUDU_APP_ARGS.doCAF||i)&&(e=ancinus.PlayerBridge.Builder.HostMsgBuilder.stop(),window.VUDU_APP_ARGS.doCAF||(this.destroyedFrame=this.instance),this._sendMsgToPlayer(e),t=ancinus.PlayerBridge.Builder.HostMsgBuilder.flushStats(),this._sendMsgToPlayer(t),this._checkStartupTimerHandle&&(window.clearTimeout(this._checkStartupTimerHandle),this._checkStartupTimerHandle=null))},this.seek=function(e){var t=ancinus.PlayerBridge.Builder.HostMsgBuilder.seek(e);this._sendMsgToPlayer(t)},this.getTimestamps=function(){if(this._timestamps)return this._timestamps;if(vui.vvPlatform.inBrowser()&&this._duration){for(var e=[],t=0;t<this._duration;++t)e.push(1e3*t);return e}return null},this.adjustFrameAspectRatio=function(){this._startParams.aspectRatio},this.handleLicenseRequest=function(e,a){var t={_type:"playReadyDrmLicenseRequest",drmToken:e,userId:vui.m.userId,sessionKey:vui.getModel().sessionKey,editionId:this._startParams.editionId},o=this;vui.getModel().doQuery(t,function(e,t,i){var s,n;t===vui.getModel().queryStatus.ST_SUCCESS?(s=i&&i.license&&i.license[0])?(o._addLog("got DRM license"),n=ancinus.PlayerBridge.Builder.HostMsgBuilder.loadLicense(a,s),o._sendMsgToPlayer(n)):(o._addLog("Malformed playReadyDrmLicenseRequest response, unable to find license"),o._addLog("server response: "+JSON.encode(i)),d.sendNotification(vui.Facade.PLAYER_ERROR,"PLAYER ERROR")):o._addLog("playReadyDrmLicenseRequest query failed: "+JSON.encode(i))})},this.retrieveTimestampInfo=function(e,t){var i,s,n;e?(s=e+"/timestamps.txt"+t,(i=new XMLHttpRequest).open("GET",s,!0),n=this,i.onload=function(){var e=i.responseText.trim();try{n._timestamps=e.split("\n").map(function(e){return parseInt(e)}),n._timestamps.unshift(0),n._timestamps.pop()}catch(e){n._addLog("unable to parse timestamps: "+e)}},i.onerror=function(e){n._addLog("unable to load timestamps: "+e)},i.send(null)):this._addLog("unable to load timestamps, thumbnailsBaseUri is not set!!!")},this.notifyDebugInfo=function(e){alert("player debug info: "+e),d.onPlaybackDebugInfo(e)},this.handlePowerSuspend=function(){d&&d.state!==d.STOPPED&&d.stop("powerOff"),vui.getModel().closeCsConnection()},this.handlePowerResume=function(){vui.getModel().createCsConnection()},this.sendStats=function(e){if(0<e.length&&(!vui.gConnectionInstance.getIsDissableAggStatsForAds()||"advert"!==d.contentType)){var t,i={};if(i.sessionId=d.getStreamingSessionId(),i.editionId=this._startParams.editionId,i.movieUrl=this.getFullUrl(),i.clientData=vui.vvPlatform.clientTypeForStreamingStats||vui.vvPlatform.clientType,"object"==typeof e[0])t=e[0];else if("string"==typeof e[0])try{t=JSON.decode(e[0])}catch(e){this._addLog("error parsing playback stats: "+e)}if(t)for(var s in t)i[s]||(i[s]=t[s]);Array.isArray(i.bitrates)&&(i.levels=i.bitrates.length,i.bitrates=i.bitrates.map(function(e){return Math.round(parseFloat(e)/1e3)})),vui.netLogger.addAggStatLog(i)}},this.checkStreamEnded=function(e,t){!vui.vvPlatform.isXbox&&Math.abs(t-e)<1&&null===this._endedEventTimerHandle&&(this._addLog("scheduling ENDED event handler call"),this._endedEventTimerHandle=window.setTimeout(function(){window.stopPlayer()},700))},document.addEventListener("visibilitychange",function(){document.hidden?(this._addLog("power suspend app"),this.handlePowerSuspend()):(this._addLog("power resume app"),this.handlePowerResume())}.bind(this))};var vui=window.vui||{};vui.deepLink={getDeepLinkParams:function(){return vui.vvPlatform.getDeepLinkParams()},switchingToDeepLinkPage:!1,isPlayingContent:function(e){if("Theater"===controller.baseLayer.currentTemplate){var t=controller.baseLayer.currentPage;try{if(t.params.data.data.contentId[0]===e)return!0}catch(e){}}return!1}},vui.AvodManager=function(d,o){function e(n){this._spot=null,this._requestPending=!1,this._lastContentTimeUpdate=-1,this._contentTimeToInsertMidrolls=-1,this._preloadedMidrolls=null,this._advertContentDefinition=null,this.init=function(e,t){e.minMidRollPlaybackSeconds&&(this._advertContentDefinition=e,this._contentTimeToInsertMidrolls=parseInt(e.minMidRollPlaybackSeconds),this._contentTimeToInsertMidrolls=Math.max(this._contentTimeToInsertMidrolls,10),t&&(this._contentTimeToInsertMidrolls=0)),this._preloadedMidrolls=null},this.onContentTimeUpdate=function(e){var t,i;this._advertContentDefinition&&(t=this._lastContentTimeUpdate,i=(this._lastContentTimeUpdate=e)-t,-1!==t&&i<3&&0<i&&(this._contentTimeToInsertMidrolls-=e-t),n._log("contentTimeToInsertMidrolls: "+this._contentTimeToInsertMidrolls),i<0&&(this._spot=null,this._preloadedMidrolls=null),this._contentTimeToInsertMidrolls<=0&&this._triggerMidrollsInsertion(e))},this._triggerMidrollsInsertion=function(e){var t,i;null===this._spot?(t=this._findNextMidrollSpot(e))&&(this._preloadedMidrolls=null,this._spot=t,this._preloadMidrolls(t)):e>=parseInt(this._spot)&&this._preloadedMidrolls?(n._log("beginning midrolls insertion, spot: "+this._spot),n._resumeTimeAfterMidrolls=e,n._contentPlaybackQuality=controller.baseLayer.currentPage.variantQuality,controller.baseLayer.currentPage.stopUpdatingBookmark(),vui.getPlayer().stop("insertAd"),this._spot=null,this._lastContentTimeUpdate=-1,this._contentTimeToInsertMidrolls=parseInt(this._advertContentDefinition.minMidRollPlaybackSeconds[0]),i=this._preloadedMidrolls,this._preloadedMidrolls=null,n._onAdvertContentCreateDone(!0,{advertContent:[i]},!0)):n._log("currentTime < spot: "+this._spot)},this._findNextMidrollSpot=function(e){for(var t=this._advertContentDefinition.midRollSpotSecond,i=0;i<t.length;++i)if(0<=t[i]-e)return t[i];return null},this._preloadMidrolls=function(){var e,s;this._requestPending||(this._requestPending=!0,n._log("executing advertContentMidRollGet for spot "+this._spot),e={_type:"advertContentMidRollGet",advertContentId:n._advertContent.advertContentId[0],accountId:d.userId,editionFormat:o,midRollSpotSecond:this._spot,canExcludeDefaultAds:!0},vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel.getIsInKidsMode()&&(e.ageLimit=vui.familyModel.getAgeLimit()||0),vui.gConnectionInstance.getIsShoppableAdsEnabled()&&(e.includeShoppableOffer="true"),e.preferredAdvertVideoQuality=n._selectAdsQuality(this._advertContentDefinition.maxVideoQuality[0],vui.SettingsModel.playbackQualitySetting,n._getMaxContentQuality(),this._requestedVideoQuality),n._log("selected ads quality: "+e.preferredAdvertVideoQuality),s=this,d.doQuery(e,function(e,t,i){s._requestPending=!1,t===d.queryStatus.ST_SUCCESS&&"advertContent"===i._type?(n._log("advertContentMidRollGet success!"),s._preloadedMidrolls=i):(n._log("advertContentMidRollGet failed!"),i&&n._log("advertContentMidRollGet response: "+JSON.encode(i)),n._fail("Unable to retrieve midroll ads"))}))}}switch(this._checkEnabled=function(){var e=void 0===this._enabled;this._enabled=vui.gConnectionInstance.getAVODEnabled(),e&&this._log(this._enabled?"ENABLED":"DISABLED"),e&&this._enabled&&(this._log("attach observers"),vui.getFacade().registerObserver(vui.Facade.PLAYER_TIME,this),vui.getFacade().registerObserver(vui.Facade.PLAYER_STATE,this),vui.getFacade().registerObserver(vui.Facade.PLAYER_ERROR,this))},this.addAvodContentFollowup=function(e){if(this._checkEnabled(),this._enabled){if("contentSearch"!==e._type)throw Error("Invalid query type passed to addAvodContentFollowup()");e.followup=e.followup||[],-1===e.followup.indexOf("advertContentDefinitions")&&e.followup.push("advertContentDefinitions")}},this.addAvodEnabledFollowup=function(e){this._checkEnabled(),this._enabled&&("contentSearch"===e._type?(e.followup=e.followup||[],-1===e.followup.indexOf("advertEnabled")&&e.followup.push("advertEnabled")):"uiEntrySearch"===e._type&&(e.followup=e.followup||[],-1===e.followup.indexOf("contentInfo")&&e.followup.push("contentInfo")))},this.getPromoTagUrl=function(e,t){if(e.isAdvertEnabled&&"true"===e.isAdvertEnabled[0]&&this._enabled){switch(t){case"poster":return vui.images.avod.promo_tag;case"meta":return vui.images.avod.metaPanel_banner;case"detail":return vui.images.avod.detailsPage_banner}throw Error("unknown image type requested "+t)}return null},this.canDisplayWatchWithAdsButton=function(e){return!(e.ownerships||"program"!==vui._.aStr(e.type)&&"episode"!==vui._.aStr(e.type)||!this._getFirstAvailableAdvertContentDefinition(e.advertContentDefinitions)||!(0<this._getPlayableVariants(e).length))},this.play=function(e){if(!e.content.advertContentDefinitions)throw Error("attempt to play with ads content without advertContentDefinitions");this._reset(),this._content=e.content,this._requestedVideoQuality=e.requestedVideoQuality,this._resetBookmark=e.resetBookmark,this._isCast=e.isCast||!1,null!=e.addTheaterToHistory&&(this._addTheaterToHistory=e.addTheaterToHistory);var t=this._getFirstAvailableAdvertContentDefinition(e.content.advertContentDefinitions).advertContentDefinition[0],i={eVar54:vui._.aStr(t.advertContentDefinitionId),product:vui._.aStr(e.content.contentId)},s=vui.m;!s.bookmarkCache.check(vui._.aStr(e.content.contentId))&&s.userSessionStore.getFromStore("zap-api-element-id")&&(i.evars=vui._.getZapApiEvarsFromSessionStore()),"true"===vui._.aStr(this._content.hasClearplay)&&vui.gConnectionInstance.isClearplayEnabled()&&vui.clearPlaySettings.injectTrackingParams(i);var n="event75";vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(i.product=vui._.aStr(e.content.contentId)+";;;",n+=",event166",i.evars=i.evars||{},i.evars.contentType=vui._.aStr(this._content.type),i.evars.contentEligibility="AVOD"),vui.analytics.trackEvent(n,i),this._showWaitingPopup();var a=(vui.vvPlatform.getDeepLinkParams()||{}).campaignId||null,o={};a&&(o.campaignId=a,o.referrer=vui.vvPlatform.clientType+"::"+vui.vvPlatform.appFeatureEnabled()?"walmart":"vudu::"),this._advertContentCreate(t,this._onAdvertContentCreateDone.bind(this),this._omTrackAvodPlayerStart.bind(this),e.transferredFromLightDeviceId,o)},this.onAdPlaybackDone=function(e){if("theaterHide"!==e){var i="renderCompleted"===e;if(this._currentAdSessionIndex<0||this._currentAdSessionIndex>=this._advertStreamingSessions.length)throw Error("AVOD manager not in ad playback state or invalid session index");if(!this._advertContent)throw Error("AVOD manager not in ad playback, _advertContent not defined");this._log("finished ad playback "+this._currentAdSessionIndex);var t=this._advertStreamingSessions[this._currentAdSessionIndex],s=this;this._stopAdStreamingSession(t,function(e,t){s._log("stopped advert streaming session, response: "+JSON.encode(t)),i?"success"===t._type?s._currentAdSessionIndex<s._advertStreamingSessions.length-1?s._startAdPlayback(s._currentAdSessionIndex+1):(s._currentAdSessionIndex=-1,s._startAdContentPlayback("started"!==s._advertContent.state[0])):s._fail("Please try again"):(s._log("ad playback was cancelled"),s._reset())})}else this._log("onAdPlaybackDone ignored theaterHide - restoring after network down")},this.onAdContentPlaybackDone=function(e){this._log("onAdContentPlaybackDone "+e),"renderCompleted"!==e&&"cancelled"!==e||(this._log("completed playback of advert content, resetting AVOD manager"),this._reset())},this._reset=function(){this._log("reset"),this._content=null,this._requestedVideoQuality=null,this._advertStreamingSessions=[],this._advertShoppableOffer=null,this._adType=0,this._clicked=!1,this._currentAdSessionIndex=-1,this._advertContent=null,this._addTheaterToHistory=!0,this._contentPlaybackQuality=null,this._playbackWindowTimer&&(window.clearTimeout(this._playbackWindowTimer),this._playbackWindowTimer=null),this._hideWaitingPopup(),this._midrollsHelper=new e(this),this._resumeTimeAfterMidrolls=null},this._log=function(e){alert("AVOD: "+e)},this._fail=function(e){this._log("failing: "+e),vui.getPlayer().state!==vui.getPlayer().STOPPED&&vui.getPlayer().sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STOPPED),this._reset(),"Theater"===controller.baseLayer.currentTemplate&&controller.goBack(),controller.showPopup("SimpleTextDialog",{title:"Unable to start playback",text:e,buttons:[{label:vui.strings.getText("THEATER_ERROR_POPUP_OK_BUTTON")}],callback:function(){controller.hidePopup()}})},this._resolvePlayableEditionId=function(e){switch(o){case"transportStream":return vui._.aStr(e.transportStreamEditionId);case"dash":return vui._.aStr(e.dashEditionId)}throw Error("AVOD: unknown player type: "+o)},this._addDeviceId=function(e){var t=VUDU.registry.deviceId;switch("dash"===o&&(t=d.directorCsClient.getLightDeviceId()),o){case"transportStream":e.deviceId=t;break;case"dash":e.lightDeviceId=t;break;default:throw Error("AVOD: unknown player type: "+o)}},this._getPlayableVariants=function(e){var t=[],i=this._getFirstAvailableAdvertContentDefinition(e.advertContentDefinitions).advertContentDefinition[0].maxVideoQuality[0];if(i)for(var s=!1,n=0;n<d.qualityArray.length;++n)if(d.qualityArray[n]===i||s){if(s=!0,"uhd"===d.qualityArray[n]&&!vui.gConnectionInstance.getIsUHDSupported())continue;for(var a in e.variants){var o=e.variants[a];a===d.qualityArray[n]&&this._resolvePlayableEditionId(o)&&t.push(o)}}return t},this._selectAdsQuality=function(e,t,i,s){var n,a=d.qualityArray.indexOf(e),o=d.qualityArray.indexOf(t||"uhd"),r=d.qualityArray.indexOf(i),l=d.qualityArray.indexOf(s||"uhd"),u=Math.max(a,o,r,l);return 0<=u&&u<d.qualityArray.length&&(n=d.qualityArray[u]),n},this._selectContentVariant=function(){for(var e=this._getFirstAvailableAdvertContentDefinition(this._content.advertContentDefinitions).advertContentDefinition[0],t=this._selectAdsQuality(e.maxVideoQuality[0],vui.SettingsModel.playbackQualitySetting,this._getMaxContentQuality(),this._requestedVideoQuality),i=this._getPlayableVariants(this._content),s=null,n=d.qualityArray.indexOf(t),a=0;a<i.length;++a)if(d.qualityArray.indexOf(i[a].videoQuality[0])>=n){s=i[a];break}return s},this._advertContentCreate=function(e,s,n,t,i){var a={_type:"advertContentRequest",advertContentDefinitionId:vui._.aStr(e.advertContentDefinitionId),accountId:d.userId,editionFormat:o};vui.gConnectionInstance.getKidsModeEnabled()&&vui.familyModel&&vui.familyModel.getIsInKidsMode()&&(a.ageLimit=vui.familyModel.getAgeLimit()||0),vui.gConnectionInstance.getIsShoppableAdsEnabled()&&(a.includeShoppableOffer="true"),t&&""!=t&&(a.transferredFromLightDeviceId=t),i&&i.campaignId&&(a.campaignId=i.campaignId),i&&i.referrer&&(a.referrer=i.referrer),a.preferredAdvertVideoQuality=this._selectAdsQuality(e.maxVideoQuality[0],vui.SettingsModel.playbackQualitySetting,this._getMaxContentQuality(),this._requestedVideoQuality),this._log("selected ads quality: "+a.preferredAdvertVideoQuality),this._addDeviceId(a),d.doQuery(a,function(e,t,i){s(t===d.queryStatus.ST_SUCCESS,i),t===d.queryStatus.ST_SUCCESS&&i.advertContent&&i.advertContent[0]&&n(i.advertContent[0])})},this._onAdvertContentCreateDone=function(e,t,i){var s=t.advertContent&&t.advertContent[0];if(e&&s){var n=(this._advertContent=s).advertStreamingSessions&&s.advertStreamingSessions[0]&&s.advertStreamingSessions[0].advertStreamingSession,a=(n=n||[]).length;this._log("received advert sessions: "+a),this._advertStreamingSessions=n,this._advertStreamingSessions.each(function(e){e._beaconsSent=e._beaconsSent||{}});var o=window.parseDate(this._advertContent.expirationTime[0])-new Date(VUDU.vuduTime());this._log("time window till advert playback expiration, seconds: "+o/1e3),this._playbackWindowTimer&&window.clearTimeout(this._playbackWindowTimer),this._playbackWindowTimer=window.setTimeout(this.expireAvodPlayback.bind(this),o);var r=this._getFirstAvailableAdvertContentDefinition(this._content.advertContentDefinitions).advertContentDefinition[0];return this._midrollsHelper.init(r,0===a),void(0!==a?this._startAdPlayback(0,i):this._startAdContentPlayback("started"!==s.state[0]))}t&&this._log("invalid advertContent:"+JSON.encode(t)),this._fail("Unable to start advert enabled playback")},this._omTrackAvodPlayerStart=function(e){var t={product:vui._.aStr(e.contentId)};t.evars={advertContentID:vui._.aStr(e.advertContentId)},vui.analytics.trackEvent("event188",t)},this._startAdPlayback=function(o,r){if(o<0||o>=this._advertStreamingSessions.length)throw Error("invalid adSessionIndex");this._log("starting ad session playback: "+o),this._currentAdSessionIndex=o;var l=this;this._startAdStreamingSession(this._advertStreamingSessions[o],function(e,t){var i,s,n,a;e&&"success"===t._type?(l._log("playing advert!"),i=l._advertStreamingSessions[o].advert[0],l._clicked=!1,l._advertStreamingSessions[o].advert&&i&&i.advertShoppableOffer?l._advertShoppableOffer=i.advertShoppableOffer[0]:l._advertShoppableOffer=null,l._advertShoppableOffer&&"chromecast"!==vui.vvPlatform.clientType?l._advertShoppableOffer.clickThrough?l._adType=CLICK_AD_TYPE.LEARN_MORE:l._advertShoppableOffer.walmartOfferId?l._adType=CLICK_AD_TYPE.ADD_TO_CART:l._advertShoppableOffer.contentId?vui.getModel().getMovieInfo(l._advertShoppableOffer.contentId,function(e){var t,i,s,n,a,o=e&&e.get();o&&(t=o.ownerships,i=o.validOffers,s=e.hasBeenPreOrdered(),n=e.preOrdersAvailable(),a=e.isAvailableHereAndNow(),t?this._advertShoppableOffer=null:!s&&n?this._adType=CLICK_AD_TYPE.PREORDER_CONTENT_AD:!s&&i&&a?this._adType=CLICK_AD_TYPE.CONTENT_AD:this._advertShoppableOffer=null)}.bind(l)):l._adType=0:l._adType=0,s=l._getFirstAvailableAdvertContentDefinition(l._content.advertContentDefinitions).advertContentDefinition[0],n=vui._.aStr(s.advertContentDefinitionId),l._hideWaitingPopup(),a=l._isCast&&0===o&&!r,vui.clearPlaySettings&&r&&(vui.clearPlaySettings.dontShowCPNotice=!0),"chromecast"===vui.vvPlatform.clientType&&window.ancinus.PlayerProxy.getPlayerProxy().setIgnoreEnded(!1),controller.goToPage("Theater",{data:{type:"advert",data:i,contentData:l._content,contentId:l._content.contentId[0],editionId:l._resolvePlayableEditionId(i),totalAds:l._advertStreamingSessions.length,adNumber:o+1,advertContentDefinitionId:n,advertContentId:l._advertContent.advertContentId[0],dontFakeCastLoad:a}},!l._addTheaterToHistory),l._addTheaterToHistory=!1):(l._log("_startAdStreamingSession failed: "+JSON.encode(t)),l._fail("Unable to play advert"))})},this.getShoppableAdsData=function(e){if(vui.gConnectionInstance.getIsShoppableAdsEnabled()&&e.clickThrough){var t={accountId:vui._.aStr(e.accountId),advertContentId:vui._.aStr(e.advertContentId),advertStreamingSessionId:vui._.aStr(e.advertStreamingSessionId),clickThrough:vui._.aStr(e.clickThrough)};return e.clickTracking&&(t.clickTracking=e.clickTracking),t}return null},this.isAdClicked=function(){return this._clicked},this.isShoppableAd=function(){return this._advertStreamingSessions[this._currentAdSessionIndex]&&this._advertShoppableOffer},this.getShoppableAdDelaySecs=function(){return this.isShoppableAd()?this._advertShoppableOffer&&this._advertShoppableOffer.spotSecond?parseInt(this._advertShoppableOffer.spotSecond,10):2:0},this.getShoppableAdProductInfo=function(){if(!this.isShoppableAd())return null;if(!this._advertShoppableOffer)return this._log("No SHOPPABLE Ad offer"),null;var e={},t=this._advertShoppableOffer;return e.adDelay=t.spotSecond||2,e.description=t.description,e.adType=this._adType,t.price?e.price="$"+t.price:e.price=null,"true"===vui._.aStr(t.hasImage)&&(e.productImageUrl=vui.getModel().getShoppableAdImageUrlFromId(t.advertShoppableOfferId,window.vui.ResDef.TheaterControls.SHOPPABLE_ADD_IMAGE_SIZE)),e.walmartOfferId=t.walmartOfferId,e.contentId=t.contentId,e},this.notifyAdClick=function(t){this._clicked=!0;var e=this._advertStreamingSessions[this._currentAdSessionIndex];vui.analytics.trackEvar({avodClickAdId:e&&vui._.aStr(e.advertId)},{events:"event153",product:vui._.aStr(this._content.contentId)});var i=e&&e.advertStreamingSessionId;i?(vui.getModel().advertClickNotificationSend(e.advertContentId,i,vui._.aStr(this._advertShoppableOffer.clickThrough),function(e){t&&(e===vui.getModel().queryStatus.ST_SUCCESS?t("success"):t("failed"))}),vui.getModel().adClickTrack(i)):t&&(t("failed"),this._log("No advertStreamingSessionId, can not notify Learn More click"))},this.notifyAddToCartClick=function(t){this._clicked=!0;var e,i=this._advertStreamingSessions[this._currentAdSessionIndex];i&&this._advertShoppableOffer&&this._advertShoppableOffer.walmartOfferId?(vui.analytics.trackEvar({avodClickAdId:i&&vui._.aStr(i.advertId),mmPurchaseId:this._advertShoppableOffer.walmartOfferId},{events:"event156",product:vui._.aStr(this._content.contentId)}),vui.getModel().advertAddtoCartSend(this._advertShoppableOffer.walmartOfferId,function(e){this._log("addToCartCallback status = "+e),"success"===vui._.aStr(e)&&vui.analytics.trackEvar({avodClickAdId:i&&vui._.aStr(i.advertId)},{events:"event157"}),t&&t(e)}.bind(this)),(e=i&&i.advertStreamingSessionId)?vui.getModel().adClickTrack(e):this._log("No advertStreamingSessionId, ad click not tracked")):t&&t("failed")},this.notifyContentAdClick=function(){this._clicked=!0;var e=this._advertStreamingSessions[this._currentAdSessionIndex],t=e&&e.advertStreamingSessionId;t?vui.getModel().adClickTrack(t):this._log("No advertStreamingSessionId, content buy not tracked"),this._advertShoppableOffer.contentId&&vui.analytics.trackEvar({avodClickAdId:e&&vui._.aStr(e.advertId),avodMovieAdId:this._advertShoppableOffer.contentId},{events:"event155",product:vui._.aStr(this._content.contentId)})},this._startAdStreamingSession=function(e,s){var t={_type:"advertStreamingSessionStart",advertContentId:e.advertContentId[0],advertStreamingSessionId:e.advertStreamingSessionId[0],accountId:d.userId};this._log("starting advert streaming session"),d.doQuery(t,function(e,t,i){s(t===d.queryStatus.ST_SUCCESS,i)})},this._stopAdStreamingSession=function(e,s){var t={_type:"advertStreamingSessionStop",advertContentId:e.advertContentId[0],advertStreamingSessionId:e.advertStreamingSessionId[0],accountId:d.userId};this._log("stopping advert streaming session"),d.doQuery(t,function(e,t,i){s(t===d.queryStatus.ST_SUCCESS,i)})},this._startAdContentPlayback=function(e){if(!this._advertContent)throw Error("AVOD _advertContent is null, attempt to play ad content with no session");if(-1!==this._currentAdSessionIndex)throw Error("AVOD, _currentAdSessionIndex invalid");var i;this._log("starting ad content playback"),e?(i=this)._startAdContentStreamingSession(this._advertContent.advertContentId[0],function(e,t){e&&"success"===t._type?(i._log("ad content streaming session started!"),i._callPlayAdContent()):(i._log("unable to start advert content streaming session: "+JSON.encode(t)),i._fail("Unable to start ad enabled content playback"))}):this._callPlayAdContent()},this._callPlayAdContent=function(){var e={product:vui._.aStr(this._content.contentId)};vui.analytics.trackEvent("event189",e);var t,i=this._getPlayableVariants(this._content),s=this._selectContentVariant();this._contentPlaybackQuality&&(t=this,i.each(function(e){e.videoQuality[0]===t._contentPlaybackQuality&&(s=e)})),this._hideWaitingPopup();var n=0==this._advertStreamingSessions.length,a=this._isCast&&n;"chromecast"===vui.vvPlatform.clientType&&window.ancinus.PlayerProxy.getPlayerProxy().setIgnoreEnded(!1),controller.goToPage("Theater",{data:{type:"adcontent",data:this._content,variant:s,variantId:s.contentVariantId[0],editionId:this._resolvePlayableEditionId(s),advertContentId:this._advertContent.advertContentId[0],totalAds:this._advertStreamingSessions.length,adNumber:this._currentAdSessionIndex+1,maxQuality:i[0].videoQuality[0],startTime:this._resumeTimeAfterMidrolls?1e3*this._resumeTimeAfterMidrolls:void 0,firstRenderPlayback:n,dontFakeCastLoad:a},resetBookmark:this._resetBookmark},!this._addTheaterToHistory),this._addTheaterToHistory=!1},this._startAdContentStreamingSession=function(e,s){var t={_type:"advertContentStreamingSessionStart",advertContentId:e,accountId:d.userId};this._log("starting advert content streaming session"),d.doQuery(t,function(e,t,i){s(t===d.queryStatus.ST_SUCCESS,i)})},this.notifyObserver=function(e){if(0<=this._currentAdSessionIndex&&this._currentAdSessionIndex<this._advertStreamingSessions.length){var t=this._advertStreamingSessions[this._currentAdSessionIndex];if(e.getName()===vui.Facade.PLAYER_TIME){var i=parseInt(e.getBody())/1e3;"chromecast"===vui.vvPlatform.clientType&&vui.getPlayer().totalTime/1e3-2<i&&window.ancinus.PlayerProxy.getPlayerProxy().setIgnoreEnded(!0),this._handleAdvertTimeNotification(t,i)}else if(e.getName()==vui.Facade.PLAYER_STATE)switch(e.getBody()){case vui.widgets.Player.PAUSED:this._handleAdvertPlaybackStateNotification(t,"pause");break;case vui.widgets.Player.RESUMED:this._handleAdvertPlaybackStateNotification(t,"resume")}}else{e.getName()===vui.Facade.PLAYER_TIME&&"adcontent"===vui.getPlayer().contentType?(i=parseInt(e.getBody())/1e3,this._handleAdContentTimeNotification(i)):e.getName()===vui.Facade.PLAYER_ERROR&&this._reset()}},this.expireAvodPlayback=function(){this._log("expire playback window timer hit"),vui.getPlayer().sendNotification(vui.Facade.PLAYER_STATE,vui.widgets.Player.STOPPED),this._reset(),controller.showPopup("SimpleTextDialog",{title:"Session Expired",text:"Play the title again to continue watching.",buttons:[{label:"OK"}],callback:function(){controller.hidePopup()}})},this._handleAdvertTimeNotification=function(e,t){var i,s,n;isNaN(t)||(i=e.advert[0],s=parseInt(i.lengthSeconds[0],10),(n=this._checkTimeReportBeacon(t,s))&&!e._beaconsSent[n]&&(e._beaconsSent[n]=!0,this._fireBeacon(e,n)))},this._handleAdvertPlaybackStateNotification=function(e,t){this._fireBeacon(e,t)},this._checkTimeReportBeacon=function(e,t){for(var i in vui.AvodManager.BEACON_TYPES){var s=vui.AvodManager.BEACON_TYPES[i];if(s<=1){var n=s*t;if(Math.abs(e-n)<=vui.AvodManager.REPORT_TIME_BEACON_TOLERANCE)return i}}return null},this._fireBeacon=function(e,t){var i=this;i._log("send beacon type: "+t);var s=0;e.advertBeacons&&e.advertBeacons[0]&&e.advertBeacons[0].advertBeacon&&e.advertBeacons[0].advertBeacon.filter(function(e){return e.eventType&&e.eventType[0]===t&&e.beaconUrl}).each(function(e){s++,e.beaconUrl.each(function(e){i._invokeBeaconUrl(e)})}),0===s&&i._log("current ad streaming session has no beacons of type "+t)},this._invokeBeaconUrl=function(e){this._log("Firing beacon url: "+e);var t=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){t._log("Beacon request completed")},i.onerror=function(e){t._log("Beacon request failed "+JSON.encode(e))},i.send(null)},this._getFirstAvailableAdvertContentDefinition=function(e){if(e&&e.length)for(var t=0;t<e.length;++t)if(e[t].advertContentDefinition&&e[t].advertContentDefinition[0]){var i=window.parseDate(e[t].advertContentDefinition[0].startTime[0]),s=window.parseDate(e[t].advertContentDefinition[0].stopTime[0]),n=new Date(VUDU.vuduTime());if(i<n&&n<s)return e[t]}return null},this._showWaitingPopup=function(){controller.showPopup("WaitDialog",{})},this._hideWaitingPopup=function(){controller.baseLayer.currentDialog&&"WaitDialog"===controller.baseLayer.currentDialog.dialogType&&controller.hidePopup()},this._handleAdContentTimeNotification=function(e){this._midrollsHelper.onContentTimeUpdate(e)},this._getMaxContentQuality=function(){return this._getPlayableVariants(this._content)[0].videoQuality[0]},vui.AvodManager.BEACON_TYPES={start:0,firstQuartile:.25,midpoint:.5,thirdQuartile:.75,complete:1,pause:1e3,resume:1001},vui.AvodManager.REPORT_TIME_BEACON_TOLERANCE=2,this._content=null,this._advertStreamingSessions=[],this._currentAdSessionIndex=-1,this._advertContent=null,this._playbackWindowTimer=null,this._advertShoppableOffer=null,this._adType=0,this._addTheaterToHistory=!0,this._contentPlaybackQuality=null,this._midrollsHelper=null,this._resumeTimeAfterMidrolls=null,this._isCast=!1,this._clicked=!1,o){case"transportStream":case"dash":break;default:throw Error("AVOD: unknown player type passed!")}},window.doEmailActivation=!0,window.doOpeningPitch=!0,vui.movie20=!0,window.controller=new vui.Controller,window.loadVuduAppFinal=function(){window.isIpad&&document.addEventListener("touchmove",function(e){e.preventDefault()},!0),vui.init(),updateVuduSplashScreen("splash",vui.strings.getTransformedText("SPLASH_CONNECTING_DOT_DOT"),null,null,null),controller.goToLoadingPage()},window.unloadVuduApp=function(){VUDU.log("LOGSTRING appExit appName=movieUi"),vui.netLogger.flushLogs(),vudu&&(alert("VUDU: unloadVuduApp"),vudu.stopEvents()),vui.getPlayer().destroy()};var launchApp=function(e){e?window.loadVuduAppFinal():(updateVuduSplashScreen("error",vui.strings.getText("SPLASH_FAILED_TO_CONNECT_TO_THE_NETWORK"),vui.strings.getText("SPLASH_PLEASE_PRESS_RETURN_AND_CHECK"),vui.strings.getText("SPLASH_CURL_CODE_COLON")+" "+vui.strings.getText("SPLASH_TIMEOUT"),getSystemInfoMoreInfo()),window.vuduServiceErrorHasOccurred=!0)},loadSystemInfo=function(){vui.vvPlatform.getSystemInfo(launchApp)};window.addEventListener("onPlatformLoaded",function(){window.loadCSS(loadSystemInfo)}),vui.vvPlatform.startPlatformLoad(),vui.widgets.ClickAdsButton=new Class({Extends:vui.widgets.ImageActionButton,name:"vui.widgets.ClickAdsButton",init:function(e){this.params=e||{},this.params.defaultClassName="click_ads_button btn_bg_default btn_bg_size1_default",this.params.selectClassName="click_ads_button btn_bg_select btn_bg_size1_select",this.parent(this.params),this.label.className=this.label.className+" font22"},bind:function(e){this.setLabel(vui.strings.transformCase(e.label)),this.setDescription(e.desc)},onSelect:function(){this.parent(),this.desc&&setTimeout(function(){this.desc=""}.bind(this),0),vui.executeOnContainer(this.parentWidget,"showHint")},onDeselect:function(){this.parent(),vui.executeOnContainer(this.parentWidget,"hideHint")},onAction:function(){vui.executeOnContainer(this.parentWidget,"onClickAction")}});var CLICK_AD_TYPE={LEARN_MORE:1,ADD_TO_CART:2,CONTENT_AD:3,PREORDER_CONTENT_AD:4};vui.widgets.ClickAdsProductInfo=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ProductInfo",elemClassName:"click_ads_product_info_container",init:function(){this.productImg=createImg({className:"product_img"},this.elem),this.productText=createDiv({className:"fontWhite24"},this.elem),this.adSparkle=createImg({className:"ad_sparkle",src:vui.images.ad_sparkle,hidden:!0},this.elem),this.price=createDiv({className:"product_price fontWhite36",hidden:!0},this.elem),this.hintText=vui.strings.getText("SA_HINT","OK"),this.hint=createDiv({className:"hint font20",text:this.hintText,hidden:!0},this.elem),this.ctaButton=new vui.widgets.ClickAdsButton,this.attachChild(this.ctaButton)},bind:function(e){var t,i;e&&((this.params=e).productImageUrl?(this.productImg.src=e.productImageUrl,this.productImg.style.display="block"):this.productImg.style.display="none",this.adType=e.adType,e.description&&(this.productText.innerHTML=e.description,this.productText.className+=e.price?" product_text":" product_text_no_price"),this.adSparkle.hidden=e.adType!==CLICK_AD_TYPE.ADD_TO_CART,e.price?(this.price.innerHTML=e.price,this.price.hidden=!1,e.adType===CLICK_AD_TYPE.ADD_TO_CART?this.price.style.left="52px":this.price.style.left="unset"):this.price.hidden=!0,t=vui.strings.getText("SA_LEARN_MORE"),e.adType===CLICK_AD_TYPE.ADD_TO_CART?t=vui.strings.getText("SA_ADD_TO_CART"):e.adType===CLICK_AD_TYPE.PREORDER_CONTENT_AD?t=vui.strings.getText("SA_PREORDER"):e.adType===CLICK_AD_TYPE.CONTENT_AD&&(t=vui.strings.getText("SA_BUY")),i="",i=this.productText.innerHTML&&this.price.innerHTML?this.productText.innerHTML+", "+window.getPriceStr(this.price.innerHTML)+", "+this.hintText+", "+t:this.productText.innerHTML?this.productText.innerHTML+", "+this.hintText+", "+t:this.hintText+", "+t,this.ctaButton.bind({label:t,desc:i}))},onClickAction:function(){var e="onLearnMore";this.adType===CLICK_AD_TYPE.ADD_TO_CART?e="onAddToCart":this.adType!==CLICK_AD_TYPE.CONTENT_AD&&this.adType!==CLICK_AD_TYPE.PREORDER_CONTENT_AD||(e="onBuyContent"),vui.executeOnContainer(this.parentWidget,e,this.params)},showHint:function(){this.hint.hidden=!1},hideHint:function(){this.hint.hidden=!0}}),vui.widgets.ClickAdsTextDisplay=new Class({Extends:vui.widgets.Container,name:"vui.widgets.ClickAdsTextDisplay",elemClassName:"click_ads_text_display_container",init:function(){this.checkMark=createImg({className:"check_mark"},this.elem),this.textBody=createDiv({className:"fontWhite24 text_body"},this.elem),this.selectable=!1},bind:function(e){e&&(this.textBody.innerHTML=e.textVal||"",e.textStyle&&(this.textBody.className="text_body "+e.textStyle),this.checkMark.src=e.icon||"")}}),vui.widgets.AdInfo=new Class({Extends:vui.widgets.Container,name:"vui.widgets.AdInfo",elemClassName:"ad_info_container",init:function(){this.textDisplay=new vui.widgets.ClickAdsTextDisplay,this.attachChild(this.textDisplay),this.productInfo=new vui.widgets.ClickAdsProductInfo,this.attachChild(this.productInfo),this.hide()},hide:function(){this.selectable=!1,this.parent()},onDirectionDown:function(){vui.executeOnContainer(this.parentWidget,"onClickAdMore")},display:function(e){e&&(this.productInfo.bind(e),this.productInfo.show(),this.textDisplay.hide(),this.selectable=!0,this.show())},displayInfoSent:function(){var e={};e.textVal=vui.strings.getText("SA_INFO_SENT"),e.icon=vui.images.ad_checkmark,this.displayMessage(e)},displayAddToCartSuccess:function(){var e={};e.textVal=vui.strings.getText("SA_PRODUCT_ADDED"),e.icon=vui.images.ad_checkmark,this.displayMessage(e)},displayAddToCartError:function(){var e={};e.textVal=vui.strings.getText("SA_ADD_TO_CART_FAILED"),e.icon=vui.images.ad_error,this.displayMessage(e)},displayError:function(){var e={textVal:"Sorry, something doesn't seem quite right, please try again later."};e.icon=vui.images.ad_error,this.displayMessage(e)},displayMessage:function(e){this.productInfo.hide(),this.textDisplay.bind(e),this.textDisplay.show(),this.selectable=!1,setTimeout(function(){vui._.setAriaLabel(e.textVal)},0)}}),vui.UserSessionStore=new Class({initialize:function(){alert("UserSessionStore initialized. Delete all old data"),this.deleteAllFromStore()},addToStore:function(e,t){window.sessionStorage.setItem(e,t)},getFromStore:function(e){return window.sessionStorage.getItem(e)},deleteFromStore:function(e){window.sessionStorage.removeItem(e)},deleteAllFromStore:function(){window.sessionStorage.clear()}});var vui=vui||{};vui.xboxModel=function(){var _,p=function(e,t,i,s){return e&&e[t]&&e[t][i]?e[t][i]:s},T=function(e){var t;Windows.Xbox.Tvod.Product.removeEventListener("productpurchased",T,!1),e&&e.type&&"productpurchased"===e.type&&e.target&&e.target.receipt&&(t=e.target.receipt,i(t))},i=function(e){if(console.log("confirming the reservation"),!vui.getModel().userId)return alert("Missing user ID"),!1;function s(e,t){var i;"ok"===e||"alreadyPurchased"===e?(alert("A successful purchase"),i=vui.getModel(),vui.myOffers.refresh(),i.conditionalOfferCache=new vui.ConditionalOfferCache(i,function(){vui.Model.PopulateOwnedMovieCache(function(){!function(e,t,i){var s,n,a,o,r,l,u,d,c;"ok"==e?(s="purchase,event15",n=i.offer.contentId[0]+";1;"+i.offer.price[0],a={},i.purchasePlan&&i.purchasePlan[0]&&(o=i.purchasePlan[0],0<(r=(parseFloat(o.serviceCreditAmount&&o.serviceCreditAmount[0])||0)+(parseFloat(o.realMoneyAmount&&o.realMoneyAmount[0])||0)+(parseFloat(o.giftCardAmount&&o.giftCardAmount[0])||0))?(s+=",event14",n=n+";event15="+(r=Math.floor(100*r)/100)):n+=";event15=0"),u=l="",t&&(t.state&&(l=vui._.aStr(t.state)),t.expirationTime&&(u=getMMDDYYYYDateString(vui._.aStr(t.expirationTime)))),vui.m.userSessionStore.getFromStore("zap-api-element-id")&&(a=vui._.getZapApiEvarsFromSessionStore()),vui.analytics.trackEvent(s,{product:n,evars:a}),alert("WE DONT HAVE A purchase CALLBACK"),d={movie:i.movie,variant:i.variant,offer:i.offer},c={movie:i.movie,variant:i.variant,purchasePlan:o,dmaStatus:l,dmaExpirationDate:u,offer:i.offer,playCallback:function(){alert("PLAY CALLBACK!"),controller.hidePopup(),(new vui.ContentActions).onClickPlay(d)},cancelCallback:function(){alert("CANCEL CALLBACK!"),controller.hidePopup(),i.successCallback&&i.successCallback()}},controller.showPopup("TransactionSuccessDialog",c)):(vui.analytics.showDialog(window.APPNAME+":Transaction Purchase Failure Dialog"),this.handlePurchaseStatus(e,function(){i.callback&&i.callback("cancel")},i))}(e,t,_)},_.offer.contentVariantId[0])}),vui.fund.refresh()):(this._xboxPurchaseMovieCallback(e),alert("An unsuccessful purchase: "+e+", desc:"+data.description))}var t={_type:"xboxPurchaseReservationConfirm",receiptToken:e,userId:vui.getModel().userId,xboxType:"xboxOne"};vui.getModel().doQuery(t,function(e,t,i){"ok"===(t=p(i,"status",0,""))||"alreadyPurchased"===t?vui.Model.dmaCheck(_.movie.contentId[0],t,s,_.offer.offerType[0]):console.log("Something went wrong with the purchase: ",i)}.bind(this))};return{getXboxPayment:function(m){var g=new vui.ContentActions;alert("pp is "+JSON.encode(m.purchasePlan)),vui.ActivationController.getXboxTokenAsync("https://purchasetvod-gw.xboxlive.com").then(function(e){var t,i,s,n,a,o,r,l,u,d,c,h;if(e.properties.Privileges.split(" ").contains("245")){if(!vui.getModel().userId)return alert("Missing user ID"),!1;var v={_type:"xboxPurchaseReserve",description:(a=m,o="",r=parseFloat(p(a.purchasePlan,"subTotal",0,"0")),l=parseFloat(p(a.purchasePlan,"realMoneyAmount",0,"0")),u=parseFloat(p(a.purchasePlan,"serviceCreditAmount",0,"0"))+l,d=parseInt(p(a.offer,"licenseSeconds",0,"0"),10)/86400,c=parseInt(p(a.offer,"viewingSeconds",0,"0"),10)/3600,h=p(a.offer,"offerType",0,"ptr").toUpperCase(),0<r&&(0<u&&(o+="$"+u+" in credits will be applied towards this purchase. "),250<(o+="PTR"===h?"This title will be available for "+d+" days. Once you begin playing, you will have "+c+" hours to finish watching.":"When the transaction is complete, the title will be available in the My Vudu section of your Vudu enabled devices.\n\n").length&&o.substr(0,250)),o),expectedPurchasePlan:m.purchasePlan,lightDeviceId:vui.getModel().directorCsClient.getLightDeviceId(),offerId:m.offer.offerId,title:(i="",s=36,n="ptr"===(t=m).offer.offerType[0]?"Rent ":"Own ",i=(n+=t.variant.videoQuality[0].toUpperCase())+": "+t.movie.title[0],0<parseFloat(p(t.purchasePlan,"needRealMoneyAmount",0,"0"))&&(s=52),i.length>s-3&&(i=i.substr(0,s-3),i+="..."),i),userId:vui.getModel().userId,xboxType:"xboxOne"};_=m,vui.getModel().doQuery(v,function(e,t,i){console.log("Have a reservation"),this.xboxPurchaseReservation=i;var s,n,a=p(i,"purchaseStatus",0,"");"ok"===a?(s=p(i,"purchaseId",0,""),n=p(i,"orderToken",0,""),console.log("Reservation ok, purchaseId: "+s),Windows.Xbox.Tvod.Product.addEventListener("productpurchased",T,!1),Windows.Xbox.Tvod.Product.showPurchaseAsync(vui.vvPlatform.currentUser.user,n).done(function(){controller.hidePopup()},function(e){console.log("error: "+e.message);var t={_type:"xboxPurchaseReservationCancel",purchaseId:s,text:e.message,userId:vui.getModel().userId};vui.getModel().doQuery(t,function(e,t,i){"success"===i._type?console.log("successfully cancelled.",i):console.log("There was an error during reservation cancel.",i),controller.hidePopup()})})):(console.log("bad reservation: "+a),controller.hidePopup(),g.showSimpleDialog("There was an error with your purchase: "+a))}.bind(this))}else console.log("The user isn't allowed to purchase."),controller.hidePopup(),g.showSimpleDialog("You cannot buy or download because of how your account is set up. This can be changed in your privacy and online safety settings on Xbox.com")})}}}();